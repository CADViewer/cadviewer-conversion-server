var a24_0x564ff4=a24_0x5ac1;(function(_0x4384b7,_0x15c4ae){var _0x31eb41=a24_0x5ac1,_0x52fc9f=_0x4384b7();while(!![]){try{var _0x2c67a3=parseInt(_0x31eb41(0xc8))/0x1+-parseInt(_0x31eb41(0xc7))/0x2*(-parseInt(_0x31eb41(0xe9))/0x3)+parseInt(_0x31eb41(0xbf))/0x4*(-parseInt(_0x31eb41(0xda))/0x5)+-parseInt(_0x31eb41(0xe4))/0x6+parseInt(_0x31eb41(0xde))/0x7*(parseInt(_0x31eb41(0xce))/0x8)+-parseInt(_0x31eb41(0xd7))/0x9+parseInt(_0x31eb41(0xd5))/0xa;if(_0x2c67a3===_0x15c4ae)break;else _0x52fc9f['push'](_0x52fc9f['shift']());}catch(_0x21803e){_0x52fc9f['push'](_0x52fc9f['shift']());}}}(a24_0xb85f,0x7bdd6));function a24_0xb85f(){var _0x5be684=['1106049yssGKm','ServerLocation','\x20first\x20index:','ServerFrontEndUrl','ServerUrl','file_content','4371468lJFFtS','X\x20\x20','Router','replace','savefile:','21891MoAHQl','Access-Control-Allow-Origin','76WPBPNy','file','length','Succes','open','cvjs_debug','https:','error\x20-\x20savefile','272zestnQ','481338LrZarI','dirname','file\x20written','close','send','http:','8KJHrtl','mkdirSync','after:','join','write','indexOf','Access-Control-Allow-Origin\x20:','6944970WFawKi','log','1983690fqojLA','ServerFrontEndUrlAsAllowedOriginOnly','error\x20savefile:\x20','228920dJpAdj','Access-Control-Allow-Origin\x20:\x20*','substring','no\x20serverlocation\x20in\x20part,\x20or\x20begins\x20after\x203rd\x20item'];a24_0xb85f=function(){return _0x5be684;};return a24_0xb85f();}function a24_0x5ac1(_0xa27c23,_0x291df2){var _0xb85f78=a24_0xb85f();return a24_0x5ac1=function(_0x5ac1cc,_0x1eb146){_0x5ac1cc=_0x5ac1cc-0xbe;var _0x45cd45=_0xb85f78[_0x5ac1cc];return _0x45cd45;},a24_0x5ac1(_0xa27c23,_0x291df2);}var config=require('../CADViewer_config.json'),cvjs_debug=config[a24_0x564ff4(0xc4)],express=require('express'),router=express[a24_0x564ff4(0xe6)]();const fs=require('fs'),path=require('path');function createDirRecursively(_0x27c721){var _0x557fc6=a24_0x564ff4;!fs['existsSync'](_0x27c721)&&(createDirRecursively(path[_0x557fc6(0xd1)](_0x27c721,'..')),fs[_0x557fc6(0xcf)](_0x27c721));}router['post']('/savefile',(_0x31e4a3,_0xa01d27)=>{var _0x40e854=a24_0x564ff4;if(config[_0x40e854(0xd8)]==!![]){_0xa01d27['setHeader'](_0x40e854(0xbe),config['ServerFrontEndUrl']);if(cvjs_debug)console['log'](_0x40e854(0xd4)+config[_0x40e854(0xe1)]);}else{_0xa01d27['setHeader'](_0x40e854(0xbe),'*');if(cvjs_debug)console[_0x40e854(0xd6)](_0x40e854(0xdb));}try{var _0x1beb69=_0x31e4a3['body'][_0x40e854(0xc0)],_0x3a662f=_0x31e4a3['body'][_0x40e854(0xe3)],_0x230cdd=Buffer['from'](_0x3a662f),_0x5dc601=![];console['log'](_0x40e854(0xe8)+_0x1beb69+_0x40e854(0xe0)+_0x1beb69[_0x40e854(0xd3)]('/'));if(_0x1beb69[_0x40e854(0xd3)](_0x40e854(0xcd))>-0x1||_0x1beb69[_0x40e854(0xd3)](_0x40e854(0xc5))>-0x1){}else{if(_0x1beb69[_0x40e854(0xd3)](':')>0x0&&_0x1beb69[_0x40e854(0xd3)](':')<0x3){if(_0x1beb69[_0x40e854(0xd3)]('/')==0x0)_0x1beb69=_0x1beb69['substring'](0x1);}else(_0x1beb69[_0x40e854(0xd3)]('/')==0x0||_0x1beb69['indexOf']('\x5c')==0x0)&&(console[_0x40e854(0xd6)]('first\x20part\x20is\x20/\x20or\x20\x5c\x20,\x20it\x20is\x20at:'+_0x1beb69[_0x40e854(0xd3)](config[_0x40e854(0xdf)])),(_0x1beb69[_0x40e854(0xd3)](config[_0x40e854(0xdf)])==-0x1||_0x1beb69[_0x40e854(0xd3)](config[_0x40e854(0xdf)])>0x3)&&(console['log'](_0x40e854(0xdd)),_0x1beb69=config[_0x40e854(0xdf)]+_0x1beb69,_0x5dc601=!![]));}console[_0x40e854(0xd6)](_0x40e854(0xd0)+_0x1beb69);var _0x9594d5=path[_0x40e854(0xc9)](_0x1beb69);createDirRecursively(_0x9594d5),_0x1beb69=decodeURI(_0x1beb69),_0x1beb69=_0x1beb69[_0x40e854(0xe7)](/%3A/g,':'),_0x1beb69=_0x1beb69[_0x40e854(0xe7)](/%2F/g,'/'),_0x1beb69=_0x1beb69['replace'](/%20/g,'\x20');if(config[_0x40e854(0xc4)])console[_0x40e854(0xd6)]('HERE\x20'+_0x1beb69+'\x20X'+config[_0x40e854(0xe1)]+_0x40e854(0xe5)+config[_0x40e854(0xe2)]);if(_0x1beb69[_0x40e854(0xd3)](config[_0x40e854(0xe1)])==0x0){if(_0x5dc601){}else _0x1beb69=config['ServerLocation']+_0x1beb69[_0x40e854(0xdc)](config[_0x40e854(0xe1)][_0x40e854(0xc1)]);}else _0x1beb69['indexOf'](config[_0x40e854(0xe2)])==0x0&&(_0x1beb69=config[_0x40e854(0xdf)]+_0x1beb69[_0x40e854(0xdc)](config[_0x40e854(0xe2)]['length']));_0x1beb69=_0x1beb69[_0x40e854(0xe7)](/\\/g,'/');if(config['cvjs_debug'])console[_0x40e854(0xd6)](_0x40e854(0xe8)+_0x1beb69);fs[_0x40e854(0xc3)](_0x1beb69,'w',function(_0x2d1aac,_0x380612){var _0x12c95c=_0x40e854;fs[_0x12c95c(0xd2)](_0x380612,_0x230cdd,0x0,_0x230cdd[_0x12c95c(0xc1)],null,function(_0x34efc6){var _0x46bfe9=_0x12c95c;if(_0x34efc6){if(config[_0x46bfe9(0xc4)])console['log'](_0x46bfe9(0xd9)+_0x34efc6);_0xa01d27[_0x46bfe9(0xcc)](_0x46bfe9(0xd9)+_0x34efc6);}else fs[_0x46bfe9(0xcb)](_0x380612,function(){var _0x3070a1=_0x46bfe9;if(config[_0x3070a1(0xc4)])console[_0x3070a1(0xd6)](_0x3070a1(0xca));_0xa01d27['send'](_0x3070a1(0xc2));});});});}catch(_0x49b3f1){_0xa01d27[_0x40e854(0xcc)](_0x40e854(0xc6));if(config[_0x40e854(0xc4)])console[_0x40e854(0xd6)](_0x49b3f1);}}),module['exports']=router;
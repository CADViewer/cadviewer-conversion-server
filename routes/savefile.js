var a24_0x51ee39=a24_0x495d;function a24_0x495d(_0x2a4978,_0x90c800){var _0xfdb40f=a24_0xfdb4();return a24_0x495d=function(_0x495d,_0x1f3810){_0x495d=_0x495d-0x1af;var _0x309f3c=_0xfdb40f[_0x495d];return _0x309f3c;},a24_0x495d(_0x2a4978,_0x90c800);}function a24_0xfdb4(){var _0x5a7894=['file\x20written','length','indexOf','ServerLocation','write','../CADViewer_config.json','error\x20savefile:\x20','ServerFrontEndUrl','log','8620AqLAnw','error\x20-\x20savefile','Access-Control-Allow-Origin','ServerFrontEndUrlAsAllowedOriginOnly','express','ServerUrl','1113qjXCAt','44628JTJuXx','X\x20\x20','\x20first\x20index:','Succes','send','2382174YjkFIt','from','close','after:','24270lDpsyY','existsSync','file','cvjs_debug','join','file_content','45903650aneFLz','first\x20part\x20is\x20/\x20or\x20\x5c\x20,\x20it\x20is\x20at:','open','body','1722422TEySPV','replace','HERE\x20','6048530JuFAwy','Access-Control-Allow-Origin\x20:','substring','no\x20serverlocation\x20in\x20part,\x20or\x20begins\x20after\x203rd\x20item','http:','https:','savefile:','48ondHHG','post','dirname','mkdirSync','98ZCCPUn'];a24_0xfdb4=function(){return _0x5a7894;};return a24_0xfdb4();}(function(_0x2776e7,_0x595e51){var _0xa949ae=a24_0x495d,_0x262502=_0x2776e7();while(!![]){try{var _0x1062dc=-parseInt(_0xa949ae(0x1dc))/0x1+-parseInt(_0xa949ae(0x1d2))/0x2+parseInt(_0xa949ae(0x1c8))/0x3*(parseInt(_0xa949ae(0x1c2))/0x4)+-parseInt(_0xa949ae(0x1df))/0x5+-parseInt(_0xa949ae(0x1c9))/0x6*(-parseInt(_0xa949ae(0x1b8))/0x7)+parseInt(_0xa949ae(0x1b4))/0x8*(-parseInt(_0xa949ae(0x1ce))/0x9)+parseInt(_0xa949ae(0x1d8))/0xa;if(_0x1062dc===_0x595e51)break;else _0x262502['push'](_0x262502['shift']());}catch(_0x3435af){_0x262502['push'](_0x262502['shift']());}}}(a24_0xfdb4,0xeac57));var config=require(a24_0x51ee39(0x1be)),cvjs_debug=config[a24_0x51ee39(0x1d5)],express=require(a24_0x51ee39(0x1c6)),router=express['Router']();const fs=require('fs'),path=require('path');function createDirRecursively(_0x3c6c31){var _0x1e3f46=a24_0x51ee39;!fs[_0x1e3f46(0x1d3)](_0x3c6c31)&&(createDirRecursively(path[_0x1e3f46(0x1d6)](_0x3c6c31,'..')),fs[_0x1e3f46(0x1b7)](_0x3c6c31));}router[a24_0x51ee39(0x1b5)]('/savefile',(_0x2f3577,_0x4a645b)=>{var _0x1fa88d=a24_0x51ee39;if(config[_0x1fa88d(0x1c5)]==!![]){_0x4a645b['setHeader'](_0x1fa88d(0x1c4),config['ServerFrontEndUrl']);if(cvjs_debug)console['log'](_0x1fa88d(0x1e0)+config[_0x1fa88d(0x1c0)]);}else{_0x4a645b['setHeader'](_0x1fa88d(0x1c4),'*');if(cvjs_debug)console[_0x1fa88d(0x1c1)]('Access-Control-Allow-Origin\x20:\x20*');}try{var _0x41cfda=_0x2f3577[_0x1fa88d(0x1db)][_0x1fa88d(0x1d4)],_0x36b8d0=_0x2f3577[_0x1fa88d(0x1db)][_0x1fa88d(0x1d7)],_0x4e5da8=Buffer[_0x1fa88d(0x1cf)](_0x36b8d0),_0x46da5f=![];console[_0x1fa88d(0x1c1)](_0x1fa88d(0x1b3)+_0x41cfda+_0x1fa88d(0x1cb)+_0x41cfda[_0x1fa88d(0x1bb)]('/'));if(_0x41cfda[_0x1fa88d(0x1bb)](_0x1fa88d(0x1b1))>-0x1||_0x41cfda[_0x1fa88d(0x1bb)](_0x1fa88d(0x1b2))>-0x1){}else{if(_0x41cfda[_0x1fa88d(0x1bb)](':')>0x0&&_0x41cfda[_0x1fa88d(0x1bb)](':')<0x3){if(_0x41cfda[_0x1fa88d(0x1bb)]('/')==0x0)_0x41cfda=_0x41cfda[_0x1fa88d(0x1af)](0x1);}else(_0x41cfda['indexOf']('/')==0x0||_0x41cfda['indexOf']('\x5c')==0x0)&&(console[_0x1fa88d(0x1c1)](_0x1fa88d(0x1d9)+_0x41cfda[_0x1fa88d(0x1bb)](config['ServerLocation'])),(_0x41cfda[_0x1fa88d(0x1bb)](config[_0x1fa88d(0x1bc)])==-0x1||_0x41cfda[_0x1fa88d(0x1bb)](config[_0x1fa88d(0x1bc)])>0x3)&&(console[_0x1fa88d(0x1c1)](_0x1fa88d(0x1b0)),_0x41cfda=config['ServerLocation']+_0x41cfda,_0x46da5f=!![]));}console[_0x1fa88d(0x1c1)](_0x1fa88d(0x1d1)+_0x41cfda);var _0x285e45=path[_0x1fa88d(0x1b6)](_0x41cfda);createDirRecursively(_0x285e45),_0x41cfda=decodeURI(_0x41cfda),_0x41cfda=_0x41cfda['replace'](/%3A/g,':'),_0x41cfda=_0x41cfda[_0x1fa88d(0x1dd)](/%2F/g,'/'),_0x41cfda=_0x41cfda[_0x1fa88d(0x1dd)](/%20/g,'\x20');if(config[_0x1fa88d(0x1d5)])console[_0x1fa88d(0x1c1)](_0x1fa88d(0x1de)+_0x41cfda+'\x20X'+config[_0x1fa88d(0x1c0)]+_0x1fa88d(0x1ca)+config['ServerUrl']);if(_0x41cfda[_0x1fa88d(0x1bb)](config['ServerFrontEndUrl'])==0x0){if(_0x46da5f){}else _0x41cfda=config[_0x1fa88d(0x1bc)]+_0x41cfda[_0x1fa88d(0x1af)](config['ServerFrontEndUrl'][_0x1fa88d(0x1ba)]);}else _0x41cfda[_0x1fa88d(0x1bb)](config[_0x1fa88d(0x1c7)])==0x0&&(_0x41cfda=config[_0x1fa88d(0x1bc)]+_0x41cfda[_0x1fa88d(0x1af)](config[_0x1fa88d(0x1c7)]['length']));_0x41cfda=_0x41cfda['replace'](/\\/g,'/');if(config[_0x1fa88d(0x1d5)])console[_0x1fa88d(0x1c1)]('savefile:'+_0x41cfda);fs[_0x1fa88d(0x1da)](_0x41cfda,'w',function(_0x3f1f01,_0x5b63a5){var _0x1c950c=_0x1fa88d;fs[_0x1c950c(0x1bd)](_0x5b63a5,_0x4e5da8,0x0,_0x4e5da8[_0x1c950c(0x1ba)],null,function(_0x58af70){var _0x5b0a03=_0x1c950c;if(_0x58af70){if(config[_0x5b0a03(0x1d5)])console['log']('error\x20savefile:\x20'+_0x58af70);_0x4a645b['send'](_0x5b0a03(0x1bf)+_0x58af70);}else fs[_0x5b0a03(0x1d0)](_0x5b63a5,function(){var _0x5446bc=_0x5b0a03;if(config[_0x5446bc(0x1d5)])console[_0x5446bc(0x1c1)](_0x5446bc(0x1b9));_0x4a645b['send'](_0x5446bc(0x1cc));});});});}catch(_0x254f3c){_0x4a645b[_0x1fa88d(0x1cd)](_0x1fa88d(0x1c3));if(config[_0x1fa88d(0x1d5)])console[_0x1fa88d(0x1c1)](_0x254f3c);}}),module['exports']=router;
var a24_0x344397=a24_0x29d0;(function(_0x4f8d93,_0x2abe73){var _0x3e02be=a24_0x29d0,_0x1edc4a=_0x4f8d93();while(!![]){try{var _0x2470da=parseInt(_0x3e02be(0x1f7))/0x1*(parseInt(_0x3e02be(0x215))/0x2)+-parseInt(_0x3e02be(0x20f))/0x3+parseInt(_0x3e02be(0x205))/0x4+-parseInt(_0x3e02be(0x20d))/0x5*(-parseInt(_0x3e02be(0x200))/0x6)+parseInt(_0x3e02be(0x212))/0x7*(parseInt(_0x3e02be(0x214))/0x8)+parseInt(_0x3e02be(0x1f2))/0x9+-parseInt(_0x3e02be(0x213))/0xa;if(_0x2470da===_0x2abe73)break;else _0x1edc4a['push'](_0x1edc4a['shift']());}catch(_0x2b58d3){_0x1edc4a['push'](_0x1edc4a['shift']());}}}(a24_0x2ed8,0x28c93));function a24_0x29d0(_0x1c4e45,_0x11935e){var _0x2ed897=a24_0x2ed8();return a24_0x29d0=function(_0x29d02b,_0x52949d){_0x29d02b=_0x29d02b-0x1ea;var _0x50f082=_0x2ed897[_0x29d02b];return _0x50f082;},a24_0x29d0(_0x1c4e45,_0x11935e);}var config=require(a24_0x344397(0x201)),cvjs_debug=config['cvjs_debug'],express=require('express'),router=express[a24_0x344397(0x207)]();const fs=require('fs'),path=require(a24_0x344397(0x20a));function a24_0x2ed8(){var _0x1457c1=['substring','log','5HoetiL','\x20first\x20index:','746856GfXaEp','first\x20part\x20is\x20/\x20or\x20\x5c\x20,\x20it\x20is\x20at:','ServerLocation','833IjscUD','534970Zuisuq','10552utLZEX','34pahVeL','Access-Control-Allow-Origin\x20:\x20*','error\x20savefile:\x20','close','body','ServerFrontEndUrl','exports','indexOf','ServerUrl','cvjs_debug','44289FdgFpL','savefile:','length','Access-Control-Allow-Origin','file','10720NtFDOn','X\x20\x20','after:','ServerFrontEndUrlAsAllowedOriginOnly','from','replace','https:','setHeader','error\x20-\x20savefile','525786mcxFNo','../CADViewer_config.json','mkdirSync','HERE\x20','write','151020uinkIA','no\x20serverlocation\x20in\x20part,\x20or\x20begins\x20after\x203rd\x20item','Router','file\x20written','send','path'];a24_0x2ed8=function(){return _0x1457c1;};return a24_0x2ed8();}function createDirRecursively(_0x289a1e){var _0xcccac9=a24_0x344397;!fs['existsSync'](_0x289a1e)&&(createDirRecursively(path['join'](_0x289a1e,'..')),fs[_0xcccac9(0x202)](_0x289a1e));}router['post']('/savefile',(_0x41ab29,_0x36df2f)=>{var _0x209389=a24_0x344397;if(config[_0x209389(0x1fa)]==!![]){_0x36df2f[_0x209389(0x1fe)](_0x209389(0x1f5),config[_0x209389(0x1ed)]);if(cvjs_debug)console[_0x209389(0x20c)]('Access-Control-Allow-Origin\x20:'+config[_0x209389(0x1ed)]);}else{_0x36df2f[_0x209389(0x1fe)]('Access-Control-Allow-Origin','*');if(cvjs_debug)console['log'](_0x209389(0x216));}try{var _0x4f01ae=_0x41ab29[_0x209389(0x1ec)][_0x209389(0x1f6)],_0x330616=_0x41ab29['body']['file_content'],_0x1ab52c=Buffer[_0x209389(0x1fb)](_0x330616),_0x3afb72=![];console[_0x209389(0x20c)](_0x209389(0x1f3)+_0x4f01ae+_0x209389(0x20e)+_0x4f01ae[_0x209389(0x1ef)]('/'));if(_0x4f01ae['indexOf']('http:')>-0x1||_0x4f01ae[_0x209389(0x1ef)](_0x209389(0x1fd))>-0x1){}else{if(_0x4f01ae['indexOf'](':')>0x0&&_0x4f01ae['indexOf'](':')<0x3){if(_0x4f01ae[_0x209389(0x1ef)]('/')==0x0)_0x4f01ae=_0x4f01ae[_0x209389(0x20b)](0x1);}else(_0x4f01ae[_0x209389(0x1ef)]('/')==0x0||_0x4f01ae[_0x209389(0x1ef)]('\x5c')==0x0)&&(console[_0x209389(0x20c)](_0x209389(0x210)+_0x4f01ae[_0x209389(0x1ef)](config['ServerLocation'])),(_0x4f01ae['indexOf'](config[_0x209389(0x211)])==-0x1||_0x4f01ae[_0x209389(0x1ef)](config[_0x209389(0x211)])>0x3)&&(console[_0x209389(0x20c)](_0x209389(0x206)),_0x4f01ae=config['ServerLocation']+_0x4f01ae,_0x3afb72=!![]));}console['log'](_0x209389(0x1f9)+_0x4f01ae);var _0x4d3dd5=path['dirname'](_0x4f01ae);createDirRecursively(_0x4d3dd5),_0x4f01ae=decodeURI(_0x4f01ae),_0x4f01ae=_0x4f01ae[_0x209389(0x1fc)](/%3A/g,':'),_0x4f01ae=_0x4f01ae[_0x209389(0x1fc)](/%2F/g,'/'),_0x4f01ae=_0x4f01ae[_0x209389(0x1fc)](/%20/g,'\x20');if(config[_0x209389(0x1f1)])console[_0x209389(0x20c)](_0x209389(0x203)+_0x4f01ae+'\x20X'+config['ServerFrontEndUrl']+_0x209389(0x1f8)+config[_0x209389(0x1f0)]);if(_0x4f01ae['indexOf'](config[_0x209389(0x1ed)])==0x0){if(_0x3afb72){}else _0x4f01ae=config[_0x209389(0x211)]+_0x4f01ae[_0x209389(0x20b)](config['ServerFrontEndUrl']['length']);}else _0x4f01ae[_0x209389(0x1ef)](config[_0x209389(0x1f0)])==0x0&&(_0x4f01ae=config[_0x209389(0x211)]+_0x4f01ae[_0x209389(0x20b)](config[_0x209389(0x1f0)]['length']));_0x4f01ae=_0x4f01ae['replace'](/\\/g,'/');if(config[_0x209389(0x1f1)])console[_0x209389(0x20c)](_0x209389(0x1f3)+_0x4f01ae);fs['open'](_0x4f01ae,'w',function(_0x3be0e3,_0x1aa6fa){var _0x961851=_0x209389;fs[_0x961851(0x204)](_0x1aa6fa,_0x1ab52c,0x0,_0x1ab52c[_0x961851(0x1f4)],null,function(_0x32c8c0){var _0x3c9be1=_0x961851;if(_0x32c8c0){if(config[_0x3c9be1(0x1f1)])console[_0x3c9be1(0x20c)](_0x3c9be1(0x1ea)+_0x32c8c0);_0x36df2f[_0x3c9be1(0x209)](_0x3c9be1(0x1ea)+_0x32c8c0);}else fs[_0x3c9be1(0x1eb)](_0x1aa6fa,function(){var _0x22dd9c=_0x3c9be1;if(config['cvjs_debug'])console[_0x22dd9c(0x20c)](_0x22dd9c(0x208));_0x36df2f['send']('Succes');});});});}catch(_0x217ce1){_0x36df2f['send'](_0x209389(0x1ff));if(config[_0x209389(0x1f1)])console['log'](_0x217ce1);}}),module[a24_0x344397(0x1ee)]=router;
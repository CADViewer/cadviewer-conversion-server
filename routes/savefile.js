var a25_0x2621d5=a25_0xca28;function a25_0x28e0(){var _0x9c388e=['existsSync','mkdirSync','substring','exports','665giaCSH','http:','X\x20\x20','16DgDxLo','3736995cpvVZO','80GBvIHF','body','/savefile','post','join','dirname','Router','send','1320065IrKXBB','close','8966736kFyupH','ServerUrl','Access-Control-Allow-Origin\x20:\x20*','log','write','file\x20written','3088640AXAgpo','\x20first\x20index:','first\x20part\x20is\x20/\x20or\x20\x5c\x20,\x20it\x20is\x20at:','error\x20savefile:\x20','file_content','387995OkmfVw','HERE\x20','error\x20-\x20savefile','Succes','ServerFrontEndUrl','cvjs_debug','length','path','file','replace','from','Access-Control-Allow-Origin\x20:','savefile:','no\x20serverlocation\x20in\x20part,\x20or\x20begins\x20after\x203rd\x20item','after:','ServerLocation','2912211ybDHLg','indexOf','Access-Control-Allow-Origin','32910XZsWQR'];a25_0x28e0=function(){return _0x9c388e;};return a25_0x28e0();}function a25_0xca28(_0x15029e,_0x487783){var _0x28e070=a25_0x28e0();return a25_0xca28=function(_0xca28a5,_0x5e4900){_0xca28a5=_0xca28a5-0x81;var _0x1dfa98=_0x28e070[_0xca28a5];return _0x1dfa98;},a25_0xca28(_0x15029e,_0x487783);}(function(_0x145f20,_0x11bb8b){var _0x1aba51=a25_0xca28,_0x5b155b=_0x145f20();while(!![]){try{var _0x267181=parseInt(_0x1aba51(0xae))/0x1+-parseInt(_0x1aba51(0x84))/0x2+-parseInt(_0x1aba51(0xa5))/0x3+-parseInt(_0x1aba51(0xa4))/0x4*(-parseInt(_0x1aba51(0x89))/0x5)+parseInt(_0x1aba51(0x9c))/0x6*(parseInt(_0x1aba51(0xa1))/0x7)+-parseInt(_0x1aba51(0xb0))/0x8+parseInt(_0x1aba51(0x99))/0x9*(parseInt(_0x1aba51(0xa6))/0xa);if(_0x267181===_0x11bb8b)break;else _0x5b155b['push'](_0x5b155b['shift']());}catch(_0x5105bd){_0x5b155b['push'](_0x5b155b['shift']());}}}(a25_0x28e0,0xca79d));var config=require('../CADViewer_config.json'),cvjs_debug=config[a25_0x2621d5(0x8e)],express=require('express'),router=express[a25_0x2621d5(0xac)]();const fs=require('fs'),path=require(a25_0x2621d5(0x90));function createDirRecursively(_0x4920fb){var _0xf7d81c=a25_0x2621d5;!fs[_0xf7d81c(0x9d)](_0x4920fb)&&(createDirRecursively(path[_0xf7d81c(0xaa)](_0x4920fb,'..')),fs[_0xf7d81c(0x9e)](_0x4920fb));}router[a25_0x2621d5(0xa9)](a25_0x2621d5(0xa8),(_0x2876da,_0x2ba4b3)=>{var _0x489cb5=a25_0x2621d5;if(config['ServerFrontEndUrlAsAllowedOriginOnly']==!![]){_0x2ba4b3['setHeader'](_0x489cb5(0x9b),config[_0x489cb5(0x8d)]);if(cvjs_debug)console['log'](_0x489cb5(0x94)+config[_0x489cb5(0x8d)]);}else{_0x2ba4b3['setHeader'](_0x489cb5(0x9b),'*');if(cvjs_debug)console['log'](_0x489cb5(0xb2));}try{var _0x113141=_0x2876da[_0x489cb5(0xa7)][_0x489cb5(0x91)],_0x41ede2=_0x2876da[_0x489cb5(0xa7)][_0x489cb5(0x88)],_0x50a51c=Buffer[_0x489cb5(0x93)](_0x41ede2),_0x127562=![];console[_0x489cb5(0x81)](_0x489cb5(0x95)+_0x113141+_0x489cb5(0x85)+_0x113141['indexOf']('/'));if(_0x113141[_0x489cb5(0x9a)](_0x489cb5(0xa2))>-0x1||_0x113141[_0x489cb5(0x9a)]('https:')>-0x1){}else{if(_0x113141[_0x489cb5(0x9a)](':')>0x0&&_0x113141['indexOf'](':')<0x3){if(_0x113141['indexOf']('/')==0x0)_0x113141=_0x113141[_0x489cb5(0x9f)](0x1);}else(_0x113141[_0x489cb5(0x9a)]('/')==0x0||_0x113141['indexOf']('\x5c')==0x0)&&(console['log'](_0x489cb5(0x86)+_0x113141[_0x489cb5(0x9a)](config[_0x489cb5(0x98)])),(_0x113141[_0x489cb5(0x9a)](config['ServerLocation'])==-0x1||_0x113141[_0x489cb5(0x9a)](config[_0x489cb5(0x98)])>0x3)&&(console['log'](_0x489cb5(0x96)),_0x113141=config[_0x489cb5(0x98)]+_0x113141,_0x127562=!![]));}console[_0x489cb5(0x81)](_0x489cb5(0x97)+_0x113141);var _0x412ed7=path[_0x489cb5(0xab)](_0x113141);createDirRecursively(_0x412ed7),_0x113141=decodeURI(_0x113141),_0x113141=_0x113141[_0x489cb5(0x92)](/%3A/g,':'),_0x113141=_0x113141[_0x489cb5(0x92)](/%2F/g,'/'),_0x113141=_0x113141['replace'](/%20/g,'\x20');if(config['cvjs_debug'])console[_0x489cb5(0x81)](_0x489cb5(0x8a)+_0x113141+'\x20X'+config['ServerFrontEndUrl']+_0x489cb5(0xa3)+config[_0x489cb5(0xb1)]);if(_0x113141[_0x489cb5(0x9a)](config[_0x489cb5(0x8d)])==0x0){if(_0x127562){}else _0x113141=config[_0x489cb5(0x98)]+_0x113141[_0x489cb5(0x9f)](config[_0x489cb5(0x8d)][_0x489cb5(0x8f)]);}else _0x113141[_0x489cb5(0x9a)](config[_0x489cb5(0xb1)])==0x0&&(_0x113141=config[_0x489cb5(0x98)]+_0x113141['substring'](config[_0x489cb5(0xb1)][_0x489cb5(0x8f)]));_0x113141=_0x113141[_0x489cb5(0x92)](/\\/g,'/');if(config['cvjs_debug'])console[_0x489cb5(0x81)](_0x489cb5(0x95)+_0x113141);fs['open'](_0x113141,'w',function(_0x71d066,_0x2ec130){var _0x2861f9=_0x489cb5;fs[_0x2861f9(0x82)](_0x2ec130,_0x50a51c,0x0,_0x50a51c[_0x2861f9(0x8f)],null,function(_0x1e5a0e){var _0x52dc07=_0x2861f9;if(_0x1e5a0e){if(config[_0x52dc07(0x8e)])console['log'](_0x52dc07(0x87)+_0x1e5a0e);_0x2ba4b3[_0x52dc07(0xad)]('error\x20savefile:\x20'+_0x1e5a0e);}else fs[_0x52dc07(0xaf)](_0x2ec130,function(){var _0x312293=_0x52dc07;if(config[_0x312293(0x8e)])console[_0x312293(0x81)](_0x312293(0x83));_0x2ba4b3[_0x312293(0xad)](_0x312293(0x8c));});});});}catch(_0x422271){_0x2ba4b3['send'](_0x489cb5(0x8b));if(config['cvjs_debug'])console[_0x489cb5(0x81)](_0x422271);}}),module[a25_0x2621d5(0xa0)]=router;
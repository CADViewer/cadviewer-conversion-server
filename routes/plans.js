const a22_0x2b26de=a22_0x558c;function a22_0x2639(){const _0x113a24=['plans.js\x20-\x20get\x20response\x20JSON\x20loaded','1093251IBzVYI','477630PnOtii','2080268rbdAhA','globalBearerAutenticationToken','request','{\x27status:\x20\x27','Server\x20error:','globalBearerAutentication','3510282RerpMZ','2195480LWbxSu','send','Authorization\x20token\x20is\x20OK','post','Router','exports','126akprEV','Authorization\x20token\x20is\x20applied','5165865GxqHtI','GET','/proxy\x20call:\x20getToken:\x20','log','node-fetch','url','proxyUrl\x20before\x20getResponse():\x20','32XsZVxy','express','status','Authorization\x20token\x20is\x20required\x20or\x20incorrect','authorization','json','body','1752948GdYFzY','3ZoTOKf','/proxy\x20call:','split','headers'];a22_0x2639=function(){return _0x113a24;};return a22_0x2639();}(function(_0x314204,_0x45ea23){const _0x3f12e5=a22_0x558c,_0x6388cb=_0x314204();while(!![]){try{const _0x2d8748=parseInt(_0x3f12e5(0x135))/0x1+-parseInt(_0x3f12e5(0x137))/0x2+-parseInt(_0x3f12e5(0x130))/0x3*(parseInt(_0x3f12e5(0x12f))/0x4)+parseInt(_0x3f12e5(0x146))/0x5+parseInt(_0x3f12e5(0x13d))/0x6+-parseInt(_0x3f12e5(0x13e))/0x7*(parseInt(_0x3f12e5(0x14d))/0x8)+-parseInt(_0x3f12e5(0x144))/0x9*(-parseInt(_0x3f12e5(0x136))/0xa);if(_0x2d8748===_0x45ea23)break;else _0x6388cb['push'](_0x6388cb['shift']());}catch(_0xc27fcd){_0x6388cb['push'](_0x6388cb['shift']());}}}(a22_0x2639,0x9e036));const config=require('../CADViewer_config.json'),fetch=require(a22_0x2b26de(0x14a)),express=require(a22_0x2b26de(0x129)),router=express[a22_0x2b26de(0x142)](),https=require('https'),{get}=require(a22_0x2b26de(0x139));function a22_0x558c(_0x37f955,_0x20e1dd){const _0x26396c=a22_0x2639();return a22_0x558c=function(_0x558c1,_0x1834d7){_0x558c1=_0x558c1-0x129;let _0x287654=_0x26396c[_0x558c1];return _0x287654;},a22_0x558c(_0x37f955,_0x20e1dd);}router[a22_0x2b26de(0x141)]('/proxy',async(_0x746bda,_0x351668)=>{const _0x3bbc5a=a22_0x2b26de;console[_0x3bbc5a(0x149)](_0x3bbc5a(0x131)),console[_0x3bbc5a(0x149)]({'body':_0x746bda[_0x3bbc5a(0x12e)]});var _0x5ba935=getToken(_0x746bda);console[_0x3bbc5a(0x149)](_0x3bbc5a(0x148)+_0x5ba935);if(!config[_0x3bbc5a(0x13c)])console[_0x3bbc5a(0x149)]('Authorization\x20token\x20is\x20not\x20applied,\x20so\x20this\x20is\x20OK');else{console[_0x3bbc5a(0x149)](_0x3bbc5a(0x145)),console['log'](_0x5ba935,config['globalBearerAutenticationToken']);if(_0x5ba935==config[_0x3bbc5a(0x138)])console['log'](_0x3bbc5a(0x140));else{console[_0x3bbc5a(0x149)]('Authorization\x20token\x20is\x20reqired\x20or\x20incorrect'),_0x351668[_0x3bbc5a(0x13f)](_0x3bbc5a(0x12b));return;}}try{const _0x4f42de=_0x746bda['body'][_0x3bbc5a(0x14b)],_0x28ab38=config['globalApplicationSasToken'],_0x219120=_0x4f42de+_0x28ab38;console[_0x3bbc5a(0x149)](_0x3bbc5a(0x14c),_0x219120);const _0x4ab82b=await getResponse(_0x219120);_0x351668['status'](0xc8)[_0x3bbc5a(0x12d)](_0x4ab82b);}catch(_0x18cb14){_0x351668[_0x3bbc5a(0x13f)](_0x3bbc5a(0x13b)+_0x18cb14);}});function getToken(_0x460860){const _0x2cf438=a22_0x2b26de;if(_0x460860['headers'][_0x2cf438(0x12c)]&&_0x460860[_0x2cf438(0x133)][_0x2cf438(0x12c)][_0x2cf438(0x132)]('\x20')[0x0]==='Bearer')return _0x460860[_0x2cf438(0x133)]['authorization'][_0x2cf438(0x132)]('\x20')[0x1];return null;}async function getResponse(_0x1e611f){const _0x2b51f8=a22_0x2b26de,_0x2a147a=await fetch(_0x1e611f,{'method':_0x2b51f8(0x147),'headers':{'Accept':'application/json'}});if(!_0x2a147a['ok'])return _0x2b51f8(0x13a)+_0x2a147a[_0x2b51f8(0x12a)]+'\x27}';const _0xde8563=await _0x2a147a[_0x2b51f8(0x12d)]();return console[_0x2b51f8(0x149)](_0x2b51f8(0x134)),_0xde8563;}module[a22_0x2b26de(0x143)]=router;
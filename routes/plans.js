const a22_0x1d21d4=a22_0x1ea6;function a22_0x1ea6(_0x548de2,_0x5de312){const _0x4af66c=a22_0x4af6();return a22_0x1ea6=function(_0x1ea66e,_0x1dbde4){_0x1ea66e=_0x1ea66e-0x1d4;let _0x53b72c=_0x4af66c[_0x1ea66e];return _0x53b72c;},a22_0x1ea6(_0x548de2,_0x5de312);}(function(_0x32b256,_0xa21493){const _0x24e020=a22_0x1ea6,_0x74e01c=_0x32b256();while(!![]){try{const _0x30d38e=parseInt(_0x24e020(0x1e6))/0x1+parseInt(_0x24e020(0x1dd))/0x2+-parseInt(_0x24e020(0x1e4))/0x3+-parseInt(_0x24e020(0x1d8))/0x4+-parseInt(_0x24e020(0x1ea))/0x5+parseInt(_0x24e020(0x1df))/0x6*(parseInt(_0x24e020(0x1f3))/0x7)+-parseInt(_0x24e020(0x1d7))/0x8;if(_0x30d38e===_0xa21493)break;else _0x74e01c['push'](_0x74e01c['shift']());}catch(_0x39165c){_0x74e01c['push'](_0x74e01c['shift']());}}}(a22_0x4af6,0x85f7c));function a22_0x4af6(){const _0x3300e8=['Authorization\x20token\x20is\x20OK','1663870ctYfmd','globalBearerAutenticationToken','5925210wHzXuA','split','application/json','url','request','164688rvpNwz','{\x27status:\x20\x27','77373FEqvGT','GET','plans.js\x20-\x20get\x20response\x20JSON\x20loaded','Authorization\x20token\x20is\x20applied','1828615KkEypr','node-fetch','Authorization\x20token\x20is\x20not\x20applied,\x20so\x20this\x20is\x20OK','authorization','json','proxyUrl\x20before\x20getResponse():\x20','send','https','status','7ESFQFs','Router','post','/proxy\x20call:\x20getToken:\x20','Server\x20error:','headers','Authorization\x20token\x20is\x20required\x20or\x20incorrect','Authorization\x20token\x20is\x20reqired\x20or\x20incorrect','globalApplicationSasToken','6444336ifLMCS','487800IzkLnb','body','exports','log'];a22_0x4af6=function(){return _0x3300e8;};return a22_0x4af6();}const config=require('../CADViewer_config.json'),fetch=require(a22_0x1d21d4(0x1eb)),express=require('express'),router=express[a22_0x1d21d4(0x1f4)](),https=require(a22_0x1d21d4(0x1f1)),{get}=require(a22_0x1d21d4(0x1e3));router[a22_0x1d21d4(0x1f5)]('/proxy',async(_0x266ef5,_0x3e8643)=>{const _0x214300=a22_0x1d21d4;console['log']('/proxy\x20call:'),console[_0x214300(0x1db)]({'body':_0x266ef5[_0x214300(0x1d9)]});var _0x1c8be2=getToken(_0x266ef5);console[_0x214300(0x1db)](_0x214300(0x1f6)+_0x1c8be2);if(!config['globalBearerAutentication'])console['log'](_0x214300(0x1ec));else{console[_0x214300(0x1db)](_0x214300(0x1e9)),console[_0x214300(0x1db)](_0x1c8be2,config[_0x214300(0x1de)]);if(_0x1c8be2==config[_0x214300(0x1de)])console[_0x214300(0x1db)](_0x214300(0x1dc));else{console[_0x214300(0x1db)](_0x214300(0x1d5)),_0x3e8643[_0x214300(0x1f0)](_0x214300(0x1d4));return;}}try{const _0x594096=_0x266ef5[_0x214300(0x1d9)][_0x214300(0x1e2)],_0x162afa=config[_0x214300(0x1d6)],_0x3a0d43=_0x594096+_0x162afa;console[_0x214300(0x1db)](_0x214300(0x1ef),_0x3a0d43);const _0x15a7ad=await getResponse(_0x3a0d43);_0x3e8643[_0x214300(0x1f2)](0xc8)[_0x214300(0x1ee)](_0x15a7ad);}catch(_0x2d5440){_0x3e8643[_0x214300(0x1f0)](_0x214300(0x1f7)+_0x2d5440);}});function getToken(_0x5bb9d5){const _0x382b2a=a22_0x1d21d4;if(_0x5bb9d5['headers'][_0x382b2a(0x1ed)]&&_0x5bb9d5[_0x382b2a(0x1f8)][_0x382b2a(0x1ed)][_0x382b2a(0x1e0)]('\x20')[0x0]==='Bearer')return _0x5bb9d5['headers']['authorization']['split']('\x20')[0x1];return null;}async function getResponse(_0x20ad81){const _0x1b7760=a22_0x1d21d4,_0x34b223=await fetch(_0x20ad81,{'method':_0x1b7760(0x1e7),'headers':{'Accept':_0x1b7760(0x1e1)}});if(!_0x34b223['ok'])return _0x1b7760(0x1e5)+_0x34b223[_0x1b7760(0x1f2)]+'\x27}';const _0x3595bf=await _0x34b223['json']();return console[_0x1b7760(0x1db)](_0x1b7760(0x1e8)),_0x3595bf;}module[a22_0x1d21d4(0x1da)]=router;
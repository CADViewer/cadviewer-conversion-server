const a27_0x2528ea=a27_0x1d05;function a27_0x1d05(_0x14685e,_0x3189dd){const _0x40f8d1=a27_0x40f8();return a27_0x1d05=function(_0x1d0544,_0x3a7a28){_0x1d0544=_0x1d0544-0xbc;let _0x4c0491=_0x40f8d1[_0x1d0544];return _0x4c0491;},a27_0x1d05(_0x14685e,_0x3189dd);}(function(_0x3e00df,_0x199ee4){const _0xd564c2=a27_0x1d05,_0x385726=_0x3e00df();while(!![]){try{const _0x5c3762=parseInt(_0xd564c2(0x130))/0x1*(parseInt(_0xd564c2(0x1bb))/0x2)+-parseInt(_0xd564c2(0x239))/0x3*(-parseInt(_0xd564c2(0x22b))/0x4)+parseInt(_0xd564c2(0x19f))/0x5+-parseInt(_0xd564c2(0x10f))/0x6*(parseInt(_0xd564c2(0x148))/0x7)+parseInt(_0xd564c2(0x261))/0x8*(-parseInt(_0xd564c2(0x1a5))/0x9)+parseInt(_0xd564c2(0xe0))/0xa+-parseInt(_0xd564c2(0xd7))/0xb;if(_0x5c3762===_0x199ee4)break;else _0x385726['push'](_0x385726['shift']());}catch(_0xb6824b){_0x385726['push'](_0x385726['shift']());}}}(a27_0x40f8,0xaca64));const express=require(a27_0x2528ea(0x1bc)),router=express['Router'](),multer=require(a27_0x2528ea(0x208)),fs=require('fs'),path=require(a27_0x2528ea(0x123)),getHotConfig=require(a27_0x2528ea(0x19a))[a27_0x2528ea(0x106)],{exec}=require(a27_0x2528ea(0xf9)),os=require('os'),conn=require(a27_0x2528ea(0x16b)),bcrypt=require(a27_0x2528ea(0xce)),osu=require(a27_0x2528ea(0x1af)),schedule=require(a27_0x2528ea(0x1f7)),counter=require(a27_0x2528ea(0x113)),{randomUUID}=require(a27_0x2528ea(0x104)),logStream=require('../libs/log'),config=require('../CADViewer_config.json'),basicAuth=require(a27_0x2528ea(0x10c)),{sendFollowUpEmails,sendAccountDeletionPreventionEmails}=require('../libs/email-utils'),protectedRoute=basicAuth({'users':{[config[a27_0x2528ea(0x21f)]]:config['settingsPasswordBasicAuth']},'challenge':!![],'realm':a27_0x2528ea(0x1e7)});router['get'](a27_0x2528ea(0xe2),async(_0x57ee34,_0x20bcc5)=>{const _0xf9cbec=a27_0x2528ea;_0x20bcc5[_0xf9cbec(0x1d8)](path[_0xf9cbec(0xec)](path[_0xf9cbec(0x1ae)](require['main'][_0xf9cbec(0x269)]),'cadviewer/settings/tailwind.js'));}),router[a27_0x2528ea(0x1cb)]('/chart.min.js',async(_0x12a819,_0x24c6eb)=>{const _0x1d936b=a27_0x2528ea;_0x24c6eb[_0x1d936b(0x1d8)](path[_0x1d936b(0xec)](path['dirname'](require[_0x1d936b(0x1ce)][_0x1d936b(0x269)]),'cadviewer/settings/chart.min.js'));}),router[a27_0x2528ea(0x1cb)](a27_0x2528ea(0x1bd),async(_0x58bfc6,_0x442b43)=>{const _0x3983d6=a27_0x2528ea;_0x442b43[_0x3983d6(0x1d8)](path[_0x3983d6(0xec)](path[_0x3983d6(0x1ae)](require['main']['filename']),_0x3983d6(0x267)));}),router['get'](a27_0x2528ea(0xc2),async(_0x314f70,_0x401eb9)=>{const _0x2aab92=a27_0x2528ea;_0x401eb9[_0x2aab92(0x1d8)](path[_0x2aab92(0xec)](path[_0x2aab92(0x1ae)](require['main']['filename']),'cadviewer/settings/vanilla-toast.css'));}),router[a27_0x2528ea(0x1cb)](a27_0x2528ea(0x10b),async(_0x221539,_0x1fec01)=>{const _0x4c0341=a27_0x2528ea;_0x1fec01[_0x4c0341(0x1d8)](path[_0x4c0341(0xec)](path[_0x4c0341(0x1ae)](require[_0x4c0341(0x1ce)][_0x4c0341(0x269)]),_0x4c0341(0x145)));}),router[a27_0x2528ea(0x1cb)](a27_0x2528ea(0x107),async(_0x281a78,_0x3d6995)=>{const _0x8ff105=a27_0x2528ea;_0x3d6995[_0x8ff105(0x1d8)](path[_0x8ff105(0xec)](path[_0x8ff105(0x1ae)](require[_0x8ff105(0x1ce)][_0x8ff105(0x269)]),_0x8ff105(0x184)));}),router['get']('/',protectedRoute,async(_0x403ce1,_0x157404)=>{const _0x5a0204=a27_0x2528ea,_0x426b00=fs[_0x5a0204(0x26a)](path[_0x5a0204(0xec)](path[_0x5a0204(0x1ae)](require[_0x5a0204(0x1ce)][_0x5a0204(0x269)]),'cadviewer/settings/home.html'),_0x5a0204(0xf4)),_0x35fd13=_0x426b00['replaceAll']('{version}',_0x403ce1[_0x5a0204(0x1c0)]);_0x157404['send'](_0x35fd13);}),router[a27_0x2528ea(0x1cb)](a27_0x2528ea(0x240),protectedRoute,async(_0x4268c4,_0x361f0d)=>{const _0x415237=a27_0x2528ea,_0x426e6e=fs[_0x415237(0x26a)](path[_0x415237(0xec)](path['dirname'](require[_0x415237(0x1ce)]['filename']),_0x415237(0x210)),_0x415237(0xf4)),_0x2370a7=_0x426e6e[_0x415237(0x21d)](_0x415237(0x185),_0x4268c4[_0x415237(0x1c0)]);_0x361f0d[_0x415237(0x163)](_0x2370a7);}),router[a27_0x2528ea(0x1cb)](a27_0x2528ea(0x24e),protectedRoute,async(_0x2bbaed,_0x3409f2)=>{const _0x213775=a27_0x2528ea,_0xbf4484=fs['readFileSync'](path[_0x213775(0xec)](path[_0x213775(0x1ae)](require[_0x213775(0x1ce)][_0x213775(0x269)]),_0x213775(0xf8)),_0x213775(0xf4)),_0x51fe99=_0xbf4484[_0x213775(0x21d)](_0x213775(0x185),_0x2bbaed[_0x213775(0x1c0)]);_0x3409f2['send'](_0x51fe99);}),router[a27_0x2528ea(0x1cb)](a27_0x2528ea(0x142),protectedRoute,async(_0x14ec8a,_0x5074ee)=>{const _0x247218=a27_0x2528ea,_0x463b9=fs[_0x247218(0x26a)](path[_0x247218(0xec)](path[_0x247218(0x1ae)](require[_0x247218(0x1ce)][_0x247218(0x269)]),'cadviewer/settings/folders.html'),_0x247218(0xf4)),_0x3ccc88=_0x463b9[_0x247218(0x21d)](_0x247218(0x185),_0x14ec8a['version']);_0x5074ee['send'](_0x3ccc88);}),router[a27_0x2528ea(0x137)](a27_0x2528ea(0x142),async(_0x2fd837,_0x53a15f)=>{const _0x2b85ed=a27_0x2528ea,_0x145e68=path[_0x2b85ed(0xec)](path[_0x2b85ed(0x1ae)](require[_0x2b85ed(0x1ce)][_0x2b85ed(0x269)]),_0x2b85ed(0x15d)),_0x5ce8d4=JSON[_0x2b85ed(0x248)](fs[_0x2b85ed(0x26a)](_0x145e68,'utf8')),_0x45fb71=_0x5ce8d4[_0x2b85ed(0x1e2)];if(!fs['existsSync'](_0x45fb71))return _0x53a15f[_0x2b85ed(0x114)](0x194)[_0x2b85ed(0x265)]({'message':_0x2b85ed(0xd6)});const _0x33a4a5=_0x5c020a=>{let _0x43c14d=0x0;return _0x5c020a['forEach'](_0x27cafe=>{_0x27cafe['isFolder']?_0x43c14d+=_0x33a4a5(_0x27cafe['sub_dirs']):_0x43c14d+=_0x27cafe['size'];}),_0x43c14d;},_0x3273cd=_0x14ca63=>{const _0x5925d3=_0x2b85ed;if(_0x14ca63<0x400)return _0x14ca63+'\x20B';else{if(_0x14ca63<0x400*0x400)return(_0x14ca63/0x400)['toFixed'](0x2)+'\x20KB';else return _0x14ca63<0x400*0x400*0x400?(_0x14ca63/0x400/0x400)[_0x5925d3(0xc7)](0x2)+_0x5925d3(0x1be):(_0x14ca63/0x400/0x400/0x400)[_0x5925d3(0xc7)](0x2)+_0x5925d3(0x253);}},_0xb7b9a9=(_0x52386d,_0x586214='')=>{const _0x3dc763=_0x2b85ed,_0x40912f=fs[_0x3dc763(0x219)](_0x52386d),_0x2b96a4=[];return _0x40912f[_0x3dc763(0x1db)](_0x3728bb=>{const _0x2a48c4=_0x3dc763,_0x21ad9e=path[_0x2a48c4(0xec)](_0x52386d,_0x3728bb)[_0x2a48c4(0x21d)]('\x5c','/'),_0x44ace3=fs['statSync'](_0x21ad9e);if(_0x44ace3[_0x2a48c4(0x151)]()){const _0x528292=_0xb7b9a9(_0x21ad9e,_0x586214+_0x2a48c4(0x205));_0x2b96a4[_0x2a48c4(0x127)]({'name':_0x3728bb,'size':_0x44ace3['size'],'path':_0x21ad9e,'permissions':_0x44ace3[_0x2a48c4(0x24a)],'isFolder':!![],'sub_dirs':_0x528292});}else _0x2b96a4[_0x2a48c4(0x127)]({'name':_0x3728bb,'size':_0x44ace3[_0x2a48c4(0x100)],'path':_0x21ad9e,'permissions':_0x44ace3[_0x2a48c4(0x24a)],'isFolder':![]});}),_0x2b96a4;};let _0xfc2f26=_0xb7b9a9(_0x45fb71);const _0xa226d=_0x1ecadf=>{return _0x1ecadf['forEach'](_0xb3dab1=>{const _0x3f2086=a27_0x1d05;_0xb3dab1['isFolder']?(_0xb3dab1[_0x3f2086(0x17f)]=_0x3273cd(_0x33a4a5(_0xb3dab1[_0x3f2086(0x1b8)])),_0xb3dab1[_0x3f2086(0x1b8)]=_0xa226d(_0xb3dab1[_0x3f2086(0x1b8)])):_0xb3dab1[_0x3f2086(0x17f)]=_0x3273cd(_0xb3dab1['size']);}),_0x1ecadf;};_0x53a15f[_0x2b85ed(0x114)](0xc8)[_0x2b85ed(0x265)](_0xa226d(_0xfc2f26));}),router[a27_0x2528ea(0x137)](a27_0x2528ea(0xf1),async(_0x4a7ae9,_0xfae79e)=>{const _0x276424=a27_0x2528ea,{path:_0x3fe165}=_0x4a7ae9[_0x276424(0x18c)],_0x59344a=_0x3fe165['split']('/')[_0x276424(0x1fe)]();if(!fs['existsSync'](_0x3fe165))return _0xfae79e['status'](0x194)['json']({'message':_0x276424(0xfb)});_0xfae79e[_0x276424(0x25e)]('Content-Type','application/octet-stream'),_0xfae79e[_0x276424(0x25e)](_0x276424(0x23a),_0x276424(0x135)+_0x59344a+'\x22'),_0xfae79e[_0x276424(0x26b)](_0x3fe165,_0x26ca2b=>{const _0x3819c8=_0x276424;_0x26ca2b&&_0xfae79e['status'](0x1f4)[_0x3819c8(0x265)]({'message':'Error\x20downloading\x20file.'});});}),router[a27_0x2528ea(0x137)](a27_0x2528ea(0x18b),async(_0x1eeb69,_0x4f06e5)=>{const _0x293b8f=a27_0x2528ea,_0x2f24bd=_0x1eeb69[_0x293b8f(0x18c)],_0x13d1b2=getHotConfig()[_0x293b8f(0x1e2)],_0x3ad4c0=path[_0x293b8f(0xec)](_0x13d1b2,_0x2f24bd[_0x293b8f(0x123)]);if(!fs[_0x293b8f(0x24b)](_0x3ad4c0))return _0x4f06e5[_0x293b8f(0x114)](0x194)[_0x293b8f(0x265)]({'message':_0x293b8f(0x1b4)});if(fs['existsSync'](path[_0x293b8f(0xec)](_0x3ad4c0,_0x2f24bd[_0x293b8f(0x23f)])))return _0x4f06e5[_0x293b8f(0x114)](0x199)['json']({'message':_0x293b8f(0x259)});fs[_0x293b8f(0x16c)](path[_0x293b8f(0xec)](_0x3ad4c0,_0x2f24bd[_0x293b8f(0x23f)]),_0x1bbbc5=>{const _0x8f7a49=_0x293b8f;_0x1bbbc5&&_0x4f06e5['status'](0x1f4)[_0x8f7a49(0x265)]({'message':_0x8f7a49(0x125)}),_0x4f06e5[_0x8f7a49(0x114)](0xc8)[_0x8f7a49(0x265)]({'message':'Folder\x20created.'});});}),router['put'](a27_0x2528ea(0x11f),async(_0x5727aa,_0x46d6cd)=>{const _0x2c9983=a27_0x2528ea,{newName:_0x46a594,isFolder:_0x3019c2,path:_0x589e7c}=_0x5727aa[_0x2c9983(0x18c)];if(!fs[_0x2c9983(0x24b)](_0x589e7c))return _0x46d6cd[_0x2c9983(0x114)](0x194)[_0x2c9983(0x265)]({'message':_0x3019c2?_0x2c9983(0x21c):'File\x20not\x20found'});const _0x1bc21b=_0x589e7c[_0x2c9983(0x25b)](_0x589e7c['split']('/')[_0x2c9983(0x1fe)](),_0x46a594),_0x2f802a=fs[_0x2c9983(0x1fd)](_0x589e7c);_0x2f802a[_0x2c9983(0x151)]()?fs[_0x2c9983(0x1ba)](_0x589e7c,_0x1bc21b):(fs['copyFileSync'](_0x589e7c,_0x1bc21b),fs[_0x2c9983(0x15a)](_0x589e7c)),_0x46d6cd[_0x2c9983(0x114)](0xc8)[_0x2c9983(0x265)]({'message':_0x3019c2?_0x2c9983(0x1da):_0x2c9983(0x159)});}),router[a27_0x2528ea(0xee)](a27_0x2528ea(0x1b6),async(_0x203e9d,_0x5d3548)=>{const _0x31ab29=a27_0x2528ea,{path:_0x4e6bd9}=_0x203e9d['body'];if(!fs[_0x31ab29(0x24b)](_0x4e6bd9))return _0x5d3548[_0x31ab29(0x114)](0x194)[_0x31ab29(0x265)]({'message':_0x31ab29(0x12a)});const _0x7ff256=fs[_0x31ab29(0x1fd)](_0x4e6bd9);if(_0x7ff256['isFile']())fs[_0x31ab29(0x172)](_0x4e6bd9,_0xbceee3=>{const _0x25339a=_0x31ab29;_0xbceee3&&_0x5d3548[_0x25339a(0x114)](0x1f4)[_0x25339a(0x265)]({'message':_0x25339a(0x23d)}),_0x5d3548['status'](0xc8)[_0x25339a(0x265)]({'message':_0x25339a(0x103)});});else _0x7ff256[_0x31ab29(0x151)]()&&fs[_0x31ab29(0x220)](_0x4e6bd9,{'recursive':!![]},_0x5dca0f=>{const _0x3e546f=_0x31ab29;_0x5dca0f&&_0x5d3548['status'](0x1f4)[_0x3e546f(0x265)]({'message':_0x3e546f(0x19c)}),_0x5d3548['status'](0xc8)['json']({'message':'Folder\x20deleted.'});});});!fs[a27_0x2528ea(0x24b)](a27_0x2528ea(0xc0))&&fs[a27_0x2528ea(0x223)](a27_0x2528ea(0xc0));const storage=multer[a27_0x2528ea(0x203)]({'destination':(_0x3ff4d2,_0xeed50d,_0x369741)=>{const _0x58e79d=a27_0x2528ea;_0x369741(null,_0x58e79d(0x1a3));},'filename':(_0x557626,_0x1f6f73,_0x18bf99)=>{const _0x5ccfde=a27_0x2528ea;_0x18bf99(null,Date[_0x5ccfde(0x188)]()+path[_0x5ccfde(0x197)](_0x1f6f73['originalname']));}}),upload=multer({'storage':storage,'limits':{'fileSize':getHotConfig()['maxUploadFileSize']?getHotConfig()[a27_0x2528ea(0xea)]*0x400*0x400:0x32*0x400*0x400}});router[a27_0x2528ea(0x137)](a27_0x2528ea(0x1b2),upload[a27_0x2528ea(0x231)](a27_0x2528ea(0x186)),async(_0x40bb28,_0x2edcb3)=>{const _0x1c8dbf=a27_0x2528ea,_0x5e97b2=_0x40bb28['body'];if(!_0x40bb28[_0x1c8dbf(0x186)]||_0x40bb28[_0x1c8dbf(0x186)][_0x1c8dbf(0xbe)]===0x0)return _0x2edcb3[_0x1c8dbf(0x114)](0x190)[_0x1c8dbf(0x265)]({'message':_0x1c8dbf(0x1eb)});const _0x17abd5=getHotConfig()[_0x1c8dbf(0x1e2)],_0x4856ad=path[_0x1c8dbf(0xec)](_0x17abd5,_0x5e97b2['path']);if(!fs['existsSync'](_0x4856ad))return _0x2edcb3['status'](0x194)['json']({'message':_0x1c8dbf(0x1b4)});const _0x359670=_0x40bb28[_0x1c8dbf(0x186)][_0x1c8dbf(0x1fa)](_0x5814b9=>({'originalname':_0x5814b9[_0x1c8dbf(0xc5)],'filename':_0x5814b9['filename'],'mimetype':_0x5814b9[_0x1c8dbf(0x193)],'size':_0x5814b9[_0x1c8dbf(0x100)]}));_0x359670[_0x1c8dbf(0x1db)](_0x4c4b39=>{const _0xf6b8b9=_0x1c8dbf;fs['copyFileSync'](path[_0xf6b8b9(0xec)]('tmp',_0x4c4b39[_0xf6b8b9(0x269)]),path['join'](_0x4856ad,_0x4c4b39['originalname'])),fs[_0xf6b8b9(0x15a)](path[_0xf6b8b9(0xec)](_0xf6b8b9(0x1a3),_0x4c4b39['filename']));}),_0x2edcb3['status'](0xc8)[_0x1c8dbf(0x265)]({'message':_0x1c8dbf(0x112),'files':_0x359670});}),router[a27_0x2528ea(0x1df)](a27_0x2528ea(0x140),async(_0x520889,_0x1406aa)=>{const _0x2d8354=a27_0x2528ea,_0x30bc7b=path[_0x2d8354(0xec)](path[_0x2d8354(0x1ae)](require[_0x2d8354(0x1ce)]['filename']),_0x2d8354(0x15d)),{config:_0x2ac287}=_0x520889[_0x2d8354(0x18c)];if(!_0x2ac287)return _0x1406aa[_0x2d8354(0x114)](0x190)['json']({'message':_0x2d8354(0x1aa)});try{fs[_0x2d8354(0x251)](_0x30bc7b,JSON[_0x2d8354(0x214)](_0x2ac287,null,0x4)),_0x1406aa[_0x2d8354(0x114)](0xc8)['json']({'message':'Config\x20updated\x20successfully'});}catch(_0x2e824e){_0x1406aa[_0x2d8354(0x114)](0x1f4)[_0x2d8354(0x265)]({'message':'Error\x20updating\x20config'});}}),router[a27_0x2528ea(0x1df)](a27_0x2528ea(0x101),async(_0x487ea6,_0x3d6fe8)=>{const _0x3327a5=a27_0x2528ea,{key:_0x2aa7a1,value:_0x40e0a2}=_0x487ea6[_0x3327a5(0x18c)],_0x20c3f0=path[_0x3327a5(0xec)](path[_0x3327a5(0x1ae)](require['main'][_0x3327a5(0x269)]),'CADViewer_config.json');fs[_0x3327a5(0x136)](_0x20c3f0,_0x3327a5(0xf4),function(_0x20578c,_0x34b5ff){const _0xb831f=_0x3327a5;_0x20578c&&_0x3d6fe8[_0xb831f(0x114)](0x1f4)[_0xb831f(0x163)](_0x20578c);const _0x21e569=JSON[_0xb831f(0x248)](_0x34b5ff);_0x21e569[_0x2aa7a1]=_0x40e0a2;if(_0x2aa7a1===_0xb831f(0x183)){let _0x15ee02='';if(_0x21e569[_0xb831f(0x179)]){_0x15ee02=os['platform']();if(_0x15ee02==='win32')_0x15ee02=_0xb831f(0x16f);else{if(_0x15ee02===_0xb831f(0xfc))_0x15ee02=_0xb831f(0xcc);}}else _0x15ee02=_0x21e569[_0xb831f(0x206)];if(_0x15ee02===_0xb831f(0x16f)){_0x21e569[_0xb831f(0x117)]=path['resolve'](__dirname,'..')+'/';const _0x39fa03=/\\/g;_0x21e569[_0xb831f(0x117)]=_0x21e569[_0xb831f(0x117)][_0xb831f(0x25b)](_0x39fa03,'/');}else _0x21e569[_0xb831f(0x117)]=path['resolve'](__dirname,'..')+'/';}if(_0x2aa7a1===_0xb831f(0x179)){let _0xcb8c3a=os[_0xb831f(0x206)]();if(_0xcb8c3a===_0xb831f(0x10e))_0xcb8c3a=_0xb831f(0x16f);else _0xcb8c3a=_0xb831f(0xcc);_0xcb8c3a===_0xb831f(0x16f)?_0x40e0a2===!![]&&(_0x21e569[_0xb831f(0x199)]=_0x21e569['autoxchange_executable_windows'],_0x21e569[_0xb831f(0x16e)]=_0x21e569[_0xb831f(0x1a6)],_0x21e569[_0xb831f(0x1d5)]=_0x21e569[_0xb831f(0xdd)]):_0x40e0a2===!![]&&(_0x21e569['autoxchange_executable']=_0x21e569[_0xb831f(0xe7)],_0x21e569['dwgmerge_executable']=_0x21e569['dwgmerge_executable_linux'],_0x21e569[_0xb831f(0x1d5)]=_0x21e569['linklist_executable_linux']),_0x21e569[_0xb831f(0x206)]=_0xcb8c3a;}if(_0x21e569[_0xb831f(0x179)]){let _0x5416b3=os['platform']();if(_0x5416b3==='win32')_0x5416b3=_0xb831f(0x16f);else _0x5416b3='linux';if(_0x5416b3==='windows'){if(_0x2aa7a1===_0xb831f(0x119))_0x21e569[_0xb831f(0x199)]=_0x40e0a2;else{if(_0x2aa7a1===_0xb831f(0x1a6))_0x21e569[_0xb831f(0x16e)]=_0x40e0a2;else _0x2aa7a1===_0xb831f(0xdd)&&(_0x21e569['linklist_executable']=_0x40e0a2);}}else{if(_0x2aa7a1===_0xb831f(0xe7))_0x21e569[_0xb831f(0x199)]=_0x40e0a2;else{if(_0x2aa7a1==='dwgmerge_executable_linux')_0x21e569[_0xb831f(0x16e)]=_0x40e0a2;else _0x2aa7a1===_0xb831f(0x17a)&&(_0x21e569['linklist_executable']=_0x40e0a2);}}}fs[_0xb831f(0xd5)](_0x20c3f0,JSON[_0xb831f(0x214)](_0x21e569,null,0x4),function(_0x3146cb){const _0x32e3e3=_0xb831f;_0x3146cb&&_0x3d6fe8[_0x32e3e3(0x114)](0x1f4)[_0x32e3e3(0x163)](_0x3146cb),_0x3d6fe8[_0x32e3e3(0x114)](0xc8)[_0x32e3e3(0x265)]({'message':_0x32e3e3(0x213)});});});}),router[a27_0x2528ea(0x137)](a27_0x2528ea(0x120),async(_0x38201d,_0x2d2885)=>{const _0x39914c=a27_0x2528ea,_0x5d14da=getHotConfig(),_0x31470e=(_0x5d14da['dwgmergeLocation'][_0x39914c(0x13f)](_0x5d14da[_0x39914c(0x117)])?'':_0x5d14da[_0x39914c(0x117)])+_0x5d14da[_0x39914c(0x164)],_0x25a2ac=(_0x5d14da['dwgmergeLocation'][_0x39914c(0x13f)](_0x5d14da[_0x39914c(0x117)])?'':_0x5d14da['ServerLocation'])+_0x5d14da[_0x39914c(0x24c)],_0x2bc5d6=(_0x5d14da['converterLocation'][_0x39914c(0x13f)](_0x5d14da['ServerLocation'])?'':_0x5d14da[_0x39914c(0x117)])+_0x5d14da['converterLocation'],_0x30e673=/ax202.*\.exe/,_0x1ab392=/ax202.*/,_0x5a02b8=/dwgmerge202.*\.exe/,_0x1eef45=/dwgmerge_202.*/,_0x33412b=/linklist_202.*\.exe/,_0xda0028=/linklist_202.*/,_0x446186=[],_0x92c1ef=[],_0xedb2aa=[],_0x17018f=[],_0x1c8835=[],_0x4b148f=[];let _0x4dbc6a='';if(_0x5d14da[_0x39914c(0x179)]){_0x4dbc6a=os[_0x39914c(0x206)]();if(_0x4dbc6a==='win32')_0x4dbc6a=_0x39914c(0x16f);else{if(_0x4dbc6a===_0x39914c(0xfc))_0x4dbc6a='linux';}}else _0x4dbc6a=_0x5d14da[_0x39914c(0x206)];fs[_0x39914c(0x219)](_0x2bc5d6[_0x39914c(0x21d)]('linux',_0x39914c(0x16f)))[_0x39914c(0x1db)](_0x163e5d=>{const _0x2ce69e=_0x39914c;if(_0x30e673['test'](_0x163e5d[_0x2ce69e(0x1dc)]()))_0x446186[_0x2ce69e(0x127)](_0x163e5d);}),fs['readdirSync'](_0x31470e[_0x39914c(0x21d)](_0x39914c(0xcc),_0x39914c(0x16f)))[_0x39914c(0x1db)](_0x4aada6=>{const _0x2aec35=_0x39914c;if(_0x5a02b8[_0x2aec35(0x1f8)](_0x4aada6[_0x2aec35(0x1dc)]()))_0x92c1ef['push'](_0x4aada6);}),fs[_0x39914c(0x219)](_0x25a2ac[_0x39914c(0x21d)](_0x39914c(0xcc),'windows'))['forEach'](_0x298dbe=>{const _0x26d1d4=_0x39914c;if(_0x33412b[_0x26d1d4(0x1f8)](_0x298dbe[_0x26d1d4(0x1dc)]()))_0xedb2aa['push'](_0x298dbe);}),fs[_0x39914c(0x219)](_0x2bc5d6['replaceAll'](_0x39914c(0x16f),_0x39914c(0xcc)))[_0x39914c(0x1db)](_0x395835=>{const _0x55befc=_0x39914c;if(_0x1ab392[_0x55befc(0x1f8)](_0x395835[_0x55befc(0x1dc)]()))_0x17018f[_0x55befc(0x127)](_0x395835);}),fs[_0x39914c(0x219)](_0x31470e[_0x39914c(0x21d)](_0x39914c(0x16f),_0x39914c(0xcc)))[_0x39914c(0x1db)](_0x26560d=>{const _0x4fffeb=_0x39914c;if(_0x1eef45[_0x4fffeb(0x1f8)](_0x26560d[_0x4fffeb(0x1dc)]()))_0x1c8835['push'](_0x26560d);}),fs[_0x39914c(0x219)](_0x25a2ac[_0x39914c(0x21d)](_0x39914c(0x16f),_0x39914c(0xcc)))[_0x39914c(0x1db)](_0xd3cc82=>{const _0x3e35e1=_0x39914c;if(_0xda0028[_0x3e35e1(0x1f8)](_0xd3cc82[_0x3e35e1(0x1dc)]()))_0x4b148f[_0x3e35e1(0x127)](_0xd3cc82);});const _0x45d78a=[_0x39914c(0x207),_0x39914c(0x1e0),_0x39914c(0x1e4),'converterpathLin',_0x39914c(0x1a4)],_0x129612=[_0x39914c(0x109),_0x39914c(0xc9),_0x39914c(0xf5),_0x39914c(0x115),_0x39914c(0x176),'temp_print_folder',_0x39914c(0x235),_0x39914c(0x164),_0x39914c(0x24c),_0x39914c(0x1c0)],_0x1d08c6=[_0x39914c(0xd3),_0x39914c(0x122),_0x39914c(0x20f),_0x39914c(0x23c),_0x39914c(0x12e),_0x39914c(0x11b),_0x39914c(0x157)],_0x1aca3f={'ServerUrl':_0x39914c(0x20c),'autoxchange_executable':'AutoXchange\x20Settings','linklist_executable':'LinkList\x20Settings','dwgmerge_executable':_0x39914c(0x150),'setup_mysqlHost':_0x39914c(0x1f5),'callbackMethod_gatewayUrl_flag':_0x39914c(0xd9),'userFolderMaximumFiles':_0x39914c(0x167),'smtpHost':_0x39914c(0x20e)},_0x17c538={'https':'boolean','ServerFrontEndUrlAsAllowedOriginOnly':_0x39914c(0x189),'autodetect_platform':_0x39914c(0x189),'cvjs_svgz_compress':_0x39914c(0x189),'cached_conversion':_0x39914c(0x189),'remainOnServer':'boolean','cvjs_debug':_0x39914c(0x189),'autodetect_location':_0x39914c(0x189),'platform':_0x39914c(0x13a),'autoxchange_executable':'radio|'+(_0x4dbc6a===_0x39914c(0x16f)?_0x446186['join'](','):_0x17018f[_0x39914c(0xec)](',')),'autoxchange_executable_windows':'radio|'+_0x446186['join'](','),'autoxchange_executable_linux':_0x39914c(0xc8)+_0x17018f[_0x39914c(0xec)](','),'dwgmerge_executable':_0x39914c(0xc8)+(_0x4dbc6a===_0x39914c(0x16f)?_0x92c1ef[_0x39914c(0xec)](','):_0x1c8835[_0x39914c(0xec)](',')),'dwgmerge_executable_windows':_0x39914c(0xc8)+_0x92c1ef[_0x39914c(0xec)](','),'dwgmerge_executable_linux':_0x39914c(0xc8)+_0x1c8835[_0x39914c(0xec)](','),'linklist_executable':_0x39914c(0xc8)+(_0x4dbc6a==='windows'?_0xedb2aa[_0x39914c(0xec)](','):_0x4b148f['join'](',')),'linklist_executable_windows':'radio|'+_0xedb2aa[_0x39914c(0xec)](','),'linklist_executable_linux':_0x39914c(0xc8)+_0x4b148f[_0x39914c(0xec)](','),'callbackMethod_gatewayUrl_flag':_0x39914c(0x189),'setup_mysqlHost':_0x39914c(0x189),'ContentSecurityPolicyReportOnly':'boolean','fileLoad_PasswordAuthentication':_0x39914c(0x189),'contentLocationCheck':_0x39914c(0x189),'globalBearerAutentication':_0x39914c(0x189),'bcryptSaltRounds':_0x39914c(0x134),'userFolderMaximumFiles':_0x39914c(0x134),'userFolderMaximumSizeInMB':_0x39914c(0x134),'recaptchaEnabled':'boolean','usersExportFrequency':_0x39914c(0xd8),'enableEmailVerification':_0x39914c(0x189),'demoUserRetentionDaysAlertBeforeDeletion':_0x39914c(0x134),'demoUserRetentionDays':_0x39914c(0x134)},_0x2a1bc8={},_0x2c113d=Object[_0x39914c(0x1a0)](_0x5d14da);_0x5d14da['autodetect_platform']&&_0x45d78a[_0x39914c(0x127)](_0x39914c(0x206)),_0x5d14da[_0x39914c(0x183)]&&(_0x129612[_0x39914c(0x127)](_0x39914c(0x117)),_0x129612['push'](_0x39914c(0x199)),_0x129612[_0x39914c(0x127)](_0x39914c(0x16e)),_0x129612['push']('linklist_executable')),!_0x5d14da['callbackMethod_gatewayUrl_flag']&&_0x129612['push']('callbackMethod_gatewayUrl'),!_0x5d14da['setup_mysqlHost']&&(_0x129612[_0x39914c(0x127)](_0x39914c(0x122)),_0x129612[_0x39914c(0x127)](_0x39914c(0x20f)),_0x129612[_0x39914c(0x127)](_0x39914c(0x23c)),_0x129612[_0x39914c(0x127)](_0x39914c(0x12e))),!_0x5d14da['ContentSecurityPolicyReportOnly']&&_0x129612['push'](_0x39914c(0x177)),!_0x5d14da['fileLoad_PasswordAuthentication']&&(_0x129612[_0x39914c(0x127)](_0x39914c(0x12f)),_0x129612['push'](_0x39914c(0x1f9))),!_0x5d14da[_0x39914c(0x1cd)]&&_0x129612[_0x39914c(0x127)](_0x39914c(0x15c)),_0x2c113d['forEach'](_0x2682e6=>{const _0x1fc338=_0x39914c;!_0x45d78a[_0x1fc338(0x13f)](_0x2682e6)&&(_0x2a1bc8[_0x2682e6]=_0x5d14da[_0x2682e6]);}),_0x2a1bc8[_0x39914c(0xc9)]=''+_0x5d14da['ServerUrl']+_0x5d14da['fileLocation'],_0x2d2885[_0x39914c(0x114)](0xc8)['json']({'notEditableFields':_0x129612,'customFieldTypes':_0x17c538,'notHotEditableFields':_0x1d08c6,'config':_0x2a1bc8,'fieldsTitle':_0x1aca3f,'configData':_0x5d14da});}),router[a27_0x2528ea(0x1cb)](a27_0x2528ea(0x244),protectedRoute,async(_0xd94f15,_0x4a1c96)=>{const _0x267383=a27_0x2528ea,_0x37580b=fs[_0x267383(0x26a)](path[_0x267383(0xec)](path[_0x267383(0x1ae)](require[_0x267383(0x1ce)][_0x267383(0x269)]),'cadviewer/settings/logs.html'),_0x267383(0xf4)),_0x32299a=_0x37580b[_0x267383(0x21d)]('{version}',_0xd94f15[_0x267383(0x1c0)]);_0x4a1c96[_0x267383(0x163)](_0x32299a);});function findMatchingLogFiles(_0xdb4d7d,_0x2cf9ee=/^call-Api_Conversion_\d{1,2}_\d{1,2}_\d{4}\.log$/){const _0x41040b=a27_0x2528ea;try{const _0x5c6b5a=fs[_0x41040b(0x219)](_0xdb4d7d);return _0x5c6b5a[_0x41040b(0x143)](_0x3c80a7=>_0x2cf9ee['test'](_0x3c80a7))[_0x41040b(0x1fa)](_0x482c81=>_0x482c81[_0x41040b(0x21d)](_0x41040b(0x187),'')[_0x41040b(0x21d)]('.log',''));}catch(_0x3ce9f6){return console[_0x41040b(0x1cc)](_0x41040b(0x14a),_0x3ce9f6),[];}}router[a27_0x2528ea(0x137)](a27_0x2528ea(0x18d),async(_0x418a96,_0x47a445)=>{const _0x5d5a2f=a27_0x2528ea,_0x17fdf3=new Date(),_0x43f55a=_0x17fdf3[_0x5d5a2f(0x139)]()[_0x5d5a2f(0x262)]()[_0x5d5a2f(0x229)](0x2,'0')+'_'+(_0x17fdf3[_0x5d5a2f(0x16a)]()+0x1)[_0x5d5a2f(0x262)]()[_0x5d5a2f(0x229)](0x2,'0')+'_'+_0x17fdf3['getFullYear'](),{displayDay:_0xabca01}=_0x418a96[_0x5d5a2f(0x18c)],_0xc447e4=path[_0x5d5a2f(0xec)](path['dirname'](require['main'][_0x5d5a2f(0x269)]),_0x5d5a2f(0x1f6),_0x5d5a2f(0x187)+(_0xabca01??_0x43f55a)+_0x5d5a2f(0x160));fs[_0x5d5a2f(0x24b)](_0xc447e4)?fs[_0x5d5a2f(0x136)](_0xc447e4,_0x5d5a2f(0xf4),function(_0x260c78,_0x39cc2f){const _0x463ef6=_0x5d5a2f;_0x260c78&&_0x47a445[_0x463ef6(0x114)](0x1f4)[_0x463ef6(0x163)](_0x260c78),_0x47a445[_0x463ef6(0x114)](0xc8)[_0x463ef6(0x265)]({'content':_0x39cc2f,'days':findMatchingLogFiles(path[_0x463ef6(0xec)](path['dirname'](require[_0x463ef6(0x1ce)][_0x463ef6(0x269)]),'logs'))});}):_0x47a445[_0x5d5a2f(0x114)](0xc8)['json']({'content':'','days':findMatchingLogFiles(path[_0x5d5a2f(0xec)](path[_0x5d5a2f(0x1ae)](require['main'][_0x5d5a2f(0x269)]),_0x5d5a2f(0x1f6)))});}),router[a27_0x2528ea(0xee)](a27_0x2528ea(0xd0),async(_0xb11ffd,_0x389149)=>{const _0x4e4b07=a27_0x2528ea,_0x40f87e=new Date(),_0x12ed89=_0x40f87e[_0x4e4b07(0x139)]()[_0x4e4b07(0x262)]()[_0x4e4b07(0x229)](0x2,'0')+'_'+(_0x40f87e[_0x4e4b07(0x16a)]()+0x1)[_0x4e4b07(0x262)]()[_0x4e4b07(0x229)](0x2,'0')+'_'+_0x40f87e[_0x4e4b07(0x236)](),_0x45a034=findMatchingLogFiles(path[_0x4e4b07(0xec)](path[_0x4e4b07(0x1ae)](require[_0x4e4b07(0x1ce)][_0x4e4b07(0x269)]),'logs'));_0x45a034[_0x4e4b07(0x1db)](_0xad0c44=>{const _0x18326b=_0x4e4b07;if(_0xad0c44!==_0x12ed89)fs[_0x18326b(0x15a)](path['join'](path[_0x18326b(0x1ae)](require[_0x18326b(0x1ce)][_0x18326b(0x269)]),_0x18326b(0x1f6),_0x18326b(0x187)+_0xad0c44+_0x18326b(0x160)));}),logStream[_0x4e4b07(0x1fb)](),_0x389149[_0x4e4b07(0x114)](0xc8)[_0x4e4b07(0x265)]({'message':_0x4e4b07(0xbd)});}),router[a27_0x2528ea(0x1cb)](a27_0x2528ea(0x254),protectedRoute,async(_0x9b90ea,_0x4c93aa)=>{const _0x558841=a27_0x2528ea,_0x17d9bb=path[_0x558841(0xec)](path[_0x558841(0x1ae)](require['main'][_0x558841(0x269)]),_0x558841(0x22e));if(!fs['existsSync'](_0x17d9bb)){const _0x280b93={'jsonDataExtraction':{'standard':[{'paramName':_0x558841(0x265),'paramValue':''},{'paramName':_0x558841(0x1c8),'paramValue':''}]},'dwgToSvg':{'standard':[{'paramName':'f','paramValue':_0x558841(0x204)},{'paramName':'model','paramValue':''},{'paramName':_0x558841(0x1c7),'paramValue':''}]},'dwgToPdf':{'standard':[{'paramName':'f','paramValue':'pdf'},{'paramName':_0x558841(0x168),'paramValue':''}]},'displayDwg':{'standard':[{'paramName':'f','paramValue':_0x558841(0x204)},{'paramName':'model','paramValue':''},{'paramName':_0x558841(0x1c7),'paramValue':''}]},'dwgToMultiple':{'standard':[{'paramName':'splity','paramValue':''}]}};fs['writeFileSync'](_0x17d9bb,JSON[_0x558841(0x214)](_0x280b93,null,0x4));}const _0xf4ed99=fs['readFileSync'](path[_0x558841(0xec)](path[_0x558841(0x1ae)](require[_0x558841(0x1ce)][_0x558841(0x269)]),_0x558841(0x198)),_0x558841(0xf4)),_0x1beadc=_0xf4ed99[_0x558841(0x21d)]('{version}',_0x9b90ea['version']);_0x4c93aa['send'](_0x1beadc);}),router[a27_0x2528ea(0x137)](a27_0x2528ea(0x238),async(_0x50f072,_0x58a301)=>{const _0x247bb1=a27_0x2528ea,{actionName:_0x12ed2e,contentLocation:_0x519da4}=_0x50f072[_0x247bb1(0x18c)],_0x1eb7f4=path[_0x247bb1(0xec)](path['dirname'](require[_0x247bb1(0x1ce)][_0x247bb1(0x269)]),_0x247bb1(0x22e));fs[_0x247bb1(0x136)](_0x1eb7f4,_0x247bb1(0xf4),function(_0xff952e,_0x310a11){const _0x552e1c=_0x247bb1;if(_0xff952e)_0x58a301[_0x552e1c(0x114)](0xc8)['json']({'parameters':[]});else{const _0x26eca8=JSON[_0x552e1c(0x248)](_0x310a11);if(_0x26eca8[_0x12ed2e]&&_0x26eca8[_0x12ed2e][_0x519da4])_0x58a301['status'](0xc8)['json']({'parameters':_0x26eca8[_0x12ed2e][_0x519da4]});else _0x26eca8[_0x12ed2e]&&_0x26eca8[_0x12ed2e][_0x552e1c(0x1ee)]?_0x58a301[_0x552e1c(0x114)](0xc8)[_0x552e1c(0x265)]({'parameters':_0x26eca8[_0x12ed2e][_0x552e1c(0x1ee)]}):_0x58a301['status'](0xc8)[_0x552e1c(0x265)]({'parameters':[]});}});}),router[a27_0x2528ea(0x137)](a27_0x2528ea(0x1c4),async(_0x3c03dc,_0x1b3026)=>{const _0x47c9d6=a27_0x2528ea,{actionName:_0x523e2d,contentLocation:_0x501fa8,parameters:_0x42c051}=_0x3c03dc[_0x47c9d6(0x18c)],_0x42eb6d=path[_0x47c9d6(0xec)](path[_0x47c9d6(0x1ae)](require[_0x47c9d6(0x1ce)]['filename']),'cadviewer/settings/rest-api-parameters.json');fs['readFile'](_0x42eb6d,_0x47c9d6(0xf4),function(_0xa6fd93,_0x5e9918){const _0x6574f3=_0x47c9d6;if(_0xa6fd93)_0x1b3026[_0x6574f3(0x114)](0x199)[_0x6574f3(0x265)]({'message':'Error\x20saving\x20parameters.'});else{const _0x331d2a=JSON[_0x6574f3(0x248)](_0x5e9918);!_0x331d2a[_0x523e2d]&&(_0x331d2a[_0x523e2d]={}),_0x331d2a[_0x523e2d][_0x501fa8]=_0x42c051,fs['writeFile'](_0x42eb6d,JSON['stringify'](_0x331d2a,null,0x4),function(_0x43591b){const _0x12b996=_0x6574f3;_0x43591b&&_0x1b3026[_0x12b996(0x114)](0x199)[_0x12b996(0x265)]({'message':_0x12b996(0x105)}),_0x1b3026[_0x12b996(0x114)](0xc8)['json']({'message':_0x12b996(0x1ac)});});}});}),router[a27_0x2528ea(0x1cb)](a27_0x2528ea(0xcb),protectedRoute,async(_0x531941,_0x3ab36d)=>{const _0x5aae3e=a27_0x2528ea,_0x16b618=fs['readFileSync'](path['join'](path[_0x5aae3e(0x1ae)](require[_0x5aae3e(0x1ce)][_0x5aae3e(0x269)]),_0x5aae3e(0x126)),'utf8'),_0x30072c=_0x16b618[_0x5aae3e(0x21d)](_0x5aae3e(0x185),_0x531941[_0x5aae3e(0x1c0)]);_0x3ab36d[_0x5aae3e(0x163)](_0x30072c);}),router['post']('/doctor/check',async(_0x334fbc,_0x57d8b1)=>{const _0x2d513a=a27_0x2528ea,_0x543dc9=getHotConfig(),_0x56eb94=_0x543dc9['converterLocation']['replaceAll']('//','/'),_0x2bdc0a=_0x543dc9[_0x2d513a(0x164)][_0x2d513a(0x21d)]('//','/'),_0x24607c=_0x543dc9[_0x2d513a(0x24c)]['replaceAll']('//','/'),_0xa51fcd=''+_0x56eb94+_0x543dc9['autoxchange_executable'],_0x2ae89a=''+_0x2bdc0a+_0x543dc9['dwgmerge_executable'],_0x220ad8=''+_0x24607c+_0x543dc9[_0x2d513a(0x1d5)],_0x2765f0=[],_0x253734=new Promise(_0x5e8b5d=>{const _0x2546c5=_0x2d513a;exec(os[_0x2546c5(0x206)]()===_0x2546c5(0x10e)?_0x2546c5(0x25f):'ls',_0x3ec106=>{const _0x12fb8b=_0x2546c5;_0x3ec106?_0x2765f0['push']({'title':_0x12fb8b(0x264),'status':![],'priority':0x1}):_0x2765f0[_0x12fb8b(0x127)]({'title':'\x22exec\x22\x20command\x20activated\x20on\x20NodeJS','status':!![],'priority':0x1}),_0x5e8b5d();});}),_0xfb2983=new Promise(_0x4b158b=>{const _0x764f=_0x2d513a;fs[_0x764f(0x1e1)](_0xa51fcd,fs[_0x764f(0x14f)][_0x764f(0x1e8)],_0x201f81=>{const _0x4f58c0=_0x764f;_0x201f81?_0x2765f0['push']({'title':'Permission\x20750\x20for\x20the\x20\x22'+_0x543dc9[_0x4f58c0(0x199)]+_0x4f58c0(0x1b9),'status':![],'priority':0x2}):_0x2765f0[_0x4f58c0(0x127)]({'title':_0x4f58c0(0x215)+_0x543dc9[_0x4f58c0(0x199)]+'\x22\x20executable','status':!![],'priority':0x2}),_0x4b158b();});}),_0x5e531d=new Promise(_0x119749=>{const _0x3a6583=_0x2d513a;fs[_0x3a6583(0x1e1)](_0x2ae89a,fs[_0x3a6583(0x14f)][_0x3a6583(0x1e8)],_0x2bb559=>{const _0x19853b=_0x3a6583;_0x2bb559?_0x2765f0[_0x19853b(0x127)]({'title':_0x19853b(0x215)+_0x543dc9['dwgmerge_executable']+'\x22\x20executable','status':![],'priority':0x3}):_0x2765f0['push']({'title':_0x19853b(0x215)+_0x543dc9[_0x19853b(0x16e)]+_0x19853b(0x1b9),'status':!![],'priority':0x3}),_0x119749();});}),_0x41b217=new Promise(_0x43644c=>{const _0x37fd67=_0x2d513a;fs[_0x37fd67(0x1e1)](_0x220ad8,fs[_0x37fd67(0x14f)][_0x37fd67(0x1e8)],_0x26012d=>{const _0x80e3fa=_0x37fd67;_0x26012d?_0x2765f0['push']({'title':'Permission\x20750\x20for\x20the\x20\x22'+_0x543dc9[_0x80e3fa(0x1d5)]+'\x22\x20executable','status':![],'priority':0x4}):_0x2765f0[_0x80e3fa(0x127)]({'title':_0x80e3fa(0x215)+_0x543dc9[_0x80e3fa(0x1d5)]+_0x80e3fa(0x1b9),'status':!![],'priority':0x4}),_0x43644c();});}),_0x440f05=new Promise(_0x5d4111=>{const _0x5a7484=_0x2d513a,_0x4ca126=new Date(),_0x2fd3d6=_0x4ca126[_0x5a7484(0x139)]()[_0x5a7484(0x262)]()[_0x5a7484(0x229)](0x2,'0')+'_'+(_0x4ca126['getMonth']()+0x1)['toString']()[_0x5a7484(0x229)](0x2,'0')+'_'+_0x4ca126[_0x5a7484(0x236)](),{displayDay:_0x54178a}=_0x334fbc[_0x5a7484(0x18c)];fs[_0x5a7484(0x1e1)](path['join'](path[_0x5a7484(0x1ae)](require[_0x5a7484(0x1ce)][_0x5a7484(0x269)]),_0x5a7484(0x1f6),_0x5a7484(0x187)+(_0x54178a??_0x2fd3d6)+_0x5a7484(0x160)),fs['constants']['W_OK'],_0x3ced35=>{const _0x587c79=_0x5a7484;_0x3ced35?_0x2765f0[_0x587c79(0x127)]({'title':_0x587c79(0xf7)+(_0x54178a??_0x2fd3d6)+_0x587c79(0x263),'status':![],'priority':0x5}):_0x2765f0[_0x587c79(0x127)]({'title':'Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_'+(_0x54178a??_0x2fd3d6)+'.log\x22','status':!![],'priority':0x5}),_0x5d4111();});}),_0x4968b4=(_0x1deb31,_0x4d5fd1)=>{const _0x9fdafc=_0x2d513a,_0x346147=path['join'](path[_0x9fdafc(0x1ae)](require[_0x9fdafc(0x1ce)][_0x9fdafc(0x269)]),_0x1deb31);return new Promise(_0x449d11=>{const _0x43ab5f=_0x9fdafc;fs[_0x43ab5f(0x1e1)](path[_0x43ab5f(0xec)](path['dirname'](_0x346147)),fs[_0x43ab5f(0x14f)][_0x43ab5f(0x15f)]|fs[_0x43ab5f(0x14f)][_0x43ab5f(0x1b3)],_0x4979ae=>{const _0x5c08ee=_0x43ab5f;_0x4979ae?_0x2765f0['push']({'title':'Read\x20and\x20write\x20permission\x20for\x20folder\x20'+_0x1deb31,'status':![],'priority':_0x4d5fd1+0x6}):_0x2765f0[_0x5c08ee(0x127)]({'title':_0x5c08ee(0x246)+_0x1deb31,'status':!![],'priority':_0x4d5fd1+0x6}),_0x449d11();});});},_0x37fbaf=['/converters/files/',_0x2d513a(0x190),_0x2d513a(0x216),_0x2d513a(0x196),_0x2d513a(0xcd),_0x2d513a(0x12b),_0x2d513a(0x111)],_0x513366=_0x37fbaf[_0x2d513a(0x1fa)](_0x4968b4);Promise[_0x2d513a(0x1a7)]([_0x253734,_0xfb2983,_0x5e531d,_0x41b217,_0x440f05,..._0x513366])[_0x2d513a(0x247)](()=>{const _0x3faa73=_0x2d513a;_0x57d8b1['status'](0xc8)[_0x3faa73(0x265)]({'checking_list':_0x2765f0});})[_0x2d513a(0x23e)](()=>{const _0xf24c27=_0x2d513a;_0x57d8b1[_0xf24c27(0x114)](0x1f4)[_0xf24c27(0x265)]({'error':_0xf24c27(0x230)});});}),router['get'](a27_0x2528ea(0x245),protectedRoute,async(_0x1008c2,_0x36409f)=>{const _0x53081b=a27_0x2528ea,_0x1b2938=fs[_0x53081b(0x26a)](path[_0x53081b(0xec)](path[_0x53081b(0x1ae)](require['main'][_0x53081b(0x269)]),_0x53081b(0x257)),_0x53081b(0xf4)),_0x2e9581=_0x1b2938[_0x53081b(0x21d)]('{version}',_0x1008c2[_0x53081b(0x1c0)]);_0x36409f[_0x53081b(0x163)](_0x2e9581);}),router[a27_0x2528ea(0x137)](a27_0x2528ea(0x1c9),async(_0x3199c5,_0x41e865)=>{const _0x4cbe5c=a27_0x2528ea;let _0x25b50d;try{const [_0x48d31b]=await conn['promise']()['execute'](_0x4cbe5c(0xe5),[]);_0x25b50d=_0x48d31b;}catch(_0xc6f7a0){console[_0x4cbe5c(0x202)](_0xc6f7a0),_0x41e865[_0x4cbe5c(0x114)](0x1f4)['json']({'error':_0x4cbe5c(0x21a)});return;}_0x41e865['status'](0xc8)['json']({'success':!![],'data':_0x25b50d});}),router[a27_0x2528ea(0x137)](a27_0x2528ea(0x245),upload[a27_0x2528ea(0x11e)](a27_0x2528ea(0xd2)),async(_0x461504,_0xd92255)=>{const _0x19f98c=a27_0x2528ea,{id:_0x3ee66d,first_name:_0x5a22b0,last_name:_0xd9fd72,username:_0x5a2b6c,email:_0x287ee2,password:_0x20226b,is_enabled:_0x265156}=_0x461504[_0x19f98c(0x18c)],_0x2d5b2b=_0x461504[_0x19f98c(0x18c)][_0x19f98c(0xed)]===_0x19f98c(0x11a)?'admin':_0x461504[_0x19f98c(0x18c)][_0x19f98c(0xed)]===_0x19f98c(0x256)?'demo_user':_0x19f98c(0x227);let _0x17e4ef;console[_0x19f98c(0x202)]('=============================>');_0x20226b&&(_0x17e4ef=await bcrypt[_0x19f98c(0x17d)](_0x20226b,0xa));let _0x3c69d2=null;if(_0x461504[_0x19f98c(0x23b)]){const _0x461fbc=_0x19f98c(0x108)+randomUUID()+_0x19f98c(0x255);fs[_0x19f98c(0x10a)](_0x461504['file'][_0x19f98c(0x123)],'./'+_0x461fbc),fs[_0x19f98c(0x15a)](_0x461504['file']['path']),config['callbackMethod_gatewayUrl_flag']?_0x3c69d2=config[_0x19f98c(0x218)]+'/'+_0x461fbc:_0x3c69d2=config[_0x19f98c(0xd3)]+'/'+_0x461fbc;}if(_0x3ee66d){try{let [_0x524f4f]=await conn['promise']()[_0x19f98c(0x1de)](_0x19f98c(0x250),[_0x287ee2,_0x5a2b6c,_0x3ee66d]);if(_0x524f4f[_0x19f98c(0xbe)]>0x0)_0xd92255[_0x19f98c(0x114)](0x199)['json']({'error':_0x19f98c(0x242)});else{!_0x461504['file']&&([_0x524f4f]=await conn[_0x19f98c(0x1d7)]()[_0x19f98c(0x1de)](_0x19f98c(0x182),[_0x3ee66d]),_0x3c69d2=_0x524f4f[0x0][_0x19f98c(0xe3)]);const _0x202101=_0x19f98c(0x166)+(_0x20226b?'`crypted_password`\x20=\x20?,\x20':'')+'`is_enabled`\x20=\x20?,\x20`role`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?';await conn[_0x19f98c(0x1d7)]()[_0x19f98c(0x1de)](_0x202101,_0x20226b?[_0x3c69d2,_0x5a22b0,_0xd9fd72,_0x5a2b6c,_0x287ee2,_0x17e4ef,_0x265156,_0x2d5b2b,_0x3ee66d]:[_0x3c69d2,_0x5a22b0,_0xd9fd72,_0x5a2b6c,_0x287ee2,_0x265156,_0x2d5b2b,_0x3ee66d]);}}catch(_0x1fa47b){console[_0x19f98c(0x202)](_0x1fa47b),_0xd92255['status'](0x1f4)[_0x19f98c(0x265)]({'error':_0x19f98c(0x21a)});return;}_0xd92255['status'](0xc8)[_0x19f98c(0x265)]({'success':!![],'message':_0x19f98c(0xca)});}else{try{const [_0x4e83d7]=await conn[_0x19f98c(0x1d7)]()[_0x19f98c(0x1de)](_0x19f98c(0x175),[_0x287ee2,_0x5a2b6c]);if(_0x4e83d7[_0x19f98c(0xbe)]>0x0)_0xd92255[_0x19f98c(0x114)](0x199)[_0x19f98c(0x265)]({'error':'User\x20with\x20that\x20email\x20or\x20username\x20already\x20exists'});else{const _0x4da642=randomUUID();await conn['promise']()[_0x19f98c(0x1de)](_0x19f98c(0x200),[_0x3c69d2,_0x5a22b0,_0xd9fd72,_0x5a2b6c,_0x287ee2,_0x17e4ef,_0x2d5b2b,_0x265156,_0x4da642]);const _0x4ea573='./uploads/'+_0x4da642;fs[_0x19f98c(0x223)](_0x4ea573);}}catch(_0x156bed){console[_0x19f98c(0x202)](_0x156bed),_0xd92255[_0x19f98c(0x114)](0x1f4)[_0x19f98c(0x265)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}_0xd92255[_0x19f98c(0x114)](0xc8)[_0x19f98c(0x265)]({'success':!![],'message':_0x19f98c(0xff)});}}),router['delete']('/users/flush-dir',async(_0x5ac6c3,_0x2d7f5b)=>{const _0x49e24b=a27_0x2528ea,{userId:_0x5cf8fd}=_0x5ac6c3[_0x49e24b(0x18c)];let _0x480d4f;try{const [_0x231815]=await conn[_0x49e24b(0x1d7)]()[_0x49e24b(0x1de)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?',[_0x5cf8fd]);_0x231815['length']>0x0&&(_0x480d4f=_0x231815[0x0]);}catch(_0x35c273){console[_0x49e24b(0x202)]({'err':_0x35c273}),_0x2d7f5b[_0x49e24b(0x114)](0x1f4)[_0x49e24b(0x265)]({'error':_0x49e24b(0x21a)});return;}if(!_0x480d4f){_0x2d7f5b[_0x49e24b(0x114)](0x191)[_0x49e24b(0x265)]({'error':_0x49e24b(0xde)});return;}let _0x2fe5e8=_0x480d4f[_0x49e24b(0x156)];if(!_0x2fe5e8){_0x2fe5e8=randomUUID();try{await conn[_0x49e24b(0x1d7)]()['execute']('UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?',[_0x2fe5e8,_0x5cf8fd]);}catch(_0x5708a2){console[_0x49e24b(0x202)]({'err':_0x5708a2}),_0x2d7f5b[_0x49e24b(0x114)](0x1f4)[_0x49e24b(0x265)]({'error':_0x49e24b(0x21a)});return;}}const _0xaba794=_0x49e24b(0x128)+_0x2fe5e8;console[_0x49e24b(0x202)](_0x49e24b(0xe8)),console[_0x49e24b(0x202)](_0xaba794),!fs[_0x49e24b(0x24b)](_0xaba794)&&fs['mkdirSync'](_0xaba794),cleanCacheForUserFiles(_0xaba794),fs[_0x49e24b(0x21b)](_0xaba794,{'recursive':!![],'force':!![]}),fs[_0x49e24b(0x223)](_0xaba794),_0x2d7f5b[_0x49e24b(0x114)](0xc8)[_0x49e24b(0x265)]({'success':!![],'message':_0x49e24b(0xe6)});}),router[a27_0x2528ea(0xee)](a27_0x2528ea(0x268),async(_0x40b0e,_0x110e7b)=>{const _0x27f490=a27_0x2528ea,_0x3f76fc=_0x40b0e[_0x27f490(0x116)][_0x27f490(0xda)];try{let _0x453f2b;try{const [_0x3bd738]=await conn[_0x27f490(0x1d7)]()[_0x27f490(0x1de)](_0x27f490(0x182),[_0x3f76fc]);_0x3bd738['length']>0x0&&(_0x453f2b=_0x3bd738[0x0]);}catch(_0x5170c0){console['log']({'err':_0x5170c0}),_0x110e7b[_0x27f490(0x114)](0x1f4)['json']({'error':'Error!\x20Something\x20went\x20wrong.'});return;}if(!_0x453f2b){_0x110e7b[_0x27f490(0x114)](0x191)[_0x27f490(0x265)]({'error':_0x27f490(0xde)});return;}let _0x26f6fd=_0x453f2b['folder_name'];if(_0x26f6fd){const _0x53b4dd=_0x27f490(0x128)+_0x26f6fd;fs['existsSync'](_0x53b4dd)&&(cleanCacheForUserFiles(_0x53b4dd),fs[_0x27f490(0x21b)](_0x53b4dd,{'recursive':!![],'force':!![]}));}await conn['promise']()[_0x27f490(0x1de)]('DELETE\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?',[_0x3f76fc]);}catch(_0x43c2fd){console[_0x27f490(0x202)](_0x43c2fd),_0x110e7b['status'](0x1f4)[_0x27f490(0x265)]({'error':_0x27f490(0x21a)});return;}_0x110e7b[_0x27f490(0x114)](0xc8)[_0x27f490(0x265)]({'success':!![],'message':'User\x20deleted\x20successfully'});}),router[a27_0x2528ea(0x1cb)](a27_0x2528ea(0x1a8),async(_0x470cb0,_0x5a792e)=>{const _0x2bd21d=a27_0x2528ea,_0x107f4b=osu['cpu'],_0x2c4d74=osu[_0x2bd21d(0x18f)],_0x42f900=osu[_0x2bd21d(0x222)],_0x2c6bfd=osu['os'],_0x55e620={'percentage':0x0,'usedGB':0x0,'freeGb':0x0,'totalGB':0x0};try{let _0x5c4e71=os[_0x2bd21d(0x206)]()===_0x2bd21d(0x10e)?'c:':'/';const _0xe86abe=await _0x42f900['info'](_0x5c4e71);_0x55e620[_0x2bd21d(0x195)]=_0xe86abe[_0x2bd21d(0x173)],_0x55e620[_0x2bd21d(0xbf)]=_0xe86abe[_0x2bd21d(0x14d)],_0x55e620[_0x2bd21d(0xd1)]=_0xe86abe[_0x2bd21d(0xd1)],_0x55e620[_0x2bd21d(0xfd)]=_0xe86abe[_0x2bd21d(0x10d)];}catch(_0x24b942){console['log'](_0x2bd21d(0xd4),_0x24b942);}const _0x5e35e8={'usage':0x0,'count':0x0};try{_0x5e35e8['usage']=await _0x107f4b[_0x2bd21d(0xdc)](),_0x5e35e8['count']=_0x107f4b[_0x2bd21d(0x1b0)]();}catch(_0x58270f){console[_0x2bd21d(0x202)](_0x2bd21d(0x132),_0x58270f);}const _0x1d9d4b={'os':'','platform':'','ip':'','uptime':0x0,'hostname':'','type':'','arch':'','who':'','whoami':'','vmstats':''};try{_0x1d9d4b['os']=await _0x2c6bfd[_0x2bd21d(0x18e)](),_0x1d9d4b['platform']=_0x2c6bfd[_0x2bd21d(0x206)](),_0x1d9d4b['ip']=_0x2c6bfd['ip'](),_0x1d9d4b[_0x2bd21d(0x1ea)]=_0x2c6bfd['uptime'](),_0x1d9d4b[_0x2bd21d(0x25d)]=_0x2c6bfd[_0x2bd21d(0x25d)](),_0x1d9d4b[_0x2bd21d(0xdb)]=_0x2c6bfd[_0x2bd21d(0xdb)](),_0x1d9d4b[_0x2bd21d(0x234)]=_0x2c6bfd['arch'](),_0x1d9d4b['who']=await osu[_0x2bd21d(0x1d0)][_0x2bd21d(0x211)](),_0x1d9d4b['whoami']=await osu[_0x2bd21d(0x1d0)][_0x2bd21d(0x124)](),_0x1d9d4b['vmstats']=await osu['osCmd'][_0x2bd21d(0x1f0)]();}catch(_0x48cd13){console[_0x2bd21d(0x202)]('Error\x20getting\x20os\x20info',_0x48cd13);}const _0x38367c={'totalProcesses':0x0,'zombieProcesses':0x0};try{_0x38367c[_0x2bd21d(0xdf)]=await osu[_0x2bd21d(0x1d3)][_0x2bd21d(0xdf)](),_0x38367c[_0x2bd21d(0x110)]=await osu[_0x2bd21d(0x1d3)]['zombieProcesses']();}catch(_0x3afa46){console[_0x2bd21d(0x202)]('Error\x20getting\x20process\x20info',_0x3afa46);}let _0x25ae07={'usedMemPercentage':0x0,'usedMemMb':0x0,'totalMemMb':0x0};try{const _0xade65=await _0x2c4d74['info']();_0x25ae07[_0x2bd21d(0x17c)]=_0xade65['usedMemPercentage'],_0x25ae07[_0x2bd21d(0x155)]=_0xade65[_0x2bd21d(0x141)]/0x400/0x400,_0x25ae07[_0x2bd21d(0x1d2)]=_0xade65[_0x2bd21d(0x24d)]/0x400/0x400;}catch(_0x5cba77){console[_0x2bd21d(0x202)](_0x2bd21d(0x171),_0x5cba77);}let _0x15c63a=0x0;try{_0x15c63a=await conn[_0x2bd21d(0x1d7)]()['query'](_0x2bd21d(0x22a))[_0x2bd21d(0x247)](([_0x31d07b])=>_0x31d07b[0x0]['total']);}catch(_0x40603a){console[_0x2bd21d(0x202)](_0x2bd21d(0x153),_0x40603a);}const _0x1ffd67=getMonitoringData(),_0x45a5fa=_0x1ffd67[_0x2bd21d(0x143)](_0x17b765=>_0x17b765[_0x2bd21d(0x221)]!==null&&_0x17b765[_0x2bd21d(0x221)]!==undefined),_0x2d4933=_0x1ffd67['filter'](_0x4ca390=>_0x4ca390['conversionMemoryUsage']!==null&&_0x4ca390[_0x2bd21d(0xeb)]!==undefined)[_0x2bd21d(0x1fa)](_0x3c67ae=>parseFloat(_0x3c67ae['conversionMemoryUsage'][_0x2bd21d(0x21d)]('Kb')['trim']())),_0x8a1d35=_0x45a5fa[_0x2bd21d(0x12d)]((_0x4a14b0,_0x549cbf)=>_0x4a14b0+parseFloat(_0x549cbf[_0x2bd21d(0x221)]),0x0)/_0x45a5fa[_0x2bd21d(0xbe)],_0x23ead0=_0x2d4933[_0x2bd21d(0x12d)]((_0x9f609e,_0x2b4606)=>_0x9f609e+_0x2b4606,0x0)/_0x2d4933[_0x2bd21d(0xbe)];_0x5a792e[_0x2bd21d(0x265)]({'requestsPerSecond':counter[_0x2bd21d(0x12c)](),'diskUsage':_0x55e620,'cpus':_0x5e35e8,'system':_0x1d9d4b,'process':_0x38367c,'totalMonitoringData':_0x1ffd67[_0x2bd21d(0xbe)],'memory':_0x25ae07,'totalUsers':_0x15c63a,'avgConvertionTime':_0x8a1d35,'avgMemoryUsage':_0x23ead0});}),router[a27_0x2528ea(0x137)]('/metrics/reset',(_0x1b2439,_0x20198c)=>{const _0x1d0cdb=a27_0x2528ea;counter['reset'](),_0x20198c['json']({'message':_0x1d0cdb(0x1b7)});});const getMonitoringData=()=>{const _0x12d84f=a27_0x2528ea,_0xb1828a='cadviewer/settings/requests-callapiconversion-monitoring.json';let _0x152fc9=[];try{_0x152fc9=JSON['parse'](fs[_0x12d84f(0x26a)](_0xb1828a));}catch(_0x3687c0){console['log'](_0x12d84f(0x225));}return _0x152fc9;};router[a27_0x2528ea(0x1cb)](a27_0x2528ea(0xfa),async(_0x2acbe6,_0x193cc5)=>{const _0x136b01=a27_0x2528ea,{page:page=0x1,limit:limit=0xa}=_0x2acbe6[_0x136b01(0x1d4)],_0x2b0dc4=(page-0x1)*limit;try{const _0x26140d=getMonitoringData(),_0x57326f=_0x26140d[_0x136b01(0xbe)],_0x202cbb=Math[_0x136b01(0x19e)](_0x57326f/limit),_0x28b2bd=_0x26140d[_0x136b01(0x121)](_0x2b0dc4,_0x2b0dc4+limit);_0x193cc5[_0x136b01(0x114)](0xc8)[_0x136b01(0x265)]({'data':_0x28b2bd,'page':parseInt(''+page),'totalPages':_0x202cbb,'total':_0x57326f});}catch(_0x4912c6){console[_0x136b01(0x202)](_0x4912c6),_0x193cc5[_0x136b01(0x114)](0x1f4)[_0x136b01(0x265)]({'error':'Error!\x20Something\x20went\x20wrong.'});}}),router[a27_0x2528ea(0xee)]('/conversion/clean',async(_0xbd31ea,_0x4c3272)=>{const _0x2ccc90=a27_0x2528ea,_0x5367f2=_0x2ccc90(0x15b);try{fs['writeFileSync'](_0x5367f2,JSON['stringify']([],null,0x4)),analyzeConverterFiles(),_0x4c3272[_0x2ccc90(0x114)](0xc8)[_0x2ccc90(0x265)]({'message':_0x2ccc90(0xe4)});}catch(_0x5ca087){console['log'](_0x5ca087),_0x4c3272[_0x2ccc90(0x114)](0x1f4)['json']({'error':_0x2ccc90(0x21a)});}}),router[a27_0x2528ea(0x1cb)](a27_0x2528ea(0x20d),async(_0x3171ab,_0x594109)=>{const _0x3c0e9d=a27_0x2528ea,_0x5c510e=getHotConfig()[_0x3c0e9d(0xf5)][_0x3c0e9d(0x21d)]('//','/'),{page:page=0x1,limit:limit=0xa}=_0x3171ab[_0x3c0e9d(0x1d4)],_0x5599c1=(page-0x1)*limit;try{const _0x4a263b=_0x5c510e+_0x3c0e9d(0x15e);console['log'](_0x4a263b);const _0x509795=fs[_0x3c0e9d(0x26a)](_0x4a263b,_0x3c0e9d(0xf4)),_0x568437=_0x509795[_0x3c0e9d(0x209)]('\x0a'),_0x373062=[];_0x568437['forEach'](_0x3b9ba9=>{const _0x552dd8=_0x3c0e9d,_0x31be3d=_0x3b9ba9[_0x552dd8(0x209)](',');if(_0x31be3d['length']<0x4)return;const _0x2fdaf6=_0x31be3d[0x0],_0x1363f2=_0x31be3d[0x1],_0x682c37=parseFloat(_0x31be3d[0x2]);_0x373062['push']({'file':_0x2fdaf6[_0x552dd8(0x21d)]('\x22',''),'action':_0x1363f2,'timeSpend':_0x682c37,'memoryUsage':_0x31be3d[0x3]});});const _0x367c1d=_0x373062[_0x3c0e9d(0xbe)],_0x1d86e4=Math['ceil'](_0x367c1d/limit),_0x60e0=_0x373062[_0x3c0e9d(0x121)](_0x5599c1,_0x5599c1+limit);_0x594109['status'](0xc8)['json']({'data':_0x60e0,'page':parseInt(''+page),'totalPages':_0x1d86e4,'total':_0x367c1d});}catch(_0x31f342){console[_0x3c0e9d(0x202)](_0x31f342),_0x594109[_0x3c0e9d(0x114)](0x1f4)[_0x3c0e9d(0x265)]({'error':_0x3c0e9d(0x21a)});}}),router[a27_0x2528ea(0x1cb)](a27_0x2528ea(0x17e),async(_0x328ab5,_0x31e7df)=>{const _0x20ff1e=a27_0x2528ea,_0x4ea8ee=path[_0x20ff1e(0xec)](path[_0x20ff1e(0x1ae)](require[_0x20ff1e(0x1ce)][_0x20ff1e(0x269)]),'converters',_0x20ff1e(0x186));try{let _0x562179=0x0,_0x19b4b9=0x0;function _0x133087(_0x286689){const _0x560ebc=_0x20ff1e;let _0x1f233b=0x0,_0x1e7ac5=0x0;if(fs[_0x560ebc(0x24b)](_0x286689)){const _0x435f6d=fs['readdirSync'](_0x286689);_0x1e7ac5=0x0;for(const _0x7fbaba of _0x435f6d){const _0xb6810d=path[_0x560ebc(0xec)](_0x286689,_0x7fbaba),_0x5d868b=fs[_0x560ebc(0x1fd)](_0xb6810d);if(_0x5d868b[_0x560ebc(0x102)]()&&_0x7fbaba!==_0x560ebc(0x1a1))_0x1e7ac5++,_0x1f233b+=_0x5d868b[_0x560ebc(0x100)];else{if(_0x5d868b['isDirectory']()){}}}}return{'size':_0x1f233b,'count':_0x1e7ac5};}const _0x5653d1=_0x133087(_0x4ea8ee);_0x562179=_0x5653d1['size'],_0x19b4b9=_0x5653d1[_0x20ff1e(0x1b0)],_0x31e7df[_0x20ff1e(0x265)]({'fileCount':_0x19b4b9,'totalSize':_0x562179});}catch(_0x2ce4dc){console[_0x20ff1e(0x1cc)](_0x20ff1e(0x191),_0x2ce4dc),_0x31e7df[_0x20ff1e(0x114)](0x1f4)[_0x20ff1e(0x265)]({'error':_0x20ff1e(0x228)});}}),router[a27_0x2528ea(0xee)](a27_0x2528ea(0x11d),async(_0x310945,_0x42282e)=>{const _0xfbe3e8=a27_0x2528ea,_0x5c2020=path['join'](path['dirname'](require[_0xfbe3e8(0x1ce)]['filename']),_0xfbe3e8(0x14b),_0xfbe3e8(0x186));try{function _0x286154(_0x10d5e6){const _0x154999=_0xfbe3e8;if(fs['existsSync'](_0x10d5e6)){const _0x2c054d=fs[_0x154999(0x219)](_0x10d5e6);for(const _0x492f71 of _0x2c054d){const _0x13ce6b=path[_0x154999(0xec)](_0x10d5e6,_0x492f71),_0xb6fa3c=fs[_0x154999(0x1fd)](_0x13ce6b);if(_0xb6fa3c[_0x154999(0x151)]()){}else _0x492f71!==_0x154999(0x1a1)&&fs[_0x154999(0x15a)](_0x13ce6b);}}}_0x286154(_0x5c2020),analyzeConverterFiles(),_0x42282e['json']({'message':'Cache\x20flushed\x20successfully'});}catch(_0x5808b2){console[_0xfbe3e8(0x1cc)](_0xfbe3e8(0x201),_0x5808b2),_0x42282e['status'](0x1f4)[_0xfbe3e8(0x265)]({'error':'Failed\x20to\x20flush\x20cache'});}}),router['get'](a27_0x2528ea(0x22c),async(_0x297cbb,_0x3bead6)=>{const _0x5982e6=a27_0x2528ea;_0x3bead6[_0x5982e6(0x1d8)](path[_0x5982e6(0xec)](path[_0x5982e6(0x1ae)](require[_0x5982e6(0x1ce)][_0x5982e6(0x269)]),_0x5982e6(0x1f3)));}),router[a27_0x2528ea(0x1cb)]('/cache',protectedRoute,async(_0x3ed3ba,_0x469e81)=>{const _0x147f65=a27_0x2528ea,_0x21ec6a=fs[_0x147f65(0x26a)](path['join'](path[_0x147f65(0x1ae)](require['main'][_0x147f65(0x269)]),_0x147f65(0x1bf)),_0x147f65(0xf4)),_0x5c0867=_0x21ec6a[_0x147f65(0x21d)](_0x147f65(0x185),_0x3ed3ba['version']);_0x469e81[_0x147f65(0x163)](_0x5c0867);}),router['get'](a27_0x2528ea(0x25a),async(_0x54ca20,_0x1a896b)=>{const _0x3387d6=a27_0x2528ea,{page:page=0x1,limit:limit=0x10}=_0x54ca20['query'],_0xf3e1ad=JSON['parse'](fs[_0x3387d6(0x26a)](path[_0x3387d6(0xec)](path[_0x3387d6(0x1ae)](require[_0x3387d6(0x1ce)][_0x3387d6(0x269)]),_0x3387d6(0xc3)))),_0x35afc3=(page-0x1)*limit,_0x3a4b9e=page*limit,_0x5cc25f=_0xf3e1ad[_0x3387d6(0x186)][_0x3387d6(0xbe)],_0x522444=Math[_0x3387d6(0x19e)](_0x5cc25f/limit),_0x448416=_0xf3e1ad[_0x3387d6(0x186)][_0x3387d6(0x121)](_0x35afc3,_0x3a4b9e);_0x1a896b[_0x3387d6(0x265)]({'files':_0x448416,'pagination':{'total':_0x5cc25f,'totalPages':_0x522444,'currentPage':parseInt(page),'limit':parseInt(limit)}});return;}),router[a27_0x2528ea(0x1cb)](a27_0x2528ea(0x217),async(_0x261a06,_0x142d61)=>{const _0x4cf919=a27_0x2528ea,{file:_0x3876ae}=_0x261a06[_0x4cf919(0x116)],_0x240a7c=path[_0x4cf919(0xec)](path[_0x4cf919(0x1ae)](require[_0x4cf919(0x1ce)]['filename']),_0x4cf919(0x14b),'files'),_0xbf3925=path[_0x4cf919(0xec)](_0x240a7c,_0x3876ae),_0x5412b8=fs[_0x4cf919(0x26a)](_0xbf3925,_0x4cf919(0xf4)),_0xb96255=_0x5412b8[_0x4cf919(0x209)]('\x0a'),_0x41c59a=_0xb96255[_0x4cf919(0x1fa)](_0x407170=>{const _0x2e6bf9=_0x4cf919,_0x646503=_0x407170[_0x2e6bf9(0x209)](',');return _0x646503[_0x2e6bf9(0x1fa)](_0x527a5e=>_0x527a5e[_0x2e6bf9(0x21d)]('\x22',''));});_0x142d61[_0x4cf919(0x265)](_0x41c59a);}),router['get']('/cache/files/:id',async(_0x37ee9a,_0x77657)=>{const _0x41cbd5=a27_0x2528ea,{id:_0x1199ca}=_0x37ee9a[_0x41cbd5(0x116)],_0x640367=path[_0x41cbd5(0xec)](path['dirname'](require['main'][_0x41cbd5(0x269)]),_0x41cbd5(0x14b),_0x41cbd5(0x186)),_0x9bf063=path[_0x41cbd5(0xec)](_0x640367,_0x1199ca);if(_0x9bf063[_0x41cbd5(0xcf)](_0x41cbd5(0x133))){var _0x357626=require(_0x41cbd5(0xe9));const _0x439f57=fs['readFileSync'](_0x9bf063),_0x47f317=_0x357626[_0x41cbd5(0x14c)](_0x439f57);_0x77657[_0x41cbd5(0x25e)](_0x41cbd5(0x13c),_0x41cbd5(0x1c2)),_0x77657['send'](_0x47f317);}else _0x77657['sendFile'](_0x9bf063);}),router[a27_0x2528ea(0xee)](a27_0x2528ea(0x161),async(_0x2fe629,_0x2973bc)=>{const _0x18a521=a27_0x2528ea,{id:_0x4b7770}=_0x2fe629[_0x18a521(0x116)],_0x382724=path[_0x18a521(0xec)](path[_0x18a521(0x1ae)](require[_0x18a521(0x1ce)]['filename']),_0x18a521(0x14b),_0x18a521(0x186)),_0x347164=JSON[_0x18a521(0x248)](fs['readFileSync'](path[_0x18a521(0xec)](path['dirname'](require[_0x18a521(0x1ce)][_0x18a521(0x269)]),_0x18a521(0xc3)))),_0x54ecf4=_0x347164[_0x18a521(0x186)][_0x18a521(0xc1)](_0x3858a8=>_0x3858a8[_0x18a521(0xc6)]===_0x4b7770);if(_0x54ecf4){try{fs[_0x18a521(0x24b)](path[_0x18a521(0xec)](_0x382724,_0x54ecf4[_0x18a521(0xc6)]))&&fs[_0x18a521(0x15a)](path['join'](_0x382724,_0x54ecf4['name']));}catch(_0x9d43d7){console[_0x18a521(0x202)](_0x18a521(0x192),{'e':_0x9d43d7});}(_0x54ecf4['availableFormats']??[])[_0x18a521(0x1db)](_0x56c8a5=>{const _0xb5ae63=_0x18a521;try{fs[_0xb5ae63(0x24b)](path[_0xb5ae63(0xec)](_0x382724,_0x56c8a5['id']))&&fs['unlinkSync'](path[_0xb5ae63(0xec)](_0x382724,_0x56c8a5['id']));}catch(_0x40c68d){console[_0xb5ae63(0x202)](_0xb5ae63(0x192),{'e':_0x40c68d});}});}analyzeConverterFiles(),_0x2973bc[_0x18a521(0x265)]({'message':'File\x20deleted\x20successfully'});});const deleteOldDemoUsers=async()=>{const _0x4849bb=a27_0x2528ea;console['log']('Deleting\x20old\x20demo_user\x20accounts...');const _0x2d3ad1=config[_0x4849bb(0x226)],_0x100825=_0x4849bb(0x1ff);try{const [_0xb492d0]=await conn[_0x4849bb(0x1d7)]()[_0x4849bb(0x1de)](_0x100825,[_0x2d3ad1]),_0x25a85=_0xb492d0[_0x4849bb(0x1fa)](_0x75626c=>_0x75626c[_0x4849bb(0x156)]),_0x8fe606=_0xb492d0[_0x4849bb(0x1fa)](_0x60f1d1=>_0x60f1d1['email']);console[_0x4849bb(0x202)](_0x8fe606),await conn[_0x4849bb(0x1d7)]()[_0x4849bb(0x1de)](_0x4849bb(0x1ed),[_0x2d3ad1]),_0x25a85[_0x4849bb(0x1db)](_0xa5394a=>{const _0x46015c=_0x4849bb;try{const _0x10c8e5='./uploads/'+_0xa5394a;cleanCacheForUserFiles(_0x10c8e5),fs['rmdirSync'](_0x10c8e5);}catch(_0x53aab2){console['error'](_0x46015c(0x16d),_0x53aab2);}}),console['log']('Old\x20demo_user\x20accounts\x20('+_0xb492d0[_0x4849bb(0xbe)]+')\x20older\x20than\x20'+_0x2d3ad1+_0x4849bb(0x20b));}catch(_0x59ec97){console[_0x4849bb(0x1cc)](_0x4849bb(0x138),_0x59ec97);}};schedule[a27_0x2528ea(0x18a)](a27_0x2528ea(0x158),deleteOldDemoUsers),router[a27_0x2528ea(0x1cb)](a27_0x2528ea(0x1ab),protectedRoute,async(_0x19f168,_0xf21c48)=>{const _0x21c580=a27_0x2528ea,_0x14c1ff=fs[_0x21c580(0x26a)](path[_0x21c580(0xec)](path['dirname'](require[_0x21c580(0x1ce)]['filename']),_0x21c580(0x1c3)),_0x21c580(0xf4)),_0x5f0dca=_0x14c1ff[_0x21c580(0x21d)](_0x21c580(0x185),_0x19f168[_0x21c580(0x1c0)]);_0xf21c48[_0x21c580(0x163)](_0x5f0dca);});const exportUsersList=async()=>{const _0x2e091e=a27_0x2528ea;console[_0x2e091e(0x202)]('Exporting\x20new\x20users\x20for\x20Google\x20Ads...');const _0x461e9c=path[_0x2e091e(0xec)](path['dirname'](require[_0x2e091e(0x1ce)]['filename']),'exports');!fs[_0x2e091e(0x24b)](_0x461e9c)&&fs[_0x2e091e(0x223)](_0x461e9c);const _0x2bd741=config[_0x2e091e(0x1ca)]||'monthly';let _0x3a55a5;const _0x5eb1a5=path[_0x2e091e(0xec)](_0x461e9c,_0x2e091e(0x237));if(fs[_0x2e091e(0x24b)](_0x5eb1a5))try{const _0x86c36d=JSON['parse'](fs[_0x2e091e(0x26a)](_0x5eb1a5,_0x2e091e(0xf4)));_0x3a55a5=new Date(_0x86c36d[_0x2e091e(0xfe)]);}catch(_0x35e71f){console[_0x2e091e(0x1cc)]('Error\x20reading\x20last\x20export\x20info:',_0x35e71f),_0x3a55a5=calculateDefaultLastExportDate(_0x2bd741);}else _0x3a55a5=calculateDefaultLastExportDate(_0x2bd741);const _0x55d261=new Date(),_0xeb78dd=_0x55d261[_0x2e091e(0x236)]()+'-'+String(_0x55d261[_0x2e091e(0x16a)]()+0x1)[_0x2e091e(0x229)](0x2,'0')+'-'+String(_0x55d261['getDate']())[_0x2e091e(0x229)](0x2,'0'),_0x13f936=_0x2e091e(0x180)+_0xeb78dd+_0x2e091e(0x1e6),_0x393250=path[_0x2e091e(0xec)](_0x461e9c,_0x13f936);try{const _0x1f7016=_0x2e091e(0x1c1),[_0x747a36]=await conn[_0x2e091e(0x1d7)]()[_0x2e091e(0x1de)](_0x1f7016,[_0x3a55a5]);if(_0x747a36[_0x2e091e(0xbe)]===0x0){console[_0x2e091e(0x202)](_0x2e091e(0x11c));return;}let _0x3c6530=_0x2e091e(0x19d);_0x747a36['forEach'](_0x288324=>{const _0x8b3fe2=_0x2e091e,_0x41fce2=_0x288324[_0x8b3fe2(0x1c6)]?'\x22'+_0x288324[_0x8b3fe2(0x1c6)]['replace'](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x1d9d2c=_0x288324[_0x8b3fe2(0xe1)]?'\x22'+_0x288324[_0x8b3fe2(0xe1)]['replace'](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x1bac33=_0x288324[_0x8b3fe2(0x1e5)]?'\x22'+_0x288324[_0x8b3fe2(0x1e5)][_0x8b3fe2(0x25b)](/"/g,'\x22\x22')+'\x22':'\x22\x22';_0x3c6530+=_0x41fce2+','+_0x1d9d2c+','+_0x1bac33+'\x0a';}),fs[_0x2e091e(0x251)](_0x393250,_0x3c6530),console['log'](_0x2e091e(0x1ad)+_0x747a36[_0x2e091e(0xbe)]+'\x20users\x20to\x20'+_0x393250);const _0x3761d9={'lastExportDate':_0x55d261[_0x2e091e(0x1d6)](),'fileName':_0x13f936,'userCount':_0x747a36[_0x2e091e(0xbe)]};fs['writeFileSync'](_0x5eb1a5,JSON[_0x2e091e(0x214)](_0x3761d9,null,0x2));}catch(_0x277ef6){console[_0x2e091e(0x1cc)](_0x2e091e(0x169),_0x277ef6);}},calculateDefaultLastExportDate=_0x227e6f=>{const _0x3dfea6=a27_0x2528ea,_0x2e2693=new Date();return _0x227e6f===_0x3dfea6(0x20a)?_0x2e2693['setDate'](_0x2e2693[_0x3dfea6(0x139)]()-0xe):_0x2e2693[_0x3dfea6(0xf0)](_0x2e2693[_0x3dfea6(0x16a)]()-0x1),_0x2e2693;};router[a27_0x2528ea(0x1cb)](a27_0x2528ea(0xf6),async(_0x1e8074,_0x57cc76)=>{const _0x3802c2=a27_0x2528ea,_0x4cdf6e=path[_0x3802c2(0xec)](path[_0x3802c2(0x1ae)](require[_0x3802c2(0x1ce)][_0x3802c2(0x269)]),'exports');if(!fs[_0x3802c2(0x24b)](_0x4cdf6e))return _0x57cc76[_0x3802c2(0x114)](0xc8)[_0x3802c2(0x265)]({'exports':[]});try{const _0x5396d8=fs[_0x3802c2(0x219)](_0x4cdf6e)['filter'](_0x2a0742=>_0x2a0742[_0x3802c2(0x144)](_0x3802c2(0x180))&&_0x2a0742[_0x3802c2(0xcf)](_0x3802c2(0x1e6)))[_0x3802c2(0x1fa)](_0xb1a558=>{const _0x5e2162=_0x3802c2,_0x3d9cff=path[_0x5e2162(0xec)](_0x4cdf6e,_0xb1a558),_0x3d290a=fs['statSync'](_0x3d9cff),_0x398af8=fs[_0x5e2162(0x26a)](_0x3d9cff,'utf8'),_0xac0698=_0x398af8[_0x5e2162(0x209)]('\x0a')[_0x5e2162(0xbe)]-0x1;return{'fileName':_0xb1a558,'createdAt':_0x3d290a[_0x5e2162(0x129)],'userCount':_0xac0698};})[_0x3802c2(0xf2)]((_0x165ffb,_0xc1c68a)=>_0xc1c68a[_0x3802c2(0x170)]-_0x165ffb[_0x3802c2(0x170)]);_0x57cc76[_0x3802c2(0x114)](0xc8)[_0x3802c2(0x265)]({'exports':_0x5396d8});}catch(_0x1f6b33){console['error']('Error\x20getting\x20Users\x20export\x20export\x20history:',_0x1f6b33),_0x57cc76[_0x3802c2(0x114)](0x1f4)[_0x3802c2(0x265)]({'error':'Failed\x20to\x20retrieve\x20export\x20history'});}}),router[a27_0x2528ea(0x137)](a27_0x2528ea(0xc4),async(_0x1a9bf7,_0x5cb1a8)=>{const _0x3db963=a27_0x2528ea;try{await exportUsersList(),_0x5cb1a8['status'](0xc8)[_0x3db963(0x265)]({'message':_0x3db963(0x25c)});}catch(_0x3327a2){console[_0x3db963(0x1cc)]('Error\x20triggering\x20Users\x20export:',_0x3327a2),_0x5cb1a8['status'](0x1f4)['json']({'error':_0x3db963(0x147)});}}),router[a27_0x2528ea(0x1cb)](a27_0x2528ea(0x19b),async(_0x115029,_0xcd3eea)=>{const _0xc90880=a27_0x2528ea,{fileName:_0x8743c7}=_0x115029[_0xc90880(0x116)],_0xde72e9=path[_0xc90880(0xec)](path[_0xc90880(0x1ae)](require[_0xc90880(0x1ce)][_0xc90880(0x269)]),'exports',_0x8743c7);if(!fs[_0xc90880(0x24b)](_0xde72e9))return _0xcd3eea['status'](0x194)[_0xc90880(0x265)]({'error':_0xc90880(0x1a9)});_0xcd3eea[_0xc90880(0x26b)](_0xde72e9);});const cleanCacheForUserFiles=_0x271eaf=>{const _0x5b222c=a27_0x2528ea;try{if(!fs['existsSync'](_0x271eaf)){console[_0x5b222c(0x202)](_0x5b222c(0x260)+_0x271eaf+_0x5b222c(0x1f4));return;}const _0x2aaa81=path[_0x5b222c(0xec)](path[_0x5b222c(0x1ae)](require[_0x5b222c(0x1ce)][_0x5b222c(0x269)]),_0x5b222c(0x14b),_0x5b222c(0x186));if(!fs['existsSync'](_0x2aaa81)){console[_0x5b222c(0x202)](_0x5b222c(0x13d)+_0x2aaa81+_0x5b222c(0x1f4));return;}const _0x2f6f3f=JSON[_0x5b222c(0x248)](fs[_0x5b222c(0x26a)](path[_0x5b222c(0xec)](path[_0x5b222c(0x1ae)](require[_0x5b222c(0x1ce)][_0x5b222c(0x269)]),'cadviewer/settings/converter-files-analysis.json'))),_0x4f09df=fs[_0x5b222c(0x219)](_0x271eaf);_0x4f09df[_0x5b222c(0x1db)](_0x16101a=>{const _0x3f0aa8=_0x5b222c;_0x2f6f3f['files'][_0x3f0aa8(0x1db)](_0x30acf0=>{const _0x27c63b=_0x3f0aa8;_0x30acf0[_0x27c63b(0x22f)]===_0x16101a&&_0x30acf0[_0x27c63b(0x252)][_0x27c63b(0x1db)](_0x5ec648=>{const _0x3ce7b6=_0x27c63b;try{fs[_0x3ce7b6(0x15a)](path[_0x3ce7b6(0xec)](_0x2aaa81,_0x5ec648['id']));}catch(_0x108a61){console[_0x3ce7b6(0x1cc)](_0x3ce7b6(0x1f2)+_0x5ec648['id']+':',_0x108a61);}});});}),analyzeConverterFiles(),console[_0x5b222c(0x202)](_0x5b222c(0x1ec)+_0x271eaf);}catch(_0x3bce8e){console[_0x5b222c(0x1cc)](_0x5b222c(0x258),_0x3bce8e);}};schedule[a27_0x2528ea(0x18a)](a27_0x2528ea(0x162),exportUsersList),schedule['scheduleJob'](a27_0x2528ea(0x181),sendFollowUpEmails),schedule['scheduleJob'](a27_0x2528ea(0x22d),sendAccountDeletionPreventionEmails);const analyzeConverterFiles=()=>{const _0x28a320=a27_0x2528ea;try{const _0x1ba9ac=path[_0x28a320(0xec)](path[_0x28a320(0x1ae)](require[_0x28a320(0x1ce)][_0x28a320(0x269)]),_0x28a320(0x14b),_0x28a320(0x186)),_0x3a00bb=path[_0x28a320(0xec)](path[_0x28a320(0x1ae)](require[_0x28a320(0x1ce)][_0x28a320(0x269)]),_0x28a320(0x266),_0x28a320(0x1d1));if(!fs[_0x28a320(0x24b)](_0x1ba9ac)){logStream['write'](_0x28a320(0x174)+_0x1ba9ac+_0x28a320(0x1fc));return;}if(!fs[_0x28a320(0x24b)](_0x3a00bb)){logStream[_0x28a320(0x212)](_0x28a320(0x174)+_0x3a00bb+_0x28a320(0x1fc));return;}const _0x1a201c=fs[_0x28a320(0x219)](_0x1ba9ac),_0x336acd={};_0x1a201c['forEach'](_0x471f4d=>{const _0x4d19b1=_0x28a320,_0x2339cc=path[_0x4d19b1(0xec)](_0x1ba9ac,_0x471f4d),_0x38a04f=fs[_0x4d19b1(0x1fd)](_0x2339cc),_0x417b2f=_0x471f4d[_0x4d19b1(0x209)]('.'),_0x16408d=_0x417b2f[_0x4d19b1(0x121)](0x0,-0x1)[_0x4d19b1(0x143)]((_0x1b9640,_0x2e57b9)=>!([_0x4d19b1(0x232),'rl']['includes'](_0x1b9640['toLocaleLowerCase']())&&_0x2e57b9===_0x417b2f[_0x4d19b1(0xbe)]-0x2))[_0x4d19b1(0xec)]('.');!Object[_0x4d19b1(0x1a0)](_0x336acd)[_0x4d19b1(0x13f)](_0x16408d)?_0x336acd[_0x16408d]=[{'file':_0x471f4d,'stats':_0x38a04f}]:_0x336acd[_0x16408d][_0x4d19b1(0x127)]({'file':_0x471f4d,'stats':_0x38a04f});});const _0x1de46a=[];_0x1a201c[_0x28a320(0x1db)](_0x56fbf6=>{const _0x491814=_0x28a320;if(!_0x56fbf6[_0x491814(0xcf)]('.dwg.json'))return;let _0x179cb5=_0x56fbf6;const _0x1209cd=path[_0x491814(0xec)](_0x1ba9ac,_0x56fbf6),_0x455528=fs[_0x491814(0x1fd)](_0x1209cd);let _0xb2a3db=_0x455528[_0x491814(0x100)],_0x154d92='';const _0x4a3d50=fs[_0x491814(0x26a)](_0x1209cd,'utf8'),_0x15d1bb=JSON['parse'](_0x4a3d50),_0x14756e=_0x15d1bb[_0x491814(0x14e)]?.[_0x491814(0x1fa)](_0x2a9025=>_0x2a9025['fileName'])??[];if(_0x15d1bb['filename'])_0x179cb5=_0x15d1bb[_0x491814(0x269)];const _0x216a53=_0x56fbf6[_0x491814(0x209)]('.'),_0x15e7d3=_0x216a53['slice'](0x0,-0x1)[_0x491814(0x143)]((_0x32bf95,_0x2a20af)=>!([_0x491814(0x232),'rl'][_0x491814(0x13f)](_0x32bf95[_0x491814(0x1dc)]())&&_0x2a20af===_0x216a53[_0x491814(0xbe)]-0x2))['join']('.'),_0x36cccc=Object[_0x491814(0x1a0)](_0x336acd)['includes'](_0x15e7d3)?_0x336acd[_0x15e7d3]:[];for(const _0x253ed7 of _0x14756e){Object[_0x491814(0x1a0)](_0x336acd)[_0x491814(0x13f)](_0x253ed7)&&_0x36cccc['push'](..._0x336acd[_0x253ed7]);}const _0x3823d1=_0x36cccc[_0x491814(0x1fa)](({file:_0x349a8e,stats:_0x3848de})=>{const _0x217d58=_0x491814;return!_0x349a8e['endsWith']('.dwg.json')&&(_0xb2a3db+=_0x3848de[_0x217d58(0x100)]),{'id':_0x349a8e,'name':_0x349a8e['endsWith'](_0x217d58(0x1a2))?_0x217d58(0x224):_0x349a8e[_0x217d58(0xcf)](_0x217d58(0x133))?_0x217d58(0x17b):_0x349a8e[_0x217d58(0xcf)](_0x217d58(0x146))?_0x217d58(0x1b5):_0x349a8e['endsWith'](_0x217d58(0x1d9))?'JSON':_0x349a8e[_0x217d58(0xcf)](_0x217d58(0x1e6))?'CSV':_0x349a8e['endsWith'](_0x217d58(0x26c))?_0x217d58(0x118):_0x349a8e[_0x217d58(0x209)]('.')[_0x217d58(0x1fe)]()['toUpperCase'](),'color':_0x349a8e[_0x217d58(0xcf)](_0x217d58(0x1a2))||_0x349a8e['endsWith'](_0x217d58(0x133))?_0x217d58(0x178):_0x349a8e[_0x217d58(0xcf)](_0x217d58(0x146))?_0x217d58(0x1b1):_0x349a8e[_0x217d58(0xcf)](_0x217d58(0x1d9))?_0x217d58(0xef):_0x349a8e[_0x217d58(0xcf)](_0x217d58(0x1e6))?_0x217d58(0x152):_0x349a8e[_0x217d58(0xcf)](_0x217d58(0x26c))?'blue':_0x217d58(0x1cf)};});if(_0x3823d1[_0x491814(0x1e3)](_0xdb8e9e=>_0xdb8e9e['id'][_0x491814(0x13f)](_0x491814(0x241))))_0x154d92='RL/TL\x20Processing';else{if(_0x3823d1[_0x491814(0x1e3)](_0x4531d8=>[_0x491814(0x204),_0x491814(0x24f)][_0x491814(0x13f)](_0x4531d8['id'][_0x491814(0x209)]('.')[_0x491814(0x1fe)]()))&&_0x3823d1[_0x491814(0x1e3)](_0x5efb19=>['csv']['includes'](_0x5efb19['id'][_0x491814(0x209)]('.')['pop']())))_0x154d92=_0x491814(0x1c5);else{if(_0x3823d1[_0x491814(0x1e3)](_0x207edc=>[_0x491814(0x204),_0x491814(0x24f)][_0x491814(0x13f)](_0x207edc['id'][_0x491814(0x209)]('.')[_0x491814(0x1fe)]())))_0x154d92=_0x491814(0x1e9);else{if(_0x3823d1['some'](_0x1668e9=>[_0x491814(0x265)][_0x491814(0x13f)](_0x1668e9['id'][_0x491814(0x209)]('.')['pop']()))&&_0x3823d1['some'](_0x2c4790=>[_0x491814(0x232)][_0x491814(0x13f)](_0x2c4790['id']['split']('.')['pop']())))_0x154d92='JSON\x20Data\x20Extraction';else{if(_0x3823d1['some'](_0x47e0e4=>['pdf']['includes'](_0x47e0e4['id'][_0x491814(0x209)]('.')[_0x491814(0x1fe)]())))_0x154d92=_0x491814(0x233);else{if(_0x3823d1[_0x491814(0x1e3)](_0x3600d3=>[_0x491814(0x265)][_0x491814(0x13f)](_0x3600d3['id']['split']('.')[_0x491814(0x1fe)]()))&&!_0x3823d1[_0x491814(0x1e3)](_0x2d4eef=>['dwg'][_0x491814(0x13f)](_0x2d4eef['id'][_0x491814(0x209)]('.')['pop']())))_0x154d92=_0x491814(0x1f1);else _0x3823d1[_0x491814(0x1e3)](_0x4d402b=>[_0x491814(0x265)][_0x491814(0x13f)](_0x4d402b['id'][_0x491814(0x209)]('.')['pop']()))&&(_0x154d92=_0x491814(0x21e));}}}}}_0x1de46a[_0x491814(0x127)]({'name':_0x56fbf6,'goodFileName':_0x179cb5,'size':_0xb2a3db,'createdAt':_0x455528[_0x491814(0x129)],'updatedAt':_0x455528[_0x491814(0x154)],'readAt':_0x455528[_0x491814(0xbc)],'action':_0x154d92,'availableFormats':_0x3823d1});}),_0x1de46a['sort']((_0x2958f6,_0x5e50a2)=>_0x5e50a2[_0x28a320(0x243)]-_0x2958f6[_0x28a320(0x243)]);const _0x55c1ad={'timestamp':new Date(),'totalFiles':_0x1de46a[_0x28a320(0xbe)],'files':_0x1de46a},_0x41b7c4=path[_0x28a320(0xec)](_0x3a00bb,'converter-files-analysis.json');fs['writeFileSync'](_0x41b7c4,JSON['stringify'](_0x55c1ad,null,0x2));}catch(_0x266b77){console[_0x28a320(0x202)]('===================error==================='),console['log']('Erreur\x20lors\x20de\x20l\x27analyse\x20des\x20fichiers\x20du\x20dossier\x20converters/files:\x20'+_0x266b77[_0x28a320(0x149)]);}},scheduleFileAnalysis=()=>{const _0x1b9f7c=a27_0x2528ea;analyzeConverterFiles(),schedule[_0x1b9f7c(0x18a)](_0x1b9f7c(0x13b),analyzeConverterFiles),logStream[_0x1b9f7c(0x212)](_0x1b9f7c(0x1ef));};function a27_0x40f8(){const _0x240938=['Cache\x20directory\x20','exports','includes','/config/global-update','used','/folders','filter','startsWith','cadviewer/settings/vanilla-toast.js','.pdf','Failed\x20to\x20trigger\x20export','1730526oUUZhS','message','Error\x20finding\x20log\x20files:','converters','gunzipSync','usedGb','cachedfiles','constants','DwgMerge\x20Settings','isDirectory','green','Error\x20getting\x20total\x20users','ctime','usedMemMb','folder_name','cvjs_svgz_compress','0\x201\x20*\x20*\x20*','File\x20renamed.','unlinkSync','cadviewer/settings/requests-callapiconversion-monitoring.json','globalBearerAutenticationToken','CADViewer_config.json','memorydata.csv','R_OK','.log','/cache/files/:id','0\x2023\x20*\x20*\x20*','send','dwgmergeLocation','\x20days','UPDATE\x20`users`\x20SET\x20`avatar_url`\x20=\x20?,\x20`first_name`\x20=\x20?,\x20`last_name`\x20=\x20?,\x20`username`\x20=\x20?,\x20`email`\x20=\x20?,','Demo\x20and\x20Base\x20User\x20Settings','model','Error\x20exporting\x20users\x20for\x20Google\x20Ads:','getMonth','../libs/mysql.js','mkdir','Error\x20deleting\x20user\x20folder:','dwgmerge_executable','windows','createdAt','Error\x20getting\x20memory\x20info','unlink','usedPercentage','Le\x20dossier\x20','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?','xpathLocation','ContentSecurityPolicy','yellow','autodetect_platform','linklist_executable_linux','SVGZ','usedMemPercentage','hash','/cache/stats','formatedSize','users-export-','0\x20*\x20*\x20*\x20*','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','autodetect_location','cadviewer/settings/icons.js','{version}','files','call-Api_Conversion_','now','boolean','scheduleJob','/folders/create','body','/logs/content','oos','mem','/converters/autoxchange/linux/','Error\x20getting\x20cache\x20stats:','Error\x20deleting\x20file','mimetype','maxConcurrentUploads','percentage','/converters/files/print/','extname','cadviewer/settings/rest-api.html','autoxchange_executable','../libs/config','/users-export/download/:fileName','Error\x20deleting\x20folder.','email,firstname,lastname\x0a','ceil','6845105UPkZaa','keys','.gitkeep','.svg','tmp','fontLocation','8112438dPKyGQ','dwgmerge_executable_windows','all','/metrics','Export\x20file\x20not\x20found','No\x20config\x20object\x20provided','/export-users','Parameters\x20saved.','Exported\x20','dirname','node-os-utils','count','red','/folders/upload','W_OK','Folder\x20not\x20found.','PDF','/folders/delete','Counter\x20reset\x20successfully','sub_dirs','\x22\x20executable','renameSync','122sylcjc','express','/style.css','\x20MB','cadviewer/settings/conversion-cache.html','version','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20email,\x20first_name,\x20last_name,\x20created_at\x20\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20>\x20?\x20\x0a\x20\x20\x20\x20\x20\x20ORDER\x20BY\x20created_at\x20DESC\x0a\x20\x20\x20\x20','image/svg+xml','cadviewer/settings/users-export.html','/restapi-test/parameters/save','DWG\x20to\x20SVG\x20Conversion','email','hlall','blocks','/users/list','usersExportFrequency','get','error','globalBearerAutentication','main','purple','osCmd','settings','totalMemMb','proc','query','linklist_executable','toISOString','promise','sendFile','.json','Folder\x20renamed.','forEach','toLocaleLowerCase','Error\x20getting\x20upload\x20configuration:','execute','put','https','access','folderLocation','some','converterpathWin','last_name','.csv','CADViewer\x20Settings','X_OK','Display\x20of\x20DWG','uptime','No\x20files\x20uploaded','Cache\x20cleaned\x20for\x20files\x20in\x20','DELETE\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','standard','Analyse\x20priodique\x20des\x20fichiers\x20du\x20dossier\x20converters/files\x20planifie\x20(toutes\x20les\x20heures)','vmstats','DWG\x20file\x20in\x20multiple\x20files','Error\x20deleting\x20cache\x20file\x20','cadviewer/settings/cache-stats.js','\x20does\x20not\x20exist.','Database\x20Settings','logs','node-schedule','test','fileLoad_Password','map','clean','\x20n\x27existe\x20pas.','statSync','pop','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','INSERT\x20INTO\x20`users`\x20(`avatar_url`,\x20`first_name`,\x20`last_name`,\x20`username`,\x20`email`,\x20`crypted_password`,\x20`role`,\x20`is_enabled`,\x20`folder_name`)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','Error\x20flushing\x20cache:','log','diskStorage','svg','\x20\x20\x20','platform','ServerPort','multer','split','biweekly','\x20days\x20have\x20been\x20deleted.','Server\x20Settings','/conversion/memorydata','Mail\x20Server\x20Settings','mysqlUsername','cadviewer/settings/licences.html','who','write','Config\x20updated.','stringify','Permission\x20750\x20for\x20the\x20\x22','/converters/files/merged/','/cache/csv/:file','callbackMethod_gatewayUrl','readdirSync','Error!\x20Something\x20went\x20wrong.','rmSync','Folder\x20not\x20found','replaceAll','Cache\x20conversion','settingsUserBasicAuth','rmdir','conversionTimeSpend','drive','mkdirSync','SVG','Error\x20reading\x20monitoring\x20file','demoUserRetentionDays','user','Failed\x20to\x20get\x20cache\x20stats','padStart','SELECT\x20COUNT(*)\x20as\x20total\x20FROM\x20users','4ToTBul','/cache-stats.js','0\x200\x20*\x20*\x20*','cadviewer/settings/rest-api-parameters.json','goodFileName','An\x20error\x20occurred\x20while\x20checking.','array','dwg','DWG\x20to\x20PDF\x20Conversion','arch','callbackMethod','getFullYear','last-users-export.json','/restapi-test/parameters/search','3414993aqCJkw','Content-Disposition','file','mysqlPassword','Error\x20deleting\x20file.','catch','folderName','/licences','.rl.json','User\x20with\x20that\x20email\x20or\x20username\x20already\x20exists','updatedAt','/logs','/users','Read\x20and\x20write\x20permission\x20for\x20folder\x20','then','parse','maxUploadFiles','mode','existsSync','linklistLocation','total','/config','svgz','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20(`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?)\x20AND\x20`id`\x20!=\x20?','writeFileSync','availableFormats','\x20GB','/restapi-test','.png','demo_user','cadviewer/settings/users.html','Error\x20cleaning\x20cache\x20for\x20user\x20files:','Folder\x20already\x20exists.','/cache/files','replace','Users\x20export\x20triggered\x20successfully','hostname','setHeader','dir','Directory\x20','8vTmUJo','toString','.log\x22','\x22exec\x22\x20command\x20activated\x20on\x20NodeJS','json','cadviewer','cadviewer/settings/style.css','/users/:userId','filename','readFileSync','download','.dwg','atime','Log\x20file\x20cleaned.','length','usedGB','./tmp','find','/vanilla-toast.css','cadviewer/settings/converter-files-analysis.json','/users-export/trigger','originalname','name','toFixed','radio|','fileLocationUrl','User\x20updated\x20successfully','/doctor','linux','/converters/files/pdf/','bcrypt','endsWith','/logs/clean','freeGb','avatar','ServerUrl','Error\x20getting\x20disk\x20usage','writeFile','Base\x20folder\x20not\x20exists,\x20please\x20verify\x20your\x20configuration.','11897501fAzzEj','radio|monthly,biweekly','Callback\x20and\x20Authentication\x20Settings','userId','type','usage','linklist_executable_windows','Invalid\x20user','totalProcesses','3452820hSfoIN','first_name','/tailwind.js','avatar_url','Monitoring\x20file\x20cleaned.','SELECT\x20*\x20FROM\x20users','User\x20directory\x20flushed\x20successfully','autoxchange_executable_linux','====================','zlib','maxUploadFileSize','conversionMemoryUsage','join','role','delete','gray','setMonth','/folders/download','sort','UPDATE\x20`users`\x20SET\x20`created_at`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','utf8','converterLocation','/users-export/history','Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_','cadviewer/settings/config.html','child_process','/conversion/list','File\x20not\x20found','darwin','totalGB','lastExportDate','User\x20created\x20successfully','size','/config/update','isFile','File\x20deleted.','crypto','Error\x20saving\x20parameters.','getHotConfig','/icons.js','avatars/','fileLocation','copyFileSync','/vanilla-toast.js','express-basic-auth','totalGb','win32','6ZgyeRK','zombieProcesses','/content/redlines/v7/','Files\x20uploaded\x20successfully','../libs/counter.js','status','licenseLocation','params','ServerLocation','DWG','autoxchange_executable_windows','admin','cached_conversion','No\x20new\x20users\x20to\x20export\x20for\x20Google\x20Ads','/cache/flush','single','/folders/update','/config/content','slice','mysqlHost','path','whoami','Error\x20creating\x20folder.','cadviewer/settings/doctor.html','push','./uploads/','birthtime','File\x20or\x20Folder\x20not\x20found','/content/redlines/','getStats','reduce','mysqlDatabase','fileLoad_UserName','1389aUeLNf','Demo\x20period\x20extended\x20successfully\x20by\x20','Error\x20getting\x20cpu\x20usage','.svgz','number','attachment;\x20filename=\x22','readFile','post','Error\x20deleting\x20old\x20demo_user\x20accounts:','getDate','radio|windows,linux','*\x20*\x20*\x20*\x20*','Content-Type'];a27_0x40f8=function(){return _0x240938;};return a27_0x40f8();}scheduleFileAnalysis(),router[a27_0x2528ea(0x137)]('/users/extend-demo',async(_0x139211,_0x128943)=>{const _0x521f33=a27_0x2528ea,{userId:_0x594ccc}=_0x139211[_0x521f33(0x18c)];let _0x35d0d7;try{const [_0xe01e9a]=await conn[_0x521f33(0x1d7)]()[_0x521f33(0x1de)](_0x521f33(0x182),[_0x594ccc]);_0xe01e9a[_0x521f33(0xbe)]>0x0&&(_0x35d0d7=_0xe01e9a[0x0]);}catch(_0x30dfa8){console[_0x521f33(0x202)]({'err':_0x30dfa8}),_0x128943['status'](0x1f4)['json']({'error':_0x521f33(0x21a)});return;}if(!_0x35d0d7){_0x128943[_0x521f33(0x114)](0x191)['json']({'error':'Invalid\x20user'});return;}if(_0x35d0d7['role']!==_0x521f33(0x256)){_0x128943['status'](0x190)['json']({'error':'This\x20action\x20is\x20only\x20available\x20for\x20demo\x20users'});return;}const _0x5844b4=new Date();try{await conn[_0x521f33(0x1d7)]()[_0x521f33(0x1de)](_0x521f33(0xf3),[_0x5844b4,_0x594ccc]),_0x128943[_0x521f33(0x114)](0xc8)[_0x521f33(0x265)]({'success':!![],'message':_0x521f33(0x131)+config[_0x521f33(0x226)]+_0x521f33(0x165)});}catch(_0x4163aa){console[_0x521f33(0x202)]({'err':_0x4163aa}),_0x128943['status'](0x1f4)[_0x521f33(0x265)]({'error':_0x521f33(0x21a)});return;}}),router['get']('/folders/upload-config',async(_0x477a43,_0x52373a)=>{const _0x6b1f89=a27_0x2528ea;try{const _0xf13670=getHotConfig(),_0x5699c6={'maxFileSize':(_0xf13670[_0x6b1f89(0xea)]||0x32)*0x400*0x400,'maxConcurrentUploads':_0xf13670[_0x6b1f89(0x194)]||0x3,'maxFiles':_0xf13670[_0x6b1f89(0x249)]||0xa};_0x52373a[_0x6b1f89(0x114)](0xc8)['json'](_0x5699c6);}catch(_0x97eae2){console['error'](_0x6b1f89(0x1dd),_0x97eae2),_0x52373a[_0x6b1f89(0x114)](0x1f4)['json']({'message':'Error\x20retrieving\x20upload\x20configuration'});}}),module[a27_0x2528ea(0x13e)]={'router':router,'analyzeConverterFiles':analyzeConverterFiles};
const a26_0xa417ab=a26_0x58d3;(function(_0x211923,_0x3a63ca){const _0x5e5ea5=a26_0x58d3,_0x5db819=_0x211923();while(!![]){try{const _0x1ef8e8=parseInt(_0x5e5ea5(0x151))/0x1*(parseInt(_0x5e5ea5(0x170))/0x2)+-parseInt(_0x5e5ea5(0x1d5))/0x3*(parseInt(_0x5e5ea5(0x276))/0x4)+parseInt(_0x5e5ea5(0x219))/0x5*(-parseInt(_0x5e5ea5(0x1cb))/0x6)+-parseInt(_0x5e5ea5(0x245))/0x7+-parseInt(_0x5e5ea5(0x2a5))/0x8*(parseInt(_0x5e5ea5(0x2d1))/0x9)+-parseInt(_0x5e5ea5(0x266))/0xa*(-parseInt(_0x5e5ea5(0x1d8))/0xb)+parseInt(_0x5e5ea5(0x1b2))/0xc;if(_0x1ef8e8===_0x3a63ca)break;else _0x5db819['push'](_0x5db819['shift']());}catch(_0x32f9df){_0x5db819['push'](_0x5db819['shift']());}}}(a26_0x4daa,0x8d751));const express=require(a26_0xa417ab(0x1f3)),router=express[a26_0xa417ab(0x244)](),multer=require(a26_0xa417ab(0x29c)),fs=require('fs'),path=require(a26_0xa417ab(0x1f2)),getHotConfig=require(a26_0xa417ab(0x21b))['getHotConfig'],{exec}=require(a26_0xa417ab(0x220)),os=require('os'),conn=require(a26_0xa417ab(0x156)),bcrypt=require(a26_0xa417ab(0x1a2)),osu=require('node-os-utils'),schedule=require(a26_0xa417ab(0x28d)),counter=require(a26_0xa417ab(0x1fa)),{randomUUID}=require('crypto'),logStream=require(a26_0xa417ab(0x1a9)),config=require(a26_0xa417ab(0x1f0)),basicAuth=require(a26_0xa417ab(0x1e1)),{sendFollowUpEmails,sendAccountDeletionPreventionEmails}=require('../libs/email-utils'),protectedRoute=basicAuth({'users':{[config[a26_0xa417ab(0x242)]]:config[a26_0xa417ab(0x29e)]},'challenge':!![],'realm':a26_0xa417ab(0x17c)});router[a26_0xa417ab(0x256)](a26_0xa417ab(0x163),async(_0x1dcece,_0x542a34)=>{const _0x46c403=a26_0xa417ab;_0x542a34[_0x46c403(0x289)](path[_0x46c403(0x16c)](path[_0x46c403(0x172)](require[_0x46c403(0x1f6)]['filename']),_0x46c403(0x205)));}),router[a26_0xa417ab(0x256)](a26_0xa417ab(0x1d4),async(_0x31c28,_0x1073f4)=>{const _0xa86602=a26_0xa417ab;_0x1073f4[_0xa86602(0x289)](path['join'](path[_0xa86602(0x172)](require[_0xa86602(0x1f6)]['filename']),'cadviewer/settings/chart.min.js'));}),router['get'](a26_0xa417ab(0x1dd),async(_0x9bbe1d,_0x5ef748)=>{const _0x194475=a26_0xa417ab;_0x5ef748[_0x194475(0x289)](path[_0x194475(0x16c)](path['dirname'](require[_0x194475(0x1f6)][_0x194475(0x23d)]),'cadviewer/settings/style.css'));}),router[a26_0xa417ab(0x256)](a26_0xa417ab(0x161),async(_0x35918f,_0x4925ae)=>{const _0x3157a9=a26_0xa417ab;_0x4925ae['sendFile'](path[_0x3157a9(0x16c)](path[_0x3157a9(0x172)](require[_0x3157a9(0x1f6)][_0x3157a9(0x23d)]),_0x3157a9(0x185)));}),router[a26_0xa417ab(0x256)](a26_0xa417ab(0x1c0),async(_0x5b803f,_0x2dde75)=>{const _0x27ff63=a26_0xa417ab;_0x2dde75[_0x27ff63(0x289)](path[_0x27ff63(0x16c)](path[_0x27ff63(0x172)](require['main'][_0x27ff63(0x23d)]),_0x27ff63(0x2d6)));}),router['get'](a26_0xa417ab(0x1e9),async(_0x497780,_0x10c152)=>{const _0x21d69e=a26_0xa417ab;_0x10c152[_0x21d69e(0x289)](path[_0x21d69e(0x16c)](path[_0x21d69e(0x172)](require[_0x21d69e(0x1f6)][_0x21d69e(0x23d)]),_0x21d69e(0x2a8)));}),router[a26_0xa417ab(0x256)]('/',protectedRoute,async(_0x29a8c5,_0x201c2c)=>{const _0xbbcae8=a26_0xa417ab,_0x21af22=fs['readFileSync'](path[_0xbbcae8(0x16c)](path['dirname'](require['main'][_0xbbcae8(0x23d)]),_0xbbcae8(0x214)),'utf8'),_0x3a8122=_0x21af22['replaceAll']('{version}',_0x29a8c5['version']);_0x201c2c[_0xbbcae8(0x19a)](_0x3a8122);}),router[a26_0xa417ab(0x256)](a26_0xa417ab(0x296),protectedRoute,async(_0x475ef2,_0x375082)=>{const _0x29c9e1=a26_0xa417ab,_0x7f374b=fs[_0x29c9e1(0x1c2)](path[_0x29c9e1(0x16c)](path[_0x29c9e1(0x172)](require['main']['filename']),'cadviewer/settings/licences.html'),_0x29c9e1(0x191)),_0x5f2c1f=_0x7f374b[_0x29c9e1(0x288)](_0x29c9e1(0x194),_0x475ef2[_0x29c9e1(0x190)]);_0x375082[_0x29c9e1(0x19a)](_0x5f2c1f);}),router[a26_0xa417ab(0x256)]('/config',protectedRoute,async(_0x554b7c,_0xd142d7)=>{const _0x555541=a26_0xa417ab,_0x2cae58=fs[_0x555541(0x1c2)](path['join'](path[_0x555541(0x172)](require['main']['filename']),_0x555541(0x27e)),'utf8'),_0xb4b3d8=_0x2cae58[_0x555541(0x288)](_0x555541(0x194),_0x554b7c['version']);_0xd142d7[_0x555541(0x19a)](_0xb4b3d8);}),router['get'](a26_0xa417ab(0x2ed),protectedRoute,async(_0x20027f,_0x35ffbf)=>{const _0x26074=a26_0xa417ab,_0x370052=fs[_0x26074(0x1c2)](path['join'](path[_0x26074(0x172)](require['main']['filename']),_0x26074(0x1b0)),_0x26074(0x191)),_0x191317=_0x370052[_0x26074(0x288)](_0x26074(0x194),_0x20027f[_0x26074(0x190)]);_0x35ffbf[_0x26074(0x19a)](_0x191317);}),router[a26_0xa417ab(0x2e0)]('/folders',async(_0x51b578,_0x43ecb9)=>{const _0x10dcb7=a26_0xa417ab,_0x237af7=path[_0x10dcb7(0x16c)](path[_0x10dcb7(0x172)](require[_0x10dcb7(0x1f6)][_0x10dcb7(0x23d)]),_0x10dcb7(0x17a)),_0x57edd9=JSON[_0x10dcb7(0x15c)](fs[_0x10dcb7(0x1c2)](_0x237af7,_0x10dcb7(0x191))),_0x1503d0=_0x57edd9['folderLocation'];if(!fs[_0x10dcb7(0x2e1)](_0x1503d0))return _0x43ecb9[_0x10dcb7(0x228)](0x194)[_0x10dcb7(0x2da)]({'message':_0x10dcb7(0x241)});const _0xa86a58=_0x20c34c=>{let _0x1f4b03=0x0;return _0x20c34c['forEach'](_0xc18d5e=>{const _0x589e72=a26_0x58d3;_0xc18d5e[_0x589e72(0x1c5)]?_0x1f4b03+=_0xa86a58(_0xc18d5e[_0x589e72(0x1c3)]):_0x1f4b03+=_0xc18d5e['size'];}),_0x1f4b03;},_0x37ff00=_0x17be2f=>{const _0xca5133=_0x10dcb7;if(_0x17be2f<0x400)return _0x17be2f+'\x20B';else{if(_0x17be2f<0x400*0x400)return(_0x17be2f/0x400)[_0xca5133(0x20b)](0x2)+_0xca5133(0x26b);else return _0x17be2f<0x400*0x400*0x400?(_0x17be2f/0x400/0x400)['toFixed'](0x2)+_0xca5133(0x2a2):(_0x17be2f/0x400/0x400/0x400)[_0xca5133(0x20b)](0x2)+_0xca5133(0x2c2);}},_0x2d1593=(_0x15a0ff,_0x4738f9='')=>{const _0x33f892=_0x10dcb7,_0x51cf6a=fs[_0x33f892(0x1b3)](_0x15a0ff),_0x189db0=[];return _0x51cf6a[_0x33f892(0x275)](_0x460734=>{const _0xa47458=_0x33f892,_0x17cbe4=path[_0xa47458(0x16c)](_0x15a0ff,_0x460734)[_0xa47458(0x288)]('\x5c','/'),_0x4fe656=fs[_0xa47458(0x27b)](_0x17cbe4);if(_0x4fe656[_0xa47458(0x1f7)]()){const _0x54b68d=_0x2d1593(_0x17cbe4,_0x4738f9+_0xa47458(0x20f));_0x189db0[_0xa47458(0x1db)]({'name':_0x460734,'size':_0x4fe656[_0xa47458(0x1f8)],'path':_0x17cbe4,'permissions':_0x4fe656[_0xa47458(0x24a)],'isFolder':!![],'sub_dirs':_0x54b68d});}else _0x189db0['push']({'name':_0x460734,'size':_0x4fe656[_0xa47458(0x1f8)],'path':_0x17cbe4,'permissions':_0x4fe656[_0xa47458(0x24a)],'isFolder':![]});}),_0x189db0;};let _0x44e86d=_0x2d1593(_0x1503d0);const _0x242cac=_0x38c7e3=>{return _0x38c7e3['forEach'](_0x2d27a2=>{const _0x12ad20=a26_0x58d3;_0x2d27a2[_0x12ad20(0x1c5)]?(_0x2d27a2['formatedSize']=_0x37ff00(_0xa86a58(_0x2d27a2['sub_dirs'])),_0x2d27a2[_0x12ad20(0x1c3)]=_0x242cac(_0x2d27a2[_0x12ad20(0x1c3)])):_0x2d27a2[_0x12ad20(0x223)]=_0x37ff00(_0x2d27a2[_0x12ad20(0x1f8)]);}),_0x38c7e3;};_0x43ecb9[_0x10dcb7(0x228)](0xc8)['json'](_0x242cac(_0x44e86d));}),router[a26_0xa417ab(0x2e0)](a26_0xa417ab(0x16f),async(_0x58d6ad,_0x3804e8)=>{const _0x41344d=a26_0xa417ab,{path:_0x1164e3}=_0x58d6ad[_0x41344d(0x17e)],_0x46cbc0=_0x1164e3['split']('/')[_0x41344d(0x29f)]();if(!fs['existsSync'](_0x1164e3))return _0x3804e8[_0x41344d(0x228)](0x194)[_0x41344d(0x2da)]({'message':_0x41344d(0x250)});_0x3804e8[_0x41344d(0x2c7)]('Content-Type',_0x41344d(0x1e4)),_0x3804e8[_0x41344d(0x2c7)](_0x41344d(0x247),_0x41344d(0x202)+_0x46cbc0+'\x22'),_0x3804e8[_0x41344d(0x249)](_0x1164e3,_0x537d88=>{const _0x44fdd3=_0x41344d;_0x537d88&&_0x3804e8['status'](0x1f4)['json']({'message':_0x44fdd3(0x1a0)});});}),router[a26_0xa417ab(0x2e0)](a26_0xa417ab(0x212),async(_0xc2780c,_0x172f19)=>{const _0xec2c04=a26_0xa417ab,_0x5709b9=_0xc2780c['body'],_0x5e3faa=getHotConfig()[_0xec2c04(0x1ff)],_0x4e55a7=path[_0xec2c04(0x16c)](_0x5e3faa,_0x5709b9[_0xec2c04(0x1f2)]);if(!fs[_0xec2c04(0x2e1)](_0x4e55a7))return _0x172f19['status'](0x194)[_0xec2c04(0x2da)]({'message':_0xec2c04(0x1cd)});if(fs['existsSync'](path[_0xec2c04(0x16c)](_0x4e55a7,_0x5709b9[_0xec2c04(0x24f)])))return _0x172f19[_0xec2c04(0x228)](0x199)['json']({'message':_0xec2c04(0x277)});fs['mkdir'](path[_0xec2c04(0x16c)](_0x4e55a7,_0x5709b9[_0xec2c04(0x24f)]),_0x436269=>{const _0x54cfc4=_0xec2c04;_0x436269&&_0x172f19[_0x54cfc4(0x228)](0x1f4)[_0x54cfc4(0x2da)]({'message':_0x54cfc4(0x171)}),_0x172f19[_0x54cfc4(0x228)](0xc8)[_0x54cfc4(0x2da)]({'message':_0x54cfc4(0x193)});});}),router[a26_0xa417ab(0x294)](a26_0xa417ab(0x15a),async(_0x8f5739,_0x4be3d7)=>{const _0x42ec5a=a26_0xa417ab,{newName:_0x481b5d,isFolder:_0x2217bd,path:_0x24846b}=_0x8f5739[_0x42ec5a(0x17e)];if(!fs['existsSync'](_0x24846b))return _0x4be3d7['status'](0x194)['json']({'message':_0x2217bd?_0x42ec5a(0x2d0):_0x42ec5a(0x250)});const _0x358c1b=_0x24846b[_0x42ec5a(0x227)](_0x24846b[_0x42ec5a(0x159)]('/')[_0x42ec5a(0x29f)](),_0x481b5d),_0x2708fd=fs['statSync'](_0x24846b);_0x2708fd[_0x42ec5a(0x1f7)]()?fs[_0x42ec5a(0x226)](_0x24846b,_0x358c1b):(fs[_0x42ec5a(0x2b6)](_0x24846b,_0x358c1b),fs['unlinkSync'](_0x24846b)),_0x4be3d7['status'](0xc8)[_0x42ec5a(0x2da)]({'message':_0x2217bd?'Folder\x20renamed.':_0x42ec5a(0x238)});}),router[a26_0xa417ab(0x25d)](a26_0xa417ab(0x2e5),async(_0x2aab7a,_0x7dde76)=>{const _0x5e40f0=a26_0xa417ab,{path:_0x33318c}=_0x2aab7a[_0x5e40f0(0x17e)];if(!fs[_0x5e40f0(0x2e1)](_0x33318c))return _0x7dde76['status'](0x194)['json']({'message':_0x5e40f0(0x2d5)});const _0x5ceff8=fs[_0x5e40f0(0x27b)](_0x33318c);if(_0x5ceff8[_0x5e40f0(0x262)]())fs[_0x5e40f0(0x2d7)](_0x33318c,_0x5031e4=>{const _0x471235=_0x5e40f0;_0x5031e4&&_0x7dde76[_0x471235(0x228)](0x1f4)['json']({'message':_0x471235(0x281)}),_0x7dde76[_0x471235(0x228)](0xc8)[_0x471235(0x2da)]({'message':'File\x20deleted.'});});else _0x5ceff8[_0x5e40f0(0x1f7)]()&&fs[_0x5e40f0(0x233)](_0x33318c,{'recursive':!![]},_0x18554a=>{const _0x282717=_0x5e40f0;_0x18554a&&_0x7dde76[_0x282717(0x228)](0x1f4)[_0x282717(0x2da)]({'message':_0x282717(0x246)}),_0x7dde76[_0x282717(0x228)](0xc8)['json']({'message':_0x282717(0x1d6)});});});!fs[a26_0xa417ab(0x2e1)](a26_0xa417ab(0x197))&&fs[a26_0xa417ab(0x2eb)]('./tmp');const storage=multer[a26_0xa417ab(0x2de)]({'destination':(_0x454ee5,_0x570c4e,_0x234b73)=>{const _0x3bb939=a26_0xa417ab;_0x234b73(null,_0x3bb939(0x203));},'filename':(_0xd86163,_0x325c9c,_0x26d38a)=>{const _0x1cb309=a26_0xa417ab;_0x26d38a(null,Date['now']()+path['extname'](_0x325c9c[_0x1cb309(0x218)]));}}),upload=multer({'storage':storage,'limits':{'fileSize':0xa*0x400*0x400}});router[a26_0xa417ab(0x2e0)](a26_0xa417ab(0x17d),upload[a26_0xa417ab(0x28c)](a26_0xa417ab(0x22a)),async(_0x5b0630,_0x14d3f3)=>{const _0x129b74=a26_0xa417ab,_0x5e402c=_0x5b0630['body'];if(!_0x5b0630['files']||_0x5b0630[_0x129b74(0x22a)][_0x129b74(0x14e)]===0x0)return _0x14d3f3[_0x129b74(0x228)](0x190)[_0x129b74(0x2da)]({'message':'No\x20files\x20uploaded'});const _0x470f7c=getHotConfig()['folderLocation'],_0x20acca=path[_0x129b74(0x16c)](_0x470f7c,_0x5e402c[_0x129b74(0x1f2)]);if(!fs[_0x129b74(0x2e1)](_0x20acca))return _0x14d3f3[_0x129b74(0x228)](0x194)['json']({'message':_0x129b74(0x1cd)});const _0x48262b=_0x5b0630['files'][_0x129b74(0x1fc)](_0x287c66=>({'originalname':_0x287c66[_0x129b74(0x218)],'filename':_0x287c66[_0x129b74(0x23d)],'mimetype':_0x287c66[_0x129b74(0x199)],'size':_0x287c66[_0x129b74(0x1f8)]}));_0x48262b[_0x129b74(0x275)](_0x32cbf6=>{const _0x2d1960=_0x129b74;fs[_0x2d1960(0x2b6)](path[_0x2d1960(0x16c)](_0x2d1960(0x203),_0x32cbf6['filename']),path[_0x2d1960(0x16c)](_0x20acca,_0x32cbf6['originalname'])),fs[_0x2d1960(0x21c)](path['join'](_0x2d1960(0x203),_0x32cbf6[_0x2d1960(0x23d)]));}),_0x14d3f3[_0x129b74(0x228)](0xc8)[_0x129b74(0x2da)]({'message':_0x129b74(0x1b5),'files':_0x48262b});}),router[a26_0xa417ab(0x294)](a26_0xa417ab(0x29a),async(_0x32c674,_0x5f0300)=>{const _0x3a3ea1=a26_0xa417ab,_0x3d4b04=path['join'](path['dirname'](require['main'][_0x3a3ea1(0x23d)]),'CADViewer_config.json'),{config:_0x2c6a2f}=_0x32c674[_0x3a3ea1(0x17e)];if(!_0x2c6a2f)return _0x5f0300['status'](0x190)[_0x3a3ea1(0x2da)]({'message':_0x3a3ea1(0x1f4)});try{fs[_0x3a3ea1(0x19c)](_0x3d4b04,JSON[_0x3a3ea1(0x158)](_0x2c6a2f,null,0x4)),_0x5f0300[_0x3a3ea1(0x228)](0xc8)[_0x3a3ea1(0x2da)]({'message':_0x3a3ea1(0x1ad)});}catch(_0x12ba7d){_0x5f0300[_0x3a3ea1(0x228)](0x1f4)[_0x3a3ea1(0x2da)]({'message':'Error\x20updating\x20config'});}}),router[a26_0xa417ab(0x294)](a26_0xa417ab(0x1ea),async(_0x5afa90,_0xfd24a3)=>{const _0x33ce56=a26_0xa417ab,{key:_0x34dea5,value:_0x5ea323}=_0x5afa90[_0x33ce56(0x17e)],_0x40f418=path['join'](path[_0x33ce56(0x172)](require['main'][_0x33ce56(0x23d)]),_0x33ce56(0x17a));fs['readFile'](_0x40f418,'utf8',function(_0x15ecf9,_0x583f2d){const _0x4f86e8=_0x33ce56;_0x15ecf9&&_0xfd24a3[_0x4f86e8(0x228)](0x1f4)['send'](_0x15ecf9);const _0x12403e=JSON['parse'](_0x583f2d);_0x12403e[_0x34dea5]=_0x5ea323;if(_0x34dea5===_0x4f86e8(0x2e2)){let _0x532e84='';if(_0x12403e[_0x4f86e8(0x2ea)]){_0x532e84=os[_0x4f86e8(0x14f)]();if(_0x532e84===_0x4f86e8(0x2c6))_0x532e84=_0x4f86e8(0x26c);else{if(_0x532e84===_0x4f86e8(0x2cd))_0x532e84=_0x4f86e8(0x1fe);}}else _0x532e84=_0x12403e[_0x4f86e8(0x14f)];if(_0x532e84===_0x4f86e8(0x26c)){_0x12403e[_0x4f86e8(0x2ce)]=path[_0x4f86e8(0x232)](__dirname,'..')+'/';const _0x2f503d=/\\/g;_0x12403e[_0x4f86e8(0x2ce)]=_0x12403e[_0x4f86e8(0x2ce)][_0x4f86e8(0x227)](_0x2f503d,'/');}else _0x12403e['ServerLocation']=path['resolve'](__dirname,'..')+'/';}if(_0x34dea5===_0x4f86e8(0x2ea)){let _0x37c74e=os[_0x4f86e8(0x14f)]();if(_0x37c74e===_0x4f86e8(0x2c6))_0x37c74e=_0x4f86e8(0x26c);else _0x37c74e=_0x4f86e8(0x1fe);_0x37c74e===_0x4f86e8(0x26c)?_0x5ea323===!![]&&(_0x12403e[_0x4f86e8(0x1e3)]=_0x12403e[_0x4f86e8(0x16b)],_0x12403e[_0x4f86e8(0x2dd)]=_0x12403e[_0x4f86e8(0x2df)],_0x12403e[_0x4f86e8(0x2e8)]=_0x12403e['linklist_executable_windows']):_0x5ea323===!![]&&(_0x12403e[_0x4f86e8(0x1e3)]=_0x12403e[_0x4f86e8(0x2c5)],_0x12403e[_0x4f86e8(0x2dd)]=_0x12403e['dwgmerge_executable_linux'],_0x12403e['linklist_executable']=_0x12403e[_0x4f86e8(0x216)]),_0x12403e[_0x4f86e8(0x14f)]=_0x37c74e;}if(_0x12403e[_0x4f86e8(0x2ea)]){let _0x20a7e4=os[_0x4f86e8(0x14f)]();if(_0x20a7e4==='win32')_0x20a7e4=_0x4f86e8(0x26c);else _0x20a7e4=_0x4f86e8(0x1fe);if(_0x20a7e4===_0x4f86e8(0x26c)){if(_0x34dea5===_0x4f86e8(0x16b))_0x12403e[_0x4f86e8(0x1e3)]=_0x5ea323;else{if(_0x34dea5===_0x4f86e8(0x2df))_0x12403e[_0x4f86e8(0x2dd)]=_0x5ea323;else _0x34dea5==='linklist_executable_windows'&&(_0x12403e[_0x4f86e8(0x2e8)]=_0x5ea323);}}else{if(_0x34dea5==='autoxchange_executable_linux')_0x12403e[_0x4f86e8(0x1e3)]=_0x5ea323;else{if(_0x34dea5==='dwgmerge_executable_linux')_0x12403e[_0x4f86e8(0x2dd)]=_0x5ea323;else _0x34dea5===_0x4f86e8(0x216)&&(_0x12403e[_0x4f86e8(0x2e8)]=_0x5ea323);}}}fs[_0x4f86e8(0x1b9)](_0x40f418,JSON['stringify'](_0x12403e,null,0x4),function(_0x37b52f){const _0x5c8890=_0x4f86e8;_0x37b52f&&_0xfd24a3[_0x5c8890(0x228)](0x1f4)[_0x5c8890(0x19a)](_0x37b52f),_0xfd24a3[_0x5c8890(0x228)](0xc8)[_0x5c8890(0x2da)]({'message':_0x5c8890(0x18a)});});});}),router[a26_0xa417ab(0x2e0)](a26_0xa417ab(0x179),async(_0x1e9c32,_0x4d5003)=>{const _0xb89c45=a26_0xa417ab,_0x9a0ded=getHotConfig(),_0x1e95ae=(_0x9a0ded['dwgmergeLocation'][_0xb89c45(0x14d)](_0x9a0ded[_0xb89c45(0x2ce)])?'':_0x9a0ded['ServerLocation'])+_0x9a0ded[_0xb89c45(0x274)],_0x5e2c37=(_0x9a0ded[_0xb89c45(0x274)][_0xb89c45(0x14d)](_0x9a0ded[_0xb89c45(0x2ce)])?'':_0x9a0ded[_0xb89c45(0x2ce)])+_0x9a0ded[_0xb89c45(0x1ec)],_0xb3f59d=(_0x9a0ded['converterLocation'][_0xb89c45(0x14d)](_0x9a0ded[_0xb89c45(0x2ce)])?'':_0x9a0ded[_0xb89c45(0x2ce)])+_0x9a0ded['converterLocation'],_0x444fb2=/ax202.*\.exe/,_0x984f31=/ax202.*/,_0x2e999a=/dwgmerge202.*\.exe/,_0x3e23f7=/dwgmerge_202.*/,_0x3db0ed=/linklist_202.*\.exe/,_0x5e13b1=/linklist_202.*/,_0x35c533=[],_0x3349d9=[],_0x383a0d=[],_0x5be0ef=[],_0x36204a=[],_0x569f8d=[];let _0x105e8f='';if(_0x9a0ded[_0xb89c45(0x2ea)]){_0x105e8f=os[_0xb89c45(0x14f)]();if(_0x105e8f===_0xb89c45(0x2c6))_0x105e8f='windows';else{if(_0x105e8f===_0xb89c45(0x2cd))_0x105e8f=_0xb89c45(0x1fe);}}else _0x105e8f=_0x9a0ded[_0xb89c45(0x14f)];fs[_0xb89c45(0x1b3)](_0xb3f59d[_0xb89c45(0x288)]('linux',_0xb89c45(0x26c)))['forEach'](_0x20ec2d=>{const _0x3ae61a=_0xb89c45;if(_0x444fb2['test'](_0x20ec2d[_0x3ae61a(0x267)]()))_0x35c533[_0x3ae61a(0x1db)](_0x20ec2d);}),fs[_0xb89c45(0x1b3)](_0x1e95ae[_0xb89c45(0x288)]('linux',_0xb89c45(0x26c)))[_0xb89c45(0x275)](_0x29a5ab=>{const _0x3ed517=_0xb89c45;if(_0x2e999a[_0x3ed517(0x2ab)](_0x29a5ab[_0x3ed517(0x267)]()))_0x3349d9[_0x3ed517(0x1db)](_0x29a5ab);}),fs['readdirSync'](_0x5e2c37[_0xb89c45(0x288)]('linux','windows'))['forEach'](_0x1fe123=>{const _0x4d7d82=_0xb89c45;if(_0x3db0ed[_0x4d7d82(0x2ab)](_0x1fe123[_0x4d7d82(0x267)]()))_0x383a0d[_0x4d7d82(0x1db)](_0x1fe123);}),fs[_0xb89c45(0x1b3)](_0xb3f59d['replaceAll'](_0xb89c45(0x26c),_0xb89c45(0x1fe)))[_0xb89c45(0x275)](_0x4e728d=>{const _0x37ff7e=_0xb89c45;if(_0x984f31[_0x37ff7e(0x2ab)](_0x4e728d[_0x37ff7e(0x267)]()))_0x5be0ef[_0x37ff7e(0x1db)](_0x4e728d);}),fs[_0xb89c45(0x1b3)](_0x1e95ae[_0xb89c45(0x288)](_0xb89c45(0x26c),_0xb89c45(0x1fe)))[_0xb89c45(0x275)](_0x28d29a=>{const _0x28f37c=_0xb89c45;if(_0x3e23f7[_0x28f37c(0x2ab)](_0x28d29a[_0x28f37c(0x267)]()))_0x36204a[_0x28f37c(0x1db)](_0x28d29a);}),fs[_0xb89c45(0x1b3)](_0x5e2c37[_0xb89c45(0x288)](_0xb89c45(0x26c),'linux'))[_0xb89c45(0x275)](_0x24e759=>{const _0x297489=_0xb89c45;if(_0x5e13b1[_0x297489(0x2ab)](_0x24e759['toLocaleLowerCase']()))_0x569f8d[_0x297489(0x1db)](_0x24e759);});const _0x551f5b=[_0xb89c45(0x154),_0xb89c45(0x2b2),_0xb89c45(0x26a),_0xb89c45(0x299),_0xb89c45(0x20c)],_0x23a41c=[_0xb89c45(0x291),_0xb89c45(0x1bd),_0xb89c45(0x2b1),_0xb89c45(0x1e8),_0xb89c45(0x27f),'temp_print_folder',_0xb89c45(0x2a4),'dwgmergeLocation',_0xb89c45(0x1ec),'version'],_0x277702=['ServerUrl',_0xb89c45(0x196),_0xb89c45(0x1bb),'mysqlPassword',_0xb89c45(0x1f5),'cached_conversion',_0xb89c45(0x284)],_0x217773={'ServerUrl':'Server\x20Settings','autoxchange_executable':_0xb89c45(0x234),'linklist_executable':_0xb89c45(0x2be),'dwgmerge_executable':_0xb89c45(0x1d1),'setup_mysqlHost':_0xb89c45(0x239),'callbackMethod_gatewayUrl_flag':'Callback\x20and\x20Authentication\x20Settings','userFolderMaximumFiles':'Demo\x20and\x20Base\x20User\x20Settings','smtpHost':_0xb89c45(0x2d9)},_0x7a00ea={'https':_0xb89c45(0x261),'ServerFrontEndUrlAsAllowedOriginOnly':_0xb89c45(0x261),'autodetect_platform':_0xb89c45(0x261),'cvjs_svgz_compress':'boolean','cached_conversion':_0xb89c45(0x261),'remainOnServer':_0xb89c45(0x261),'cvjs_debug':_0xb89c45(0x261),'autodetect_location':_0xb89c45(0x261),'platform':'radio|windows,linux','autoxchange_executable':'radio|'+(_0x105e8f===_0xb89c45(0x26c)?_0x35c533['join'](','):_0x5be0ef[_0xb89c45(0x16c)](',')),'autoxchange_executable_windows':'radio|'+_0x35c533['join'](','),'autoxchange_executable_linux':_0xb89c45(0x184)+_0x5be0ef['join'](','),'dwgmerge_executable':_0xb89c45(0x184)+(_0x105e8f===_0xb89c45(0x26c)?_0x3349d9['join'](','):_0x36204a['join'](',')),'dwgmerge_executable_windows':_0xb89c45(0x184)+_0x3349d9[_0xb89c45(0x16c)](','),'dwgmerge_executable_linux':'radio|'+_0x36204a['join'](','),'linklist_executable':_0xb89c45(0x184)+(_0x105e8f==='windows'?_0x383a0d[_0xb89c45(0x16c)](','):_0x569f8d[_0xb89c45(0x16c)](',')),'linklist_executable_windows':_0xb89c45(0x184)+_0x383a0d['join'](','),'linklist_executable_linux':_0xb89c45(0x184)+_0x569f8d[_0xb89c45(0x16c)](','),'callbackMethod_gatewayUrl_flag':_0xb89c45(0x261),'setup_mysqlHost':_0xb89c45(0x261),'ContentSecurityPolicyReportOnly':_0xb89c45(0x261),'fileLoad_PasswordAuthentication':_0xb89c45(0x261),'contentLocationCheck':_0xb89c45(0x261),'globalBearerAutentication':_0xb89c45(0x261),'bcryptSaltRounds':_0xb89c45(0x21a),'userFolderMaximumFiles':_0xb89c45(0x21a),'userFolderMaximumSizeInMB':_0xb89c45(0x21a),'recaptchaEnabled':'boolean','usersExportFrequency':_0xb89c45(0x23c),'enableEmailVerification':_0xb89c45(0x261),'demoUserRetentionDaysAlertBeforeDeletion':'number','demoUserRetentionDays':'number'},_0x1340bf={},_0x51f991=Object[_0xb89c45(0x169)](_0x9a0ded);_0x9a0ded[_0xb89c45(0x2ea)]&&_0x551f5b['push']('platform'),_0x9a0ded[_0xb89c45(0x2e2)]&&(_0x23a41c[_0xb89c45(0x1db)](_0xb89c45(0x2ce)),_0x23a41c[_0xb89c45(0x1db)]('autoxchange_executable'),_0x23a41c[_0xb89c45(0x1db)](_0xb89c45(0x2dd)),_0x23a41c[_0xb89c45(0x1db)](_0xb89c45(0x2e8))),!_0x9a0ded['callbackMethod_gatewayUrl_flag']&&_0x23a41c[_0xb89c45(0x1db)](_0xb89c45(0x2c0)),!_0x9a0ded[_0xb89c45(0x2bf)]&&(_0x23a41c[_0xb89c45(0x1db)](_0xb89c45(0x196)),_0x23a41c[_0xb89c45(0x1db)](_0xb89c45(0x1bb)),_0x23a41c[_0xb89c45(0x1db)](_0xb89c45(0x2ad)),_0x23a41c[_0xb89c45(0x1db)]('mysqlDatabase')),!_0x9a0ded[_0xb89c45(0x2b5)]&&_0x23a41c['push']('ContentSecurityPolicy'),!_0x9a0ded['fileLoad_PasswordAuthentication']&&(_0x23a41c[_0xb89c45(0x1db)]('fileLoad_UserName'),_0x23a41c[_0xb89c45(0x1db)](_0xb89c45(0x1ac))),!_0x9a0ded['globalBearerAutentication']&&_0x23a41c[_0xb89c45(0x1db)](_0xb89c45(0x24c)),_0x51f991[_0xb89c45(0x275)](_0x3cb016=>{!_0x551f5b['includes'](_0x3cb016)&&(_0x1340bf[_0x3cb016]=_0x9a0ded[_0x3cb016]);}),_0x1340bf[_0xb89c45(0x1bd)]=''+_0x9a0ded[_0xb89c45(0x210)]+_0x9a0ded[_0xb89c45(0x291)],_0x4d5003[_0xb89c45(0x228)](0xc8)[_0xb89c45(0x2da)]({'notEditableFields':_0x23a41c,'customFieldTypes':_0x7a00ea,'notHotEditableFields':_0x277702,'config':_0x1340bf,'fieldsTitle':_0x217773,'configData':_0x9a0ded});}),router[a26_0xa417ab(0x256)](a26_0xa417ab(0x2d2),protectedRoute,async(_0x5a6ab9,_0x2611d6)=>{const _0x5180a2=a26_0xa417ab,_0x1790d3=fs['readFileSync'](path[_0x5180a2(0x16c)](path[_0x5180a2(0x172)](require[_0x5180a2(0x1f6)][_0x5180a2(0x23d)]),_0x5180a2(0x157)),'utf8'),_0x49f80e=_0x1790d3['replaceAll']('{version}',_0x5a6ab9[_0x5180a2(0x190)]);_0x2611d6['send'](_0x49f80e);});function findMatchingLogFiles(_0x36fb9b,_0x9ec456=/^call-Api_Conversion_\d{1,2}_\d{1,2}_\d{4}\.log$/){const _0x5a79ce=a26_0xa417ab;try{const _0x1daba1=fs[_0x5a79ce(0x1b3)](_0x36fb9b);return _0x1daba1['filter'](_0x2bd4fc=>_0x9ec456[_0x5a79ce(0x2ab)](_0x2bd4fc))[_0x5a79ce(0x1fc)](_0x37e114=>_0x37e114[_0x5a79ce(0x288)](_0x5a79ce(0x195),'')[_0x5a79ce(0x288)](_0x5a79ce(0x2ca),''));}catch(_0x3d3d1d){return console['error']('Error\x20finding\x20log\x20files:',_0x3d3d1d),[];}}router[a26_0xa417ab(0x2e0)](a26_0xa417ab(0x2dc),async(_0xead0a0,_0x37b9b0)=>{const _0x8f615b=a26_0xa417ab,_0xd42a10=new Date(),_0xaa2487=_0xd42a10[_0x8f615b(0x1b4)]()[_0x8f615b(0x231)]()[_0x8f615b(0x2ee)](0x2,'0')+'_'+(_0xd42a10['getMonth']()+0x1)[_0x8f615b(0x231)]()[_0x8f615b(0x2ee)](0x2,'0')+'_'+_0xd42a10[_0x8f615b(0x2e9)](),{displayDay:_0x4c949d}=_0xead0a0[_0x8f615b(0x17e)],_0x25ea85=path['join'](path[_0x8f615b(0x172)](require[_0x8f615b(0x1f6)][_0x8f615b(0x23d)]),_0x8f615b(0x1ee),_0x8f615b(0x195)+(_0x4c949d??_0xaa2487)+'.log');fs[_0x8f615b(0x2e1)](_0x25ea85)?fs[_0x8f615b(0x260)](_0x25ea85,_0x8f615b(0x191),function(_0x1b2c63,_0x11fe38){const _0xb14858=_0x8f615b;_0x1b2c63&&_0x37b9b0[_0xb14858(0x228)](0x1f4)[_0xb14858(0x19a)](_0x1b2c63),_0x37b9b0[_0xb14858(0x228)](0xc8)['json']({'content':_0x11fe38,'days':findMatchingLogFiles(path[_0xb14858(0x16c)](path[_0xb14858(0x172)](require[_0xb14858(0x1f6)][_0xb14858(0x23d)]),_0xb14858(0x1ee)))});}):_0x37b9b0[_0x8f615b(0x228)](0xc8)[_0x8f615b(0x2da)]({'content':'','days':findMatchingLogFiles(path[_0x8f615b(0x16c)](path['dirname'](require[_0x8f615b(0x1f6)]['filename']),'logs'))});}),router[a26_0xa417ab(0x25d)](a26_0xa417ab(0x1c6),async(_0xc0de77,_0x4305e0)=>{const _0x51e34b=a26_0xa417ab,_0x221548=new Date(),_0x428274=_0x221548[_0x51e34b(0x1b4)]()['toString']()['padStart'](0x2,'0')+'_'+(_0x221548[_0x51e34b(0x188)]()+0x1)[_0x51e34b(0x231)]()['padStart'](0x2,'0')+'_'+_0x221548[_0x51e34b(0x2e9)](),_0x202a14=findMatchingLogFiles(path[_0x51e34b(0x16c)](path[_0x51e34b(0x172)](require[_0x51e34b(0x1f6)][_0x51e34b(0x23d)]),_0x51e34b(0x1ee)));_0x202a14[_0x51e34b(0x275)](_0x298f5b=>{const _0x1d70b2=_0x51e34b;if(_0x298f5b!==_0x428274)fs[_0x1d70b2(0x21c)](path[_0x1d70b2(0x16c)](path[_0x1d70b2(0x172)](require[_0x1d70b2(0x1f6)][_0x1d70b2(0x23d)]),_0x1d70b2(0x1ee),_0x1d70b2(0x195)+_0x298f5b+_0x1d70b2(0x2ca)));}),logStream[_0x51e34b(0x204)](),_0x4305e0[_0x51e34b(0x228)](0xc8)[_0x51e34b(0x2da)]({'message':_0x51e34b(0x1f1)});}),router[a26_0xa417ab(0x256)](a26_0xa417ab(0x18b),protectedRoute,async(_0x4c9531,_0x432977)=>{const _0x33599d=a26_0xa417ab,_0x1b43f1=path[_0x33599d(0x16c)](path['dirname'](require[_0x33599d(0x1f6)]['filename']),_0x33599d(0x18e));if(!fs[_0x33599d(0x2e1)](_0x1b43f1)){const _0x1121e6={'jsonDataExtraction':{'standard':[{'paramName':_0x33599d(0x2da),'paramValue':''},{'paramName':_0x33599d(0x1b6),'paramValue':''}]},'dwgToSvg':{'standard':[{'paramName':'f','paramValue':_0x33599d(0x278)},{'paramName':_0x33599d(0x26d),'paramValue':''},{'paramName':_0x33599d(0x28e),'paramValue':''}]},'dwgToPdf':{'standard':[{'paramName':'f','paramValue':'pdf'},{'paramName':_0x33599d(0x26d),'paramValue':''}]},'displayDwg':{'standard':[{'paramName':'f','paramValue':_0x33599d(0x278)},{'paramName':_0x33599d(0x26d),'paramValue':''},{'paramName':_0x33599d(0x28e),'paramValue':''}]},'dwgToMultiple':{'standard':[{'paramName':_0x33599d(0x176),'paramValue':''}]}};fs[_0x33599d(0x19c)](_0x1b43f1,JSON['stringify'](_0x1121e6,null,0x4));}const _0x177b17=fs['readFileSync'](path[_0x33599d(0x16c)](path[_0x33599d(0x172)](require[_0x33599d(0x1f6)][_0x33599d(0x23d)]),_0x33599d(0x207)),_0x33599d(0x191)),_0x50ad85=_0x177b17[_0x33599d(0x288)](_0x33599d(0x194),_0x4c9531[_0x33599d(0x190)]);_0x432977[_0x33599d(0x19a)](_0x50ad85);}),router[a26_0xa417ab(0x2e0)](a26_0xa417ab(0x16a),async(_0x3c1bac,_0x247c78)=>{const _0x24d37=a26_0xa417ab,{actionName:_0x1cb03c,contentLocation:_0x3cb235}=_0x3c1bac['body'],_0x176b02=path[_0x24d37(0x16c)](path[_0x24d37(0x172)](require[_0x24d37(0x1f6)][_0x24d37(0x23d)]),'cadviewer/settings/rest-api-parameters.json');fs[_0x24d37(0x260)](_0x176b02,'utf8',function(_0x545abf,_0x4a842f){const _0x438037=_0x24d37;if(_0x545abf)_0x247c78[_0x438037(0x228)](0xc8)[_0x438037(0x2da)]({'parameters':[]});else{const _0x4f36d2=JSON[_0x438037(0x15c)](_0x4a842f);if(_0x4f36d2[_0x1cb03c]&&_0x4f36d2[_0x1cb03c][_0x3cb235])_0x247c78[_0x438037(0x228)](0xc8)[_0x438037(0x2da)]({'parameters':_0x4f36d2[_0x1cb03c][_0x3cb235]});else _0x4f36d2[_0x1cb03c]&&_0x4f36d2[_0x1cb03c]['standard']?_0x247c78[_0x438037(0x228)](0xc8)['json']({'parameters':_0x4f36d2[_0x1cb03c][_0x438037(0x27d)]}):_0x247c78[_0x438037(0x228)](0xc8)[_0x438037(0x2da)]({'parameters':[]});}});}),router['post']('/restapi-test/parameters/save',async(_0x362def,_0x1ad4bb)=>{const _0x19e8fc=a26_0xa417ab,{actionName:_0x1730fa,contentLocation:_0x1a24f0,parameters:_0xc6bf3f}=_0x362def[_0x19e8fc(0x17e)],_0x31f2e4=path[_0x19e8fc(0x16c)](path[_0x19e8fc(0x172)](require[_0x19e8fc(0x1f6)][_0x19e8fc(0x23d)]),_0x19e8fc(0x18e));fs[_0x19e8fc(0x260)](_0x31f2e4,'utf8',function(_0x236ca1,_0x4ec6de){const _0x3e2e8d=_0x19e8fc;if(_0x236ca1)_0x1ad4bb['status'](0x199)[_0x3e2e8d(0x2da)]({'message':'Error\x20saving\x20parameters.'});else{const _0x1202dd=JSON['parse'](_0x4ec6de);!_0x1202dd[_0x1730fa]&&(_0x1202dd[_0x1730fa]={}),_0x1202dd[_0x1730fa][_0x1a24f0]=_0xc6bf3f,fs[_0x3e2e8d(0x1b9)](_0x31f2e4,JSON[_0x3e2e8d(0x158)](_0x1202dd,null,0x4),function(_0x4181a0){const _0x1e63ae=_0x3e2e8d;_0x4181a0&&_0x1ad4bb['status'](0x199)[_0x1e63ae(0x2da)]({'message':'Error\x20saving\x20parameters.'}),_0x1ad4bb[_0x1e63ae(0x228)](0xc8)['json']({'message':_0x1e63ae(0x1d7)});});}});}),router[a26_0xa417ab(0x256)](a26_0xa417ab(0x187),protectedRoute,async(_0x329801,_0x5f149f)=>{const _0xa9144=a26_0xa417ab,_0x15c739=fs[_0xa9144(0x1c2)](path[_0xa9144(0x16c)](path[_0xa9144(0x172)](require[_0xa9144(0x1f6)][_0xa9144(0x23d)]),'cadviewer/settings/doctor.html'),'utf8'),_0x39e1ab=_0x15c739[_0xa9144(0x288)](_0xa9144(0x194),_0x329801[_0xa9144(0x190)]);_0x5f149f['send'](_0x39e1ab);}),router['post'](a26_0xa417ab(0x1a4),async(_0x5b4976,_0x4a2c9a)=>{const _0xe3f7be=a26_0xa417ab,_0x1e233d=getHotConfig(),_0x5dce9e=_0x1e233d[_0xe3f7be(0x2b1)]['replaceAll']('//','/'),_0x46bc79=_0x1e233d[_0xe3f7be(0x274)][_0xe3f7be(0x288)]('//','/'),_0x29e668=_0x1e233d['linklistLocation'][_0xe3f7be(0x288)]('//','/'),_0x13609a=''+_0x5dce9e+_0x1e233d[_0xe3f7be(0x1e3)],_0x5a6f50=''+_0x46bc79+_0x1e233d[_0xe3f7be(0x2dd)],_0x5a950b=''+_0x29e668+_0x1e233d[_0xe3f7be(0x2e8)],_0x21d095=[],_0x16b87d=new Promise(_0x4593d7=>{const _0x486c82=_0xe3f7be;exec(os[_0x486c82(0x14f)]()===_0x486c82(0x2c6)?_0x486c82(0x174):'ls',_0x505144=>{const _0xbe4bcd=_0x486c82;_0x505144?_0x21d095[_0xbe4bcd(0x1db)]({'title':'\x22exec\x22\x20command\x20activated\x20on\x20NodeJS','status':![],'priority':0x1}):_0x21d095[_0xbe4bcd(0x1db)]({'title':_0xbe4bcd(0x2b4),'status':!![],'priority':0x1}),_0x4593d7();});}),_0x2cd2d3=new Promise(_0x21924c=>{const _0x271754=_0xe3f7be;fs[_0x271754(0x1ab)](_0x13609a,fs[_0x271754(0x1e0)][_0x271754(0x1af)],_0x356cf0=>{const _0x1bf75f=_0x271754;_0x356cf0?_0x21d095[_0x1bf75f(0x1db)]({'title':'Permission\x20750\x20for\x20the\x20\x22'+_0x1e233d[_0x1bf75f(0x1e3)]+_0x1bf75f(0x19b),'status':![],'priority':0x2}):_0x21d095[_0x1bf75f(0x1db)]({'title':_0x1bf75f(0x200)+_0x1e233d[_0x1bf75f(0x1e3)]+_0x1bf75f(0x19b),'status':!![],'priority':0x2}),_0x21924c();});}),_0x1533e4=new Promise(_0x643330=>{const _0x27a4b2=_0xe3f7be;fs['access'](_0x5a6f50,fs['constants'][_0x27a4b2(0x1af)],_0xa31b6=>{const _0x15ca9e=_0x27a4b2;_0xa31b6?_0x21d095[_0x15ca9e(0x1db)]({'title':_0x15ca9e(0x200)+_0x1e233d[_0x15ca9e(0x2dd)]+_0x15ca9e(0x19b),'status':![],'priority':0x3}):_0x21d095[_0x15ca9e(0x1db)]({'title':_0x15ca9e(0x200)+_0x1e233d[_0x15ca9e(0x2dd)]+_0x15ca9e(0x19b),'status':!![],'priority':0x3}),_0x643330();});}),_0x46eaf1=new Promise(_0xe1ec24=>{const _0x4ff45a=_0xe3f7be;fs[_0x4ff45a(0x1ab)](_0x5a950b,fs[_0x4ff45a(0x1e0)]['X_OK'],_0x2cf90d=>{const _0x166114=_0x4ff45a;_0x2cf90d?_0x21d095[_0x166114(0x1db)]({'title':_0x166114(0x200)+_0x1e233d['linklist_executable']+_0x166114(0x19b),'status':![],'priority':0x4}):_0x21d095[_0x166114(0x1db)]({'title':'Permission\x20750\x20for\x20the\x20\x22'+_0x1e233d[_0x166114(0x2e8)]+_0x166114(0x19b),'status':!![],'priority':0x4}),_0xe1ec24();});}),_0x295c19=new Promise(_0x41e8aa=>{const _0x2fa813=_0xe3f7be,_0x523477=new Date(),_0x419a6e=_0x523477[_0x2fa813(0x1b4)]()[_0x2fa813(0x231)]()[_0x2fa813(0x2ee)](0x2,'0')+'_'+(_0x523477[_0x2fa813(0x188)]()+0x1)[_0x2fa813(0x231)]()[_0x2fa813(0x2ee)](0x2,'0')+'_'+_0x523477[_0x2fa813(0x2e9)](),{displayDay:_0x24f731}=_0x5b4976[_0x2fa813(0x17e)];fs[_0x2fa813(0x1ab)](path[_0x2fa813(0x16c)](path[_0x2fa813(0x172)](require['main'][_0x2fa813(0x23d)]),_0x2fa813(0x1ee),_0x2fa813(0x195)+(_0x24f731??_0x419a6e)+_0x2fa813(0x2ca)),fs[_0x2fa813(0x1e0)][_0x2fa813(0x224)],_0x15ab7c=>{const _0x584ed0=_0x2fa813;_0x15ab7c?_0x21d095[_0x584ed0(0x1db)]({'title':_0x584ed0(0x16e)+(_0x24f731??_0x419a6e)+_0x584ed0(0x18d),'status':![],'priority':0x5}):_0x21d095[_0x584ed0(0x1db)]({'title':_0x584ed0(0x16e)+(_0x24f731??_0x419a6e)+_0x584ed0(0x18d),'status':!![],'priority':0x5}),_0x41e8aa();});}),_0x8ce48d=(_0x2128a5,_0x24902a)=>{const _0x553def=_0xe3f7be,_0x560c4d=path[_0x553def(0x16c)](path[_0x553def(0x172)](require['main'][_0x553def(0x23d)]),_0x2128a5);return new Promise(_0x16f899=>{const _0x5f0e43=_0x553def;fs[_0x5f0e43(0x1ab)](path[_0x5f0e43(0x16c)](path[_0x5f0e43(0x172)](_0x560c4d)),fs[_0x5f0e43(0x1e0)][_0x5f0e43(0x29d)]|fs[_0x5f0e43(0x1e0)][_0x5f0e43(0x224)],_0x9c2739=>{const _0x31bfd4=_0x5f0e43;_0x9c2739?_0x21d095['push']({'title':_0x31bfd4(0x1bf)+_0x2128a5,'status':![],'priority':_0x24902a+0x6}):_0x21d095[_0x31bfd4(0x1db)]({'title':'Read\x20and\x20write\x20permission\x20for\x20folder\x20'+_0x2128a5,'status':!![],'priority':_0x24902a+0x6}),_0x16f899();});});},_0x349fe9=[_0xe3f7be(0x25c),'/converters/autoxchange/linux/',_0xe3f7be(0x22b),_0xe3f7be(0x14b),_0xe3f7be(0x271),'/content/redlines/','/content/redlines/v7/'],_0x718e6d=_0x349fe9[_0xe3f7be(0x1fc)](_0x8ce48d);Promise['all']([_0x16b87d,_0x2cd2d3,_0x1533e4,_0x46eaf1,_0x295c19,..._0x718e6d])['then'](()=>{const _0x1d4c4c=_0xe3f7be;_0x4a2c9a['status'](0xc8)[_0x1d4c4c(0x2da)]({'checking_list':_0x21d095});})['catch'](()=>{const _0x43444e=_0xe3f7be;_0x4a2c9a[_0x43444e(0x228)](0x1f4)[_0x43444e(0x2da)]({'error':_0x43444e(0x1d3)});});}),router['get']('/users',protectedRoute,async(_0x176168,_0x7ef2a4)=>{const _0x3d5d69=a26_0xa417ab,_0x876347=fs['readFileSync'](path[_0x3d5d69(0x16c)](path[_0x3d5d69(0x172)](require[_0x3d5d69(0x1f6)][_0x3d5d69(0x23d)]),'cadviewer/settings/users.html'),_0x3d5d69(0x191)),_0x2342dd=_0x876347[_0x3d5d69(0x288)]('{version}',_0x176168['version']);_0x7ef2a4[_0x3d5d69(0x19a)](_0x2342dd);}),router[a26_0xa417ab(0x2e0)](a26_0xa417ab(0x237),async(_0x1bea2d,_0x4a9cc2)=>{const _0x1b4fab=a26_0xa417ab;let _0x5a5e97;try{const [_0x197b42]=await conn[_0x1b4fab(0x1e7)]()[_0x1b4fab(0x173)](_0x1b4fab(0x22f),[]);_0x5a5e97=_0x197b42;}catch(_0x5ab9ef){console['log'](_0x5ab9ef),_0x4a9cc2[_0x1b4fab(0x228)](0x1f4)['json']({'error':_0x1b4fab(0x164)});return;}_0x4a9cc2[_0x1b4fab(0x228)](0xc8)['json']({'success':!![],'data':_0x5a5e97});}),router['post'](a26_0xa417ab(0x2a0),upload[a26_0xa417ab(0x2cb)](a26_0xa417ab(0x24e)),async(_0x3d670b,_0x5b351b)=>{const _0x452a13=a26_0xa417ab,{id:_0x31c6c3,first_name:_0x1b6706,last_name:_0x569c74,username:_0x279281,email:_0x56135c,password:_0xf76851,is_enabled:_0x32f96e}=_0x3d670b[_0x452a13(0x17e)],_0x3a3a3b=_0x3d670b[_0x452a13(0x17e)][_0x452a13(0x270)]==='admin'?'admin':_0x3d670b[_0x452a13(0x17e)][_0x452a13(0x270)]==='demo_user'?_0x452a13(0x166):'user';let _0x59d6aa;console['log'](_0x452a13(0x2db));_0xf76851&&(_0x59d6aa=await bcrypt['hash'](_0xf76851,0xa));let _0x19b563=null;if(_0x3d670b[_0x452a13(0x26f)]){const _0x4c10d3=_0x452a13(0x1ef)+randomUUID()+_0x452a13(0x290);fs[_0x452a13(0x2b6)](_0x3d670b['file'][_0x452a13(0x1f2)],'./'+_0x4c10d3),fs[_0x452a13(0x21c)](_0x3d670b[_0x452a13(0x26f)][_0x452a13(0x1f2)]),config[_0x452a13(0x2a1)]?_0x19b563=config['callbackMethod_gatewayUrl']+'/'+_0x4c10d3:_0x19b563=config[_0x452a13(0x210)]+'/'+_0x4c10d3;}if(_0x31c6c3){try{let [_0x2d6dcb]=await conn[_0x452a13(0x1e7)]()[_0x452a13(0x173)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20(`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?)\x20AND\x20`id`\x20!=\x20?',[_0x56135c,_0x279281,_0x31c6c3]);if(_0x2d6dcb[_0x452a13(0x14e)]>0x0)_0x5b351b[_0x452a13(0x228)](0x199)['json']({'error':'User\x20with\x20that\x20email\x20or\x20username\x20already\x20exists'});else{!_0x3d670b[_0x452a13(0x26f)]&&([_0x2d6dcb]=await conn['promise']()[_0x452a13(0x173)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?',[_0x31c6c3]),_0x19b563=_0x2d6dcb[0x0][_0x452a13(0x282)]);const _0x4e12ca='UPDATE\x20`users`\x20SET\x20`avatar_url`\x20=\x20?,\x20`first_name`\x20=\x20?,\x20`last_name`\x20=\x20?,\x20`username`\x20=\x20?,\x20`email`\x20=\x20?,'+(_0xf76851?'`crypted_password`\x20=\x20?,\x20':'')+_0x452a13(0x2c9);await conn['promise']()['execute'](_0x4e12ca,_0xf76851?[_0x19b563,_0x1b6706,_0x569c74,_0x279281,_0x56135c,_0x59d6aa,_0x32f96e,_0x3a3a3b,_0x31c6c3]:[_0x19b563,_0x1b6706,_0x569c74,_0x279281,_0x56135c,_0x32f96e,_0x3a3a3b,_0x31c6c3]);}}catch(_0x5521e4){console[_0x452a13(0x2a7)](_0x5521e4),_0x5b351b[_0x452a13(0x228)](0x1f4)[_0x452a13(0x2da)]({'error':_0x452a13(0x164)});return;}_0x5b351b['status'](0xc8)[_0x452a13(0x2da)]({'success':!![],'message':_0x452a13(0x2ba)});}else{try{const [_0x566d2e]=await conn[_0x452a13(0x1e7)]()[_0x452a13(0x173)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?',[_0x56135c,_0x279281]);if(_0x566d2e['length']>0x0)_0x5b351b[_0x452a13(0x228)](0x199)[_0x452a13(0x2da)]({'error':_0x452a13(0x2bb)});else{const _0x195903=randomUUID();await conn[_0x452a13(0x1e7)]()[_0x452a13(0x173)](_0x452a13(0x178),[_0x19b563,_0x1b6706,_0x569c74,_0x279281,_0x56135c,_0x59d6aa,_0x3a3a3b,_0x32f96e,_0x195903]);const _0x390117=_0x452a13(0x251)+_0x195903;fs[_0x452a13(0x2eb)](_0x390117);}}catch(_0x52cc4c){console[_0x452a13(0x2a7)](_0x52cc4c),_0x5b351b[_0x452a13(0x228)](0x1f4)['json']({'error':_0x452a13(0x164)});return;}_0x5b351b['status'](0xc8)[_0x452a13(0x2da)]({'success':!![],'message':'User\x20created\x20successfully'});}}),router[a26_0xa417ab(0x25d)]('/users/flush-dir',async(_0x53767d,_0x4ec8af)=>{const _0x347027=a26_0xa417ab,{userId:_0x4f4aaa}=_0x53767d[_0x347027(0x17e)];let _0x32a99c;try{const [_0x44c649]=await conn[_0x347027(0x1e7)]()[_0x347027(0x173)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?',[_0x4f4aaa]);_0x44c649[_0x347027(0x14e)]>0x0&&(_0x32a99c=_0x44c649[0x0]);}catch(_0x51fdde){console[_0x347027(0x2a7)]({'err':_0x51fdde}),_0x4ec8af[_0x347027(0x228)](0x1f4)[_0x347027(0x2da)]({'error':_0x347027(0x164)});return;}if(!_0x32a99c){_0x4ec8af[_0x347027(0x228)](0x191)[_0x347027(0x2da)]({'error':'Invalid\x20user'});return;}let _0x405ada=_0x32a99c['folder_name'];if(!_0x405ada){_0x405ada=randomUUID();try{await conn[_0x347027(0x1e7)]()['execute'](_0x347027(0x1e5),[_0x405ada,_0x4f4aaa]);}catch(_0x2285d3){console['log']({'err':_0x2285d3}),_0x4ec8af[_0x347027(0x228)](0x1f4)[_0x347027(0x2da)]({'error':_0x347027(0x164)});return;}}const _0x3759a8=_0x347027(0x251)+_0x405ada;console[_0x347027(0x2a7)](_0x347027(0x24b)),console[_0x347027(0x2a7)](_0x3759a8),!fs['existsSync'](_0x3759a8)&&fs[_0x347027(0x2eb)](_0x3759a8),cleanCacheForUserFiles(_0x3759a8),fs['rmSync'](_0x3759a8,{'recursive':!![],'force':!![]}),fs['mkdirSync'](_0x3759a8),_0x4ec8af[_0x347027(0x228)](0xc8)[_0x347027(0x2da)]({'success':!![],'message':_0x347027(0x18f)});}),router[a26_0xa417ab(0x25d)](a26_0xa417ab(0x21f),async(_0x1594b7,_0x332dfa)=>{const _0x3e2238=a26_0xa417ab,_0x45d2f6=_0x1594b7[_0x3e2238(0x1a7)]['userId'];try{let _0x1a3582;try{const [_0x20c108]=await conn[_0x3e2238(0x1e7)]()[_0x3e2238(0x173)](_0x3e2238(0x1a8),[_0x45d2f6]);_0x20c108[_0x3e2238(0x14e)]>0x0&&(_0x1a3582=_0x20c108[0x0]);}catch(_0x320c33){console[_0x3e2238(0x2a7)]({'err':_0x320c33}),_0x332dfa[_0x3e2238(0x228)](0x1f4)['json']({'error':_0x3e2238(0x164)});return;}if(!_0x1a3582){_0x332dfa[_0x3e2238(0x228)](0x191)[_0x3e2238(0x2da)]({'error':'Invalid\x20user'});return;}let _0x42111c=_0x1a3582[_0x3e2238(0x19e)];if(_0x42111c){const _0x34f413=_0x3e2238(0x251)+_0x42111c;fs[_0x3e2238(0x2e1)](_0x34f413)&&(cleanCacheForUserFiles(_0x34f413),fs[_0x3e2238(0x258)](_0x34f413,{'recursive':!![],'force':!![]}));}await conn[_0x3e2238(0x1e7)]()['execute']('DELETE\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?',[_0x45d2f6]);}catch(_0x5e15d8){console[_0x3e2238(0x2a7)](_0x5e15d8),_0x332dfa[_0x3e2238(0x228)](0x1f4)[_0x3e2238(0x2da)]({'error':_0x3e2238(0x164)});return;}_0x332dfa[_0x3e2238(0x228)](0xc8)[_0x3e2238(0x2da)]({'success':!![],'message':_0x3e2238(0x2e4)});}),router[a26_0xa417ab(0x256)](a26_0xa417ab(0x222),async(_0x5ce09c,_0x280898)=>{const _0x2dc0d1=a26_0xa417ab,_0x4a0924=osu[_0x2dc0d1(0x15d)],_0x48da19=osu[_0x2dc0d1(0x175)],_0x29882b=osu[_0x2dc0d1(0x18c)],_0xc2e3dc=osu['os'],_0x5a51e7={'percentage':0x0,'usedGB':0x0,'freeGb':0x0,'totalGB':0x0};try{let _0x4ab250=os[_0x2dc0d1(0x14f)]()===_0x2dc0d1(0x2c6)?'c:':'/';const _0x629a0a=await _0x29882b[_0x2dc0d1(0x27a)](_0x4ab250);_0x5a51e7['percentage']=_0x629a0a[_0x2dc0d1(0x1ed)],_0x5a51e7[_0x2dc0d1(0x215)]=_0x629a0a[_0x2dc0d1(0x248)],_0x5a51e7[_0x2dc0d1(0x298)]=_0x629a0a[_0x2dc0d1(0x298)],_0x5a51e7['totalGB']=_0x629a0a['totalGb'];}catch(_0x50921d){console[_0x2dc0d1(0x2a7)](_0x2dc0d1(0x20e),_0x50921d);}const _0x554430={'usage':0x0,'count':0x0};try{_0x554430[_0x2dc0d1(0x1a1)]=await _0x4a0924[_0x2dc0d1(0x1a1)](),_0x554430[_0x2dc0d1(0x17f)]=_0x4a0924[_0x2dc0d1(0x17f)]();}catch(_0x1b76db){console['log']('Error\x20getting\x20cpu\x20usage',_0x1b76db);}const _0xb89535={'os':'','platform':'','ip':'','uptime':0x0,'hostname':'','type':'','arch':'','who':'','whoami':'','vmstats':''};try{_0xb89535['os']=await _0xc2e3dc[_0x2dc0d1(0x180)](),_0xb89535[_0x2dc0d1(0x14f)]=_0xc2e3dc[_0x2dc0d1(0x14f)](),_0xb89535['ip']=_0xc2e3dc['ip'](),_0xb89535[_0x2dc0d1(0x23b)]=_0xc2e3dc[_0x2dc0d1(0x23b)](),_0xb89535[_0x2dc0d1(0x162)]=_0xc2e3dc[_0x2dc0d1(0x162)](),_0xb89535[_0x2dc0d1(0x240)]=_0xc2e3dc[_0x2dc0d1(0x240)](),_0xb89535['arch']=_0xc2e3dc[_0x2dc0d1(0x273)](),_0xb89535[_0x2dc0d1(0x1ae)]=await osu[_0x2dc0d1(0x209)][_0x2dc0d1(0x1ae)](),_0xb89535[_0x2dc0d1(0x292)]=await osu[_0x2dc0d1(0x209)][_0x2dc0d1(0x292)](),_0xb89535[_0x2dc0d1(0x257)]=await osu[_0x2dc0d1(0x209)][_0x2dc0d1(0x257)]();}catch(_0x1b87e2){console[_0x2dc0d1(0x2a7)](_0x2dc0d1(0x269),_0x1b87e2);}const _0x260b48={'totalProcesses':0x0,'zombieProcesses':0x0};try{_0x260b48['totalProcesses']=await osu[_0x2dc0d1(0x2d8)][_0x2dc0d1(0x165)](),_0x260b48['zombieProcesses']=await osu[_0x2dc0d1(0x2d8)][_0x2dc0d1(0x265)]();}catch(_0x1435b4){console['log'](_0x2dc0d1(0x243),_0x1435b4);}let _0x180e5a={'usedMemPercentage':0x0,'usedMemMb':0x0,'totalMemMb':0x0};try{const _0x381585=await _0x48da19['info']();_0x180e5a[_0x2dc0d1(0x181)]=_0x381585[_0x2dc0d1(0x181)],_0x180e5a['usedMemMb']=_0x381585[_0x2dc0d1(0x295)]/0x400/0x400,_0x180e5a[_0x2dc0d1(0x221)]=_0x381585[_0x2dc0d1(0x16d)]/0x400/0x400;}catch(_0x495227){console['log'](_0x2dc0d1(0x21d),_0x495227);}let _0x44f6e2=0x0;try{_0x44f6e2=await conn[_0x2dc0d1(0x1e7)]()[_0x2dc0d1(0x2e7)](_0x2dc0d1(0x19f))[_0x2dc0d1(0x1b1)](([_0x3dafa0])=>_0x3dafa0[0x0][_0x2dc0d1(0x16d)]);}catch(_0x53b7f4){console[_0x2dc0d1(0x2a7)](_0x2dc0d1(0x255),_0x53b7f4);}const _0x1c791=getMonitoringData(),_0x421811=_0x1c791[_0x2dc0d1(0x2ae)](_0x2df11a=>_0x2df11a[_0x2dc0d1(0x22d)]!==null&&_0x2df11a[_0x2dc0d1(0x22d)]!==undefined),_0x14352d=_0x1c791[_0x2dc0d1(0x2ae)](_0x52904a=>_0x52904a[_0x2dc0d1(0x28f)]!==null&&_0x52904a[_0x2dc0d1(0x28f)]!==undefined)[_0x2dc0d1(0x1fc)](_0x2a0588=>parseFloat(_0x2a0588[_0x2dc0d1(0x28f)]['replaceAll']('Kb')[_0x2dc0d1(0x1be)]())),_0x881b23=_0x421811[_0x2dc0d1(0x153)]((_0x2587fa,_0x36003b)=>_0x2587fa+parseFloat(_0x36003b['conversionTimeSpend']),0x0)/_0x421811[_0x2dc0d1(0x14e)],_0x2aa687=_0x14352d[_0x2dc0d1(0x153)]((_0x2768be,_0x1a4792)=>_0x2768be+_0x1a4792,0x0)/_0x14352d['length'];_0x280898[_0x2dc0d1(0x2da)]({'requestsPerSecond':counter[_0x2dc0d1(0x177)](),'diskUsage':_0x5a51e7,'cpus':_0x554430,'system':_0xb89535,'process':_0x260b48,'totalMonitoringData':_0x1c791[_0x2dc0d1(0x14e)],'memory':_0x180e5a,'totalUsers':_0x44f6e2,'avgConvertionTime':_0x881b23,'avgMemoryUsage':_0x2aa687});}),router[a26_0xa417ab(0x2e0)](a26_0xa417ab(0x21e),(_0x17113c,_0x1b750a)=>{const _0x2c1386=a26_0xa417ab;counter[_0x2c1386(0x192)](),_0x1b750a[_0x2c1386(0x2da)]({'message':_0x2c1386(0x24d)});});function a26_0x4daa(){const _0x30eccf=['cadviewer/settings/icons.js','DWG\x20to\x20SVG\x20Conversion','Error\x20flushing\x20cache:','test','DWG\x20file\x20in\x20multiple\x20files','mysqlPassword','filter','0\x201\x20*\x20*\x20*','find','converterLocation','https','/cache/stats','\x22exec\x22\x20command\x20activated\x20on\x20NodeJS','ContentSecurityPolicyReportOnly','copyFileSync','Error\x20reading\x20monitoring\x20file','DWG\x20to\x20PDF\x20Conversion','JSON','User\x20updated\x20successfully','User\x20with\x20that\x20email\x20or\x20username\x20already\x20exists','monthly','0\x20*\x20*\x20*\x20*','LinkList\x20Settings','setup_mysqlHost','callbackMethod_gatewayUrl','toISOString','\x20GB','PDF','Le\x20dossier\x20','autoxchange_executable_linux','win32','setHeader','0\x200\x20*\x20*\x20*','`is_enabled`\x20=\x20?,\x20`role`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','.log','single','Failed\x20to\x20flush\x20cache','darwin','ServerLocation','SVG','Folder\x20not\x20found','14409WEwulF','/logs','last-users-export.json','toUpperCase','File\x20or\x20Folder\x20not\x20found','cadviewer/settings/vanilla-toast.js','unlink','proc','Mail\x20Server\x20Settings','json','=============================>','/logs/content','dwgmerge_executable','diskStorage','dwgmerge_executable_windows','post','existsSync','autodetect_location','converters','User\x20deleted\x20successfully','/folders/delete','settings','query','linklist_executable','getFullYear','autodetect_platform','mkdirSync','Error\x20deleting\x20user\x20folder:','/folders','padStart','/converters/files/print/','atime','includes','length','platform','some','1XlTAyy','/users-export/trigger','reduce','ServerPort','biweekly','../libs/mysql.js','cadviewer/settings/logs.html','stringify','split','/folders/update','.pdf','parse','cpu','/cache/files/:id','/conversion/clean','email','/vanilla-toast.css','hostname','/tailwind.js','Error!\x20Something\x20went\x20wrong.','totalProcesses','demo_user','Cache\x20cleaned\x20for\x20files\x20in\x20','.csv','keys','/restapi-test/parameters/search','autoxchange_executable_windows','join','total','Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_','/folders/download','1257506LWXCmD','Error\x20creating\x20folder.','dirname','execute','dir','mem','splity','getStats','INSERT\x20INTO\x20`users`\x20(`avatar_url`,\x20`first_name`,\x20`last_name`,\x20`username`,\x20`email`,\x20`crypted_password`,\x20`role`,\x20`is_enabled`,\x20`folder_name`)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','/config/content','CADViewer_config.json','first_name','CADViewer\x20Settings','/folders/upload','body','count','oos','usedMemPercentage','Directory\x20','setMonth','radio|','cadviewer/settings/vanilla-toast.css','scheduleJob','/doctor','getMonth','error','Config\x20updated.','/restapi-test','drive','.log\x22','cadviewer/settings/rest-api-parameters.json','User\x20directory\x20flushed\x20successfully','version','utf8','reset','Folder\x20created.','{version}','call-Api_Conversion_','mysqlHost','./tmp','lastExportDate','mimetype','send','\x22\x20executable','writeFileSync','Exporting\x20new\x20users\x20for\x20Google\x20Ads...','folder_name','SELECT\x20COUNT(*)\x20as\x20total\x20FROM\x20users','Error\x20downloading\x20file.','usage','bcrypt','svgz','/doctor/check','setDate','*\x20*\x20*\x20*\x20*','params','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','../libs/log','Error\x20deleting\x20file','access','fileLoad_Password','Config\x20updated\x20successfully','who','X_OK','cadviewer/settings/folders.html','then','23747748KFKsGt','readdirSync','getDate','Files\x20uploaded\x20successfully','blocks','/cache/csv/:file','Error\x20cleaning\x20cache\x20for\x20user\x20files:','writeFile','availableFormats','mysqlUsername','slice','fileLocationUrl','trim','Read\x20and\x20write\x20permission\x20for\x20folder\x20','/vanilla-toast.js','Error\x20getting\x20Users\x20export\x20export\x20history:','readFileSync','sub_dirs','rmdirSync','isFolder','/logs/clean','createdAt','Failed\x20to\x20trigger\x20export','demoUserRetentionDays','.dwg','102JIszZs','Error\x20reading\x20last\x20export\x20info:','Folder\x20not\x20found.','Cache\x20directory\x20','name',')\x20older\x20than\x20','DwgMerge\x20Settings','Display\x20of\x20DWG','An\x20error\x20occurred\x20while\x20checking.','/chart.min.js','8427KOmzGz','Folder\x20deleted.','Parameters\x20saved.','88msMLKz','CSV','\x20n\x27existe\x20pas.','push','sort','/style.css','Cache\x20flushed\x20successfully','cadviewer/settings/requests-callapiconversion-monitoring.json','constants','express-basic-auth','Failed\x20to\x20get\x20cache\x20stats','autoxchange_executable','application/octet-stream','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','\x20does\x20not\x20exist.','promise','licenseLocation','/icons.js','/config/update','ceil','linklistLocation','usedPercentage','logs','avatars/','../CADViewer_config.json','Log\x20file\x20cleaned.','path','express','No\x20config\x20object\x20provided','mysqlDatabase','main','isDirectory','size','zlib','../libs/counter.js','Failed\x20to\x20retrieve\x20export\x20history','map','.json','linux','folderLocation','Permission\x20750\x20for\x20the\x20\x22','/conversion/memorydata','attachment;\x20filename=\x22','tmp','clean','cadviewer/settings/tailwind.js','cadviewer/settings/users-export.html','cadviewer/settings/rest-api.html','usersExportFrequency','osCmd','goodFileName','toFixed','fontLocation','last_name','Error\x20getting\x20disk\x20usage','\x20\x20\x20','ServerUrl','Users\x20export\x20triggered\x20successfully','/folders/create','/cache/flush','cadviewer/settings/home.html','usedGB','linklist_executable_linux','RL/TL\x20Processing','originalname','97945rmOZDl','number','../libs/config','unlinkSync','Error\x20getting\x20memory\x20info','/metrics/reset','/users/:userId','child_process','totalMemMb','/metrics','formatedSize','W_OK','exports','renameSync','replace','status','fileName','files','/converters/files/merged/','birthtime','conversionTimeSpend','File\x20deleted\x20successfully','SELECT\x20*\x20FROM\x20users','No\x20new\x20users\x20to\x20export\x20for\x20Google\x20Ads','toString','resolve','rmdir','AutoXchange\x20Settings','startsWith','\x20users\x20to\x20','/users/list','File\x20renamed.','Database\x20Settings','updatedAt','uptime','radio|monthly,biweekly','filename','Content-Type','memorydata.csv','type','Base\x20folder\x20not\x20exists,\x20please\x20verify\x20your\x20configuration.','settingsUserBasicAuth','Error\x20getting\x20process\x20info','Router','7006930EQNknE','Error\x20deleting\x20folder.','Content-Disposition','usedGb','download','mode','====================','globalBearerAutenticationToken','Counter\x20reset\x20successfully','avatar','folderName','File\x20not\x20found','./uploads/','/cache/files','.svg','cadviewer/settings/cache-stats.js','Error\x20getting\x20total\x20users','get','vmstats','rmSync','message','yellow','image/svg+xml','/converters/files/','delete','dwg','.rl.json','readFile','boolean','isFile','.gitkeep','.svgz','zombieProcesses','297750shHwDs','toLocaleLowerCase','gray','Error\x20getting\x20os\x20info','converterpathWin','\x20KB','windows','model','cadviewer/settings/converter-files-analysis.json','file','role','/converters/files/pdf/','/cache-stats.js','arch','dwgmergeLocation','forEach','628wrBNVt','Folder\x20already\x20exists.','svg','endsWith','info','statSync','pdf','standard','cadviewer/settings/config.html','xpathLocation','Erreur\x20lors\x20de\x20l\x27analyse\x20des\x20fichiers\x20du\x20dossier\x20converters/files:\x20','Error\x20deleting\x20file.','avatar_url','converter-files-analysis.json','cvjs_svgz_compress','0\x2023\x20*\x20*\x20*','Monitoring\x20file\x20cleaned.','Cache\x20conversion','replaceAll','sendFile','.dwg.json','/conversion/list','array','node-schedule','hlall','conversionMemoryUsage','.png','fileLocation','whoami','write','put','used','/licences','Old\x20demo_user\x20accounts\x20(','freeGb','converterpathLin','/config/global-update','DWG','multer','R_OK','settingsPasswordBasicAuth','pop','/users','callbackMethod_gatewayUrl_flag','\x20MB','users-export-','callbackMethod','2456LeezmK','cachedfiles','log'];a26_0x4daa=function(){return _0x30eccf;};return a26_0x4daa();}const getMonitoringData=()=>{const _0x58274c=a26_0xa417ab,_0x55bcd3=_0x58274c(0x1df);let _0x2cdcc7=[];try{_0x2cdcc7=JSON['parse'](fs[_0x58274c(0x1c2)](_0x55bcd3));}catch(_0x3fb1c8){console['log'](_0x58274c(0x2b7));}return _0x2cdcc7;};router[a26_0xa417ab(0x256)](a26_0xa417ab(0x28b),async(_0x590c91,_0x1ab54c)=>{const _0x443a65=a26_0xa417ab,{page:page=0x1,limit:limit=0xa}=_0x590c91['query'],_0x168e14=(page-0x1)*limit;try{const _0x2611e7=getMonitoringData(),_0x5c66c8=_0x2611e7[_0x443a65(0x14e)],_0x52a8bd=Math[_0x443a65(0x1eb)](_0x5c66c8/limit),_0x4a836c=_0x2611e7[_0x443a65(0x1bc)](_0x168e14,_0x168e14+limit);_0x1ab54c[_0x443a65(0x228)](0xc8)[_0x443a65(0x2da)]({'data':_0x4a836c,'page':parseInt(''+page),'totalPages':_0x52a8bd,'total':_0x5c66c8});}catch(_0x26e7ec){console[_0x443a65(0x2a7)](_0x26e7ec),_0x1ab54c[_0x443a65(0x228)](0x1f4)[_0x443a65(0x2da)]({'error':_0x443a65(0x164)});}}),router[a26_0xa417ab(0x25d)](a26_0xa417ab(0x15f),async(_0x5871f6,_0x3e5efb)=>{const _0x44c221=a26_0xa417ab,_0x504ed4=_0x44c221(0x1df);try{fs['writeFileSync'](_0x504ed4,JSON[_0x44c221(0x158)]([],null,0x4)),analyzeConverterFiles(),_0x3e5efb[_0x44c221(0x228)](0xc8)[_0x44c221(0x2da)]({'message':_0x44c221(0x286)});}catch(_0xbb095){console[_0x44c221(0x2a7)](_0xbb095),_0x3e5efb[_0x44c221(0x228)](0x1f4)[_0x44c221(0x2da)]({'error':_0x44c221(0x164)});}}),router[a26_0xa417ab(0x256)](a26_0xa417ab(0x201),async(_0x2adb32,_0x5acd27)=>{const _0x35a47f=a26_0xa417ab,_0x1bf82a=getHotConfig()[_0x35a47f(0x2b1)]['replaceAll']('//','/'),{page:page=0x1,limit:limit=0xa}=_0x2adb32['query'],_0x3be202=(page-0x1)*limit;try{const _0x3e5008=_0x1bf82a+_0x35a47f(0x23f);console[_0x35a47f(0x2a7)](_0x3e5008);const _0x349a28=fs[_0x35a47f(0x1c2)](_0x3e5008,_0x35a47f(0x191)),_0xc8adcf=_0x349a28[_0x35a47f(0x159)]('\x0a'),_0x336d8f=[];_0xc8adcf[_0x35a47f(0x275)](_0x1b399f=>{const _0x1fb460=_0x35a47f,_0x38a3d5=_0x1b399f[_0x1fb460(0x159)](',');if(_0x38a3d5[_0x1fb460(0x14e)]<0x4)return;const _0x390479=_0x38a3d5[0x0],_0x385477=_0x38a3d5[0x1],_0x485bb3=parseFloat(_0x38a3d5[0x2]);_0x336d8f[_0x1fb460(0x1db)]({'file':_0x390479['replaceAll']('\x22',''),'action':_0x385477,'timeSpend':_0x485bb3,'memoryUsage':_0x38a3d5[0x3]});});const _0x2b6b3b=_0x336d8f[_0x35a47f(0x14e)],_0x541d67=Math[_0x35a47f(0x1eb)](_0x2b6b3b/limit),_0x2aba6f=_0x336d8f[_0x35a47f(0x1bc)](_0x3be202,_0x3be202+limit);_0x5acd27[_0x35a47f(0x228)](0xc8)[_0x35a47f(0x2da)]({'data':_0x2aba6f,'page':parseInt(''+page),'totalPages':_0x541d67,'total':_0x2b6b3b});}catch(_0x5b87ba){console[_0x35a47f(0x2a7)](_0x5b87ba),_0x5acd27['status'](0x1f4)['json']({'error':'Error!\x20Something\x20went\x20wrong.'});}}),router[a26_0xa417ab(0x256)](a26_0xa417ab(0x2b3),async(_0x1bfad2,_0x32014e)=>{const _0x3ca5d0=a26_0xa417ab,_0x255d96=path[_0x3ca5d0(0x16c)](path['dirname'](require['main'][_0x3ca5d0(0x23d)]),_0x3ca5d0(0x2e3),_0x3ca5d0(0x22a));try{let _0x4804af=0x0,_0x3c1650=0x0;function _0x2a26fc(_0x49c264){const _0x29de3b=_0x3ca5d0;let _0x50732b=0x0,_0x34ed3f=0x0;if(fs[_0x29de3b(0x2e1)](_0x49c264)){const _0x3b3232=fs[_0x29de3b(0x1b3)](_0x49c264);_0x34ed3f=0x0;for(const _0xc6348 of _0x3b3232){const _0x2e3172=path['join'](_0x49c264,_0xc6348),_0x294b8f=fs[_0x29de3b(0x27b)](_0x2e3172);if(_0x294b8f[_0x29de3b(0x262)]()&&_0xc6348!==_0x29de3b(0x263))_0x34ed3f++,_0x50732b+=_0x294b8f[_0x29de3b(0x1f8)];else{if(_0x294b8f[_0x29de3b(0x1f7)]()){}}}}return{'size':_0x50732b,'count':_0x34ed3f};}const _0x38ed6b=_0x2a26fc(_0x255d96);_0x4804af=_0x38ed6b[_0x3ca5d0(0x1f8)],_0x3c1650=_0x38ed6b[_0x3ca5d0(0x17f)],_0x32014e[_0x3ca5d0(0x2da)]({'fileCount':_0x3c1650,'totalSize':_0x4804af});}catch(_0x8e7aa){console[_0x3ca5d0(0x189)]('Error\x20getting\x20cache\x20stats:',_0x8e7aa),_0x32014e['status'](0x1f4)[_0x3ca5d0(0x2da)]({'error':_0x3ca5d0(0x1e2)});}}),router[a26_0xa417ab(0x25d)](a26_0xa417ab(0x213),async(_0x538224,_0x23b50a)=>{const _0x5eaa3d=a26_0xa417ab,_0x5baa66=path[_0x5eaa3d(0x16c)](path[_0x5eaa3d(0x172)](require['main']['filename']),_0x5eaa3d(0x2e3),_0x5eaa3d(0x22a));try{function _0x3caae6(_0xa11994){const _0x2559d1=_0x5eaa3d;if(fs[_0x2559d1(0x2e1)](_0xa11994)){const _0x331376=fs[_0x2559d1(0x1b3)](_0xa11994);for(const _0x1948cb of _0x331376){const _0x349e0d=path[_0x2559d1(0x16c)](_0xa11994,_0x1948cb),_0x53b102=fs[_0x2559d1(0x27b)](_0x349e0d);if(_0x53b102[_0x2559d1(0x1f7)]()){}else _0x1948cb!==_0x2559d1(0x263)&&fs[_0x2559d1(0x21c)](_0x349e0d);}}}_0x3caae6(_0x5baa66),analyzeConverterFiles(),_0x23b50a[_0x5eaa3d(0x2da)]({'message':_0x5eaa3d(0x1de)});}catch(_0x595305){console['error'](_0x5eaa3d(0x2aa),_0x595305),_0x23b50a[_0x5eaa3d(0x228)](0x1f4)[_0x5eaa3d(0x2da)]({'error':_0x5eaa3d(0x2cc)});}}),router['get'](a26_0xa417ab(0x272),async(_0x52ea51,_0x31c847)=>{const _0x4cf3f0=a26_0xa417ab;_0x31c847['sendFile'](path[_0x4cf3f0(0x16c)](path[_0x4cf3f0(0x172)](require[_0x4cf3f0(0x1f6)][_0x4cf3f0(0x23d)]),_0x4cf3f0(0x254)));}),router[a26_0xa417ab(0x256)]('/cache',protectedRoute,async(_0x504fcb,_0x2060f0)=>{const _0x7fc315=a26_0xa417ab,_0x4f1d8e=fs['readFileSync'](path[_0x7fc315(0x16c)](path[_0x7fc315(0x172)](require[_0x7fc315(0x1f6)][_0x7fc315(0x23d)]),'cadviewer/settings/conversion-cache.html'),_0x7fc315(0x191)),_0x2d6a37=_0x4f1d8e['replaceAll'](_0x7fc315(0x194),_0x504fcb['version']);_0x2060f0[_0x7fc315(0x19a)](_0x2d6a37);}),router[a26_0xa417ab(0x256)](a26_0xa417ab(0x252),async(_0x45e494,_0x227e43)=>{const _0x1e832b=a26_0xa417ab,{page:page=0x1,limit:limit=0x10}=_0x45e494[_0x1e832b(0x2e7)],_0x12ec6b=JSON[_0x1e832b(0x15c)](fs['readFileSync'](path[_0x1e832b(0x16c)](path[_0x1e832b(0x172)](require['main'][_0x1e832b(0x23d)]),_0x1e832b(0x26e)))),_0x166c2c=(page-0x1)*limit,_0x351767=page*limit,_0xd7f49a=_0x12ec6b[_0x1e832b(0x22a)]['length'],_0x5e1a86=Math['ceil'](_0xd7f49a/limit),_0x2782c5=_0x12ec6b[_0x1e832b(0x22a)][_0x1e832b(0x1bc)](_0x166c2c,_0x351767);_0x227e43[_0x1e832b(0x2da)]({'files':_0x2782c5,'pagination':{'total':_0xd7f49a,'totalPages':_0x5e1a86,'currentPage':parseInt(page),'limit':parseInt(limit)}});return;}),router['get'](a26_0xa417ab(0x1b7),async(_0x8ea618,_0x1f77ff)=>{const _0x4c89c2=a26_0xa417ab,{file:_0x4b18a3}=_0x8ea618[_0x4c89c2(0x1a7)],_0x1d9f26=path[_0x4c89c2(0x16c)](path[_0x4c89c2(0x172)](require['main'][_0x4c89c2(0x23d)]),_0x4c89c2(0x2e3),_0x4c89c2(0x22a)),_0x206813=path[_0x4c89c2(0x16c)](_0x1d9f26,_0x4b18a3),_0x35103f=fs[_0x4c89c2(0x1c2)](_0x206813,_0x4c89c2(0x191)),_0x5ee914=_0x35103f[_0x4c89c2(0x159)]('\x0a'),_0x5478ba=_0x5ee914[_0x4c89c2(0x1fc)](_0xd24183=>{const _0xe8595a=_0x4c89c2,_0x5ee5ec=_0xd24183[_0xe8595a(0x159)](',');return _0x5ee5ec[_0xe8595a(0x1fc)](_0x3ac79=>_0x3ac79[_0xe8595a(0x288)]('\x22',''));});_0x1f77ff['json'](_0x5478ba);}),router[a26_0xa417ab(0x256)](a26_0xa417ab(0x15e),async(_0xb698b0,_0x54fcbe)=>{const _0x367b3c=a26_0xa417ab,{id:_0x1c6c63}=_0xb698b0[_0x367b3c(0x1a7)],_0x4c7216=path['join'](path['dirname'](require['main']['filename']),_0x367b3c(0x2e3),'files'),_0x220703=path[_0x367b3c(0x16c)](_0x4c7216,_0x1c6c63);if(_0x220703[_0x367b3c(0x279)](_0x367b3c(0x264))){var _0x7e0db1=require(_0x367b3c(0x1f9));const _0x294f53=fs[_0x367b3c(0x1c2)](_0x220703),_0x64fd68=_0x7e0db1['gunzipSync'](_0x294f53);_0x54fcbe['setHeader'](_0x367b3c(0x23e),_0x367b3c(0x25b)),_0x54fcbe[_0x367b3c(0x19a)](_0x64fd68);}else _0x54fcbe[_0x367b3c(0x289)](_0x220703);}),router['delete'](a26_0xa417ab(0x15e),async(_0x7fbe16,_0x535c6e)=>{const _0x3a9927=a26_0xa417ab,{id:_0x4fae43}=_0x7fbe16[_0x3a9927(0x1a7)],_0x23a430=path['join'](path[_0x3a9927(0x172)](require[_0x3a9927(0x1f6)]['filename']),'converters',_0x3a9927(0x22a)),_0x136316=JSON['parse'](fs[_0x3a9927(0x1c2)](path[_0x3a9927(0x16c)](path[_0x3a9927(0x172)](require[_0x3a9927(0x1f6)]['filename']),_0x3a9927(0x26e)))),_0x3b4713=_0x136316[_0x3a9927(0x22a)][_0x3a9927(0x2b0)](_0x5361d5=>_0x5361d5[_0x3a9927(0x1cf)]===_0x4fae43);if(_0x3b4713){try{fs[_0x3a9927(0x2e1)](path[_0x3a9927(0x16c)](_0x23a430,_0x3b4713[_0x3a9927(0x1cf)]))&&fs['unlinkSync'](path[_0x3a9927(0x16c)](_0x23a430,_0x3b4713[_0x3a9927(0x1cf)]));}catch(_0x18c050){console[_0x3a9927(0x2a7)](_0x3a9927(0x1aa),{'e':_0x18c050});}(_0x3b4713[_0x3a9927(0x1ba)]??[])[_0x3a9927(0x275)](_0x5365f7=>{const _0x349f8f=_0x3a9927;try{fs[_0x349f8f(0x2e1)](path[_0x349f8f(0x16c)](_0x23a430,_0x5365f7['id']))&&fs[_0x349f8f(0x21c)](path[_0x349f8f(0x16c)](_0x23a430,_0x5365f7['id']));}catch(_0x1dcae3){console[_0x349f8f(0x2a7)](_0x349f8f(0x1aa),{'e':_0x1dcae3});}});}analyzeConverterFiles(),_0x535c6e[_0x3a9927(0x2da)]({'message':_0x3a9927(0x22e)});});function a26_0x58d3(_0x331034,_0x125060){const _0x4daa24=a26_0x4daa();return a26_0x58d3=function(_0x58d3e7,_0x328bae){_0x58d3e7=_0x58d3e7-0x14b;let _0x1f529c=_0x4daa24[_0x58d3e7];return _0x1f529c;},a26_0x58d3(_0x331034,_0x125060);}const deleteOldDemoUsers=async()=>{const _0xd75be2=a26_0xa417ab;console[_0xd75be2(0x2a7)]('Deleting\x20old\x20demo_user\x20accounts...');const _0xf6db91=config[_0xd75be2(0x1c9)],_0x5a1a1d='SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)';try{const [_0x212c94]=await conn[_0xd75be2(0x1e7)]()[_0xd75be2(0x173)](_0x5a1a1d,[_0xf6db91]),_0x55e542=_0x212c94[_0xd75be2(0x1fc)](_0x4a7053=>_0x4a7053['folder_name']),_0x587868=_0x212c94[_0xd75be2(0x1fc)](_0x39e5cc=>_0x39e5cc['email']);console[_0xd75be2(0x2a7)](_0x587868),await conn[_0xd75be2(0x1e7)]()[_0xd75be2(0x173)]('DELETE\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)',[_0xf6db91]),_0x55e542['forEach'](_0x128b15=>{const _0x4bf25d=_0xd75be2;try{const _0x1df6f9=_0x4bf25d(0x251)+_0x128b15;cleanCacheForUserFiles(_0x1df6f9),fs[_0x4bf25d(0x1c4)](_0x1df6f9);}catch(_0x2a79c2){console[_0x4bf25d(0x189)](_0x4bf25d(0x2ec),_0x2a79c2);}}),console['log'](_0xd75be2(0x297)+_0x212c94['length']+_0xd75be2(0x1d0)+_0xf6db91+'\x20days\x20have\x20been\x20deleted.');}catch(_0x21a632){console[_0xd75be2(0x189)]('Error\x20deleting\x20old\x20demo_user\x20accounts:',_0x21a632);}};schedule['scheduleJob'](a26_0xa417ab(0x2af),deleteOldDemoUsers),router[a26_0xa417ab(0x256)]('/export-users',protectedRoute,async(_0x400878,_0x468e94)=>{const _0x54cfcd=a26_0xa417ab,_0x48bc56=fs['readFileSync'](path[_0x54cfcd(0x16c)](path[_0x54cfcd(0x172)](require[_0x54cfcd(0x1f6)][_0x54cfcd(0x23d)]),_0x54cfcd(0x206)),_0x54cfcd(0x191)),_0x48d8b4=_0x48bc56[_0x54cfcd(0x288)]('{version}',_0x400878[_0x54cfcd(0x190)]);_0x468e94[_0x54cfcd(0x19a)](_0x48d8b4);});const exportUsersList=async()=>{const _0x230a58=a26_0xa417ab;console[_0x230a58(0x2a7)](_0x230a58(0x19d));const _0x31dfbc=path['join'](path['dirname'](require[_0x230a58(0x1f6)][_0x230a58(0x23d)]),_0x230a58(0x225));!fs[_0x230a58(0x2e1)](_0x31dfbc)&&fs[_0x230a58(0x2eb)](_0x31dfbc);const _0x531bd2=config[_0x230a58(0x208)]||_0x230a58(0x2bc);let _0x2d3870;const _0xb1347d=path[_0x230a58(0x16c)](_0x31dfbc,_0x230a58(0x2d3));if(fs[_0x230a58(0x2e1)](_0xb1347d))try{const _0x2e25dd=JSON[_0x230a58(0x15c)](fs[_0x230a58(0x1c2)](_0xb1347d,_0x230a58(0x191)));_0x2d3870=new Date(_0x2e25dd[_0x230a58(0x198)]);}catch(_0x1bfbba){console[_0x230a58(0x189)](_0x230a58(0x1cc),_0x1bfbba),_0x2d3870=calculateDefaultLastExportDate(_0x531bd2);}else _0x2d3870=calculateDefaultLastExportDate(_0x531bd2);const _0xac5031=new Date(),_0x3ccc6a=_0xac5031[_0x230a58(0x2e9)]()+'-'+String(_0xac5031[_0x230a58(0x188)]()+0x1)[_0x230a58(0x2ee)](0x2,'0')+'-'+String(_0xac5031[_0x230a58(0x1b4)]())[_0x230a58(0x2ee)](0x2,'0'),_0x39c09b=_0x230a58(0x2a3)+_0x3ccc6a+_0x230a58(0x168),_0x1a278d=path[_0x230a58(0x16c)](_0x31dfbc,_0x39c09b);try{const _0x1bebc5='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20email,\x20first_name,\x20last_name,\x20created_at\x20\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20>\x20?\x20\x0a\x20\x20\x20\x20\x20\x20ORDER\x20BY\x20created_at\x20DESC\x0a\x20\x20\x20\x20',[_0x14ac2e]=await conn[_0x230a58(0x1e7)]()[_0x230a58(0x173)](_0x1bebc5,[_0x2d3870]);if(_0x14ac2e[_0x230a58(0x14e)]===0x0){console['log'](_0x230a58(0x230));return;}let _0x14e7a8='email,firstname,lastname\x0a';_0x14ac2e[_0x230a58(0x275)](_0x562f75=>{const _0x417a1d=_0x230a58,_0x3cf7a3=_0x562f75['email']?'\x22'+_0x562f75[_0x417a1d(0x160)][_0x417a1d(0x227)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0xa3fb3=_0x562f75[_0x417a1d(0x17b)]?'\x22'+_0x562f75['first_name'][_0x417a1d(0x227)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0xbc1932=_0x562f75[_0x417a1d(0x20d)]?'\x22'+_0x562f75[_0x417a1d(0x20d)][_0x417a1d(0x227)](/"/g,'\x22\x22')+'\x22':'\x22\x22';_0x14e7a8+=_0x3cf7a3+','+_0xa3fb3+','+_0xbc1932+'\x0a';}),fs[_0x230a58(0x19c)](_0x1a278d,_0x14e7a8),console[_0x230a58(0x2a7)]('Exported\x20'+_0x14ac2e[_0x230a58(0x14e)]+_0x230a58(0x236)+_0x1a278d);const _0x1e7b68={'lastExportDate':_0xac5031[_0x230a58(0x2c1)](),'fileName':_0x39c09b,'userCount':_0x14ac2e['length']};fs[_0x230a58(0x19c)](_0xb1347d,JSON['stringify'](_0x1e7b68,null,0x2));}catch(_0x1a3f01){console[_0x230a58(0x189)]('Error\x20exporting\x20users\x20for\x20Google\x20Ads:',_0x1a3f01);}},calculateDefaultLastExportDate=_0x1f11ab=>{const _0x49c1c8=a26_0xa417ab,_0x353c49=new Date();return _0x1f11ab===_0x49c1c8(0x155)?_0x353c49[_0x49c1c8(0x1a5)](_0x353c49['getDate']()-0xe):_0x353c49[_0x49c1c8(0x183)](_0x353c49[_0x49c1c8(0x188)]()-0x1),_0x353c49;};router[a26_0xa417ab(0x256)]('/users-export/history',async(_0x4c52de,_0x157e20)=>{const _0x1f086b=a26_0xa417ab,_0x2f5981=path[_0x1f086b(0x16c)](path[_0x1f086b(0x172)](require[_0x1f086b(0x1f6)][_0x1f086b(0x23d)]),_0x1f086b(0x225));if(!fs[_0x1f086b(0x2e1)](_0x2f5981))return _0x157e20[_0x1f086b(0x228)](0xc8)[_0x1f086b(0x2da)]({'exports':[]});try{const _0x476a41=fs['readdirSync'](_0x2f5981)[_0x1f086b(0x2ae)](_0x3e5615=>_0x3e5615[_0x1f086b(0x235)](_0x1f086b(0x2a3))&&_0x3e5615['endsWith'](_0x1f086b(0x168)))['map'](_0x82735=>{const _0x227979=_0x1f086b,_0x111065=path['join'](_0x2f5981,_0x82735),_0x39e104=fs['statSync'](_0x111065),_0x295ee4=fs['readFileSync'](_0x111065,_0x227979(0x191)),_0x2b51b6=_0x295ee4['split']('\x0a')[_0x227979(0x14e)]-0x1;return{'fileName':_0x82735,'createdAt':_0x39e104[_0x227979(0x22c)],'userCount':_0x2b51b6};})[_0x1f086b(0x1dc)]((_0x1ccb8d,_0xfbb6bb)=>_0xfbb6bb[_0x1f086b(0x1c7)]-_0x1ccb8d['createdAt']);_0x157e20[_0x1f086b(0x228)](0xc8)['json']({'exports':_0x476a41});}catch(_0x4e06d4){console[_0x1f086b(0x189)](_0x1f086b(0x1c1),_0x4e06d4),_0x157e20['status'](0x1f4)[_0x1f086b(0x2da)]({'error':_0x1f086b(0x1fb)});}}),router[a26_0xa417ab(0x2e0)](a26_0xa417ab(0x152),async(_0x3852d2,_0x499f8d)=>{const _0x27930f=a26_0xa417ab;try{await exportUsersList(),_0x499f8d[_0x27930f(0x228)](0xc8)['json']({'message':_0x27930f(0x211)});}catch(_0x2babd9){console[_0x27930f(0x189)]('Error\x20triggering\x20Users\x20export:',_0x2babd9),_0x499f8d[_0x27930f(0x228)](0x1f4)['json']({'error':_0x27930f(0x1c8)});}}),router[a26_0xa417ab(0x256)]('/users-export/download/:fileName',async(_0x4045fe,_0x412dea)=>{const _0x283bb5=a26_0xa417ab,{fileName:_0x186024}=_0x4045fe[_0x283bb5(0x1a7)],_0x1e95c7=path[_0x283bb5(0x16c)](path['dirname'](require[_0x283bb5(0x1f6)]['filename']),_0x283bb5(0x225),_0x186024);if(!fs[_0x283bb5(0x2e1)](_0x1e95c7))return _0x412dea[_0x283bb5(0x228)](0x194)['json']({'error':'Export\x20file\x20not\x20found'});_0x412dea[_0x283bb5(0x249)](_0x1e95c7);});const cleanCacheForUserFiles=_0x36702c=>{const _0x36e620=a26_0xa417ab;try{if(!fs[_0x36e620(0x2e1)](_0x36702c)){console[_0x36e620(0x2a7)](_0x36e620(0x182)+_0x36702c+_0x36e620(0x1e6));return;}const _0x456e8f=path[_0x36e620(0x16c)](path[_0x36e620(0x172)](require[_0x36e620(0x1f6)][_0x36e620(0x23d)]),_0x36e620(0x2e3),_0x36e620(0x22a));if(!fs[_0x36e620(0x2e1)](_0x456e8f)){console[_0x36e620(0x2a7)](_0x36e620(0x1ce)+_0x456e8f+_0x36e620(0x1e6));return;}const _0x336f07=JSON[_0x36e620(0x15c)](fs[_0x36e620(0x1c2)](path[_0x36e620(0x16c)](path[_0x36e620(0x172)](require[_0x36e620(0x1f6)]['filename']),_0x36e620(0x26e)))),_0x4e6772=fs['readdirSync'](_0x36702c);_0x4e6772[_0x36e620(0x275)](_0x4302da=>{const _0x4f6f50=_0x36e620;_0x336f07[_0x4f6f50(0x22a)][_0x4f6f50(0x275)](_0x60b315=>{const _0x529679=_0x4f6f50;_0x60b315[_0x529679(0x20a)]===_0x4302da&&_0x60b315[_0x529679(0x1ba)][_0x529679(0x275)](_0x3874ca=>{const _0xc759c9=_0x529679;try{fs[_0xc759c9(0x21c)](path[_0xc759c9(0x16c)](_0x456e8f,_0x3874ca['id']));}catch(_0x22989a){console[_0xc759c9(0x189)]('Error\x20deleting\x20cache\x20file\x20'+_0x3874ca['id']+':',_0x22989a);}});});}),analyzeConverterFiles(),console[_0x36e620(0x2a7)](_0x36e620(0x167)+_0x36702c);}catch(_0x39e583){console[_0x36e620(0x189)](_0x36e620(0x1b8),_0x39e583);}};schedule[a26_0xa417ab(0x186)](a26_0xa417ab(0x285),exportUsersList),schedule[a26_0xa417ab(0x186)](a26_0xa417ab(0x2bd),sendFollowUpEmails),schedule[a26_0xa417ab(0x186)](a26_0xa417ab(0x2c8),sendAccountDeletionPreventionEmails);const analyzeConverterFiles=()=>{const _0x3cc473=a26_0xa417ab;try{const _0x127a1c=path[_0x3cc473(0x16c)](path[_0x3cc473(0x172)](require[_0x3cc473(0x1f6)][_0x3cc473(0x23d)]),_0x3cc473(0x2e3),_0x3cc473(0x22a)),_0x4eae67=path[_0x3cc473(0x16c)](path[_0x3cc473(0x172)](require['main']['filename']),'cadviewer',_0x3cc473(0x2e6));if(!fs[_0x3cc473(0x2e1)](_0x127a1c)){logStream['write'](_0x3cc473(0x2c4)+_0x127a1c+_0x3cc473(0x1da));return;}if(!fs[_0x3cc473(0x2e1)](_0x4eae67)){logStream[_0x3cc473(0x293)](_0x3cc473(0x2c4)+_0x4eae67+'\x20n\x27existe\x20pas.');return;}const _0x5879ef=fs[_0x3cc473(0x1b3)](_0x127a1c),_0x5c885b={};_0x5879ef['forEach'](_0x478c85=>{const _0x34d61e=_0x3cc473,_0x20cc1f=path[_0x34d61e(0x16c)](_0x127a1c,_0x478c85),_0x41b5dc=fs['statSync'](_0x20cc1f),_0x538b31=_0x478c85[_0x34d61e(0x159)]('.'),_0x294e1e=_0x538b31[_0x34d61e(0x1bc)](0x0,-0x1)['filter']((_0x58866e,_0x57485b)=>!([_0x34d61e(0x25e),'rl'][_0x34d61e(0x14d)](_0x58866e['toLocaleLowerCase']())&&_0x57485b===_0x538b31[_0x34d61e(0x14e)]-0x2))[_0x34d61e(0x16c)]('.');!Object[_0x34d61e(0x169)](_0x5c885b)[_0x34d61e(0x14d)](_0x294e1e)?_0x5c885b[_0x294e1e]=[{'file':_0x478c85,'stats':_0x41b5dc}]:_0x5c885b[_0x294e1e][_0x34d61e(0x1db)]({'file':_0x478c85,'stats':_0x41b5dc});});const _0x392ad8=[];_0x5879ef[_0x3cc473(0x275)](_0x402bd5=>{const _0x487cc4=_0x3cc473;if(!_0x402bd5[_0x487cc4(0x279)](_0x487cc4(0x28a)))return;let _0x9d1da5=_0x402bd5;const _0x1458e5=path[_0x487cc4(0x16c)](_0x127a1c,_0x402bd5),_0x2c11a9=fs[_0x487cc4(0x27b)](_0x1458e5);let _0x4e09f3=_0x2c11a9[_0x487cc4(0x1f8)],_0x567051='';const _0x2ef61b=fs['readFileSync'](_0x1458e5,_0x487cc4(0x191)),_0xddbc66=JSON[_0x487cc4(0x15c)](_0x2ef61b),_0x4a8828=_0xddbc66[_0x487cc4(0x2a6)]?.['map'](_0x13d60a=>_0x13d60a[_0x487cc4(0x229)])??[];if(_0xddbc66[_0x487cc4(0x23d)])_0x9d1da5=_0xddbc66[_0x487cc4(0x23d)];const _0x4dafe0=_0x402bd5[_0x487cc4(0x159)]('.'),_0x492ab8=_0x4dafe0[_0x487cc4(0x1bc)](0x0,-0x1)['filter']((_0x5f0911,_0x4ee927)=>!([_0x487cc4(0x25e),'rl'][_0x487cc4(0x14d)](_0x5f0911[_0x487cc4(0x267)]())&&_0x4ee927===_0x4dafe0[_0x487cc4(0x14e)]-0x2))[_0x487cc4(0x16c)]('.'),_0xe28ad7=Object[_0x487cc4(0x169)](_0x5c885b)['includes'](_0x492ab8)?_0x5c885b[_0x492ab8]:[];for(const _0x35b9ff of _0x4a8828){Object[_0x487cc4(0x169)](_0x5c885b)[_0x487cc4(0x14d)](_0x35b9ff)&&_0xe28ad7[_0x487cc4(0x1db)](..._0x5c885b[_0x35b9ff]);}const _0x503b64=_0xe28ad7[_0x487cc4(0x1fc)](({file:_0x48d0b4,stats:_0x396555})=>{const _0x51b456=_0x487cc4;return!_0x48d0b4['endsWith'](_0x51b456(0x28a))&&(_0x4e09f3+=_0x396555['size']),{'id':_0x48d0b4,'name':_0x48d0b4[_0x51b456(0x279)](_0x51b456(0x253))?_0x51b456(0x2cf):_0x48d0b4[_0x51b456(0x279)](_0x51b456(0x264))?'SVGZ':_0x48d0b4[_0x51b456(0x279)](_0x51b456(0x15b))?_0x51b456(0x2c3):_0x48d0b4[_0x51b456(0x279)](_0x51b456(0x1fd))?_0x51b456(0x2b9):_0x48d0b4[_0x51b456(0x279)]('.csv')?_0x51b456(0x1d9):_0x48d0b4[_0x51b456(0x279)](_0x51b456(0x1ca))?_0x51b456(0x29b):_0x48d0b4[_0x51b456(0x159)]('.')[_0x51b456(0x29f)]()[_0x51b456(0x2d4)](),'color':_0x48d0b4[_0x51b456(0x279)](_0x51b456(0x253))||_0x48d0b4[_0x51b456(0x279)]('.svgz')?_0x51b456(0x25a):_0x48d0b4[_0x51b456(0x279)]('.pdf')?'red':_0x48d0b4['endsWith']('.json')?_0x51b456(0x268):_0x48d0b4['endsWith'](_0x51b456(0x168))?'green':_0x48d0b4[_0x51b456(0x279)]('.dwg')?'blue':'purple'};});if(_0x503b64[_0x487cc4(0x150)](_0x12d296=>_0x12d296['id'][_0x487cc4(0x14d)](_0x487cc4(0x25f))))_0x567051=_0x487cc4(0x217);else{if(_0x503b64['some'](_0x2e7cf6=>['svg',_0x487cc4(0x1a3)][_0x487cc4(0x14d)](_0x2e7cf6['id'][_0x487cc4(0x159)]('.')['pop']()))&&_0x503b64[_0x487cc4(0x150)](_0x5a83af=>['csv'][_0x487cc4(0x14d)](_0x5a83af['id'][_0x487cc4(0x159)]('.')[_0x487cc4(0x29f)]())))_0x567051=_0x487cc4(0x2a9);else{if(_0x503b64[_0x487cc4(0x150)](_0x46b9c6=>[_0x487cc4(0x278),_0x487cc4(0x1a3)]['includes'](_0x46b9c6['id'][_0x487cc4(0x159)]('.')['pop']())))_0x567051=_0x487cc4(0x1d2);else{if(_0x503b64['some'](_0x4ca950=>[_0x487cc4(0x2da)][_0x487cc4(0x14d)](_0x4ca950['id'][_0x487cc4(0x159)]('.')['pop']()))&&_0x503b64[_0x487cc4(0x150)](_0x46e4f7=>[_0x487cc4(0x25e)]['includes'](_0x46e4f7['id'][_0x487cc4(0x159)]('.')['pop']())))_0x567051='JSON\x20Data\x20Extraction';else{if(_0x503b64[_0x487cc4(0x150)](_0x3e410a=>[_0x487cc4(0x27c)][_0x487cc4(0x14d)](_0x3e410a['id'][_0x487cc4(0x159)]('.')[_0x487cc4(0x29f)]())))_0x567051=_0x487cc4(0x2b8);else{if(_0x503b64[_0x487cc4(0x150)](_0xff7c19=>['json'][_0x487cc4(0x14d)](_0xff7c19['id']['split']('.')['pop']()))&&!_0x503b64[_0x487cc4(0x150)](_0x354e36=>[_0x487cc4(0x25e)][_0x487cc4(0x14d)](_0x354e36['id'][_0x487cc4(0x159)]('.')[_0x487cc4(0x29f)]())))_0x567051=_0x487cc4(0x2ac);else _0x503b64[_0x487cc4(0x150)](_0x22e844=>[_0x487cc4(0x2da)][_0x487cc4(0x14d)](_0x22e844['id'][_0x487cc4(0x159)]('.')['pop']()))&&(_0x567051=_0x487cc4(0x287));}}}}}_0x392ad8[_0x487cc4(0x1db)]({'name':_0x402bd5,'goodFileName':_0x9d1da5,'size':_0x4e09f3,'createdAt':_0x2c11a9[_0x487cc4(0x22c)],'updatedAt':_0x2c11a9['ctime'],'readAt':_0x2c11a9[_0x487cc4(0x14c)],'action':_0x567051,'availableFormats':_0x503b64});}),_0x392ad8[_0x3cc473(0x1dc)]((_0x27b89b,_0xe5e440)=>_0xe5e440[_0x3cc473(0x23a)]-_0x27b89b['updatedAt']);const _0x328b25={'timestamp':new Date(),'totalFiles':_0x392ad8['length'],'files':_0x392ad8},_0x143c17=path[_0x3cc473(0x16c)](_0x4eae67,_0x3cc473(0x283));fs[_0x3cc473(0x19c)](_0x143c17,JSON[_0x3cc473(0x158)](_0x328b25,null,0x2));}catch(_0x4a181d){console[_0x3cc473(0x2a7)]('===================error==================='),console[_0x3cc473(0x2a7)](_0x3cc473(0x280)+_0x4a181d[_0x3cc473(0x259)]);}},scheduleFileAnalysis=()=>{const _0x5cfa69=a26_0xa417ab;analyzeConverterFiles(),schedule[_0x5cfa69(0x186)](_0x5cfa69(0x1a6),analyzeConverterFiles),logStream[_0x5cfa69(0x293)]('Analyse\x20périodique\x20des\x20fichiers\x20du\x20dossier\x20converters/files\x20planifiée\x20(toutes\x20les\x20heures)');};scheduleFileAnalysis(),module[a26_0xa417ab(0x225)]={'router':router,'analyzeConverterFiles':analyzeConverterFiles};
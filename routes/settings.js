function a27_0x5857(_0xe8280e,_0x21351c){const _0x1c5ec3=a27_0x1c5e();return a27_0x5857=function(_0x5857cd,_0x90af6f){_0x5857cd=_0x5857cd-0x197;let _0x23fbdc=_0x1c5ec3[_0x5857cd];return _0x23fbdc;},a27_0x5857(_0xe8280e,_0x21351c);}const a27_0x58e125=a27_0x5857;(function(_0x117d25,_0x180601){const _0x553ae1=a27_0x5857,_0xa8b13e=_0x117d25();while(!![]){try{const _0x4988aa=parseInt(_0x553ae1(0x268))/0x1*(-parseInt(_0x553ae1(0x30f))/0x2)+-parseInt(_0x553ae1(0x2cd))/0x3*(parseInt(_0x553ae1(0x231))/0x4)+-parseInt(_0x553ae1(0x316))/0x5+-parseInt(_0x553ae1(0x1ac))/0x6+-parseInt(_0x553ae1(0x2ff))/0x7+-parseInt(_0x553ae1(0x307))/0x8*(parseInt(_0x553ae1(0x342))/0x9)+parseInt(_0x553ae1(0x340))/0xa;if(_0x4988aa===_0x180601)break;else _0xa8b13e['push'](_0xa8b13e['shift']());}catch(_0x472079){_0xa8b13e['push'](_0xa8b13e['shift']());}}}(a27_0x1c5e,0xe0319));const express=require(a27_0x58e125(0x1fa)),router=express[a27_0x58e125(0x1ed)](),multer=require(a27_0x58e125(0x1f2)),fs=require('fs'),path=require(a27_0x58e125(0x2bb)),getHotConfig=require(a27_0x58e125(0x21c))[a27_0x58e125(0x229)],{exec}=require('child_process'),os=require('os'),conn=require(a27_0x58e125(0x336)),bcrypt=require('bcrypt'),osu=require(a27_0x58e125(0x1e7)),schedule=require(a27_0x58e125(0x28b)),counter=require(a27_0x58e125(0x259)),{randomUUID}=require(a27_0x58e125(0x33b)),logStream=require(a27_0x58e125(0x2f9)),config=require(a27_0x58e125(0x1a1)),basicAuth=require(a27_0x58e125(0x244)),{sendFollowUpEmails,sendAccountDeletionPreventionEmails}=require(a27_0x58e125(0x1cb)),protectedRoute=basicAuth({'users':{[config['settingsUserBasicAuth']]:config[a27_0x58e125(0x223)]},'challenge':!![],'realm':a27_0x58e125(0x2f2)});router[a27_0x58e125(0x308)](a27_0x58e125(0x256),async(_0x1bffd8,_0x3e61ae)=>{const _0x3eee8a=a27_0x58e125;_0x3e61ae[_0x3eee8a(0x242)](path[_0x3eee8a(0x238)](path[_0x3eee8a(0x1d4)](require['main']['filename']),_0x3eee8a(0x32e)));}),router['get'](a27_0x58e125(0x22f),async(_0x3a6c84,_0x25c34b)=>{const _0x99ac3d=a27_0x58e125;_0x25c34b['sendFile'](path[_0x99ac3d(0x238)](path['dirname'](require[_0x99ac3d(0x287)][_0x99ac3d(0x2b7)]),_0x99ac3d(0x24d)));}),router[a27_0x58e125(0x308)](a27_0x58e125(0x1e9),async(_0x3c184e,_0x8fd407)=>{const _0x5524d2=a27_0x58e125;_0x8fd407[_0x5524d2(0x242)](path['join'](path[_0x5524d2(0x1d4)](require[_0x5524d2(0x287)]['filename']),_0x5524d2(0x2c4)));}),router[a27_0x58e125(0x308)](a27_0x58e125(0x217),async(_0x3fb0f2,_0x32a13b)=>{const _0x3f444c=a27_0x58e125;_0x32a13b[_0x3f444c(0x242)](path[_0x3f444c(0x238)](path[_0x3f444c(0x1d4)](require['main'][_0x3f444c(0x2b7)]),'cadviewer/settings/vanilla-toast.css'));}),router[a27_0x58e125(0x308)](a27_0x58e125(0x1d0),async(_0x1a4e42,_0x110dbb)=>{const _0x39cd1a=a27_0x58e125;_0x110dbb[_0x39cd1a(0x242)](path[_0x39cd1a(0x238)](path[_0x39cd1a(0x1d4)](require[_0x39cd1a(0x287)][_0x39cd1a(0x2b7)]),_0x39cd1a(0x2e5)));}),router['get'](a27_0x58e125(0x208),async(_0x132cba,_0x26fcf8)=>{const _0x2c723e=a27_0x58e125;_0x26fcf8[_0x2c723e(0x242)](path[_0x2c723e(0x238)](path[_0x2c723e(0x1d4)](require[_0x2c723e(0x287)]['filename']),_0x2c723e(0x266)));}),router[a27_0x58e125(0x308)]('/',protectedRoute,async(_0x551209,_0x467d50)=>{const _0x2125e8=a27_0x58e125,_0x5deeee=fs[_0x2125e8(0x1da)](path[_0x2125e8(0x238)](path['dirname'](require['main'][_0x2125e8(0x2b7)]),_0x2125e8(0x1bd)),_0x2125e8(0x2f6)),_0x34a25a=_0x5deeee[_0x2125e8(0x224)](_0x2125e8(0x218),_0x551209[_0x2125e8(0x27a)]);_0x467d50[_0x2125e8(0x27f)](_0x34a25a);}),router[a27_0x58e125(0x308)]('/licences',protectedRoute,async(_0x375a2e,_0x31b8e2)=>{const _0x3b9512=a27_0x58e125,_0x2935e2=fs[_0x3b9512(0x1da)](path[_0x3b9512(0x238)](path[_0x3b9512(0x1d4)](require['main']['filename']),_0x3b9512(0x1e3)),_0x3b9512(0x2f6)),_0x297a27=_0x2935e2[_0x3b9512(0x224)]('{version}',_0x375a2e['version']);_0x31b8e2[_0x3b9512(0x27f)](_0x297a27);}),router[a27_0x58e125(0x308)](a27_0x58e125(0x19b),protectedRoute,async(_0x18eab3,_0x3781ff)=>{const _0x2cb3fa=a27_0x58e125,_0x327563=fs[_0x2cb3fa(0x1da)](path[_0x2cb3fa(0x238)](path[_0x2cb3fa(0x1d4)](require[_0x2cb3fa(0x287)][_0x2cb3fa(0x2b7)]),_0x2cb3fa(0x1b6)),_0x2cb3fa(0x2f6)),_0x4f8990=_0x327563[_0x2cb3fa(0x224)](_0x2cb3fa(0x218),_0x18eab3[_0x2cb3fa(0x27a)]);_0x3781ff[_0x2cb3fa(0x27f)](_0x4f8990);}),router['get'](a27_0x58e125(0x320),protectedRoute,async(_0x746cb0,_0x295a91)=>{const _0x26f4fc=a27_0x58e125,_0xc08c3=fs['readFileSync'](path[_0x26f4fc(0x238)](path['dirname'](require[_0x26f4fc(0x287)][_0x26f4fc(0x2b7)]),_0x26f4fc(0x28c)),_0x26f4fc(0x2f6)),_0x470ccc=_0xc08c3['replaceAll'](_0x26f4fc(0x218),_0x746cb0[_0x26f4fc(0x27a)]);_0x295a91['send'](_0x470ccc);}),router[a27_0x58e125(0x2ae)]('/folders',async(_0x30e141,_0x5ca570)=>{const _0x36ded6=a27_0x58e125,_0x2df119=path[_0x36ded6(0x238)](path[_0x36ded6(0x1d4)](require[_0x36ded6(0x287)]['filename']),_0x36ded6(0x30b)),_0x5d1d84=JSON['parse'](fs[_0x36ded6(0x1da)](_0x2df119,_0x36ded6(0x2f6))),_0xfbcb71=_0x5d1d84[_0x36ded6(0x288)];if(!fs[_0x36ded6(0x2c8)](_0xfbcb71))return _0x5ca570['status'](0x194)[_0x36ded6(0x250)]({'message':_0x36ded6(0x2df)});const _0xc299a9=_0x3b1596=>{const _0x25522f=_0x36ded6;let _0x3d3d95=0x0;return _0x3b1596[_0x25522f(0x298)](_0x55c72f=>{const _0x3661e2=_0x25522f;_0x55c72f['isFolder']?_0x3d3d95+=_0xc299a9(_0x55c72f[_0x3661e2(0x2cc)]):_0x3d3d95+=_0x55c72f[_0x3661e2(0x1af)];}),_0x3d3d95;},_0x52545e=_0x2a85f2=>{const _0x2c4fa8=_0x36ded6;if(_0x2a85f2<0x400)return _0x2a85f2+'\x20B';else{if(_0x2a85f2<0x400*0x400)return(_0x2a85f2/0x400)[_0x2c4fa8(0x1f4)](0x2)+_0x2c4fa8(0x2f1);else return _0x2a85f2<0x400*0x400*0x400?(_0x2a85f2/0x400/0x400)['toFixed'](0x2)+_0x2c4fa8(0x2a1):(_0x2a85f2/0x400/0x400/0x400)[_0x2c4fa8(0x1f4)](0x2)+_0x2c4fa8(0x1db);}},_0x45f9d3=(_0x29f4de,_0x146231='')=>{const _0x11e471=_0x36ded6,_0x2bfb3f=fs[_0x11e471(0x289)](_0x29f4de),_0x30021a=[];return _0x2bfb3f[_0x11e471(0x298)](_0x23748d=>{const _0x36e19f=_0x11e471,_0x37726d=path[_0x36e19f(0x238)](_0x29f4de,_0x23748d)[_0x36e19f(0x224)]('\x5c','/'),_0x7c21b9=fs[_0x36e19f(0x2d3)](_0x37726d);if(_0x7c21b9['isDirectory']()){const _0x52d513=_0x45f9d3(_0x37726d,_0x146231+_0x36e19f(0x290));_0x30021a[_0x36e19f(0x1c3)]({'name':_0x23748d,'size':_0x7c21b9[_0x36e19f(0x1af)],'path':_0x37726d,'permissions':_0x7c21b9[_0x36e19f(0x280)],'isFolder':!![],'sub_dirs':_0x52d513});}else _0x30021a[_0x36e19f(0x1c3)]({'name':_0x23748d,'size':_0x7c21b9['size'],'path':_0x37726d,'permissions':_0x7c21b9[_0x36e19f(0x280)],'isFolder':![]});}),_0x30021a;};let _0x4483ad=_0x45f9d3(_0xfbcb71);const _0x3306f3=_0x2abb8b=>{return _0x2abb8b['forEach'](_0x3d5ee4=>{const _0x232b3e=a27_0x5857;_0x3d5ee4['isFolder']?(_0x3d5ee4[_0x232b3e(0x257)]=_0x52545e(_0xc299a9(_0x3d5ee4['sub_dirs'])),_0x3d5ee4[_0x232b3e(0x2cc)]=_0x3306f3(_0x3d5ee4[_0x232b3e(0x2cc)])):_0x3d5ee4[_0x232b3e(0x257)]=_0x52545e(_0x3d5ee4[_0x232b3e(0x1af)]);}),_0x2abb8b;};_0x5ca570[_0x36ded6(0x1b7)](0xc8)[_0x36ded6(0x250)](_0x3306f3(_0x4483ad));}),router[a27_0x58e125(0x2ae)](a27_0x58e125(0x1fe),async(_0x3db698,_0x10c5da)=>{const _0x44ccb3=a27_0x58e125,{path:_0x200a30}=_0x3db698[_0x44ccb3(0x25a)],_0x4e1a4b=_0x200a30[_0x44ccb3(0x1ae)]('/')[_0x44ccb3(0x240)]();if(!fs['existsSync'](_0x200a30))return _0x10c5da['status'](0x194)[_0x44ccb3(0x250)]({'message':_0x44ccb3(0x281)});_0x10c5da[_0x44ccb3(0x31c)](_0x44ccb3(0x318),_0x44ccb3(0x258)),_0x10c5da[_0x44ccb3(0x31c)](_0x44ccb3(0x260),_0x44ccb3(0x21a)+_0x4e1a4b+'\x22'),_0x10c5da['download'](_0x200a30,_0x570a3f=>{const _0x3d5e5d=_0x44ccb3;_0x570a3f&&_0x10c5da[_0x3d5e5d(0x1b7)](0x1f4)[_0x3d5e5d(0x250)]({'message':_0x3d5e5d(0x2c3)});});}),router['post']('/folders/create',async(_0x3cd152,_0xa9d949)=>{const _0x66b39c=a27_0x58e125,_0x7fdf06=_0x3cd152['body'],_0x3309c9=getHotConfig()[_0x66b39c(0x288)],_0x6a3588=path['join'](_0x3309c9,_0x7fdf06[_0x66b39c(0x2bb)]);if(!fs[_0x66b39c(0x2c8)](_0x6a3588))return _0xa9d949['status'](0x194)[_0x66b39c(0x250)]({'message':'Folder\x20not\x20found.'});if(fs[_0x66b39c(0x2c8)](path[_0x66b39c(0x238)](_0x6a3588,_0x7fdf06[_0x66b39c(0x27b)])))return _0xa9d949['status'](0x199)['json']({'message':_0x66b39c(0x20e)});fs[_0x66b39c(0x270)](path[_0x66b39c(0x238)](_0x6a3588,_0x7fdf06[_0x66b39c(0x27b)]),_0x57fa76=>{const _0x5519e7=_0x66b39c;_0x57fa76&&_0xa9d949[_0x5519e7(0x1b7)](0x1f4)[_0x5519e7(0x250)]({'message':_0x5519e7(0x29b)}),_0xa9d949[_0x5519e7(0x1b7)](0xc8)[_0x5519e7(0x250)]({'message':_0x5519e7(0x1c7)});});}),router['put'](a27_0x58e125(0x1bf),async(_0xf636eb,_0x33741e)=>{const _0x2d838f=a27_0x58e125,{newName:_0x1c4b5d,isFolder:_0x18290b,path:_0x1a2972}=_0xf636eb[_0x2d838f(0x25a)];if(!fs[_0x2d838f(0x2c8)](_0x1a2972))return _0x33741e[_0x2d838f(0x1b7)](0x194)['json']({'message':_0x18290b?_0x2d838f(0x335):_0x2d838f(0x281)});const _0x8a1b7a=_0x1a2972[_0x2d838f(0x215)](_0x1a2972['split']('/')['pop'](),_0x1c4b5d),_0x2a633d=fs[_0x2d838f(0x2d3)](_0x1a2972);_0x2a633d['isDirectory']()?fs[_0x2d838f(0x2c0)](_0x1a2972,_0x8a1b7a):(fs[_0x2d838f(0x2b1)](_0x1a2972,_0x8a1b7a),fs['unlinkSync'](_0x1a2972)),_0x33741e[_0x2d838f(0x1b7)](0xc8)[_0x2d838f(0x250)]({'message':_0x18290b?_0x2d838f(0x219):_0x2d838f(0x272)});}),router['delete'](a27_0x58e125(0x328),async(_0x3397b8,_0x53d40e)=>{const _0x559d57=a27_0x58e125,{path:_0x236f0f}=_0x3397b8[_0x559d57(0x25a)];if(!fs[_0x559d57(0x2c8)](_0x236f0f))return _0x53d40e[_0x559d57(0x1b7)](0x194)[_0x559d57(0x250)]({'message':'File\x20or\x20Folder\x20not\x20found'});const _0x215afc=fs[_0x559d57(0x2d3)](_0x236f0f);if(_0x215afc[_0x559d57(0x293)]())fs[_0x559d57(0x284)](_0x236f0f,_0x188493=>{const _0xb161f8=_0x559d57;_0x188493&&_0x53d40e[_0xb161f8(0x1b7)](0x1f4)[_0xb161f8(0x250)]({'message':'Error\x20deleting\x20file.'}),_0x53d40e['status'](0xc8)[_0xb161f8(0x250)]({'message':'File\x20deleted.'});});else _0x215afc['isDirectory']()&&fs['rmdir'](_0x236f0f,{'recursive':!![]},_0x2feddc=>{const _0x253e56=_0x559d57;_0x2feddc&&_0x53d40e[_0x253e56(0x1b7)](0x1f4)['json']({'message':_0x253e56(0x1e8)}),_0x53d40e['status'](0xc8)[_0x253e56(0x250)]({'message':_0x253e56(0x1dd)});});});!fs[a27_0x58e125(0x2c8)](a27_0x58e125(0x282))&&fs[a27_0x58e125(0x23e)](a27_0x58e125(0x282));const storage=multer[a27_0x58e125(0x1a2)]({'destination':(_0x174a7c,_0x4d1cc3,_0x1b34b1)=>{const _0x3f077c=a27_0x58e125;_0x1b34b1(null,_0x3f077c(0x314));},'filename':(_0x382d15,_0x25561b,_0x42fa34)=>{const _0x461102=a27_0x58e125;_0x42fa34(null,Date[_0x461102(0x243)]()+path[_0x461102(0x2fe)](_0x25561b[_0x461102(0x333)]));}}),upload=multer({'storage':storage,'limits':{'fileSize':getHotConfig()[a27_0x58e125(0x2fc)]?getHotConfig()['maxUploadFileSize']*0x400*0x400:0x32*0x400*0x400}});router[a27_0x58e125(0x2ae)](a27_0x58e125(0x2fd),upload[a27_0x58e125(0x197)]('files'),async(_0x4a9fa2,_0x126f58)=>{const _0x302986=a27_0x58e125,_0x1e25a6=_0x4a9fa2[_0x302986(0x25a)];if(!_0x4a9fa2[_0x302986(0x324)]||_0x4a9fa2['files'][_0x302986(0x2da)]===0x0)return _0x126f58['status'](0x190)[_0x302986(0x250)]({'message':'No\x20files\x20uploaded'});const _0x1c80f0=getHotConfig()['folderLocation'],_0x241d1b=path[_0x302986(0x238)](_0x1c80f0,_0x1e25a6[_0x302986(0x2bb)]);if(!fs[_0x302986(0x2c8)](_0x241d1b))return _0x126f58[_0x302986(0x1b7)](0x194)[_0x302986(0x250)]({'message':_0x302986(0x2f3)});const _0x3ba22e=_0x4a9fa2['files'][_0x302986(0x2ca)](_0x327c85=>({'originalname':_0x327c85['originalname'],'filename':_0x327c85[_0x302986(0x2b7)],'mimetype':_0x327c85['mimetype'],'size':_0x327c85[_0x302986(0x1af)]}));_0x3ba22e[_0x302986(0x298)](_0x3f0797=>{const _0x3cd08a=_0x302986;fs[_0x3cd08a(0x2b1)](path[_0x3cd08a(0x238)](_0x3cd08a(0x314),_0x3f0797[_0x3cd08a(0x2b7)]),path['join'](_0x241d1b,_0x3f0797[_0x3cd08a(0x333)])),fs[_0x3cd08a(0x1ee)](path[_0x3cd08a(0x238)](_0x3cd08a(0x314),_0x3f0797['filename']));}),_0x126f58[_0x302986(0x1b7)](0xc8)[_0x302986(0x250)]({'message':_0x302986(0x1e6),'files':_0x3ba22e});}),router[a27_0x58e125(0x1b8)]('/config/global-update',async(_0x2cd0cd,_0x366ba2)=>{const _0x223dc0=a27_0x58e125,_0x4d5677=path['join'](path['dirname'](require[_0x223dc0(0x287)][_0x223dc0(0x2b7)]),_0x223dc0(0x30b)),{config:_0x41fc9b}=_0x2cd0cd[_0x223dc0(0x25a)];if(!_0x41fc9b)return _0x366ba2[_0x223dc0(0x1b7)](0x190)['json']({'message':_0x223dc0(0x2ba)});try{fs['writeFileSync'](_0x4d5677,JSON[_0x223dc0(0x2bf)](_0x41fc9b,null,0x4)),_0x366ba2['status'](0xc8)['json']({'message':_0x223dc0(0x22e)});}catch(_0x1991c0){_0x366ba2[_0x223dc0(0x1b7)](0x1f4)[_0x223dc0(0x250)]({'message':'Error\x20updating\x20config'});}}),router[a27_0x58e125(0x1b8)](a27_0x58e125(0x2dd),async(_0x21ad0e,_0x732184)=>{const _0x481d6b=a27_0x58e125,{key:_0x1b2f23,value:_0x431fcd}=_0x21ad0e[_0x481d6b(0x25a)],_0x2bc2ba=path[_0x481d6b(0x238)](path[_0x481d6b(0x1d4)](require['main'][_0x481d6b(0x2b7)]),_0x481d6b(0x30b));fs['readFile'](_0x2bc2ba,_0x481d6b(0x2f6),function(_0x31ce0c,_0xa6cc1f){const _0x291f0e=_0x481d6b;_0x31ce0c&&_0x732184[_0x291f0e(0x1b7)](0x1f4)[_0x291f0e(0x27f)](_0x31ce0c);const _0x4621d6=JSON[_0x291f0e(0x2ad)](_0xa6cc1f);_0x4621d6[_0x1b2f23]=_0x431fcd;if(_0x1b2f23===_0x291f0e(0x33f)){let _0x5dd325='';if(_0x4621d6['autodetect_platform']){_0x5dd325=os[_0x291f0e(0x237)]();if(_0x5dd325==='win32')_0x5dd325='windows';else{if(_0x5dd325===_0x291f0e(0x2c9))_0x5dd325='linux';}}else _0x5dd325=_0x4621d6['platform'];if(_0x5dd325==='windows'){_0x4621d6['ServerLocation']=path[_0x291f0e(0x1ec)](__dirname,'..')+'/';const _0x2a2421=/\\/g;_0x4621d6[_0x291f0e(0x1b3)]=_0x4621d6[_0x291f0e(0x1b3)]['replace'](_0x2a2421,'/');}else _0x4621d6['ServerLocation']=path[_0x291f0e(0x1ec)](__dirname,'..')+'/';}if(_0x1b2f23===_0x291f0e(0x2f4)){let _0x58f80c=os[_0x291f0e(0x237)]();if(_0x58f80c==='win32')_0x58f80c=_0x291f0e(0x2c6);else _0x58f80c=_0x291f0e(0x339);_0x58f80c==='windows'?_0x431fcd===!![]&&(_0x4621d6['autoxchange_executable']=_0x4621d6['autoxchange_executable_windows'],_0x4621d6[_0x291f0e(0x19a)]=_0x4621d6[_0x291f0e(0x2d9)],_0x4621d6[_0x291f0e(0x230)]=_0x4621d6[_0x291f0e(0x26f)]):_0x431fcd===!![]&&(_0x4621d6[_0x291f0e(0x249)]=_0x4621d6[_0x291f0e(0x338)],_0x4621d6[_0x291f0e(0x19a)]=_0x4621d6[_0x291f0e(0x310)],_0x4621d6[_0x291f0e(0x230)]=_0x4621d6[_0x291f0e(0x2d1)]),_0x4621d6[_0x291f0e(0x237)]=_0x58f80c;}if(_0x4621d6[_0x291f0e(0x2f4)]){let _0x31455f=os[_0x291f0e(0x237)]();if(_0x31455f===_0x291f0e(0x297))_0x31455f=_0x291f0e(0x2c6);else _0x31455f=_0x291f0e(0x339);if(_0x31455f===_0x291f0e(0x2c6)){if(_0x1b2f23===_0x291f0e(0x2db))_0x4621d6[_0x291f0e(0x249)]=_0x431fcd;else{if(_0x1b2f23===_0x291f0e(0x2d9))_0x4621d6[_0x291f0e(0x19a)]=_0x431fcd;else _0x1b2f23==='linklist_executable_windows'&&(_0x4621d6[_0x291f0e(0x230)]=_0x431fcd);}}else{if(_0x1b2f23==='autoxchange_executable_linux')_0x4621d6[_0x291f0e(0x249)]=_0x431fcd;else{if(_0x1b2f23===_0x291f0e(0x310))_0x4621d6[_0x291f0e(0x19a)]=_0x431fcd;else _0x1b2f23==='linklist_executable_linux'&&(_0x4621d6[_0x291f0e(0x230)]=_0x431fcd);}}}fs[_0x291f0e(0x26e)](_0x2bc2ba,JSON['stringify'](_0x4621d6,null,0x4),function(_0x4b7918){const _0x514101=_0x291f0e;_0x4b7918&&_0x732184[_0x514101(0x1b7)](0x1f4)[_0x514101(0x27f)](_0x4b7918),_0x732184[_0x514101(0x1b7)](0xc8)[_0x514101(0x250)]({'message':_0x514101(0x236)});});});}),router[a27_0x58e125(0x2ae)](a27_0x58e125(0x202),async(_0x28d60e,_0x321be9)=>{const _0x61153b=a27_0x58e125,_0xfc4b55=getHotConfig(),_0x58fa8c=(_0xfc4b55[_0x61153b(0x344)]['includes'](_0xfc4b55[_0x61153b(0x1b3)])?'':_0xfc4b55[_0x61153b(0x1b3)])+_0xfc4b55['dwgmergeLocation'],_0x21464c=(_0xfc4b55[_0x61153b(0x344)][_0x61153b(0x261)](_0xfc4b55[_0x61153b(0x1b3)])?'':_0xfc4b55[_0x61153b(0x1b3)])+_0xfc4b55[_0x61153b(0x201)],_0x1fc43c=(_0xfc4b55['converterLocation'][_0x61153b(0x261)](_0xfc4b55[_0x61153b(0x1b3)])?'':_0xfc4b55[_0x61153b(0x1b3)])+_0xfc4b55[_0x61153b(0x1ba)],_0x2143e2=/ax202.*\.exe/,_0x4fe615=/ax202.*/,_0x5b6aff=/dwgmerge202.*\.exe/,_0x17d688=/dwgmerge_202.*/,_0xdfba7d=/linklist_202.*\.exe/,_0x1fb10f=/linklist_202.*/,_0x1792eb=[],_0x2f5e57=[],_0x2081e6=[],_0xf5878b=[],_0x35d196=[],_0xd3e10e=[];let _0x573938='';if(_0xfc4b55[_0x61153b(0x2f4)]){_0x573938=os['platform']();if(_0x573938===_0x61153b(0x297))_0x573938=_0x61153b(0x2c6);else{if(_0x573938===_0x61153b(0x2c9))_0x573938=_0x61153b(0x339);}}else _0x573938=_0xfc4b55[_0x61153b(0x237)];fs[_0x61153b(0x289)](_0x1fc43c[_0x61153b(0x224)](_0x61153b(0x339),'windows'))[_0x61153b(0x298)](_0xb957b6=>{const _0x1d382a=_0x61153b;if(_0x2143e2[_0x1d382a(0x1f1)](_0xb957b6[_0x1d382a(0x271)]()))_0x1792eb['push'](_0xb957b6);}),fs[_0x61153b(0x289)](_0x58fa8c[_0x61153b(0x224)]('linux','windows'))[_0x61153b(0x298)](_0x234081=>{const _0x290358=_0x61153b;if(_0x5b6aff[_0x290358(0x1f1)](_0x234081[_0x290358(0x271)]()))_0x2f5e57[_0x290358(0x1c3)](_0x234081);}),fs[_0x61153b(0x289)](_0x21464c[_0x61153b(0x224)](_0x61153b(0x339),_0x61153b(0x2c6)))[_0x61153b(0x298)](_0x2919aa=>{const _0x1b6587=_0x61153b;if(_0xdfba7d[_0x1b6587(0x1f1)](_0x2919aa[_0x1b6587(0x271)]()))_0x2081e6[_0x1b6587(0x1c3)](_0x2919aa);}),fs[_0x61153b(0x289)](_0x1fc43c[_0x61153b(0x224)](_0x61153b(0x2c6),_0x61153b(0x339)))[_0x61153b(0x298)](_0x4641f9=>{const _0x5e67e0=_0x61153b;if(_0x4fe615[_0x5e67e0(0x1f1)](_0x4641f9[_0x5e67e0(0x271)]()))_0xf5878b['push'](_0x4641f9);}),fs[_0x61153b(0x289)](_0x58fa8c['replaceAll']('windows',_0x61153b(0x339)))[_0x61153b(0x298)](_0x2fec80=>{const _0x244928=_0x61153b;if(_0x17d688['test'](_0x2fec80[_0x244928(0x271)]()))_0x35d196[_0x244928(0x1c3)](_0x2fec80);}),fs[_0x61153b(0x289)](_0x21464c[_0x61153b(0x224)](_0x61153b(0x2c6),_0x61153b(0x339)))[_0x61153b(0x298)](_0x557f34=>{const _0x401afc=_0x61153b;if(_0x1fb10f[_0x401afc(0x1f1)](_0x557f34[_0x401afc(0x271)]()))_0xd3e10e[_0x401afc(0x1c3)](_0x557f34);});const _0x1bd65b=['ServerPort',_0x61153b(0x2b3),_0x61153b(0x2d7),_0x61153b(0x2a4),'fontLocation'],_0x3f76f9=[_0x61153b(0x2a8),_0x61153b(0x248),_0x61153b(0x1ba),_0x61153b(0x22d),_0x61153b(0x1ca),_0x61153b(0x322),_0x61153b(0x2a5),_0x61153b(0x344),_0x61153b(0x201),'version'],_0x5d4996=[_0x61153b(0x226),_0x61153b(0x299),'mysqlUsername','mysqlPassword',_0x61153b(0x1b2),_0x61153b(0x253),_0x61153b(0x1d5)],_0x50dd83={'ServerUrl':_0x61153b(0x343),'autoxchange_executable':_0x61153b(0x33c),'linklist_executable':_0x61153b(0x28e),'dwgmerge_executable':'DwgMerge\x20Settings','setup_mysqlHost':_0x61153b(0x1f5),'callbackMethod_gatewayUrl_flag':_0x61153b(0x29e),'userFolderMaximumFiles':_0x61153b(0x31f),'smtpHost':_0x61153b(0x2ef)},_0x97c470={'https':'boolean','ServerFrontEndUrlAsAllowedOriginOnly':_0x61153b(0x1bb),'autodetect_platform':_0x61153b(0x1bb),'cvjs_svgz_compress':_0x61153b(0x1bb),'cached_conversion':_0x61153b(0x1bb),'remainOnServer':_0x61153b(0x1bb),'cvjs_debug':_0x61153b(0x1bb),'autodetect_location':'boolean','platform':_0x61153b(0x1df),'autoxchange_executable':_0x61153b(0x2e2)+(_0x573938===_0x61153b(0x2c6)?_0x1792eb[_0x61153b(0x238)](','):_0xf5878b[_0x61153b(0x238)](',')),'autoxchange_executable_windows':'radio|'+_0x1792eb['join'](','),'autoxchange_executable_linux':_0x61153b(0x2e2)+_0xf5878b['join'](','),'dwgmerge_executable':'radio|'+(_0x573938===_0x61153b(0x2c6)?_0x2f5e57['join'](','):_0x35d196[_0x61153b(0x238)](',')),'dwgmerge_executable_windows':_0x61153b(0x2e2)+_0x2f5e57['join'](','),'dwgmerge_executable_linux':'radio|'+_0x35d196[_0x61153b(0x238)](','),'linklist_executable':'radio|'+(_0x573938===_0x61153b(0x2c6)?_0x2081e6['join'](','):_0xd3e10e[_0x61153b(0x238)](',')),'linklist_executable_windows':_0x61153b(0x2e2)+_0x2081e6[_0x61153b(0x238)](','),'linklist_executable_linux':_0x61153b(0x2e2)+_0xd3e10e['join'](','),'callbackMethod_gatewayUrl_flag':_0x61153b(0x1bb),'setup_mysqlHost':_0x61153b(0x1bb),'ContentSecurityPolicyReportOnly':_0x61153b(0x1bb),'fileLoad_PasswordAuthentication':_0x61153b(0x1bb),'contentLocationCheck':_0x61153b(0x1bb),'globalBearerAutentication':'boolean','bcryptSaltRounds':_0x61153b(0x2a6),'userFolderMaximumFiles':_0x61153b(0x2a6),'userFolderMaximumSizeInMB':_0x61153b(0x2a6),'recaptchaEnabled':_0x61153b(0x1bb),'usersExportFrequency':_0x61153b(0x200),'enableEmailVerification':_0x61153b(0x1bb),'demoUserRetentionDaysAlertBeforeDeletion':_0x61153b(0x2a6),'demoUserRetentionDays':'number'},_0x38ec82={},_0x22783d=Object['keys'](_0xfc4b55);_0xfc4b55[_0x61153b(0x2f4)]&&_0x1bd65b[_0x61153b(0x1c3)](_0x61153b(0x237)),_0xfc4b55[_0x61153b(0x33f)]&&(_0x3f76f9['push']('ServerLocation'),_0x3f76f9['push'](_0x61153b(0x249)),_0x3f76f9[_0x61153b(0x1c3)](_0x61153b(0x19a)),_0x3f76f9['push'](_0x61153b(0x230))),!_0xfc4b55['callbackMethod_gatewayUrl_flag']&&_0x3f76f9['push'](_0x61153b(0x30c)),!_0xfc4b55['setup_mysqlHost']&&(_0x3f76f9[_0x61153b(0x1c3)](_0x61153b(0x299)),_0x3f76f9[_0x61153b(0x1c3)]('mysqlUsername'),_0x3f76f9[_0x61153b(0x1c3)](_0x61153b(0x2d5)),_0x3f76f9[_0x61153b(0x1c3)](_0x61153b(0x1b2))),!_0xfc4b55[_0x61153b(0x24b)]&&_0x3f76f9[_0x61153b(0x1c3)](_0x61153b(0x2e1)),!_0xfc4b55[_0x61153b(0x1a5)]&&(_0x3f76f9[_0x61153b(0x1c3)](_0x61153b(0x1c8)),_0x3f76f9[_0x61153b(0x1c3)](_0x61153b(0x323))),!_0xfc4b55[_0x61153b(0x1f0)]&&_0x3f76f9[_0x61153b(0x1c3)](_0x61153b(0x2c2)),_0x22783d[_0x61153b(0x298)](_0xe60939=>{const _0x1254ea=_0x61153b;!_0x1bd65b[_0x1254ea(0x261)](_0xe60939)&&(_0x38ec82[_0xe60939]=_0xfc4b55[_0xe60939]);}),_0x38ec82[_0x61153b(0x248)]=''+_0xfc4b55[_0x61153b(0x226)]+_0xfc4b55[_0x61153b(0x2a8)],_0x321be9['status'](0xc8)[_0x61153b(0x250)]({'notEditableFields':_0x3f76f9,'customFieldTypes':_0x97c470,'notHotEditableFields':_0x5d4996,'config':_0x38ec82,'fieldsTitle':_0x50dd83,'configData':_0xfc4b55});}),router[a27_0x58e125(0x308)]('/logs',protectedRoute,async(_0x1c4f91,_0x4bcbb5)=>{const _0x3e358d=a27_0x58e125,_0x305f1f=fs[_0x3e358d(0x1da)](path[_0x3e358d(0x238)](path[_0x3e358d(0x1d4)](require[_0x3e358d(0x287)][_0x3e358d(0x2b7)]),'cadviewer/settings/logs.html'),_0x3e358d(0x2f6)),_0x27e7b6=_0x305f1f[_0x3e358d(0x224)](_0x3e358d(0x218),_0x1c4f91[_0x3e358d(0x27a)]);_0x4bcbb5[_0x3e358d(0x27f)](_0x27e7b6);});function findMatchingLogFiles(_0x1cd25e,_0x5b4666=/^call-Api_Conversion_\d{1,2}_\d{1,2}_\d{4}\.log$/){const _0x5724a6=a27_0x58e125;try{const _0x58910e=fs['readdirSync'](_0x1cd25e);return _0x58910e[_0x5724a6(0x1cf)](_0x43e3c5=>_0x5b4666[_0x5724a6(0x1f1)](_0x43e3c5))[_0x5724a6(0x2ca)](_0x58b985=>_0x58b985[_0x5724a6(0x224)](_0x5724a6(0x1b1),'')[_0x5724a6(0x224)](_0x5724a6(0x1a0),''));}catch(_0x1509b3){return console[_0x5724a6(0x2f5)](_0x5724a6(0x1a7),_0x1509b3),[];}}router['post'](a27_0x58e125(0x198),async(_0x3bc24d,_0x6fd174)=>{const _0x536eb6=a27_0x58e125,_0x2d80b5=new Date(),_0x20e936=_0x2d80b5[_0x536eb6(0x22a)]()['toString']()['padStart'](0x2,'0')+'_'+(_0x2d80b5[_0x536eb6(0x1e4)]()+0x1)['toString']()[_0x536eb6(0x2ec)](0x2,'0')+'_'+_0x2d80b5[_0x536eb6(0x27c)](),{displayDay:_0x1ad9eb}=_0x3bc24d['body'],_0x571648=path[_0x536eb6(0x238)](path[_0x536eb6(0x1d4)](require[_0x536eb6(0x287)][_0x536eb6(0x2b7)]),_0x536eb6(0x33a),_0x536eb6(0x1b1)+(_0x1ad9eb??_0x20e936)+_0x536eb6(0x1a0));fs['existsSync'](_0x571648)?fs[_0x536eb6(0x26d)](_0x571648,_0x536eb6(0x2f6),function(_0x6585e3,_0x524742){const _0x76282d=_0x536eb6;_0x6585e3&&_0x6fd174[_0x76282d(0x1b7)](0x1f4)['send'](_0x6585e3),_0x6fd174[_0x76282d(0x1b7)](0xc8)[_0x76282d(0x250)]({'content':_0x524742,'days':findMatchingLogFiles(path[_0x76282d(0x238)](path[_0x76282d(0x1d4)](require[_0x76282d(0x287)][_0x76282d(0x2b7)]),'logs'))});}):_0x6fd174[_0x536eb6(0x1b7)](0xc8)['json']({'content':'','days':findMatchingLogFiles(path['join'](path[_0x536eb6(0x1d4)](require[_0x536eb6(0x287)][_0x536eb6(0x2b7)]),'logs'))});}),router[a27_0x58e125(0x251)](a27_0x58e125(0x2ee),async(_0x22d9aa,_0x5d9745)=>{const _0x353b31=a27_0x58e125,_0x1ba3d6=new Date(),_0x4339e3=_0x1ba3d6['getDate']()['toString']()[_0x353b31(0x2ec)](0x2,'0')+'_'+(_0x1ba3d6[_0x353b31(0x1e4)]()+0x1)[_0x353b31(0x32a)]()[_0x353b31(0x2ec)](0x2,'0')+'_'+_0x1ba3d6[_0x353b31(0x27c)](),_0x3f6eb9=findMatchingLogFiles(path[_0x353b31(0x238)](path[_0x353b31(0x1d4)](require[_0x353b31(0x287)][_0x353b31(0x2b7)]),_0x353b31(0x33a)));_0x3f6eb9['forEach'](_0x18fe60=>{const _0x555341=_0x353b31;if(_0x18fe60!==_0x4339e3)fs[_0x555341(0x1ee)](path[_0x555341(0x238)](path['dirname'](require[_0x555341(0x287)]['filename']),_0x555341(0x33a),_0x555341(0x1b1)+_0x18fe60+_0x555341(0x1a0)));}),logStream[_0x353b31(0x31d)](),_0x5d9745[_0x353b31(0x1b7)](0xc8)[_0x353b31(0x250)]({'message':_0x353b31(0x2a0)});}),router[a27_0x58e125(0x308)](a27_0x58e125(0x204),protectedRoute,async(_0x24093d,_0x11acd4)=>{const _0x35a536=a27_0x58e125,_0x4d95d7=path[_0x35a536(0x238)](path[_0x35a536(0x1d4)](require[_0x35a536(0x287)]['filename']),_0x35a536(0x319));if(!fs['existsSync'](_0x4d95d7)){const _0x76ed48={'jsonDataExtraction':{'standard':[{'paramName':'json','paramValue':''},{'paramName':_0x35a536(0x22b),'paramValue':''}]},'dwgToSvg':{'standard':[{'paramName':'f','paramValue':_0x35a536(0x1dc)},{'paramName':'model','paramValue':''},{'paramName':_0x35a536(0x21d),'paramValue':''}]},'dwgToPdf':{'standard':[{'paramName':'f','paramValue':_0x35a536(0x1a6)},{'paramName':_0x35a536(0x274),'paramValue':''}]},'displayDwg':{'standard':[{'paramName':'f','paramValue':'svg'},{'paramName':_0x35a536(0x274),'paramValue':''},{'paramName':_0x35a536(0x21d),'paramValue':''}]},'dwgToMultiple':{'standard':[{'paramName':_0x35a536(0x25e),'paramValue':''}]}};fs[_0x35a536(0x1e5)](_0x4d95d7,JSON[_0x35a536(0x2bf)](_0x76ed48,null,0x4));}const _0x31a656=fs[_0x35a536(0x1da)](path['join'](path[_0x35a536(0x1d4)](require[_0x35a536(0x287)]['filename']),_0x35a536(0x1de)),_0x35a536(0x2f6)),_0x2966bb=_0x31a656[_0x35a536(0x224)](_0x35a536(0x218),_0x24093d[_0x35a536(0x27a)]);_0x11acd4[_0x35a536(0x27f)](_0x2966bb);}),router['post'](a27_0x58e125(0x20f),async(_0x5eb7c3,_0x596d3b)=>{const _0x292306=a27_0x58e125,{actionName:_0x289b1f,contentLocation:_0x264dff}=_0x5eb7c3['body'],_0x1eb1b0=path[_0x292306(0x238)](path['dirname'](require[_0x292306(0x287)]['filename']),_0x292306(0x319));fs[_0x292306(0x26d)](_0x1eb1b0,_0x292306(0x2f6),function(_0xd845de,_0x47caa0){const _0x33efbe=_0x292306;if(_0xd845de)_0x596d3b[_0x33efbe(0x1b7)](0xc8)[_0x33efbe(0x250)]({'parameters':[]});else{const _0x4999a9=JSON[_0x33efbe(0x2ad)](_0x47caa0);if(_0x4999a9[_0x289b1f]&&_0x4999a9[_0x289b1f][_0x264dff])_0x596d3b[_0x33efbe(0x1b7)](0xc8)[_0x33efbe(0x250)]({'parameters':_0x4999a9[_0x289b1f][_0x264dff]});else _0x4999a9[_0x289b1f]&&_0x4999a9[_0x289b1f][_0x33efbe(0x1f6)]?_0x596d3b[_0x33efbe(0x1b7)](0xc8)[_0x33efbe(0x250)]({'parameters':_0x4999a9[_0x289b1f]['standard']}):_0x596d3b[_0x33efbe(0x1b7)](0xc8)[_0x33efbe(0x250)]({'parameters':[]});}});}),router['post'](a27_0x58e125(0x305),async(_0x39c377,_0x2fcace)=>{const _0x51daf0=a27_0x58e125,{actionName:_0x34fcdc,contentLocation:_0x5237cd,parameters:_0x3b5c9a}=_0x39c377[_0x51daf0(0x25a)],_0x56a49a=path['join'](path[_0x51daf0(0x1d4)](require[_0x51daf0(0x287)][_0x51daf0(0x2b7)]),_0x51daf0(0x319));fs['readFile'](_0x56a49a,_0x51daf0(0x2f6),function(_0x51b7b1,_0xa1adb6){const _0x14006f=_0x51daf0;if(_0x51b7b1)_0x2fcace['status'](0x199)[_0x14006f(0x250)]({'message':_0x14006f(0x27e)});else{const _0x5376a9=JSON[_0x14006f(0x2ad)](_0xa1adb6);!_0x5376a9[_0x34fcdc]&&(_0x5376a9[_0x34fcdc]={}),_0x5376a9[_0x34fcdc][_0x5237cd]=_0x3b5c9a,fs[_0x14006f(0x26e)](_0x56a49a,JSON[_0x14006f(0x2bf)](_0x5376a9,null,0x4),function(_0x17b51e){const _0x44301a=_0x14006f;_0x17b51e&&_0x2fcace[_0x44301a(0x1b7)](0x199)[_0x44301a(0x250)]({'message':'Error\x20saving\x20parameters.'}),_0x2fcace[_0x44301a(0x1b7)](0xc8)['json']({'message':_0x44301a(0x24f)});});}});}),router[a27_0x58e125(0x308)](a27_0x58e125(0x205),protectedRoute,async(_0x426c0e,_0x479d8f)=>{const _0x5a69bb=a27_0x58e125,_0x23e7b1=fs[_0x5a69bb(0x1da)](path[_0x5a69bb(0x238)](path[_0x5a69bb(0x1d4)](require[_0x5a69bb(0x287)][_0x5a69bb(0x2b7)]),_0x5a69bb(0x2c7)),_0x5a69bb(0x2f6)),_0x5cb0c3=_0x23e7b1[_0x5a69bb(0x224)](_0x5a69bb(0x218),_0x426c0e[_0x5a69bb(0x27a)]);_0x479d8f[_0x5a69bb(0x27f)](_0x5cb0c3);}),router['post']('/doctor/check',async(_0x4972e4,_0x4caaa4)=>{const _0x2038c3=a27_0x58e125,_0xe063c1=getHotConfig(),_0x356edf=_0xe063c1[_0x2038c3(0x1ba)][_0x2038c3(0x224)]('//','/'),_0x133911=_0xe063c1['dwgmergeLocation'][_0x2038c3(0x224)]('//','/'),_0x5f3a94=_0xe063c1[_0x2038c3(0x201)][_0x2038c3(0x224)]('//','/'),_0x4bf355=''+_0x356edf+_0xe063c1[_0x2038c3(0x249)],_0x4a4ed8=''+_0x133911+_0xe063c1[_0x2038c3(0x19a)],_0x5615c4=''+_0x5f3a94+_0xe063c1[_0x2038c3(0x230)],_0x2593c5=[],_0x7f6437=new Promise(_0x19b0eb=>{const _0x176f09=_0x2038c3;exec(os[_0x176f09(0x237)]()==='win32'?_0x176f09(0x341):'ls',_0x4e3c1a=>{const _0x36bf1e=_0x176f09;_0x4e3c1a?_0x2593c5[_0x36bf1e(0x1c3)]({'title':_0x36bf1e(0x2fa),'status':![],'priority':0x1}):_0x2593c5['push']({'title':_0x36bf1e(0x2fa),'status':!![],'priority':0x1}),_0x19b0eb();});}),_0x2b8285=new Promise(_0x11f5bd=>{const _0x4f6704=_0x2038c3;fs['access'](_0x4bf355,fs['constants'][_0x4f6704(0x276)],_0x34c802=>{const _0x4b7f1b=_0x4f6704;_0x34c802?_0x2593c5[_0x4b7f1b(0x1c3)]({'title':_0x4b7f1b(0x19d)+_0xe063c1[_0x4b7f1b(0x249)]+_0x4b7f1b(0x19c),'status':![],'priority':0x2}):_0x2593c5['push']({'title':_0x4b7f1b(0x19d)+_0xe063c1['autoxchange_executable']+_0x4b7f1b(0x19c),'status':!![],'priority':0x2}),_0x11f5bd();});}),_0x32177e=new Promise(_0x15a041=>{const _0x3c37eb=_0x2038c3;fs[_0x3c37eb(0x32c)](_0x4a4ed8,fs[_0x3c37eb(0x1e1)]['X_OK'],_0x378f04=>{const _0x1ba818=_0x3c37eb;_0x378f04?_0x2593c5['push']({'title':_0x1ba818(0x19d)+_0xe063c1[_0x1ba818(0x19a)]+_0x1ba818(0x19c),'status':![],'priority':0x3}):_0x2593c5[_0x1ba818(0x1c3)]({'title':_0x1ba818(0x19d)+_0xe063c1[_0x1ba818(0x19a)]+_0x1ba818(0x19c),'status':!![],'priority':0x3}),_0x15a041();});}),_0x1157bc=new Promise(_0x2e8cb1=>{const _0xdb352e=_0x2038c3;fs[_0xdb352e(0x32c)](_0x5615c4,fs['constants'][_0xdb352e(0x276)],_0x36072c=>{const _0x4f5e68=_0xdb352e;_0x36072c?_0x2593c5['push']({'title':_0x4f5e68(0x19d)+_0xe063c1['linklist_executable']+'\x22\x20executable','status':![],'priority':0x4}):_0x2593c5['push']({'title':_0x4f5e68(0x19d)+_0xe063c1[_0x4f5e68(0x230)]+_0x4f5e68(0x19c),'status':!![],'priority':0x4}),_0x2e8cb1();});}),_0x1d448a=new Promise(_0x22a9ed=>{const _0x420dec=_0x2038c3,_0x16ac03=new Date(),_0x242ed2=_0x16ac03[_0x420dec(0x22a)]()[_0x420dec(0x32a)]()['padStart'](0x2,'0')+'_'+(_0x16ac03[_0x420dec(0x1e4)]()+0x1)[_0x420dec(0x32a)]()[_0x420dec(0x2ec)](0x2,'0')+'_'+_0x16ac03[_0x420dec(0x27c)](),{displayDay:_0x559ee2}=_0x4972e4['body'];fs[_0x420dec(0x32c)](path[_0x420dec(0x238)](path[_0x420dec(0x1d4)](require[_0x420dec(0x287)][_0x420dec(0x2b7)]),_0x420dec(0x33a),_0x420dec(0x1b1)+(_0x559ee2??_0x242ed2)+_0x420dec(0x1a0)),fs[_0x420dec(0x1e1)][_0x420dec(0x2d2)],_0x13423b=>{const _0x47bc15=_0x420dec;_0x13423b?_0x2593c5[_0x47bc15(0x1c3)]({'title':'Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_'+(_0x559ee2??_0x242ed2)+'.log\x22','status':![],'priority':0x5}):_0x2593c5[_0x47bc15(0x1c3)]({'title':_0x47bc15(0x21e)+(_0x559ee2??_0x242ed2)+_0x47bc15(0x1c1),'status':!![],'priority':0x5}),_0x22a9ed();});}),_0x2c01a7=(_0x65f2dd,_0x70b3d3)=>{const _0x403eaa=_0x2038c3,_0x165afe=path[_0x403eaa(0x238)](path[_0x403eaa(0x1d4)](require['main'][_0x403eaa(0x2b7)]),_0x65f2dd);return new Promise(_0x26d2af=>{const _0xcfee96=_0x403eaa;fs[_0xcfee96(0x32c)](path[_0xcfee96(0x238)](path[_0xcfee96(0x1d4)](_0x165afe)),fs[_0xcfee96(0x1e1)][_0xcfee96(0x211)]|fs[_0xcfee96(0x1e1)]['W_OK'],_0x39f424=>{const _0x47aeac=_0xcfee96;_0x39f424?_0x2593c5[_0x47aeac(0x1c3)]({'title':_0x47aeac(0x2d4)+_0x65f2dd,'status':![],'priority':_0x70b3d3+0x6}):_0x2593c5['push']({'title':'Read\x20and\x20write\x20permission\x20for\x20folder\x20'+_0x65f2dd,'status':!![],'priority':_0x70b3d3+0x6}),_0x26d2af();});});},_0x57d467=['/converters/files/',_0x2038c3(0x321),'/converters/files/merged/',_0x2038c3(0x2d8),'/converters/files/pdf/','/content/redlines/',_0x2038c3(0x1a8)],_0xe51de6=_0x57d467[_0x2038c3(0x2ca)](_0x2c01a7);Promise[_0x2038c3(0x1f8)]([_0x7f6437,_0x2b8285,_0x32177e,_0x1157bc,_0x1d448a,..._0xe51de6])[_0x2038c3(0x1be)](()=>{const _0x30b2c7=_0x2038c3;_0x4caaa4[_0x30b2c7(0x1b7)](0xc8)[_0x30b2c7(0x250)]({'checking_list':_0x2593c5});})['catch'](()=>{const _0x3304c0=_0x2038c3;_0x4caaa4[_0x3304c0(0x1b7)](0x1f4)['json']({'error':_0x3304c0(0x32f)});});}),router[a27_0x58e125(0x308)](a27_0x58e125(0x2f8),protectedRoute,async(_0x4dc4be,_0x218a20)=>{const _0x3cf26d=a27_0x58e125,_0x4347ef=fs[_0x3cf26d(0x1da)](path['join'](path['dirname'](require[_0x3cf26d(0x287)][_0x3cf26d(0x2b7)]),'cadviewer/settings/users.html'),_0x3cf26d(0x2f6)),_0x2adfbb=_0x4347ef[_0x3cf26d(0x224)](_0x3cf26d(0x218),_0x4dc4be[_0x3cf26d(0x27a)]);_0x218a20[_0x3cf26d(0x27f)](_0x2adfbb);}),router[a27_0x58e125(0x2ae)](a27_0x58e125(0x234),async(_0x105b1d,_0x26912c)=>{const _0x204e72=a27_0x58e125;let _0x3ec3ac;try{const [_0x1c39c1]=await conn[_0x204e72(0x213)]()['execute'](_0x204e72(0x1fd),[]);_0x3ec3ac=_0x1c39c1;}catch(_0x4dad55){console[_0x204e72(0x1bc)](_0x4dad55),_0x26912c['status'](0x1f4)[_0x204e72(0x250)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}_0x26912c[_0x204e72(0x1b7)](0xc8)[_0x204e72(0x250)]({'success':!![],'data':_0x3ec3ac});}),router[a27_0x58e125(0x2ae)](a27_0x58e125(0x2f8),upload['single'](a27_0x58e125(0x2e9)),async(_0x20245f,_0x313874)=>{const _0x426211=a27_0x58e125,{id:_0x4558b9,first_name:_0x119330,last_name:_0x3a9b47,username:_0x38f8d7,email:_0x2eb3f8,password:_0xd1fc38,is_enabled:_0x5a9dbe}=_0x20245f[_0x426211(0x25a)],_0x524822=_0x20245f[_0x426211(0x25a)]['role']===_0x426211(0x1a3)?_0x426211(0x1a3):_0x20245f[_0x426211(0x25a)][_0x426211(0x1ab)]===_0x426211(0x1fc)?_0x426211(0x1fc):'user';let _0x3250e1;console[_0x426211(0x1bc)](_0x426211(0x19e));_0xd1fc38&&(_0x3250e1=await bcrypt[_0x426211(0x24a)](_0xd1fc38,0xa));let _0x2b68d5=null;if(_0x20245f[_0x426211(0x20c)]){const _0x4ebb2c='avatars/'+randomUUID()+_0x426211(0x2b9);fs['copyFileSync'](_0x20245f[_0x426211(0x20c)][_0x426211(0x2bb)],'./'+_0x4ebb2c),fs[_0x426211(0x1ee)](_0x20245f['file'][_0x426211(0x2bb)]),config[_0x426211(0x1ce)]?_0x2b68d5=config[_0x426211(0x30c)]+'/'+_0x4ebb2c:_0x2b68d5=config[_0x426211(0x226)]+'/'+_0x4ebb2c;}if(_0x4558b9){try{let [_0x3d9d81]=await conn['promise']()['execute']('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20(`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?)\x20AND\x20`id`\x20!=\x20?',[_0x2eb3f8,_0x38f8d7,_0x4558b9]);if(_0x3d9d81['length']>0x0)_0x313874['status'](0x199)[_0x426211(0x250)]({'error':_0x426211(0x1b4)});else{!_0x20245f[_0x426211(0x20c)]&&([_0x3d9d81]=await conn[_0x426211(0x213)]()[_0x426211(0x1a4)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?',[_0x4558b9]),_0x2b68d5=_0x3d9d81[0x0]['avatar_url']);const _0x2f4175='UPDATE\x20`users`\x20SET\x20`avatar_url`\x20=\x20?,\x20`first_name`\x20=\x20?,\x20`last_name`\x20=\x20?,\x20`username`\x20=\x20?,\x20`email`\x20=\x20?,'+(_0xd1fc38?_0x426211(0x1f9):'')+_0x426211(0x2aa);await conn['promise']()[_0x426211(0x1a4)](_0x2f4175,_0xd1fc38?[_0x2b68d5,_0x119330,_0x3a9b47,_0x38f8d7,_0x2eb3f8,_0x3250e1,_0x5a9dbe,_0x524822,_0x4558b9]:[_0x2b68d5,_0x119330,_0x3a9b47,_0x38f8d7,_0x2eb3f8,_0x5a9dbe,_0x524822,_0x4558b9]);}}catch(_0x4c4ee9){console[_0x426211(0x1bc)](_0x4c4ee9),_0x313874[_0x426211(0x1b7)](0x1f4)[_0x426211(0x250)]({'error':_0x426211(0x2c1)});return;}_0x313874['status'](0xc8)[_0x426211(0x250)]({'success':!![],'message':'User\x20updated\x20successfully'});}else{try{const [_0x39821d]=await conn[_0x426211(0x213)]()[_0x426211(0x1a4)](_0x426211(0x27d),[_0x2eb3f8,_0x38f8d7]);if(_0x39821d[_0x426211(0x2da)]>0x0)_0x313874['status'](0x199)['json']({'error':_0x426211(0x1b4)});else{const _0x7a571e=randomUUID();await conn[_0x426211(0x213)]()[_0x426211(0x1a4)]('INSERT\x20INTO\x20`users`\x20(`avatar_url`,\x20`first_name`,\x20`last_name`,\x20`username`,\x20`email`,\x20`crypted_password`,\x20`role`,\x20`is_enabled`,\x20`folder_name`)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)',[_0x2b68d5,_0x119330,_0x3a9b47,_0x38f8d7,_0x2eb3f8,_0x3250e1,_0x524822,_0x5a9dbe,_0x7a571e]);const _0x546716=_0x426211(0x1c0)+_0x7a571e;fs[_0x426211(0x23e)](_0x546716);}}catch(_0x482387){console[_0x426211(0x1bc)](_0x482387),_0x313874[_0x426211(0x1b7)](0x1f4)[_0x426211(0x250)]({'error':_0x426211(0x2c1)});return;}_0x313874[_0x426211(0x1b7)](0xc8)[_0x426211(0x250)]({'success':!![],'message':'User\x20created\x20successfully'});}}),router[a27_0x58e125(0x251)](a27_0x58e125(0x332),async(_0x2e124f,_0x4e3cde)=>{const _0xae2a4a=a27_0x58e125,{userId:_0x505314}=_0x2e124f[_0xae2a4a(0x25a)];let _0x3086b1;try{const [_0x1c3a31]=await conn[_0xae2a4a(0x213)]()['execute'](_0xae2a4a(0x2b8),[_0x505314]);_0x1c3a31[_0xae2a4a(0x2da)]>0x0&&(_0x3086b1=_0x1c3a31[0x0]);}catch(_0x2606fe){console['log']({'err':_0x2606fe}),_0x4e3cde[_0xae2a4a(0x1b7)](0x1f4)[_0xae2a4a(0x250)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}if(!_0x3086b1){_0x4e3cde[_0xae2a4a(0x1b7)](0x191)['json']({'error':_0xae2a4a(0x1cc)});return;}let _0x5c8c90=_0x3086b1[_0xae2a4a(0x1ef)];if(!_0x5c8c90){_0x5c8c90=randomUUID();try{await conn[_0xae2a4a(0x213)]()[_0xae2a4a(0x1a4)](_0xae2a4a(0x300),[_0x5c8c90,_0x505314]);}catch(_0x5b39e0){console[_0xae2a4a(0x1bc)]({'err':_0x5b39e0}),_0x4e3cde[_0xae2a4a(0x1b7)](0x1f4)[_0xae2a4a(0x250)]({'error':_0xae2a4a(0x2c1)});return;}}const _0x3830c3='./uploads/'+_0x5c8c90;console['log']('===================='),console['log'](_0x3830c3),!fs[_0xae2a4a(0x2c8)](_0x3830c3)&&fs[_0xae2a4a(0x23e)](_0x3830c3),cleanCacheForUserFiles(_0x3830c3),fs[_0xae2a4a(0x311)](_0x3830c3,{'recursive':!![],'force':!![]}),fs[_0xae2a4a(0x23e)](_0x3830c3),_0x4e3cde[_0xae2a4a(0x1b7)](0xc8)[_0xae2a4a(0x250)]({'success':!![],'message':_0xae2a4a(0x2be)});}),router[a27_0x58e125(0x251)]('/users/:userId',async(_0x5443e7,_0x79e683)=>{const _0x3a2919=a27_0x58e125,_0x4552a0=_0x5443e7[_0x3a2919(0x29c)][_0x3a2919(0x275)];try{let _0x4cb902;try{const [_0x41cb45]=await conn['promise']()[_0x3a2919(0x1a4)](_0x3a2919(0x2b8),[_0x4552a0]);_0x41cb45[_0x3a2919(0x2da)]>0x0&&(_0x4cb902=_0x41cb45[0x0]);}catch(_0x48a354){console[_0x3a2919(0x1bc)]({'err':_0x48a354}),_0x79e683[_0x3a2919(0x1b7)](0x1f4)[_0x3a2919(0x250)]({'error':_0x3a2919(0x2c1)});return;}if(!_0x4cb902){_0x79e683[_0x3a2919(0x1b7)](0x191)[_0x3a2919(0x250)]({'error':'Invalid\x20user'});return;}let _0x4b0012=_0x4cb902[_0x3a2919(0x1ef)];if(_0x4b0012){const _0x17faca=_0x3a2919(0x1c0)+_0x4b0012;fs[_0x3a2919(0x2c8)](_0x17faca)&&(cleanCacheForUserFiles(_0x17faca),fs['rmSync'](_0x17faca,{'recursive':!![],'force':!![]}));}await conn[_0x3a2919(0x213)]()['execute'](_0x3a2919(0x1ad),[_0x4552a0]);}catch(_0x1bf4c2){console[_0x3a2919(0x1bc)](_0x1bf4c2),_0x79e683[_0x3a2919(0x1b7)](0x1f4)[_0x3a2919(0x250)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}_0x79e683[_0x3a2919(0x1b7)](0xc8)[_0x3a2919(0x250)]({'success':!![],'message':_0x3a2919(0x31b)});}),router[a27_0x58e125(0x308)](a27_0x58e125(0x214),async(_0x855283,_0x3dfbda)=>{const _0x1b21db=a27_0x58e125,_0xd51ad5=osu[_0x1b21db(0x221)],_0x151234=osu['mem'],_0x578fe4=osu[_0x1b21db(0x199)],_0x75869f=osu['os'],_0xf39bf5={'percentage':0x0,'usedGB':0x0,'freeGb':0x0,'totalGB':0x0};try{let _0x416bb6=os[_0x1b21db(0x237)]()===_0x1b21db(0x297)?'c:':'/';const _0x4800fa=await _0x578fe4[_0x1b21db(0x331)](_0x416bb6);_0xf39bf5[_0x1b21db(0x306)]=_0x4800fa[_0x1b21db(0x245)],_0xf39bf5[_0x1b21db(0x23d)]=_0x4800fa[_0x1b21db(0x203)],_0xf39bf5[_0x1b21db(0x216)]=_0x4800fa['freeGb'],_0xf39bf5[_0x1b21db(0x303)]=_0x4800fa[_0x1b21db(0x228)];}catch(_0x37c653){console[_0x1b21db(0x1bc)]('Error\x20getting\x20disk\x20usage',_0x37c653);}const _0x25b182={'usage':0x0,'count':0x0};try{_0x25b182[_0x1b21db(0x29f)]=await _0xd51ad5[_0x1b21db(0x29f)](),_0x25b182[_0x1b21db(0x25b)]=_0xd51ad5[_0x1b21db(0x25b)]();}catch(_0x463396){console[_0x1b21db(0x1bc)]('Error\x20getting\x20cpu\x20usage',_0x463396);}const _0x5509f5={'os':'','platform':'','ip':'','uptime':0x0,'hostname':'','type':'','arch':'','who':'','whoami':'','vmstats':''};try{_0x5509f5['os']=await _0x75869f[_0x1b21db(0x2bd)](),_0x5509f5['platform']=_0x75869f[_0x1b21db(0x237)](),_0x5509f5['ip']=_0x75869f['ip'](),_0x5509f5['uptime']=_0x75869f['uptime'](),_0x5509f5[_0x1b21db(0x30e)]=_0x75869f[_0x1b21db(0x30e)](),_0x5509f5[_0x1b21db(0x212)]=_0x75869f[_0x1b21db(0x212)](),_0x5509f5['arch']=_0x75869f[_0x1b21db(0x1b0)](),_0x5509f5[_0x1b21db(0x347)]=await osu[_0x1b21db(0x349)][_0x1b21db(0x347)](),_0x5509f5['whoami']=await osu[_0x1b21db(0x349)][_0x1b21db(0x265)](),_0x5509f5[_0x1b21db(0x2a7)]=await osu['osCmd'][_0x1b21db(0x2a7)]();}catch(_0x19dd55){console[_0x1b21db(0x1bc)](_0x1b21db(0x1d8),_0x19dd55);}const _0x56edbe={'totalProcesses':0x0,'zombieProcesses':0x0};try{_0x56edbe[_0x1b21db(0x1b5)]=await osu[_0x1b21db(0x348)][_0x1b21db(0x1b5)](),_0x56edbe['zombieProcesses']=await osu[_0x1b21db(0x348)][_0x1b21db(0x2dc)]();}catch(_0x39b1b3){console[_0x1b21db(0x1bc)](_0x1b21db(0x24c),_0x39b1b3);}let _0x535657={'usedMemPercentage':0x0,'usedMemMb':0x0,'totalMemMb':0x0};try{const _0x442f64=await _0x151234[_0x1b21db(0x331)]();_0x535657['usedMemPercentage']=_0x442f64[_0x1b21db(0x31a)],_0x535657[_0x1b21db(0x30a)]=_0x442f64[_0x1b21db(0x278)]/0x400/0x400,_0x535657[_0x1b21db(0x1c2)]=_0x442f64[_0x1b21db(0x2cf)]/0x400/0x400;}catch(_0x2f0bf2){console['log'](_0x1b21db(0x23c),_0x2f0bf2);}let _0x3b9b0e=0x0;try{_0x3b9b0e=await conn[_0x1b21db(0x213)]()[_0x1b21db(0x1d3)](_0x1b21db(0x2ce))['then'](([_0x58b5d0])=>_0x58b5d0[0x0][_0x1b21db(0x2cf)]);}catch(_0x1832b3){console['log'](_0x1b21db(0x33d),_0x1832b3);}const _0x3eddb5=getMonitoringData(),_0x20413c=_0x3eddb5[_0x1b21db(0x1cf)](_0x486b8a=>_0x486b8a[_0x1b21db(0x1c4)]!==null&&_0x486b8a[_0x1b21db(0x1c4)]!==undefined),_0x1b89b4=_0x3eddb5[_0x1b21db(0x1cf)](_0x12980f=>_0x12980f[_0x1b21db(0x222)]!==null&&_0x12980f['conversionMemoryUsage']!==undefined)[_0x1b21db(0x2ca)](_0x55bb6a=>parseFloat(_0x55bb6a[_0x1b21db(0x222)][_0x1b21db(0x224)]('Kb')['trim']())),_0x2f8a98=_0x20413c[_0x1b21db(0x28f)]((_0x127823,_0xd9401)=>_0x127823+parseFloat(_0xd9401['conversionTimeSpend']),0x0)/_0x20413c['length'],_0x45f022=_0x1b89b4['reduce']((_0x392d85,_0x430238)=>_0x392d85+_0x430238,0x0)/_0x1b89b4[_0x1b21db(0x2da)];_0x3dfbda['json']({'requestsPerSecond':counter[_0x1b21db(0x263)](),'diskUsage':_0xf39bf5,'cpus':_0x25b182,'system':_0x5509f5,'process':_0x56edbe,'totalMonitoringData':_0x3eddb5['length'],'memory':_0x535657,'totalUsers':_0x3b9b0e,'avgConvertionTime':_0x2f8a98,'avgMemoryUsage':_0x45f022});}),router[a27_0x58e125(0x2ae)](a27_0x58e125(0x2e4),(_0x42fb48,_0x17ad5a)=>{const _0x1c4f1f=a27_0x58e125;counter[_0x1c4f1f(0x1ea)](),_0x17ad5a[_0x1c4f1f(0x250)]({'message':_0x1c4f1f(0x2a9)});});function a27_0x1c5e(){const _0xedb5a=['Config\x20updated\x20successfully','/chart.min.js','linklist_executable','44yGhWwR','cadviewer/settings/converter-files-analysis.json','toISOString','/users/list','Cache\x20flushed\x20successfully','Config\x20updated.','platform','join','csv','email','setDate','Error\x20getting\x20memory\x20info','usedGB','mkdirSync','setMonth','pop','cadviewer/settings/cache-stats.js','sendFile','now','express-basic-auth','usedPercentage','Error\x20deleting\x20file','.rl.json','fileLocationUrl','autoxchange_executable','hash','ContentSecurityPolicyReportOnly','Error\x20getting\x20process\x20info','cadviewer/settings/chart.min.js','goodFileName','Parameters\x20saved.','json','delete','.csv','cached_conversion','DWG\x20to\x20SVG\x20Conversion','Error\x20getting\x20upload\x20configuration:','/tailwind.js','formatedSize','application/octet-stream','../libs/counter.js','body','count','0\x201\x20*\x20*\x20*','\x20n\x27existe\x20pas.','splity','Old\x20demo_user\x20accounts\x20(','Content-Disposition','includes','endsWith','getStats','green','whoami','cadviewer/settings/icons.js','maxUploadFiles','2827GmRegG','cadviewer/settings/requests-callapiconversion-monitoring.json','cachedfiles','Monitoring\x20file\x20cleaned.','last_name','readFile','writeFile','linklist_executable_windows','mkdir','toLocaleLowerCase','File\x20renamed.','some','model','userId','X_OK','availableFormats','used','createdAt','version','folderName','getFullYear','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?','Error\x20saving\x20parameters.','send','mode','File\x20not\x20found','./tmp','DWG','unlink','download','scheduleJob','main','folderLocation','readdirSync',')\x20older\x20than\x20','node-schedule','cadviewer/settings/folders.html','JSON\x20Data\x20Extraction','LinkList\x20Settings','reduce','\x20\x20\x20','SVG','usersExportFrequency','isFile','updatedAt','.json','name','win32','forEach','mysqlHost','exports','Error\x20creating\x20folder.','params','*\x20*\x20*\x20*\x20*','Callback\x20and\x20Authentication\x20Settings','usage','Log\x20file\x20cleaned.','\x20MB','/cache/stats','Error\x20deleting\x20user\x20folder:','converterpathLin','callbackMethod','number','vmstats','fileLocation','Counter\x20reset\x20successfully','`is_enabled`\x20=\x20?,\x20`role`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','last-users-export.json','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','parse','post','Cache\x20directory\x20','sort','copyFileSync','image/svg+xml','https','.gitkeep','/conversion/memorydata','red','filename','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','.png','No\x20config\x20object\x20provided','path','message','oos','User\x20directory\x20flushed\x20successfully','stringify','renameSync','Error!\x20Something\x20went\x20wrong.','globalBearerAutenticationToken','Error\x20downloading\x20file.','cadviewer/settings/style.css','ctime','windows','cadviewer/settings/doctor.html','existsSync','darwin','map','Exporting\x20new\x20users\x20for\x20Google\x20Ads...','sub_dirs','152988yLlcQz','SELECT\x20COUNT(*)\x20as\x20total\x20FROM\x20users','total','Error\x20cleaning\x20cache\x20for\x20user\x20files:','linklist_executable_linux','W_OK','statSync','Read\x20and\x20write\x20permission\x20for\x20folder\x20','mysqlPassword','/conversion/list','converterpathWin','/converters/files/print/','dwgmerge_executable_windows','length','autoxchange_executable_windows','zombieProcesses','/config/update','Exported\x20','Base\x20folder\x20not\x20exists,\x20please\x20verify\x20your\x20configuration.','email,firstname,lastname\x0a','ContentSecurityPolicy','radio|','\x20users\x20to\x20','/metrics/reset','cadviewer/settings/vanilla-toast.js','Deleting\x20old\x20demo_user\x20accounts...','blue','users-export-','avatar','dwg','gray','padStart','lastExportDate','/logs/clean','Mail\x20Server\x20Settings','cadviewer/settings/conversion-cache.html','\x20KB','CADViewer\x20Settings','Folder\x20not\x20found.','autodetect_platform','error','utf8','startsWith','/users','../libs/log','\x22exec\x22\x20command\x20activated\x20on\x20NodeJS','PDF','maxUploadFileSize','/folders/upload','extname','11114544RQXYpo','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','.pdf','Users\x20export\x20triggered\x20successfully','totalGB','keys','/restapi-test/parameters/save','percentage','1884136lwKXEO','get','rmdirSync','usedMemMb','CADViewer_config.json','callbackMethod_gatewayUrl','\x20days\x20have\x20been\x20deleted.','hostname','1042tugSJe','dwgmerge_executable_linux','rmSync','Error\x20deleting\x20cache\x20file\x20','.dwg','tmp','yellow','6793310KRrqtK','Error\x20getting\x20cache\x20stats:','Content-Type','cadviewer/settings/rest-api-parameters.json','usedMemPercentage','User\x20deleted\x20successfully','setHeader','clean','Failed\x20to\x20retrieve\x20export\x20history','Demo\x20and\x20Base\x20User\x20Settings','/folders','/converters/autoxchange/linux/','temp_print_folder','fileLoad_Password','files','demoUserRetentionDays','first_name','JSON','/folders/delete','===================error===================','toString','find','access','gunzipSync','cadviewer/settings/tailwind.js','An\x20error\x20occurred\x20while\x20checking.','.svg','info','/users/flush-dir','originalname','Error\x20reading\x20last\x20export\x20info:','Folder\x20not\x20found','../libs/mysql.js','/cache/files/:id','autoxchange_executable_linux','linux','logs','crypto','AutoXchange\x20Settings','Error\x20getting\x20total\x20users','.dwg.json','autodetect_location','79633950CPgMAp','dir','9mogWDc','Server\x20Settings','dwgmergeLocation','cadviewer/settings/users-export.html','ceil','who','proc','osCmd','array','/logs/content','drive','dwgmerge_executable','/config','\x22\x20executable','Permission\x20750\x20for\x20the\x20\x22','=============================>','/cache-stats.js','.log','../CADViewer_config.json','diskStorage','admin','execute','fileLoad_PasswordAuthentication','pdf','Error\x20finding\x20log\x20files:','/content/redlines/v7/','zlib','.svgz','role','10975824KLWWbj','DELETE\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','split','size','arch','call-Api_Conversion_','mysqlDatabase','ServerLocation','User\x20with\x20that\x20email\x20or\x20username\x20already\x20exists','totalProcesses','cadviewer/settings/config.html','status','put','Error\x20triggering\x20Users\x20export:','converterLocation','boolean','log','cadviewer/settings/home.html','then','/folders/update','./uploads/','.log\x22','totalMemMb','push','conversionTimeSpend','Cache\x20cleaned\x20for\x20files\x20in\x20','svgz','Folder\x20created.','fileLoad_UserName','converters','xpathLocation','../libs/email-utils','Invalid\x20user','Export\x20file\x20not\x20found','callbackMethod_gatewayUrl_flag','filter','/vanilla-toast.js','Demo\x20period\x20extended\x20successfully\x20by\x20','slice','query','dirname','cvjs_svgz_compress','isDirectory','birthtime','Error\x20getting\x20os\x20info','\x20does\x20not\x20exist.','readFileSync','\x20GB','svg','Folder\x20deleted.','cadviewer/settings/rest-api.html','radio|windows,linux','\x20days','constants','0\x20*\x20*\x20*\x20*','cadviewer/settings/licences.html','getMonth','writeFileSync','Files\x20uploaded\x20successfully','node-os-utils','Error\x20deleting\x20folder.','/style.css','reset','fileName','resolve','Router','unlinkSync','folder_name','globalBearerAutentication','test','multer','/cache/files','toFixed','Database\x20Settings','standard','Error\x20reading\x20monitoring\x20file','all','`crypted_password`\x20=\x20?,\x20','express','Error\x20getting\x20Users\x20export\x20export\x20history:','demo_user','SELECT\x20*\x20FROM\x20users','/folders/download','/folders/upload-config','radio|monthly,biweekly','linklistLocation','/config/content','usedGb','/restapi-test','/doctor','Failed\x20to\x20get\x20cache\x20stats','write','/icons.js','Directory\x20','0\x200\x20*\x20*\x20*','purple','file','Erreur\x20lors\x20de\x20l\x27analyse\x20des\x20fichiers\x20du\x20dossier\x20converters/files:\x20','Folder\x20already\x20exists.','/restapi-test/parameters/search','DWG\x20to\x20PDF\x20Conversion','R_OK','type','promise','/metrics','replace','freeGb','/vanilla-toast.css','{version}','Folder\x20renamed.','attachment;\x20filename=\x22','Failed\x20to\x20trigger\x20export','../libs/config','hlall','Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_','monthly','Failed\x20to\x20flush\x20cache','cpu','conversionMemoryUsage','settingsPasswordBasicAuth','replaceAll','settings','ServerUrl','/users/extend-demo','totalGb','getHotConfig','getDate','blocks','DELETE\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','licenseLocation'];a27_0x1c5e=function(){return _0xedb5a;};return a27_0x1c5e();}const getMonitoringData=()=>{const _0x563278=a27_0x58e125,_0x1c1378=_0x563278(0x269);let _0x4c802d=[];try{_0x4c802d=JSON[_0x563278(0x2ad)](fs[_0x563278(0x1da)](_0x1c1378));}catch(_0x265018){console['log'](_0x563278(0x1f7));}return _0x4c802d;};router[a27_0x58e125(0x308)](a27_0x58e125(0x2d6),async(_0x3bd5f7,_0x33d02c)=>{const _0x5133b6=a27_0x58e125,{page:page=0x1,limit:limit=0xa}=_0x3bd5f7[_0x5133b6(0x1d3)],_0x2648d6=(page-0x1)*limit;try{const _0x2aa681=getMonitoringData(),_0x4fa758=_0x2aa681[_0x5133b6(0x2da)],_0xc07c5=Math['ceil'](_0x4fa758/limit),_0x4c2614=_0x2aa681['slice'](_0x2648d6,_0x2648d6+limit);_0x33d02c[_0x5133b6(0x1b7)](0xc8)[_0x5133b6(0x250)]({'data':_0x4c2614,'page':parseInt(''+page),'totalPages':_0xc07c5,'total':_0x4fa758});}catch(_0x103e0d){console[_0x5133b6(0x1bc)](_0x103e0d),_0x33d02c['status'](0x1f4)[_0x5133b6(0x250)]({'error':_0x5133b6(0x2c1)});}}),router[a27_0x58e125(0x251)]('/conversion/clean',async(_0x3600e6,_0x590879)=>{const _0x1bdaf7=a27_0x58e125,_0x2f6647='cadviewer/settings/requests-callapiconversion-monitoring.json';try{fs[_0x1bdaf7(0x1e5)](_0x2f6647,JSON['stringify']([],null,0x4)),analyzeConverterFiles(),_0x590879[_0x1bdaf7(0x1b7)](0xc8)[_0x1bdaf7(0x250)]({'message':_0x1bdaf7(0x26b)});}catch(_0x258c9b){console[_0x1bdaf7(0x1bc)](_0x258c9b),_0x590879['status'](0x1f4)[_0x1bdaf7(0x250)]({'error':_0x1bdaf7(0x2c1)});}}),router[a27_0x58e125(0x308)](a27_0x58e125(0x2b5),async(_0x24e0c0,_0x3fec01)=>{const _0x2eaaed=a27_0x58e125,_0x46c865=getHotConfig()[_0x2eaaed(0x1ba)][_0x2eaaed(0x224)]('//','/'),{page:page=0x1,limit:limit=0xa}=_0x24e0c0[_0x2eaaed(0x1d3)],_0x1d8719=(page-0x1)*limit;try{const _0x382fca=_0x46c865+'memorydata.csv';console[_0x2eaaed(0x1bc)](_0x382fca);const _0x245ee1=fs['readFileSync'](_0x382fca,'utf8'),_0xc5ef45=_0x245ee1['split']('\x0a'),_0x4e1d7=[];_0xc5ef45['forEach'](_0x1d9925=>{const _0x2fecc3=_0x2eaaed,_0x4c4280=_0x1d9925[_0x2fecc3(0x1ae)](',');if(_0x4c4280['length']<0x4)return;const _0x7882ae=_0x4c4280[0x0],_0x91df07=_0x4c4280[0x1],_0x49ea83=parseFloat(_0x4c4280[0x2]);_0x4e1d7[_0x2fecc3(0x1c3)]({'file':_0x7882ae[_0x2fecc3(0x224)]('\x22',''),'action':_0x91df07,'timeSpend':_0x49ea83,'memoryUsage':_0x4c4280[0x3]});});const _0x4a3535=_0x4e1d7[_0x2eaaed(0x2da)],_0x323e78=Math[_0x2eaaed(0x346)](_0x4a3535/limit),_0xb81a6d=_0x4e1d7[_0x2eaaed(0x1d2)](_0x1d8719,_0x1d8719+limit);_0x3fec01[_0x2eaaed(0x1b7)](0xc8)[_0x2eaaed(0x250)]({'data':_0xb81a6d,'page':parseInt(''+page),'totalPages':_0x323e78,'total':_0x4a3535});}catch(_0x4b1f71){console['log'](_0x4b1f71),_0x3fec01[_0x2eaaed(0x1b7)](0x1f4)[_0x2eaaed(0x250)]({'error':'Error!\x20Something\x20went\x20wrong.'});}}),router[a27_0x58e125(0x308)](a27_0x58e125(0x2a2),async(_0xeb0fc,_0x24d457)=>{const _0x2e2cb4=a27_0x58e125,_0x4a13bb=path[_0x2e2cb4(0x238)](path[_0x2e2cb4(0x1d4)](require[_0x2e2cb4(0x287)]['filename']),'converters','files');try{let _0x1ee7ee=0x0,_0x383f61=0x0;function _0x137faa(_0x2b0452){const _0x4a1f9e=_0x2e2cb4;let _0x15e1e9=0x0,_0x143d21=0x0;if(fs['existsSync'](_0x2b0452)){const _0xe64c03=fs['readdirSync'](_0x2b0452);_0x143d21=0x0;for(const _0x2cc15f of _0xe64c03){const _0x1d2516=path[_0x4a1f9e(0x238)](_0x2b0452,_0x2cc15f),_0x234614=fs[_0x4a1f9e(0x2d3)](_0x1d2516);if(_0x234614[_0x4a1f9e(0x293)]()&&_0x2cc15f!==_0x4a1f9e(0x2b4))_0x143d21++,_0x15e1e9+=_0x234614['size'];else{if(_0x234614['isDirectory']()){}}}}return{'size':_0x15e1e9,'count':_0x143d21};}const _0x44046b=_0x137faa(_0x4a13bb);_0x1ee7ee=_0x44046b['size'],_0x383f61=_0x44046b[_0x2e2cb4(0x25b)],_0x24d457[_0x2e2cb4(0x250)]({'fileCount':_0x383f61,'totalSize':_0x1ee7ee});}catch(_0x4da775){console[_0x2e2cb4(0x2f5)](_0x2e2cb4(0x317),_0x4da775),_0x24d457[_0x2e2cb4(0x1b7)](0x1f4)[_0x2e2cb4(0x250)]({'error':_0x2e2cb4(0x206)});}}),router[a27_0x58e125(0x251)]('/cache/flush',async(_0x32fc65,_0x48bc1c)=>{const _0xdd2063=a27_0x58e125,_0x4eb6f6=path[_0xdd2063(0x238)](path[_0xdd2063(0x1d4)](require[_0xdd2063(0x287)][_0xdd2063(0x2b7)]),'converters',_0xdd2063(0x324));try{function _0x715b46(_0x455d87){const _0x557439=_0xdd2063;if(fs[_0x557439(0x2c8)](_0x455d87)){const _0x4d2d77=fs[_0x557439(0x289)](_0x455d87);for(const _0x380cc4 of _0x4d2d77){const _0x5a3e9f=path[_0x557439(0x238)](_0x455d87,_0x380cc4),_0x42b148=fs[_0x557439(0x2d3)](_0x5a3e9f);if(_0x42b148[_0x557439(0x1d6)]()){}else _0x380cc4!=='.gitkeep'&&fs['unlinkSync'](_0x5a3e9f);}}}_0x715b46(_0x4eb6f6),analyzeConverterFiles(),_0x48bc1c[_0xdd2063(0x250)]({'message':_0xdd2063(0x235)});}catch(_0x46e52f){console[_0xdd2063(0x2f5)]('Error\x20flushing\x20cache:',_0x46e52f),_0x48bc1c[_0xdd2063(0x1b7)](0x1f4)[_0xdd2063(0x250)]({'error':_0xdd2063(0x220)});}}),router[a27_0x58e125(0x308)](a27_0x58e125(0x19f),async(_0x4ab8a7,_0x1a2594)=>{const _0x2222e3=a27_0x58e125;_0x1a2594[_0x2222e3(0x242)](path[_0x2222e3(0x238)](path[_0x2222e3(0x1d4)](require[_0x2222e3(0x287)][_0x2222e3(0x2b7)]),_0x2222e3(0x241)));}),router[a27_0x58e125(0x308)]('/cache',protectedRoute,async(_0x3bc130,_0x52c24a)=>{const _0x200108=a27_0x58e125,_0x35884a=fs['readFileSync'](path['join'](path[_0x200108(0x1d4)](require[_0x200108(0x287)]['filename']),_0x200108(0x2f0)),_0x200108(0x2f6)),_0x8513ab=_0x35884a[_0x200108(0x224)](_0x200108(0x218),_0x3bc130['version']);_0x52c24a[_0x200108(0x27f)](_0x8513ab);}),router[a27_0x58e125(0x308)](a27_0x58e125(0x1f3),async(_0x56750d,_0x44ce04)=>{const _0xedc652=a27_0x58e125,{page:page=0x1,limit:limit=0x10}=_0x56750d[_0xedc652(0x1d3)],_0x9f3dbe=JSON[_0xedc652(0x2ad)](fs[_0xedc652(0x1da)](path[_0xedc652(0x238)](path[_0xedc652(0x1d4)](require[_0xedc652(0x287)]['filename']),'cadviewer/settings/converter-files-analysis.json'))),_0x24ff63=(page-0x1)*limit,_0x5a2160=page*limit,_0x161148=_0x9f3dbe[_0xedc652(0x324)]['length'],_0x27e153=Math['ceil'](_0x161148/limit),_0x1390ba=_0x9f3dbe[_0xedc652(0x324)][_0xedc652(0x1d2)](_0x24ff63,_0x5a2160);_0x44ce04[_0xedc652(0x250)]({'files':_0x1390ba,'pagination':{'total':_0x161148,'totalPages':_0x27e153,'currentPage':parseInt(page),'limit':parseInt(limit)}});return;}),router[a27_0x58e125(0x308)]('/cache/csv/:file',async(_0x1e5433,_0xfc495e)=>{const _0x2472cf=a27_0x58e125,{file:_0x19cd82}=_0x1e5433[_0x2472cf(0x29c)],_0x22f982=path[_0x2472cf(0x238)](path['dirname'](require[_0x2472cf(0x287)][_0x2472cf(0x2b7)]),_0x2472cf(0x1c9),'files'),_0xf261e9=path[_0x2472cf(0x238)](_0x22f982,_0x19cd82),_0x289f33=fs[_0x2472cf(0x1da)](_0xf261e9,_0x2472cf(0x2f6)),_0x41a116=_0x289f33[_0x2472cf(0x1ae)]('\x0a'),_0x3f34fa=_0x41a116[_0x2472cf(0x2ca)](_0x1d471b=>{const _0x2fd468=_0x2472cf,_0xab7c8e=_0x1d471b[_0x2fd468(0x1ae)](',');return _0xab7c8e[_0x2fd468(0x2ca)](_0x14e87e=>_0x14e87e['replaceAll']('\x22',''));});_0xfc495e[_0x2472cf(0x250)](_0x3f34fa);}),router['get'](a27_0x58e125(0x337),async(_0x4e8627,_0x1b40e8)=>{const _0x9113c9=a27_0x58e125,{id:_0x1d392f}=_0x4e8627['params'],_0x26d4fd=path['join'](path[_0x9113c9(0x1d4)](require[_0x9113c9(0x287)][_0x9113c9(0x2b7)]),_0x9113c9(0x1c9),'files'),_0x17a342=path[_0x9113c9(0x238)](_0x26d4fd,_0x1d392f);if(_0x17a342[_0x9113c9(0x262)](_0x9113c9(0x1aa))){var _0x54b09a=require(_0x9113c9(0x1a9));const _0x295e20=fs[_0x9113c9(0x1da)](_0x17a342),_0x3e2ed8=_0x54b09a[_0x9113c9(0x32d)](_0x295e20);_0x1b40e8[_0x9113c9(0x31c)]('Content-Type',_0x9113c9(0x2b2)),_0x1b40e8[_0x9113c9(0x27f)](_0x3e2ed8);}else _0x1b40e8[_0x9113c9(0x242)](_0x17a342);}),router[a27_0x58e125(0x251)](a27_0x58e125(0x337),async(_0x35c6f2,_0x4688f1)=>{const _0x115a4d=a27_0x58e125,{id:_0x396ac}=_0x35c6f2[_0x115a4d(0x29c)],_0x385292=path[_0x115a4d(0x238)](path[_0x115a4d(0x1d4)](require[_0x115a4d(0x287)][_0x115a4d(0x2b7)]),_0x115a4d(0x1c9),_0x115a4d(0x324)),_0x5ecdf4=JSON[_0x115a4d(0x2ad)](fs[_0x115a4d(0x1da)](path['join'](path[_0x115a4d(0x1d4)](require['main'][_0x115a4d(0x2b7)]),_0x115a4d(0x232)))),_0x346a2a=_0x5ecdf4[_0x115a4d(0x324)][_0x115a4d(0x32b)](_0xe498e5=>_0xe498e5[_0x115a4d(0x296)]===_0x396ac);if(_0x346a2a){try{fs[_0x115a4d(0x2c8)](path[_0x115a4d(0x238)](_0x385292,_0x346a2a[_0x115a4d(0x296)]))&&fs['unlinkSync'](path['join'](_0x385292,_0x346a2a['name']));}catch(_0x542fe7){console['log']('Error\x20deleting\x20file',{'e':_0x542fe7});}(_0x346a2a[_0x115a4d(0x277)]??[])[_0x115a4d(0x298)](_0x4742d3=>{const _0x4596fe=_0x115a4d;try{fs[_0x4596fe(0x2c8)](path[_0x4596fe(0x238)](_0x385292,_0x4742d3['id']))&&fs[_0x4596fe(0x1ee)](path[_0x4596fe(0x238)](_0x385292,_0x4742d3['id']));}catch(_0x390c58){console[_0x4596fe(0x1bc)](_0x4596fe(0x246),{'e':_0x390c58});}});}analyzeConverterFiles(),_0x4688f1['json']({'message':'File\x20deleted\x20successfully'});});const deleteOldDemoUsers=async()=>{const _0x482a94=a27_0x58e125;console[_0x482a94(0x1bc)](_0x482a94(0x2e6));const _0x5e35cc=config[_0x482a94(0x325)],_0x11d50d=_0x482a94(0x2ac);try{const [_0x134b5b]=await conn[_0x482a94(0x213)]()[_0x482a94(0x1a4)](_0x11d50d,[_0x5e35cc]),_0x5e1779=_0x134b5b[_0x482a94(0x2ca)](_0x27cd21=>_0x27cd21['folder_name']),_0x8ce9a1=_0x134b5b[_0x482a94(0x2ca)](_0x5da823=>_0x5da823[_0x482a94(0x23a)]);console[_0x482a94(0x1bc)](_0x8ce9a1),await conn['promise']()[_0x482a94(0x1a4)](_0x482a94(0x22c),[_0x5e35cc]),_0x5e1779[_0x482a94(0x298)](_0x414a3b=>{const _0x2a33b0=_0x482a94;try{const _0x5b952c=_0x2a33b0(0x1c0)+_0x414a3b;cleanCacheForUserFiles(_0x5b952c),fs[_0x2a33b0(0x309)](_0x5b952c);}catch(_0x3bb099){console[_0x2a33b0(0x2f5)](_0x2a33b0(0x2a3),_0x3bb099);}}),console[_0x482a94(0x1bc)](_0x482a94(0x25f)+_0x134b5b['length']+_0x482a94(0x28a)+_0x5e35cc+_0x482a94(0x30d));}catch(_0xe2a9fa){console[_0x482a94(0x2f5)]('Error\x20deleting\x20old\x20demo_user\x20accounts:',_0xe2a9fa);}};schedule[a27_0x58e125(0x286)](a27_0x58e125(0x25c),deleteOldDemoUsers),router[a27_0x58e125(0x308)]('/export-users',protectedRoute,async(_0x2cafea,_0x1a45fc)=>{const _0x8bca91=a27_0x58e125,_0x3e05df=fs[_0x8bca91(0x1da)](path[_0x8bca91(0x238)](path[_0x8bca91(0x1d4)](require['main'][_0x8bca91(0x2b7)]),_0x8bca91(0x345)),_0x8bca91(0x2f6)),_0x1cd2b2=_0x3e05df[_0x8bca91(0x224)]('{version}',_0x2cafea[_0x8bca91(0x27a)]);_0x1a45fc[_0x8bca91(0x27f)](_0x1cd2b2);});const exportUsersList=async()=>{const _0x19147c=a27_0x58e125;console['log'](_0x19147c(0x2cb));const _0xd42b8f=path[_0x19147c(0x238)](path[_0x19147c(0x1d4)](require['main'][_0x19147c(0x2b7)]),_0x19147c(0x29a));!fs['existsSync'](_0xd42b8f)&&fs[_0x19147c(0x23e)](_0xd42b8f);const _0xdf3551=config[_0x19147c(0x292)]||_0x19147c(0x21f);let _0x34c41d;const _0x1e97e2=path[_0x19147c(0x238)](_0xd42b8f,_0x19147c(0x2ab));if(fs[_0x19147c(0x2c8)](_0x1e97e2))try{const _0x5c856f=JSON[_0x19147c(0x2ad)](fs['readFileSync'](_0x1e97e2,'utf8'));_0x34c41d=new Date(_0x5c856f[_0x19147c(0x2ed)]);}catch(_0x199bbe){console[_0x19147c(0x2f5)](_0x19147c(0x334),_0x199bbe),_0x34c41d=calculateDefaultLastExportDate(_0xdf3551);}else _0x34c41d=calculateDefaultLastExportDate(_0xdf3551);const _0x5297f5=new Date(),_0x41f39f=_0x5297f5[_0x19147c(0x27c)]()+'-'+String(_0x5297f5[_0x19147c(0x1e4)]()+0x1)[_0x19147c(0x2ec)](0x2,'0')+'-'+String(_0x5297f5[_0x19147c(0x22a)]())['padStart'](0x2,'0'),_0x53ab5a='users-export-'+_0x41f39f+_0x19147c(0x252),_0x5f5aa8=path[_0x19147c(0x238)](_0xd42b8f,_0x53ab5a);try{const _0x107c4e='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20email,\x20first_name,\x20last_name,\x20created_at\x20\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20>\x20?\x20\x0a\x20\x20\x20\x20\x20\x20ORDER\x20BY\x20created_at\x20DESC\x0a\x20\x20\x20\x20',[_0x2339b6]=await conn[_0x19147c(0x213)]()[_0x19147c(0x1a4)](_0x107c4e,[_0x34c41d]);if(_0x2339b6['length']===0x0){console[_0x19147c(0x1bc)]('No\x20new\x20users\x20to\x20export\x20for\x20Google\x20Ads');return;}let _0x368ec5=_0x19147c(0x2e0);_0x2339b6[_0x19147c(0x298)](_0x48aa2a=>{const _0x3f96ab=_0x19147c,_0x2c2967=_0x48aa2a[_0x3f96ab(0x23a)]?'\x22'+_0x48aa2a[_0x3f96ab(0x23a)][_0x3f96ab(0x215)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x3cda94=_0x48aa2a[_0x3f96ab(0x326)]?'\x22'+_0x48aa2a['first_name'][_0x3f96ab(0x215)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x4386f8=_0x48aa2a['last_name']?'\x22'+_0x48aa2a[_0x3f96ab(0x26c)][_0x3f96ab(0x215)](/"/g,'\x22\x22')+'\x22':'\x22\x22';_0x368ec5+=_0x2c2967+','+_0x3cda94+','+_0x4386f8+'\x0a';}),fs['writeFileSync'](_0x5f5aa8,_0x368ec5),console[_0x19147c(0x1bc)](_0x19147c(0x2de)+_0x2339b6[_0x19147c(0x2da)]+_0x19147c(0x2e3)+_0x5f5aa8);const _0x361d35={'lastExportDate':_0x5297f5[_0x19147c(0x233)](),'fileName':_0x53ab5a,'userCount':_0x2339b6[_0x19147c(0x2da)]};fs[_0x19147c(0x1e5)](_0x1e97e2,JSON['stringify'](_0x361d35,null,0x2));}catch(_0x54274c){console[_0x19147c(0x2f5)]('Error\x20exporting\x20users\x20for\x20Google\x20Ads:',_0x54274c);}},calculateDefaultLastExportDate=_0x3081d=>{const _0x457217=a27_0x58e125,_0x4d3b32=new Date();return _0x3081d==='biweekly'?_0x4d3b32[_0x457217(0x23b)](_0x4d3b32[_0x457217(0x22a)]()-0xe):_0x4d3b32[_0x457217(0x23f)](_0x4d3b32[_0x457217(0x1e4)]()-0x1),_0x4d3b32;};router[a27_0x58e125(0x308)]('/users-export/history',async(_0x3bd708,_0x553a55)=>{const _0x98f3a=a27_0x58e125,_0x324a1f=path[_0x98f3a(0x238)](path[_0x98f3a(0x1d4)](require[_0x98f3a(0x287)][_0x98f3a(0x2b7)]),_0x98f3a(0x29a));if(!fs['existsSync'](_0x324a1f))return _0x553a55['status'](0xc8)[_0x98f3a(0x250)]({'exports':[]});try{const _0x2ed98e=fs[_0x98f3a(0x289)](_0x324a1f)[_0x98f3a(0x1cf)](_0x242114=>_0x242114[_0x98f3a(0x2f7)](_0x98f3a(0x2e8))&&_0x242114['endsWith'](_0x98f3a(0x252)))[_0x98f3a(0x2ca)](_0x13d859=>{const _0x1ec489=_0x98f3a,_0x1055f3=path[_0x1ec489(0x238)](_0x324a1f,_0x13d859),_0x402859=fs[_0x1ec489(0x2d3)](_0x1055f3),_0x39a7e5=fs[_0x1ec489(0x1da)](_0x1055f3,_0x1ec489(0x2f6)),_0x48ab29=_0x39a7e5[_0x1ec489(0x1ae)]('\x0a')[_0x1ec489(0x2da)]-0x1;return{'fileName':_0x13d859,'createdAt':_0x402859['birthtime'],'userCount':_0x48ab29};})[_0x98f3a(0x2b0)]((_0x8ae8d0,_0x217c7f)=>_0x217c7f[_0x98f3a(0x279)]-_0x8ae8d0[_0x98f3a(0x279)]);_0x553a55[_0x98f3a(0x1b7)](0xc8)[_0x98f3a(0x250)]({'exports':_0x2ed98e});}catch(_0x4dbd68){console['error'](_0x98f3a(0x1fb),_0x4dbd68),_0x553a55['status'](0x1f4)[_0x98f3a(0x250)]({'error':_0x98f3a(0x31e)});}}),router[a27_0x58e125(0x2ae)]('/users-export/trigger',async(_0x409721,_0xcc5ab9)=>{const _0x32f4b6=a27_0x58e125;try{await exportUsersList(),_0xcc5ab9[_0x32f4b6(0x1b7)](0xc8)[_0x32f4b6(0x250)]({'message':_0x32f4b6(0x302)});}catch(_0x9c230c){console[_0x32f4b6(0x2f5)](_0x32f4b6(0x1b9),_0x9c230c),_0xcc5ab9[_0x32f4b6(0x1b7)](0x1f4)[_0x32f4b6(0x250)]({'error':_0x32f4b6(0x21b)});}}),router[a27_0x58e125(0x308)]('/users-export/download/:fileName',async(_0x3b8424,_0x8b2f91)=>{const _0x27e844=a27_0x58e125,{fileName:_0x106c44}=_0x3b8424[_0x27e844(0x29c)],_0x129e4c=path['join'](path[_0x27e844(0x1d4)](require[_0x27e844(0x287)]['filename']),'exports',_0x106c44);if(!fs['existsSync'](_0x129e4c))return _0x8b2f91['status'](0x194)[_0x27e844(0x250)]({'error':_0x27e844(0x1cd)});_0x8b2f91[_0x27e844(0x285)](_0x129e4c);});const cleanCacheForUserFiles=_0x492a63=>{const _0x349c9e=a27_0x58e125;try{if(!fs[_0x349c9e(0x2c8)](_0x492a63)){console[_0x349c9e(0x1bc)](_0x349c9e(0x209)+_0x492a63+_0x349c9e(0x1d9));return;}const _0x563703=path[_0x349c9e(0x238)](path[_0x349c9e(0x1d4)](require[_0x349c9e(0x287)][_0x349c9e(0x2b7)]),_0x349c9e(0x1c9),_0x349c9e(0x324));if(!fs[_0x349c9e(0x2c8)](_0x563703)){console[_0x349c9e(0x1bc)](_0x349c9e(0x2af)+_0x563703+_0x349c9e(0x1d9));return;}const _0x1f75d3=JSON[_0x349c9e(0x2ad)](fs[_0x349c9e(0x1da)](path[_0x349c9e(0x238)](path[_0x349c9e(0x1d4)](require['main'][_0x349c9e(0x2b7)]),_0x349c9e(0x232)))),_0x209c14=fs[_0x349c9e(0x289)](_0x492a63);_0x209c14[_0x349c9e(0x298)](_0x2ac108=>{const _0xc0fc5a=_0x349c9e;_0x1f75d3[_0xc0fc5a(0x324)]['forEach'](_0x471150=>{const _0x1d4103=_0xc0fc5a;_0x471150[_0x1d4103(0x24e)]===_0x2ac108&&_0x471150[_0x1d4103(0x277)]['forEach'](_0x5b957e=>{const _0x52af71=_0x1d4103;try{fs[_0x52af71(0x1ee)](path[_0x52af71(0x238)](_0x563703,_0x5b957e['id']));}catch(_0x45541d){console[_0x52af71(0x2f5)](_0x52af71(0x312)+_0x5b957e['id']+':',_0x45541d);}});});}),analyzeConverterFiles(),console['log'](_0x349c9e(0x1c5)+_0x492a63);}catch(_0xccb5bb){console[_0x349c9e(0x2f5)](_0x349c9e(0x2d0),_0xccb5bb);}};schedule[a27_0x58e125(0x286)]('0\x2023\x20*\x20*\x20*',exportUsersList),schedule['scheduleJob'](a27_0x58e125(0x1e2),sendFollowUpEmails),schedule[a27_0x58e125(0x286)](a27_0x58e125(0x20a),sendAccountDeletionPreventionEmails);const analyzeConverterFiles=()=>{const _0x4d1f0=a27_0x58e125;try{const _0x1a129f=path[_0x4d1f0(0x238)](path[_0x4d1f0(0x1d4)](require['main'][_0x4d1f0(0x2b7)]),_0x4d1f0(0x1c9),_0x4d1f0(0x324)),_0x108238=path[_0x4d1f0(0x238)](path[_0x4d1f0(0x1d4)](require['main'][_0x4d1f0(0x2b7)]),'cadviewer',_0x4d1f0(0x225));if(!fs[_0x4d1f0(0x2c8)](_0x1a129f)){logStream['write']('Le\x20dossier\x20'+_0x1a129f+'\x20n\x27existe\x20pas.');return;}if(!fs[_0x4d1f0(0x2c8)](_0x108238)){logStream[_0x4d1f0(0x207)]('Le\x20dossier\x20'+_0x108238+_0x4d1f0(0x25d));return;}const _0x246d57=fs['readdirSync'](_0x1a129f),_0x3322d3={};_0x246d57[_0x4d1f0(0x298)](_0x20a2e1=>{const _0x158378=_0x4d1f0,_0x6bd6f3=path['join'](_0x1a129f,_0x20a2e1),_0x5f1091=fs[_0x158378(0x2d3)](_0x6bd6f3),_0x45097b=_0x20a2e1['split']('.'),_0x47e6aa=_0x45097b[_0x158378(0x1d2)](0x0,-0x1)[_0x158378(0x1cf)]((_0x5ab6a7,_0x5ef5a4)=>!([_0x158378(0x2ea),'rl'][_0x158378(0x261)](_0x5ab6a7[_0x158378(0x271)]())&&_0x5ef5a4===_0x45097b[_0x158378(0x2da)]-0x2))[_0x158378(0x238)]('.');!Object[_0x158378(0x304)](_0x3322d3)[_0x158378(0x261)](_0x47e6aa)?_0x3322d3[_0x47e6aa]=[{'file':_0x20a2e1,'stats':_0x5f1091}]:_0x3322d3[_0x47e6aa][_0x158378(0x1c3)]({'file':_0x20a2e1,'stats':_0x5f1091});});const _0x50de3c=[];_0x246d57[_0x4d1f0(0x298)](_0x28acbb=>{const _0x483d9b=_0x4d1f0;if(!_0x28acbb[_0x483d9b(0x262)](_0x483d9b(0x33e)))return;let _0x447326=_0x28acbb;const _0x4d22bb=path[_0x483d9b(0x238)](_0x1a129f,_0x28acbb),_0xf34705=fs[_0x483d9b(0x2d3)](_0x4d22bb);let _0x454240=_0xf34705[_0x483d9b(0x1af)],_0x37bf97='';const _0x2b6c4c=fs[_0x483d9b(0x1da)](_0x4d22bb,_0x483d9b(0x2f6)),_0x1ce03a=JSON[_0x483d9b(0x2ad)](_0x2b6c4c),_0x303ab7=_0x1ce03a[_0x483d9b(0x26a)]?.[_0x483d9b(0x2ca)](_0x305bea=>_0x305bea[_0x483d9b(0x1eb)])??[];if(_0x1ce03a[_0x483d9b(0x2b7)])_0x447326=_0x1ce03a[_0x483d9b(0x2b7)];const _0x2885b4=_0x28acbb['split']('.'),_0x48de07=_0x2885b4['slice'](0x0,-0x1)[_0x483d9b(0x1cf)]((_0x68feca,_0x261c4)=>!(['dwg','rl'][_0x483d9b(0x261)](_0x68feca[_0x483d9b(0x271)]())&&_0x261c4===_0x2885b4['length']-0x2))[_0x483d9b(0x238)]('.'),_0x1397ee=Object[_0x483d9b(0x304)](_0x3322d3)['includes'](_0x48de07)?_0x3322d3[_0x48de07]:[];for(const _0x6675f3 of _0x303ab7){Object[_0x483d9b(0x304)](_0x3322d3)[_0x483d9b(0x261)](_0x6675f3)&&_0x1397ee[_0x483d9b(0x1c3)](..._0x3322d3[_0x6675f3]);}const _0x4d58aa=_0x1397ee['map'](({file:_0x11b9d8,stats:_0x2c1ba6})=>{const _0x1590dd=_0x483d9b;return!_0x11b9d8['endsWith']('.dwg.json')&&(_0x454240+=_0x2c1ba6[_0x1590dd(0x1af)]),{'id':_0x11b9d8,'name':_0x11b9d8['endsWith'](_0x1590dd(0x330))?_0x1590dd(0x291):_0x11b9d8['endsWith'](_0x1590dd(0x1aa))?'SVGZ':_0x11b9d8[_0x1590dd(0x262)](_0x1590dd(0x301))?_0x1590dd(0x2fb):_0x11b9d8[_0x1590dd(0x262)](_0x1590dd(0x295))?_0x1590dd(0x327):_0x11b9d8['endsWith'](_0x1590dd(0x252))?'CSV':_0x11b9d8[_0x1590dd(0x262)](_0x1590dd(0x313))?_0x1590dd(0x283):_0x11b9d8[_0x1590dd(0x1ae)]('.')[_0x1590dd(0x240)]()['toUpperCase'](),'color':_0x11b9d8[_0x1590dd(0x262)](_0x1590dd(0x330))||_0x11b9d8['endsWith'](_0x1590dd(0x1aa))?_0x1590dd(0x315):_0x11b9d8[_0x1590dd(0x262)]('.pdf')?_0x1590dd(0x2b6):_0x11b9d8[_0x1590dd(0x262)](_0x1590dd(0x295))?_0x1590dd(0x2eb):_0x11b9d8[_0x1590dd(0x262)](_0x1590dd(0x252))?_0x1590dd(0x264):_0x11b9d8['endsWith'](_0x1590dd(0x313))?_0x1590dd(0x2e7):_0x1590dd(0x20b)};});if(_0x4d58aa['some'](_0x284c25=>_0x284c25['id'][_0x483d9b(0x261)](_0x483d9b(0x247))))_0x37bf97='RL/TL\x20Processing';else{if(_0x4d58aa[_0x483d9b(0x273)](_0x1b9ab=>[_0x483d9b(0x1dc),_0x483d9b(0x1c6)][_0x483d9b(0x261)](_0x1b9ab['id'][_0x483d9b(0x1ae)]('.')['pop']()))&&_0x4d58aa[_0x483d9b(0x273)](_0xd020c0=>[_0x483d9b(0x239)][_0x483d9b(0x261)](_0xd020c0['id'][_0x483d9b(0x1ae)]('.')[_0x483d9b(0x240)]())))_0x37bf97=_0x483d9b(0x254);else{if(_0x4d58aa[_0x483d9b(0x273)](_0x44cfe6=>[_0x483d9b(0x1dc),_0x483d9b(0x1c6)]['includes'](_0x44cfe6['id']['split']('.')[_0x483d9b(0x240)]())))_0x37bf97='Display\x20of\x20DWG';else{if(_0x4d58aa['some'](_0x31f944=>[_0x483d9b(0x250)][_0x483d9b(0x261)](_0x31f944['id']['split']('.')['pop']()))&&_0x4d58aa[_0x483d9b(0x273)](_0x5c5edb=>[_0x483d9b(0x2ea)][_0x483d9b(0x261)](_0x5c5edb['id'][_0x483d9b(0x1ae)]('.')[_0x483d9b(0x240)]())))_0x37bf97=_0x483d9b(0x28d);else{if(_0x4d58aa[_0x483d9b(0x273)](_0x5477ef=>[_0x483d9b(0x1a6)][_0x483d9b(0x261)](_0x5477ef['id'][_0x483d9b(0x1ae)]('.')[_0x483d9b(0x240)]())))_0x37bf97=_0x483d9b(0x210);else{if(_0x4d58aa[_0x483d9b(0x273)](_0x28c6b8=>[_0x483d9b(0x250)][_0x483d9b(0x261)](_0x28c6b8['id'][_0x483d9b(0x1ae)]('.')[_0x483d9b(0x240)]()))&&!_0x4d58aa['some'](_0x46c7c9=>[_0x483d9b(0x2ea)][_0x483d9b(0x261)](_0x46c7c9['id'][_0x483d9b(0x1ae)]('.')[_0x483d9b(0x240)]())))_0x37bf97='DWG\x20file\x20in\x20multiple\x20files';else _0x4d58aa[_0x483d9b(0x273)](_0xf5e83=>[_0x483d9b(0x250)][_0x483d9b(0x261)](_0xf5e83['id']['split']('.')[_0x483d9b(0x240)]()))&&(_0x37bf97='Cache\x20conversion');}}}}}_0x50de3c['push']({'name':_0x28acbb,'goodFileName':_0x447326,'size':_0x454240,'createdAt':_0xf34705[_0x483d9b(0x1d7)],'updatedAt':_0xf34705[_0x483d9b(0x2c5)],'readAt':_0xf34705['atime'],'action':_0x37bf97,'availableFormats':_0x4d58aa});}),_0x50de3c[_0x4d1f0(0x2b0)]((_0x4197da,_0x2b5963)=>_0x2b5963['updatedAt']-_0x4197da[_0x4d1f0(0x294)]);const _0x422f0e={'timestamp':new Date(),'totalFiles':_0x50de3c[_0x4d1f0(0x2da)],'files':_0x50de3c},_0xe4c133=path[_0x4d1f0(0x238)](_0x108238,'converter-files-analysis.json');fs['writeFileSync'](_0xe4c133,JSON[_0x4d1f0(0x2bf)](_0x422f0e,null,0x2));}catch(_0x349bc8){console['log'](_0x4d1f0(0x329)),console[_0x4d1f0(0x1bc)](_0x4d1f0(0x20d)+_0x349bc8[_0x4d1f0(0x2bc)]);}},scheduleFileAnalysis=()=>{const _0x33ca14=a27_0x58e125;analyzeConverterFiles(),schedule[_0x33ca14(0x286)](_0x33ca14(0x29d),analyzeConverterFiles),logStream['write']('Analyse\x20priodique\x20des\x20fichiers\x20du\x20dossier\x20converters/files\x20planifie\x20(toutes\x20les\x20heures)');};scheduleFileAnalysis(),router[a27_0x58e125(0x2ae)](a27_0x58e125(0x227),async(_0x251ba6,_0x7098b5)=>{const _0x24f1fd=a27_0x58e125,{userId:_0x1449b4}=_0x251ba6[_0x24f1fd(0x25a)];let _0x5057eb;try{const [_0x447b14]=await conn[_0x24f1fd(0x213)]()[_0x24f1fd(0x1a4)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?',[_0x1449b4]);_0x447b14['length']>0x0&&(_0x5057eb=_0x447b14[0x0]);}catch(_0xfbba0c){console['log']({'err':_0xfbba0c}),_0x7098b5[_0x24f1fd(0x1b7)](0x1f4)[_0x24f1fd(0x250)]({'error':_0x24f1fd(0x2c1)});return;}if(!_0x5057eb){_0x7098b5['status'](0x191)[_0x24f1fd(0x250)]({'error':_0x24f1fd(0x1cc)});return;}if(_0x5057eb[_0x24f1fd(0x1ab)]!==_0x24f1fd(0x1fc)){_0x7098b5[_0x24f1fd(0x1b7)](0x190)[_0x24f1fd(0x250)]({'error':'This\x20action\x20is\x20only\x20available\x20for\x20demo\x20users'});return;}const _0x4b845d=new Date();try{await conn['promise']()[_0x24f1fd(0x1a4)]('UPDATE\x20`users`\x20SET\x20`created_at`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?',[_0x4b845d,_0x1449b4]),_0x7098b5['status'](0xc8)['json']({'success':!![],'message':_0x24f1fd(0x1d1)+config[_0x24f1fd(0x325)]+_0x24f1fd(0x1e0)});}catch(_0x1e8390){console['log']({'err':_0x1e8390}),_0x7098b5[_0x24f1fd(0x1b7)](0x1f4)['json']({'error':_0x24f1fd(0x2c1)});return;}}),router[a27_0x58e125(0x308)](a27_0x58e125(0x1ff),async(_0x46adfb,_0x6ecc7)=>{const _0xdc04d5=a27_0x58e125;try{const _0x302212=getHotConfig(),_0x317a3f={'maxFileSize':(_0x302212[_0xdc04d5(0x2fc)]||0x32)*0x400*0x400,'maxConcurrentUploads':_0x302212['maxConcurrentUploads']||0x3,'maxFiles':_0x302212[_0xdc04d5(0x267)]||0xa};_0x6ecc7[_0xdc04d5(0x1b7)](0xc8)[_0xdc04d5(0x250)](_0x317a3f);}catch(_0x3f3331){console[_0xdc04d5(0x2f5)](_0xdc04d5(0x255),_0x3f3331),_0x6ecc7['status'](0x1f4)[_0xdc04d5(0x250)]({'message':'Error\x20retrieving\x20upload\x20configuration'});}}),module[a27_0x58e125(0x29a)]={'router':router,'analyzeConverterFiles':analyzeConverterFiles};
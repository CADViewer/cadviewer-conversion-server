const a26_0x2f5002=a26_0xf99e;(function(_0x42f1df,_0x2c9de1){const _0xde0584=a26_0xf99e,_0x402763=_0x42f1df();while(!![]){try{const _0x24ca5b=parseInt(_0xde0584(0x164))/0x1*(-parseInt(_0xde0584(0x133))/0x2)+parseInt(_0xde0584(0x176))/0x3+-parseInt(_0xde0584(0x245))/0x4+-parseInt(_0xde0584(0x270))/0x5*(-parseInt(_0xde0584(0xf1))/0x6)+-parseInt(_0xde0584(0x1fb))/0x7*(parseInt(_0xde0584(0x158))/0x8)+parseInt(_0xde0584(0x1c3))/0x9+-parseInt(_0xde0584(0x1ef))/0xa;if(_0x24ca5b===_0x2c9de1)break;else _0x402763['push'](_0x402763['shift']());}catch(_0x3fc7d7){_0x402763['push'](_0x402763['shift']());}}}(a26_0x357e,0x27a7a));const express=require(a26_0x2f5002(0x154)),router=express[a26_0x2f5002(0x1f6)](),multer=require('multer'),fs=require('fs'),path=require('path'),getHotConfig=require(a26_0x2f5002(0x223))[a26_0x2f5002(0x16d)],{exec}=require(a26_0x2f5002(0x26d)),os=require('os'),conn=require(a26_0x2f5002(0x137)),bcrypt=require(a26_0x2f5002(0xfd)),osu=require(a26_0x2f5002(0x1ab)),schedule=require(a26_0x2f5002(0x17c)),counter=require(a26_0x2f5002(0xfb)),{randomUUID}=require(a26_0x2f5002(0x1ff)),logStream=require(a26_0x2f5002(0x238)),config=require(a26_0x2f5002(0x271)),basicAuth=require(a26_0x2f5002(0x174)),protectedRoute=basicAuth({'users':{[config['settingsUserBasicAuth']]:config[a26_0x2f5002(0x230)]},'challenge':!![],'realm':'CADViewer\x20Settings'});router[a26_0x2f5002(0x138)]('/tailwind.js',async(_0x4c2837,_0x1b8e12)=>{const _0x3be04b=a26_0x2f5002;_0x1b8e12[_0x3be04b(0x1e6)](path['join'](path[_0x3be04b(0x191)](require[_0x3be04b(0x1d1)][_0x3be04b(0x241)]),_0x3be04b(0x16f)));}),router[a26_0x2f5002(0x138)]('/chart.min.js',async(_0x2909c5,_0x4db652)=>{const _0x57c7da=a26_0x2f5002;_0x4db652['sendFile'](path[_0x57c7da(0x254)](path[_0x57c7da(0x191)](require[_0x57c7da(0x1d1)][_0x57c7da(0x241)]),_0x57c7da(0x11a)));}),router[a26_0x2f5002(0x138)](a26_0x2f5002(0x10c),async(_0x17e162,_0x20847e)=>{const _0x138a67=a26_0x2f5002;_0x20847e[_0x138a67(0x1e6)](path[_0x138a67(0x254)](path[_0x138a67(0x191)](require[_0x138a67(0x1d1)]['filename']),_0x138a67(0x150)));}),router[a26_0x2f5002(0x138)](a26_0x2f5002(0x19f),async(_0x2da469,_0x72bd5)=>{const _0x475eb1=a26_0x2f5002;_0x72bd5[_0x475eb1(0x1e6)](path[_0x475eb1(0x254)](path[_0x475eb1(0x191)](require['main']['filename']),_0x475eb1(0xe6)));}),router['get'](a26_0x2f5002(0x281),async(_0x248ba3,_0x5d5ffc)=>{const _0x5de92d=a26_0x2f5002;_0x5d5ffc[_0x5de92d(0x1e6)](path['join'](path[_0x5de92d(0x191)](require[_0x5de92d(0x1d1)][_0x5de92d(0x241)]),'cadviewer/settings/vanilla-toast.js'));}),router['get'](a26_0x2f5002(0x25b),async(_0x35ffe1,_0x1c4096)=>{const _0x5d1f26=a26_0x2f5002;_0x1c4096[_0x5d1f26(0x1e6)](path[_0x5d1f26(0x254)](path[_0x5d1f26(0x191)](require[_0x5d1f26(0x1d1)][_0x5d1f26(0x241)]),_0x5d1f26(0x26f)));}),router[a26_0x2f5002(0x138)]('/',protectedRoute,async(_0xc64b8c,_0x126cfc)=>{const _0x21c448=a26_0x2f5002,_0xeed4ad=fs['readFileSync'](path[_0x21c448(0x254)](path[_0x21c448(0x191)](require[_0x21c448(0x1d1)]['filename']),_0x21c448(0x1a0)),_0x21c448(0x11b)),_0x920226=_0xeed4ad[_0x21c448(0x1b3)](_0x21c448(0x218),_0xc64b8c[_0x21c448(0x111)]);_0x126cfc[_0x21c448(0x10f)](_0x920226);}),router[a26_0x2f5002(0x138)](a26_0x2f5002(0x1a2),protectedRoute,async(_0x314e92,_0x5948bf)=>{const _0xeee821=a26_0x2f5002,_0x51818d=fs[_0xeee821(0x190)](path['join'](path[_0xeee821(0x191)](require[_0xeee821(0x1d1)][_0xeee821(0x241)]),_0xeee821(0x1b1)),_0xeee821(0x11b)),_0x247583=_0x51818d[_0xeee821(0x1b3)](_0xeee821(0x218),_0x314e92['version']);_0x5948bf[_0xeee821(0x10f)](_0x247583);}),router[a26_0x2f5002(0x138)](a26_0x2f5002(0x17e),protectedRoute,async(_0x102b69,_0x411cd0)=>{const _0x38f16a=a26_0x2f5002,_0x241331=fs['readFileSync'](path[_0x38f16a(0x254)](path[_0x38f16a(0x191)](require['main'][_0x38f16a(0x241)]),_0x38f16a(0x109)),_0x38f16a(0x11b)),_0x3789fa=_0x241331[_0x38f16a(0x1b3)](_0x38f16a(0x218),_0x102b69[_0x38f16a(0x111)]);_0x411cd0[_0x38f16a(0x10f)](_0x3789fa);}),router['get'](a26_0x2f5002(0x269),protectedRoute,async(_0x3936d7,_0x1c2ab3)=>{const _0x1d8f9c=a26_0x2f5002,_0x2060f1=fs[_0x1d8f9c(0x190)](path[_0x1d8f9c(0x254)](path[_0x1d8f9c(0x191)](require[_0x1d8f9c(0x1d1)][_0x1d8f9c(0x241)]),_0x1d8f9c(0x274)),_0x1d8f9c(0x11b)),_0x2f90c9=_0x2060f1['replaceAll'](_0x1d8f9c(0x218),_0x3936d7['version']);_0x1c2ab3['send'](_0x2f90c9);}),router['post'](a26_0x2f5002(0x269),async(_0x2ccf0e,_0x2b26df)=>{const _0x5b786b=a26_0x2f5002,_0x2c7664=path[_0x5b786b(0x254)](path[_0x5b786b(0x191)](require[_0x5b786b(0x1d1)][_0x5b786b(0x241)]),'CADViewer_config.json'),_0x4d720a=JSON[_0x5b786b(0x14d)](fs['readFileSync'](_0x2c7664,'utf8')),_0x58460d=_0x4d720a[_0x5b786b(0x18e)];if(!fs[_0x5b786b(0x130)](_0x58460d))return _0x2b26df[_0x5b786b(0x14f)](0x194)[_0x5b786b(0xe2)]({'message':_0x5b786b(0x24c)});const _0x3a741d=_0x4b3a53=>{const _0x2b2730=_0x5b786b;let _0x377151=0x0;return _0x4b3a53[_0x2b2730(0x1a9)](_0x1ef086=>{const _0x555f5e=_0x2b2730;_0x1ef086[_0x555f5e(0x1f9)]?_0x377151+=_0x3a741d(_0x1ef086[_0x555f5e(0x1f8)]):_0x377151+=_0x1ef086[_0x555f5e(0x200)];}),_0x377151;},_0x3a5a10=_0x1c0f8f=>{const _0x32986e=_0x5b786b;if(_0x1c0f8f<0x400)return _0x1c0f8f+'\x20B';else{if(_0x1c0f8f<0x400*0x400)return(_0x1c0f8f/0x400)[_0x32986e(0x22e)](0x2)+_0x32986e(0x187);else return _0x1c0f8f<0x400*0x400*0x400?(_0x1c0f8f/0x400/0x400)[_0x32986e(0x22e)](0x2)+_0x32986e(0x214):(_0x1c0f8f/0x400/0x400/0x400)[_0x32986e(0x22e)](0x2)+_0x32986e(0x23d);}},_0x5bc7f7=(_0x42ddc1,_0x3cc187='')=>{const _0x578d18=fs['readdirSync'](_0x42ddc1),_0x3203c2=[];return _0x578d18['forEach'](_0x350a5e=>{const _0x2a4f15=a26_0xf99e,_0x120a13=path['join'](_0x42ddc1,_0x350a5e)[_0x2a4f15(0x1b3)]('\x5c','/'),_0x28764b=fs[_0x2a4f15(0x166)](_0x120a13);if(_0x28764b[_0x2a4f15(0x1d7)]()){const _0x24e65c=_0x5bc7f7(_0x120a13,_0x3cc187+_0x2a4f15(0x18b));_0x3203c2[_0x2a4f15(0x153)]({'name':_0x350a5e,'size':_0x28764b[_0x2a4f15(0x200)],'path':_0x120a13,'permissions':_0x28764b[_0x2a4f15(0x15d)],'isFolder':!![],'sub_dirs':_0x24e65c});}else _0x3203c2[_0x2a4f15(0x153)]({'name':_0x350a5e,'size':_0x28764b[_0x2a4f15(0x200)],'path':_0x120a13,'permissions':_0x28764b['mode'],'isFolder':![]});}),_0x3203c2;};let _0x2c17e0=_0x5bc7f7(_0x58460d);const _0x579102=_0x173278=>{return _0x173278['forEach'](_0x1dfd27=>{const _0x150df2=a26_0xf99e;_0x1dfd27[_0x150df2(0x1f9)]?(_0x1dfd27['formatedSize']=_0x3a5a10(_0x3a741d(_0x1dfd27[_0x150df2(0x1f8)])),_0x1dfd27['sub_dirs']=_0x579102(_0x1dfd27[_0x150df2(0x1f8)])):_0x1dfd27[_0x150df2(0x24f)]=_0x3a5a10(_0x1dfd27[_0x150df2(0x200)]);}),_0x173278;};_0x2b26df[_0x5b786b(0x14f)](0xc8)[_0x5b786b(0xe2)](_0x579102(_0x2c17e0));}),router['post'](a26_0x2f5002(0xe9),async(_0xfd4b0d,_0x36fade)=>{const _0x1f5f73=a26_0x2f5002,{path:_0x1d0e49}=_0xfd4b0d[_0x1f5f73(0x1b6)],_0x15eac8=_0x1d0e49[_0x1f5f73(0x21a)]('/')[_0x1f5f73(0x16c)]();if(!fs[_0x1f5f73(0x130)](_0x1d0e49))return _0x36fade[_0x1f5f73(0x14f)](0x194)[_0x1f5f73(0xe2)]({'message':_0x1f5f73(0x1ca)});_0x36fade[_0x1f5f73(0x19b)](_0x1f5f73(0x186),_0x1f5f73(0x206)),_0x36fade[_0x1f5f73(0x19b)](_0x1f5f73(0x1ed),'attachment;\x20filename=\x22'+_0x15eac8+'\x22'),_0x36fade[_0x1f5f73(0x100)](_0x1d0e49,_0xdbd62d=>{const _0x328164=_0x1f5f73;_0xdbd62d&&_0x36fade['status'](0x1f4)[_0x328164(0xe2)]({'message':_0x328164(0x1c8)});});}),router['post']('/folders/create',async(_0x1437a3,_0x567de9)=>{const _0x1e4ce9=a26_0x2f5002,_0x5ef0a4=_0x1437a3[_0x1e4ce9(0x1b6)],_0x3f3609=getHotConfig()['folderLocation'],_0x417f2d=path['join'](_0x3f3609,_0x5ef0a4[_0x1e4ce9(0x148)]);if(!fs[_0x1e4ce9(0x130)](_0x417f2d))return _0x567de9[_0x1e4ce9(0x14f)](0x194)[_0x1e4ce9(0xe2)]({'message':_0x1e4ce9(0x259)});if(fs[_0x1e4ce9(0x130)](path[_0x1e4ce9(0x254)](_0x417f2d,_0x5ef0a4['folderName'])))return _0x567de9[_0x1e4ce9(0x14f)](0x199)[_0x1e4ce9(0xe2)]({'message':_0x1e4ce9(0x1ee)});fs[_0x1e4ce9(0x1cd)](path[_0x1e4ce9(0x254)](_0x417f2d,_0x5ef0a4['folderName']),_0x16f55e=>{const _0xa0903d=_0x1e4ce9;_0x16f55e&&_0x567de9[_0xa0903d(0x14f)](0x1f4)[_0xa0903d(0xe2)]({'message':_0xa0903d(0x123)}),_0x567de9[_0xa0903d(0x14f)](0xc8)['json']({'message':_0xa0903d(0x113)});});}),router[a26_0x2f5002(0x22a)](a26_0x2f5002(0xf2),async(_0x11c3cf,_0x3fbaf3)=>{const _0x5b545b=a26_0x2f5002,{newName:_0x522a40,isFolder:_0x4a8f76,path:_0x4b3f97}=_0x11c3cf[_0x5b545b(0x1b6)];if(!fs['existsSync'](_0x4b3f97))return _0x3fbaf3[_0x5b545b(0x14f)](0x194)[_0x5b545b(0xe2)]({'message':_0x4a8f76?_0x5b545b(0x14c):_0x5b545b(0x1ca)});const _0x3cf204=_0x4b3f97['replace'](_0x4b3f97[_0x5b545b(0x21a)]('/')[_0x5b545b(0x16c)](),_0x522a40),_0x19a66c=fs[_0x5b545b(0x166)](_0x4b3f97);_0x19a66c['isDirectory']()?fs[_0x5b545b(0x135)](_0x4b3f97,_0x3cf204):(fs[_0x5b545b(0x248)](_0x4b3f97,_0x3cf204),fs['unlinkSync'](_0x4b3f97)),_0x3fbaf3[_0x5b545b(0x14f)](0xc8)[_0x5b545b(0xe2)]({'message':_0x4a8f76?_0x5b545b(0x15a):'File\x20renamed.'});}),router[a26_0x2f5002(0x129)](a26_0x2f5002(0x1ba),async(_0xf71d0e,_0x30e5a1)=>{const _0x25bdc2=a26_0x2f5002,{path:_0xb8632d}=_0xf71d0e[_0x25bdc2(0x1b6)];if(!fs[_0x25bdc2(0x130)](_0xb8632d))return _0x30e5a1['status'](0x194)[_0x25bdc2(0xe2)]({'message':_0x25bdc2(0x181)});const _0x1d657a=fs['statSync'](_0xb8632d);if(_0x1d657a[_0x25bdc2(0x14e)]())fs[_0x25bdc2(0x15e)](_0xb8632d,_0x275a9e=>{const _0x4fbed8=_0x25bdc2;_0x275a9e&&_0x30e5a1[_0x4fbed8(0x14f)](0x1f4)[_0x4fbed8(0xe2)]({'message':_0x4fbed8(0x1c6)}),_0x30e5a1['status'](0xc8)[_0x4fbed8(0xe2)]({'message':_0x4fbed8(0x224)});});else _0x1d657a['isDirectory']()&&fs['rmdir'](_0xb8632d,{'recursive':!![]},_0x116229=>{const _0x2e88e1=_0x25bdc2;_0x116229&&_0x30e5a1[_0x2e88e1(0x14f)](0x1f4)['json']({'message':_0x2e88e1(0x27c)}),_0x30e5a1[_0x2e88e1(0x14f)](0xc8)[_0x2e88e1(0xe2)]({'message':_0x2e88e1(0x212)});});});!fs[a26_0x2f5002(0x130)](a26_0x2f5002(0x146))&&fs[a26_0x2f5002(0x27d)](a26_0x2f5002(0x146));const storage=multer[a26_0x2f5002(0x110)]({'destination':(_0x4cbd9a,_0x1b0e6c,_0x3a5160)=>{const _0x182fa6=a26_0x2f5002;_0x3a5160(null,_0x182fa6(0x209));},'filename':(_0x505325,_0x546c90,_0x453b82)=>{const _0x4b53d7=a26_0x2f5002;_0x453b82(null,Date[_0x4b53d7(0x1dd)]()+path[_0x4b53d7(0x263)](_0x546c90[_0x4b53d7(0x1a4)]));}}),upload=multer({'storage':storage,'limits':{'fileSize':0xa*0x400*0x400}});router[a26_0x2f5002(0x18d)](a26_0x2f5002(0x25a),upload[a26_0x2f5002(0x27a)](a26_0x2f5002(0x23c)),async(_0x386b58,_0x157891)=>{const _0x4b24be=a26_0x2f5002,_0x4bfcea=_0x386b58[_0x4b24be(0x1b6)];if(!_0x386b58['files']||_0x386b58[_0x4b24be(0x23c)][_0x4b24be(0x199)]===0x0)return _0x157891[_0x4b24be(0x14f)](0x190)['json']({'message':'No\x20files\x20uploaded'});const _0x3c7b09=getHotConfig()[_0x4b24be(0x18e)],_0x96f864=path[_0x4b24be(0x254)](_0x3c7b09,_0x4bfcea['path']);if(!fs[_0x4b24be(0x130)](_0x96f864))return _0x157891[_0x4b24be(0x14f)](0x194)[_0x4b24be(0xe2)]({'message':'Folder\x20not\x20found.'});const _0x3c42eb=_0x386b58[_0x4b24be(0x23c)][_0x4b24be(0x1be)](_0x18d68c=>({'originalname':_0x18d68c['originalname'],'filename':_0x18d68c['filename'],'mimetype':_0x18d68c[_0x4b24be(0x183)],'size':_0x18d68c['size']}));_0x3c42eb[_0x4b24be(0x1a9)](_0x27fd3f=>{const _0x5c3191=_0x4b24be;fs[_0x5c3191(0x248)](path['join'](_0x5c3191(0x209),_0x27fd3f[_0x5c3191(0x241)]),path[_0x5c3191(0x254)](_0x96f864,_0x27fd3f['originalname'])),fs[_0x5c3191(0x215)](path[_0x5c3191(0x254)](_0x5c3191(0x209),_0x27fd3f[_0x5c3191(0x241)]));}),_0x157891[_0x4b24be(0x14f)](0xc8)[_0x4b24be(0xe2)]({'message':'Files\x20uploaded\x20successfully','files':_0x3c42eb});}),router[a26_0x2f5002(0x22a)](a26_0x2f5002(0x1e7),async(_0x2c8cb8,_0x43a816)=>{const _0x5c3887=a26_0x2f5002,_0x2b9bec=path[_0x5c3887(0x254)](path[_0x5c3887(0x191)](require[_0x5c3887(0x1d1)]['filename']),_0x5c3887(0x25f)),{config:_0x15bf80}=_0x2c8cb8[_0x5c3887(0x1b6)];if(!_0x15bf80)return _0x43a816[_0x5c3887(0x14f)](0x190)[_0x5c3887(0xe2)]({'message':_0x5c3887(0x1f0)});try{fs[_0x5c3887(0x258)](_0x2b9bec,JSON['stringify'](_0x15bf80,null,0x4)),_0x43a816[_0x5c3887(0x14f)](0xc8)[_0x5c3887(0xe2)]({'message':'Config\x20updated\x20successfully'});}catch(_0x1ebf18){_0x43a816['status'](0x1f4)[_0x5c3887(0xe2)]({'message':_0x5c3887(0x1cc)});}}),router[a26_0x2f5002(0x22a)](a26_0x2f5002(0x13e),async(_0x42c8da,_0x57bc10)=>{const _0x1d26e4=a26_0x2f5002,{key:_0x495c88,value:_0x163dac}=_0x42c8da['body'],_0x2bb20e=path[_0x1d26e4(0x254)](path[_0x1d26e4(0x191)](require['main'][_0x1d26e4(0x241)]),_0x1d26e4(0x25f));fs[_0x1d26e4(0x149)](_0x2bb20e,_0x1d26e4(0x11b),function(_0x33c0b7,_0x57ec76){const _0x2e1889=_0x1d26e4;_0x33c0b7&&_0x57bc10[_0x2e1889(0x14f)](0x1f4)[_0x2e1889(0x10f)](_0x33c0b7);const _0x186120=JSON[_0x2e1889(0x14d)](_0x57ec76);_0x186120[_0x495c88]=_0x163dac;if(_0x495c88==='autodetect_location'){let _0x36ecd4='';if(_0x186120[_0x2e1889(0x193)]){_0x36ecd4=os[_0x2e1889(0x144)]();if(_0x36ecd4===_0x2e1889(0x1e8))_0x36ecd4=_0x2e1889(0x12a);else{if(_0x36ecd4===_0x2e1889(0x10d))_0x36ecd4=_0x2e1889(0x102);}}else _0x36ecd4=_0x186120[_0x2e1889(0x144)];if(_0x36ecd4===_0x2e1889(0x12a)){_0x186120[_0x2e1889(0xe7)]=path[_0x2e1889(0x1c2)](__dirname,'..')+'/';const _0xebd23d=/\\/g;_0x186120[_0x2e1889(0xe7)]=_0x186120['ServerLocation']['replace'](_0xebd23d,'/');}else _0x186120[_0x2e1889(0xe7)]=path['resolve'](__dirname,'..')+'/';}if(_0x495c88===_0x2e1889(0x193)){let _0x48c14b=os[_0x2e1889(0x144)]();if(_0x48c14b===_0x2e1889(0x1e8))_0x48c14b=_0x2e1889(0x12a);else _0x48c14b=_0x2e1889(0x102);_0x48c14b===_0x2e1889(0x12a)?_0x163dac===!![]&&(_0x186120[_0x2e1889(0xf8)]=_0x186120[_0x2e1889(0x1eb)],_0x186120[_0x2e1889(0xf4)]=_0x186120[_0x2e1889(0x143)],_0x186120[_0x2e1889(0x1c1)]=_0x186120[_0x2e1889(0x216)]):_0x163dac===!![]&&(_0x186120[_0x2e1889(0xf8)]=_0x186120['autoxchange_executable_linux'],_0x186120[_0x2e1889(0xf4)]=_0x186120['dwgmerge_executable_linux'],_0x186120[_0x2e1889(0x1c1)]=_0x186120['linklist_executable_linux']),_0x186120['platform']=_0x48c14b;}if(_0x186120[_0x2e1889(0x193)]){let _0x4ffe14=os[_0x2e1889(0x144)]();if(_0x4ffe14===_0x2e1889(0x1e8))_0x4ffe14=_0x2e1889(0x12a);else _0x4ffe14='linux';if(_0x4ffe14==='windows'){if(_0x495c88==='autoxchange_executable_windows')_0x186120['autoxchange_executable']=_0x163dac;else{if(_0x495c88===_0x2e1889(0x143))_0x186120[_0x2e1889(0xf4)]=_0x163dac;else _0x495c88===_0x2e1889(0x216)&&(_0x186120[_0x2e1889(0x1c1)]=_0x163dac);}}else{if(_0x495c88===_0x2e1889(0x217))_0x186120[_0x2e1889(0xf8)]=_0x163dac;else{if(_0x495c88==='dwgmerge_executable_linux')_0x186120[_0x2e1889(0xf4)]=_0x163dac;else _0x495c88===_0x2e1889(0x1f1)&&(_0x186120[_0x2e1889(0x1c1)]=_0x163dac);}}}fs[_0x2e1889(0x1df)](_0x2bb20e,JSON['stringify'](_0x186120,null,0x4),function(_0x44e954){const _0x5b4d40=_0x2e1889;_0x44e954&&_0x57bc10['status'](0x1f4)[_0x5b4d40(0x10f)](_0x44e954),_0x57bc10[_0x5b4d40(0x14f)](0xc8)['json']({'message':_0x5b4d40(0x1b8)});});});}),router[a26_0x2f5002(0x18d)](a26_0x2f5002(0xff),async(_0x8aae25,_0x38b2da)=>{const _0x5c009c=a26_0x2f5002,_0x1f36c2=getHotConfig(),_0x3b7c02=(_0x1f36c2[_0x5c009c(0x17a)][_0x5c009c(0x18c)](_0x1f36c2['ServerLocation'])?'':_0x1f36c2['ServerLocation'])+_0x1f36c2['dwgmergeLocation'],_0x1c08bf=(_0x1f36c2[_0x5c009c(0x17a)][_0x5c009c(0x18c)](_0x1f36c2[_0x5c009c(0xe7)])?'':_0x1f36c2[_0x5c009c(0xe7)])+_0x1f36c2[_0x5c009c(0x21b)],_0x388944=(_0x1f36c2['converterLocation']['includes'](_0x1f36c2['ServerLocation'])?'':_0x1f36c2['ServerLocation'])+_0x1f36c2[_0x5c009c(0x117)],_0x1dcf0e=/ax202.*\.exe/,_0x39639b=/ax202.*/,_0x18ee2e=/dwgmerge202.*\.exe/,_0x3a2481=/dwgmerge_202.*/,_0x296025=/linklist_202.*\.exe/,_0x3f46ab=/linklist_202.*/,_0x4deb69=[],_0x25a896=[],_0xf21d30=[],_0x3a0c57=[],_0x47fd19=[],_0x5f48ec=[];let _0x8d84d1='';if(_0x1f36c2[_0x5c009c(0x193)]){_0x8d84d1=os[_0x5c009c(0x144)]();if(_0x8d84d1===_0x5c009c(0x1e8))_0x8d84d1=_0x5c009c(0x12a);else{if(_0x8d84d1===_0x5c009c(0x10d))_0x8d84d1=_0x5c009c(0x102);}}else _0x8d84d1=_0x1f36c2[_0x5c009c(0x144)];fs[_0x5c009c(0x201)](_0x388944[_0x5c009c(0x1b3)]('linux',_0x5c009c(0x12a)))['forEach'](_0x2eecc2=>{const _0x233dd5=_0x5c009c;if(_0x1dcf0e[_0x233dd5(0x22d)](_0x2eecc2[_0x233dd5(0x207)]()))_0x4deb69[_0x233dd5(0x153)](_0x2eecc2);}),fs[_0x5c009c(0x201)](_0x3b7c02[_0x5c009c(0x1b3)]('linux','windows'))[_0x5c009c(0x1a9)](_0x2b33b2=>{const _0x4657eb=_0x5c009c;if(_0x18ee2e['test'](_0x2b33b2[_0x4657eb(0x207)]()))_0x25a896[_0x4657eb(0x153)](_0x2b33b2);}),fs[_0x5c009c(0x201)](_0x1c08bf['replaceAll'](_0x5c009c(0x102),_0x5c009c(0x12a)))['forEach'](_0x148398=>{const _0xac7570=_0x5c009c;if(_0x296025['test'](_0x148398[_0xac7570(0x207)]()))_0xf21d30['push'](_0x148398);}),fs[_0x5c009c(0x201)](_0x388944[_0x5c009c(0x1b3)](_0x5c009c(0x12a),_0x5c009c(0x102)))[_0x5c009c(0x1a9)](_0x26aec6=>{const _0x114f10=_0x5c009c;if(_0x39639b[_0x114f10(0x22d)](_0x26aec6[_0x114f10(0x207)]()))_0x3a0c57['push'](_0x26aec6);}),fs['readdirSync'](_0x3b7c02[_0x5c009c(0x1b3)](_0x5c009c(0x12a),_0x5c009c(0x102)))[_0x5c009c(0x1a9)](_0x39615f=>{const _0x42bbfa=_0x5c009c;if(_0x3a2481[_0x42bbfa(0x22d)](_0x39615f[_0x42bbfa(0x207)]()))_0x47fd19[_0x42bbfa(0x153)](_0x39615f);}),fs['readdirSync'](_0x1c08bf[_0x5c009c(0x1b3)](_0x5c009c(0x12a),_0x5c009c(0x102)))[_0x5c009c(0x1a9)](_0x439d49=>{const _0x356450=_0x5c009c;if(_0x3f46ab['test'](_0x439d49[_0x356450(0x207)]()))_0x5f48ec[_0x356450(0x153)](_0x439d49);});const _0x1c255f=[_0x5c009c(0x1c4),_0x5c009c(0x26a),_0x5c009c(0x188),'converterpathLin',_0x5c009c(0x232)],_0x412f42=[_0x5c009c(0x189),'fileLocationUrl','converterLocation',_0x5c009c(0x1b5),_0x5c009c(0x132),_0x5c009c(0xf5),_0x5c009c(0x142),_0x5c009c(0x17a),'linklistLocation',_0x5c009c(0x111)],_0x42ed5f=[_0x5c009c(0x157),_0x5c009c(0x280),'mysqlUsername',_0x5c009c(0x275),_0x5c009c(0x264),_0x5c009c(0x23f),_0x5c009c(0x284)],_0x15f11={'ServerUrl':_0x5c009c(0x26e),'autoxchange_executable':'AutoXchange\x20Settings','linklist_executable':'LinkList\x20Settings','dwgmerge_executable':'DwgMerge\x20Settings','setup_mysqlHost':_0x5c009c(0x27b),'callbackMethod_gatewayUrl_flag':_0x5c009c(0x256),'userFolderMaximumFiles':_0x5c009c(0x1e0),'smtpHost':'Mail\x20Server\x20Settings'},_0xca6e9={'https':_0x5c009c(0x267),'ServerFrontEndUrlAsAllowedOriginOnly':_0x5c009c(0x267),'autodetect_platform':_0x5c009c(0x267),'cvjs_svgz_compress':'boolean','cached_conversion':'boolean','remainOnServer':_0x5c009c(0x267),'cvjs_debug':_0x5c009c(0x267),'autodetect_location':_0x5c009c(0x267),'platform':_0x5c009c(0x168),'autoxchange_executable':'radio|'+(_0x8d84d1===_0x5c009c(0x12a)?_0x4deb69[_0x5c009c(0x254)](','):_0x3a0c57[_0x5c009c(0x254)](',')),'autoxchange_executable_windows':_0x5c009c(0x1dc)+_0x4deb69[_0x5c009c(0x254)](','),'autoxchange_executable_linux':'radio|'+_0x3a0c57[_0x5c009c(0x254)](','),'dwgmerge_executable':_0x5c009c(0x1dc)+(_0x8d84d1===_0x5c009c(0x12a)?_0x25a896[_0x5c009c(0x254)](','):_0x47fd19[_0x5c009c(0x254)](',')),'dwgmerge_executable_windows':_0x5c009c(0x1dc)+_0x25a896[_0x5c009c(0x254)](','),'dwgmerge_executable_linux':_0x5c009c(0x1dc)+_0x47fd19[_0x5c009c(0x254)](','),'linklist_executable':_0x5c009c(0x1dc)+(_0x8d84d1===_0x5c009c(0x12a)?_0xf21d30[_0x5c009c(0x254)](','):_0x5f48ec[_0x5c009c(0x254)](',')),'linklist_executable_windows':'radio|'+_0xf21d30[_0x5c009c(0x254)](','),'linklist_executable_linux':_0x5c009c(0x1dc)+_0x5f48ec[_0x5c009c(0x254)](','),'callbackMethod_gatewayUrl_flag':_0x5c009c(0x267),'setup_mysqlHost':_0x5c009c(0x267),'ContentSecurityPolicyReportOnly':'boolean','fileLoad_PasswordAuthentication':_0x5c009c(0x267),'contentLocationCheck':_0x5c009c(0x267),'globalBearerAutentication':_0x5c009c(0x267),'bcryptSaltRounds':'number','userFolderMaximumFiles':_0x5c009c(0x1af),'userFolderMaximumSizeInMB':_0x5c009c(0x1af)},_0x299c05={},_0x47a60f=Object[_0x5c009c(0x10b)](_0x1f36c2);_0x1f36c2[_0x5c009c(0x193)]&&_0x1c255f[_0x5c009c(0x153)](_0x5c009c(0x144)),_0x1f36c2[_0x5c009c(0xfa)]&&(_0x412f42[_0x5c009c(0x153)](_0x5c009c(0xe7)),_0x412f42[_0x5c009c(0x153)](_0x5c009c(0xf8)),_0x412f42[_0x5c009c(0x153)]('dwgmerge_executable'),_0x412f42['push'](_0x5c009c(0x1c1))),!_0x1f36c2[_0x5c009c(0x155)]&&_0x412f42['push'](_0x5c009c(0x1d0)),!_0x1f36c2['setup_mysqlHost']&&(_0x412f42[_0x5c009c(0x153)](_0x5c009c(0x280)),_0x412f42[_0x5c009c(0x153)](_0x5c009c(0x1ad)),_0x412f42['push'](_0x5c009c(0x275)),_0x412f42['push'](_0x5c009c(0x264))),!_0x1f36c2[_0x5c009c(0x1f4)]&&_0x412f42[_0x5c009c(0x153)]('ContentSecurityPolicy'),!_0x1f36c2[_0x5c009c(0x205)]&&(_0x412f42[_0x5c009c(0x153)](_0x5c009c(0x25e)),_0x412f42[_0x5c009c(0x153)](_0x5c009c(0x1a5))),!_0x1f36c2[_0x5c009c(0x17f)]&&_0x412f42[_0x5c009c(0x153)](_0x5c009c(0x11d)),_0x47a60f[_0x5c009c(0x1a9)](_0x1f47d0=>{const _0x4debcf=_0x5c009c;!_0x1c255f[_0x4debcf(0x18c)](_0x1f47d0)&&(_0x299c05[_0x1f47d0]=_0x1f36c2[_0x1f47d0]);}),_0x299c05[_0x5c009c(0x25d)]=''+_0x1f36c2[_0x5c009c(0x157)]+_0x1f36c2['fileLocation'],_0x38b2da[_0x5c009c(0x14f)](0xc8)[_0x5c009c(0xe2)]({'notEditableFields':_0x412f42,'customFieldTypes':_0xca6e9,'notHotEditableFields':_0x42ed5f,'config':_0x299c05,'fieldsTitle':_0x15f11,'configData':_0x1f36c2});}),router[a26_0x2f5002(0x138)](a26_0x2f5002(0x24a),protectedRoute,async(_0x5aa486,_0x28c172)=>{const _0x2d6e3d=a26_0x2f5002,_0x1e0dc1=fs['readFileSync'](path[_0x2d6e3d(0x254)](path['dirname'](require[_0x2d6e3d(0x1d1)][_0x2d6e3d(0x241)]),'cadviewer/settings/logs.html'),_0x2d6e3d(0x11b)),_0x5e7b04=_0x1e0dc1[_0x2d6e3d(0x1b3)]('{version}',_0x5aa486['version']);_0x28c172[_0x2d6e3d(0x10f)](_0x5e7b04);});function findMatchingLogFiles(_0x4617d4,_0x3f88f7=/^call-Api_Conversion_\d{1,2}_\d{1,2}_\d{4}\.log$/){const _0x56d88b=a26_0x2f5002;try{const _0x4d0b9d=fs[_0x56d88b(0x201)](_0x4617d4);return _0x4d0b9d[_0x56d88b(0x12b)](_0x4e7fc2=>_0x3f88f7[_0x56d88b(0x22d)](_0x4e7fc2))[_0x56d88b(0x1be)](_0x5b1534=>_0x5b1534[_0x56d88b(0x1b3)](_0x56d88b(0x240),'')['replaceAll'](_0x56d88b(0x13a),''));}catch(_0x483274){return console[_0x56d88b(0x1a3)](_0x56d88b(0x24d),_0x483274),[];}}router['post']('/logs/content',async(_0x4f9974,_0x3ed851)=>{const _0x2b232f=a26_0x2f5002,_0xdaa17f=new Date(),_0x506d8b=_0xdaa17f['getDate']()['toString']()['padStart'](0x2,'0')+'_'+(_0xdaa17f[_0x2b232f(0x22c)]()+0x1)[_0x2b232f(0x21d)]()[_0x2b232f(0x278)](0x2,'0')+'_'+_0xdaa17f[_0x2b232f(0x285)](),{displayDay:_0x403e1b}=_0x4f9974[_0x2b232f(0x1b6)],_0x3ffc60=path[_0x2b232f(0x254)](path[_0x2b232f(0x191)](require[_0x2b232f(0x1d1)][_0x2b232f(0x241)]),'logs',_0x2b232f(0x240)+(_0x403e1b??_0x506d8b)+'.log');fs[_0x2b232f(0x130)](_0x3ffc60)?fs[_0x2b232f(0x149)](_0x3ffc60,_0x2b232f(0x11b),function(_0x309253,_0x6299f9){const _0x34e049=_0x2b232f;_0x309253&&_0x3ed851[_0x34e049(0x14f)](0x1f4)[_0x34e049(0x10f)](_0x309253),_0x3ed851[_0x34e049(0x14f)](0xc8)['json']({'content':_0x6299f9,'days':findMatchingLogFiles(path['join'](path['dirname'](require['main'][_0x34e049(0x241)]),'logs'))});}):_0x3ed851[_0x2b232f(0x14f)](0xc8)[_0x2b232f(0xe2)]({'content':'','days':findMatchingLogFiles(path['join'](path[_0x2b232f(0x191)](require['main'][_0x2b232f(0x241)]),'logs'))});}),router[a26_0x2f5002(0x129)](a26_0x2f5002(0x11f),async(_0x8d962e,_0x20cae7)=>{const _0x7d0b2a=a26_0x2f5002,_0x2e4409=new Date(),_0x9e33ce=_0x2e4409['getDate']()[_0x7d0b2a(0x21d)]()[_0x7d0b2a(0x278)](0x2,'0')+'_'+(_0x2e4409[_0x7d0b2a(0x22c)]()+0x1)[_0x7d0b2a(0x21d)]()[_0x7d0b2a(0x278)](0x2,'0')+'_'+_0x2e4409['getFullYear'](),_0x5aebf7=findMatchingLogFiles(path['join'](path[_0x7d0b2a(0x191)](require[_0x7d0b2a(0x1d1)][_0x7d0b2a(0x241)]),_0x7d0b2a(0x17d)));_0x5aebf7[_0x7d0b2a(0x1a9)](_0x3b96e6=>{const _0x3b1a02=_0x7d0b2a;if(_0x3b96e6!==_0x9e33ce)fs[_0x3b1a02(0x215)](path[_0x3b1a02(0x254)](path[_0x3b1a02(0x191)](require[_0x3b1a02(0x1d1)][_0x3b1a02(0x241)]),_0x3b1a02(0x17d),_0x3b1a02(0x240)+_0x3b96e6+_0x3b1a02(0x13a)));}),logStream['clean'](),_0x20cae7[_0x7d0b2a(0x14f)](0xc8)['json']({'message':_0x7d0b2a(0x19d)});}),router['get'](a26_0x2f5002(0x12f),protectedRoute,async(_0x286e51,_0x473fcb)=>{const _0x1bff61=a26_0x2f5002,_0x3e32e9=path['join'](path[_0x1bff61(0x191)](require[_0x1bff61(0x1d1)]['filename']),_0x1bff61(0x1b9));if(!fs[_0x1bff61(0x130)](_0x3e32e9)){const _0x15c8e2={'jsonDataExtraction':{'standard':[{'paramName':_0x1bff61(0xe2),'paramValue':''},{'paramName':_0x1bff61(0x1d5),'paramValue':''}]},'dwgToSvg':{'standard':[{'paramName':'f','paramValue':'svg'},{'paramName':_0x1bff61(0x1fa),'paramValue':''},{'paramName':'hlall','paramValue':''}]},'dwgToPdf':{'standard':[{'paramName':'f','paramValue':_0x1bff61(0x16b)},{'paramName':_0x1bff61(0x1fa),'paramValue':''}]},'displayDwg':{'standard':[{'paramName':'f','paramValue':'svg'},{'paramName':_0x1bff61(0x1fa),'paramValue':''},{'paramName':_0x1bff61(0x250),'paramValue':''}]},'dwgToMultiple':{'standard':[{'paramName':_0x1bff61(0x167),'paramValue':''}]}};fs[_0x1bff61(0x258)](_0x3e32e9,JSON[_0x1bff61(0x233)](_0x15c8e2,null,0x4));}const _0x25cf25=fs[_0x1bff61(0x190)](path[_0x1bff61(0x254)](path[_0x1bff61(0x191)](require[_0x1bff61(0x1d1)][_0x1bff61(0x241)]),_0x1bff61(0xfe)),'utf8'),_0x43f409=_0x25cf25['replaceAll'](_0x1bff61(0x218),_0x286e51['version']);_0x473fcb[_0x1bff61(0x10f)](_0x43f409);}),router[a26_0x2f5002(0x18d)](a26_0x2f5002(0x1d4),async(_0x58fdb6,_0x28db0e)=>{const _0x4361ef=a26_0x2f5002,{actionName:_0x29ad88,contentLocation:_0x19ad2c}=_0x58fdb6['body'],_0x1c0a67=path[_0x4361ef(0x254)](path[_0x4361ef(0x191)](require[_0x4361ef(0x1d1)]['filename']),_0x4361ef(0x1b9));fs['readFile'](_0x1c0a67,_0x4361ef(0x11b),function(_0x5e5e0e,_0x27f8cd){const _0x10a05d=_0x4361ef;if(_0x5e5e0e)_0x28db0e[_0x10a05d(0x14f)](0xc8)[_0x10a05d(0xe2)]({'parameters':[]});else{const _0x2d4c0f=JSON[_0x10a05d(0x14d)](_0x27f8cd);if(_0x2d4c0f[_0x29ad88]&&_0x2d4c0f[_0x29ad88][_0x19ad2c])_0x28db0e[_0x10a05d(0x14f)](0xc8)['json']({'parameters':_0x2d4c0f[_0x29ad88][_0x19ad2c]});else _0x2d4c0f[_0x29ad88]&&_0x2d4c0f[_0x29ad88][_0x10a05d(0x161)]?_0x28db0e['status'](0xc8)['json']({'parameters':_0x2d4c0f[_0x29ad88]['standard']}):_0x28db0e[_0x10a05d(0x14f)](0xc8)[_0x10a05d(0xe2)]({'parameters':[]});}});}),router[a26_0x2f5002(0x18d)](a26_0x2f5002(0x114),async(_0x130fcf,_0x2d8215)=>{const _0x24449c=a26_0x2f5002,{actionName:_0x398dc2,contentLocation:_0x4ac594,parameters:_0x1924da}=_0x130fcf[_0x24449c(0x1b6)],_0x4587ae=path[_0x24449c(0x254)](path[_0x24449c(0x191)](require[_0x24449c(0x1d1)]['filename']),_0x24449c(0x1b9));fs[_0x24449c(0x149)](_0x4587ae,'utf8',function(_0x2b4d5f,_0x55c136){const _0x51a58f=_0x24449c;if(_0x2b4d5f)_0x2d8215[_0x51a58f(0x14f)](0x199)[_0x51a58f(0xe2)]({'message':'Error\x20saving\x20parameters.'});else{const _0x1aec58=JSON[_0x51a58f(0x14d)](_0x55c136);!_0x1aec58[_0x398dc2]&&(_0x1aec58[_0x398dc2]={}),_0x1aec58[_0x398dc2][_0x4ac594]=_0x1924da,fs[_0x51a58f(0x1df)](_0x4587ae,JSON['stringify'](_0x1aec58,null,0x4),function(_0x58f1c3){const _0x1b8bfa=_0x51a58f;_0x58f1c3&&_0x2d8215['status'](0x199)['json']({'message':'Error\x20saving\x20parameters.'}),_0x2d8215[_0x1b8bfa(0x14f)](0xc8)[_0x1b8bfa(0xe2)]({'message':'Parameters\x20saved.'});});}});}),router[a26_0x2f5002(0x138)](a26_0x2f5002(0x246),protectedRoute,async(_0x11f05c,_0x14aa4b)=>{const _0x36ac41=a26_0x2f5002,_0x3f313c=fs[_0x36ac41(0x190)](path[_0x36ac41(0x254)](path[_0x36ac41(0x191)](require[_0x36ac41(0x1d1)][_0x36ac41(0x241)]),'cadviewer/settings/doctor.html'),'utf8'),_0x2ce686=_0x3f313c[_0x36ac41(0x1b3)](_0x36ac41(0x218),_0x11f05c[_0x36ac41(0x111)]);_0x14aa4b[_0x36ac41(0x10f)](_0x2ce686);}),router[a26_0x2f5002(0x18d)](a26_0x2f5002(0x159),async(_0x99d8a1,_0x4abc36)=>{const _0x370593=a26_0x2f5002,_0xe1fff=getHotConfig(),_0x4ef396=_0xe1fff[_0x370593(0x117)][_0x370593(0x1b3)]('//','/'),_0x5df5f1=_0xe1fff[_0x370593(0x17a)][_0x370593(0x1b3)]('//','/'),_0x2d8ea9=_0xe1fff[_0x370593(0x21b)][_0x370593(0x1b3)]('//','/'),_0x355b32=''+_0x4ef396+_0xe1fff[_0x370593(0xf8)],_0x37c47f=''+_0x5df5f1+_0xe1fff['dwgmerge_executable'],_0x50eaee=''+_0x2d8ea9+_0xe1fff[_0x370593(0x1c1)],_0x34e552=[],_0x126ad8=new Promise(_0x28b042=>{const _0x16a91a=_0x370593;exec(os['platform']()===_0x16a91a(0x1e8)?_0x16a91a(0x194):'ls',_0x4693ba=>{const _0xebda4d=_0x16a91a;_0x4693ba?_0x34e552['push']({'title':_0xebda4d(0x1b2),'status':![],'priority':0x1}):_0x34e552[_0xebda4d(0x153)]({'title':_0xebda4d(0x1b2),'status':!![],'priority':0x1}),_0x28b042();});}),_0x57c912=new Promise(_0x3b5ab2=>{const _0x16abe9=_0x370593;fs[_0x16abe9(0xeb)](_0x355b32,fs[_0x16abe9(0x20b)][_0x16abe9(0x231)],_0x7c0741=>{const _0xaf4724=_0x16abe9;_0x7c0741?_0x34e552[_0xaf4724(0x153)]({'title':_0xaf4724(0x282)+_0xe1fff['autoxchange_executable']+'\x22\x20executable','status':![],'priority':0x2}):_0x34e552[_0xaf4724(0x153)]({'title':_0xaf4724(0x282)+_0xe1fff[_0xaf4724(0xf8)]+'\x22\x20executable','status':!![],'priority':0x2}),_0x3b5ab2();});}),_0x32c383=new Promise(_0x39344a=>{const _0x415f5c=_0x370593;fs[_0x415f5c(0xeb)](_0x37c47f,fs[_0x415f5c(0x20b)]['X_OK'],_0x4be4e1=>{const _0x52e4e2=_0x415f5c;_0x4be4e1?_0x34e552[_0x52e4e2(0x153)]({'title':_0x52e4e2(0x282)+_0xe1fff['dwgmerge_executable']+_0x52e4e2(0x162),'status':![],'priority':0x3}):_0x34e552[_0x52e4e2(0x153)]({'title':_0x52e4e2(0x282)+_0xe1fff[_0x52e4e2(0xf4)]+_0x52e4e2(0x162),'status':!![],'priority':0x3}),_0x39344a();});}),_0x487787=new Promise(_0x52bd72=>{const _0x444a0e=_0x370593;fs[_0x444a0e(0xeb)](_0x50eaee,fs[_0x444a0e(0x20b)]['X_OK'],_0x4c9444=>{const _0x214c34=_0x444a0e;_0x4c9444?_0x34e552[_0x214c34(0x153)]({'title':_0x214c34(0x282)+_0xe1fff[_0x214c34(0x1c1)]+'\x22\x20executable','status':![],'priority':0x4}):_0x34e552[_0x214c34(0x153)]({'title':_0x214c34(0x282)+_0xe1fff['linklist_executable']+_0x214c34(0x162),'status':!![],'priority':0x4}),_0x52bd72();});}),_0x185f5e=new Promise(_0x552861=>{const _0x4ddac7=_0x370593,_0x114482=new Date(),_0x3c5b82=_0x114482[_0x4ddac7(0x180)]()[_0x4ddac7(0x21d)]()['padStart'](0x2,'0')+'_'+(_0x114482[_0x4ddac7(0x22c)]()+0x1)[_0x4ddac7(0x21d)]()[_0x4ddac7(0x278)](0x2,'0')+'_'+_0x114482[_0x4ddac7(0x285)](),{displayDay:_0x2cffbc}=_0x99d8a1[_0x4ddac7(0x1b6)];fs[_0x4ddac7(0xeb)](path['join'](path[_0x4ddac7(0x191)](require['main'][_0x4ddac7(0x241)]),_0x4ddac7(0x17d),'call-Api_Conversion_'+(_0x2cffbc??_0x3c5b82)+_0x4ddac7(0x13a)),fs['constants'][_0x4ddac7(0x1a8)],_0x2cd96d=>{const _0x142676=_0x4ddac7;_0x2cd96d?_0x34e552[_0x142676(0x153)]({'title':_0x142676(0x151)+(_0x2cffbc??_0x3c5b82)+_0x142676(0x242),'status':![],'priority':0x5}):_0x34e552[_0x142676(0x153)]({'title':_0x142676(0x151)+(_0x2cffbc??_0x3c5b82)+'.log\x22','status':!![],'priority':0x5}),_0x552861();});}),_0x3d1a9d=(_0x532b26,_0x1b737d)=>{const _0x3c0f92=_0x370593,_0x573bc3=path[_0x3c0f92(0x254)](path[_0x3c0f92(0x191)](require[_0x3c0f92(0x1d1)][_0x3c0f92(0x241)]),_0x532b26);return new Promise(_0x3e6aaa=>{const _0x44142b=_0x3c0f92;fs['access'](path[_0x44142b(0x254)](path['dirname'](_0x573bc3)),fs[_0x44142b(0x20b)][_0x44142b(0x262)]|fs['constants']['W_OK'],_0x110d06=>{const _0x1b197c=_0x44142b;_0x110d06?_0x34e552[_0x1b197c(0x153)]({'title':_0x1b197c(0x145)+_0x532b26,'status':![],'priority':_0x1b737d+0x6}):_0x34e552[_0x1b197c(0x153)]({'title':_0x1b197c(0x145)+_0x532b26,'status':!![],'priority':_0x1b737d+0x6}),_0x3e6aaa();});});},_0x2a121c=[_0x370593(0x134),_0x370593(0x287),_0x370593(0x257),_0x370593(0xe1),'/converters/files/pdf/','/content/redlines/',_0x370593(0x125)],_0x425824=_0x2a121c[_0x370593(0x1be)](_0x3d1a9d);Promise['all']([_0x126ad8,_0x57c912,_0x32c383,_0x487787,_0x185f5e,..._0x425824])['then'](()=>{const _0x51f4a6=_0x370593;_0x4abc36[_0x51f4a6(0x14f)](0xc8)[_0x51f4a6(0xe2)]({'checking_list':_0x34e552});})['catch'](()=>{const _0x537ca8=_0x370593;_0x4abc36[_0x537ca8(0x14f)](0x1f4)[_0x537ca8(0xe2)]({'error':_0x537ca8(0x227)});});}),router[a26_0x2f5002(0x138)](a26_0x2f5002(0x116),protectedRoute,async(_0x320b13,_0x5210c2)=>{const _0x3c15c4=a26_0x2f5002,_0x5f3cb1=fs['readFileSync'](path[_0x3c15c4(0x254)](path[_0x3c15c4(0x191)](require[_0x3c15c4(0x1d1)][_0x3c15c4(0x241)]),_0x3c15c4(0xf9)),_0x3c15c4(0x11b)),_0x429142=_0x5f3cb1[_0x3c15c4(0x1b3)]('{version}',_0x320b13[_0x3c15c4(0x111)]);_0x5210c2[_0x3c15c4(0x10f)](_0x429142);}),router['post'](a26_0x2f5002(0x15c),async(_0x5032fb,_0x400e50)=>{const _0x4112be=a26_0x2f5002;let _0x800349;try{const [_0x524ab2]=await conn[_0x4112be(0x272)]()[_0x4112be(0x104)](_0x4112be(0x1ac),[]);_0x800349=_0x524ab2;}catch(_0x3bed38){console[_0x4112be(0x1ea)](_0x3bed38),_0x400e50[_0x4112be(0x14f)](0x1f4)[_0x4112be(0xe2)]({'error':_0x4112be(0x1ce)});return;}_0x400e50['status'](0xc8)[_0x4112be(0xe2)]({'success':!![],'data':_0x800349});}),router['post']('/users',upload[a26_0x2f5002(0x112)](a26_0x2f5002(0xf3)),async(_0x530e6f,_0x1d47c4)=>{const _0x575fb2=a26_0x2f5002,{id:_0x23a140,first_name:_0x3aa7c7,last_name:_0x50dc53,username:_0x42fc1e,email:_0x49a098,password:_0x47ee39,is_enabled:_0xb9bc42}=_0x530e6f[_0x575fb2(0x1b6)],_0x11e9dd=_0x530e6f[_0x575fb2(0x1b6)]['role']===_0x575fb2(0x182)?_0x575fb2(0x182):_0x530e6f[_0x575fb2(0x1b6)][_0x575fb2(0x160)]===_0x575fb2(0x165)?_0x575fb2(0x165):_0x575fb2(0x265);let _0x2982b5;console[_0x575fb2(0x1ea)](_0x575fb2(0x1e9));_0x47ee39&&(_0x2982b5=await bcrypt[_0x575fb2(0x1d8)](_0x47ee39,0xa));let _0x1c64da=null;if(_0x530e6f['file']){const _0x2d09b8='avatars/'+randomUUID()+_0x575fb2(0x1fe);fs[_0x575fb2(0x248)](_0x530e6f[_0x575fb2(0x11e)][_0x575fb2(0x148)],'./'+_0x2d09b8),fs[_0x575fb2(0x215)](_0x530e6f[_0x575fb2(0x11e)][_0x575fb2(0x148)]),config['callbackMethod_gatewayUrl_flag']?_0x1c64da=config[_0x575fb2(0x1d0)]+'/'+_0x2d09b8:_0x1c64da=config['ServerUrl']+'/'+_0x2d09b8;}if(_0x23a140){try{let [_0x44422b]=await conn[_0x575fb2(0x272)]()[_0x575fb2(0x104)](_0x575fb2(0x1fd),[_0x49a098,_0x42fc1e,_0x23a140]);if(_0x44422b[_0x575fb2(0x199)]>0x0)_0x1d47c4['status'](0x199)['json']({'error':_0x575fb2(0x136)});else{!_0x530e6f[_0x575fb2(0x11e)]&&([_0x44422b]=await conn[_0x575fb2(0x272)]()[_0x575fb2(0x104)](_0x575fb2(0x1bd),[_0x23a140]),_0x1c64da=_0x44422b[0x0][_0x575fb2(0xe8)]);const _0x23d76c=_0x575fb2(0xf0)+(_0x47ee39?_0x575fb2(0x1e2):'')+_0x575fb2(0xed);await conn[_0x575fb2(0x272)]()[_0x575fb2(0x104)](_0x23d76c,_0x47ee39?[_0x1c64da,_0x3aa7c7,_0x50dc53,_0x42fc1e,_0x49a098,_0x2982b5,_0xb9bc42,_0x11e9dd,_0x23a140]:[_0x1c64da,_0x3aa7c7,_0x50dc53,_0x42fc1e,_0x49a098,_0xb9bc42,_0x11e9dd,_0x23a140]);}}catch(_0x113316){console[_0x575fb2(0x1ea)](_0x113316),_0x1d47c4[_0x575fb2(0x14f)](0x1f4)['json']({'error':_0x575fb2(0x1ce)});return;}_0x1d47c4[_0x575fb2(0x14f)](0xc8)['json']({'success':!![],'message':_0x575fb2(0x226)});}else{try{const [_0x4ecf61]=await conn['promise']()[_0x575fb2(0x104)](_0x575fb2(0x253),[_0x49a098,_0x42fc1e]);if(_0x4ecf61[_0x575fb2(0x199)]>0x0)_0x1d47c4[_0x575fb2(0x14f)](0x199)[_0x575fb2(0xe2)]({'error':_0x575fb2(0x136)});else{const _0x52a990=randomUUID();await conn[_0x575fb2(0x272)]()[_0x575fb2(0x104)](_0x575fb2(0x26c),[_0x1c64da,_0x3aa7c7,_0x50dc53,_0x42fc1e,_0x49a098,_0x2982b5,_0x11e9dd,_0xb9bc42,_0x52a990]);const _0x37ba49=_0x575fb2(0x101)+_0x52a990;fs[_0x575fb2(0x27d)](_0x37ba49);}}catch(_0x4d9a5e){console[_0x575fb2(0x1ea)](_0x4d9a5e),_0x1d47c4[_0x575fb2(0x14f)](0x1f4)[_0x575fb2(0xe2)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}_0x1d47c4['status'](0xc8)[_0x575fb2(0xe2)]({'success':!![],'message':_0x575fb2(0x198)});}}),router[a26_0x2f5002(0x129)](a26_0x2f5002(0x1db),async(_0x48bf2f,_0x1af5b4)=>{const _0xeaf4a8=a26_0x2f5002,{userId:_0x525454}=_0x48bf2f[_0xeaf4a8(0x1b6)];let _0x374885;try{const [_0x47d847]=await conn[_0xeaf4a8(0x272)]()[_0xeaf4a8(0x104)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?',[_0x525454]);_0x47d847[_0xeaf4a8(0x199)]>0x0&&(_0x374885=_0x47d847[0x0]);}catch(_0x195235){console[_0xeaf4a8(0x1ea)]({'err':_0x195235}),_0x1af5b4['status'](0x1f4)[_0xeaf4a8(0xe2)]({'error':_0xeaf4a8(0x1ce)});return;}if(!_0x374885){_0x1af5b4['status'](0x191)[_0xeaf4a8(0xe2)]({'error':_0xeaf4a8(0x220)});return;}let _0x80f1b6=_0x374885[_0xeaf4a8(0x18a)];if(!_0x80f1b6){_0x80f1b6=randomUUID();try{await conn[_0xeaf4a8(0x272)]()[_0xeaf4a8(0x104)](_0xeaf4a8(0x21c),[_0x80f1b6,_0x525454]);}catch(_0x3c3db9){console[_0xeaf4a8(0x1ea)]({'err':_0x3c3db9}),_0x1af5b4[_0xeaf4a8(0x14f)](0x1f4)[_0xeaf4a8(0xe2)]({'error':_0xeaf4a8(0x1ce)});return;}}const _0x33b6d4=_0xeaf4a8(0x101)+_0x80f1b6;console[_0xeaf4a8(0x1ea)](_0xeaf4a8(0x268)),console[_0xeaf4a8(0x1ea)](_0x33b6d4),!fs[_0xeaf4a8(0x130)](_0x33b6d4)&&fs[_0xeaf4a8(0x27d)](_0x33b6d4),fs[_0xeaf4a8(0x239)](_0x33b6d4,{'recursive':!![],'force':!![]}),fs['mkdirSync'](_0x33b6d4),_0x1af5b4[_0xeaf4a8(0x14f)](0xc8)['json']({'success':!![],'message':'User\x20directory\x20flushed\x20successfully'});}),router['delete']('/users/:userId',async(_0x5f2c99,_0x461ac1)=>{const _0x1b8d9a=a26_0x2f5002,_0x5541a5=_0x5f2c99[_0x1b8d9a(0x222)][_0x1b8d9a(0x14b)];try{let _0x1dc70b;try{const [_0x36e965]=await conn['promise']()[_0x1b8d9a(0x104)](_0x1b8d9a(0x1bd),[_0x5541a5]);_0x36e965[_0x1b8d9a(0x199)]>0x0&&(_0x1dc70b=_0x36e965[0x0]);}catch(_0x110008){console['log']({'err':_0x110008}),_0x461ac1[_0x1b8d9a(0x14f)](0x1f4)['json']({'error':_0x1b8d9a(0x1ce)});return;}if(!_0x1dc70b){_0x461ac1[_0x1b8d9a(0x14f)](0x191)['json']({'error':_0x1b8d9a(0x220)});return;}let _0x35bf45=_0x1dc70b['folder_name'];if(_0x35bf45){const _0x1f7eae=_0x1b8d9a(0x101)+_0x35bf45;fs['existsSync'](_0x1f7eae)&&fs[_0x1b8d9a(0x239)](_0x1f7eae,{'recursive':!![],'force':!![]});}await conn[_0x1b8d9a(0x272)]()[_0x1b8d9a(0x104)](_0x1b8d9a(0x127),[_0x5541a5]);}catch(_0x26b878){console['log'](_0x26b878),_0x461ac1['status'](0x1f4)[_0x1b8d9a(0xe2)]({'error':_0x1b8d9a(0x1ce)});return;}_0x461ac1[_0x1b8d9a(0x14f)](0xc8)[_0x1b8d9a(0xe2)]({'success':!![],'message':_0x1b8d9a(0x20e)});}),router[a26_0x2f5002(0x138)](a26_0x2f5002(0x20f),async(_0x11d5ee,_0x1747ce)=>{const _0x539db7=a26_0x2f5002,_0x59588=osu[_0x539db7(0x20c)],_0x35f8b8=osu[_0x539db7(0x131)],_0x2cfea6=osu['drive'],_0x434ff8=osu['os'],_0x297602={'percentage':0x0,'usedGB':0x0,'freeGb':0x0,'totalGB':0x0};try{let _0x231ffe=os[_0x539db7(0x144)]()===_0x539db7(0x1e8)?'c:':'/';const _0xd7039=await _0x2cfea6[_0x539db7(0x1cb)](_0x231ffe);_0x297602['percentage']=_0xd7039['usedPercentage'],_0x297602['usedGB']=_0xd7039['usedGb'],_0x297602['freeGb']=_0xd7039['freeGb'],_0x297602[_0x539db7(0x16a)]=_0xd7039[_0x539db7(0x1f3)];}catch(_0x577b61){console[_0x539db7(0x1ea)]('Error\x20getting\x20disk\x20usage',_0x577b61);}const _0x2b30be={'usage':0x0,'count':0x0};try{_0x2b30be[_0x539db7(0x17b)]=await _0x59588['usage'](),_0x2b30be[_0x539db7(0x163)]=_0x59588[_0x539db7(0x163)]();}catch(_0x5f56e0){console[_0x539db7(0x1ea)](_0x539db7(0x204),_0x5f56e0);}const _0x512e16={'os':'','platform':'','ip':'','uptime':0x0,'hostname':'','type':'','arch':'','who':'','whoami':'','vmstats':''};try{_0x512e16['os']=await _0x434ff8[_0x539db7(0x21e)](),_0x512e16['platform']=_0x434ff8['platform'](),_0x512e16['ip']=_0x434ff8['ip'](),_0x512e16[_0x539db7(0x1e4)]=_0x434ff8['uptime'](),_0x512e16[_0x539db7(0x1c0)]=_0x434ff8[_0x539db7(0x1c0)](),_0x512e16[_0x539db7(0x1da)]=_0x434ff8[_0x539db7(0x1da)](),_0x512e16[_0x539db7(0x244)]=_0x434ff8['arch'](),_0x512e16[_0x539db7(0xfc)]=await osu[_0x539db7(0x1bc)][_0x539db7(0xfc)](),_0x512e16[_0x539db7(0x1f5)]=await osu[_0x539db7(0x1bc)][_0x539db7(0x1f5)](),_0x512e16[_0x539db7(0x184)]=await osu['osCmd']['vmstats']();}catch(_0x535e6a){console[_0x539db7(0x1ea)](_0x539db7(0x19c),_0x535e6a);}const _0x14cf43={'totalProcesses':0x0,'zombieProcesses':0x0};try{_0x14cf43[_0x539db7(0x213)]=await osu[_0x539db7(0x1de)][_0x539db7(0x213)](),_0x14cf43[_0x539db7(0x170)]=await osu[_0x539db7(0x1de)][_0x539db7(0x170)]();}catch(_0x4a5b55){console[_0x539db7(0x1ea)](_0x539db7(0x249),_0x4a5b55);}let _0x4b3288={'usedMemPercentage':0x0,'usedMemMb':0x0,'totalMemMb':0x0};try{const _0x226b1b=await _0x35f8b8[_0x539db7(0x1cb)]();_0x4b3288[_0x539db7(0x1b4)]=_0x226b1b['usedMemPercentage'],_0x4b3288['usedMemMb']=_0x226b1b[_0x539db7(0x208)]/0x400/0x400,_0x4b3288[_0x539db7(0x202)]=_0x226b1b['total']/0x400/0x400;}catch(_0x107621){console[_0x539db7(0x1ea)](_0x539db7(0x14a),_0x107621);}let _0x2c8388=0x0;try{_0x2c8388=await conn['promise']()[_0x539db7(0x121)](_0x539db7(0x115))[_0x539db7(0x124)](([_0x34cd6c])=>_0x34cd6c[0x0]['total']);}catch(_0x19656b){console[_0x539db7(0x1ea)]('Error\x20getting\x20total\x20users',_0x19656b);}const _0x4f7cdd=getMonitoringData(),_0x36ab47=_0x4f7cdd[_0x539db7(0x12b)](_0x4a2ab3=>_0x4a2ab3['conversionTimeSpend']!==null&&_0x4a2ab3[_0x539db7(0x228)]!==undefined),_0x1afa8f=_0x4f7cdd['filter'](_0x3d31ee=>_0x3d31ee['conversionMemoryUsage']!==null&&_0x3d31ee[_0x539db7(0x118)]!==undefined)[_0x539db7(0x1be)](_0x6d0b3c=>parseFloat(_0x6d0b3c[_0x539db7(0x118)][_0x539db7(0x1b3)]('Kb')[_0x539db7(0x103)]())),_0x26d243=_0x36ab47[_0x539db7(0x16e)]((_0xe4ca5f,_0x50b989)=>_0xe4ca5f+parseFloat(_0x50b989[_0x539db7(0x228)]),0x0)/_0x36ab47[_0x539db7(0x199)],_0x5371ef=_0x1afa8f[_0x539db7(0x16e)]((_0x39bf84,_0xd3d3c3)=>_0x39bf84+_0xd3d3c3,0x0)/_0x1afa8f[_0x539db7(0x199)];_0x1747ce[_0x539db7(0xe2)]({'requestsPerSecond':counter[_0x539db7(0x13f)](),'diskUsage':_0x297602,'cpus':_0x2b30be,'system':_0x512e16,'process':_0x14cf43,'totalMonitoringData':_0x4f7cdd[_0x539db7(0x199)],'memory':_0x4b3288,'totalUsers':_0x2c8388,'avgConvertionTime':_0x26d243,'avgMemoryUsage':_0x5371ef});}),router[a26_0x2f5002(0x18d)](a26_0x2f5002(0x234),(_0x56693e,_0x56f171)=>{const _0x393b14=a26_0x2f5002;counter[_0x393b14(0x1e1)](),_0x56f171[_0x393b14(0xe2)]({'message':_0x393b14(0xf7)});});const getMonitoringData=()=>{const _0x5e2d0e=a26_0x2f5002,_0x32bfca='cadviewer/settings/requests-callapiconversion-monitoring.json';let _0x4492f1=[];try{_0x4492f1=JSON['parse'](fs[_0x5e2d0e(0x190)](_0x32bfca));}catch(_0x1025e6){console[_0x5e2d0e(0x1ea)](_0x5e2d0e(0x120));}return _0x4492f1;};router[a26_0x2f5002(0x138)](a26_0x2f5002(0x15f),async(_0x1470d4,_0x4bac7e)=>{const _0x4face4=a26_0x2f5002,{page:page=0x1,limit:limit=0xa}=_0x1470d4[_0x4face4(0x121)],_0xa58030=(page-0x1)*limit;try{const _0x38c2ba=getMonitoringData(),_0x47ed79=_0x38c2ba[_0x4face4(0x199)],_0x1f379e=Math[_0x4face4(0x1ae)](_0x47ed79/limit),_0xb55b5f=_0x38c2ba[_0x4face4(0x140)](_0xa58030,_0xa58030+limit);_0x4bac7e[_0x4face4(0x14f)](0xc8)['json']({'data':_0xb55b5f,'page':parseInt(''+page),'totalPages':_0x1f379e,'total':_0x47ed79});}catch(_0x274832){console[_0x4face4(0x1ea)](_0x274832),_0x4bac7e[_0x4face4(0x14f)](0x1f4)[_0x4face4(0xe2)]({'error':'Error!\x20Something\x20went\x20wrong.'});}}),router[a26_0x2f5002(0x129)](a26_0x2f5002(0x1cf),async(_0x29a343,_0x1211c4)=>{const _0x1ee40a=a26_0x2f5002,_0x130580=_0x1ee40a(0x1d2);try{fs[_0x1ee40a(0x258)](_0x130580,JSON[_0x1ee40a(0x233)]([],null,0x4)),analyzeConverterFiles(),_0x1211c4[_0x1ee40a(0x14f)](0xc8)[_0x1ee40a(0xe2)]({'message':'Monitoring\x20file\x20cleaned.'});}catch(_0x20bceb){console[_0x1ee40a(0x1ea)](_0x20bceb),_0x1211c4[_0x1ee40a(0x14f)](0x1f4)[_0x1ee40a(0xe2)]({'error':_0x1ee40a(0x1ce)});}}),router[a26_0x2f5002(0x138)](a26_0x2f5002(0x243),async(_0x550d91,_0x3cedb9)=>{const _0x538663=a26_0x2f5002,_0x28ac29=getHotConfig()['converterLocation'][_0x538663(0x1b3)]('//','/'),{page:page=0x1,limit:limit=0xa}=_0x550d91[_0x538663(0x121)],_0x2882e4=(page-0x1)*limit;try{const _0x290090=_0x28ac29+_0x538663(0x156);console[_0x538663(0x1ea)](_0x290090);const _0x37ee62=fs[_0x538663(0x190)](_0x290090,'utf8'),_0x533396=_0x37ee62[_0x538663(0x21a)]('\x0a'),_0x5c21e2=[];_0x533396['forEach'](_0x2dc566=>{const _0x22eb7f=_0x538663,_0x5482f8=_0x2dc566[_0x22eb7f(0x21a)](',');if(_0x5482f8['length']<0x4)return;const _0x4952ba=_0x5482f8[0x0],_0x36d700=_0x5482f8[0x1],_0x3ec6da=parseFloat(_0x5482f8[0x2]);_0x5c21e2['push']({'file':_0x4952ba['replaceAll']('\x22',''),'action':_0x36d700,'timeSpend':_0x3ec6da,'memoryUsage':_0x5482f8[0x3]});});const _0x272d6b=_0x5c21e2[_0x538663(0x199)],_0x5c22f1=Math[_0x538663(0x1ae)](_0x272d6b/limit),_0x7f750f=_0x5c21e2[_0x538663(0x140)](_0x2882e4,_0x2882e4+limit);_0x3cedb9[_0x538663(0x14f)](0xc8)[_0x538663(0xe2)]({'data':_0x7f750f,'page':parseInt(''+page),'totalPages':_0x5c22f1,'total':_0x272d6b});}catch(_0x51abc9){console[_0x538663(0x1ea)](_0x51abc9),_0x3cedb9[_0x538663(0x14f)](0x1f4)[_0x538663(0xe2)]({'error':_0x538663(0x1ce)});}}),router['get'](a26_0x2f5002(0x273),async(_0x4b0db3,_0xad964)=>{const _0x5bb8d3=a26_0x2f5002,_0x9be9f1=path[_0x5bb8d3(0x254)](path[_0x5bb8d3(0x191)](require[_0x5bb8d3(0x1d1)]['filename']),_0x5bb8d3(0x1b7),_0x5bb8d3(0x23c));try{let _0x18e60b=0x0,_0xbefd47=0x0;function _0xd4d6fb(_0x530a8b){const _0x440474=_0x5bb8d3;let _0x27901b=0x0,_0x1741de=0x0;if(fs[_0x440474(0x130)](_0x530a8b)){const _0x44cb9e=fs['readdirSync'](_0x530a8b);_0x1741de=0x0;for(const _0x54ed87 of _0x44cb9e){const _0x2deb08=path[_0x440474(0x254)](_0x530a8b,_0x54ed87),_0x8d7031=fs[_0x440474(0x166)](_0x2deb08);if(_0x8d7031['isFile']()&&_0x54ed87!==_0x440474(0x18f))_0x1741de++,_0x27901b+=_0x8d7031[_0x440474(0x200)];else{if(_0x8d7031['isDirectory']()){}}}}return{'size':_0x27901b,'count':_0x1741de};}const _0xd91474=_0xd4d6fb(_0x9be9f1);_0x18e60b=_0xd91474[_0x5bb8d3(0x200)],_0xbefd47=_0xd91474[_0x5bb8d3(0x163)],_0xad964[_0x5bb8d3(0xe2)]({'fileCount':_0xbefd47,'totalSize':_0x18e60b});}catch(_0x386df1){console[_0x5bb8d3(0x1a3)](_0x5bb8d3(0x1bb),_0x386df1),_0xad964[_0x5bb8d3(0x14f)](0x1f4)[_0x5bb8d3(0xe2)]({'error':_0x5bb8d3(0x229)});}}),router['delete']('/cache/flush',async(_0xc63bf7,_0x9c19b9)=>{const _0x2a84b6=a26_0x2f5002,_0x7ff991=path['join'](path[_0x2a84b6(0x191)](require[_0x2a84b6(0x1d1)][_0x2a84b6(0x241)]),'converters','files');try{function _0x40202c(_0x591215){const _0x2e26a0=_0x2a84b6;if(fs['existsSync'](_0x591215)){const _0x377c59=fs[_0x2e26a0(0x201)](_0x591215);for(const _0x105cfd of _0x377c59){const _0x3dc48d=path[_0x2e26a0(0x254)](_0x591215,_0x105cfd),_0xee5884=fs['statSync'](_0x3dc48d);if(_0xee5884[_0x2e26a0(0x1d7)]()){}else _0x105cfd!=='.gitkeep'&&fs[_0x2e26a0(0x215)](_0x3dc48d);}}}_0x40202c(_0x7ff991),analyzeConverterFiles(),_0x9c19b9[_0x2a84b6(0xe2)]({'message':_0x2a84b6(0x1aa)});}catch(_0x370f85){console[_0x2a84b6(0x1a3)](_0x2a84b6(0x173),_0x370f85),_0x9c19b9[_0x2a84b6(0x14f)](0x1f4)[_0x2a84b6(0xe2)]({'error':_0x2a84b6(0x261)});}}),router[a26_0x2f5002(0x138)]('/cache-stats.js',async(_0xca7567,_0x835ab7)=>{const _0x3bf50f=a26_0x2f5002;_0x835ab7['sendFile'](path[_0x3bf50f(0x254)](path[_0x3bf50f(0x191)](require['main'][_0x3bf50f(0x241)]),_0x3bf50f(0x210)));}),router[a26_0x2f5002(0x138)]('/cache',protectedRoute,async(_0x37acc1,_0x54cbd0)=>{const _0x386134=a26_0x2f5002,_0x5be3c7=fs[_0x386134(0x190)](path[_0x386134(0x254)](path[_0x386134(0x191)](require[_0x386134(0x1d1)]['filename']),'cadviewer/settings/conversion-cache.html'),_0x386134(0x11b)),_0x48da81=_0x5be3c7[_0x386134(0x1b3)](_0x386134(0x218),_0x37acc1['version']);_0x54cbd0[_0x386134(0x10f)](_0x48da81);}),router['get']('/cache/files',async(_0x486c45,_0x4d8fe3)=>{const _0x5c0d57=a26_0x2f5002,{page:page=0x1,limit:limit=0x10}=_0x486c45[_0x5c0d57(0x121)],_0x186f36=JSON[_0x5c0d57(0x14d)](fs['readFileSync'](path['join'](path['dirname'](require['main']['filename']),_0x5c0d57(0x12e)))),_0x6bd753=(page-0x1)*limit,_0x77987f=page*limit,_0x5849ee=_0x186f36[_0x5c0d57(0x23c)][_0x5c0d57(0x199)],_0x36cd13=Math[_0x5c0d57(0x1ae)](_0x5849ee/limit),_0x3b15fc=_0x186f36[_0x5c0d57(0x23c)][_0x5c0d57(0x140)](_0x6bd753,_0x77987f);_0x4d8fe3['json']({'files':_0x3b15fc,'pagination':{'total':_0x5849ee,'totalPages':_0x36cd13,'currentPage':parseInt(page),'limit':parseInt(limit)}});return;}),router[a26_0x2f5002(0x138)](a26_0x2f5002(0x105),async(_0xd4041f,_0x3e4a5e)=>{const _0x568f14=a26_0x2f5002,{file:_0x3e3c2e}=_0xd4041f['params'],_0x1b841e=path[_0x568f14(0x254)](path[_0x568f14(0x191)](require[_0x568f14(0x1d1)]['filename']),_0x568f14(0x1b7),_0x568f14(0x23c)),_0x2c0a94=path[_0x568f14(0x254)](_0x1b841e,_0x3e3c2e),_0x249f1d=fs[_0x568f14(0x190)](_0x2c0a94,_0x568f14(0x11b)),_0x25369a=_0x249f1d[_0x568f14(0x21a)]('\x0a'),_0x1f2c6d=_0x25369a['map'](_0x24b62d=>{const _0x321169=_0x568f14,_0x571afa=_0x24b62d[_0x321169(0x21a)](',');return _0x571afa['map'](_0x5ea356=>_0x5ea356[_0x321169(0x1b3)]('\x22',''));});_0x3e4a5e['json'](_0x1f2c6d);}),router[a26_0x2f5002(0x138)](a26_0x2f5002(0x1a1),async(_0x3417fb,_0x317341)=>{const _0x162d01=a26_0x2f5002,{id:_0x1dbe79}=_0x3417fb[_0x162d01(0x222)],_0x5dcd19=path['join'](path[_0x162d01(0x191)](require[_0x162d01(0x1d1)][_0x162d01(0x241)]),_0x162d01(0x1b7),_0x162d01(0x23c)),_0x2ffece=path[_0x162d01(0x254)](_0x5dcd19,_0x1dbe79);if(_0x2ffece[_0x162d01(0x177)]('.svgz')){var _0x49aed3=require('zlib');const _0x1696c0=fs['readFileSync'](_0x2ffece),_0x519a96=_0x49aed3[_0x162d01(0x22f)](_0x1696c0);_0x317341['setHeader']('Content-Type',_0x162d01(0x1f2)),_0x317341[_0x162d01(0x10f)](_0x519a96);}else _0x317341['sendFile'](_0x2ffece);}),router[a26_0x2f5002(0x129)](a26_0x2f5002(0x1a1),async(_0x4643ab,_0x57a185)=>{const _0x51887d=a26_0x2f5002,{id:_0x33f79f}=_0x4643ab[_0x51887d(0x222)],_0x2451ba=path[_0x51887d(0x254)](path[_0x51887d(0x191)](require[_0x51887d(0x1d1)][_0x51887d(0x241)]),'converters',_0x51887d(0x23c)),_0x381bac=JSON['parse'](fs[_0x51887d(0x190)](path[_0x51887d(0x254)](path[_0x51887d(0x191)](require[_0x51887d(0x1d1)][_0x51887d(0x241)]),_0x51887d(0x12e)))),_0x56c067=_0x381bac[_0x51887d(0x23c)]['find'](_0x341832=>_0x341832[_0x51887d(0x266)]===_0x33f79f);if(_0x56c067){try{fs[_0x51887d(0x130)](path[_0x51887d(0x254)](_0x2451ba,_0x56c067[_0x51887d(0x266)]))&&fs[_0x51887d(0x215)](path['join'](_0x2451ba,_0x56c067['name']));}catch(_0xf2c406){console['log'](_0x51887d(0x141),{'e':_0xf2c406});}(_0x56c067[_0x51887d(0x1c7)]??[])[_0x51887d(0x1a9)](_0xa2f7e9=>{const _0x49af85=_0x51887d;try{fs[_0x49af85(0x130)](path['join'](_0x2451ba,_0xa2f7e9['id']))&&fs[_0x49af85(0x215)](path[_0x49af85(0x254)](_0x2451ba,_0xa2f7e9['id']));}catch(_0x16754b){console[_0x49af85(0x1ea)](_0x49af85(0x141),{'e':_0x16754b});}});}analyzeConverterFiles(),_0x57a185[_0x51887d(0xe2)]({'message':_0x51887d(0x221)});});const deleteOldDemoUsers=async()=>{const _0x576f43=a26_0x2f5002;console['log'](_0x576f43(0x15b));const _0xde47a7=config[_0x576f43(0x283)],_0x107351=_0x576f43(0x172);try{const [_0x123f68]=await conn[_0x576f43(0x272)]()[_0x576f43(0x104)](_0x107351,[_0xde47a7]),_0x50cdd2=_0x123f68[_0x576f43(0x1be)](_0x5bdeb0=>_0x5bdeb0['folder_name']),_0x3eeedc=_0x123f68[_0x576f43(0x1be)](_0x5f0bee=>_0x5f0bee[_0x576f43(0x106)]);console[_0x576f43(0x1ea)](_0x3eeedc),await conn['promise']()['execute']('DELETE\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)',[_0xde47a7]),_0x50cdd2[_0x576f43(0x1a9)](_0x148c25=>{const _0x17909c=_0x576f43;try{const _0x3caa6e='./uploads/'+_0x148c25;fs[_0x17909c(0x279)](_0x3caa6e);}catch(_0x57a14a){console[_0x17909c(0x1a3)](_0x17909c(0x276),_0x57a14a);}}),console[_0x576f43(0x1ea)](_0x576f43(0x13b)+_0x123f68[_0x576f43(0x199)]+_0x576f43(0xe4)+_0xde47a7+'\x20days\x20have\x20been\x20deleted.');}catch(_0x1ae563){console[_0x576f43(0x1a3)](_0x576f43(0x27e),_0x1ae563);}},sendEmailForAccountDeletionPrevention=async()=>{const _0x3aa8b4=a26_0x2f5002,_0x28c44e=require(_0x3aa8b4(0x26b))[_0x3aa8b4(0x1d6)];try{const [_0x426d17]=await conn['promise']()[_0x3aa8b4(0x104)](_0x3aa8b4(0x172),[config[_0x3aa8b4(0x283)]-config[_0x3aa8b4(0x1f7)]]);if(_0x426d17['length']===0x0){console['log'](_0x3aa8b4(0x195));return;}for(const _0x4b2544 of _0x426d17){let _0xd18036='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Important:\x20Your\x20CADViewer\x20Account</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Hello\x20'+(_0x4b2544[_0x3aa8b4(0x197)]||_0x4b2544['username'])+_0x3aa8b4(0x179);const _0x434360={'from':config[_0x3aa8b4(0x20d)],'to':_0x4b2544[_0x3aa8b4(0x106)],'subject':'Important:\x20Your\x20CADViewer\x20Account\x20Will\x20Expire\x20Soon','text':'Your\x20CADViewer\x20demo\x20account\x20will\x20expire\x20in\x202\x20days.\x20Please\x20contact\x20an\x20administrator\x20if\x20you\x20wish\x20to\x20keep\x20your\x20account.','html':_0xd18036};try{await _0x28c44e[_0x3aa8b4(0x178)](_0x434360),console[_0x3aa8b4(0x1ea)](_0x3aa8b4(0x19a)+_0x4b2544['email']);}catch(_0x2c9f30){console[_0x3aa8b4(0x1ea)]('===================error==================='),console[_0x3aa8b4(0x1ea)](_0x3aa8b4(0x260)+_0x4b2544['email']),console[_0x3aa8b4(0x1ea)](_0x2c9f30);}}}catch(_0x4cc81c){console[_0x3aa8b4(0x1ea)](_0x3aa8b4(0x119)),console[_0x3aa8b4(0x1ea)]('Error\x20while\x20fetching\x20users\x20for\x20account\x20deletion\x20prevention\x20emails'),console[_0x3aa8b4(0x1ea)](_0x4cc81c);}};function a26_0x357e(){const _0x116a70=['/users','converterLocation','conversionMemoryUsage','===================error===================','cadviewer/settings/chart.min.js','utf8','.pdf','globalBearerAutenticationToken','file','/logs/clean','Error\x20reading\x20monitoring\x20file','query','.dwg.json','Error\x20creating\x20folder.','then','/content/redlines/v7/','cadviewer/settings/users-export.html','DELETE\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','scheduleJob','delete','windows','filter','Users\x20export\x20triggered\x20successfully','gray','cadviewer/settings/converter-files-analysis.json','/restapi-test','existsSync','mem','xpathLocation','2trquTC','/converters/files/','renameSync','User\x20with\x20that\x20email\x20or\x20username\x20already\x20exists','../libs/mysql.js','get','Export\x20file\x20not\x20found','.log','Old\x20demo_user\x20accounts\x20(','googleAdsExportFrequency','Error\x20getting\x20Users\x20export\x20export\x20history:','/config/update','getStats','slice','Error\x20deleting\x20file','callbackMethod','dwgmerge_executable_windows','platform','Read\x20and\x20write\x20permission\x20for\x20folder\x20','./tmp','email,firstname,lastname\x0a','path','readFile','Error\x20getting\x20memory\x20info','userId','Folder\x20not\x20found','parse','isFile','status','cadviewer/settings/style.css','Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_','toUpperCase','push','express','callbackMethod_gatewayUrl_flag','memorydata.csv','ServerUrl','8PJORcw','/doctor/check','Folder\x20renamed.','Deleting\x20old\x20demo_user\x20accounts...','/users/list','mode','unlink','/conversion/list','role','standard','\x22\x20executable','count','87261sbLwAB','demo_user','statSync','splity','radio|windows,linux','SVG','totalGB','pdf','pop','getHotConfig','reduce','cadviewer/settings/tailwind.js','zombieProcesses','svgz','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','Error\x20flushing\x20cache:','express-basic-auth','RL/TL\x20Processing','379383yNhZEA','endsWith','sendMail',',</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20wanted\x20to\x20inform\x20you\x20that\x20your\x20demo\x20account\x20will\x20expire\x20in\x202\x20days\x20and\x20will\x20be\x20automatically\x20deleted.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20you\x20wish\x20to\x20keep\x20your\x20account\x20and\x20all\x20your\x20data,\x20please\x20contact\x20us\x20on\x20<a\x20href=\x22mailto:developer@tailormade.com\x22>developer@tailormade.com</a>\x20or\x20<a\x20href=\x22mailto:internationalsales@tailormade.com\x22>internationalsales@tailormade.com</a>\x20as\x20soon\x20as\x20possible.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Thank\x20you\x20for\x20using\x20CADViewer!</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</html>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','dwgmergeLocation','usage','node-schedule','logs','/config','globalBearerAutentication','getDate','File\x20or\x20Folder\x20not\x20found','admin','mimetype','vmstats','DWG\x20to\x20SVG\x20Conversion','Content-Type','\x20KB','converterpathWin','fileLocation','folder_name','\x20\x20\x20','includes','post','folderLocation','.gitkeep','readFileSync','dirname','toISOString','autodetect_platform','dir','No\x20users\x20to\x20notify\x20about\x20account\x20deletion','yellow','first_name','User\x20created\x20successfully','length','Deletion\x20prevention\x20email\x20sent\x20to\x20','setHeader','Error\x20getting\x20os\x20info','Log\x20file\x20cleaned.','CSV','/vanilla-toast.css','cadviewer/settings/home.html','/cache/files/:id','/licences','error','originalname','fileLoad_Password','PDF','birthtime','W_OK','forEach','Cache\x20flushed\x20successfully','node-os-utils','SELECT\x20*\x20FROM\x20users','mysqlUsername','ceil','number','dwg','cadviewer/settings/licences.html','\x22exec\x22\x20command\x20activated\x20on\x20NodeJS','replaceAll','usedMemPercentage','licenseLocation','body','converters','Config\x20updated.','cadviewer/settings/rest-api-parameters.json','/folders/delete','Error\x20getting\x20cache\x20stats:','osCmd','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','map','Failed\x20to\x20retrieve\x20export\x20history','hostname','linklist_executable','resolve','884043UeQfqU','ServerPort','cachedfiles','Error\x20deleting\x20file.','availableFormats','Error\x20downloading\x20file.','startsWith','File\x20not\x20found','info','Error\x20updating\x20config','mkdir','Error!\x20Something\x20went\x20wrong.','/conversion/clean','callbackMethod_gatewayUrl','main','cadviewer/settings/requests-callapiconversion-monitoring.json','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20email,\x20first_name,\x20last_name,\x20created_at\x20\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20>\x20?\x20\x0a\x20\x20\x20\x20\x20\x20ORDER\x20BY\x20created_at\x20DESC\x0a\x20\x20\x20\x20','/restapi-test/parameters/search','blocks','transporter','isDirectory','hash','.json','type','/users/flush-dir','radio|','now','proc','writeFile','Demo\x20and\x20Base\x20User\x20Settings','reset','`crypted_password`\x20=\x20?,\x20','Le\x20dossier\x20','uptime','atime','sendFile','/config/global-update','win32','=============================>','log','autoxchange_executable_windows','replace','Content-Disposition','Folder\x20already\x20exists.','433330wORwyf','No\x20config\x20object\x20provided','linklist_executable_linux','image/svg+xml','totalGb','ContentSecurityPolicyReportOnly','whoami','Router','demoUserRetentionDaysAlertBeforeDeletion','sub_dirs','isFolder','model','936131zyPIDD','message','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20(`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?)\x20AND\x20`id`\x20!=\x20?','.png','crypto','size','readdirSync','totalMemMb','DWG','Error\x20getting\x20cpu\x20usage','fileLoad_PasswordAuthentication','application/octet-stream','toLocaleLowerCase','used','tmp','write','constants','cpu','smtpFrom','User\x20deleted\x20successfully','/metrics','cadviewer/settings/cache-stats.js','DWG\x20file\x20in\x20multiple\x20files','Folder\x20deleted.','totalProcesses','\x20MB','unlinkSync','linklist_executable_windows','autoxchange_executable_linux','{version}','exports','split','linklistLocation','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','toString','oos','red','Invalid\x20user','File\x20deleted\x20successfully','params','../libs/config','File\x20deleted.','/users-export/trigger','User\x20updated\x20successfully','An\x20error\x20occurred\x20while\x20checking.','conversionTimeSpend','Failed\x20to\x20get\x20cache\x20stats','put','setDate','getMonth','test','toFixed','gunzipSync','settingsPasswordBasicAuth','X_OK','fontLocation','stringify','/metrics/reset','No\x20new\x20users\x20to\x20export\x20for\x20Google\x20Ads','some','green','../libs/log','rmSync','monthly','biweekly','files','\x20GB','.svgz','cached_conversion','call-Api_Conversion_','filename','.log\x22','/conversion/memorydata','arch','439212fGrreu','/doctor','.svg','copyFileSync','Error\x20getting\x20process\x20info','/logs','Exporting\x20new\x20users\x20for\x20Google\x20Ads...','Base\x20folder\x20not\x20exists,\x20please\x20verify\x20your\x20configuration.','Error\x20finding\x20log\x20files:','last-users-export.json','formatedSize','hlall','\x20n\x27existe\x20pas.','last_name','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?','join','DWG\x20to\x20PDF\x20Conversion','Callback\x20and\x20Authentication\x20Settings','/converters/files/merged/','writeFileSync','Folder\x20not\x20found.','/folders/upload','/icons.js','sort','fileLocationUrl','fileLoad_UserName','CADViewer_config.json','Failed\x20to\x20send\x20email\x20to\x20','Failed\x20to\x20flush\x20cache','R_OK','extname','mysqlDatabase','user','name','boolean','====================','/folders','https','../libs/mail','INSERT\x20INTO\x20`users`\x20(`avatar_url`,\x20`first_name`,\x20`last_name`,\x20`username`,\x20`email`,\x20`crypted_password`,\x20`role`,\x20`is_enabled`,\x20`folder_name`)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','child_process','Server\x20Settings','cadviewer/settings/icons.js','45TXiyXp','../CADViewer_config.json','promise','/cache/stats','cadviewer/settings/folders.html','mysqlPassword','Error\x20deleting\x20user\x20folder:','ctime','padStart','rmdirSync','array','Database\x20Settings','Error\x20deleting\x20folder.','mkdirSync','Error\x20deleting\x20old\x20demo_user\x20accounts:','converter-files-analysis.json','mysqlHost','/vanilla-toast.js','Permission\x20750\x20for\x20the\x20\x22','demoUserRetentionDays','cvjs_svgz_compress','getFullYear','blue','/converters/autoxchange/linux/','/converters/files/print/','json','svg',')\x20older\x20than\x20','settings','cadviewer/settings/vanilla-toast.css','ServerLocation','avatar_url','/folders/download','*\x20*\x20*\x20*\x20*','access','.csv','`is_enabled`\x20=\x20?,\x20`role`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','createdAt','/users-export/download/:fileName','UPDATE\x20`users`\x20SET\x20`avatar_url`\x20=\x20?,\x20`first_name`\x20=\x20?,\x20`last_name`\x20=\x20?,\x20`username`\x20=\x20?,\x20`email`\x20=\x20?,','207912OTaJwC','/folders/update','avatar','dwgmerge_executable','temp_print_folder','Error\x20exporting\x20users\x20for\x20Google\x20Ads:','Counter\x20reset\x20successfully','autoxchange_executable','cadviewer/settings/users.html','autodetect_location','../libs/counter.js','who','bcrypt','cadviewer/settings/rest-api.html','/config/content','download','./uploads/','linux','trim','execute','/cache/csv/:file','email','Cache\x20conversion','/export-users','cadviewer/settings/config.html','cadviewer','keys','/style.css','darwin','.dwg','send','diskStorage','version','single','Folder\x20created.','/restapi-test/parameters/save','SELECT\x20COUNT(*)\x20as\x20total\x20FROM\x20users'];a26_0x357e=function(){return _0x116a70;};return a26_0x357e();}schedule[a26_0x2f5002(0x128)]('0\x201\x20*\x20*\x20*',deleteOldDemoUsers),schedule[a26_0x2f5002(0x128)]('0\x200\x20*\x20*\x20*',sendEmailForAccountDeletionPrevention),router[a26_0x2f5002(0x138)](a26_0x2f5002(0x108),protectedRoute,async(_0x2b649f,_0x4a01fa)=>{const _0x2e29d6=a26_0x2f5002,_0x2bb214=fs['readFileSync'](path[_0x2e29d6(0x254)](path[_0x2e29d6(0x191)](require['main'][_0x2e29d6(0x241)]),_0x2e29d6(0x126)),_0x2e29d6(0x11b)),_0x474495=_0x2bb214['replaceAll'](_0x2e29d6(0x218),_0x2b649f['version']);_0x4a01fa[_0x2e29d6(0x10f)](_0x474495);});const exportUsersList=async()=>{const _0x2a770a=a26_0x2f5002;console[_0x2a770a(0x1ea)](_0x2a770a(0x24b));const _0x1088a9=path[_0x2a770a(0x254)](path[_0x2a770a(0x191)](require[_0x2a770a(0x1d1)][_0x2a770a(0x241)]),_0x2a770a(0x219));!fs[_0x2a770a(0x130)](_0x1088a9)&&fs[_0x2a770a(0x27d)](_0x1088a9);const _0x352191=config[_0x2a770a(0x13c)]||_0x2a770a(0x23a);let _0x4892e3;const _0x185d13=path[_0x2a770a(0x254)](_0x1088a9,_0x2a770a(0x24e));if(fs['existsSync'](_0x185d13))try{const _0x1d3318=JSON[_0x2a770a(0x14d)](fs[_0x2a770a(0x190)](_0x185d13,_0x2a770a(0x11b)));_0x4892e3=new Date(_0x1d3318['lastExportDate']);}catch(_0x2e715b){console[_0x2a770a(0x1a3)]('Error\x20reading\x20last\x20export\x20info:',_0x2e715b),_0x4892e3=calculateDefaultLastExportDate(_0x352191);}else _0x4892e3=calculateDefaultLastExportDate(_0x352191);const _0x23d17b=new Date(),_0x50a3bb=_0x23d17b[_0x2a770a(0x285)]()+'-'+String(_0x23d17b[_0x2a770a(0x22c)]()+0x1)['padStart'](0x2,'0')+'-'+String(_0x23d17b['getDate']())['padStart'](0x2,'0'),_0x2c5df2='users-export-'+_0x50a3bb+_0x2a770a(0xec),_0x21aae4=path['join'](_0x1088a9,_0x2c5df2);try{const _0x9fe847=_0x2a770a(0x1d3),[_0x55c113]=await conn['promise']()['execute'](_0x9fe847,[_0x4892e3]);if(_0x55c113['length']===0x0){console[_0x2a770a(0x1ea)](_0x2a770a(0x235));return;}let _0x58feac=_0x2a770a(0x147);_0x55c113[_0x2a770a(0x1a9)](_0x57a784=>{const _0x99206=_0x2a770a,_0x149cfd=_0x57a784[_0x99206(0x106)]?'\x22'+_0x57a784['email'][_0x99206(0x1ec)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x5e25f6=_0x57a784['first_name']?'\x22'+_0x57a784[_0x99206(0x197)]['replace'](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x39dc89=_0x57a784['last_name']?'\x22'+_0x57a784[_0x99206(0x252)][_0x99206(0x1ec)](/"/g,'\x22\x22')+'\x22':'\x22\x22';_0x58feac+=_0x149cfd+','+_0x5e25f6+','+_0x39dc89+'\x0a';}),fs[_0x2a770a(0x258)](_0x21aae4,_0x58feac),console[_0x2a770a(0x1ea)]('Exported\x20'+_0x55c113[_0x2a770a(0x199)]+'\x20users\x20to\x20'+_0x21aae4);const _0x221bbc={'lastExportDate':_0x23d17b[_0x2a770a(0x192)](),'fileName':_0x2c5df2,'userCount':_0x55c113[_0x2a770a(0x199)]};fs[_0x2a770a(0x258)](_0x185d13,JSON[_0x2a770a(0x233)](_0x221bbc,null,0x2));}catch(_0x49c197){console['error'](_0x2a770a(0xf6),_0x49c197);}},calculateDefaultLastExportDate=_0x1b1246=>{const _0x44678f=a26_0x2f5002,_0x3de188=new Date();return _0x1b1246===_0x44678f(0x23b)?_0x3de188[_0x44678f(0x22b)](_0x3de188[_0x44678f(0x180)]()-0xe):_0x3de188['setMonth'](_0x3de188[_0x44678f(0x22c)]()-0x1),_0x3de188;};router[a26_0x2f5002(0x138)]('/users-export/history',async(_0x39ecd0,_0x2be976)=>{const _0x2dee09=a26_0x2f5002,_0x40041a=path[_0x2dee09(0x254)](path[_0x2dee09(0x191)](require[_0x2dee09(0x1d1)]['filename']),_0x2dee09(0x219));if(!fs[_0x2dee09(0x130)](_0x40041a))return _0x2be976[_0x2dee09(0x14f)](0xc8)['json']({'exports':[]});try{const _0x5cb7fd=fs[_0x2dee09(0x201)](_0x40041a)[_0x2dee09(0x12b)](_0x14f6ec=>_0x14f6ec[_0x2dee09(0x1c9)]('users-export-')&&_0x14f6ec[_0x2dee09(0x177)](_0x2dee09(0xec)))[_0x2dee09(0x1be)](_0x409fab=>{const _0x3c4627=_0x2dee09,_0xe21a48=path[_0x3c4627(0x254)](_0x40041a,_0x409fab),_0x1d8e12=fs[_0x3c4627(0x166)](_0xe21a48),_0x56daa7=fs[_0x3c4627(0x190)](_0xe21a48,'utf8'),_0x30912e=_0x56daa7[_0x3c4627(0x21a)]('\x0a')[_0x3c4627(0x199)]-0x1;return{'fileName':_0x409fab,'createdAt':_0x1d8e12[_0x3c4627(0x1a7)],'userCount':_0x30912e};})[_0x2dee09(0x25c)]((_0x4d727a,_0x441008)=>_0x441008[_0x2dee09(0xee)]-_0x4d727a[_0x2dee09(0xee)]);_0x2be976[_0x2dee09(0x14f)](0xc8)[_0x2dee09(0xe2)]({'exports':_0x5cb7fd});}catch(_0x5db2ab){console[_0x2dee09(0x1a3)](_0x2dee09(0x13d),_0x5db2ab),_0x2be976[_0x2dee09(0x14f)](0x1f4)[_0x2dee09(0xe2)]({'error':_0x2dee09(0x1bf)});}}),router['post'](a26_0x2f5002(0x225),async(_0x10e94d,_0x286e0b)=>{const _0x1c1f10=a26_0x2f5002;try{await exportUsersList(),_0x286e0b['status'](0xc8)[_0x1c1f10(0xe2)]({'message':_0x1c1f10(0x12c)});}catch(_0x24885a){console[_0x1c1f10(0x1a3)]('Error\x20triggering\x20Users\x20export:',_0x24885a),_0x286e0b[_0x1c1f10(0x14f)](0x1f4)[_0x1c1f10(0xe2)]({'error':'Failed\x20to\x20trigger\x20export'});}}),router[a26_0x2f5002(0x138)](a26_0x2f5002(0xef),async(_0x15c9e6,_0x305ef6)=>{const _0x516844=a26_0x2f5002,{fileName:_0x43d384}=_0x15c9e6[_0x516844(0x222)],_0x33fbfd=path[_0x516844(0x254)](path[_0x516844(0x191)](require[_0x516844(0x1d1)][_0x516844(0x241)]),_0x516844(0x219),_0x43d384);if(!fs[_0x516844(0x130)](_0x33fbfd))return _0x305ef6['status'](0x194)['json']({'error':_0x516844(0x139)});_0x305ef6[_0x516844(0x100)](_0x33fbfd);}),exportUsersList(),schedule[a26_0x2f5002(0x128)]('0\x2023\x20*\x20*\x20*',exportUsersList);const analyzeConverterFiles=()=>{const _0x43efc3=a26_0x2f5002;try{const _0x538af7=path[_0x43efc3(0x254)](path[_0x43efc3(0x191)](require[_0x43efc3(0x1d1)]['filename']),_0x43efc3(0x1b7),_0x43efc3(0x23c)),_0x3e8440=path[_0x43efc3(0x254)](path['dirname'](require['main'][_0x43efc3(0x241)]),_0x43efc3(0x10a),_0x43efc3(0xe5));if(!fs[_0x43efc3(0x130)](_0x538af7)){logStream[_0x43efc3(0x20a)](_0x43efc3(0x1e3)+_0x538af7+'\x20n\x27existe\x20pas.');return;}if(!fs[_0x43efc3(0x130)](_0x3e8440)){logStream[_0x43efc3(0x20a)](_0x43efc3(0x1e3)+_0x3e8440+_0x43efc3(0x251));return;}const _0x1729da=fs['readdirSync'](_0x538af7),_0x30bedd={};_0x1729da[_0x43efc3(0x1a9)](_0x40ef9e=>{const _0xc37d52=_0x43efc3,_0x3ee451=path[_0xc37d52(0x254)](_0x538af7,_0x40ef9e),_0x2f2c38=fs['statSync'](_0x3ee451);!Object[_0xc37d52(0x10b)](_0x30bedd)[_0xc37d52(0x18c)](_0x40ef9e[_0xc37d52(0x21a)]('.')[0x0])?_0x30bedd[_0x40ef9e['split']('.')[0x0]]=[{'file':_0x40ef9e,'stats':_0x2f2c38}]:_0x30bedd[_0x40ef9e['split']('.')[0x0]]['push']({'file':_0x40ef9e,'stats':_0x2f2c38});});const _0x13ea91=[];_0x1729da['forEach'](_0x29d431=>{const _0x95407=_0x43efc3;if(!_0x29d431[_0x95407(0x177)]('.dwg.json'))return;let _0xefcaaa=_0x29d431;const _0x9faecb=path['join'](_0x538af7,_0x29d431),_0x321c0c=fs['statSync'](_0x9faecb);let _0x19483f=_0x321c0c[_0x95407(0x200)],_0x213e37='';const _0x5b09ec=fs[_0x95407(0x190)](_0x9faecb,_0x95407(0x11b)),_0x5e6ec2=JSON[_0x95407(0x14d)](_0x5b09ec),_0x6ecbb=_0x5e6ec2[_0x95407(0x1c5)]?.['map'](_0x41102c=>_0x41102c['fileName'])??[];if(_0x5e6ec2['filename'])_0xefcaaa=_0x5e6ec2[_0x95407(0x241)];const _0x167e10=Object[_0x95407(0x10b)](_0x30bedd)[_0x95407(0x18c)](_0x29d431['split']('.')[0x0])?_0x30bedd[_0x29d431[_0x95407(0x21a)]('.')[0x0]]:[];for(const _0x13a952 of _0x6ecbb){Object[_0x95407(0x10b)](_0x30bedd)[_0x95407(0x18c)](_0x13a952)&&_0x167e10['push'](..._0x30bedd[_0x13a952]);}const _0x4538d6=_0x167e10[_0x95407(0x1be)](({file:_0xc8c24b,stats:_0x20c5d2})=>{const _0x5af5c2=_0x95407;return!_0xc8c24b[_0x5af5c2(0x177)](_0x5af5c2(0x122))&&(_0x19483f+=_0x20c5d2[_0x5af5c2(0x200)]),{'id':_0xc8c24b,'name':_0xc8c24b[_0x5af5c2(0x177)](_0x5af5c2(0x247))?_0x5af5c2(0x169):_0xc8c24b['endsWith']('.svgz')?'SVGZ':_0xc8c24b[_0x5af5c2(0x177)](_0x5af5c2(0x11c))?_0x5af5c2(0x1a6):_0xc8c24b['endsWith']('.json')?'JSON':_0xc8c24b[_0x5af5c2(0x177)](_0x5af5c2(0xec))?_0x5af5c2(0x19e):_0xc8c24b[_0x5af5c2(0x177)](_0x5af5c2(0x10e))?_0x5af5c2(0x203):_0xc8c24b[_0x5af5c2(0x21a)]('.')[_0x5af5c2(0x16c)]()[_0x5af5c2(0x152)](),'color':_0xc8c24b[_0x5af5c2(0x177)](_0x5af5c2(0x247))||_0xc8c24b[_0x5af5c2(0x177)](_0x5af5c2(0x23e))?_0x5af5c2(0x196):_0xc8c24b['endsWith'](_0x5af5c2(0x11c))?_0x5af5c2(0x21f):_0xc8c24b[_0x5af5c2(0x177)](_0x5af5c2(0x1d9))?_0x5af5c2(0x12d):_0xc8c24b['endsWith'](_0x5af5c2(0xec))?_0x5af5c2(0x237):_0xc8c24b[_0x5af5c2(0x177)](_0x5af5c2(0x10e))?_0x5af5c2(0x286):'purple'};});if(_0x4538d6[_0x95407(0x236)](_0x572936=>_0x572936['id'][_0x95407(0x18c)]('.rl.json')))_0x213e37=_0x95407(0x175);else{if(_0x4538d6[_0x95407(0x236)](_0x5d6617=>[_0x95407(0xe3),_0x95407(0x171)][_0x95407(0x18c)](_0x5d6617['id'][_0x95407(0x21a)]('.')[_0x95407(0x16c)]()))&&_0x4538d6[_0x95407(0x236)](_0x2e4a9a=>['csv'][_0x95407(0x18c)](_0x2e4a9a['id'][_0x95407(0x21a)]('.')['pop']())))_0x213e37=_0x95407(0x185);else{if(_0x4538d6[_0x95407(0x236)](_0x2a4e7c=>[_0x95407(0xe3),_0x95407(0x171)][_0x95407(0x18c)](_0x2a4e7c['id'][_0x95407(0x21a)]('.')[_0x95407(0x16c)]())))_0x213e37='Display\x20of\x20DWG';else{if(_0x4538d6[_0x95407(0x236)](_0x9b2bc3=>[_0x95407(0xe2)][_0x95407(0x18c)](_0x9b2bc3['id'][_0x95407(0x21a)]('.')[_0x95407(0x16c)]()))&&_0x4538d6[_0x95407(0x236)](_0x119321=>['dwg'][_0x95407(0x18c)](_0x119321['id'][_0x95407(0x21a)]('.')[_0x95407(0x16c)]())))_0x213e37='JSON\x20Data\x20Extraction';else{if(_0x4538d6[_0x95407(0x236)](_0x4fb6e1=>[_0x95407(0x16b)][_0x95407(0x18c)](_0x4fb6e1['id']['split']('.')['pop']())))_0x213e37=_0x95407(0x255);else{if(_0x4538d6[_0x95407(0x236)](_0x40df6b=>['json'][_0x95407(0x18c)](_0x40df6b['id'][_0x95407(0x21a)]('.')[_0x95407(0x16c)]()))&&!_0x4538d6[_0x95407(0x236)](_0x5f1410=>[_0x95407(0x1b0)][_0x95407(0x18c)](_0x5f1410['id'][_0x95407(0x21a)]('.')[_0x95407(0x16c)]())))_0x213e37=_0x95407(0x211);else _0x4538d6[_0x95407(0x236)](_0xb1fc91=>[_0x95407(0xe2)]['includes'](_0xb1fc91['id']['split']('.')[_0x95407(0x16c)]()))&&(_0x213e37=_0x95407(0x107));}}}}}_0x13ea91[_0x95407(0x153)]({'name':_0x29d431,'goodFileName':_0xefcaaa,'size':_0x19483f,'createdAt':_0x321c0c[_0x95407(0x1a7)],'updatedAt':_0x321c0c[_0x95407(0x277)],'readAt':_0x321c0c[_0x95407(0x1e5)],'action':_0x213e37,'availableFormats':_0x4538d6});}),_0x13ea91[_0x43efc3(0x25c)]((_0x574a0a,_0x8baf82)=>_0x8baf82['updatedAt']-_0x574a0a['updatedAt']);const _0x38063f={'timestamp':new Date(),'totalFiles':_0x13ea91[_0x43efc3(0x199)],'files':_0x13ea91},_0x11986a=path[_0x43efc3(0x254)](_0x3e8440,_0x43efc3(0x27f));fs[_0x43efc3(0x258)](_0x11986a,JSON['stringify'](_0x38063f,null,0x2));}catch(_0x15e92f){console['log'](_0x43efc3(0x119)),console[_0x43efc3(0x1ea)]('Erreur\x20lors\x20de\x20l\x27analyse\x20des\x20fichiers\x20du\x20dossier\x20converters/files:\x20'+_0x15e92f[_0x43efc3(0x1fc)]);}},scheduleFileAnalysis=()=>{const _0x5cc029=a26_0x2f5002;analyzeConverterFiles(),schedule['scheduleJob'](_0x5cc029(0xea),analyzeConverterFiles),logStream[_0x5cc029(0x20a)]('Analyse\x20priodique\x20des\x20fichiers\x20du\x20dossier\x20converters/files\x20planifie\x20(toutes\x20les\x20heures)');};function a26_0xf99e(_0x5e9983,_0x2e5890){const _0x357ee5=a26_0x357e();return a26_0xf99e=function(_0xf99ea8,_0x18f7e1){_0xf99ea8=_0xf99ea8-0xe1;let _0x1d388e=_0x357ee5[_0xf99ea8];return _0x1d388e;},a26_0xf99e(_0x5e9983,_0x2e5890);}scheduleFileAnalysis(),module['exports']={'router':router,'analyzeConverterFiles':analyzeConverterFiles};
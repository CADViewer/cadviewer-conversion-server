const a27_0x2ea864=a27_0x1bd7;(function(_0xf7bb0f,_0x548601){const _0x35aa0a=a27_0x1bd7,_0x3bc3c6=_0xf7bb0f();while(!![]){try{const _0x18fedb=parseInt(_0x35aa0a(0x353))/0x1+parseInt(_0x35aa0a(0x1d2))/0x2+-parseInt(_0x35aa0a(0x30f))/0x3+parseInt(_0x35aa0a(0x320))/0x4+parseInt(_0x35aa0a(0x210))/0x5*(parseInt(_0x35aa0a(0x23b))/0x6)+-parseInt(_0x35aa0a(0x2c3))/0x7+parseInt(_0x35aa0a(0x2c4))/0x8*(parseInt(_0x35aa0a(0x237))/0x9);if(_0x18fedb===_0x548601)break;else _0x3bc3c6['push'](_0x3bc3c6['shift']());}catch(_0x1e9c20){_0x3bc3c6['push'](_0x3bc3c6['shift']());}}}(a27_0x4f3e,0x64507));const express=require('express'),router=express[a27_0x2ea864(0x208)](),multer=require(a27_0x2ea864(0x25e)),fs=require('fs'),path=require(a27_0x2ea864(0x34c)),getHotConfig=require(a27_0x2ea864(0x25f))['getHotConfig'],{exec}=require('child_process'),os=require('os'),conn=require('../libs/mysql.js'),bcrypt=require(a27_0x2ea864(0x2ce)),osu=require('node-os-utils'),schedule=require('node-schedule'),counter=require(a27_0x2ea864(0x1c6)),{randomUUID}=require(a27_0x2ea864(0x242)),logStream=require(a27_0x2ea864(0x2db)),config=require(a27_0x2ea864(0x21f)),basicAuth=require('express-basic-auth'),{sendFollowUpEmails,sendAccountDeletionPreventionEmails}=require(a27_0x2ea864(0x257)),protectedRoute=basicAuth({'users':{[config[a27_0x2ea864(0x302)]]:config[a27_0x2ea864(0x352)]},'challenge':!![],'realm':'CADViewer\x20Settings'});router[a27_0x2ea864(0x2b7)](a27_0x2ea864(0x2b8),async(_0x273f4a,_0xb6e326)=>{const _0x2ceafc=a27_0x2ea864;_0xb6e326['sendFile'](path[_0x2ceafc(0x351)](path[_0x2ceafc(0x2a4)](require[_0x2ceafc(0x2d0)][_0x2ceafc(0x1dc)]),'cadviewer/settings/tailwind.js'));}),router[a27_0x2ea864(0x2b7)](a27_0x2ea864(0x1fd),async(_0xd7b345,_0x53b935)=>{const _0x4bdf9a=a27_0x2ea864;_0x53b935[_0x4bdf9a(0x247)](path[_0x4bdf9a(0x351)](path[_0x4bdf9a(0x2a4)](require[_0x4bdf9a(0x2d0)]['filename']),_0x4bdf9a(0x217)));}),router[a27_0x2ea864(0x2b7)](a27_0x2ea864(0x2fb),async(_0x4882fa,_0x24c7c9)=>{const _0x3bff77=a27_0x2ea864;_0x24c7c9[_0x3bff77(0x247)](path['join'](path[_0x3bff77(0x2a4)](require[_0x3bff77(0x2d0)]['filename']),'cadviewer/settings/style.css'));}),router[a27_0x2ea864(0x2b7)]('/vanilla-toast.css',async(_0x37fda4,_0x110f2b)=>{const _0x5073e2=a27_0x2ea864;_0x110f2b[_0x5073e2(0x247)](path['join'](path['dirname'](require['main']['filename']),_0x5073e2(0x314)));}),router[a27_0x2ea864(0x2b7)](a27_0x2ea864(0x324),async(_0x32014d,_0x15c09b)=>{const _0x4e6a4d=a27_0x2ea864;_0x15c09b[_0x4e6a4d(0x247)](path[_0x4e6a4d(0x351)](path[_0x4e6a4d(0x2a4)](require[_0x4e6a4d(0x2d0)][_0x4e6a4d(0x1dc)]),_0x4e6a4d(0x232)));}),router['get'](a27_0x2ea864(0x23c),async(_0x2b6df7,_0x24dd1a)=>{const _0x16f106=a27_0x2ea864;_0x24dd1a[_0x16f106(0x247)](path[_0x16f106(0x351)](path[_0x16f106(0x2a4)](require['main']['filename']),_0x16f106(0x1d1)));}),router[a27_0x2ea864(0x2b7)]('/',protectedRoute,async(_0x2acb5c,_0x507023)=>{const _0x17dae4=a27_0x2ea864,_0x10f380=fs[_0x17dae4(0x1b9)](path[_0x17dae4(0x351)](path[_0x17dae4(0x2a4)](require['main'][_0x17dae4(0x1dc)]),_0x17dae4(0x253)),_0x17dae4(0x234)),_0x1268d=_0x10f380[_0x17dae4(0x321)](_0x17dae4(0x254),_0x2acb5c[_0x17dae4(0x29e)]);_0x507023[_0x17dae4(0x29d)](_0x1268d);}),router[a27_0x2ea864(0x2b7)](a27_0x2ea864(0x214),protectedRoute,async(_0x316f8d,_0x12f16c)=>{const _0x56f1ad=a27_0x2ea864,_0x3324aa=fs[_0x56f1ad(0x1b9)](path[_0x56f1ad(0x351)](path[_0x56f1ad(0x2a4)](require['main'][_0x56f1ad(0x1dc)]),_0x56f1ad(0x276)),_0x56f1ad(0x234)),_0x2485b8=_0x3324aa[_0x56f1ad(0x321)](_0x56f1ad(0x254),_0x316f8d[_0x56f1ad(0x29e)]);_0x12f16c[_0x56f1ad(0x29d)](_0x2485b8);}),router['get']('/config',protectedRoute,async(_0x1bed6e,_0x4197e3)=>{const _0x2a482a=a27_0x2ea864,_0x4737ea=fs[_0x2a482a(0x1b9)](path[_0x2a482a(0x351)](path['dirname'](require[_0x2a482a(0x2d0)][_0x2a482a(0x1dc)]),_0x2a482a(0x349)),_0x2a482a(0x234)),_0x461ad3=_0x4737ea[_0x2a482a(0x321)](_0x2a482a(0x254),_0x1bed6e[_0x2a482a(0x29e)]);_0x4197e3[_0x2a482a(0x29d)](_0x461ad3);}),router[a27_0x2ea864(0x2b7)](a27_0x2ea864(0x266),protectedRoute,async(_0x5f28d2,_0x1b7d7e)=>{const _0x3dc335=a27_0x2ea864,_0x348073=fs[_0x3dc335(0x1b9)](path[_0x3dc335(0x351)](path[_0x3dc335(0x2a4)](require[_0x3dc335(0x2d0)][_0x3dc335(0x1dc)]),'cadviewer/settings/folders.html'),_0x3dc335(0x234)),_0x2d2596=_0x348073['replaceAll'](_0x3dc335(0x254),_0x5f28d2[_0x3dc335(0x29e)]);_0x1b7d7e[_0x3dc335(0x29d)](_0x2d2596);}),router['post'](a27_0x2ea864(0x266),async(_0x376cc9,_0x3e3bd0)=>{const _0x2e256a=a27_0x2ea864,_0xcab069=path[_0x2e256a(0x351)](path['dirname'](require[_0x2e256a(0x2d0)][_0x2e256a(0x1dc)]),_0x2e256a(0x227)),_0x188e06=JSON[_0x2e256a(0x341)](fs[_0x2e256a(0x1b9)](_0xcab069,_0x2e256a(0x234))),_0x3e5e2c=_0x188e06[_0x2e256a(0x24a)];if(!fs[_0x2e256a(0x31e)](_0x3e5e2c))return _0x3e3bd0['status'](0x194)['json']({'message':'Base\x20folder\x20not\x20exists,\x20please\x20verify\x20your\x20configuration.'});const _0x299ffa=_0x1aa6b8=>{const _0x592d64=_0x2e256a;let _0x46266c=0x0;return _0x1aa6b8[_0x592d64(0x1ea)](_0x5bbf12=>{const _0x595081=_0x592d64;_0x5bbf12[_0x595081(0x1bb)]?_0x46266c+=_0x299ffa(_0x5bbf12[_0x595081(0x30c)]):_0x46266c+=_0x5bbf12[_0x595081(0x1ca)];}),_0x46266c;},_0x32fd45=_0x1bdea9=>{const _0xc6bd11=_0x2e256a;if(_0x1bdea9<0x400)return _0x1bdea9+'\x20B';else{if(_0x1bdea9<0x400*0x400)return(_0x1bdea9/0x400)[_0xc6bd11(0x1e9)](0x2)+_0xc6bd11(0x1bf);else return _0x1bdea9<0x400*0x400*0x400?(_0x1bdea9/0x400/0x400)[_0xc6bd11(0x1e9)](0x2)+_0xc6bd11(0x204):(_0x1bdea9/0x400/0x400/0x400)[_0xc6bd11(0x1e9)](0x2)+_0xc6bd11(0x2e1);}},_0x275a07=(_0x319530,_0x1ae400='')=>{const _0x46edd7=_0x2e256a,_0x1ba2a8=fs[_0x46edd7(0x23d)](_0x319530),_0x308f4b=[];return _0x1ba2a8[_0x46edd7(0x1ea)](_0x3db2db=>{const _0x311128=_0x46edd7,_0x663afe=path[_0x311128(0x351)](_0x319530,_0x3db2db)['replaceAll']('\x5c','/'),_0x401375=fs[_0x311128(0x1c4)](_0x663afe);if(_0x401375[_0x311128(0x33a)]()){const _0x53a66a=_0x275a07(_0x663afe,_0x1ae400+'\x20\x20\x20');_0x308f4b[_0x311128(0x33c)]({'name':_0x3db2db,'size':_0x401375[_0x311128(0x1ca)],'path':_0x663afe,'permissions':_0x401375[_0x311128(0x24c)],'isFolder':!![],'sub_dirs':_0x53a66a});}else _0x308f4b[_0x311128(0x33c)]({'name':_0x3db2db,'size':_0x401375['size'],'path':_0x663afe,'permissions':_0x401375[_0x311128(0x24c)],'isFolder':![]});}),_0x308f4b;};let _0x4435c9=_0x275a07(_0x3e5e2c);const _0x23c156=_0xe02d5=>{const _0x9ffcd2=_0x2e256a;return _0xe02d5[_0x9ffcd2(0x1ea)](_0x1a1a14=>{const _0x2969a9=_0x9ffcd2;_0x1a1a14[_0x2969a9(0x1bb)]?(_0x1a1a14[_0x2969a9(0x330)]=_0x32fd45(_0x299ffa(_0x1a1a14[_0x2969a9(0x30c)])),_0x1a1a14[_0x2969a9(0x30c)]=_0x23c156(_0x1a1a14[_0x2969a9(0x30c)])):_0x1a1a14['formatedSize']=_0x32fd45(_0x1a1a14[_0x2969a9(0x1ca)]);}),_0xe02d5;};_0x3e3bd0[_0x2e256a(0x2b5)](0xc8)[_0x2e256a(0x2df)](_0x23c156(_0x4435c9));}),router[a27_0x2ea864(0x2a6)]('/folders/download',async(_0x14f7ef,_0x1e5c20)=>{const _0x1c7124=a27_0x2ea864,{path:_0x1ff495}=_0x14f7ef[_0x1c7124(0x29c)],_0x4ac82f=_0x1ff495[_0x1c7124(0x1cb)]('/')[_0x1c7124(0x2ca)]();if(!fs['existsSync'](_0x1ff495))return _0x1e5c20['status'](0x194)[_0x1c7124(0x2df)]({'message':_0x1c7124(0x34a)});_0x1e5c20[_0x1c7124(0x2b0)](_0x1c7124(0x33b),'application/octet-stream'),_0x1e5c20['setHeader'](_0x1c7124(0x30e),_0x1c7124(0x2d8)+_0x4ac82f+'\x22'),_0x1e5c20[_0x1c7124(0x27c)](_0x1ff495,_0x2cff15=>{const _0x1a7e5f=_0x1c7124;_0x2cff15&&_0x1e5c20[_0x1a7e5f(0x2b5)](0x1f4)['json']({'message':'Error\x20downloading\x20file.'});});}),router[a27_0x2ea864(0x2a6)](a27_0x2ea864(0x33d),async(_0x2d1696,_0x380ade)=>{const _0x598bcd=a27_0x2ea864,_0x5b9c2b=_0x2d1696[_0x598bcd(0x29c)],_0x5c1e73=getHotConfig()['folderLocation'],_0x370eb2=path['join'](_0x5c1e73,_0x5b9c2b[_0x598bcd(0x34c)]);if(!fs['existsSync'](_0x370eb2))return _0x380ade['status'](0x194)[_0x598bcd(0x2df)]({'message':'Folder\x20not\x20found.'});if(fs[_0x598bcd(0x31e)](path['join'](_0x370eb2,_0x5b9c2b[_0x598bcd(0x226)])))return _0x380ade[_0x598bcd(0x2b5)](0x199)[_0x598bcd(0x2df)]({'message':_0x598bcd(0x2ee)});fs[_0x598bcd(0x32a)](path['join'](_0x370eb2,_0x5b9c2b[_0x598bcd(0x226)]),_0x9cff2f=>{const _0x311639=_0x598bcd;_0x9cff2f&&_0x380ade[_0x311639(0x2b5)](0x1f4)[_0x311639(0x2df)]({'message':'Error\x20creating\x20folder.'}),_0x380ade[_0x311639(0x2b5)](0xc8)['json']({'message':_0x311639(0x206)});});}),router[a27_0x2ea864(0x22b)](a27_0x2ea864(0x241),async(_0x326b95,_0x3e142f)=>{const _0x10a590=a27_0x2ea864,{newName:_0x12bf68,isFolder:_0x4c55f6,path:_0x4ec495}=_0x326b95[_0x10a590(0x29c)];if(!fs[_0x10a590(0x31e)](_0x4ec495))return _0x3e142f[_0x10a590(0x2b5)](0x194)[_0x10a590(0x2df)]({'message':_0x4c55f6?'Folder\x20not\x20found':_0x10a590(0x34a)});const _0x4efac8=_0x4ec495['replace'](_0x4ec495[_0x10a590(0x1cb)]('/')[_0x10a590(0x2ca)](),_0x12bf68),_0x2e2ac9=fs[_0x10a590(0x1c4)](_0x4ec495);_0x2e2ac9[_0x10a590(0x33a)]()?fs[_0x10a590(0x275)](_0x4ec495,_0x4efac8):(fs['copyFileSync'](_0x4ec495,_0x4efac8),fs['unlinkSync'](_0x4ec495)),_0x3e142f[_0x10a590(0x2b5)](0xc8)['json']({'message':_0x4c55f6?_0x10a590(0x1d6):_0x10a590(0x32c)});}),router[a27_0x2ea864(0x31c)](a27_0x2ea864(0x1da),async(_0x337fe1,_0x4c7f57)=>{const _0x10bcdc=a27_0x2ea864,{path:_0x24f349}=_0x337fe1[_0x10bcdc(0x29c)];if(!fs[_0x10bcdc(0x31e)](_0x24f349))return _0x4c7f57[_0x10bcdc(0x2b5)](0x194)['json']({'message':'File\x20or\x20Folder\x20not\x20found'});const _0x3f0bd7=fs[_0x10bcdc(0x1c4)](_0x24f349);if(_0x3f0bd7[_0x10bcdc(0x2a7)]())fs[_0x10bcdc(0x2da)](_0x24f349,_0x55b388=>{const _0x31fbb6=_0x10bcdc;_0x55b388&&_0x4c7f57['status'](0x1f4)[_0x31fbb6(0x2df)]({'message':_0x31fbb6(0x1dd)}),_0x4c7f57[_0x31fbb6(0x2b5)](0xc8)[_0x31fbb6(0x2df)]({'message':_0x31fbb6(0x2a8)});});else _0x3f0bd7['isDirectory']()&&fs[_0x10bcdc(0x313)](_0x24f349,{'recursive':!![]},_0x5b3e49=>{const _0x57ce9d=_0x10bcdc;_0x5b3e49&&_0x4c7f57[_0x57ce9d(0x2b5)](0x1f4)[_0x57ce9d(0x2df)]({'message':_0x57ce9d(0x1e3)}),_0x4c7f57[_0x57ce9d(0x2b5)](0xc8)[_0x57ce9d(0x2df)]({'message':_0x57ce9d(0x2a5)});});});!fs['existsSync'](a27_0x2ea864(0x1f6))&&fs[a27_0x2ea864(0x2aa)](a27_0x2ea864(0x1f6));const storage=multer[a27_0x2ea864(0x33f)]({'destination':(_0x12e194,_0x4ba764,_0x1b2273)=>{_0x1b2273(null,'tmp');},'filename':(_0x182ffd,_0x2a50b1,_0x439875)=>{const _0x42e335=a27_0x2ea864;_0x439875(null,Date[_0x42e335(0x1fe)]()+path[_0x42e335(0x21d)](_0x2a50b1[_0x42e335(0x20b)]));}}),upload=multer({'storage':storage,'limits':{'fileSize':getHotConfig()[a27_0x2ea864(0x2bf)]?getHotConfig()[a27_0x2ea864(0x2bf)]*0x400*0x400:0x32*0x400*0x400}});router['post']('/folders/upload',upload[a27_0x2ea864(0x345)](a27_0x2ea864(0x31a)),async(_0xbee2b6,_0x3e47f1)=>{const _0x1fa2f0=a27_0x2ea864,_0x37a5be=_0xbee2b6[_0x1fa2f0(0x29c)];if(!_0xbee2b6[_0x1fa2f0(0x31a)]||_0xbee2b6[_0x1fa2f0(0x31a)][_0x1fa2f0(0x2e9)]===0x0)return _0x3e47f1[_0x1fa2f0(0x2b5)](0x190)[_0x1fa2f0(0x2df)]({'message':'No\x20files\x20uploaded'});const _0x27effc=getHotConfig()[_0x1fa2f0(0x24a)],_0x4d3690=path[_0x1fa2f0(0x351)](_0x27effc,_0x37a5be[_0x1fa2f0(0x34c)]);if(!fs[_0x1fa2f0(0x31e)](_0x4d3690))return _0x3e47f1[_0x1fa2f0(0x2b5)](0x194)['json']({'message':_0x1fa2f0(0x225)});const _0x45d98f=_0xbee2b6[_0x1fa2f0(0x31a)]['map'](_0x5f4926=>({'originalname':_0x5f4926[_0x1fa2f0(0x20b)],'filename':_0x5f4926[_0x1fa2f0(0x1dc)],'mimetype':_0x5f4926[_0x1fa2f0(0x331)],'size':_0x5f4926['size']}));_0x45d98f[_0x1fa2f0(0x1ea)](_0x27cd29=>{const _0x4058ee=_0x1fa2f0;fs[_0x4058ee(0x235)](path[_0x4058ee(0x351)](_0x4058ee(0x26a),_0x27cd29['filename']),path[_0x4058ee(0x351)](_0x4d3690,_0x27cd29[_0x4058ee(0x20b)])),fs[_0x4058ee(0x240)](path[_0x4058ee(0x351)]('tmp',_0x27cd29[_0x4058ee(0x1dc)]));}),_0x3e47f1[_0x1fa2f0(0x2b5)](0xc8)[_0x1fa2f0(0x2df)]({'message':_0x1fa2f0(0x205),'files':_0x45d98f});}),router[a27_0x2ea864(0x22b)](a27_0x2ea864(0x258),async(_0x41ba41,_0x1ba755)=>{const _0xe410c1=a27_0x2ea864,_0x5dc937=path[_0xe410c1(0x351)](path[_0xe410c1(0x2a4)](require[_0xe410c1(0x2d0)][_0xe410c1(0x1dc)]),_0xe410c1(0x227)),{config:_0xc3ecb0}=_0x41ba41[_0xe410c1(0x29c)];if(!_0xc3ecb0)return _0x1ba755[_0xe410c1(0x2b5)](0x190)[_0xe410c1(0x2df)]({'message':_0xe410c1(0x2c0)});try{fs['writeFileSync'](_0x5dc937,JSON[_0xe410c1(0x233)](_0xc3ecb0,null,0x4)),_0x1ba755[_0xe410c1(0x2b5)](0xc8)[_0xe410c1(0x2df)]({'message':'Config\x20updated\x20successfully'});}catch(_0x336ea6){_0x1ba755[_0xe410c1(0x2b5)](0x1f4)[_0xe410c1(0x2df)]({'message':_0xe410c1(0x21e)});}}),router['put'](a27_0x2ea864(0x1cc),async(_0x187997,_0x62fc5d)=>{const _0x2db862=a27_0x2ea864,{key:_0x577b18,value:_0x2692c7}=_0x187997['body'],_0x5aa9cb=path[_0x2db862(0x351)](path['dirname'](require[_0x2db862(0x2d0)][_0x2db862(0x1dc)]),'CADViewer_config.json');fs[_0x2db862(0x2dd)](_0x5aa9cb,_0x2db862(0x234),function(_0x1d3961,_0x4063fb){const _0x19f24d=_0x2db862;_0x1d3961&&_0x62fc5d['status'](0x1f4)[_0x19f24d(0x29d)](_0x1d3961);const _0x34deb3=JSON[_0x19f24d(0x341)](_0x4063fb);_0x34deb3[_0x577b18]=_0x2692c7;if(_0x577b18===_0x19f24d(0x261)){let _0x3a4dda='';if(_0x34deb3[_0x19f24d(0x260)]){_0x3a4dda=os[_0x19f24d(0x1db)]();if(_0x3a4dda==='win32')_0x3a4dda=_0x19f24d(0x30d);else{if(_0x3a4dda===_0x19f24d(0x2ef))_0x3a4dda='linux';}}else _0x3a4dda=_0x34deb3[_0x19f24d(0x1db)];if(_0x3a4dda===_0x19f24d(0x30d)){_0x34deb3[_0x19f24d(0x27e)]=path[_0x19f24d(0x20d)](__dirname,'..')+'/';const _0x4e0ff9=/\\/g;_0x34deb3[_0x19f24d(0x27e)]=_0x34deb3[_0x19f24d(0x27e)][_0x19f24d(0x32d)](_0x4e0ff9,'/');}else _0x34deb3['ServerLocation']=path[_0x19f24d(0x20d)](__dirname,'..')+'/';}if(_0x577b18===_0x19f24d(0x260)){let _0x3c0a9a=os[_0x19f24d(0x1db)]();if(_0x3c0a9a==='win32')_0x3c0a9a='windows';else _0x3c0a9a=_0x19f24d(0x2e8);_0x3c0a9a==='windows'?_0x2692c7===!![]&&(_0x34deb3[_0x19f24d(0x224)]=_0x34deb3[_0x19f24d(0x265)],_0x34deb3[_0x19f24d(0x2d2)]=_0x34deb3[_0x19f24d(0x30b)],_0x34deb3[_0x19f24d(0x1f2)]=_0x34deb3[_0x19f24d(0x2bc)]):_0x2692c7===!![]&&(_0x34deb3['autoxchange_executable']=_0x34deb3[_0x19f24d(0x248)],_0x34deb3[_0x19f24d(0x2d2)]=_0x34deb3['dwgmerge_executable_linux'],_0x34deb3['linklist_executable']=_0x34deb3[_0x19f24d(0x27b)]),_0x34deb3[_0x19f24d(0x1db)]=_0x3c0a9a;}if(_0x34deb3['autodetect_platform']){let _0x3cce67=os[_0x19f24d(0x1db)]();if(_0x3cce67===_0x19f24d(0x1d5))_0x3cce67=_0x19f24d(0x30d);else _0x3cce67='linux';if(_0x3cce67===_0x19f24d(0x30d)){if(_0x577b18===_0x19f24d(0x265))_0x34deb3[_0x19f24d(0x224)]=_0x2692c7;else{if(_0x577b18==='dwgmerge_executable_windows')_0x34deb3[_0x19f24d(0x2d2)]=_0x2692c7;else _0x577b18===_0x19f24d(0x2bc)&&(_0x34deb3['linklist_executable']=_0x2692c7);}}else{if(_0x577b18===_0x19f24d(0x248))_0x34deb3[_0x19f24d(0x224)]=_0x2692c7;else{if(_0x577b18===_0x19f24d(0x2e6))_0x34deb3['dwgmerge_executable']=_0x2692c7;else _0x577b18===_0x19f24d(0x27b)&&(_0x34deb3[_0x19f24d(0x1f2)]=_0x2692c7);}}}fs[_0x19f24d(0x34b)](_0x5aa9cb,JSON[_0x19f24d(0x233)](_0x34deb3,null,0x4),function(_0x4b4307){const _0x462565=_0x19f24d;_0x4b4307&&_0x62fc5d[_0x462565(0x2b5)](0x1f4)['send'](_0x4b4307),_0x62fc5d[_0x462565(0x2b5)](0xc8)[_0x462565(0x2df)]({'message':_0x462565(0x348)});});});}),router[a27_0x2ea864(0x2a6)](a27_0x2ea864(0x209),async(_0x466dcd,_0x11c11d)=>{const _0x39aad9=a27_0x2ea864,_0x1d9c54=getHotConfig(),_0xad3bd5=(_0x1d9c54[_0x39aad9(0x1d7)][_0x39aad9(0x315)](_0x1d9c54['ServerLocation'])?'':_0x1d9c54['ServerLocation'])+_0x1d9c54['dwgmergeLocation'],_0x3f4ecd=(_0x1d9c54[_0x39aad9(0x1d7)][_0x39aad9(0x315)](_0x1d9c54[_0x39aad9(0x27e)])?'':_0x1d9c54[_0x39aad9(0x27e)])+_0x1d9c54[_0x39aad9(0x1e5)],_0x514350=(_0x1d9c54['converterLocation'][_0x39aad9(0x315)](_0x1d9c54[_0x39aad9(0x27e)])?'':_0x1d9c54[_0x39aad9(0x27e)])+_0x1d9c54[_0x39aad9(0x1eb)],_0x5a2324=/ax202.*\.exe/,_0x2129c5=/ax202.*/,_0xf8f7ab=/dwgmerge202.*\.exe/,_0x200859=/dwgmerge_202.*/,_0x106780=/linklist_202.*\.exe/,_0x238382=/linklist_202.*/,_0xd04020=[],_0x2e2712=[],_0x39b42f=[],_0x5b8694=[],_0x13a153=[],_0x45a183=[];let _0x19aa87='';if(_0x1d9c54[_0x39aad9(0x260)]){_0x19aa87=os[_0x39aad9(0x1db)]();if(_0x19aa87==='win32')_0x19aa87=_0x39aad9(0x30d);else{if(_0x19aa87==='darwin')_0x19aa87=_0x39aad9(0x2e8);}}else _0x19aa87=_0x1d9c54[_0x39aad9(0x1db)];fs[_0x39aad9(0x23d)](_0x514350[_0x39aad9(0x321)](_0x39aad9(0x2e8),_0x39aad9(0x30d)))[_0x39aad9(0x1ea)](_0x1bb93b=>{const _0x29d9e4=_0x39aad9;if(_0x5a2324[_0x29d9e4(0x350)](_0x1bb93b[_0x29d9e4(0x1bd)]()))_0xd04020[_0x29d9e4(0x33c)](_0x1bb93b);}),fs[_0x39aad9(0x23d)](_0xad3bd5[_0x39aad9(0x321)](_0x39aad9(0x2e8),_0x39aad9(0x30d)))[_0x39aad9(0x1ea)](_0x5a9aaa=>{const _0x1d59fd=_0x39aad9;if(_0xf8f7ab[_0x1d59fd(0x350)](_0x5a9aaa[_0x1d59fd(0x1bd)]()))_0x2e2712['push'](_0x5a9aaa);}),fs[_0x39aad9(0x23d)](_0x3f4ecd[_0x39aad9(0x321)]('linux','windows'))[_0x39aad9(0x1ea)](_0x4e71c3=>{const _0x1cbc3a=_0x39aad9;if(_0x106780[_0x1cbc3a(0x350)](_0x4e71c3[_0x1cbc3a(0x1bd)]()))_0x39b42f[_0x1cbc3a(0x33c)](_0x4e71c3);}),fs[_0x39aad9(0x23d)](_0x514350[_0x39aad9(0x321)]('windows','linux'))[_0x39aad9(0x1ea)](_0x53a657=>{const _0x4533c2=_0x39aad9;if(_0x2129c5[_0x4533c2(0x350)](_0x53a657['toLocaleLowerCase']()))_0x5b8694[_0x4533c2(0x33c)](_0x53a657);}),fs[_0x39aad9(0x23d)](_0xad3bd5[_0x39aad9(0x321)](_0x39aad9(0x30d),_0x39aad9(0x2e8)))[_0x39aad9(0x1ea)](_0x49c187=>{const _0x1f727b=_0x39aad9;if(_0x200859['test'](_0x49c187[_0x1f727b(0x1bd)]()))_0x13a153['push'](_0x49c187);}),fs[_0x39aad9(0x23d)](_0x3f4ecd[_0x39aad9(0x321)](_0x39aad9(0x30d),_0x39aad9(0x2e8)))[_0x39aad9(0x1ea)](_0xb4879c=>{const _0x44bf8a=_0x39aad9;if(_0x238382[_0x44bf8a(0x350)](_0xb4879c['toLocaleLowerCase']()))_0x45a183[_0x44bf8a(0x33c)](_0xb4879c);});const _0x297ad2=[_0x39aad9(0x282),_0x39aad9(0x249),_0x39aad9(0x316),_0x39aad9(0x322),_0x39aad9(0x2d1)],_0x109b46=[_0x39aad9(0x251),_0x39aad9(0x259),_0x39aad9(0x1eb),_0x39aad9(0x21b),_0x39aad9(0x289),'temp_print_folder',_0x39aad9(0x338),_0x39aad9(0x1d7),'linklistLocation',_0x39aad9(0x29e)],_0x1b2ff2=[_0x39aad9(0x2eb),_0x39aad9(0x26f),_0x39aad9(0x2f1),_0x39aad9(0x288),'mysqlDatabase',_0x39aad9(0x238),_0x39aad9(0x24b)],_0xbd0462={'ServerUrl':_0x39aad9(0x252),'autoxchange_executable':_0x39aad9(0x2d3),'linklist_executable':'LinkList\x20Settings','dwgmerge_executable':_0x39aad9(0x262),'setup_mysqlHost':_0x39aad9(0x23e),'callbackMethod_gatewayUrl_flag':'Callback\x20and\x20Authentication\x20Settings','userFolderMaximumFiles':_0x39aad9(0x2ed),'smtpHost':_0x39aad9(0x26d)},_0x1cbd9a={'https':_0x39aad9(0x1ee),'ServerFrontEndUrlAsAllowedOriginOnly':_0x39aad9(0x1ee),'autodetect_platform':_0x39aad9(0x1ee),'cvjs_svgz_compress':_0x39aad9(0x1ee),'cached_conversion':_0x39aad9(0x1ee),'remainOnServer':'boolean','cvjs_debug':'boolean','autodetect_location':_0x39aad9(0x1ee),'platform':'radio|windows,linux','autoxchange_executable':'radio|'+(_0x19aa87===_0x39aad9(0x30d)?_0xd04020['join'](','):_0x5b8694[_0x39aad9(0x351)](',')),'autoxchange_executable_windows':_0x39aad9(0x22d)+_0xd04020[_0x39aad9(0x351)](','),'autoxchange_executable_linux':_0x39aad9(0x22d)+_0x5b8694[_0x39aad9(0x351)](','),'dwgmerge_executable':_0x39aad9(0x22d)+(_0x19aa87===_0x39aad9(0x30d)?_0x2e2712['join'](','):_0x13a153[_0x39aad9(0x351)](',')),'dwgmerge_executable_windows':_0x39aad9(0x22d)+_0x2e2712[_0x39aad9(0x351)](','),'dwgmerge_executable_linux':_0x39aad9(0x22d)+_0x13a153[_0x39aad9(0x351)](','),'linklist_executable':_0x39aad9(0x22d)+(_0x19aa87===_0x39aad9(0x30d)?_0x39b42f[_0x39aad9(0x351)](','):_0x45a183[_0x39aad9(0x351)](',')),'linklist_executable_windows':_0x39aad9(0x22d)+_0x39b42f[_0x39aad9(0x351)](','),'linklist_executable_linux':'radio|'+_0x45a183[_0x39aad9(0x351)](','),'callbackMethod_gatewayUrl_flag':_0x39aad9(0x1ee),'setup_mysqlHost':_0x39aad9(0x1ee),'ContentSecurityPolicyReportOnly':'boolean','fileLoad_PasswordAuthentication':'boolean','contentLocationCheck':_0x39aad9(0x1ee),'globalBearerAutentication':'boolean','bcryptSaltRounds':_0x39aad9(0x2c1),'userFolderMaximumFiles':_0x39aad9(0x2c1),'userFolderMaximumSizeInMB':_0x39aad9(0x2c1),'recaptchaEnabled':_0x39aad9(0x1ee),'usersExportFrequency':'radio|monthly,biweekly','enableEmailVerification':_0x39aad9(0x1ee),'demoUserRetentionDaysAlertBeforeDeletion':_0x39aad9(0x2c1),'demoUserRetentionDays':_0x39aad9(0x2c1)},_0x11d73a={},_0x48805f=Object[_0x39aad9(0x229)](_0x1d9c54);_0x1d9c54[_0x39aad9(0x260)]&&_0x297ad2[_0x39aad9(0x33c)](_0x39aad9(0x1db)),_0x1d9c54[_0x39aad9(0x261)]&&(_0x109b46[_0x39aad9(0x33c)]('ServerLocation'),_0x109b46[_0x39aad9(0x33c)](_0x39aad9(0x224)),_0x109b46[_0x39aad9(0x33c)](_0x39aad9(0x2d2)),_0x109b46['push'](_0x39aad9(0x1f2))),!_0x1d9c54[_0x39aad9(0x21c)]&&_0x109b46[_0x39aad9(0x33c)]('callbackMethod_gatewayUrl'),!_0x1d9c54[_0x39aad9(0x23a)]&&(_0x109b46[_0x39aad9(0x33c)](_0x39aad9(0x26f)),_0x109b46[_0x39aad9(0x33c)]('mysqlUsername'),_0x109b46[_0x39aad9(0x33c)](_0x39aad9(0x288)),_0x109b46[_0x39aad9(0x33c)](_0x39aad9(0x203))),!_0x1d9c54[_0x39aad9(0x219)]&&_0x109b46[_0x39aad9(0x33c)](_0x39aad9(0x2fa)),!_0x1d9c54['fileLoad_PasswordAuthentication']&&(_0x109b46['push']('fileLoad_UserName'),_0x109b46[_0x39aad9(0x33c)](_0x39aad9(0x32e))),!_0x1d9c54['globalBearerAutentication']&&_0x109b46[_0x39aad9(0x33c)](_0x39aad9(0x317)),_0x48805f[_0x39aad9(0x1ea)](_0x10f9aa=>{const _0x40236f=_0x39aad9;!_0x297ad2[_0x40236f(0x315)](_0x10f9aa)&&(_0x11d73a[_0x10f9aa]=_0x1d9c54[_0x10f9aa]);}),_0x11d73a[_0x39aad9(0x259)]=''+_0x1d9c54[_0x39aad9(0x2eb)]+_0x1d9c54[_0x39aad9(0x251)],_0x11c11d[_0x39aad9(0x2b5)](0xc8)[_0x39aad9(0x2df)]({'notEditableFields':_0x109b46,'customFieldTypes':_0x1cbd9a,'notHotEditableFields':_0x1b2ff2,'config':_0x11d73a,'fieldsTitle':_0xbd0462,'configData':_0x1d9c54});}),router['get'](a27_0x2ea864(0x29f),protectedRoute,async(_0xe28229,_0x591f15)=>{const _0x1e01a5=a27_0x2ea864,_0x40d210=fs['readFileSync'](path[_0x1e01a5(0x351)](path[_0x1e01a5(0x2a4)](require[_0x1e01a5(0x2d0)][_0x1e01a5(0x1dc)]),_0x1e01a5(0x263)),_0x1e01a5(0x234)),_0x23a557=_0x40d210[_0x1e01a5(0x321)](_0x1e01a5(0x254),_0xe28229[_0x1e01a5(0x29e)]);_0x591f15[_0x1e01a5(0x29d)](_0x23a557);});function a27_0x4f3e(){const _0x372a80=['startsWith','usage','totalGb','sendFile','autoxchange_executable_linux','https','folderLocation','cvjs_svgz_compress','mode','access','used',')\x20older\x20than\x20','cadviewer/settings/users-export.html','fileLocation','Server\x20Settings','cadviewer/settings/home.html','{version}','Read\x20and\x20write\x20permission\x20for\x20folder\x20','padStart','../libs/email-utils','/config/global-update','fileLocationUrl','Invalid\x20user','promise','find','.json','multer','../libs/config','autodetect_platform','autodetect_location','DwgMerge\x20Settings','cadviewer/settings/logs.html','demo_user','autoxchange_executable_windows','/folders','model','/cache/files/:id','/users/list','tmp','/cache/csv/:file','.dwg.json','Mail\x20Server\x20Settings','Cache\x20flushed\x20successfully','mysqlHost','No\x20new\x20users\x20to\x20export\x20for\x20Google\x20Ads','availableFormats','Le\x20dossier\x20','Failed\x20to\x20retrieve\x20export\x20history','.gitkeep','renameSync','cadviewer/settings/licences.html','.log\x22','standard','JSON\x20Data\x20Extraction','name','linklist_executable_linux','download','green','ServerLocation','getDate','/restapi-test','Error\x20getting\x20total\x20users','ServerPort','logs','Error\x20triggering\x20Users\x20export:','Error\x20getting\x20cpu\x20usage','cadviewer/settings/rest-api-parameters.json','write','mysqlPassword','xpathLocation','blue','*\x20*\x20*\x20*\x20*','hlall','totalGB','User\x20updated\x20successfully','gray','Cache\x20conversion','SELECT\x20*\x20FROM\x20users','cpu','call-Api_Conversion_','/doctor','conversionMemoryUsage','`is_enabled`\x20=\x20?,\x20`role`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','some','settings','vmstats','.log','Error\x20exporting\x20users\x20for\x20Google\x20Ads:','body','send','version','/logs','usedMemPercentage','Monitoring\x20file\x20cleaned.','/doctor/check','.pdf','dirname','Folder\x20deleted.','post','isFile','File\x20deleted.','reduce','mkdirSync','toUpperCase','filter','usedMemMb','endsWith','ceil','setHeader','monthly','mem','Error!\x20Something\x20went\x20wrong.','/metrics/reset','status','cadviewer','get','/tailwind.js','dir','User\x20deleted\x20successfully','zombieProcesses','linklist_executable_windows','/conversion/list','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20email,\x20first_name,\x20last_name,\x20created_at\x20\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20>\x20?\x20\x0a\x20\x20\x20\x20\x20\x20ORDER\x20BY\x20created_at\x20DESC\x0a\x20\x20\x20\x20','maxUploadFileSize','No\x20config\x20object\x20provided','number','biweekly','2005528TXznjk','16nBxLoG','Old\x20demo_user\x20accounts\x20(','/cache/stats','image/svg+xml','\x20days','conversionTimeSpend','pop','\x20does\x20not\x20exist.','email','catch','bcrypt','toString','main','fontLocation','dwgmerge_executable','AutoXchange\x20Settings','.svg','role','/users/flush-dir','exports','attachment;\x20filename=\x22','This\x20action\x20is\x20only\x20available\x20for\x20demo\x20users','unlink','../libs/log','pdf','readFile','0\x201\x20*\x20*\x20*','json','purple','\x20GB','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','`crypted_password`\x20=\x20?,\x20','rmSync','Error\x20deleting\x20old\x20demo_user\x20accounts:','dwgmerge_executable_linux','/cache','linux','length','info','ServerUrl','/converters/files/pdf/','Demo\x20and\x20Base\x20User\x20Settings','Folder\x20already\x20exists.','darwin','ctime','mysqlUsername','/converters/files/print/','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','0\x200\x20*\x20*\x20*','email,firstname,lastname\x0a','first_name','===================error===================','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','UPDATE\x20`users`\x20SET\x20`created_at`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','ContentSecurityPolicy','/style.css','Exported\x20','Error\x20getting\x20Users\x20export\x20export\x20history:','getMonth','updatedAt','query','cadviewer/settings/converter-files-analysis.json','settingsUserBasicAuth','Export\x20file\x20not\x20found','.dwg','Exporting\x20new\x20users\x20for\x20Google\x20Ads...','Counter\x20reset\x20successfully','Error\x20cleaning\x20cache\x20for\x20user\x20files:','params','CSV','/conversion/clean','dwgmerge_executable_windows','sub_dirs','windows','Content-Disposition','1554021qWUMwZ','Cache\x20directory\x20','error','====================','rmdir','cadviewer/settings/vanilla-toast.css','includes','converterpathWin','globalBearerAutenticationToken','An\x20error\x20occurred\x20while\x20checking.','uptime','files','=============================>','delete','birthtime','existsSync','red','20380evWsNe','replaceAll','converterpathLin','slice','/vanilla-toast.js','.csv','scheduleJob','arch','.rl.json','Error\x20reading\x20last\x20export\x20info:','mkdir','dwg','File\x20renamed.','replace','fileLoad_Password','yellow','formatedSize','mimetype','getFullYear','converters','DWG','osCmd','usedPercentage','log','callbackMethod','usedGB','isDirectory','Content-Type','push','/folders/create','svgz','diskStorage','whoami','parse','Permission\x20750\x20for\x20the\x20\x22','type','usedGb','array','who','message','Config\x20updated.','cadviewer/settings/config.html','File\x20not\x20found','writeFile','path','./uploads/','/users/extend-demo','svg','test','join','settingsPasswordBasicAuth','517294lNBtMe','execute','trim','Cache\x20cleaned\x20for\x20files\x20in\x20','callbackMethod_gatewayUrl','readFileSync','maxUploadFiles','isFolder','clean','toLocaleLowerCase','\x22exec\x22\x20command\x20activated\x20on\x20NodeJS','\x20KB','then','Error\x20saving\x20parameters.','file','Error\x20getting\x20upload\x20configuration:','statSync','/users-export/download/:fileName','../libs/counter.js','Error\x20retrieving\x20upload\x20configuration','DELETE\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','avatar','size','split','/config/update','DWG\x20file\x20in\x20multiple\x20files','csv','setDate','X_OK','cadviewer/settings/icons.js','109246PpWUSx','blocks','converter-files-analysis.json','win32','Folder\x20renamed.','dwgmergeLocation','Error\x20getting\x20disk\x20usage','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20(`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?)\x20AND\x20`id`\x20!=\x20?','/folders/delete','platform','filename','Error\x20deleting\x20file.','drive','R_OK','totalProcesses','Error\x20getting\x20process\x20info','/logs/clean','Error\x20deleting\x20folder.','INSERT\x20INTO\x20`users`\x20(`avatar_url`,\x20`first_name`,\x20`last_name`,\x20`username`,\x20`email`,\x20`crypted_password`,\x20`role`,\x20`is_enabled`,\x20`folder_name`)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','linklistLocation','folder_name','avatar_url','Error\x20deleting\x20file','toFixed','forEach','converterLocation','RL/TL\x20Processing','users-export-','boolean','/metrics','W_OK','setMonth','linklist_executable','last-users-export.json','/content/redlines/','Users\x20export\x20triggered\x20successfully','./tmp','percentage','.png','Error\x20deleting\x20user\x20folder:','count','/cache/flush','/users','/chart.min.js','now','last_name','/logs/content','atime','User\x20with\x20that\x20email\x20or\x20username\x20already\x20exists','mysqlDatabase','\x20MB','Files\x20uploaded\x20successfully','Folder\x20created.','demoUserRetentionDays','Router','/config/content','gunzipSync','originalname','splity','resolve','constants','0\x2023\x20*\x20*\x20*','1670KeQcOg','PDF','user','admin','/licences','map','SVG','cadviewer/settings/chart.min.js','.svgz','ContentSecurityPolicyReportOnly','Log\x20file\x20cleaned.','licenseLocation','callbackMethod_gatewayUrl_flag','extname','Error\x20updating\x20config','../CADViewer_config.json','Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_','userId','cadviewer/settings/requests-callapiconversion-monitoring.json','\x22\x20executable','autoxchange_executable','Folder\x20not\x20found.','folderName','CADViewer_config.json','/converters/autoxchange/linux/','keys','fileName','put','Parameters\x20saved.','radio|','/cache-stats.js','writeFileSync','proc','DWG\x20to\x20PDF\x20Conversion','cadviewer/settings/vanilla-toast.js','stringify','utf8','copyFileSync','/content/redlines/v7/','720441FcPPxI','cached_conversion','Error\x20getting\x20cache\x20stats:','setup_mysqlHost','8592TMJSlG','/icons.js','readdirSync','Database\x20Settings','Error\x20reading\x20monitoring\x20file','unlinkSync','/folders/update','crypto','/converters/files/'];a27_0x4f3e=function(){return _0x372a80;};return a27_0x4f3e();}function a27_0x1bd7(_0x283d70,_0x4904ac){const _0x4f3e37=a27_0x4f3e();return a27_0x1bd7=function(_0x1bd7ce,_0xa8ea32){_0x1bd7ce=_0x1bd7ce-0x1b5;let _0xa35d98=_0x4f3e37[_0x1bd7ce];return _0xa35d98;},a27_0x1bd7(_0x283d70,_0x4904ac);}function findMatchingLogFiles(_0x1182b1,_0x1d3360=/^call-Api_Conversion_\d{1,2}_\d{1,2}_\d{4}\.log$/){const _0x2af4c1=a27_0x2ea864;try{const _0x47f970=fs[_0x2af4c1(0x23d)](_0x1182b1);return _0x47f970['filter'](_0x5f3c85=>_0x1d3360[_0x2af4c1(0x350)](_0x5f3c85))[_0x2af4c1(0x215)](_0x8b7c91=>_0x8b7c91[_0x2af4c1(0x321)](_0x2af4c1(0x293),'')[_0x2af4c1(0x321)](_0x2af4c1(0x29a),''));}catch(_0x5a480e){return console[_0x2af4c1(0x311)]('Error\x20finding\x20log\x20files:',_0x5a480e),[];}}router['post'](a27_0x2ea864(0x200),async(_0x14c49d,_0x2f3add)=>{const _0x52a667=a27_0x2ea864,_0x3f6a44=new Date(),_0x109882=_0x3f6a44[_0x52a667(0x27f)]()[_0x52a667(0x2cf)]()['padStart'](0x2,'0')+'_'+(_0x3f6a44[_0x52a667(0x2fe)]()+0x1)[_0x52a667(0x2cf)]()[_0x52a667(0x256)](0x2,'0')+'_'+_0x3f6a44[_0x52a667(0x332)](),{displayDay:_0x450d6c}=_0x14c49d[_0x52a667(0x29c)],_0x5ce639=path['join'](path[_0x52a667(0x2a4)](require[_0x52a667(0x2d0)][_0x52a667(0x1dc)]),_0x52a667(0x283),_0x52a667(0x293)+(_0x450d6c??_0x109882)+_0x52a667(0x29a));fs['existsSync'](_0x5ce639)?fs[_0x52a667(0x2dd)](_0x5ce639,'utf8',function(_0x52a0e5,_0x3fdee9){const _0x297bcf=_0x52a667;_0x52a0e5&&_0x2f3add['status'](0x1f4)['send'](_0x52a0e5),_0x2f3add[_0x297bcf(0x2b5)](0xc8)['json']({'content':_0x3fdee9,'days':findMatchingLogFiles(path[_0x297bcf(0x351)](path[_0x297bcf(0x2a4)](require[_0x297bcf(0x2d0)][_0x297bcf(0x1dc)]),_0x297bcf(0x283)))});}):_0x2f3add[_0x52a667(0x2b5)](0xc8)['json']({'content':'','days':findMatchingLogFiles(path[_0x52a667(0x351)](path[_0x52a667(0x2a4)](require[_0x52a667(0x2d0)][_0x52a667(0x1dc)]),_0x52a667(0x283)))});}),router['delete'](a27_0x2ea864(0x1e2),async(_0x4376db,_0x201fdc)=>{const _0x371cff=a27_0x2ea864,_0x2ba155=new Date(),_0x516feb=_0x2ba155['getDate']()[_0x371cff(0x2cf)]()[_0x371cff(0x256)](0x2,'0')+'_'+(_0x2ba155['getMonth']()+0x1)['toString']()[_0x371cff(0x256)](0x2,'0')+'_'+_0x2ba155['getFullYear'](),_0x5778d8=findMatchingLogFiles(path['join'](path['dirname'](require[_0x371cff(0x2d0)][_0x371cff(0x1dc)]),_0x371cff(0x283)));_0x5778d8[_0x371cff(0x1ea)](_0x380c40=>{const _0x279260=_0x371cff;if(_0x380c40!==_0x516feb)fs[_0x279260(0x240)](path[_0x279260(0x351)](path['dirname'](require['main'][_0x279260(0x1dc)]),_0x279260(0x283),_0x279260(0x293)+_0x380c40+_0x279260(0x29a)));}),logStream[_0x371cff(0x1bc)](),_0x201fdc[_0x371cff(0x2b5)](0xc8)['json']({'message':_0x371cff(0x21a)});}),router[a27_0x2ea864(0x2b7)](a27_0x2ea864(0x280),protectedRoute,async(_0x59b500,_0x5e1b3f)=>{const _0x211fcd=a27_0x2ea864,_0x46c2ac=path[_0x211fcd(0x351)](path[_0x211fcd(0x2a4)](require[_0x211fcd(0x2d0)]['filename']),_0x211fcd(0x286));if(!fs[_0x211fcd(0x31e)](_0x46c2ac)){const _0x4a4670={'jsonDataExtraction':{'standard':[{'paramName':_0x211fcd(0x2df),'paramValue':''},{'paramName':_0x211fcd(0x1d3),'paramValue':''}]},'dwgToSvg':{'standard':[{'paramName':'f','paramValue':_0x211fcd(0x34f)},{'paramName':'model','paramValue':''},{'paramName':_0x211fcd(0x28c),'paramValue':''}]},'dwgToPdf':{'standard':[{'paramName':'f','paramValue':_0x211fcd(0x2dc)},{'paramName':_0x211fcd(0x267),'paramValue':''}]},'displayDwg':{'standard':[{'paramName':'f','paramValue':_0x211fcd(0x34f)},{'paramName':_0x211fcd(0x267),'paramValue':''},{'paramName':'hlall','paramValue':''}]},'dwgToMultiple':{'standard':[{'paramName':_0x211fcd(0x20c),'paramValue':''}]}};fs[_0x211fcd(0x22f)](_0x46c2ac,JSON[_0x211fcd(0x233)](_0x4a4670,null,0x4));}const _0xcd78e9=fs[_0x211fcd(0x1b9)](path[_0x211fcd(0x351)](path['dirname'](require[_0x211fcd(0x2d0)][_0x211fcd(0x1dc)]),'cadviewer/settings/rest-api.html'),'utf8'),_0x53cdc7=_0xcd78e9[_0x211fcd(0x321)](_0x211fcd(0x254),_0x59b500[_0x211fcd(0x29e)]);_0x5e1b3f[_0x211fcd(0x29d)](_0x53cdc7);}),router[a27_0x2ea864(0x2a6)]('/restapi-test/parameters/search',async(_0x3eb253,_0x54d2a2)=>{const _0x5d4280=a27_0x2ea864,{actionName:_0x2d91a5,contentLocation:_0x25a212}=_0x3eb253[_0x5d4280(0x29c)],_0x281d65=path[_0x5d4280(0x351)](path[_0x5d4280(0x2a4)](require[_0x5d4280(0x2d0)]['filename']),'cadviewer/settings/rest-api-parameters.json');fs[_0x5d4280(0x2dd)](_0x281d65,'utf8',function(_0x4e09a0,_0x1beeb7){const _0x76b36=_0x5d4280;if(_0x4e09a0)_0x54d2a2[_0x76b36(0x2b5)](0xc8)['json']({'parameters':[]});else{const _0x485d9f=JSON[_0x76b36(0x341)](_0x1beeb7);if(_0x485d9f[_0x2d91a5]&&_0x485d9f[_0x2d91a5][_0x25a212])_0x54d2a2[_0x76b36(0x2b5)](0xc8)[_0x76b36(0x2df)]({'parameters':_0x485d9f[_0x2d91a5][_0x25a212]});else _0x485d9f[_0x2d91a5]&&_0x485d9f[_0x2d91a5][_0x76b36(0x278)]?_0x54d2a2[_0x76b36(0x2b5)](0xc8)[_0x76b36(0x2df)]({'parameters':_0x485d9f[_0x2d91a5]['standard']}):_0x54d2a2['status'](0xc8)[_0x76b36(0x2df)]({'parameters':[]});}});}),router[a27_0x2ea864(0x2a6)]('/restapi-test/parameters/save',async(_0x5e243d,_0x32b6f3)=>{const _0x32e298=a27_0x2ea864,{actionName:_0x3f371f,contentLocation:_0x4d4bba,parameters:_0x3d4c33}=_0x5e243d[_0x32e298(0x29c)],_0x320aef=path[_0x32e298(0x351)](path['dirname'](require[_0x32e298(0x2d0)][_0x32e298(0x1dc)]),'cadviewer/settings/rest-api-parameters.json');fs['readFile'](_0x320aef,_0x32e298(0x234),function(_0x185534,_0xca05cc){const _0x488567=_0x32e298;if(_0x185534)_0x32b6f3['status'](0x199)[_0x488567(0x2df)]({'message':'Error\x20saving\x20parameters.'});else{const _0x58f675=JSON[_0x488567(0x341)](_0xca05cc);!_0x58f675[_0x3f371f]&&(_0x58f675[_0x3f371f]={}),_0x58f675[_0x3f371f][_0x4d4bba]=_0x3d4c33,fs[_0x488567(0x34b)](_0x320aef,JSON['stringify'](_0x58f675,null,0x4),function(_0x5a1bbd){const _0x30e4ec=_0x488567;_0x5a1bbd&&_0x32b6f3['status'](0x199)['json']({'message':_0x30e4ec(0x1c1)}),_0x32b6f3[_0x30e4ec(0x2b5)](0xc8)[_0x30e4ec(0x2df)]({'message':_0x30e4ec(0x22c)});});}});}),router['get'](a27_0x2ea864(0x294),protectedRoute,async(_0x3373ab,_0x2ddd59)=>{const _0x648e64=a27_0x2ea864,_0x5f21f8=fs[_0x648e64(0x1b9)](path['join'](path[_0x648e64(0x2a4)](require[_0x648e64(0x2d0)][_0x648e64(0x1dc)]),'cadviewer/settings/doctor.html'),'utf8'),_0x2f0bd5=_0x5f21f8[_0x648e64(0x321)]('{version}',_0x3373ab['version']);_0x2ddd59[_0x648e64(0x29d)](_0x2f0bd5);}),router[a27_0x2ea864(0x2a6)](a27_0x2ea864(0x2a2),async(_0x352355,_0x1fe67a)=>{const _0x426556=a27_0x2ea864,_0x28593b=getHotConfig(),_0x183c42=_0x28593b[_0x426556(0x1eb)][_0x426556(0x321)]('//','/'),_0x2b9dae=_0x28593b[_0x426556(0x1d7)][_0x426556(0x321)]('//','/'),_0x23b132=_0x28593b['linklistLocation'][_0x426556(0x321)]('//','/'),_0x3d67a3=''+_0x183c42+_0x28593b[_0x426556(0x224)],_0xedd97a=''+_0x2b9dae+_0x28593b['dwgmerge_executable'],_0x2abd10=''+_0x23b132+_0x28593b[_0x426556(0x1f2)],_0x188bc7=[],_0xa4641e=new Promise(_0x4c721a=>{const _0x445880=_0x426556;exec(os[_0x445880(0x1db)]()===_0x445880(0x1d5)?_0x445880(0x2b9):'ls',_0x5d6181=>{const _0x2f536b=_0x445880;_0x5d6181?_0x188bc7[_0x2f536b(0x33c)]({'title':_0x2f536b(0x1be),'status':![],'priority':0x1}):_0x188bc7['push']({'title':_0x2f536b(0x1be),'status':!![],'priority':0x1}),_0x4c721a();});}),_0x25716a=new Promise(_0x5f58c4=>{const _0xad8fd=_0x426556;fs['access'](_0x3d67a3,fs['constants'][_0xad8fd(0x1d0)],_0x151eb0=>{const _0x4f15ac=_0xad8fd;_0x151eb0?_0x188bc7[_0x4f15ac(0x33c)]({'title':_0x4f15ac(0x342)+_0x28593b['autoxchange_executable']+_0x4f15ac(0x223),'status':![],'priority':0x2}):_0x188bc7[_0x4f15ac(0x33c)]({'title':'Permission\x20750\x20for\x20the\x20\x22'+_0x28593b[_0x4f15ac(0x224)]+_0x4f15ac(0x223),'status':!![],'priority':0x2}),_0x5f58c4();});}),_0x46fd38=new Promise(_0x32ac0d=>{const _0xd028c9=_0x426556;fs[_0xd028c9(0x24d)](_0xedd97a,fs[_0xd028c9(0x20e)]['X_OK'],_0x5389f2=>{const _0x370221=_0xd028c9;_0x5389f2?_0x188bc7[_0x370221(0x33c)]({'title':'Permission\x20750\x20for\x20the\x20\x22'+_0x28593b['dwgmerge_executable']+'\x22\x20executable','status':![],'priority':0x3}):_0x188bc7[_0x370221(0x33c)]({'title':_0x370221(0x342)+_0x28593b[_0x370221(0x2d2)]+_0x370221(0x223),'status':!![],'priority':0x3}),_0x32ac0d();});}),_0x1d8338=new Promise(_0x169bda=>{const _0x2cd5f4=_0x426556;fs['access'](_0x2abd10,fs[_0x2cd5f4(0x20e)][_0x2cd5f4(0x1d0)],_0x560a7c=>{const _0x37e41e=_0x2cd5f4;_0x560a7c?_0x188bc7[_0x37e41e(0x33c)]({'title':_0x37e41e(0x342)+_0x28593b[_0x37e41e(0x1f2)]+'\x22\x20executable','status':![],'priority':0x4}):_0x188bc7[_0x37e41e(0x33c)]({'title':'Permission\x20750\x20for\x20the\x20\x22'+_0x28593b[_0x37e41e(0x1f2)]+_0x37e41e(0x223),'status':!![],'priority':0x4}),_0x169bda();});}),_0x149ba3=new Promise(_0x554385=>{const _0x196caf=_0x426556,_0x4df8f6=new Date(),_0x1db870=_0x4df8f6[_0x196caf(0x27f)]()[_0x196caf(0x2cf)]()[_0x196caf(0x256)](0x2,'0')+'_'+(_0x4df8f6[_0x196caf(0x2fe)]()+0x1)['toString']()[_0x196caf(0x256)](0x2,'0')+'_'+_0x4df8f6[_0x196caf(0x332)](),{displayDay:_0x2d1136}=_0x352355['body'];fs[_0x196caf(0x24d)](path[_0x196caf(0x351)](path[_0x196caf(0x2a4)](require['main'][_0x196caf(0x1dc)]),_0x196caf(0x283),_0x196caf(0x293)+(_0x2d1136??_0x1db870)+'.log'),fs[_0x196caf(0x20e)][_0x196caf(0x1f0)],_0x9005e8=>{const _0x254ab8=_0x196caf;_0x9005e8?_0x188bc7['push']({'title':_0x254ab8(0x220)+(_0x2d1136??_0x1db870)+_0x254ab8(0x277),'status':![],'priority':0x5}):_0x188bc7['push']({'title':_0x254ab8(0x220)+(_0x2d1136??_0x1db870)+_0x254ab8(0x277),'status':!![],'priority':0x5}),_0x554385();});}),_0x3e61fb=(_0x448f8f,_0x1a8dbf)=>{const _0x4c0969=_0x426556,_0x4cff72=path[_0x4c0969(0x351)](path[_0x4c0969(0x2a4)](require[_0x4c0969(0x2d0)][_0x4c0969(0x1dc)]),_0x448f8f);return new Promise(_0x404d1a=>{const _0x3b13a5=_0x4c0969;fs[_0x3b13a5(0x24d)](path[_0x3b13a5(0x351)](path[_0x3b13a5(0x2a4)](_0x4cff72)),fs[_0x3b13a5(0x20e)][_0x3b13a5(0x1df)]|fs[_0x3b13a5(0x20e)][_0x3b13a5(0x1f0)],_0x133de6=>{const _0x1aaabd=_0x3b13a5;_0x133de6?_0x188bc7[_0x1aaabd(0x33c)]({'title':'Read\x20and\x20write\x20permission\x20for\x20folder\x20'+_0x448f8f,'status':![],'priority':_0x1a8dbf+0x6}):_0x188bc7[_0x1aaabd(0x33c)]({'title':_0x1aaabd(0x255)+_0x448f8f,'status':!![],'priority':_0x1a8dbf+0x6}),_0x404d1a();});});},_0x3306be=[_0x426556(0x243),_0x426556(0x228),'/converters/files/merged/',_0x426556(0x2f2),_0x426556(0x2ec),_0x426556(0x1f4),_0x426556(0x236)],_0x3d8379=_0x3306be[_0x426556(0x215)](_0x3e61fb);Promise['all']([_0xa4641e,_0x25716a,_0x46fd38,_0x1d8338,_0x149ba3,..._0x3d8379])[_0x426556(0x1c0)](()=>{const _0x488586=_0x426556;_0x1fe67a[_0x488586(0x2b5)](0xc8)['json']({'checking_list':_0x188bc7});})[_0x426556(0x2cd)](()=>{const _0x56f1b6=_0x426556;_0x1fe67a['status'](0x1f4)[_0x56f1b6(0x2df)]({'error':_0x56f1b6(0x318)});});}),router[a27_0x2ea864(0x2b7)](a27_0x2ea864(0x1fc),protectedRoute,async(_0x533fef,_0x4f9982)=>{const _0x59634d=a27_0x2ea864,_0x424efb=fs['readFileSync'](path[_0x59634d(0x351)](path[_0x59634d(0x2a4)](require[_0x59634d(0x2d0)][_0x59634d(0x1dc)]),'cadviewer/settings/users.html'),_0x59634d(0x234)),_0x170fbf=_0x424efb['replaceAll'](_0x59634d(0x254),_0x533fef[_0x59634d(0x29e)]);_0x4f9982['send'](_0x170fbf);}),router['post'](a27_0x2ea864(0x269),async(_0x1aaf06,_0x3160d2)=>{const _0x59ea95=a27_0x2ea864;let _0x15c86b;try{const [_0x12b4c0]=await conn[_0x59ea95(0x25b)]()[_0x59ea95(0x1b5)](_0x59ea95(0x291),[]);_0x15c86b=_0x12b4c0;}catch(_0x3c706b){console['log'](_0x3c706b),_0x3160d2[_0x59ea95(0x2b5)](0x1f4)[_0x59ea95(0x2df)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}_0x3160d2['status'](0xc8)[_0x59ea95(0x2df)]({'success':!![],'data':_0x15c86b});}),router['post'](a27_0x2ea864(0x1fc),upload['single'](a27_0x2ea864(0x1c9)),async(_0x385368,_0x9daf)=>{const _0x22bc0a=a27_0x2ea864,{id:_0x4ad9c8,first_name:_0xc477c2,last_name:_0x511e03,username:_0x47fbba,email:_0x7b52d2,password:_0x59c4c3,is_enabled:_0x2ca972}=_0x385368['body'],_0x393cb9=_0x385368['body'][_0x22bc0a(0x2d5)]===_0x22bc0a(0x213)?_0x22bc0a(0x213):_0x385368[_0x22bc0a(0x29c)][_0x22bc0a(0x2d5)]===_0x22bc0a(0x264)?_0x22bc0a(0x264):_0x22bc0a(0x212);let _0x44da17;console['log'](_0x22bc0a(0x31b));_0x59c4c3&&(_0x44da17=await bcrypt['hash'](_0x59c4c3,0xa));let _0x17114e=null;if(_0x385368[_0x22bc0a(0x1c2)]){const _0x126570='avatars/'+randomUUID()+_0x22bc0a(0x1f8);fs[_0x22bc0a(0x235)](_0x385368[_0x22bc0a(0x1c2)][_0x22bc0a(0x34c)],'./'+_0x126570),fs[_0x22bc0a(0x240)](_0x385368[_0x22bc0a(0x1c2)][_0x22bc0a(0x34c)]),config['callbackMethod_gatewayUrl_flag']?_0x17114e=config[_0x22bc0a(0x1b8)]+'/'+_0x126570:_0x17114e=config[_0x22bc0a(0x2eb)]+'/'+_0x126570;}if(_0x4ad9c8){try{let [_0x491a50]=await conn[_0x22bc0a(0x25b)]()['execute'](_0x22bc0a(0x1d9),[_0x7b52d2,_0x47fbba,_0x4ad9c8]);if(_0x491a50['length']>0x0)_0x9daf['status'](0x199)[_0x22bc0a(0x2df)]({'error':_0x22bc0a(0x202)});else{!_0x385368[_0x22bc0a(0x1c2)]&&([_0x491a50]=await conn[_0x22bc0a(0x25b)]()[_0x22bc0a(0x1b5)](_0x22bc0a(0x2f3),[_0x4ad9c8]),_0x17114e=_0x491a50[0x0][_0x22bc0a(0x1e7)]);const _0x68cdd0='UPDATE\x20`users`\x20SET\x20`avatar_url`\x20=\x20?,\x20`first_name`\x20=\x20?,\x20`last_name`\x20=\x20?,\x20`username`\x20=\x20?,\x20`email`\x20=\x20?,'+(_0x59c4c3?_0x22bc0a(0x2e3):'')+_0x22bc0a(0x296);await conn[_0x22bc0a(0x25b)]()[_0x22bc0a(0x1b5)](_0x68cdd0,_0x59c4c3?[_0x17114e,_0xc477c2,_0x511e03,_0x47fbba,_0x7b52d2,_0x44da17,_0x2ca972,_0x393cb9,_0x4ad9c8]:[_0x17114e,_0xc477c2,_0x511e03,_0x47fbba,_0x7b52d2,_0x2ca972,_0x393cb9,_0x4ad9c8]);}}catch(_0x3f7509){console['log'](_0x3f7509),_0x9daf[_0x22bc0a(0x2b5)](0x1f4)['json']({'error':'Error!\x20Something\x20went\x20wrong.'});return;}_0x9daf[_0x22bc0a(0x2b5)](0xc8)[_0x22bc0a(0x2df)]({'success':!![],'message':_0x22bc0a(0x28e)});}else{try{const [_0x1a6a6d]=await conn[_0x22bc0a(0x25b)]()[_0x22bc0a(0x1b5)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?',[_0x7b52d2,_0x47fbba]);if(_0x1a6a6d['length']>0x0)_0x9daf[_0x22bc0a(0x2b5)](0x199)[_0x22bc0a(0x2df)]({'error':'User\x20with\x20that\x20email\x20or\x20username\x20already\x20exists'});else{const _0xd90b5b=randomUUID();await conn[_0x22bc0a(0x25b)]()[_0x22bc0a(0x1b5)](_0x22bc0a(0x1e4),[_0x17114e,_0xc477c2,_0x511e03,_0x47fbba,_0x7b52d2,_0x44da17,_0x393cb9,_0x2ca972,_0xd90b5b]);const _0x250e3e=_0x22bc0a(0x34d)+_0xd90b5b;fs[_0x22bc0a(0x2aa)](_0x250e3e);}}catch(_0x5c0cea){console[_0x22bc0a(0x337)](_0x5c0cea),_0x9daf[_0x22bc0a(0x2b5)](0x1f4)[_0x22bc0a(0x2df)]({'error':_0x22bc0a(0x2b3)});return;}_0x9daf['status'](0xc8)['json']({'success':!![],'message':'User\x20created\x20successfully'});}}),router[a27_0x2ea864(0x31c)](a27_0x2ea864(0x2d6),async(_0x409bc1,_0x353766)=>{const _0x1e1b60=a27_0x2ea864,{userId:_0x489e6f}=_0x409bc1[_0x1e1b60(0x29c)];let _0x567290;try{const [_0x8b341a]=await conn['promise']()['execute'](_0x1e1b60(0x2f3),[_0x489e6f]);_0x8b341a[_0x1e1b60(0x2e9)]>0x0&&(_0x567290=_0x8b341a[0x0]);}catch(_0xaa052f){console[_0x1e1b60(0x337)]({'err':_0xaa052f}),_0x353766['status'](0x1f4)['json']({'error':_0x1e1b60(0x2b3)});return;}if(!_0x567290){_0x353766['status'](0x191)[_0x1e1b60(0x2df)]({'error':_0x1e1b60(0x25a)});return;}let _0x4a0b1b=_0x567290[_0x1e1b60(0x1e6)];if(!_0x4a0b1b){_0x4a0b1b=randomUUID();try{await conn[_0x1e1b60(0x25b)]()[_0x1e1b60(0x1b5)](_0x1e1b60(0x2e2),[_0x4a0b1b,_0x489e6f]);}catch(_0x2e5581){console['log']({'err':_0x2e5581}),_0x353766[_0x1e1b60(0x2b5)](0x1f4)[_0x1e1b60(0x2df)]({'error':_0x1e1b60(0x2b3)});return;}}const _0x5b34da=_0x1e1b60(0x34d)+_0x4a0b1b;console['log'](_0x1e1b60(0x312)),console[_0x1e1b60(0x337)](_0x5b34da),!fs['existsSync'](_0x5b34da)&&fs[_0x1e1b60(0x2aa)](_0x5b34da),cleanCacheForUserFiles(_0x5b34da),fs[_0x1e1b60(0x2e4)](_0x5b34da,{'recursive':!![],'force':!![]}),fs[_0x1e1b60(0x2aa)](_0x5b34da),_0x353766[_0x1e1b60(0x2b5)](0xc8)['json']({'success':!![],'message':'User\x20directory\x20flushed\x20successfully'});}),router[a27_0x2ea864(0x31c)]('/users/:userId',async(_0x14251c,_0xcbc06a)=>{const _0x4cada9=a27_0x2ea864,_0x5a2369=_0x14251c[_0x4cada9(0x308)][_0x4cada9(0x221)];try{let _0x35a317;try{const [_0x4edf70]=await conn[_0x4cada9(0x25b)]()[_0x4cada9(0x1b5)](_0x4cada9(0x2f3),[_0x5a2369]);_0x4edf70[_0x4cada9(0x2e9)]>0x0&&(_0x35a317=_0x4edf70[0x0]);}catch(_0x214be0){console[_0x4cada9(0x337)]({'err':_0x214be0}),_0xcbc06a[_0x4cada9(0x2b5)](0x1f4)['json']({'error':'Error!\x20Something\x20went\x20wrong.'});return;}if(!_0x35a317){_0xcbc06a[_0x4cada9(0x2b5)](0x191)[_0x4cada9(0x2df)]({'error':_0x4cada9(0x25a)});return;}let _0x1e42ff=_0x35a317['folder_name'];if(_0x1e42ff){const _0x1d5289=_0x4cada9(0x34d)+_0x1e42ff;fs[_0x4cada9(0x31e)](_0x1d5289)&&(cleanCacheForUserFiles(_0x1d5289),fs[_0x4cada9(0x2e4)](_0x1d5289,{'recursive':!![],'force':!![]}));}await conn['promise']()[_0x4cada9(0x1b5)](_0x4cada9(0x1c8),[_0x5a2369]);}catch(_0x4f18ff){console[_0x4cada9(0x337)](_0x4f18ff),_0xcbc06a[_0x4cada9(0x2b5)](0x1f4)['json']({'error':_0x4cada9(0x2b3)});return;}_0xcbc06a['status'](0xc8)[_0x4cada9(0x2df)]({'success':!![],'message':_0x4cada9(0x2ba)});}),router[a27_0x2ea864(0x2b7)](a27_0x2ea864(0x1ef),async(_0x53ad14,_0x56bab0)=>{const _0x4fb739=a27_0x2ea864,_0xf84ad3=osu[_0x4fb739(0x292)],_0x233846=osu[_0x4fb739(0x2b2)],_0x1c2215=osu[_0x4fb739(0x1de)],_0x3f8f4e=osu['os'],_0x568ca6={'percentage':0x0,'usedGB':0x0,'freeGb':0x0,'totalGB':0x0};try{let _0x4ccec2=os[_0x4fb739(0x1db)]()===_0x4fb739(0x1d5)?'c:':'/';const _0x22b49d=await _0x1c2215['info'](_0x4ccec2);_0x568ca6[_0x4fb739(0x1f7)]=_0x22b49d[_0x4fb739(0x336)],_0x568ca6[_0x4fb739(0x339)]=_0x22b49d[_0x4fb739(0x344)],_0x568ca6['freeGb']=_0x22b49d['freeGb'],_0x568ca6[_0x4fb739(0x28d)]=_0x22b49d[_0x4fb739(0x246)];}catch(_0x476105){console[_0x4fb739(0x337)](_0x4fb739(0x1d8),_0x476105);}const _0x52e4b7={'usage':0x0,'count':0x0};try{_0x52e4b7[_0x4fb739(0x245)]=await _0xf84ad3[_0x4fb739(0x245)](),_0x52e4b7[_0x4fb739(0x1fa)]=_0xf84ad3[_0x4fb739(0x1fa)]();}catch(_0x482495){console['log'](_0x4fb739(0x285),_0x482495);}const _0x4e23ca={'os':'','platform':'','ip':'','uptime':0x0,'hostname':'','type':'','arch':'','who':'','whoami':'','vmstats':''};try{_0x4e23ca['os']=await _0x3f8f4e['oos'](),_0x4e23ca['platform']=_0x3f8f4e[_0x4fb739(0x1db)](),_0x4e23ca['ip']=_0x3f8f4e['ip'](),_0x4e23ca['uptime']=_0x3f8f4e[_0x4fb739(0x319)](),_0x4e23ca['hostname']=_0x3f8f4e['hostname'](),_0x4e23ca[_0x4fb739(0x343)]=_0x3f8f4e[_0x4fb739(0x343)](),_0x4e23ca[_0x4fb739(0x327)]=_0x3f8f4e[_0x4fb739(0x327)](),_0x4e23ca['who']=await osu[_0x4fb739(0x335)][_0x4fb739(0x346)](),_0x4e23ca[_0x4fb739(0x340)]=await osu[_0x4fb739(0x335)]['whoami'](),_0x4e23ca[_0x4fb739(0x299)]=await osu[_0x4fb739(0x335)][_0x4fb739(0x299)]();}catch(_0x2759ae){console['log']('Error\x20getting\x20os\x20info',_0x2759ae);}const _0x2859c1={'totalProcesses':0x0,'zombieProcesses':0x0};try{_0x2859c1[_0x4fb739(0x1e0)]=await osu['proc'][_0x4fb739(0x1e0)](),_0x2859c1[_0x4fb739(0x2bb)]=await osu[_0x4fb739(0x230)]['zombieProcesses']();}catch(_0x144a96){console[_0x4fb739(0x337)](_0x4fb739(0x1e1),_0x144a96);}let _0x23a489={'usedMemPercentage':0x0,'usedMemMb':0x0,'totalMemMb':0x0};try{const _0x41ca79=await _0x233846[_0x4fb739(0x2ea)]();_0x23a489[_0x4fb739(0x2a0)]=_0x41ca79[_0x4fb739(0x2a0)],_0x23a489[_0x4fb739(0x2ad)]=_0x41ca79[_0x4fb739(0x24e)]/0x400/0x400,_0x23a489['totalMemMb']=_0x41ca79['total']/0x400/0x400;}catch(_0x18fdc5){console[_0x4fb739(0x337)]('Error\x20getting\x20memory\x20info',_0x18fdc5);}let _0x1445ed=0x0;try{_0x1445ed=await conn[_0x4fb739(0x25b)]()[_0x4fb739(0x300)]('SELECT\x20COUNT(*)\x20as\x20total\x20FROM\x20users')[_0x4fb739(0x1c0)](([_0xb90cd1])=>_0xb90cd1[0x0]['total']);}catch(_0x171a0c){console[_0x4fb739(0x337)](_0x4fb739(0x281),_0x171a0c);}const _0x596cc6=getMonitoringData(),_0x446624=_0x596cc6['filter'](_0x1b4f90=>_0x1b4f90['conversionTimeSpend']!==null&&_0x1b4f90[_0x4fb739(0x2c9)]!==undefined),_0x1d165c=_0x596cc6[_0x4fb739(0x2ac)](_0x5e03c7=>_0x5e03c7['conversionMemoryUsage']!==null&&_0x5e03c7['conversionMemoryUsage']!==undefined)[_0x4fb739(0x215)](_0x32240f=>parseFloat(_0x32240f[_0x4fb739(0x295)]['replaceAll']('Kb')[_0x4fb739(0x1b6)]())),_0x210a42=_0x446624[_0x4fb739(0x2a9)]((_0x37badf,_0x13d904)=>_0x37badf+parseFloat(_0x13d904[_0x4fb739(0x2c9)]),0x0)/_0x446624[_0x4fb739(0x2e9)],_0x169fb3=_0x1d165c[_0x4fb739(0x2a9)]((_0x302ef2,_0x2c2170)=>_0x302ef2+_0x2c2170,0x0)/_0x1d165c[_0x4fb739(0x2e9)];_0x56bab0[_0x4fb739(0x2df)]({'requestsPerSecond':counter['getStats'](),'diskUsage':_0x568ca6,'cpus':_0x52e4b7,'system':_0x4e23ca,'process':_0x2859c1,'totalMonitoringData':_0x596cc6[_0x4fb739(0x2e9)],'memory':_0x23a489,'totalUsers':_0x1445ed,'avgConvertionTime':_0x210a42,'avgMemoryUsage':_0x169fb3});}),router[a27_0x2ea864(0x2a6)](a27_0x2ea864(0x2b4),(_0x334dac,_0x34b37c)=>{const _0x189ec3=a27_0x2ea864;counter['reset'](),_0x34b37c[_0x189ec3(0x2df)]({'message':_0x189ec3(0x306)});});const getMonitoringData=()=>{const _0x4959fd=a27_0x2ea864,_0x26cd69=_0x4959fd(0x222);let _0x4c30dc=[];try{_0x4c30dc=JSON['parse'](fs['readFileSync'](_0x26cd69));}catch(_0x4cc021){console['log'](_0x4959fd(0x23f));}return _0x4c30dc;};router[a27_0x2ea864(0x2b7)](a27_0x2ea864(0x2bd),async(_0x18169a,_0xa7ab9a)=>{const _0x26d460=a27_0x2ea864,{page:page=0x1,limit:limit=0xa}=_0x18169a[_0x26d460(0x300)],_0x2257e5=(page-0x1)*limit;try{const _0x4a0e5f=getMonitoringData(),_0x1fe628=_0x4a0e5f['length'],_0x4ae197=Math[_0x26d460(0x2af)](_0x1fe628/limit),_0x12d258=_0x4a0e5f[_0x26d460(0x323)](_0x2257e5,_0x2257e5+limit);_0xa7ab9a[_0x26d460(0x2b5)](0xc8)[_0x26d460(0x2df)]({'data':_0x12d258,'page':parseInt(''+page),'totalPages':_0x4ae197,'total':_0x1fe628});}catch(_0x53aa32){console[_0x26d460(0x337)](_0x53aa32),_0xa7ab9a[_0x26d460(0x2b5)](0x1f4)[_0x26d460(0x2df)]({'error':'Error!\x20Something\x20went\x20wrong.'});}}),router[a27_0x2ea864(0x31c)](a27_0x2ea864(0x30a),async(_0x3491db,_0x57a29c)=>{const _0x9503f4=a27_0x2ea864,_0x2063ac=_0x9503f4(0x222);try{fs[_0x9503f4(0x22f)](_0x2063ac,JSON[_0x9503f4(0x233)]([],null,0x4)),analyzeConverterFiles(),_0x57a29c[_0x9503f4(0x2b5)](0xc8)['json']({'message':_0x9503f4(0x2a1)});}catch(_0x4895f0){console[_0x9503f4(0x337)](_0x4895f0),_0x57a29c['status'](0x1f4)[_0x9503f4(0x2df)]({'error':_0x9503f4(0x2b3)});}}),router[a27_0x2ea864(0x2b7)]('/conversion/memorydata',async(_0x4de986,_0x122c3d)=>{const _0x2ee64a=a27_0x2ea864,_0x1235ab=getHotConfig()['converterLocation'][_0x2ee64a(0x321)]('//','/'),{page:page=0x1,limit:limit=0xa}=_0x4de986[_0x2ee64a(0x300)],_0x199b61=(page-0x1)*limit;try{const _0xcb6330=_0x1235ab+'memorydata.csv';console[_0x2ee64a(0x337)](_0xcb6330);const _0x5e3ac4=fs['readFileSync'](_0xcb6330,_0x2ee64a(0x234)),_0x36d46b=_0x5e3ac4[_0x2ee64a(0x1cb)]('\x0a'),_0x4bccc4=[];_0x36d46b[_0x2ee64a(0x1ea)](_0x2149c5=>{const _0x110ad5=_0x2ee64a,_0x2376a5=_0x2149c5['split'](',');if(_0x2376a5[_0x110ad5(0x2e9)]<0x4)return;const _0x1aef62=_0x2376a5[0x0],_0x551a1d=_0x2376a5[0x1],_0x484138=parseFloat(_0x2376a5[0x2]);_0x4bccc4['push']({'file':_0x1aef62['replaceAll']('\x22',''),'action':_0x551a1d,'timeSpend':_0x484138,'memoryUsage':_0x2376a5[0x3]});});const _0x3bfa8a=_0x4bccc4[_0x2ee64a(0x2e9)],_0xe3119b=Math[_0x2ee64a(0x2af)](_0x3bfa8a/limit),_0x5afd5c=_0x4bccc4[_0x2ee64a(0x323)](_0x199b61,_0x199b61+limit);_0x122c3d[_0x2ee64a(0x2b5)](0xc8)['json']({'data':_0x5afd5c,'page':parseInt(''+page),'totalPages':_0xe3119b,'total':_0x3bfa8a});}catch(_0x405d73){console[_0x2ee64a(0x337)](_0x405d73),_0x122c3d[_0x2ee64a(0x2b5)](0x1f4)['json']({'error':_0x2ee64a(0x2b3)});}}),router[a27_0x2ea864(0x2b7)](a27_0x2ea864(0x2c6),async(_0x294f63,_0x3121a4)=>{const _0x4170a9=a27_0x2ea864,_0x2b1432=path[_0x4170a9(0x351)](path[_0x4170a9(0x2a4)](require['main']['filename']),_0x4170a9(0x333),_0x4170a9(0x31a));try{let _0x919f40=0x0,_0x29835e=0x0;function _0x2edb92(_0x9f9da6){const _0x3593c3=_0x4170a9;let _0x265fb8=0x0,_0x3011ff=0x0;if(fs['existsSync'](_0x9f9da6)){const _0x50a6e3=fs[_0x3593c3(0x23d)](_0x9f9da6);_0x3011ff=0x0;for(const _0x449b26 of _0x50a6e3){const _0x1a855b=path[_0x3593c3(0x351)](_0x9f9da6,_0x449b26),_0x48b850=fs[_0x3593c3(0x1c4)](_0x1a855b);if(_0x48b850['isFile']()&&_0x449b26!==_0x3593c3(0x274))_0x3011ff++,_0x265fb8+=_0x48b850['size'];else{if(_0x48b850['isDirectory']()){}}}}return{'size':_0x265fb8,'count':_0x3011ff};}const _0x33d1f4=_0x2edb92(_0x2b1432);_0x919f40=_0x33d1f4[_0x4170a9(0x1ca)],_0x29835e=_0x33d1f4['count'],_0x3121a4[_0x4170a9(0x2df)]({'fileCount':_0x29835e,'totalSize':_0x919f40});}catch(_0x570dc3){console[_0x4170a9(0x311)](_0x4170a9(0x239),_0x570dc3),_0x3121a4[_0x4170a9(0x2b5)](0x1f4)[_0x4170a9(0x2df)]({'error':'Failed\x20to\x20get\x20cache\x20stats'});}}),router[a27_0x2ea864(0x31c)](a27_0x2ea864(0x1fb),async(_0x212cf8,_0x2ec79b)=>{const _0x4036a8=a27_0x2ea864,_0x136e25=path[_0x4036a8(0x351)](path['dirname'](require[_0x4036a8(0x2d0)][_0x4036a8(0x1dc)]),_0x4036a8(0x333),_0x4036a8(0x31a));try{function _0x3434c8(_0x3edbe0){const _0xfe5d6=_0x4036a8;if(fs[_0xfe5d6(0x31e)](_0x3edbe0)){const _0x1f7c1b=fs['readdirSync'](_0x3edbe0);for(const _0x31a9b4 of _0x1f7c1b){const _0x1aa8bf=path['join'](_0x3edbe0,_0x31a9b4),_0x5172e9=fs[_0xfe5d6(0x1c4)](_0x1aa8bf);if(_0x5172e9[_0xfe5d6(0x33a)]()){}else _0x31a9b4!==_0xfe5d6(0x274)&&fs[_0xfe5d6(0x240)](_0x1aa8bf);}}}_0x3434c8(_0x136e25),analyzeConverterFiles(),_0x2ec79b['json']({'message':_0x4036a8(0x26e)});}catch(_0x40ba59){console[_0x4036a8(0x311)]('Error\x20flushing\x20cache:',_0x40ba59),_0x2ec79b['status'](0x1f4)[_0x4036a8(0x2df)]({'error':'Failed\x20to\x20flush\x20cache'});}}),router['get'](a27_0x2ea864(0x22e),async(_0x511fb3,_0x239ed8)=>{const _0x221e90=a27_0x2ea864;_0x239ed8[_0x221e90(0x247)](path[_0x221e90(0x351)](path[_0x221e90(0x2a4)](require['main']['filename']),'cadviewer/settings/cache-stats.js'));}),router[a27_0x2ea864(0x2b7)](a27_0x2ea864(0x2e7),protectedRoute,async(_0x241d03,_0x81276b)=>{const _0x54f4dc=a27_0x2ea864,_0x181f27=fs[_0x54f4dc(0x1b9)](path[_0x54f4dc(0x351)](path[_0x54f4dc(0x2a4)](require[_0x54f4dc(0x2d0)][_0x54f4dc(0x1dc)]),'cadviewer/settings/conversion-cache.html'),_0x54f4dc(0x234)),_0x3b7527=_0x181f27[_0x54f4dc(0x321)](_0x54f4dc(0x254),_0x241d03[_0x54f4dc(0x29e)]);_0x81276b[_0x54f4dc(0x29d)](_0x3b7527);}),router[a27_0x2ea864(0x2b7)]('/cache/files',async(_0xaeb926,_0x13854b)=>{const _0x5ee617=a27_0x2ea864,{page:page=0x1,limit:limit=0x10}=_0xaeb926['query'],_0x243274=JSON[_0x5ee617(0x341)](fs['readFileSync'](path['join'](path[_0x5ee617(0x2a4)](require[_0x5ee617(0x2d0)][_0x5ee617(0x1dc)]),_0x5ee617(0x301)))),_0x13bab2=(page-0x1)*limit,_0x3deca8=page*limit,_0xa83dbb=_0x243274[_0x5ee617(0x31a)][_0x5ee617(0x2e9)],_0x29747a=Math[_0x5ee617(0x2af)](_0xa83dbb/limit),_0x115456=_0x243274[_0x5ee617(0x31a)][_0x5ee617(0x323)](_0x13bab2,_0x3deca8);_0x13854b[_0x5ee617(0x2df)]({'files':_0x115456,'pagination':{'total':_0xa83dbb,'totalPages':_0x29747a,'currentPage':parseInt(page),'limit':parseInt(limit)}});return;}),router[a27_0x2ea864(0x2b7)](a27_0x2ea864(0x26b),async(_0x25bf81,_0x3e69b0)=>{const _0x3f4a81=a27_0x2ea864,{file:_0x2db448}=_0x25bf81[_0x3f4a81(0x308)],_0x59eb13=path[_0x3f4a81(0x351)](path[_0x3f4a81(0x2a4)](require[_0x3f4a81(0x2d0)][_0x3f4a81(0x1dc)]),_0x3f4a81(0x333),_0x3f4a81(0x31a)),_0x3ce35=path[_0x3f4a81(0x351)](_0x59eb13,_0x2db448),_0x446ceb=fs['readFileSync'](_0x3ce35,'utf8'),_0x279812=_0x446ceb['split']('\x0a'),_0xe84c3f=_0x279812[_0x3f4a81(0x215)](_0x3cf6ac=>{const _0x2fc598=_0x3f4a81,_0x3c0684=_0x3cf6ac[_0x2fc598(0x1cb)](',');return _0x3c0684[_0x2fc598(0x215)](_0x55d792=>_0x55d792[_0x2fc598(0x321)]('\x22',''));});_0x3e69b0[_0x3f4a81(0x2df)](_0xe84c3f);}),router['get'](a27_0x2ea864(0x268),async(_0x5374ad,_0x1b1ed4)=>{const _0x501860=a27_0x2ea864,{id:_0xe7626c}=_0x5374ad[_0x501860(0x308)],_0x26932d=path[_0x501860(0x351)](path[_0x501860(0x2a4)](require[_0x501860(0x2d0)][_0x501860(0x1dc)]),_0x501860(0x333),_0x501860(0x31a)),_0x202963=path[_0x501860(0x351)](_0x26932d,_0xe7626c);if(_0x202963[_0x501860(0x2ae)](_0x501860(0x218))){var _0x1a7cbc=require('zlib');const _0xa1f3e3=fs[_0x501860(0x1b9)](_0x202963),_0x482c41=_0x1a7cbc[_0x501860(0x20a)](_0xa1f3e3);_0x1b1ed4['setHeader'](_0x501860(0x33b),_0x501860(0x2c7)),_0x1b1ed4['send'](_0x482c41);}else _0x1b1ed4[_0x501860(0x247)](_0x202963);}),router['delete'](a27_0x2ea864(0x268),async(_0x4078fa,_0x51bea5)=>{const _0x46398b=a27_0x2ea864,{id:_0x4a7e44}=_0x4078fa['params'],_0x15582b=path[_0x46398b(0x351)](path[_0x46398b(0x2a4)](require[_0x46398b(0x2d0)]['filename']),'converters',_0x46398b(0x31a)),_0x2b72d0=JSON[_0x46398b(0x341)](fs[_0x46398b(0x1b9)](path['join'](path[_0x46398b(0x2a4)](require[_0x46398b(0x2d0)]['filename']),'cadviewer/settings/converter-files-analysis.json'))),_0x1e7832=_0x2b72d0[_0x46398b(0x31a)][_0x46398b(0x25c)](_0x3c8cc2=>_0x3c8cc2[_0x46398b(0x27a)]===_0x4a7e44);if(_0x1e7832){try{fs['existsSync'](path[_0x46398b(0x351)](_0x15582b,_0x1e7832[_0x46398b(0x27a)]))&&fs[_0x46398b(0x240)](path[_0x46398b(0x351)](_0x15582b,_0x1e7832[_0x46398b(0x27a)]));}catch(_0x5c1bf8){console[_0x46398b(0x337)](_0x46398b(0x1e8),{'e':_0x5c1bf8});}(_0x1e7832[_0x46398b(0x271)]??[])[_0x46398b(0x1ea)](_0x740b56=>{const _0x6e3e07=_0x46398b;try{fs[_0x6e3e07(0x31e)](path[_0x6e3e07(0x351)](_0x15582b,_0x740b56['id']))&&fs['unlinkSync'](path['join'](_0x15582b,_0x740b56['id']));}catch(_0x2b0a1c){console[_0x6e3e07(0x337)](_0x6e3e07(0x1e8),{'e':_0x2b0a1c});}});}analyzeConverterFiles(),_0x51bea5[_0x46398b(0x2df)]({'message':'File\x20deleted\x20successfully'});});const deleteOldDemoUsers=async()=>{const _0x326f68=a27_0x2ea864;console[_0x326f68(0x337)]('Deleting\x20old\x20demo_user\x20accounts...');const _0x1dcacf=config['demoUserRetentionDays'],_0xea1ba7=_0x326f68(0x2f8);try{const [_0x485eed]=await conn[_0x326f68(0x25b)]()[_0x326f68(0x1b5)](_0xea1ba7,[_0x1dcacf]),_0x3fd37e=_0x485eed['map'](_0x458eaa=>_0x458eaa[_0x326f68(0x1e6)]),_0x5a02b0=_0x485eed[_0x326f68(0x215)](_0x4fada2=>_0x4fada2[_0x326f68(0x2cc)]);console[_0x326f68(0x337)](_0x5a02b0),await conn[_0x326f68(0x25b)]()[_0x326f68(0x1b5)]('DELETE\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)',[_0x1dcacf]),_0x3fd37e[_0x326f68(0x1ea)](_0x58e02c=>{const _0x1839e1=_0x326f68;try{const _0x38da68=_0x1839e1(0x34d)+_0x58e02c;cleanCacheForUserFiles(_0x38da68),fs['rmdirSync'](_0x38da68);}catch(_0x6e3495){console[_0x1839e1(0x311)](_0x1839e1(0x1f9),_0x6e3495);}}),console['log'](_0x326f68(0x2c5)+_0x485eed['length']+_0x326f68(0x24f)+_0x1dcacf+'\x20days\x20have\x20been\x20deleted.');}catch(_0xcb165b){console[_0x326f68(0x311)](_0x326f68(0x2e5),_0xcb165b);}};schedule[a27_0x2ea864(0x326)](a27_0x2ea864(0x2de),deleteOldDemoUsers),router[a27_0x2ea864(0x2b7)]('/export-users',protectedRoute,async(_0x127892,_0x1c645d)=>{const _0xa6e4f8=a27_0x2ea864,_0xcb8457=fs[_0xa6e4f8(0x1b9)](path[_0xa6e4f8(0x351)](path[_0xa6e4f8(0x2a4)](require[_0xa6e4f8(0x2d0)][_0xa6e4f8(0x1dc)]),_0xa6e4f8(0x250)),_0xa6e4f8(0x234)),_0xee2d82=_0xcb8457[_0xa6e4f8(0x321)](_0xa6e4f8(0x254),_0x127892[_0xa6e4f8(0x29e)]);_0x1c645d[_0xa6e4f8(0x29d)](_0xee2d82);});const exportUsersList=async()=>{const _0xf6eba9=a27_0x2ea864;console['log'](_0xf6eba9(0x305));const _0xc765c6=path[_0xf6eba9(0x351)](path[_0xf6eba9(0x2a4)](require['main'][_0xf6eba9(0x1dc)]),'exports');!fs['existsSync'](_0xc765c6)&&fs['mkdirSync'](_0xc765c6);const _0xc57757=config['usersExportFrequency']||_0xf6eba9(0x2b1);let _0x230d6d;const _0x4bfc1f=path[_0xf6eba9(0x351)](_0xc765c6,_0xf6eba9(0x1f3));if(fs['existsSync'](_0x4bfc1f))try{const _0x583bb6=JSON[_0xf6eba9(0x341)](fs['readFileSync'](_0x4bfc1f,'utf8'));_0x230d6d=new Date(_0x583bb6['lastExportDate']);}catch(_0x33147c){console[_0xf6eba9(0x311)](_0xf6eba9(0x329),_0x33147c),_0x230d6d=calculateDefaultLastExportDate(_0xc57757);}else _0x230d6d=calculateDefaultLastExportDate(_0xc57757);const _0x1a79c5=new Date(),_0x21a2df=_0x1a79c5[_0xf6eba9(0x332)]()+'-'+String(_0x1a79c5[_0xf6eba9(0x2fe)]()+0x1)['padStart'](0x2,'0')+'-'+String(_0x1a79c5['getDate']())[_0xf6eba9(0x256)](0x2,'0'),_0x1dac49=_0xf6eba9(0x1ed)+_0x21a2df+_0xf6eba9(0x325),_0x26f50d=path['join'](_0xc765c6,_0x1dac49);try{const _0x2442dd=_0xf6eba9(0x2be),[_0x48d720]=await conn[_0xf6eba9(0x25b)]()[_0xf6eba9(0x1b5)](_0x2442dd,[_0x230d6d]);if(_0x48d720['length']===0x0){console[_0xf6eba9(0x337)](_0xf6eba9(0x270));return;}let _0x1145df=_0xf6eba9(0x2f5);_0x48d720[_0xf6eba9(0x1ea)](_0x21abed=>{const _0x104c24=_0xf6eba9,_0x3ac837=_0x21abed[_0x104c24(0x2cc)]?'\x22'+_0x21abed[_0x104c24(0x2cc)][_0x104c24(0x32d)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x1ee513=_0x21abed[_0x104c24(0x2f6)]?'\x22'+_0x21abed[_0x104c24(0x2f6)]['replace'](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x1a08fb=_0x21abed['last_name']?'\x22'+_0x21abed[_0x104c24(0x1ff)][_0x104c24(0x32d)](/"/g,'\x22\x22')+'\x22':'\x22\x22';_0x1145df+=_0x3ac837+','+_0x1ee513+','+_0x1a08fb+'\x0a';}),fs[_0xf6eba9(0x22f)](_0x26f50d,_0x1145df),console[_0xf6eba9(0x337)](_0xf6eba9(0x2fc)+_0x48d720[_0xf6eba9(0x2e9)]+'\x20users\x20to\x20'+_0x26f50d);const _0xd8897d={'lastExportDate':_0x1a79c5['toISOString'](),'fileName':_0x1dac49,'userCount':_0x48d720[_0xf6eba9(0x2e9)]};fs['writeFileSync'](_0x4bfc1f,JSON[_0xf6eba9(0x233)](_0xd8897d,null,0x2));}catch(_0x1b9ff7){console[_0xf6eba9(0x311)](_0xf6eba9(0x29b),_0x1b9ff7);}},calculateDefaultLastExportDate=_0x36d657=>{const _0x7588ec=a27_0x2ea864,_0x41c849=new Date();return _0x36d657===_0x7588ec(0x2c2)?_0x41c849[_0x7588ec(0x1cf)](_0x41c849[_0x7588ec(0x27f)]()-0xe):_0x41c849[_0x7588ec(0x1f1)](_0x41c849[_0x7588ec(0x2fe)]()-0x1),_0x41c849;};router[a27_0x2ea864(0x2b7)]('/users-export/history',async(_0x58c558,_0x1f0c8a)=>{const _0x45e383=a27_0x2ea864,_0x22924c=path[_0x45e383(0x351)](path[_0x45e383(0x2a4)](require[_0x45e383(0x2d0)][_0x45e383(0x1dc)]),_0x45e383(0x2d7));if(!fs[_0x45e383(0x31e)](_0x22924c))return _0x1f0c8a['status'](0xc8)['json']({'exports':[]});try{const _0x252274=fs['readdirSync'](_0x22924c)[_0x45e383(0x2ac)](_0x12d5f2=>_0x12d5f2[_0x45e383(0x244)](_0x45e383(0x1ed))&&_0x12d5f2[_0x45e383(0x2ae)](_0x45e383(0x325)))[_0x45e383(0x215)](_0x34d249=>{const _0x36d123=_0x45e383,_0x2a9010=path[_0x36d123(0x351)](_0x22924c,_0x34d249),_0x4c2e9b=fs[_0x36d123(0x1c4)](_0x2a9010),_0x39c688=fs[_0x36d123(0x1b9)](_0x2a9010,_0x36d123(0x234)),_0x244e0e=_0x39c688['split']('\x0a')[_0x36d123(0x2e9)]-0x1;return{'fileName':_0x34d249,'createdAt':_0x4c2e9b[_0x36d123(0x31d)],'userCount':_0x244e0e};})['sort']((_0xe52e6c,_0x7ebfa5)=>_0x7ebfa5['createdAt']-_0xe52e6c['createdAt']);_0x1f0c8a[_0x45e383(0x2b5)](0xc8)[_0x45e383(0x2df)]({'exports':_0x252274});}catch(_0x3a80dc){console['error'](_0x45e383(0x2fd),_0x3a80dc),_0x1f0c8a['status'](0x1f4)['json']({'error':_0x45e383(0x273)});}}),router[a27_0x2ea864(0x2a6)]('/users-export/trigger',async(_0x37caed,_0x13ba44)=>{const _0x351be0=a27_0x2ea864;try{await exportUsersList(),_0x13ba44['status'](0xc8)['json']({'message':_0x351be0(0x1f5)});}catch(_0x541e1c){console[_0x351be0(0x311)](_0x351be0(0x284),_0x541e1c),_0x13ba44[_0x351be0(0x2b5)](0x1f4)[_0x351be0(0x2df)]({'error':'Failed\x20to\x20trigger\x20export'});}}),router[a27_0x2ea864(0x2b7)](a27_0x2ea864(0x1c5),async(_0x16e94b,_0x5c75ef)=>{const _0x21750f=a27_0x2ea864,{fileName:_0x52c50e}=_0x16e94b['params'],_0x181ba2=path[_0x21750f(0x351)](path[_0x21750f(0x2a4)](require[_0x21750f(0x2d0)][_0x21750f(0x1dc)]),_0x21750f(0x2d7),_0x52c50e);if(!fs[_0x21750f(0x31e)](_0x181ba2))return _0x5c75ef[_0x21750f(0x2b5)](0x194)[_0x21750f(0x2df)]({'error':_0x21750f(0x303)});_0x5c75ef[_0x21750f(0x27c)](_0x181ba2);});const cleanCacheForUserFiles=_0x3f3a7f=>{const _0x56a381=a27_0x2ea864;try{if(!fs[_0x56a381(0x31e)](_0x3f3a7f)){console[_0x56a381(0x337)]('Directory\x20'+_0x3f3a7f+_0x56a381(0x2cb));return;}const _0x27f776=path[_0x56a381(0x351)](path[_0x56a381(0x2a4)](require['main'][_0x56a381(0x1dc)]),'converters',_0x56a381(0x31a));if(!fs[_0x56a381(0x31e)](_0x27f776)){console[_0x56a381(0x337)](_0x56a381(0x310)+_0x27f776+'\x20does\x20not\x20exist.');return;}const _0x26883d=JSON['parse'](fs[_0x56a381(0x1b9)](path['join'](path['dirname'](require['main'][_0x56a381(0x1dc)]),_0x56a381(0x301)))),_0x4139e4=fs[_0x56a381(0x23d)](_0x3f3a7f);_0x4139e4[_0x56a381(0x1ea)](_0x3bcff8=>{const _0x80790=_0x56a381;_0x26883d[_0x80790(0x31a)][_0x80790(0x1ea)](_0x4d15c5=>{const _0x583d5c=_0x80790;_0x4d15c5['goodFileName']===_0x3bcff8&&_0x4d15c5[_0x583d5c(0x271)][_0x583d5c(0x1ea)](_0x221352=>{const _0x3daf62=_0x583d5c;try{fs[_0x3daf62(0x240)](path['join'](_0x27f776,_0x221352['id']));}catch(_0x1ee658){console[_0x3daf62(0x311)]('Error\x20deleting\x20cache\x20file\x20'+_0x221352['id']+':',_0x1ee658);}});});}),analyzeConverterFiles(),console[_0x56a381(0x337)](_0x56a381(0x1b7)+_0x3f3a7f);}catch(_0x338ad6){console[_0x56a381(0x311)](_0x56a381(0x307),_0x338ad6);}};schedule['scheduleJob'](a27_0x2ea864(0x20f),exportUsersList),schedule[a27_0x2ea864(0x326)]('0\x20*\x20*\x20*\x20*',sendFollowUpEmails),schedule[a27_0x2ea864(0x326)](a27_0x2ea864(0x2f4),sendAccountDeletionPreventionEmails);const analyzeConverterFiles=()=>{const _0x2ecbd1=a27_0x2ea864;try{const _0x4f5051=path[_0x2ecbd1(0x351)](path[_0x2ecbd1(0x2a4)](require['main'][_0x2ecbd1(0x1dc)]),_0x2ecbd1(0x333),_0x2ecbd1(0x31a)),_0x4788b4=path[_0x2ecbd1(0x351)](path['dirname'](require[_0x2ecbd1(0x2d0)][_0x2ecbd1(0x1dc)]),_0x2ecbd1(0x2b6),_0x2ecbd1(0x298));if(!fs[_0x2ecbd1(0x31e)](_0x4f5051)){logStream[_0x2ecbd1(0x287)](_0x2ecbd1(0x272)+_0x4f5051+'\x20n\x27existe\x20pas.');return;}if(!fs[_0x2ecbd1(0x31e)](_0x4788b4)){logStream[_0x2ecbd1(0x287)](_0x2ecbd1(0x272)+_0x4788b4+'\x20n\x27existe\x20pas.');return;}const _0x1ec508=fs[_0x2ecbd1(0x23d)](_0x4f5051),_0x31875d={};_0x1ec508[_0x2ecbd1(0x1ea)](_0x17da50=>{const _0x3ed1b3=_0x2ecbd1,_0x1708e7=path[_0x3ed1b3(0x351)](_0x4f5051,_0x17da50),_0x1a1d0e=fs['statSync'](_0x1708e7),_0x35e313=_0x17da50[_0x3ed1b3(0x1cb)]('.'),_0x4b38b7=_0x35e313['slice'](0x0,-0x1)[_0x3ed1b3(0x2ac)]((_0x30c096,_0x26bce9)=>!([_0x3ed1b3(0x32b),'rl'][_0x3ed1b3(0x315)](_0x30c096[_0x3ed1b3(0x1bd)]())&&_0x26bce9===_0x35e313[_0x3ed1b3(0x2e9)]-0x2))[_0x3ed1b3(0x351)]('.');!Object[_0x3ed1b3(0x229)](_0x31875d)[_0x3ed1b3(0x315)](_0x4b38b7)?_0x31875d[_0x4b38b7]=[{'file':_0x17da50,'stats':_0x1a1d0e}]:_0x31875d[_0x4b38b7][_0x3ed1b3(0x33c)]({'file':_0x17da50,'stats':_0x1a1d0e});});const _0x3096fe=[];_0x1ec508[_0x2ecbd1(0x1ea)](_0x5218ba=>{const _0x1beb75=_0x2ecbd1;if(!_0x5218ba[_0x1beb75(0x2ae)](_0x1beb75(0x26c)))return;let _0x55be6c=_0x5218ba;const _0x78a186=path[_0x1beb75(0x351)](_0x4f5051,_0x5218ba),_0xa0713=fs[_0x1beb75(0x1c4)](_0x78a186);let _0x384971=_0xa0713[_0x1beb75(0x1ca)],_0x2f3c0b='';const _0x1ca23d=fs[_0x1beb75(0x1b9)](_0x78a186,_0x1beb75(0x234)),_0x1cfa24=JSON[_0x1beb75(0x341)](_0x1ca23d),_0x25f56f=_0x1cfa24['cachedfiles']?.['map'](_0x4710b1=>_0x4710b1[_0x1beb75(0x22a)])??[];if(_0x1cfa24[_0x1beb75(0x1dc)])_0x55be6c=_0x1cfa24['filename'];const _0x2813cc=_0x5218ba['split']('.'),_0x4bc4c1=_0x2813cc[_0x1beb75(0x323)](0x0,-0x1)[_0x1beb75(0x2ac)]((_0x1c3bb7,_0x31a73d)=>!([_0x1beb75(0x32b),'rl'][_0x1beb75(0x315)](_0x1c3bb7[_0x1beb75(0x1bd)]())&&_0x31a73d===_0x2813cc[_0x1beb75(0x2e9)]-0x2))['join']('.'),_0x26b8b0=Object[_0x1beb75(0x229)](_0x31875d)[_0x1beb75(0x315)](_0x4bc4c1)?_0x31875d[_0x4bc4c1]:[];for(const _0x1b40a2 of _0x25f56f){Object[_0x1beb75(0x229)](_0x31875d)[_0x1beb75(0x315)](_0x1b40a2)&&_0x26b8b0[_0x1beb75(0x33c)](..._0x31875d[_0x1b40a2]);}const _0x2c46f0=_0x26b8b0[_0x1beb75(0x215)](({file:_0x1da8ca,stats:_0x3660dc})=>{const _0x13ad4f=_0x1beb75;return!_0x1da8ca[_0x13ad4f(0x2ae)]('.dwg.json')&&(_0x384971+=_0x3660dc[_0x13ad4f(0x1ca)]),{'id':_0x1da8ca,'name':_0x1da8ca['endsWith'](_0x13ad4f(0x2d4))?_0x13ad4f(0x216):_0x1da8ca['endsWith'](_0x13ad4f(0x218))?'SVGZ':_0x1da8ca[_0x13ad4f(0x2ae)](_0x13ad4f(0x2a3))?_0x13ad4f(0x211):_0x1da8ca[_0x13ad4f(0x2ae)](_0x13ad4f(0x25d))?'JSON':_0x1da8ca[_0x13ad4f(0x2ae)](_0x13ad4f(0x325))?_0x13ad4f(0x309):_0x1da8ca['endsWith'](_0x13ad4f(0x304))?_0x13ad4f(0x334):_0x1da8ca['split']('.')[_0x13ad4f(0x2ca)]()[_0x13ad4f(0x2ab)](),'color':_0x1da8ca[_0x13ad4f(0x2ae)](_0x13ad4f(0x2d4))||_0x1da8ca[_0x13ad4f(0x2ae)](_0x13ad4f(0x218))?_0x13ad4f(0x32f):_0x1da8ca['endsWith'](_0x13ad4f(0x2a3))?_0x13ad4f(0x31f):_0x1da8ca[_0x13ad4f(0x2ae)]('.json')?_0x13ad4f(0x28f):_0x1da8ca['endsWith']('.csv')?_0x13ad4f(0x27d):_0x1da8ca[_0x13ad4f(0x2ae)]('.dwg')?_0x13ad4f(0x28a):_0x13ad4f(0x2e0)};});if(_0x2c46f0[_0x1beb75(0x297)](_0x5ce1c4=>_0x5ce1c4['id'][_0x1beb75(0x315)](_0x1beb75(0x328))))_0x2f3c0b=_0x1beb75(0x1ec);else{if(_0x2c46f0[_0x1beb75(0x297)](_0x418c26=>['svg',_0x1beb75(0x33e)][_0x1beb75(0x315)](_0x418c26['id']['split']('.')[_0x1beb75(0x2ca)]()))&&_0x2c46f0[_0x1beb75(0x297)](_0x196e62=>[_0x1beb75(0x1ce)][_0x1beb75(0x315)](_0x196e62['id']['split']('.')['pop']())))_0x2f3c0b='DWG\x20to\x20SVG\x20Conversion';else{if(_0x2c46f0[_0x1beb75(0x297)](_0x1e5777=>[_0x1beb75(0x34f),_0x1beb75(0x33e)][_0x1beb75(0x315)](_0x1e5777['id']['split']('.')['pop']())))_0x2f3c0b='Display\x20of\x20DWG';else{if(_0x2c46f0[_0x1beb75(0x297)](_0x3ca885=>[_0x1beb75(0x2df)][_0x1beb75(0x315)](_0x3ca885['id'][_0x1beb75(0x1cb)]('.')[_0x1beb75(0x2ca)]()))&&_0x2c46f0[_0x1beb75(0x297)](_0x8212fe=>[_0x1beb75(0x32b)][_0x1beb75(0x315)](_0x8212fe['id']['split']('.')[_0x1beb75(0x2ca)]())))_0x2f3c0b=_0x1beb75(0x279);else{if(_0x2c46f0[_0x1beb75(0x297)](_0x40f5b2=>[_0x1beb75(0x2dc)][_0x1beb75(0x315)](_0x40f5b2['id']['split']('.')['pop']())))_0x2f3c0b=_0x1beb75(0x231);else{if(_0x2c46f0[_0x1beb75(0x297)](_0x40afa3=>[_0x1beb75(0x2df)][_0x1beb75(0x315)](_0x40afa3['id'][_0x1beb75(0x1cb)]('.')[_0x1beb75(0x2ca)]()))&&!_0x2c46f0['some'](_0x58bb5=>[_0x1beb75(0x32b)][_0x1beb75(0x315)](_0x58bb5['id'][_0x1beb75(0x1cb)]('.')[_0x1beb75(0x2ca)]())))_0x2f3c0b=_0x1beb75(0x1cd);else _0x2c46f0[_0x1beb75(0x297)](_0x31541b=>[_0x1beb75(0x2df)]['includes'](_0x31541b['id'][_0x1beb75(0x1cb)]('.')[_0x1beb75(0x2ca)]()))&&(_0x2f3c0b=_0x1beb75(0x290));}}}}}_0x3096fe[_0x1beb75(0x33c)]({'name':_0x5218ba,'goodFileName':_0x55be6c,'size':_0x384971,'createdAt':_0xa0713['birthtime'],'updatedAt':_0xa0713[_0x1beb75(0x2f0)],'readAt':_0xa0713[_0x1beb75(0x201)],'action':_0x2f3c0b,'availableFormats':_0x2c46f0});}),_0x3096fe['sort']((_0xd223a7,_0x4721c7)=>_0x4721c7['updatedAt']-_0xd223a7[_0x2ecbd1(0x2ff)]);const _0x4314da={'timestamp':new Date(),'totalFiles':_0x3096fe['length'],'files':_0x3096fe},_0x1df528=path[_0x2ecbd1(0x351)](_0x4788b4,_0x2ecbd1(0x1d4));fs[_0x2ecbd1(0x22f)](_0x1df528,JSON[_0x2ecbd1(0x233)](_0x4314da,null,0x2));}catch(_0x4355e3){console['log'](_0x2ecbd1(0x2f7)),console['log']('Erreur\x20lors\x20de\x20l\x27analyse\x20des\x20fichiers\x20du\x20dossier\x20converters/files:\x20'+_0x4355e3[_0x2ecbd1(0x347)]);}},scheduleFileAnalysis=()=>{const _0x42b87b=a27_0x2ea864;analyzeConverterFiles(),schedule[_0x42b87b(0x326)](_0x42b87b(0x28b),analyzeConverterFiles),logStream[_0x42b87b(0x287)]('Analyse\x20périodique\x20des\x20fichiers\x20du\x20dossier\x20converters/files\x20planifiée\x20(toutes\x20les\x20heures)');};scheduleFileAnalysis(),router[a27_0x2ea864(0x2a6)](a27_0x2ea864(0x34e),async(_0x5a6a68,_0x4ac010)=>{const _0x5825b0=a27_0x2ea864,{userId:_0x240615}=_0x5a6a68[_0x5825b0(0x29c)];let _0x2f0e6d;try{const [_0x35bc8e]=await conn[_0x5825b0(0x25b)]()[_0x5825b0(0x1b5)](_0x5825b0(0x2f3),[_0x240615]);_0x35bc8e[_0x5825b0(0x2e9)]>0x0&&(_0x2f0e6d=_0x35bc8e[0x0]);}catch(_0x3c59e6){console[_0x5825b0(0x337)]({'err':_0x3c59e6}),_0x4ac010['status'](0x1f4)[_0x5825b0(0x2df)]({'error':_0x5825b0(0x2b3)});return;}if(!_0x2f0e6d){_0x4ac010[_0x5825b0(0x2b5)](0x191)[_0x5825b0(0x2df)]({'error':_0x5825b0(0x25a)});return;}if(_0x2f0e6d[_0x5825b0(0x2d5)]!==_0x5825b0(0x264)){_0x4ac010[_0x5825b0(0x2b5)](0x190)[_0x5825b0(0x2df)]({'error':_0x5825b0(0x2d9)});return;}const _0x5f2729=new Date();try{await conn['promise']()['execute'](_0x5825b0(0x2f9),[_0x5f2729,_0x240615]),_0x4ac010[_0x5825b0(0x2b5)](0xc8)['json']({'success':!![],'message':'Demo\x20period\x20extended\x20successfully\x20by\x20'+config[_0x5825b0(0x207)]+_0x5825b0(0x2c8)});}catch(_0x3abfd4){console['log']({'err':_0x3abfd4}),_0x4ac010['status'](0x1f4)[_0x5825b0(0x2df)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}}),router['get']('/folders/upload-config',async(_0x5f5cac,_0x2c8ab4)=>{const _0x54d2ee=a27_0x2ea864;try{const _0x4d342a=getHotConfig(),_0x5ba29b={'maxFileSize':(_0x4d342a['maxUploadFileSize']||0x32)*0x400*0x400,'maxConcurrentUploads':_0x4d342a['maxConcurrentUploads']||0x3,'maxFiles':_0x4d342a[_0x54d2ee(0x1ba)]||0xa};_0x2c8ab4[_0x54d2ee(0x2b5)](0xc8)[_0x54d2ee(0x2df)](_0x5ba29b);}catch(_0x555322){console[_0x54d2ee(0x311)](_0x54d2ee(0x1c3),_0x555322),_0x2c8ab4[_0x54d2ee(0x2b5)](0x1f4)[_0x54d2ee(0x2df)]({'message':_0x54d2ee(0x1c7)});}}),module[a27_0x2ea864(0x2d7)]={'router':router,'analyzeConverterFiles':analyzeConverterFiles};
const a27_0xe39794=a27_0x3ef3;(function(_0x6c4ab6,_0x4e0847){const _0x53afaf=a27_0x3ef3,_0x3e458d=_0x6c4ab6();while(!![]){try{const _0x1e1139=-parseInt(_0x53afaf(0x123))/0x1*(-parseInt(_0x53afaf(0x140))/0x2)+parseInt(_0x53afaf(0x169))/0x3*(-parseInt(_0x53afaf(0x129))/0x4)+parseInt(_0x53afaf(0x13f))/0x5+parseInt(_0x53afaf(0x13b))/0x6+parseInt(_0x53afaf(0x28a))/0x7+parseInt(_0x53afaf(0x151))/0x8*(-parseInt(_0x53afaf(0x210))/0x9)+-parseInt(_0x53afaf(0x17a))/0xa*(parseInt(_0x53afaf(0x269))/0xb);if(_0x1e1139===_0x4e0847)break;else _0x3e458d['push'](_0x3e458d['shift']());}catch(_0x3a3a77){_0x3e458d['push'](_0x3e458d['shift']());}}}(a27_0x4559,0x3a26f));function a27_0x3ef3(_0x199531,_0x4be92e){const _0x455967=a27_0x4559();return a27_0x3ef3=function(_0x3ef305,_0x1d7bdc){_0x3ef305=_0x3ef305-0xe5;let _0x2b926f=_0x455967[_0x3ef305];return _0x2b926f;},a27_0x3ef3(_0x199531,_0x4be92e);}const express=require('express'),router=express[a27_0xe39794(0x134)](),multer=require('multer'),fs=require('fs'),path=require(a27_0xe39794(0x266)),getHotConfig=require(a27_0xe39794(0x16a))[a27_0xe39794(0x1e6)],{exec}=require(a27_0xe39794(0x18e)),os=require('os'),conn=require('../libs/mysql.js'),bcrypt=require(a27_0xe39794(0x18a)),osu=require(a27_0xe39794(0x1f2)),schedule=require('node-schedule'),counter=require(a27_0xe39794(0x264)),{randomUUID}=require(a27_0xe39794(0x235)),logStream=require(a27_0xe39794(0x1f7)),config=require(a27_0xe39794(0x192)),basicAuth=require(a27_0xe39794(0x1db)),{sendFollowUpEmails,sendAccountDeletionPreventionEmails}=require(a27_0xe39794(0x18c)),protectedRoute=basicAuth({'users':{[config['settingsUserBasicAuth']]:config[a27_0xe39794(0x153)]},'challenge':!![],'realm':a27_0xe39794(0x13a)});router['get'](a27_0xe39794(0x185),async(_0x5ca197,_0xe8153)=>{const _0x6cb67e=a27_0xe39794;_0xe8153[_0x6cb67e(0x181)](path[_0x6cb67e(0x1fb)](path[_0x6cb67e(0x121)](require[_0x6cb67e(0x102)]['filename']),_0x6cb67e(0x1a9)));}),router[a27_0xe39794(0x10f)]('/chart.min.js',async(_0x5d233a,_0x550eb9)=>{const _0x47d7c3=a27_0xe39794;_0x550eb9[_0x47d7c3(0x181)](path[_0x47d7c3(0x1fb)](path[_0x47d7c3(0x121)](require['main'][_0x47d7c3(0x1e9)]),_0x47d7c3(0x135)));}),router[a27_0xe39794(0x10f)](a27_0xe39794(0x183),async(_0x3cb389,_0x38dc23)=>{const _0x1568b0=a27_0xe39794;_0x38dc23[_0x1568b0(0x181)](path[_0x1568b0(0x1fb)](path[_0x1568b0(0x121)](require[_0x1568b0(0x102)][_0x1568b0(0x1e9)]),_0x1568b0(0x174)));}),router[a27_0xe39794(0x10f)](a27_0xe39794(0x14a),async(_0x4c8328,_0x383f0c)=>{const _0x3d0383=a27_0xe39794;_0x383f0c[_0x3d0383(0x181)](path['join'](path[_0x3d0383(0x121)](require[_0x3d0383(0x102)][_0x3d0383(0x1e9)]),_0x3d0383(0x1f0)));}),router[a27_0xe39794(0x10f)](a27_0xe39794(0x20a),async(_0x1088b9,_0x1134ec)=>{const _0xa150c7=a27_0xe39794;_0x1134ec[_0xa150c7(0x181)](path['join'](path[_0xa150c7(0x121)](require[_0xa150c7(0x102)][_0xa150c7(0x1e9)]),'cadviewer/settings/vanilla-toast.js'));}),router[a27_0xe39794(0x10f)](a27_0xe39794(0x217),async(_0x52ec0d,_0x85d4d4)=>{const _0x739f6=a27_0xe39794;_0x85d4d4[_0x739f6(0x181)](path[_0x739f6(0x1fb)](path['dirname'](require[_0x739f6(0x102)][_0x739f6(0x1e9)]),_0x739f6(0x26a)));}),router['get']('/',protectedRoute,async(_0x382794,_0x256aaa)=>{const _0x49da63=a27_0xe39794,_0x3626c8=fs[_0x49da63(0x16c)](path['join'](path['dirname'](require[_0x49da63(0x102)][_0x49da63(0x1e9)]),_0x49da63(0x25f)),_0x49da63(0x1f8)),_0x3e3435=_0x3626c8[_0x49da63(0x23e)](_0x49da63(0x27d),_0x382794[_0x49da63(0x188)]);_0x256aaa[_0x49da63(0x136)](_0x3e3435);}),router[a27_0xe39794(0x10f)]('/licences',protectedRoute,async(_0x4bd828,_0x3dceeb)=>{const _0x42098=a27_0xe39794,_0x3939dc=fs[_0x42098(0x16c)](path[_0x42098(0x1fb)](path[_0x42098(0x121)](require['main'][_0x42098(0x1e9)]),_0x42098(0x17b)),_0x42098(0x1f8)),_0x228e90=_0x3939dc[_0x42098(0x23e)](_0x42098(0x27d),_0x4bd828['version']);_0x3dceeb[_0x42098(0x136)](_0x228e90);}),router[a27_0xe39794(0x10f)](a27_0xe39794(0x197),protectedRoute,async(_0x523bc5,_0x5cb27a)=>{const _0x3172bc=a27_0xe39794,_0x5bb839=fs[_0x3172bc(0x16c)](path['join'](path[_0x3172bc(0x121)](require[_0x3172bc(0x102)]['filename']),_0x3172bc(0x280)),'utf8'),_0x2e0972=_0x5bb839[_0x3172bc(0x23e)]('{version}',_0x523bc5[_0x3172bc(0x188)]);_0x5cb27a[_0x3172bc(0x136)](_0x2e0972);}),router[a27_0xe39794(0x10f)](a27_0xe39794(0x1cb),protectedRoute,async(_0x1dcf0a,_0x343dc9)=>{const _0x5e7086=a27_0xe39794,_0x2d5c8f=fs[_0x5e7086(0x16c)](path[_0x5e7086(0x1fb)](path[_0x5e7086(0x121)](require[_0x5e7086(0x102)]['filename']),'cadviewer/settings/folders.html'),_0x5e7086(0x1f8)),_0x34d042=_0x2d5c8f['replaceAll']('{version}',_0x1dcf0a[_0x5e7086(0x188)]);_0x343dc9[_0x5e7086(0x136)](_0x34d042);}),router[a27_0xe39794(0x205)](a27_0xe39794(0x1cb),async(_0x24c297,_0x2036cd)=>{const _0x991ec4=a27_0xe39794,_0x5ac1f3=path[_0x991ec4(0x1fb)](path['dirname'](require[_0x991ec4(0x102)][_0x991ec4(0x1e9)]),_0x991ec4(0x156)),_0x5d609e=JSON['parse'](fs['readFileSync'](_0x5ac1f3,'utf8')),_0x46eecf=_0x5d609e[_0x991ec4(0x137)];if(!fs[_0x991ec4(0x142)](_0x46eecf))return _0x2036cd['status'](0x194)[_0x991ec4(0x26f)]({'message':'Base\x20folder\x20not\x20exists,\x20please\x20verify\x20your\x20configuration.'});const _0x57212c=_0x2ee869=>{const _0x3c795f=_0x991ec4;let _0x570040=0x0;return _0x2ee869[_0x3c795f(0x25c)](_0x4d6df6=>{const _0x226a66=_0x3c795f;_0x4d6df6[_0x226a66(0x1ea)]?_0x570040+=_0x57212c(_0x4d6df6['sub_dirs']):_0x570040+=_0x4d6df6[_0x226a66(0x22e)];}),_0x570040;},_0x12e5e0=_0x1325ee=>{const _0x359c46=_0x991ec4;if(_0x1325ee<0x400)return _0x1325ee+'\x20B';else{if(_0x1325ee<0x400*0x400)return(_0x1325ee/0x400)['toFixed'](0x2)+_0x359c46(0x223);else return _0x1325ee<0x400*0x400*0x400?(_0x1325ee/0x400/0x400)[_0x359c46(0x10a)](0x2)+'\x20MB':(_0x1325ee/0x400/0x400/0x400)[_0x359c46(0x10a)](0x2)+_0x359c46(0x1f6);}},_0x41bbd0=(_0x17ac74,_0x57abb1='')=>{const _0x1df635=_0x991ec4,_0x43c43b=fs['readdirSync'](_0x17ac74),_0x42f00b=[];return _0x43c43b[_0x1df635(0x25c)](_0x497192=>{const _0x3fbf75=_0x1df635,_0x398dab=path[_0x3fbf75(0x1fb)](_0x17ac74,_0x497192)[_0x3fbf75(0x23e)]('\x5c','/'),_0x5a567c=fs[_0x3fbf75(0x258)](_0x398dab);if(_0x5a567c['isDirectory']()){const _0x18049f=_0x41bbd0(_0x398dab,_0x57abb1+_0x3fbf75(0x1c6));_0x42f00b[_0x3fbf75(0x27a)]({'name':_0x497192,'size':_0x5a567c[_0x3fbf75(0x22e)],'path':_0x398dab,'permissions':_0x5a567c[_0x3fbf75(0x1ec)],'isFolder':!![],'sub_dirs':_0x18049f});}else _0x42f00b['push']({'name':_0x497192,'size':_0x5a567c[_0x3fbf75(0x22e)],'path':_0x398dab,'permissions':_0x5a567c[_0x3fbf75(0x1ec)],'isFolder':![]});}),_0x42f00b;};let _0x4db161=_0x41bbd0(_0x46eecf);const _0x1d7197=_0x3d6b32=>{const _0x2a3e65=_0x991ec4;return _0x3d6b32[_0x2a3e65(0x25c)](_0x53c1ca=>{const _0x3f91e8=_0x2a3e65;_0x53c1ca[_0x3f91e8(0x1ea)]?(_0x53c1ca['formatedSize']=_0x12e5e0(_0x57212c(_0x53c1ca['sub_dirs'])),_0x53c1ca[_0x3f91e8(0x155)]=_0x1d7197(_0x53c1ca['sub_dirs'])):_0x53c1ca['formatedSize']=_0x12e5e0(_0x53c1ca[_0x3f91e8(0x22e)]);}),_0x3d6b32;};_0x2036cd[_0x991ec4(0x175)](0xc8)['json'](_0x1d7197(_0x4db161));}),router[a27_0xe39794(0x205)](a27_0xe39794(0x117),async(_0x398305,_0x14ddea)=>{const _0x55f161=a27_0xe39794,{path:_0x174c22}=_0x398305[_0x55f161(0x1dc)],_0xb4b87=_0x174c22['split']('/')[_0x55f161(0x144)]();if(!fs[_0x55f161(0x142)](_0x174c22))return _0x14ddea[_0x55f161(0x175)](0x194)[_0x55f161(0x26f)]({'message':_0x55f161(0x285)});_0x14ddea[_0x55f161(0x12d)](_0x55f161(0x21b),_0x55f161(0x168)),_0x14ddea[_0x55f161(0x12d)](_0x55f161(0x1bf),_0x55f161(0x26b)+_0xb4b87+'\x22'),_0x14ddea['download'](_0x174c22,_0x5b1643=>{const _0x52de8b=_0x55f161;_0x5b1643&&_0x14ddea[_0x52de8b(0x175)](0x1f4)[_0x52de8b(0x26f)]({'message':'Error\x20downloading\x20file.'});});}),router[a27_0xe39794(0x205)](a27_0xe39794(0x1b7),async(_0x478488,_0x1f6cee)=>{const _0x5cc3aa=a27_0xe39794,_0x35800c=_0x478488[_0x5cc3aa(0x1dc)],_0x72e95c=getHotConfig()[_0x5cc3aa(0x137)],_0x28675e=path['join'](_0x72e95c,_0x35800c[_0x5cc3aa(0x266)]);if(!fs[_0x5cc3aa(0x142)](_0x28675e))return _0x1f6cee['status'](0x194)[_0x5cc3aa(0x26f)]({'message':_0x5cc3aa(0x104)});if(fs[_0x5cc3aa(0x142)](path[_0x5cc3aa(0x1fb)](_0x28675e,_0x35800c['folderName'])))return _0x1f6cee[_0x5cc3aa(0x175)](0x199)[_0x5cc3aa(0x26f)]({'message':_0x5cc3aa(0x1cd)});fs[_0x5cc3aa(0x1a4)](path[_0x5cc3aa(0x1fb)](_0x28675e,_0x35800c[_0x5cc3aa(0x1b2)]),_0x3d38a6=>{const _0x474bb2=_0x5cc3aa;_0x3d38a6&&_0x1f6cee[_0x474bb2(0x175)](0x1f4)[_0x474bb2(0x26f)]({'message':_0x474bb2(0x24b)}),_0x1f6cee[_0x474bb2(0x175)](0xc8)['json']({'message':_0x474bb2(0x23f)});});}),router[a27_0xe39794(0xf9)]('/folders/update',async(_0x21f516,_0x293bcd)=>{const _0x267934=a27_0xe39794,{newName:_0x2b0db6,isFolder:_0x30c894,path:_0xad70d9}=_0x21f516[_0x267934(0x1dc)];if(!fs[_0x267934(0x142)](_0xad70d9))return _0x293bcd[_0x267934(0x175)](0x194)['json']({'message':_0x30c894?'Folder\x20not\x20found':'File\x20not\x20found'});const _0x232f28=_0xad70d9[_0x267934(0x27f)](_0xad70d9[_0x267934(0x187)]('/')[_0x267934(0x144)](),_0x2b0db6),_0x45104e=fs[_0x267934(0x258)](_0xad70d9);_0x45104e[_0x267934(0x190)]()?fs[_0x267934(0x12b)](_0xad70d9,_0x232f28):(fs['copyFileSync'](_0xad70d9,_0x232f28),fs[_0x267934(0x225)](_0xad70d9)),_0x293bcd['status'](0xc8)[_0x267934(0x26f)]({'message':_0x30c894?_0x267934(0x106):'File\x20renamed.'});}),router[a27_0xe39794(0x112)](a27_0xe39794(0x1d5),async(_0x17e919,_0x3da663)=>{const _0x177b3e=a27_0xe39794,{path:_0xe2e3cd}=_0x17e919['body'];if(!fs['existsSync'](_0xe2e3cd))return _0x3da663['status'](0x194)[_0x177b3e(0x26f)]({'message':_0x177b3e(0x291)});const _0x444a64=fs[_0x177b3e(0x258)](_0xe2e3cd);if(_0x444a64['isFile']())fs[_0x177b3e(0x125)](_0xe2e3cd,_0x28b882=>{const _0x3213bc=_0x177b3e;_0x28b882&&_0x3da663['status'](0x1f4)['json']({'message':_0x3213bc(0x214)}),_0x3da663[_0x3213bc(0x175)](0xc8)[_0x3213bc(0x26f)]({'message':_0x3213bc(0x212)});});else _0x444a64[_0x177b3e(0x190)]()&&fs[_0x177b3e(0xf4)](_0xe2e3cd,{'recursive':!![]},_0x9850bd=>{const _0x1a851e=_0x177b3e;_0x9850bd&&_0x3da663['status'](0x1f4)[_0x1a851e(0x26f)]({'message':_0x1a851e(0x20d)}),_0x3da663['status'](0xc8)[_0x1a851e(0x26f)]({'message':_0x1a851e(0x152)});});});!fs['existsSync'](a27_0xe39794(0x21a))&&fs[a27_0xe39794(0x234)](a27_0xe39794(0x21a));const storage=multer[a27_0xe39794(0x22c)]({'destination':(_0x43ea7a,_0x4f90c0,_0x2dfdd2)=>{const _0x31d102=a27_0xe39794;_0x2dfdd2(null,_0x31d102(0x293));},'filename':(_0x419718,_0x2b218c,_0x464e31)=>{const _0x4bc1c5=a27_0xe39794;_0x464e31(null,Date[_0x4bc1c5(0xf1)]()+path['extname'](_0x2b218c[_0x4bc1c5(0x16d)]));}}),upload=multer({'storage':storage,'limits':{'fileSize':getHotConfig()['maxUploadFileSize']?getHotConfig()[a27_0xe39794(0x296)]*0x400*0x400:0x32*0x400*0x400}});router['post'](a27_0xe39794(0x120),upload[a27_0xe39794(0x277)](a27_0xe39794(0x23a)),async(_0x3f9bf9,_0x3ed736)=>{const _0x1fe90e=a27_0xe39794,_0xf69b15=_0x3f9bf9['body'];if(!_0x3f9bf9[_0x1fe90e(0x23a)]||_0x3f9bf9[_0x1fe90e(0x23a)]['length']===0x0)return _0x3ed736[_0x1fe90e(0x175)](0x190)[_0x1fe90e(0x26f)]({'message':'No\x20files\x20uploaded'});const _0x1e51b0=getHotConfig()[_0x1fe90e(0x137)],_0x1a852b=path[_0x1fe90e(0x1fb)](_0x1e51b0,_0xf69b15[_0x1fe90e(0x266)]);if(!fs['existsSync'](_0x1a852b))return _0x3ed736['status'](0x194)[_0x1fe90e(0x26f)]({'message':_0x1fe90e(0x104)});const _0x58efb0=_0x3f9bf9[_0x1fe90e(0x23a)][_0x1fe90e(0x284)](_0x490d93=>({'originalname':_0x490d93[_0x1fe90e(0x16d)],'filename':_0x490d93['filename'],'mimetype':_0x490d93[_0x1fe90e(0x1e2)],'size':_0x490d93['size']}));_0x58efb0[_0x1fe90e(0x25c)](_0x1d9788=>{const _0x1e8eff=_0x1fe90e;fs[_0x1e8eff(0x28f)](path[_0x1e8eff(0x1fb)](_0x1e8eff(0x293),_0x1d9788['filename']),path['join'](_0x1a852b,_0x1d9788[_0x1e8eff(0x16d)])),fs[_0x1e8eff(0x225)](path['join']('tmp',_0x1d9788[_0x1e8eff(0x1e9)]));}),_0x3ed736[_0x1fe90e(0x175)](0xc8)[_0x1fe90e(0x26f)]({'message':_0x1fe90e(0x157),'files':_0x58efb0});}),router[a27_0xe39794(0xf9)]('/config/global-update',async(_0x23087e,_0x41d4c4)=>{const _0x270c07=a27_0xe39794,_0x167530=path[_0x270c07(0x1fb)](path[_0x270c07(0x121)](require[_0x270c07(0x102)][_0x270c07(0x1e9)]),'CADViewer_config.json'),{config:_0x4a0c10}=_0x23087e['body'];if(!_0x4a0c10)return _0x41d4c4[_0x270c07(0x175)](0x190)[_0x270c07(0x26f)]({'message':'No\x20config\x20object\x20provided'});try{fs[_0x270c07(0x1b1)](_0x167530,JSON['stringify'](_0x4a0c10,null,0x4)),_0x41d4c4[_0x270c07(0x175)](0xc8)['json']({'message':_0x270c07(0x1d7)});}catch(_0x9850a4){_0x41d4c4['status'](0x1f4)[_0x270c07(0x26f)]({'message':_0x270c07(0x28e)});}}),router[a27_0xe39794(0xf9)](a27_0xe39794(0x26d),async(_0x17ad86,_0x239c75)=>{const _0x2e4c4d=a27_0xe39794,{key:_0x54999e,value:_0x4c7015}=_0x17ad86['body'],_0x29d472=path['join'](path['dirname'](require[_0x2e4c4d(0x102)]['filename']),_0x2e4c4d(0x156));fs[_0x2e4c4d(0x275)](_0x29d472,_0x2e4c4d(0x1f8),function(_0x594f47,_0x835173){const _0x4bf8d4=_0x2e4c4d;_0x594f47&&_0x239c75[_0x4bf8d4(0x175)](0x1f4)[_0x4bf8d4(0x136)](_0x594f47);const _0x5c4169=JSON['parse'](_0x835173);_0x5c4169[_0x54999e]=_0x4c7015;if(_0x54999e==='autodetect_location'){let _0x22d8f6='';if(_0x5c4169['autodetect_platform']){_0x22d8f6=os[_0x4bf8d4(0x108)]();if(_0x22d8f6===_0x4bf8d4(0x15a))_0x22d8f6=_0x4bf8d4(0x1ff);else{if(_0x22d8f6===_0x4bf8d4(0x10c))_0x22d8f6=_0x4bf8d4(0x247);}}else _0x22d8f6=_0x5c4169[_0x4bf8d4(0x108)];if(_0x22d8f6==='windows'){_0x5c4169[_0x4bf8d4(0x294)]=path['resolve'](__dirname,'..')+'/';const _0x26bd2f=/\\/g;_0x5c4169[_0x4bf8d4(0x294)]=_0x5c4169['ServerLocation']['replace'](_0x26bd2f,'/');}else _0x5c4169[_0x4bf8d4(0x294)]=path[_0x4bf8d4(0xf6)](__dirname,'..')+'/';}if(_0x54999e==='autodetect_platform'){let _0x120df7=os['platform']();if(_0x120df7===_0x4bf8d4(0x15a))_0x120df7=_0x4bf8d4(0x1ff);else _0x120df7=_0x4bf8d4(0x247);_0x120df7===_0x4bf8d4(0x1ff)?_0x4c7015===!![]&&(_0x5c4169['autoxchange_executable']=_0x5c4169[_0x4bf8d4(0x178)],_0x5c4169['dwgmerge_executable']=_0x5c4169[_0x4bf8d4(0x270)],_0x5c4169[_0x4bf8d4(0x107)]=_0x5c4169[_0x4bf8d4(0xf0)]):_0x4c7015===!![]&&(_0x5c4169['autoxchange_executable']=_0x5c4169[_0x4bf8d4(0x27e)],_0x5c4169['dwgmerge_executable']=_0x5c4169[_0x4bf8d4(0x1e8)],_0x5c4169['linklist_executable']=_0x5c4169['linklist_executable_linux']),_0x5c4169[_0x4bf8d4(0x108)]=_0x120df7;}if(_0x5c4169['autodetect_platform']){let _0x281e76=os[_0x4bf8d4(0x108)]();if(_0x281e76===_0x4bf8d4(0x15a))_0x281e76=_0x4bf8d4(0x1ff);else _0x281e76=_0x4bf8d4(0x247);if(_0x281e76==='windows'){if(_0x54999e===_0x4bf8d4(0x178))_0x5c4169[_0x4bf8d4(0x1e5)]=_0x4c7015;else{if(_0x54999e==='dwgmerge_executable_windows')_0x5c4169[_0x4bf8d4(0x186)]=_0x4c7015;else _0x54999e===_0x4bf8d4(0xf0)&&(_0x5c4169[_0x4bf8d4(0x107)]=_0x4c7015);}}else{if(_0x54999e===_0x4bf8d4(0x27e))_0x5c4169[_0x4bf8d4(0x1e5)]=_0x4c7015;else{if(_0x54999e===_0x4bf8d4(0x1e8))_0x5c4169[_0x4bf8d4(0x186)]=_0x4c7015;else _0x54999e==='linklist_executable_linux'&&(_0x5c4169['linklist_executable']=_0x4c7015);}}}fs[_0x4bf8d4(0x1e0)](_0x29d472,JSON[_0x4bf8d4(0xe9)](_0x5c4169,null,0x4),function(_0xb00ffa){const _0x435426=_0x4bf8d4;_0xb00ffa&&_0x239c75[_0x435426(0x175)](0x1f4)[_0x435426(0x136)](_0xb00ffa),_0x239c75[_0x435426(0x175)](0xc8)[_0x435426(0x26f)]({'message':'Config\x20updated.'});});});}),router['post']('/config/content',async(_0x4c6b2a,_0x25d9d0)=>{const _0x5bbc8c=a27_0xe39794,_0x1d5070=getHotConfig(),_0x290875=(_0x1d5070[_0x5bbc8c(0x16b)][_0x5bbc8c(0x288)](_0x1d5070['ServerLocation'])?'':_0x1d5070['ServerLocation'])+_0x1d5070[_0x5bbc8c(0x16b)],_0x494032=(_0x1d5070[_0x5bbc8c(0x16b)][_0x5bbc8c(0x288)](_0x1d5070['ServerLocation'])?'':_0x1d5070[_0x5bbc8c(0x294)])+_0x1d5070[_0x5bbc8c(0x200)],_0xe79ded=(_0x1d5070[_0x5bbc8c(0x24f)]['includes'](_0x1d5070['ServerLocation'])?'':_0x1d5070['ServerLocation'])+_0x1d5070['converterLocation'],_0x263ffb=/ax202.*\.exe/,_0x4765f9=/ax202.*/,_0x1272b7=/dwgmerge202.*\.exe/,_0x5d9d82=/dwgmerge_202.*/,_0x5f13f2=/linklist_202.*\.exe/,_0x22fece=/linklist_202.*/,_0x33e5d1=[],_0x502759=[],_0x48a96e=[],_0x1f7b3a=[],_0x86d3d7=[],_0x5b2cfb=[];let _0x5e9812='';if(_0x1d5070[_0x5bbc8c(0x218)]){_0x5e9812=os['platform']();if(_0x5e9812===_0x5bbc8c(0x15a))_0x5e9812=_0x5bbc8c(0x1ff);else{if(_0x5e9812===_0x5bbc8c(0x10c))_0x5e9812=_0x5bbc8c(0x247);}}else _0x5e9812=_0x1d5070[_0x5bbc8c(0x108)];fs[_0x5bbc8c(0x1be)](_0xe79ded[_0x5bbc8c(0x23e)]('linux','windows'))[_0x5bbc8c(0x25c)](_0x5cd68d=>{const _0x4fb9b1=_0x5bbc8c;if(_0x263ffb['test'](_0x5cd68d['toLocaleLowerCase']()))_0x33e5d1[_0x4fb9b1(0x27a)](_0x5cd68d);}),fs['readdirSync'](_0x290875['replaceAll']('linux','windows'))[_0x5bbc8c(0x25c)](_0x150bf6=>{const _0x8909c5=_0x5bbc8c;if(_0x1272b7[_0x8909c5(0x279)](_0x150bf6[_0x8909c5(0x232)]()))_0x502759['push'](_0x150bf6);}),fs['readdirSync'](_0x494032[_0x5bbc8c(0x23e)](_0x5bbc8c(0x247),_0x5bbc8c(0x1ff)))[_0x5bbc8c(0x25c)](_0x5999e8=>{const _0x3042cd=_0x5bbc8c;if(_0x5f13f2[_0x3042cd(0x279)](_0x5999e8[_0x3042cd(0x232)]()))_0x48a96e[_0x3042cd(0x27a)](_0x5999e8);}),fs['readdirSync'](_0xe79ded[_0x5bbc8c(0x23e)](_0x5bbc8c(0x1ff),_0x5bbc8c(0x247)))['forEach'](_0x542d0f=>{const _0x316280=_0x5bbc8c;if(_0x4765f9[_0x316280(0x279)](_0x542d0f['toLocaleLowerCase']()))_0x1f7b3a[_0x316280(0x27a)](_0x542d0f);}),fs['readdirSync'](_0x290875[_0x5bbc8c(0x23e)](_0x5bbc8c(0x1ff),'linux'))[_0x5bbc8c(0x25c)](_0xe538ac=>{const _0x194ed4=_0x5bbc8c;if(_0x5d9d82['test'](_0xe538ac[_0x194ed4(0x232)]()))_0x86d3d7[_0x194ed4(0x27a)](_0xe538ac);}),fs[_0x5bbc8c(0x1be)](_0x494032[_0x5bbc8c(0x23e)]('windows',_0x5bbc8c(0x247)))[_0x5bbc8c(0x25c)](_0x2f1e5c=>{const _0x3cfd47=_0x5bbc8c;if(_0x22fece[_0x3cfd47(0x279)](_0x2f1e5c[_0x3cfd47(0x232)]()))_0x5b2cfb['push'](_0x2f1e5c);});const _0x2e3b96=[_0x5bbc8c(0x199),'https',_0x5bbc8c(0x15b),_0x5bbc8c(0x15e),_0x5bbc8c(0x1c5)],_0x65e40e=[_0x5bbc8c(0xef),_0x5bbc8c(0x19b),_0x5bbc8c(0x24f),_0x5bbc8c(0x22a),'xpathLocation',_0x5bbc8c(0x1d2),'callbackMethod',_0x5bbc8c(0x16b),_0x5bbc8c(0x200),_0x5bbc8c(0x188)],_0x27316a=['ServerUrl','mysqlHost',_0x5bbc8c(0x1a7),_0x5bbc8c(0x20c),_0x5bbc8c(0x14c),_0x5bbc8c(0x273),'cvjs_svgz_compress'],_0x486365={'ServerUrl':_0x5bbc8c(0x1bb),'autoxchange_executable':_0x5bbc8c(0x1b3),'linklist_executable':_0x5bbc8c(0x1c9),'dwgmerge_executable':_0x5bbc8c(0x241),'setup_mysqlHost':_0x5bbc8c(0x20f),'callbackMethod_gatewayUrl_flag':_0x5bbc8c(0x203),'userFolderMaximumFiles':'Demo\x20and\x20Base\x20User\x20Settings','smtpHost':_0x5bbc8c(0x1dd)},_0x5c7827={'https':'boolean','ServerFrontEndUrlAsAllowedOriginOnly':_0x5bbc8c(0x22d),'autodetect_platform':_0x5bbc8c(0x22d),'cvjs_svgz_compress':_0x5bbc8c(0x22d),'cached_conversion':_0x5bbc8c(0x22d),'remainOnServer':_0x5bbc8c(0x22d),'cvjs_debug':'boolean','autodetect_location':_0x5bbc8c(0x22d),'platform':_0x5bbc8c(0x158),'autoxchange_executable':_0x5bbc8c(0x21d)+(_0x5e9812===_0x5bbc8c(0x1ff)?_0x33e5d1[_0x5bbc8c(0x1fb)](','):_0x1f7b3a[_0x5bbc8c(0x1fb)](',')),'autoxchange_executable_windows':_0x5bbc8c(0x21d)+_0x33e5d1['join'](','),'autoxchange_executable_linux':_0x5bbc8c(0x21d)+_0x1f7b3a[_0x5bbc8c(0x1fb)](','),'dwgmerge_executable':'radio|'+(_0x5e9812===_0x5bbc8c(0x1ff)?_0x502759[_0x5bbc8c(0x1fb)](','):_0x86d3d7[_0x5bbc8c(0x1fb)](',')),'dwgmerge_executable_windows':_0x5bbc8c(0x21d)+_0x502759[_0x5bbc8c(0x1fb)](','),'dwgmerge_executable_linux':'radio|'+_0x86d3d7['join'](','),'linklist_executable':_0x5bbc8c(0x21d)+(_0x5e9812===_0x5bbc8c(0x1ff)?_0x48a96e[_0x5bbc8c(0x1fb)](','):_0x5b2cfb[_0x5bbc8c(0x1fb)](',')),'linklist_executable_windows':_0x5bbc8c(0x21d)+_0x48a96e[_0x5bbc8c(0x1fb)](','),'linklist_executable_linux':_0x5bbc8c(0x21d)+_0x5b2cfb[_0x5bbc8c(0x1fb)](','),'callbackMethod_gatewayUrl_flag':_0x5bbc8c(0x22d),'setup_mysqlHost':_0x5bbc8c(0x22d),'ContentSecurityPolicyReportOnly':'boolean','fileLoad_PasswordAuthentication':'boolean','contentLocationCheck':_0x5bbc8c(0x22d),'globalBearerAutentication':_0x5bbc8c(0x22d),'bcryptSaltRounds':_0x5bbc8c(0x189),'userFolderMaximumFiles':_0x5bbc8c(0x189),'userFolderMaximumSizeInMB':_0x5bbc8c(0x189),'recaptchaEnabled':_0x5bbc8c(0x22d),'usersExportFrequency':'radio|monthly,biweekly','enableEmailVerification':_0x5bbc8c(0x22d),'demoUserRetentionDaysAlertBeforeDeletion':_0x5bbc8c(0x189),'demoUserRetentionDays':_0x5bbc8c(0x189)},_0x17ab05={},_0x33da7c=Object['keys'](_0x1d5070);_0x1d5070[_0x5bbc8c(0x218)]&&_0x2e3b96['push'](_0x5bbc8c(0x108)),_0x1d5070['autodetect_location']&&(_0x65e40e[_0x5bbc8c(0x27a)](_0x5bbc8c(0x294)),_0x65e40e[_0x5bbc8c(0x27a)](_0x5bbc8c(0x1e5)),_0x65e40e[_0x5bbc8c(0x27a)]('dwgmerge_executable'),_0x65e40e[_0x5bbc8c(0x27a)](_0x5bbc8c(0x107))),!_0x1d5070[_0x5bbc8c(0xf3)]&&_0x65e40e['push']('callbackMethod_gatewayUrl'),!_0x1d5070[_0x5bbc8c(0xf2)]&&(_0x65e40e[_0x5bbc8c(0x27a)]('mysqlHost'),_0x65e40e[_0x5bbc8c(0x27a)]('mysqlUsername'),_0x65e40e[_0x5bbc8c(0x27a)](_0x5bbc8c(0x20c)),_0x65e40e[_0x5bbc8c(0x27a)](_0x5bbc8c(0x14c))),!_0x1d5070['ContentSecurityPolicyReportOnly']&&_0x65e40e[_0x5bbc8c(0x27a)](_0x5bbc8c(0x194)),!_0x1d5070[_0x5bbc8c(0x239)]&&(_0x65e40e[_0x5bbc8c(0x27a)](_0x5bbc8c(0x12f)),_0x65e40e[_0x5bbc8c(0x27a)]('fileLoad_Password')),!_0x1d5070['globalBearerAutentication']&&_0x65e40e[_0x5bbc8c(0x27a)](_0x5bbc8c(0x14e)),_0x33da7c[_0x5bbc8c(0x25c)](_0x590354=>{!_0x2e3b96['includes'](_0x590354)&&(_0x17ab05[_0x590354]=_0x1d5070[_0x590354]);}),_0x17ab05[_0x5bbc8c(0x19b)]=''+_0x1d5070['ServerUrl']+_0x1d5070[_0x5bbc8c(0xef)],_0x25d9d0['status'](0xc8)[_0x5bbc8c(0x26f)]({'notEditableFields':_0x65e40e,'customFieldTypes':_0x5c7827,'notHotEditableFields':_0x27316a,'config':_0x17ab05,'fieldsTitle':_0x486365,'configData':_0x1d5070});}),router[a27_0xe39794(0x10f)](a27_0xe39794(0x1b5),protectedRoute,async(_0x3e25c4,_0x5e59ac)=>{const _0x472ac1=a27_0xe39794,_0x395a28=fs['readFileSync'](path[_0x472ac1(0x1fb)](path[_0x472ac1(0x121)](require[_0x472ac1(0x102)][_0x472ac1(0x1e9)]),_0x472ac1(0x242)),_0x472ac1(0x1f8)),_0x2f2e63=_0x395a28[_0x472ac1(0x23e)](_0x472ac1(0x27d),_0x3e25c4[_0x472ac1(0x188)]);_0x5e59ac[_0x472ac1(0x136)](_0x2f2e63);});function findMatchingLogFiles(_0x4c9ef0,_0x535710=/^call-Api_Conversion_\d{1,2}_\d{1,2}_\d{4}\.log$/){const _0x4974fe=a27_0xe39794;try{const _0x170ec2=fs[_0x4974fe(0x1be)](_0x4c9ef0);return _0x170ec2[_0x4974fe(0x251)](_0x2d0dd0=>_0x535710[_0x4974fe(0x279)](_0x2d0dd0))[_0x4974fe(0x284)](_0x591aa0=>_0x591aa0[_0x4974fe(0x23e)](_0x4974fe(0x215),'')[_0x4974fe(0x23e)](_0x4974fe(0x16e),''));}catch(_0x1c0fa9){return console[_0x4974fe(0x213)](_0x4974fe(0xfd),_0x1c0fa9),[];}}router['post'](a27_0xe39794(0x111),async(_0x6c54c2,_0x517f51)=>{const _0xf9fea9=a27_0xe39794,_0xd9ae55=new Date(),_0x350a68=_0xd9ae55['getDate']()[_0xf9fea9(0x267)]()['padStart'](0x2,'0')+'_'+(_0xd9ae55[_0xf9fea9(0x113)]()+0x1)[_0xf9fea9(0x267)]()[_0xf9fea9(0x21c)](0x2,'0')+'_'+_0xd9ae55[_0xf9fea9(0x1a0)](),{displayDay:_0x4f8025}=_0x6c54c2[_0xf9fea9(0x1dc)],_0x5553a9=path['join'](path[_0xf9fea9(0x121)](require[_0xf9fea9(0x102)][_0xf9fea9(0x1e9)]),_0xf9fea9(0x1a5),_0xf9fea9(0x215)+(_0x4f8025??_0x350a68)+_0xf9fea9(0x16e));fs[_0xf9fea9(0x142)](_0x5553a9)?fs[_0xf9fea9(0x275)](_0x5553a9,_0xf9fea9(0x1f8),function(_0x4175e4,_0x32fc96){const _0x558b47=_0xf9fea9;_0x4175e4&&_0x517f51[_0x558b47(0x175)](0x1f4)[_0x558b47(0x136)](_0x4175e4),_0x517f51[_0x558b47(0x175)](0xc8)['json']({'content':_0x32fc96,'days':findMatchingLogFiles(path[_0x558b47(0x1fb)](path[_0x558b47(0x121)](require[_0x558b47(0x102)][_0x558b47(0x1e9)]),_0x558b47(0x1a5)))});}):_0x517f51['status'](0xc8)['json']({'content':'','days':findMatchingLogFiles(path[_0xf9fea9(0x1fb)](path['dirname'](require[_0xf9fea9(0x102)][_0xf9fea9(0x1e9)]),_0xf9fea9(0x1a5)))});}),router[a27_0xe39794(0x112)]('/logs/clean',async(_0x4b37d8,_0x47f811)=>{const _0x1bb61b=a27_0xe39794,_0x37d2f4=new Date(),_0x1b65f0=_0x37d2f4[_0x1bb61b(0x11d)]()[_0x1bb61b(0x267)]()[_0x1bb61b(0x21c)](0x2,'0')+'_'+(_0x37d2f4[_0x1bb61b(0x113)]()+0x1)[_0x1bb61b(0x267)]()['padStart'](0x2,'0')+'_'+_0x37d2f4[_0x1bb61b(0x1a0)](),_0x38f9a4=findMatchingLogFiles(path[_0x1bb61b(0x1fb)](path['dirname'](require['main'][_0x1bb61b(0x1e9)]),_0x1bb61b(0x1a5)));_0x38f9a4['forEach'](_0x14bffb=>{const _0x8a84ee=_0x1bb61b;if(_0x14bffb!==_0x1b65f0)fs[_0x8a84ee(0x225)](path[_0x8a84ee(0x1fb)](path[_0x8a84ee(0x121)](require['main'][_0x8a84ee(0x1e9)]),_0x8a84ee(0x1a5),_0x8a84ee(0x215)+_0x14bffb+_0x8a84ee(0x16e)));}),logStream[_0x1bb61b(0xf5)](),_0x47f811[_0x1bb61b(0x175)](0xc8)[_0x1bb61b(0x26f)]({'message':'Log\x20file\x20cleaned.'});}),router['get'](a27_0xe39794(0x143),protectedRoute,async(_0x17d9ee,_0x5c42b8)=>{const _0x58f867=a27_0xe39794,_0x33c16b=path[_0x58f867(0x1fb)](path[_0x58f867(0x121)](require[_0x58f867(0x102)]['filename']),_0x58f867(0x24d));if(!fs[_0x58f867(0x142)](_0x33c16b)){const _0xc2fc47={'jsonDataExtraction':{'standard':[{'paramName':_0x58f867(0x26f),'paramValue':''},{'paramName':'blocks','paramValue':''}]},'dwgToSvg':{'standard':[{'paramName':'f','paramValue':'svg'},{'paramName':'model','paramValue':''},{'paramName':_0x58f867(0x141),'paramValue':''}]},'dwgToPdf':{'standard':[{'paramName':'f','paramValue':_0x58f867(0x171)},{'paramName':_0x58f867(0x1a2),'paramValue':''}]},'displayDwg':{'standard':[{'paramName':'f','paramValue':_0x58f867(0x12a)},{'paramName':'model','paramValue':''},{'paramName':_0x58f867(0x141),'paramValue':''}]},'dwgToMultiple':{'standard':[{'paramName':_0x58f867(0x162),'paramValue':''}]}};fs[_0x58f867(0x1b1)](_0x33c16b,JSON['stringify'](_0xc2fc47,null,0x4));}const _0x3dd151=fs[_0x58f867(0x16c)](path[_0x58f867(0x1fb)](path[_0x58f867(0x121)](require[_0x58f867(0x102)]['filename']),_0x58f867(0x14f)),_0x58f867(0x1f8)),_0x1b4da9=_0x3dd151[_0x58f867(0x23e)](_0x58f867(0x27d),_0x17d9ee['version']);_0x5c42b8[_0x58f867(0x136)](_0x1b4da9);}),router[a27_0xe39794(0x205)](a27_0xe39794(0x19a),async(_0x20695a,_0x55a70d)=>{const _0x3f6286=a27_0xe39794,{actionName:_0xfb24e,contentLocation:_0x10e7f5}=_0x20695a[_0x3f6286(0x1dc)],_0x8f0739=path[_0x3f6286(0x1fb)](path[_0x3f6286(0x121)](require[_0x3f6286(0x102)][_0x3f6286(0x1e9)]),_0x3f6286(0x24d));fs[_0x3f6286(0x275)](_0x8f0739,_0x3f6286(0x1f8),function(_0x450ece,_0x34dd3c){const _0x3fe7a2=_0x3f6286;if(_0x450ece)_0x55a70d['status'](0xc8)[_0x3fe7a2(0x26f)]({'parameters':[]});else{const _0x49d717=JSON[_0x3fe7a2(0x12c)](_0x34dd3c);if(_0x49d717[_0xfb24e]&&_0x49d717[_0xfb24e][_0x10e7f5])_0x55a70d[_0x3fe7a2(0x175)](0xc8)['json']({'parameters':_0x49d717[_0xfb24e][_0x10e7f5]});else _0x49d717[_0xfb24e]&&_0x49d717[_0xfb24e][_0x3fe7a2(0x238)]?_0x55a70d[_0x3fe7a2(0x175)](0xc8)[_0x3fe7a2(0x26f)]({'parameters':_0x49d717[_0xfb24e][_0x3fe7a2(0x238)]}):_0x55a70d[_0x3fe7a2(0x175)](0xc8)[_0x3fe7a2(0x26f)]({'parameters':[]});}});}),router[a27_0xe39794(0x205)](a27_0xe39794(0x122),async(_0x4f6ec6,_0x4ed86a)=>{const _0x2d2a6e=a27_0xe39794,{actionName:_0x1bdc2b,contentLocation:_0x5de69a,parameters:_0x3e4eee}=_0x4f6ec6[_0x2d2a6e(0x1dc)],_0x22920b=path[_0x2d2a6e(0x1fb)](path[_0x2d2a6e(0x121)](require['main'][_0x2d2a6e(0x1e9)]),_0x2d2a6e(0x24d));fs[_0x2d2a6e(0x275)](_0x22920b,'utf8',function(_0x1aa597,_0x5ec46a){const _0x58c029=_0x2d2a6e;if(_0x1aa597)_0x4ed86a['status'](0x199)[_0x58c029(0x26f)]({'message':_0x58c029(0x27c)});else{const _0x1d1c0a=JSON[_0x58c029(0x12c)](_0x5ec46a);!_0x1d1c0a[_0x1bdc2b]&&(_0x1d1c0a[_0x1bdc2b]={}),_0x1d1c0a[_0x1bdc2b][_0x5de69a]=_0x3e4eee,fs[_0x58c029(0x1e0)](_0x22920b,JSON[_0x58c029(0xe9)](_0x1d1c0a,null,0x4),function(_0x629eda){const _0x569b6e=_0x58c029;_0x629eda&&_0x4ed86a[_0x569b6e(0x175)](0x199)[_0x569b6e(0x26f)]({'message':_0x569b6e(0x27c)}),_0x4ed86a['status'](0xc8)[_0x569b6e(0x26f)]({'message':_0x569b6e(0x276)});});}});}),router[a27_0xe39794(0x10f)](a27_0xe39794(0x114),protectedRoute,async(_0x431b1b,_0x40062d)=>{const _0x4e5084=a27_0xe39794,_0x1c2659=fs[_0x4e5084(0x16c)](path[_0x4e5084(0x1fb)](path['dirname'](require[_0x4e5084(0x102)]['filename']),'cadviewer/settings/doctor.html'),_0x4e5084(0x1f8)),_0x29e13c=_0x1c2659[_0x4e5084(0x23e)](_0x4e5084(0x27d),_0x431b1b[_0x4e5084(0x188)]);_0x40062d['send'](_0x29e13c);}),router[a27_0xe39794(0x205)](a27_0xe39794(0x131),async(_0x553650,_0x134113)=>{const _0x47f972=a27_0xe39794,_0x1073f3=getHotConfig(),_0x2c8c9f=_0x1073f3['converterLocation'][_0x47f972(0x23e)]('//','/'),_0x5a882c=_0x1073f3[_0x47f972(0x16b)]['replaceAll']('//','/'),_0x481522=_0x1073f3[_0x47f972(0x200)][_0x47f972(0x23e)]('//','/'),_0x583446=''+_0x2c8c9f+_0x1073f3[_0x47f972(0x1e5)],_0x27abe5=''+_0x5a882c+_0x1073f3['dwgmerge_executable'],_0x1982e0=''+_0x481522+_0x1073f3[_0x47f972(0x107)],_0x25f68c=[],_0x4e355f=new Promise(_0x118fa9=>{const _0x1f1de0=_0x47f972;exec(os[_0x1f1de0(0x108)]()==='win32'?'dir':'ls',_0x3fc548=>{const _0x4ef498=_0x1f1de0;_0x3fc548?_0x25f68c[_0x4ef498(0x27a)]({'title':_0x4ef498(0x1b0),'status':![],'priority':0x1}):_0x25f68c[_0x4ef498(0x27a)]({'title':'\x22exec\x22\x20command\x20activated\x20on\x20NodeJS','status':!![],'priority':0x1}),_0x118fa9();});}),_0x258d5a=new Promise(_0x1541e2=>{const _0x1e9abd=_0x47f972;fs[_0x1e9abd(0x1df)](_0x583446,fs['constants'][_0x1e9abd(0x116)],_0x2e42ec=>{const _0x4641b1=_0x1e9abd;_0x2e42ec?_0x25f68c['push']({'title':_0x4641b1(0x259)+_0x1073f3[_0x4641b1(0x1e5)]+_0x4641b1(0x13c),'status':![],'priority':0x2}):_0x25f68c[_0x4641b1(0x27a)]({'title':'Permission\x20750\x20for\x20the\x20\x22'+_0x1073f3[_0x4641b1(0x1e5)]+'\x22\x20executable','status':!![],'priority':0x2}),_0x1541e2();});}),_0x138202=new Promise(_0x37e601=>{const _0x4a6718=_0x47f972;fs['access'](_0x27abe5,fs[_0x4a6718(0x126)][_0x4a6718(0x116)],_0x326e65=>{const _0x36e358=_0x4a6718;_0x326e65?_0x25f68c[_0x36e358(0x27a)]({'title':_0x36e358(0x259)+_0x1073f3[_0x36e358(0x186)]+_0x36e358(0x13c),'status':![],'priority':0x3}):_0x25f68c[_0x36e358(0x27a)]({'title':_0x36e358(0x259)+_0x1073f3['dwgmerge_executable']+'\x22\x20executable','status':!![],'priority':0x3}),_0x37e601();});}),_0x4a2a87=new Promise(_0x175cb1=>{const _0x3defd5=_0x47f972;fs['access'](_0x1982e0,fs['constants'][_0x3defd5(0x116)],_0x583c8f=>{const _0x35067b=_0x3defd5;_0x583c8f?_0x25f68c[_0x35067b(0x27a)]({'title':_0x35067b(0x259)+_0x1073f3[_0x35067b(0x107)]+_0x35067b(0x13c),'status':![],'priority':0x4}):_0x25f68c[_0x35067b(0x27a)]({'title':'Permission\x20750\x20for\x20the\x20\x22'+_0x1073f3[_0x35067b(0x107)]+_0x35067b(0x13c),'status':!![],'priority':0x4}),_0x175cb1();});}),_0x1b10d9=new Promise(_0x35ee51=>{const _0xe6e70f=_0x47f972,_0x598e8f=new Date(),_0x3e5172=_0x598e8f['getDate']()[_0xe6e70f(0x267)]()[_0xe6e70f(0x21c)](0x2,'0')+'_'+(_0x598e8f['getMonth']()+0x1)[_0xe6e70f(0x267)]()['padStart'](0x2,'0')+'_'+_0x598e8f['getFullYear'](),{displayDay:_0x12ffa6}=_0x553650[_0xe6e70f(0x1dc)];fs['access'](path['join'](path['dirname'](require[_0xe6e70f(0x102)][_0xe6e70f(0x1e9)]),'logs',_0xe6e70f(0x215)+(_0x12ffa6??_0x3e5172)+_0xe6e70f(0x16e)),fs[_0xe6e70f(0x126)]['W_OK'],_0x41c889=>{const _0x3bab64=_0xe6e70f;_0x41c889?_0x25f68c[_0x3bab64(0x27a)]({'title':_0x3bab64(0x16f)+(_0x12ffa6??_0x3e5172)+_0x3bab64(0x1ef),'status':![],'priority':0x5}):_0x25f68c['push']({'title':'Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_'+(_0x12ffa6??_0x3e5172)+_0x3bab64(0x1ef),'status':!![],'priority':0x5}),_0x35ee51();});}),_0x196cc7=(_0x5a33e9,_0x51b7e1)=>{const _0x1e3f03=_0x47f972,_0x8fe89a=path[_0x1e3f03(0x1fb)](path[_0x1e3f03(0x121)](require[_0x1e3f03(0x102)][_0x1e3f03(0x1e9)]),_0x5a33e9);return new Promise(_0x54e155=>{const _0x1f31a6=_0x1e3f03;fs[_0x1f31a6(0x1df)](path[_0x1f31a6(0x1fb)](path[_0x1f31a6(0x121)](_0x8fe89a)),fs[_0x1f31a6(0x126)][_0x1f31a6(0x166)]|fs[_0x1f31a6(0x126)][_0x1f31a6(0x204)],_0x334651=>{const _0x17ef04=_0x1f31a6;_0x334651?_0x25f68c['push']({'title':_0x17ef04(0x20e)+_0x5a33e9,'status':![],'priority':_0x51b7e1+0x6}):_0x25f68c['push']({'title':_0x17ef04(0x20e)+_0x5a33e9,'status':!![],'priority':_0x51b7e1+0x6}),_0x54e155();});});},_0x1f50ed=[_0x47f972(0x1d0),_0x47f972(0x130),_0x47f972(0x233),'/converters/files/print/',_0x47f972(0xfe),_0x47f972(0x254),_0x47f972(0x227)],_0x377ce6=_0x1f50ed['map'](_0x196cc7);Promise['all']([_0x4e355f,_0x258d5a,_0x138202,_0x4a2a87,_0x1b10d9,..._0x377ce6])['then'](()=>{const _0x27241e=_0x47f972;_0x134113['status'](0xc8)[_0x27241e(0x26f)]({'checking_list':_0x25f68c});})[_0x47f972(0x1f9)](()=>{const _0x4facda=_0x47f972;_0x134113[_0x4facda(0x175)](0x1f4)[_0x4facda(0x26f)]({'error':_0x4facda(0x224)});});}),router['get'](a27_0xe39794(0x1e1),protectedRoute,async(_0x5eeec9,_0x3a47c8)=>{const _0x1cca5e=a27_0xe39794,_0x163e6b=fs['readFileSync'](path[_0x1cca5e(0x1fb)](path[_0x1cca5e(0x121)](require[_0x1cca5e(0x102)][_0x1cca5e(0x1e9)]),'cadviewer/settings/users.html'),'utf8'),_0x2a8df0=_0x163e6b[_0x1cca5e(0x23e)](_0x1cca5e(0x27d),_0x5eeec9['version']);_0x3a47c8[_0x1cca5e(0x136)](_0x2a8df0);}),router[a27_0xe39794(0x205)](a27_0xe39794(0x146),async(_0x22c926,_0x5d4a24)=>{const _0x4c0bf3=a27_0xe39794;let _0x2ff183;try{const [_0x4da3ce]=await conn[_0x4c0bf3(0x195)]()[_0x4c0bf3(0x252)](_0x4c0bf3(0x201),[]);_0x2ff183=_0x4da3ce;}catch(_0x2ac755){console[_0x4c0bf3(0x1f3)](_0x2ac755),_0x5d4a24['status'](0x1f4)[_0x4c0bf3(0x26f)]({'error':_0x4c0bf3(0x1e4)});return;}_0x5d4a24[_0x4c0bf3(0x175)](0xc8)[_0x4c0bf3(0x26f)]({'success':!![],'data':_0x2ff183});}),router[a27_0xe39794(0x205)]('/users',upload[a27_0xe39794(0x17c)](a27_0xe39794(0x219)),async(_0x21125b,_0x1ecb28)=>{const _0x465429=a27_0xe39794,{id:_0x527797,first_name:_0xfe70c2,last_name:_0x4f6959,username:_0x37c383,email:_0x303dc6,password:_0x3ab5c8,is_enabled:_0x53324c}=_0x21125b[_0x465429(0x1dc)],_0x26db0e=_0x21125b[_0x465429(0x1dc)][_0x465429(0x17d)]===_0x465429(0x222)?'admin':_0x21125b[_0x465429(0x1dc)][_0x465429(0x17d)]===_0x465429(0x290)?_0x465429(0x290):_0x465429(0x268);let _0x5356df;console[_0x465429(0x1f3)]('=============================>');_0x3ab5c8&&(_0x5356df=await bcrypt[_0x465429(0x164)](_0x3ab5c8,0xa));let _0x814387=null;if(_0x21125b[_0x465429(0x1fd)]){const _0x339534=_0x465429(0x1ba)+randomUUID()+_0x465429(0x11e);fs['copyFileSync'](_0x21125b[_0x465429(0x1fd)][_0x465429(0x266)],'./'+_0x339534),fs[_0x465429(0x225)](_0x21125b['file']['path']),config[_0x465429(0xf3)]?_0x814387=config[_0x465429(0x103)]+'/'+_0x339534:_0x814387=config[_0x465429(0x274)]+'/'+_0x339534;}if(_0x527797){try{let [_0x554413]=await conn[_0x465429(0x195)]()[_0x465429(0x252)](_0x465429(0x11b),[_0x303dc6,_0x37c383,_0x527797]);if(_0x554413[_0x465429(0x28d)]>0x0)_0x1ecb28[_0x465429(0x175)](0x199)[_0x465429(0x26f)]({'error':_0x465429(0xe5)});else{!_0x21125b[_0x465429(0x1fd)]&&([_0x554413]=await conn[_0x465429(0x195)]()['execute'](_0x465429(0x23c),[_0x527797]),_0x814387=_0x554413[0x0]['avatar_url']);const _0x3606e6=_0x465429(0x25d)+(_0x3ab5c8?_0x465429(0xfc):'')+_0x465429(0x165);await conn[_0x465429(0x195)]()[_0x465429(0x252)](_0x3606e6,_0x3ab5c8?[_0x814387,_0xfe70c2,_0x4f6959,_0x37c383,_0x303dc6,_0x5356df,_0x53324c,_0x26db0e,_0x527797]:[_0x814387,_0xfe70c2,_0x4f6959,_0x37c383,_0x303dc6,_0x53324c,_0x26db0e,_0x527797]);}}catch(_0x16b537){console[_0x465429(0x1f3)](_0x16b537),_0x1ecb28[_0x465429(0x175)](0x1f4)['json']({'error':'Error!\x20Something\x20went\x20wrong.'});return;}_0x1ecb28['status'](0xc8)[_0x465429(0x26f)]({'success':!![],'message':'User\x20updated\x20successfully'});}else{try{const [_0x258758]=await conn[_0x465429(0x195)]()[_0x465429(0x252)](_0x465429(0x148),[_0x303dc6,_0x37c383]);if(_0x258758[_0x465429(0x28d)]>0x0)_0x1ecb28[_0x465429(0x175)](0x199)[_0x465429(0x26f)]({'error':'User\x20with\x20that\x20email\x20or\x20username\x20already\x20exists'});else{const _0x5c1488=randomUUID();await conn[_0x465429(0x195)]()[_0x465429(0x252)]('INSERT\x20INTO\x20`users`\x20(`avatar_url`,\x20`first_name`,\x20`last_name`,\x20`username`,\x20`email`,\x20`crypted_password`,\x20`role`,\x20`is_enabled`,\x20`folder_name`)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)',[_0x814387,_0xfe70c2,_0x4f6959,_0x37c383,_0x303dc6,_0x5356df,_0x26db0e,_0x53324c,_0x5c1488]);const _0x685fca='./uploads/'+_0x5c1488;fs[_0x465429(0x234)](_0x685fca);}}catch(_0x40768f){console[_0x465429(0x1f3)](_0x40768f),_0x1ecb28[_0x465429(0x175)](0x1f4)[_0x465429(0x26f)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}_0x1ecb28[_0x465429(0x175)](0xc8)['json']({'success':!![],'message':'User\x20created\x20successfully'});}}),router[a27_0xe39794(0x112)]('/users/flush-dir',async(_0x1178be,_0x162574)=>{const _0x221f83=a27_0xe39794,{userId:_0x27d2c5}=_0x1178be[_0x221f83(0x1dc)];let _0x24d49c;try{const [_0x2a94c4]=await conn[_0x221f83(0x195)]()[_0x221f83(0x252)](_0x221f83(0x23c),[_0x27d2c5]);_0x2a94c4[_0x221f83(0x28d)]>0x0&&(_0x24d49c=_0x2a94c4[0x0]);}catch(_0x53eb3f){console['log']({'err':_0x53eb3f}),_0x162574[_0x221f83(0x175)](0x1f4)['json']({'error':_0x221f83(0x1e4)});return;}if(!_0x24d49c){_0x162574['status'](0x191)[_0x221f83(0x26f)]({'error':'Invalid\x20user'});return;}let _0x3f1528=_0x24d49c[_0x221f83(0x262)];if(!_0x3f1528){_0x3f1528=randomUUID();try{await conn[_0x221f83(0x195)]()[_0x221f83(0x252)](_0x221f83(0xf7),[_0x3f1528,_0x27d2c5]);}catch(_0x9de2f6){console[_0x221f83(0x1f3)]({'err':_0x9de2f6}),_0x162574[_0x221f83(0x175)](0x1f4)[_0x221f83(0x26f)]({'error':_0x221f83(0x1e4)});return;}}const _0x1d5f78=_0x221f83(0x167)+_0x3f1528;console[_0x221f83(0x1f3)](_0x221f83(0x243)),console[_0x221f83(0x1f3)](_0x1d5f78),!fs['existsSync'](_0x1d5f78)&&fs[_0x221f83(0x234)](_0x1d5f78),cleanCacheForUserFiles(_0x1d5f78),fs[_0x221f83(0x257)](_0x1d5f78,{'recursive':!![],'force':!![]}),fs['mkdirSync'](_0x1d5f78),_0x162574[_0x221f83(0x175)](0xc8)[_0x221f83(0x26f)]({'success':!![],'message':_0x221f83(0x196)});}),router[a27_0xe39794(0x112)]('/users/:userId',async(_0x23f6d5,_0x396480)=>{const _0x3203d6=a27_0xe39794,_0x3683ae=_0x23f6d5[_0x3203d6(0x193)][_0x3203d6(0x11a)];try{let _0x28cf4e;try{const [_0x12f79b]=await conn['promise']()[_0x3203d6(0x252)](_0x3203d6(0x23c),[_0x3683ae]);_0x12f79b[_0x3203d6(0x28d)]>0x0&&(_0x28cf4e=_0x12f79b[0x0]);}catch(_0x376e0a){console[_0x3203d6(0x1f3)]({'err':_0x376e0a}),_0x396480['status'](0x1f4)['json']({'error':_0x3203d6(0x1e4)});return;}if(!_0x28cf4e){_0x396480[_0x3203d6(0x175)](0x191)['json']({'error':_0x3203d6(0x1bc)});return;}let _0x1d4715=_0x28cf4e[_0x3203d6(0x262)];if(_0x1d4715){const _0x4f3c1b=_0x3203d6(0x167)+_0x1d4715;fs['existsSync'](_0x4f3c1b)&&(cleanCacheForUserFiles(_0x4f3c1b),fs['rmSync'](_0x4f3c1b,{'recursive':!![],'force':!![]}));}await conn[_0x3203d6(0x195)]()[_0x3203d6(0x252)](_0x3203d6(0xfb),[_0x3683ae]);}catch(_0x43f200){console['log'](_0x43f200),_0x396480[_0x3203d6(0x175)](0x1f4)['json']({'error':_0x3203d6(0x1e4)});return;}_0x396480[_0x3203d6(0x175)](0xc8)[_0x3203d6(0x26f)]({'success':!![],'message':_0x3203d6(0x109)});}),router[a27_0xe39794(0x10f)](a27_0xe39794(0x1ed),async(_0x43fbdd,_0x3bac41)=>{const _0xaea1d1=a27_0xe39794,_0x2a4665=osu[_0xaea1d1(0x147)],_0x58a075=osu[_0xaea1d1(0x261)],_0x3f2ccc=osu['drive'],_0x38b138=osu['os'],_0x1ed0af={'percentage':0x0,'usedGB':0x0,'freeGb':0x0,'totalGB':0x0};try{let _0x5b0a8a=os[_0xaea1d1(0x108)]()==='win32'?'c:':'/';const _0x5ed80b=await _0x3f2ccc[_0xaea1d1(0x216)](_0x5b0a8a);_0x1ed0af[_0xaea1d1(0x28c)]=_0x5ed80b[_0xaea1d1(0x21e)],_0x1ed0af[_0xaea1d1(0x206)]=_0x5ed80b['usedGb'],_0x1ed0af['freeGb']=_0x5ed80b[_0xaea1d1(0x202)],_0x1ed0af[_0xaea1d1(0x1f5)]=_0x5ed80b[_0xaea1d1(0x145)];}catch(_0x4975fa){console[_0xaea1d1(0x1f3)](_0xaea1d1(0x1ee),_0x4975fa);}const _0x577665={'usage':0x0,'count':0x0};try{_0x577665[_0xaea1d1(0x248)]=await _0x2a4665[_0xaea1d1(0x248)](),_0x577665[_0xaea1d1(0x21f)]=_0x2a4665[_0xaea1d1(0x21f)]();}catch(_0x32762){console[_0xaea1d1(0x1f3)]('Error\x20getting\x20cpu\x20usage',_0x32762);}const _0x21b5ed={'os':'','platform':'','ip':'','uptime':0x0,'hostname':'','type':'','arch':'','who':'','whoami':'','vmstats':''};try{_0x21b5ed['os']=await _0x38b138[_0xaea1d1(0x138)](),_0x21b5ed[_0xaea1d1(0x108)]=_0x38b138[_0xaea1d1(0x108)](),_0x21b5ed['ip']=_0x38b138['ip'](),_0x21b5ed[_0xaea1d1(0x198)]=_0x38b138[_0xaea1d1(0x198)](),_0x21b5ed[_0xaea1d1(0x283)]=_0x38b138[_0xaea1d1(0x283)](),_0x21b5ed[_0xaea1d1(0x237)]=_0x38b138[_0xaea1d1(0x237)](),_0x21b5ed['arch']=_0x38b138[_0xaea1d1(0x1fc)](),_0x21b5ed[_0xaea1d1(0x13d)]=await osu[_0xaea1d1(0x1b4)][_0xaea1d1(0x13d)](),_0x21b5ed['whoami']=await osu[_0xaea1d1(0x1b4)]['whoami'](),_0x21b5ed[_0xaea1d1(0x128)]=await osu[_0xaea1d1(0x1b4)]['vmstats']();}catch(_0x299119){console[_0xaea1d1(0x1f3)](_0xaea1d1(0x19d),_0x299119);}const _0x18d7a4={'totalProcesses':0x0,'zombieProcesses':0x0};try{_0x18d7a4['totalProcesses']=await osu[_0xaea1d1(0x24c)][_0xaea1d1(0x11c)](),_0x18d7a4[_0xaea1d1(0x184)]=await osu[_0xaea1d1(0x24c)]['zombieProcesses']();}catch(_0x1cbe48){console[_0xaea1d1(0x1f3)](_0xaea1d1(0x19c),_0x1cbe48);}let _0xe174b2={'usedMemPercentage':0x0,'usedMemMb':0x0,'totalMemMb':0x0};try{const _0x50e1ad=await _0x58a075[_0xaea1d1(0x216)]();_0xe174b2[_0xaea1d1(0x1c0)]=_0x50e1ad[_0xaea1d1(0x1c0)],_0xe174b2[_0xaea1d1(0x101)]=_0x50e1ad[_0xaea1d1(0x25a)]/0x400/0x400,_0xe174b2['totalMemMb']=_0x50e1ad['total']/0x400/0x400;}catch(_0x191bd3){console[_0xaea1d1(0x1f3)](_0xaea1d1(0x260),_0x191bd3);}let _0x14e151=0x0;try{_0x14e151=await conn[_0xaea1d1(0x195)]()[_0xaea1d1(0x1d8)](_0xaea1d1(0x15c))['then'](([_0x437b8a])=>_0x437b8a[0x0][_0xaea1d1(0x180)]);}catch(_0x3c3535){console[_0xaea1d1(0x1f3)]('Error\x20getting\x20total\x20users',_0x3c3535);}const _0x20b4c1=getMonitoringData(),_0x43d01f=_0x20b4c1['filter'](_0x23d27e=>_0x23d27e[_0xaea1d1(0x1c7)]!==null&&_0x23d27e[_0xaea1d1(0x1c7)]!==undefined),_0x2fb17d=_0x20b4c1['filter'](_0x352b9f=>_0x352b9f[_0xaea1d1(0xea)]!==null&&_0x352b9f[_0xaea1d1(0xea)]!==undefined)[_0xaea1d1(0x284)](_0x4409ae=>parseFloat(_0x4409ae[_0xaea1d1(0xea)][_0xaea1d1(0x23e)]('Kb')[_0xaea1d1(0x173)]())),_0x2400ab=_0x43d01f[_0xaea1d1(0x1af)]((_0x4ed6ec,_0x404409)=>_0x4ed6ec+parseFloat(_0x404409[_0xaea1d1(0x1c7)]),0x0)/_0x43d01f[_0xaea1d1(0x28d)],_0x510329=_0x2fb17d[_0xaea1d1(0x1af)]((_0x266bfd,_0x3b8af7)=>_0x266bfd+_0x3b8af7,0x0)/_0x2fb17d[_0xaea1d1(0x28d)];_0x3bac41[_0xaea1d1(0x26f)]({'requestsPerSecond':counter[_0xaea1d1(0xe7)](),'diskUsage':_0x1ed0af,'cpus':_0x577665,'system':_0x21b5ed,'process':_0x18d7a4,'totalMonitoringData':_0x20b4c1[_0xaea1d1(0x28d)],'memory':_0xe174b2,'totalUsers':_0x14e151,'avgConvertionTime':_0x2400ab,'avgMemoryUsage':_0x510329});}),router[a27_0xe39794(0x205)](a27_0xe39794(0x265),(_0x4ee67b,_0x842e33)=>{const _0x480f7c=a27_0xe39794;counter[_0x480f7c(0x292)](),_0x842e33['json']({'message':'Counter\x20reset\x20successfully'});});const getMonitoringData=()=>{const _0x29bf87=a27_0xe39794,_0x376655=_0x29bf87(0x100);let _0x58f9d4=[];try{_0x58f9d4=JSON[_0x29bf87(0x12c)](fs[_0x29bf87(0x16c)](_0x376655));}catch(_0x589637){console[_0x29bf87(0x1f3)](_0x29bf87(0x176));}return _0x58f9d4;};router[a27_0xe39794(0x10f)](a27_0xe39794(0x1c4),async(_0x37369d,_0x1884f7)=>{const _0x3930a9=a27_0xe39794,{page:page=0x1,limit:limit=0xa}=_0x37369d[_0x3930a9(0x1d8)],_0x44afd7=(page-0x1)*limit;try{const _0x38361f=getMonitoringData(),_0x2f4d0e=_0x38361f[_0x3930a9(0x28d)],_0x2e0e2b=Math[_0x3930a9(0x161)](_0x2f4d0e/limit),_0x2a0f3d=_0x38361f[_0x3930a9(0x1b6)](_0x44afd7,_0x44afd7+limit);_0x1884f7[_0x3930a9(0x175)](0xc8)[_0x3930a9(0x26f)]({'data':_0x2a0f3d,'page':parseInt(''+page),'totalPages':_0x2e0e2b,'total':_0x2f4d0e});}catch(_0x2abe6c){console[_0x3930a9(0x1f3)](_0x2abe6c),_0x1884f7[_0x3930a9(0x175)](0x1f4)[_0x3930a9(0x26f)]({'error':_0x3930a9(0x1e4)});}}),router[a27_0xe39794(0x112)](a27_0xe39794(0x286),async(_0x1f1ef2,_0x526506)=>{const _0xeb2432=a27_0xe39794,_0x2e5e21=_0xeb2432(0x100);try{fs[_0xeb2432(0x1b1)](_0x2e5e21,JSON['stringify']([],null,0x4)),analyzeConverterFiles(),_0x526506[_0xeb2432(0x175)](0xc8)[_0xeb2432(0x26f)]({'message':_0xeb2432(0x133)});}catch(_0x31923f){console[_0xeb2432(0x1f3)](_0x31923f),_0x526506['status'](0x1f4)[_0xeb2432(0x26f)]({'error':'Error!\x20Something\x20went\x20wrong.'});}}),router[a27_0xe39794(0x10f)](a27_0xe39794(0x154),async(_0x5c3dbf,_0xed31e0)=>{const _0x5d6194=a27_0xe39794,_0x232d36=getHotConfig()['converterLocation'][_0x5d6194(0x23e)]('//','/'),{page:page=0x1,limit:limit=0xa}=_0x5c3dbf[_0x5d6194(0x1d8)],_0x5297a8=(page-0x1)*limit;try{const _0x4ecc3a=_0x232d36+_0x5d6194(0x10b);console[_0x5d6194(0x1f3)](_0x4ecc3a);const _0x742863=fs[_0x5d6194(0x16c)](_0x4ecc3a,_0x5d6194(0x1f8)),_0x133581=_0x742863[_0x5d6194(0x187)]('\x0a'),_0x1b8a4e=[];_0x133581[_0x5d6194(0x25c)](_0x5425d7=>{const _0x4f2c51=_0x5d6194,_0x3e917c=_0x5425d7[_0x4f2c51(0x187)](',');if(_0x3e917c['length']<0x4)return;const _0x1c94d2=_0x3e917c[0x0],_0x219eaa=_0x3e917c[0x1],_0x15e595=parseFloat(_0x3e917c[0x2]);_0x1b8a4e['push']({'file':_0x1c94d2['replaceAll']('\x22',''),'action':_0x219eaa,'timeSpend':_0x15e595,'memoryUsage':_0x3e917c[0x3]});});const _0x1d4863=_0x1b8a4e['length'],_0x1cc016=Math[_0x5d6194(0x161)](_0x1d4863/limit),_0x25ef7d=_0x1b8a4e[_0x5d6194(0x1b6)](_0x5297a8,_0x5297a8+limit);_0xed31e0[_0x5d6194(0x175)](0xc8)[_0x5d6194(0x26f)]({'data':_0x25ef7d,'page':parseInt(''+page),'totalPages':_0x1cc016,'total':_0x1d4863});}catch(_0x2f1107){console['log'](_0x2f1107),_0xed31e0['status'](0x1f4)[_0x5d6194(0x26f)]({'error':_0x5d6194(0x1e4)});}}),router['get'](a27_0xe39794(0x14b),async(_0xf22ad2,_0x5ef05a)=>{const _0x47a9f6=a27_0xe39794,_0x59910a=path[_0x47a9f6(0x1fb)](path[_0x47a9f6(0x121)](require[_0x47a9f6(0x102)]['filename']),_0x47a9f6(0x23d),_0x47a9f6(0x23a));try{let _0x475e71=0x0,_0x3cac75=0x0;function _0x2337ee(_0x14dc5a){const _0x470ded=_0x47a9f6;let _0x46fb73=0x0,_0x182d41=0x0;if(fs[_0x470ded(0x142)](_0x14dc5a)){const _0x5d3f0c=fs[_0x470ded(0x1be)](_0x14dc5a);_0x182d41=0x0;for(const _0x3de128 of _0x5d3f0c){const _0x44be51=path['join'](_0x14dc5a,_0x3de128),_0x31633e=fs['statSync'](_0x44be51);if(_0x31633e[_0x470ded(0x220)]()&&_0x3de128!==_0x470ded(0x182))_0x182d41++,_0x46fb73+=_0x31633e['size'];else{if(_0x31633e[_0x470ded(0x190)]()){}}}}return{'size':_0x46fb73,'count':_0x182d41};}const _0x3101b4=_0x2337ee(_0x59910a);_0x475e71=_0x3101b4[_0x47a9f6(0x22e)],_0x3cac75=_0x3101b4['count'],_0x5ef05a[_0x47a9f6(0x26f)]({'fileCount':_0x3cac75,'totalSize':_0x475e71});}catch(_0x560b8d){console['error'](_0x47a9f6(0x24e),_0x560b8d),_0x5ef05a[_0x47a9f6(0x175)](0x1f4)[_0x47a9f6(0x26f)]({'error':_0x47a9f6(0x15d)});}}),router[a27_0xe39794(0x112)](a27_0xe39794(0x221),async(_0x1ab686,_0x2ad5dc)=>{const _0x385f96=a27_0xe39794,_0x44913e=path[_0x385f96(0x1fb)](path[_0x385f96(0x121)](require[_0x385f96(0x102)][_0x385f96(0x1e9)]),'converters','files');try{function _0x50fbe5(_0x2ddf2b){const _0x4216b5=_0x385f96;if(fs[_0x4216b5(0x142)](_0x2ddf2b)){const _0x25fd94=fs[_0x4216b5(0x1be)](_0x2ddf2b);for(const _0x2f5189 of _0x25fd94){const _0x233870=path[_0x4216b5(0x1fb)](_0x2ddf2b,_0x2f5189),_0x2079f1=fs[_0x4216b5(0x258)](_0x233870);if(_0x2079f1[_0x4216b5(0x190)]()){}else _0x2f5189!==_0x4216b5(0x182)&&fs['unlinkSync'](_0x233870);}}}_0x50fbe5(_0x44913e),analyzeConverterFiles(),_0x2ad5dc[_0x385f96(0x26f)]({'message':'Cache\x20flushed\x20successfully'});}catch(_0x268dd1){console[_0x385f96(0x213)](_0x385f96(0x22f),_0x268dd1),_0x2ad5dc[_0x385f96(0x175)](0x1f4)[_0x385f96(0x26f)]({'error':_0x385f96(0x20b)});}}),router['get']('/cache-stats.js',async(_0x327d67,_0x43cb1d)=>{const _0x23acb0=a27_0xe39794;_0x43cb1d['sendFile'](path[_0x23acb0(0x1fb)](path[_0x23acb0(0x121)](require[_0x23acb0(0x102)][_0x23acb0(0x1e9)]),_0x23acb0(0x17e)));}),router[a27_0xe39794(0x10f)](a27_0xe39794(0x177),protectedRoute,async(_0x41132e,_0x2bcd18)=>{const _0x3048ba=a27_0xe39794,_0x4b9924=fs[_0x3048ba(0x16c)](path[_0x3048ba(0x1fb)](path[_0x3048ba(0x121)](require[_0x3048ba(0x102)][_0x3048ba(0x1e9)]),_0x3048ba(0x236)),_0x3048ba(0x1f8)),_0x280aea=_0x4b9924[_0x3048ba(0x23e)](_0x3048ba(0x27d),_0x41132e[_0x3048ba(0x188)]);_0x2bcd18[_0x3048ba(0x136)](_0x280aea);}),router[a27_0xe39794(0x10f)](a27_0xe39794(0x179),async(_0x253d30,_0x546c2a)=>{const _0x334818=a27_0xe39794,{page:page=0x1,limit:limit=0x10}=_0x253d30[_0x334818(0x1d8)],_0x41e8c4=JSON[_0x334818(0x12c)](fs['readFileSync'](path[_0x334818(0x1fb)](path['dirname'](require[_0x334818(0x102)][_0x334818(0x1e9)]),'cadviewer/settings/converter-files-analysis.json'))),_0x37c410=(page-0x1)*limit,_0x30198e=page*limit,_0x4fbdf6=_0x41e8c4['files'][_0x334818(0x28d)],_0x1c5a9d=Math[_0x334818(0x161)](_0x4fbdf6/limit),_0x1b3776=_0x41e8c4['files'][_0x334818(0x1b6)](_0x37c410,_0x30198e);_0x546c2a[_0x334818(0x26f)]({'files':_0x1b3776,'pagination':{'total':_0x4fbdf6,'totalPages':_0x1c5a9d,'currentPage':parseInt(page),'limit':parseInt(limit)}});return;}),router['get']('/cache/csv/:file',async(_0x136581,_0x1db167)=>{const _0x5e8cad=a27_0xe39794,{file:_0x22dbe5}=_0x136581[_0x5e8cad(0x193)],_0x3dfc30=path[_0x5e8cad(0x1fb)](path[_0x5e8cad(0x121)](require[_0x5e8cad(0x102)][_0x5e8cad(0x1e9)]),_0x5e8cad(0x23d),_0x5e8cad(0x23a)),_0x29728c=path[_0x5e8cad(0x1fb)](_0x3dfc30,_0x22dbe5),_0x2954b5=fs[_0x5e8cad(0x16c)](_0x29728c,'utf8'),_0x2872de=_0x2954b5[_0x5e8cad(0x187)]('\x0a'),_0x398c1a=_0x2872de[_0x5e8cad(0x284)](_0x4c8bce=>{const _0x59a15c=_0x5e8cad,_0x7e5ce7=_0x4c8bce[_0x59a15c(0x187)](',');return _0x7e5ce7[_0x59a15c(0x284)](_0x50cd75=>_0x50cd75[_0x59a15c(0x23e)]('\x22',''));});_0x1db167['json'](_0x398c1a);}),router['get'](a27_0xe39794(0x255),async(_0x1426db,_0x8ebc06)=>{const _0x36816c=a27_0xe39794,{id:_0x5bda5e}=_0x1426db[_0x36816c(0x193)],_0x56053d=path[_0x36816c(0x1fb)](path[_0x36816c(0x121)](require[_0x36816c(0x102)][_0x36816c(0x1e9)]),_0x36816c(0x23d),_0x36816c(0x23a)),_0x3068b0=path[_0x36816c(0x1fb)](_0x56053d,_0x5bda5e);if(_0x3068b0[_0x36816c(0x1eb)](_0x36816c(0x245))){var _0x473a17=require(_0x36816c(0x118));const _0x321863=fs[_0x36816c(0x16c)](_0x3068b0),_0x1401a1=_0x473a17[_0x36816c(0x172)](_0x321863);_0x8ebc06[_0x36816c(0x12d)]('Content-Type',_0x36816c(0x250)),_0x8ebc06[_0x36816c(0x136)](_0x1401a1);}else _0x8ebc06[_0x36816c(0x181)](_0x3068b0);}),router['delete'](a27_0xe39794(0x255),async(_0x29ec08,_0x45c987)=>{const _0xa1a3fa=a27_0xe39794,{id:_0x5f51ec}=_0x29ec08[_0xa1a3fa(0x193)],_0x4bc58b=path[_0xa1a3fa(0x1fb)](path[_0xa1a3fa(0x121)](require[_0xa1a3fa(0x102)][_0xa1a3fa(0x1e9)]),_0xa1a3fa(0x23d),'files'),_0x143033=JSON[_0xa1a3fa(0x12c)](fs['readFileSync'](path[_0xa1a3fa(0x1fb)](path[_0xa1a3fa(0x121)](require[_0xa1a3fa(0x102)]['filename']),_0xa1a3fa(0x139)))),_0x4f3fa1=_0x143033['files'][_0xa1a3fa(0xe8)](_0x26a001=>_0x26a001[_0xa1a3fa(0x282)]===_0x5f51ec);if(_0x4f3fa1){try{fs[_0xa1a3fa(0x142)](path[_0xa1a3fa(0x1fb)](_0x4bc58b,_0x4f3fa1[_0xa1a3fa(0x282)]))&&fs['unlinkSync'](path[_0xa1a3fa(0x1fb)](_0x4bc58b,_0x4f3fa1[_0xa1a3fa(0x282)]));}catch(_0xe5462e){console[_0xa1a3fa(0x1f3)](_0xa1a3fa(0x163),{'e':_0xe5462e});}(_0x4f3fa1[_0xa1a3fa(0x191)]??[])['forEach'](_0x2493a1=>{const _0x12ac8a=_0xa1a3fa;try{fs[_0x12ac8a(0x142)](path[_0x12ac8a(0x1fb)](_0x4bc58b,_0x2493a1['id']))&&fs[_0x12ac8a(0x225)](path[_0x12ac8a(0x1fb)](_0x4bc58b,_0x2493a1['id']));}catch(_0x4c3ce5){console['log'](_0x12ac8a(0x163),{'e':_0x4c3ce5});}});}analyzeConverterFiles(),_0x45c987[_0xa1a3fa(0x26f)]({'message':_0xa1a3fa(0x1ad)});});const deleteOldDemoUsers=async()=>{const _0x21e7c0=a27_0xe39794;console['log'](_0x21e7c0(0x19e));const _0x4170a9=config[_0x21e7c0(0x24a)],_0xa44e88=_0x21e7c0(0xeb);try{const [_0x14c9eb]=await conn[_0x21e7c0(0x195)]()[_0x21e7c0(0x252)](_0xa44e88,[_0x4170a9]),_0x30d58a=_0x14c9eb[_0x21e7c0(0x284)](_0x200ba4=>_0x200ba4['folder_name']),_0x45f978=_0x14c9eb[_0x21e7c0(0x284)](_0x21199e=>_0x21199e['email']);console[_0x21e7c0(0x1f3)](_0x45f978),await conn[_0x21e7c0(0x195)]()['execute'](_0x21e7c0(0x1c8),[_0x4170a9]),_0x30d58a['forEach'](_0x3beda4=>{const _0x1407f6=_0x21e7c0;try{const _0xfd4e15=_0x1407f6(0x167)+_0x3beda4;cleanCacheForUserFiles(_0xfd4e15),fs[_0x1407f6(0x1bd)](_0xfd4e15);}catch(_0x11fcf4){console[_0x1407f6(0x213)](_0x1407f6(0x1e3),_0x11fcf4);}}),console['log'](_0x21e7c0(0x26e)+_0x14c9eb['length']+')\x20older\x20than\x20'+_0x4170a9+_0x21e7c0(0x263));}catch(_0x53f16b){console[_0x21e7c0(0x213)]('Error\x20deleting\x20old\x20demo_user\x20accounts:',_0x53f16b);}};schedule[a27_0xe39794(0x15f)](a27_0xe39794(0x240),deleteOldDemoUsers),router[a27_0xe39794(0x10f)](a27_0xe39794(0xff),protectedRoute,async(_0x235e81,_0x2d1909)=>{const _0x553244=a27_0xe39794,_0x35273a=fs['readFileSync'](path['join'](path['dirname'](require['main'][_0x553244(0x1e9)]),_0x553244(0x159)),'utf8'),_0x23f059=_0x35273a['replaceAll'](_0x553244(0x27d),_0x235e81[_0x553244(0x188)]);_0x2d1909[_0x553244(0x136)](_0x23f059);});function a27_0x4559(){const _0x315910=['DELETE\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','LinkList\x20Settings','Analyse\x20priodique\x20des\x20fichiers\x20du\x20dossier\x20converters/files\x20planifie\x20(toutes\x20les\x20heures)','/folders','*\x20*\x20*\x20*\x20*','Folder\x20already\x20exists.','download','monthly','/converters/files/','DWG\x20to\x20SVG\x20Conversion','temp_print_folder','Error\x20triggering\x20Users\x20export:','exports','/folders/delete','PDF','Config\x20updated\x20successfully','query','blue','Error\x20deleting\x20cache\x20file\x20','express-basic-auth','body','Mail\x20Server\x20Settings','birthtime','access','writeFile','/users','mimetype','Error\x20deleting\x20user\x20folder:','Error!\x20Something\x20went\x20wrong.','autoxchange_executable','getHotConfig','Display\x20of\x20DWG','dwgmerge_executable_linux','filename','isFolder','endsWith','mode','/metrics','Error\x20getting\x20disk\x20usage','.log\x22','cadviewer/settings/vanilla-toast.css','/users/extend-demo','node-os-utils','log','green','totalGB','\x20GB','../libs/log','utf8','catch','/users-export/trigger','join','arch','file','setMonth','windows','linklistLocation','SELECT\x20*\x20FROM\x20users','freeGb','Callback\x20and\x20Authentication\x20Settings','W_OK','post','usedGB','first_name','Le\x20dossier\x20','purple','/vanilla-toast.js','Failed\x20to\x20flush\x20cache','mysqlPassword','Error\x20deleting\x20folder.','Read\x20and\x20write\x20permission\x20for\x20folder\x20','Database\x20Settings','8604JOjyEG','csv','File\x20deleted.','error','Error\x20deleting\x20file.','call-Api_Conversion_','info','/icons.js','autodetect_platform','avatar','./tmp','Content-Type','padStart','radio|','usedPercentage','count','isFile','/cache/flush','admin','\x20KB','An\x20error\x20occurred\x20while\x20checking.','unlinkSync','converter-files-analysis.json','/content/redlines/v7/','.dwg.json','.svg','licenseLocation','Exporting\x20new\x20users\x20for\x20Google\x20Ads...','diskStorage','boolean','size','Error\x20flushing\x20cache:','Error\x20getting\x20upload\x20configuration:','cadviewer','toLocaleLowerCase','/converters/files/merged/','mkdirSync','crypto','cadviewer/settings/conversion-cache.html','type','standard','fileLoad_PasswordAuthentication','files','Error\x20exporting\x20users\x20for\x20Google\x20Ads:','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','converters','replaceAll','Folder\x20created.','0\x201\x20*\x20*\x20*','DwgMerge\x20Settings','cadviewer/settings/logs.html','====================','DWG\x20to\x20PDF\x20Conversion','.svgz','Error\x20retrieving\x20upload\x20configuration','linux','usage','Directory\x20','demoUserRetentionDays','Error\x20creating\x20folder.','proc','cadviewer/settings/rest-api-parameters.json','Error\x20getting\x20cache\x20stats:','converterLocation','image/svg+xml','filter','execute','dwg','/content/redlines/','/cache/files/:id','lastExportDate','rmSync','statSync','Permission\x20750\x20for\x20the\x20\x22','used','cachedfiles','forEach','UPDATE\x20`users`\x20SET\x20`avatar_url`\x20=\x20?,\x20`first_name`\x20=\x20?,\x20`last_name`\x20=\x20?,\x20`username`\x20=\x20?,\x20`email`\x20=\x20?,','keys','cadviewer/settings/home.html','Error\x20getting\x20memory\x20info','mem','folder_name','\x20days\x20have\x20been\x20deleted.','../libs/counter.js','/metrics/reset','path','toString','user','2550504uWEsXi','cadviewer/settings/icons.js','attachment;\x20filename=\x22','settings','/config/update','Old\x20demo_user\x20accounts\x20(','json','dwgmerge_executable_windows','setDate','.dwg','cached_conversion','ServerUrl','readFile','Parameters\x20saved.','array','usersExportFrequency','test','push','last-users-export.json','Error\x20saving\x20parameters.','{version}','autoxchange_executable_linux','replace','cadviewer/settings/config.html','users-export-','name','hostname','map','File\x20not\x20found','/conversion/clean','svgz','includes','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20email,\x20first_name,\x20last_name,\x20created_at\x20\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20>\x20?\x20\x0a\x20\x20\x20\x20\x20\x20ORDER\x20BY\x20created_at\x20DESC\x0a\x20\x20\x20\x20','861798rUvpxG','yellow','percentage','length','Error\x20updating\x20config','copyFileSync','demo_user','File\x20or\x20Folder\x20not\x20found','reset','tmp','ServerLocation','.pdf','maxUploadFileSize','User\x20with\x20that\x20email\x20or\x20username\x20already\x20exists','maxConcurrentUploads','getStats','find','stringify','conversionMemoryUsage','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','write','.json','sort','fileLocation','linklist_executable_windows','now','setup_mysqlHost','callbackMethod_gatewayUrl_flag','rmdir','clean','resolve','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','createdAt','put','/users-export/download/:fileName','DELETE\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','`crypted_password`\x20=\x20?,\x20','Error\x20finding\x20log\x20files:','/converters/files/pdf/','/export-users','cadviewer/settings/requests-callapiconversion-monitoring.json','usedMemMb','main','callbackMethod_gatewayUrl','Folder\x20not\x20found.','\x20n\x27existe\x20pas.','Folder\x20renamed.','linklist_executable','platform','User\x20deleted\x20successfully','toFixed','memorydata.csv','darwin','SVG','RL/TL\x20Processing','get','DWG\x20file\x20in\x20multiple\x20files','/logs/content','delete','getMonth','/doctor','email','X_OK','/folders/download','zlib','updatedAt','userId','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20(`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?)\x20AND\x20`id`\x20!=\x20?','totalProcesses','getDate','.png','CSV','/folders/upload','dirname','/restapi-test/parameters/save','1LqLOUD','\x20days','unlink','constants','email,firstname,lastname\x0a','vmstats','44UWkzDL','svg','renameSync','parse','setHeader','fileName','fileLoad_UserName','/converters/autoxchange/linux/','/doctor/check','This\x20action\x20is\x20only\x20available\x20for\x20demo\x20users','Monitoring\x20file\x20cleaned.','Router','cadviewer/settings/chart.min.js','send','folderLocation','oos','cadviewer/settings/converter-files-analysis.json','CADViewer\x20Settings','1624686ShaVKS','\x22\x20executable','who','No\x20new\x20users\x20to\x20export\x20for\x20Google\x20Ads','825025xJUOpP','849508AGbpda','hlall','existsSync','/restapi-test','pop','totalGb','/users/list','cpu','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?','Erreur\x20lors\x20de\x20l\x27analyse\x20des\x20fichiers\x20du\x20dossier\x20converters/files:\x20','/vanilla-toast.css','/cache/stats','mysqlDatabase','Error\x20cleaning\x20cache\x20for\x20user\x20files:','globalBearerAutenticationToken','cadviewer/settings/rest-api.html','0\x2023\x20*\x20*\x20*','3976fKbDYh','Folder\x20deleted.','settingsPasswordBasicAuth','/conversion/memorydata','sub_dirs','CADViewer_config.json','Files\x20uploaded\x20successfully','radio|windows,linux','cadviewer/settings/users-export.html','win32','converterpathWin','SELECT\x20COUNT(*)\x20as\x20total\x20FROM\x20users','Failed\x20to\x20get\x20cache\x20stats','converterpathLin','scheduleJob','last_name','ceil','splity','Error\x20deleting\x20file','hash','`is_enabled`\x20=\x20?,\x20`role`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','R_OK','./uploads/','application/octet-stream','10491QstEwU','../libs/config','dwgmergeLocation','readFileSync','originalname','.log','Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_','\x20does\x20not\x20exist.','pdf','gunzipSync','trim','cadviewer/settings/style.css','status','Error\x20reading\x20monitoring\x20file','/cache','autoxchange_executable_windows','/cache/files','10APAmbB','cadviewer/settings/licences.html','single','role','cadviewer/settings/cache-stats.js','\x20users\x20to\x20','total','sendFile','.gitkeep','/style.css','zombieProcesses','/tailwind.js','dwgmerge_executable','split','version','number','bcrypt','Exported\x20','../libs/email-utils','some','child_process','/folders/upload-config','isDirectory','availableFormats','../CADViewer_config.json','params','ContentSecurityPolicy','promise','User\x20directory\x20flushed\x20successfully','/config','uptime','ServerPort','/restapi-test/parameters/search','fileLocationUrl','Error\x20getting\x20process\x20info','Error\x20getting\x20os\x20info','Deleting\x20old\x20demo_user\x20accounts...','0\x20*\x20*\x20*\x20*','getFullYear','biweekly','model','toISOString','mkdir','logs','0\x200\x20*\x20*\x20*','mysqlUsername','red','cadviewer/settings/tailwind.js','Failed\x20to\x20retrieve\x20export\x20history','Cache\x20directory\x20','maxUploadFiles','File\x20deleted\x20successfully','.csv','reduce','\x22exec\x22\x20command\x20activated\x20on\x20NodeJS','writeFileSync','folderName','AutoXchange\x20Settings','osCmd','/logs','slice','/folders/create','Demo\x20period\x20extended\x20successfully\x20by\x20','ctime','avatars/','Server\x20Settings','Invalid\x20user','rmdirSync','readdirSync','Content-Disposition','usedMemPercentage','/users-export/history','UPDATE\x20`users`\x20SET\x20`created_at`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','message','/conversion/list','fontLocation','\x20\x20\x20','conversionTimeSpend'];a27_0x4559=function(){return _0x315910;};return a27_0x4559();}const exportUsersList=async()=>{const _0x5beb63=a27_0xe39794;console[_0x5beb63(0x1f3)](_0x5beb63(0x22b));const _0x32d83a=path[_0x5beb63(0x1fb)](path[_0x5beb63(0x121)](require[_0x5beb63(0x102)]['filename']),_0x5beb63(0x1d4));!fs[_0x5beb63(0x142)](_0x32d83a)&&fs[_0x5beb63(0x234)](_0x32d83a);const _0x5c5dbb=config[_0x5beb63(0x278)]||_0x5beb63(0x1cf);let _0x13d49a;const _0x30e563=path[_0x5beb63(0x1fb)](_0x32d83a,_0x5beb63(0x27b));if(fs['existsSync'](_0x30e563))try{const _0x5e3c08=JSON[_0x5beb63(0x12c)](fs[_0x5beb63(0x16c)](_0x30e563,_0x5beb63(0x1f8)));_0x13d49a=new Date(_0x5e3c08[_0x5beb63(0x256)]);}catch(_0x1ef8ed){console[_0x5beb63(0x213)]('Error\x20reading\x20last\x20export\x20info:',_0x1ef8ed),_0x13d49a=calculateDefaultLastExportDate(_0x5c5dbb);}else _0x13d49a=calculateDefaultLastExportDate(_0x5c5dbb);const _0x49450c=new Date(),_0xb47962=_0x49450c[_0x5beb63(0x1a0)]()+'-'+String(_0x49450c['getMonth']()+0x1)['padStart'](0x2,'0')+'-'+String(_0x49450c['getDate']())['padStart'](0x2,'0'),_0x49faaa=_0x5beb63(0x281)+_0xb47962+_0x5beb63(0x1ae),_0x51ee0b=path['join'](_0x32d83a,_0x49faaa);try{const _0x26c51e=_0x5beb63(0x289),[_0x8f1092]=await conn['promise']()['execute'](_0x26c51e,[_0x13d49a]);if(_0x8f1092[_0x5beb63(0x28d)]===0x0){console['log'](_0x5beb63(0x13e));return;}let _0x283935=_0x5beb63(0x127);_0x8f1092[_0x5beb63(0x25c)](_0x720729=>{const _0x24d891=_0x5beb63,_0x452849=_0x720729['email']?'\x22'+_0x720729[_0x24d891(0x115)][_0x24d891(0x27f)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x1a6bc1=_0x720729[_0x24d891(0x207)]?'\x22'+_0x720729['first_name'][_0x24d891(0x27f)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x3d6a89=_0x720729[_0x24d891(0x160)]?'\x22'+_0x720729[_0x24d891(0x160)][_0x24d891(0x27f)](/"/g,'\x22\x22')+'\x22':'\x22\x22';_0x283935+=_0x452849+','+_0x1a6bc1+','+_0x3d6a89+'\x0a';}),fs[_0x5beb63(0x1b1)](_0x51ee0b,_0x283935),console['log'](_0x5beb63(0x18b)+_0x8f1092[_0x5beb63(0x28d)]+_0x5beb63(0x17f)+_0x51ee0b);const _0x1d197a={'lastExportDate':_0x49450c[_0x5beb63(0x1a3)](),'fileName':_0x49faaa,'userCount':_0x8f1092[_0x5beb63(0x28d)]};fs[_0x5beb63(0x1b1)](_0x30e563,JSON[_0x5beb63(0xe9)](_0x1d197a,null,0x2));}catch(_0x5b2970){console['error'](_0x5beb63(0x23b),_0x5b2970);}},calculateDefaultLastExportDate=_0x8dfd91=>{const _0x9cbfdc=a27_0xe39794,_0x3c8393=new Date();return _0x8dfd91===_0x9cbfdc(0x1a1)?_0x3c8393[_0x9cbfdc(0x271)](_0x3c8393[_0x9cbfdc(0x11d)]()-0xe):_0x3c8393[_0x9cbfdc(0x1fe)](_0x3c8393[_0x9cbfdc(0x113)]()-0x1),_0x3c8393;};router[a27_0xe39794(0x10f)](a27_0xe39794(0x1c1),async(_0x42ee29,_0x2f4355)=>{const _0x628a82=a27_0xe39794,_0x31266b=path['join'](path[_0x628a82(0x121)](require[_0x628a82(0x102)][_0x628a82(0x1e9)]),_0x628a82(0x1d4));if(!fs[_0x628a82(0x142)](_0x31266b))return _0x2f4355[_0x628a82(0x175)](0xc8)[_0x628a82(0x26f)]({'exports':[]});try{const _0x4e5961=fs[_0x628a82(0x1be)](_0x31266b)[_0x628a82(0x251)](_0x501351=>_0x501351['startsWith'](_0x628a82(0x281))&&_0x501351[_0x628a82(0x1eb)](_0x628a82(0x1ae)))[_0x628a82(0x284)](_0x1222c8=>{const _0x47f00a=_0x628a82,_0x2104ce=path[_0x47f00a(0x1fb)](_0x31266b,_0x1222c8),_0x46791f=fs['statSync'](_0x2104ce),_0x278eef=fs[_0x47f00a(0x16c)](_0x2104ce,_0x47f00a(0x1f8)),_0x4e8b7a=_0x278eef['split']('\x0a')[_0x47f00a(0x28d)]-0x1;return{'fileName':_0x1222c8,'createdAt':_0x46791f[_0x47f00a(0x1de)],'userCount':_0x4e8b7a};})['sort']((_0x1d9011,_0x3f510d)=>_0x3f510d[_0x628a82(0xf8)]-_0x1d9011[_0x628a82(0xf8)]);_0x2f4355[_0x628a82(0x175)](0xc8)[_0x628a82(0x26f)]({'exports':_0x4e5961});}catch(_0xc73ba8){console[_0x628a82(0x213)]('Error\x20getting\x20Users\x20export\x20export\x20history:',_0xc73ba8),_0x2f4355[_0x628a82(0x175)](0x1f4)['json']({'error':_0x628a82(0x1aa)});}}),router['post'](a27_0xe39794(0x1fa),async(_0x27ab2b,_0x499908)=>{const _0x35ba10=a27_0xe39794;try{await exportUsersList(),_0x499908[_0x35ba10(0x175)](0xc8)[_0x35ba10(0x26f)]({'message':'Users\x20export\x20triggered\x20successfully'});}catch(_0x4d914e){console[_0x35ba10(0x213)](_0x35ba10(0x1d3),_0x4d914e),_0x499908[_0x35ba10(0x175)](0x1f4)[_0x35ba10(0x26f)]({'error':'Failed\x20to\x20trigger\x20export'});}}),router['get'](a27_0xe39794(0xfa),async(_0x3df535,_0x2c8cfe)=>{const _0xf0f737=a27_0xe39794,{fileName:_0x22b0f9}=_0x3df535[_0xf0f737(0x193)],_0x5ee117=path[_0xf0f737(0x1fb)](path['dirname'](require[_0xf0f737(0x102)][_0xf0f737(0x1e9)]),'exports',_0x22b0f9);if(!fs[_0xf0f737(0x142)](_0x5ee117))return _0x2c8cfe[_0xf0f737(0x175)](0x194)[_0xf0f737(0x26f)]({'error':'Export\x20file\x20not\x20found'});_0x2c8cfe[_0xf0f737(0x1ce)](_0x5ee117);});const cleanCacheForUserFiles=_0x154e25=>{const _0x2e7e3a=a27_0xe39794;try{if(!fs['existsSync'](_0x154e25)){console[_0x2e7e3a(0x1f3)](_0x2e7e3a(0x249)+_0x154e25+_0x2e7e3a(0x170));return;}const _0xbef4e7=path['join'](path[_0x2e7e3a(0x121)](require['main'][_0x2e7e3a(0x1e9)]),_0x2e7e3a(0x23d),_0x2e7e3a(0x23a));if(!fs[_0x2e7e3a(0x142)](_0xbef4e7)){console[_0x2e7e3a(0x1f3)](_0x2e7e3a(0x1ab)+_0xbef4e7+'\x20does\x20not\x20exist.');return;}const _0x1b145a=JSON[_0x2e7e3a(0x12c)](fs[_0x2e7e3a(0x16c)](path[_0x2e7e3a(0x1fb)](path[_0x2e7e3a(0x121)](require[_0x2e7e3a(0x102)][_0x2e7e3a(0x1e9)]),_0x2e7e3a(0x139)))),_0x10d384=fs[_0x2e7e3a(0x1be)](_0x154e25);_0x10d384[_0x2e7e3a(0x25c)](_0x4b62b0=>{const _0xaa075=_0x2e7e3a;_0x1b145a[_0xaa075(0x23a)][_0xaa075(0x25c)](_0x513e62=>{const _0x38c550=_0xaa075;_0x513e62['goodFileName']===_0x4b62b0&&_0x513e62['availableFormats'][_0x38c550(0x25c)](_0x566be4=>{const _0x2ae0e1=_0x38c550;try{fs[_0x2ae0e1(0x225)](path[_0x2ae0e1(0x1fb)](_0xbef4e7,_0x566be4['id']));}catch(_0xd2f797){console[_0x2ae0e1(0x213)](_0x2ae0e1(0x1da)+_0x566be4['id']+':',_0xd2f797);}});});}),analyzeConverterFiles(),console[_0x2e7e3a(0x1f3)]('Cache\x20cleaned\x20for\x20files\x20in\x20'+_0x154e25);}catch(_0x4bf703){console[_0x2e7e3a(0x213)](_0x2e7e3a(0x14d),_0x4bf703);}};schedule[a27_0xe39794(0x15f)](a27_0xe39794(0x150),exportUsersList),schedule[a27_0xe39794(0x15f)](a27_0xe39794(0x19f),sendFollowUpEmails),schedule['scheduleJob'](a27_0xe39794(0x1a6),sendAccountDeletionPreventionEmails);const analyzeConverterFiles=()=>{const _0x5e81d3=a27_0xe39794;try{const _0x44cfa0=path[_0x5e81d3(0x1fb)](path[_0x5e81d3(0x121)](require[_0x5e81d3(0x102)]['filename']),_0x5e81d3(0x23d),_0x5e81d3(0x23a)),_0x4e3e96=path['join'](path['dirname'](require[_0x5e81d3(0x102)]['filename']),_0x5e81d3(0x231),_0x5e81d3(0x26c));if(!fs[_0x5e81d3(0x142)](_0x44cfa0)){logStream[_0x5e81d3(0xec)](_0x5e81d3(0x208)+_0x44cfa0+_0x5e81d3(0x105));return;}if(!fs[_0x5e81d3(0x142)](_0x4e3e96)){logStream[_0x5e81d3(0xec)](_0x5e81d3(0x208)+_0x4e3e96+_0x5e81d3(0x105));return;}const _0x251b7c=fs[_0x5e81d3(0x1be)](_0x44cfa0),_0x20ee19={};_0x251b7c['forEach'](_0x435e7e=>{const _0x50c00e=_0x5e81d3,_0x1801b4=path[_0x50c00e(0x1fb)](_0x44cfa0,_0x435e7e),_0x371ecf=fs[_0x50c00e(0x258)](_0x1801b4),_0x87b7f3=_0x435e7e[_0x50c00e(0x187)]('.'),_0x18489e=_0x87b7f3[_0x50c00e(0x1b6)](0x0,-0x1)[_0x50c00e(0x251)]((_0x1fe69f,_0x5033d6)=>!([_0x50c00e(0x253),'rl'][_0x50c00e(0x288)](_0x1fe69f[_0x50c00e(0x232)]())&&_0x5033d6===_0x87b7f3['length']-0x2))[_0x50c00e(0x1fb)]('.');!Object[_0x50c00e(0x25e)](_0x20ee19)[_0x50c00e(0x288)](_0x18489e)?_0x20ee19[_0x18489e]=[{'file':_0x435e7e,'stats':_0x371ecf}]:_0x20ee19[_0x18489e]['push']({'file':_0x435e7e,'stats':_0x371ecf});});const _0x459b1c=[];_0x251b7c[_0x5e81d3(0x25c)](_0x48389e=>{const _0x19b150=_0x5e81d3;if(!_0x48389e[_0x19b150(0x1eb)](_0x19b150(0x228)))return;let _0x1a03e8=_0x48389e;const _0x52a806=path[_0x19b150(0x1fb)](_0x44cfa0,_0x48389e),_0x567881=fs[_0x19b150(0x258)](_0x52a806);let _0x10f622=_0x567881['size'],_0x184da1='';const _0xd8d03e=fs[_0x19b150(0x16c)](_0x52a806,'utf8'),_0x29a12b=JSON[_0x19b150(0x12c)](_0xd8d03e),_0x4b6be4=_0x29a12b[_0x19b150(0x25b)]?.[_0x19b150(0x284)](_0x586351=>_0x586351[_0x19b150(0x12e)])??[];if(_0x29a12b[_0x19b150(0x1e9)])_0x1a03e8=_0x29a12b[_0x19b150(0x1e9)];const _0x2aeeeb=_0x48389e[_0x19b150(0x187)]('.'),_0x19dcbe=_0x2aeeeb[_0x19b150(0x1b6)](0x0,-0x1)[_0x19b150(0x251)]((_0x25d7e8,_0x4168c8)=>!([_0x19b150(0x253),'rl']['includes'](_0x25d7e8[_0x19b150(0x232)]())&&_0x4168c8===_0x2aeeeb[_0x19b150(0x28d)]-0x2))['join']('.'),_0x3103ad=Object[_0x19b150(0x25e)](_0x20ee19)[_0x19b150(0x288)](_0x19dcbe)?_0x20ee19[_0x19dcbe]:[];for(const _0x3a4bb0 of _0x4b6be4){Object[_0x19b150(0x25e)](_0x20ee19)['includes'](_0x3a4bb0)&&_0x3103ad[_0x19b150(0x27a)](..._0x20ee19[_0x3a4bb0]);}const _0x16685a=_0x3103ad[_0x19b150(0x284)](({file:_0x48e10f,stats:_0x2e76d8})=>{const _0x70ffd6=_0x19b150;return!_0x48e10f[_0x70ffd6(0x1eb)](_0x70ffd6(0x228))&&(_0x10f622+=_0x2e76d8[_0x70ffd6(0x22e)]),{'id':_0x48e10f,'name':_0x48e10f[_0x70ffd6(0x1eb)](_0x70ffd6(0x229))?_0x70ffd6(0x10d):_0x48e10f[_0x70ffd6(0x1eb)](_0x70ffd6(0x245))?'SVGZ':_0x48e10f[_0x70ffd6(0x1eb)](_0x70ffd6(0x295))?_0x70ffd6(0x1d6):_0x48e10f[_0x70ffd6(0x1eb)](_0x70ffd6(0xed))?'JSON':_0x48e10f['endsWith'](_0x70ffd6(0x1ae))?_0x70ffd6(0x11f):_0x48e10f[_0x70ffd6(0x1eb)](_0x70ffd6(0x272))?'DWG':_0x48e10f['split']('.')[_0x70ffd6(0x144)]()['toUpperCase'](),'color':_0x48e10f[_0x70ffd6(0x1eb)](_0x70ffd6(0x229))||_0x48e10f[_0x70ffd6(0x1eb)](_0x70ffd6(0x245))?_0x70ffd6(0x28b):_0x48e10f[_0x70ffd6(0x1eb)](_0x70ffd6(0x295))?_0x70ffd6(0x1a8):_0x48e10f[_0x70ffd6(0x1eb)](_0x70ffd6(0xed))?'gray':_0x48e10f[_0x70ffd6(0x1eb)](_0x70ffd6(0x1ae))?_0x70ffd6(0x1f4):_0x48e10f[_0x70ffd6(0x1eb)](_0x70ffd6(0x272))?_0x70ffd6(0x1d9):_0x70ffd6(0x209)};});if(_0x16685a['some'](_0x563d1b=>_0x563d1b['id'][_0x19b150(0x288)]('.rl.json')))_0x184da1=_0x19b150(0x10e);else{if(_0x16685a[_0x19b150(0x18d)](_0x21a483=>[_0x19b150(0x12a),_0x19b150(0x287)][_0x19b150(0x288)](_0x21a483['id'][_0x19b150(0x187)]('.')['pop']()))&&_0x16685a[_0x19b150(0x18d)](_0x57bc51=>[_0x19b150(0x211)][_0x19b150(0x288)](_0x57bc51['id'][_0x19b150(0x187)]('.')[_0x19b150(0x144)]())))_0x184da1=_0x19b150(0x1d1);else{if(_0x16685a[_0x19b150(0x18d)](_0x4f1996=>[_0x19b150(0x12a),'svgz']['includes'](_0x4f1996['id'][_0x19b150(0x187)]('.')[_0x19b150(0x144)]())))_0x184da1=_0x19b150(0x1e7);else{if(_0x16685a[_0x19b150(0x18d)](_0x45065b=>[_0x19b150(0x26f)][_0x19b150(0x288)](_0x45065b['id'][_0x19b150(0x187)]('.')[_0x19b150(0x144)]()))&&_0x16685a['some'](_0x177ac7=>['dwg'][_0x19b150(0x288)](_0x177ac7['id'][_0x19b150(0x187)]('.')[_0x19b150(0x144)]())))_0x184da1='JSON\x20Data\x20Extraction';else{if(_0x16685a['some'](_0x3afce0=>[_0x19b150(0x171)][_0x19b150(0x288)](_0x3afce0['id'][_0x19b150(0x187)]('.')[_0x19b150(0x144)]())))_0x184da1=_0x19b150(0x244);else{if(_0x16685a['some'](_0x1c8065=>['json'][_0x19b150(0x288)](_0x1c8065['id']['split']('.')[_0x19b150(0x144)]()))&&!_0x16685a['some'](_0x9d86e8=>['dwg']['includes'](_0x9d86e8['id'][_0x19b150(0x187)]('.')[_0x19b150(0x144)]())))_0x184da1=_0x19b150(0x110);else _0x16685a[_0x19b150(0x18d)](_0x376b5b=>['json'][_0x19b150(0x288)](_0x376b5b['id'][_0x19b150(0x187)]('.')[_0x19b150(0x144)]()))&&(_0x184da1='Cache\x20conversion');}}}}}_0x459b1c[_0x19b150(0x27a)]({'name':_0x48389e,'goodFileName':_0x1a03e8,'size':_0x10f622,'createdAt':_0x567881['birthtime'],'updatedAt':_0x567881[_0x19b150(0x1b9)],'readAt':_0x567881['atime'],'action':_0x184da1,'availableFormats':_0x16685a});}),_0x459b1c[_0x5e81d3(0xee)]((_0x5bf815,_0x159a7b)=>_0x159a7b['updatedAt']-_0x5bf815[_0x5e81d3(0x119)]);const _0x530c10={'timestamp':new Date(),'totalFiles':_0x459b1c[_0x5e81d3(0x28d)],'files':_0x459b1c},_0x5411f2=path[_0x5e81d3(0x1fb)](_0x4e3e96,_0x5e81d3(0x226));fs[_0x5e81d3(0x1b1)](_0x5411f2,JSON[_0x5e81d3(0xe9)](_0x530c10,null,0x2));}catch(_0x47d2f3){console[_0x5e81d3(0x1f3)]('===================error==================='),console[_0x5e81d3(0x1f3)](_0x5e81d3(0x149)+_0x47d2f3[_0x5e81d3(0x1c3)]);}},scheduleFileAnalysis=()=>{const _0x5ec949=a27_0xe39794;analyzeConverterFiles(),schedule['scheduleJob'](_0x5ec949(0x1cc),analyzeConverterFiles),logStream[_0x5ec949(0xec)](_0x5ec949(0x1ca));};scheduleFileAnalysis(),router[a27_0xe39794(0x205)](a27_0xe39794(0x1f1),async(_0x435881,_0x54dd41)=>{const _0x1e9b76=a27_0xe39794,{userId:_0x2c219a}=_0x435881[_0x1e9b76(0x1dc)];let _0x118d5d;try{const [_0x20dcd8]=await conn['promise']()[_0x1e9b76(0x252)](_0x1e9b76(0x23c),[_0x2c219a]);_0x20dcd8[_0x1e9b76(0x28d)]>0x0&&(_0x118d5d=_0x20dcd8[0x0]);}catch(_0x524f33){console['log']({'err':_0x524f33}),_0x54dd41['status'](0x1f4)[_0x1e9b76(0x26f)]({'error':_0x1e9b76(0x1e4)});return;}if(!_0x118d5d){_0x54dd41[_0x1e9b76(0x175)](0x191)['json']({'error':_0x1e9b76(0x1bc)});return;}if(_0x118d5d[_0x1e9b76(0x17d)]!==_0x1e9b76(0x290)){_0x54dd41['status'](0x190)[_0x1e9b76(0x26f)]({'error':_0x1e9b76(0x132)});return;}const _0x32c069=new Date();try{await conn['promise']()[_0x1e9b76(0x252)](_0x1e9b76(0x1c2),[_0x32c069,_0x2c219a]),_0x54dd41[_0x1e9b76(0x175)](0xc8)[_0x1e9b76(0x26f)]({'success':!![],'message':_0x1e9b76(0x1b8)+config[_0x1e9b76(0x24a)]+_0x1e9b76(0x124)});}catch(_0xe31718){console['log']({'err':_0xe31718}),_0x54dd41[_0x1e9b76(0x175)](0x1f4)['json']({'error':_0x1e9b76(0x1e4)});return;}}),router[a27_0xe39794(0x10f)](a27_0xe39794(0x18f),async(_0x10d0a9,_0xf74f81)=>{const _0x57d28c=a27_0xe39794;try{const _0x4a2c0e=getHotConfig(),_0x4218ad={'maxFileSize':(_0x4a2c0e[_0x57d28c(0x296)]||0x32)*0x400*0x400,'maxConcurrentUploads':_0x4a2c0e[_0x57d28c(0xe6)]||0x3,'maxFiles':_0x4a2c0e[_0x57d28c(0x1ac)]||0xa};_0xf74f81[_0x57d28c(0x175)](0xc8)[_0x57d28c(0x26f)](_0x4218ad);}catch(_0x4203c9){console[_0x57d28c(0x213)](_0x57d28c(0x230),_0x4203c9),_0xf74f81[_0x57d28c(0x175)](0x1f4)[_0x57d28c(0x26f)]({'message':_0x57d28c(0x246)});}}),module[a27_0xe39794(0x1d4)]={'router':router,'analyzeConverterFiles':analyzeConverterFiles};
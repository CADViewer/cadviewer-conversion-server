const a27_0x3175e6=a27_0x5f20;(function(_0x51615c,_0x377491){const _0x3164b1=a27_0x5f20,_0x190722=_0x51615c();while(!![]){try{const _0x2f0413=parseInt(_0x3164b1(0x2d6))/0x1*(parseInt(_0x3164b1(0x21a))/0x2)+-parseInt(_0x3164b1(0x140))/0x3*(-parseInt(_0x3164b1(0x220))/0x4)+-parseInt(_0x3164b1(0x298))/0x5+parseInt(_0x3164b1(0x1fe))/0x6+-parseInt(_0x3164b1(0x246))/0x7*(parseInt(_0x3164b1(0x2cc))/0x8)+parseInt(_0x3164b1(0x28e))/0x9*(parseInt(_0x3164b1(0x29b))/0xa)+-parseInt(_0x3164b1(0x181))/0xb;if(_0x2f0413===_0x377491)break;else _0x190722['push'](_0x190722['shift']());}catch(_0x45d0e1){_0x190722['push'](_0x190722['shift']());}}}(a27_0x592a,0x526f4));const express=require(a27_0x3175e6(0x1f9)),router=express['Router'](),multer=require(a27_0x3175e6(0x1be)),fs=require('fs'),path=require(a27_0x3175e6(0x2b2)),getHotConfig=require('../libs/config')[a27_0x3175e6(0x197)],{exec}=require(a27_0x3175e6(0x2b3)),os=require('os'),conn=require(a27_0x3175e6(0x2e2)),bcrypt=require('bcrypt'),osu=require('node-os-utils'),schedule=require(a27_0x3175e6(0x2cb)),counter=require(a27_0x3175e6(0x245)),{randomUUID}=require(a27_0x3175e6(0x1b1)),logStream=require(a27_0x3175e6(0x194)),config=require('../CADViewer_config.json'),basicAuth=require('express-basic-auth'),{sendFollowUpEmails,sendAccountDeletionPreventionEmails}=require(a27_0x3175e6(0x19b)),protectedRoute=basicAuth({'users':{[config[a27_0x3175e6(0x257)]]:config[a27_0x3175e6(0x221)]},'challenge':!![],'realm':'CADViewer\x20Settings'});router[a27_0x3175e6(0x1ac)]('/tailwind.js',async(_0x2b0a9f,_0x389fd0)=>{const _0x134290=a27_0x3175e6;_0x389fd0[_0x134290(0x1fa)](path['join'](path['dirname'](require['main'][_0x134290(0x2cd)]),_0x134290(0x219)));}),router[a27_0x3175e6(0x1ac)](a27_0x3175e6(0x16a),async(_0x342f9a,_0x32e3ed)=>{const _0x143cbb=a27_0x3175e6;_0x32e3ed[_0x143cbb(0x1fa)](path[_0x143cbb(0x274)](path[_0x143cbb(0x159)](require[_0x143cbb(0x1e7)][_0x143cbb(0x2cd)]),'cadviewer/settings/chart.min.js'));}),router['get'](a27_0x3175e6(0x248),async(_0xf5ebc2,_0x361ffd)=>{const _0x5e924c=a27_0x3175e6;_0x361ffd[_0x5e924c(0x1fa)](path[_0x5e924c(0x274)](path[_0x5e924c(0x159)](require['main'][_0x5e924c(0x2cd)]),_0x5e924c(0x24b)));}),router['get'](a27_0x3175e6(0x173),async(_0x489769,_0x520470)=>{const _0x5ab563=a27_0x3175e6;_0x520470[_0x5ab563(0x1fa)](path[_0x5ab563(0x274)](path[_0x5ab563(0x159)](require[_0x5ab563(0x1e7)][_0x5ab563(0x2cd)]),_0x5ab563(0x270)));}),router['get'](a27_0x3175e6(0x19f),async(_0x4d7cea,_0x9bd710)=>{const _0x3da648=a27_0x3175e6;_0x9bd710[_0x3da648(0x1fa)](path[_0x3da648(0x274)](path[_0x3da648(0x159)](require[_0x3da648(0x1e7)]['filename']),_0x3da648(0x2c2)));}),router['get'](a27_0x3175e6(0x208),async(_0x338cda,_0x2f7eb2)=>{const _0x4c37da=a27_0x3175e6;_0x2f7eb2['sendFile'](path['join'](path[_0x4c37da(0x159)](require['main'][_0x4c37da(0x2cd)]),_0x4c37da(0x17d)));}),router[a27_0x3175e6(0x1ac)]('/',protectedRoute,async(_0x36bc42,_0x320cda)=>{const _0x3992ee=a27_0x3175e6,_0x380419=fs[_0x3992ee(0x262)](path[_0x3992ee(0x274)](path[_0x3992ee(0x159)](require['main'][_0x3992ee(0x2cd)]),'cadviewer/settings/home.html'),_0x3992ee(0x153)),_0x356608=_0x380419['replaceAll'](_0x3992ee(0x284),_0x36bc42[_0x3992ee(0x1b3)]);_0x320cda[_0x3992ee(0x16c)](_0x356608);}),router[a27_0x3175e6(0x1ac)](a27_0x3175e6(0x278),protectedRoute,async(_0x592c6e,_0x11e7d7)=>{const _0x4329c7=a27_0x3175e6,_0x242382=fs['readFileSync'](path[_0x4329c7(0x274)](path[_0x4329c7(0x159)](require[_0x4329c7(0x1e7)][_0x4329c7(0x2cd)]),_0x4329c7(0x1e9)),_0x4329c7(0x153)),_0xa2ca60=_0x242382[_0x4329c7(0x28f)](_0x4329c7(0x284),_0x592c6e[_0x4329c7(0x1b3)]);_0x11e7d7[_0x4329c7(0x16c)](_0xa2ca60);}),router['get'](a27_0x3175e6(0x21e),protectedRoute,async(_0x5459b9,_0x1b9fdf)=>{const _0x45a34d=a27_0x3175e6,_0x1b1620=fs[_0x45a34d(0x262)](path[_0x45a34d(0x274)](path[_0x45a34d(0x159)](require[_0x45a34d(0x1e7)][_0x45a34d(0x2cd)]),_0x45a34d(0x179)),_0x45a34d(0x153)),_0x4c130e=_0x1b1620[_0x45a34d(0x28f)](_0x45a34d(0x284),_0x5459b9[_0x45a34d(0x1b3)]);_0x1b9fdf[_0x45a34d(0x16c)](_0x4c130e);}),router['get'](a27_0x3175e6(0x2ad),protectedRoute,async(_0x4d5e76,_0x5aaac2)=>{const _0x7f554e=a27_0x3175e6,_0x462010=fs[_0x7f554e(0x262)](path[_0x7f554e(0x274)](path[_0x7f554e(0x159)](require[_0x7f554e(0x1e7)][_0x7f554e(0x2cd)]),'cadviewer/settings/folders.html'),'utf8'),_0x49165b=_0x462010[_0x7f554e(0x28f)](_0x7f554e(0x284),_0x4d5e76[_0x7f554e(0x1b3)]);_0x5aaac2['send'](_0x49165b);}),router['post'](a27_0x3175e6(0x2ad),async(_0x2cb5de,_0x570aa7)=>{const _0xb7b8e5=a27_0x3175e6,_0x2e0228=path['join'](path[_0xb7b8e5(0x159)](require[_0xb7b8e5(0x1e7)][_0xb7b8e5(0x2cd)]),_0xb7b8e5(0x2dd)),_0x2d64aa=JSON[_0xb7b8e5(0x18e)](fs[_0xb7b8e5(0x262)](_0x2e0228,_0xb7b8e5(0x153))),_0x303924=_0x2d64aa[_0xb7b8e5(0x258)];if(!fs[_0xb7b8e5(0x21f)](_0x303924))return _0x570aa7[_0xb7b8e5(0x1af)](0x194)[_0xb7b8e5(0x182)]({'message':'Base\x20folder\x20not\x20exists,\x20please\x20verify\x20your\x20configuration.'});const _0x1f07de=_0x78d188=>{const _0x2073f6=_0xb7b8e5;let _0x517613=0x0;return _0x78d188[_0x2073f6(0x1de)](_0x317a40=>{const _0x313069=_0x2073f6;_0x317a40[_0x313069(0x1e1)]?_0x517613+=_0x1f07de(_0x317a40[_0x313069(0x1aa)]):_0x517613+=_0x317a40[_0x313069(0x172)];}),_0x517613;},_0x308d4c=_0x5a76d6=>{const _0x4b2290=_0xb7b8e5;if(_0x5a76d6<0x400)return _0x5a76d6+'\x20B';else{if(_0x5a76d6<0x400*0x400)return(_0x5a76d6/0x400)[_0x4b2290(0x226)](0x2)+_0x4b2290(0x1bc);else return _0x5a76d6<0x400*0x400*0x400?(_0x5a76d6/0x400/0x400)[_0x4b2290(0x226)](0x2)+_0x4b2290(0x154):(_0x5a76d6/0x400/0x400/0x400)[_0x4b2290(0x226)](0x2)+_0x4b2290(0x241);}},_0x103754=(_0xdc3aa8,_0x17c9ed='')=>{const _0xa469f7=_0xb7b8e5,_0x22bd13=fs[_0xa469f7(0x25a)](_0xdc3aa8),_0x3b1cf2=[];return _0x22bd13['forEach'](_0x28ee25=>{const _0x39e19d=_0xa469f7,_0xe6e6b5=path[_0x39e19d(0x274)](_0xdc3aa8,_0x28ee25)['replaceAll']('\x5c','/'),_0x155960=fs[_0x39e19d(0x1d4)](_0xe6e6b5);if(_0x155960['isDirectory']()){const _0x376bcc=_0x103754(_0xe6e6b5,_0x17c9ed+_0x39e19d(0x28a));_0x3b1cf2[_0x39e19d(0x29e)]({'name':_0x28ee25,'size':_0x155960[_0x39e19d(0x172)],'path':_0xe6e6b5,'permissions':_0x155960['mode'],'isFolder':!![],'sub_dirs':_0x376bcc});}else _0x3b1cf2['push']({'name':_0x28ee25,'size':_0x155960['size'],'path':_0xe6e6b5,'permissions':_0x155960[_0x39e19d(0x1a7)],'isFolder':![]});}),_0x3b1cf2;};let _0x2c374e=_0x103754(_0x303924);const _0x3ba8b1=_0x59c6e8=>{return _0x59c6e8['forEach'](_0xf7ffd2=>{const _0x150c25=a27_0x5f20;_0xf7ffd2[_0x150c25(0x1e1)]?(_0xf7ffd2['formatedSize']=_0x308d4c(_0x1f07de(_0xf7ffd2[_0x150c25(0x1aa)])),_0xf7ffd2[_0x150c25(0x1aa)]=_0x3ba8b1(_0xf7ffd2[_0x150c25(0x1aa)])):_0xf7ffd2[_0x150c25(0x1dc)]=_0x308d4c(_0xf7ffd2[_0x150c25(0x172)]);}),_0x59c6e8;};_0x570aa7[_0xb7b8e5(0x1af)](0xc8)['json'](_0x3ba8b1(_0x2c374e));}),router['post'](a27_0x3175e6(0x216),async(_0x475d0f,_0x1bb6c5)=>{const _0x482597=a27_0x3175e6,{path:_0x100fd9}=_0x475d0f[_0x482597(0x1b9)],_0x9cb4f3=_0x100fd9[_0x482597(0x27f)]('/')[_0x482597(0x19d)]();if(!fs[_0x482597(0x21f)](_0x100fd9))return _0x1bb6c5[_0x482597(0x1af)](0x194)[_0x482597(0x182)]({'message':_0x482597(0x289)});_0x1bb6c5['setHeader'](_0x482597(0x2d0),_0x482597(0x2b0)),_0x1bb6c5[_0x482597(0x24a)](_0x482597(0x1fd),_0x482597(0x184)+_0x9cb4f3+'\x22'),_0x1bb6c5[_0x482597(0x2c5)](_0x100fd9,_0x396de6=>{const _0x5aa52c=_0x482597;_0x396de6&&_0x1bb6c5['status'](0x1f4)[_0x5aa52c(0x182)]({'message':_0x5aa52c(0x2d5)});});}),router[a27_0x3175e6(0x1d5)](a27_0x3175e6(0x188),async(_0x3bdc42,_0x692dfc)=>{const _0x1493dc=a27_0x3175e6,_0x3abec9=_0x3bdc42[_0x1493dc(0x1b9)],_0x511712=getHotConfig()['folderLocation'],_0x165db2=path['join'](_0x511712,_0x3abec9[_0x1493dc(0x2b2)]);if(!fs['existsSync'](_0x165db2))return _0x692dfc[_0x1493dc(0x1af)](0x194)[_0x1493dc(0x182)]({'message':_0x1493dc(0x1df)});if(fs['existsSync'](path[_0x1493dc(0x274)](_0x165db2,_0x3abec9['folderName'])))return _0x692dfc[_0x1493dc(0x1af)](0x199)[_0x1493dc(0x182)]({'message':_0x1493dc(0x156)});fs[_0x1493dc(0x15d)](path[_0x1493dc(0x274)](_0x165db2,_0x3abec9[_0x1493dc(0x255)]),_0x115215=>{const _0x508dca=_0x1493dc;_0x115215&&_0x692dfc['status'](0x1f4)['json']({'message':_0x508dca(0x273)}),_0x692dfc[_0x508dca(0x1af)](0xc8)[_0x508dca(0x182)]({'message':'Folder\x20created.'});});}),router[a27_0x3175e6(0x2a8)](a27_0x3175e6(0x1b6),async(_0x203e7f,_0xd0e3e1)=>{const _0x25cb29=a27_0x3175e6,{newName:_0x43e8bb,isFolder:_0x1ea54a,path:_0x176314}=_0x203e7f[_0x25cb29(0x1b9)];if(!fs['existsSync'](_0x176314))return _0xd0e3e1[_0x25cb29(0x1af)](0x194)[_0x25cb29(0x182)]({'message':_0x1ea54a?_0x25cb29(0x14b):'File\x20not\x20found'});const _0x35ab88=_0x176314[_0x25cb29(0x239)](_0x176314[_0x25cb29(0x27f)]('/')['pop'](),_0x43e8bb),_0x4605ff=fs[_0x25cb29(0x1d4)](_0x176314);_0x4605ff[_0x25cb29(0x1ad)]()?fs[_0x25cb29(0x13e)](_0x176314,_0x35ab88):(fs[_0x25cb29(0x1c1)](_0x176314,_0x35ab88),fs[_0x25cb29(0x2ce)](_0x176314)),_0xd0e3e1['status'](0xc8)[_0x25cb29(0x182)]({'message':_0x1ea54a?_0x25cb29(0x1cd):_0x25cb29(0x20c)});}),router['delete'](a27_0x3175e6(0x199),async(_0x57edda,_0x34de30)=>{const _0x25f855=a27_0x3175e6,{path:_0xc48880}=_0x57edda[_0x25f855(0x1b9)];if(!fs['existsSync'](_0xc48880))return _0x34de30['status'](0x194)[_0x25f855(0x182)]({'message':'File\x20or\x20Folder\x20not\x20found'});const _0x3b4925=fs[_0x25f855(0x1d4)](_0xc48880);if(_0x3b4925[_0x25f855(0x292)]())fs[_0x25f855(0x1d2)](_0xc48880,_0x318193=>{const _0x1d4043=_0x25f855;_0x318193&&_0x34de30[_0x1d4043(0x1af)](0x1f4)[_0x1d4043(0x182)]({'message':'Error\x20deleting\x20file.'}),_0x34de30[_0x1d4043(0x1af)](0xc8)['json']({'message':_0x1d4043(0x24c)});});else _0x3b4925[_0x25f855(0x1ad)]()&&fs[_0x25f855(0x207)](_0xc48880,{'recursive':!![]},_0x1360dc=>{const _0x27f4a2=_0x25f855;_0x1360dc&&_0x34de30[_0x27f4a2(0x1af)](0x1f4)[_0x27f4a2(0x182)]({'message':_0x27f4a2(0x206)}),_0x34de30[_0x27f4a2(0x1af)](0xc8)['json']({'message':'Folder\x20deleted.'});});});!fs[a27_0x3175e6(0x21f)](a27_0x3175e6(0x269))&&fs[a27_0x3175e6(0x1d6)](a27_0x3175e6(0x269));const storage=multer[a27_0x3175e6(0x143)]({'destination':(_0x57282d,_0x100775,_0x5b25fe)=>{const _0x3f3092=a27_0x3175e6;_0x5b25fe(null,_0x3f3092(0x1cf));},'filename':(_0x41134d,_0xeb86aa,_0x401b0b)=>{const _0x17f4ed=a27_0x3175e6;_0x401b0b(null,Date[_0x17f4ed(0x2c4)]()+path['extname'](_0xeb86aa[_0x17f4ed(0x2b8)]));}}),upload=multer({'storage':storage,'limits':{'fileSize':getHotConfig()[a27_0x3175e6(0x225)]?getHotConfig()['maxUploadFileSize']*0x400*0x400:0x32*0x400*0x400}});router[a27_0x3175e6(0x1d5)](a27_0x3175e6(0x1a9),upload[a27_0x3175e6(0x2ac)](a27_0x3175e6(0x1a4)),async(_0x3566e2,_0x38fd36)=>{const _0x3d9bac=a27_0x3175e6,_0x59dfb0=_0x3566e2[_0x3d9bac(0x1b9)];if(!_0x3566e2['files']||_0x3566e2['files'][_0x3d9bac(0x230)]===0x0)return _0x38fd36['status'](0x190)[_0x3d9bac(0x182)]({'message':_0x3d9bac(0x1ff)});const _0x67fcb0=getHotConfig()[_0x3d9bac(0x258)],_0x4a04df=path['join'](_0x67fcb0,_0x59dfb0['path']);if(!fs[_0x3d9bac(0x21f)](_0x4a04df))return _0x38fd36[_0x3d9bac(0x1af)](0x194)[_0x3d9bac(0x182)]({'message':'Folder\x20not\x20found.'});const _0x28a6e1=_0x3566e2[_0x3d9bac(0x1a4)][_0x3d9bac(0x25e)](_0x39e103=>({'originalname':_0x39e103['originalname'],'filename':_0x39e103[_0x3d9bac(0x2cd)],'mimetype':_0x39e103[_0x3d9bac(0x2c0)],'size':_0x39e103['size']}));_0x28a6e1[_0x3d9bac(0x1de)](_0xa2821=>{const _0x4ad79d=_0x3d9bac;fs[_0x4ad79d(0x1c1)](path[_0x4ad79d(0x274)](_0x4ad79d(0x1cf),_0xa2821[_0x4ad79d(0x2cd)]),path['join'](_0x4a04df,_0xa2821['originalname'])),fs[_0x4ad79d(0x2ce)](path[_0x4ad79d(0x274)]('tmp',_0xa2821['filename']));}),_0x38fd36['status'](0xc8)['json']({'message':'Files\x20uploaded\x20successfully','files':_0x28a6e1});}),router[a27_0x3175e6(0x2a8)](a27_0x3175e6(0x210),async(_0x1a95e8,_0x17f09d)=>{const _0x4bb139=a27_0x3175e6,_0x39674d=path['join'](path[_0x4bb139(0x159)](require[_0x4bb139(0x1e7)][_0x4bb139(0x2cd)]),_0x4bb139(0x2dd)),{config:_0x2a8514}=_0x1a95e8[_0x4bb139(0x1b9)];if(!_0x2a8514)return _0x17f09d[_0x4bb139(0x1af)](0x190)[_0x4bb139(0x182)]({'message':_0x4bb139(0x20a)});try{fs[_0x4bb139(0x285)](_0x39674d,JSON['stringify'](_0x2a8514,null,0x4)),_0x17f09d[_0x4bb139(0x1af)](0xc8)['json']({'message':_0x4bb139(0x279)});}catch(_0x3b65c1){_0x17f09d[_0x4bb139(0x1af)](0x1f4)[_0x4bb139(0x182)]({'message':'Error\x20updating\x20config'});}}),router[a27_0x3175e6(0x2a8)](a27_0x3175e6(0x18b),async(_0x128e3c,_0x4667c3)=>{const _0x4ae456=a27_0x3175e6,{key:_0x3eafe8,value:_0x5c4a6e}=_0x128e3c[_0x4ae456(0x1b9)],_0x12db41=path[_0x4ae456(0x274)](path[_0x4ae456(0x159)](require[_0x4ae456(0x1e7)]['filename']),'CADViewer_config.json');fs['readFile'](_0x12db41,_0x4ae456(0x153),function(_0x16715f,_0x3720c2){const _0x585ab3=_0x4ae456;_0x16715f&&_0x4667c3[_0x585ab3(0x1af)](0x1f4)[_0x585ab3(0x16c)](_0x16715f);const _0x1153c6=JSON[_0x585ab3(0x18e)](_0x3720c2);_0x1153c6[_0x3eafe8]=_0x5c4a6e;if(_0x3eafe8===_0x585ab3(0x1c6)){let _0x3ae7a1='';if(_0x1153c6['autodetect_platform']){_0x3ae7a1=os[_0x585ab3(0x291)]();if(_0x3ae7a1===_0x585ab3(0x1ba))_0x3ae7a1=_0x585ab3(0x2a6);else{if(_0x3ae7a1===_0x585ab3(0x280))_0x3ae7a1=_0x585ab3(0x1d7);}}else _0x3ae7a1=_0x1153c6[_0x585ab3(0x291)];if(_0x3ae7a1===_0x585ab3(0x2a6)){_0x1153c6['ServerLocation']=path[_0x585ab3(0x151)](__dirname,'..')+'/';const _0x4ab896=/\\/g;_0x1153c6[_0x585ab3(0x228)]=_0x1153c6[_0x585ab3(0x228)][_0x585ab3(0x239)](_0x4ab896,'/');}else _0x1153c6[_0x585ab3(0x228)]=path['resolve'](__dirname,'..')+'/';}if(_0x3eafe8===_0x585ab3(0x27b)){let _0x4c4262=os[_0x585ab3(0x291)]();if(_0x4c4262===_0x585ab3(0x1ba))_0x4c4262='windows';else _0x4c4262='linux';_0x4c4262===_0x585ab3(0x2a6)?_0x5c4a6e===!![]&&(_0x1153c6[_0x585ab3(0x1e2)]=_0x1153c6[_0x585ab3(0x170)],_0x1153c6['dwgmerge_executable']=_0x1153c6['dwgmerge_executable_windows'],_0x1153c6[_0x585ab3(0x2ab)]=_0x1153c6[_0x585ab3(0x15a)]):_0x5c4a6e===!![]&&(_0x1153c6[_0x585ab3(0x1e2)]=_0x1153c6[_0x585ab3(0x2c9)],_0x1153c6[_0x585ab3(0x1cb)]=_0x1153c6[_0x585ab3(0x180)],_0x1153c6['linklist_executable']=_0x1153c6[_0x585ab3(0x2a7)]),_0x1153c6['platform']=_0x4c4262;}if(_0x1153c6[_0x585ab3(0x27b)]){let _0xeadf5b=os[_0x585ab3(0x291)]();if(_0xeadf5b===_0x585ab3(0x1ba))_0xeadf5b=_0x585ab3(0x2a6);else _0xeadf5b=_0x585ab3(0x1d7);if(_0xeadf5b==='windows'){if(_0x3eafe8===_0x585ab3(0x170))_0x1153c6['autoxchange_executable']=_0x5c4a6e;else{if(_0x3eafe8===_0x585ab3(0x1dd))_0x1153c6[_0x585ab3(0x1cb)]=_0x5c4a6e;else _0x3eafe8===_0x585ab3(0x15a)&&(_0x1153c6[_0x585ab3(0x2ab)]=_0x5c4a6e);}}else{if(_0x3eafe8===_0x585ab3(0x2c9))_0x1153c6['autoxchange_executable']=_0x5c4a6e;else{if(_0x3eafe8===_0x585ab3(0x180))_0x1153c6['dwgmerge_executable']=_0x5c4a6e;else _0x3eafe8===_0x585ab3(0x2a7)&&(_0x1153c6[_0x585ab3(0x2ab)]=_0x5c4a6e);}}}fs[_0x585ab3(0x1b8)](_0x12db41,JSON['stringify'](_0x1153c6,null,0x4),function(_0x4834d1){const _0x22412a=_0x585ab3;_0x4834d1&&_0x4667c3[_0x22412a(0x1af)](0x1f4)[_0x22412a(0x16c)](_0x4834d1),_0x4667c3[_0x22412a(0x1af)](0xc8)[_0x22412a(0x182)]({'message':'Config\x20updated.'});});});}),router['post'](a27_0x3175e6(0x2c8),async(_0x5f3805,_0x3085bd)=>{const _0xef9066=a27_0x3175e6,_0x1c6842=getHotConfig(),_0x5bb40b=(_0x1c6842['dwgmergeLocation']['includes'](_0x1c6842[_0xef9066(0x228)])?'':_0x1c6842['ServerLocation'])+_0x1c6842[_0xef9066(0x234)],_0x1510d7=(_0x1c6842['dwgmergeLocation']['includes'](_0x1c6842[_0xef9066(0x228)])?'':_0x1c6842[_0xef9066(0x228)])+_0x1c6842[_0xef9066(0x27d)],_0x45e6c1=(_0x1c6842[_0xef9066(0x200)][_0xef9066(0x256)](_0x1c6842['ServerLocation'])?'':_0x1c6842[_0xef9066(0x228)])+_0x1c6842['converterLocation'],_0x2e3c70=/ax202.*\.exe/,_0x3050f5=/ax202.*/,_0x33ddcd=/dwgmerge202.*\.exe/,_0x5f387e=/dwgmerge_202.*/,_0x248d38=/linklist_202.*\.exe/,_0x1d9b4c=/linklist_202.*/,_0x41da3e=[],_0x21ffba=[],_0x5caedf=[],_0x1a7fcb=[],_0x1a8016=[],_0xaaf4ed=[];let _0x4dac4b='';if(_0x1c6842[_0xef9066(0x27b)]){_0x4dac4b=os[_0xef9066(0x291)]();if(_0x4dac4b===_0xef9066(0x1ba))_0x4dac4b='windows';else{if(_0x4dac4b==='darwin')_0x4dac4b=_0xef9066(0x1d7);}}else _0x4dac4b=_0x1c6842['platform'];fs[_0xef9066(0x25a)](_0x45e6c1['replaceAll']('linux',_0xef9066(0x2a6)))['forEach'](_0x261571=>{const _0x1faf1b=_0xef9066;if(_0x2e3c70[_0x1faf1b(0x296)](_0x261571[_0x1faf1b(0x195)]()))_0x41da3e[_0x1faf1b(0x29e)](_0x261571);}),fs[_0xef9066(0x25a)](_0x5bb40b[_0xef9066(0x28f)]('linux',_0xef9066(0x2a6)))['forEach'](_0x381329=>{const _0x2ec978=_0xef9066;if(_0x33ddcd[_0x2ec978(0x296)](_0x381329[_0x2ec978(0x195)]()))_0x21ffba[_0x2ec978(0x29e)](_0x381329);}),fs[_0xef9066(0x25a)](_0x1510d7[_0xef9066(0x28f)](_0xef9066(0x1d7),_0xef9066(0x2a6)))['forEach'](_0xb52d73=>{const _0x178912=_0xef9066;if(_0x248d38[_0x178912(0x296)](_0xb52d73['toLocaleLowerCase']()))_0x5caedf['push'](_0xb52d73);}),fs[_0xef9066(0x25a)](_0x45e6c1[_0xef9066(0x28f)](_0xef9066(0x2a6),'linux'))[_0xef9066(0x1de)](_0x2a867f=>{const _0x254ef2=_0xef9066;if(_0x3050f5[_0x254ef2(0x296)](_0x2a867f[_0x254ef2(0x195)]()))_0x1a7fcb['push'](_0x2a867f);}),fs[_0xef9066(0x25a)](_0x5bb40b['replaceAll'](_0xef9066(0x2a6),'linux'))[_0xef9066(0x1de)](_0x4c7734=>{const _0x3133fe=_0xef9066;if(_0x5f387e['test'](_0x4c7734[_0x3133fe(0x195)]()))_0x1a8016[_0x3133fe(0x29e)](_0x4c7734);}),fs[_0xef9066(0x25a)](_0x1510d7['replaceAll']('windows',_0xef9066(0x1d7)))[_0xef9066(0x1de)](_0x3a4ee7=>{const _0x326263=_0xef9066;if(_0x1d9b4c[_0x326263(0x296)](_0x3a4ee7[_0x326263(0x195)]()))_0xaaf4ed[_0x326263(0x29e)](_0x3a4ee7);});const _0x3c5a9d=[_0xef9066(0x29d),'https',_0xef9066(0x1c0),_0xef9066(0x150),'fontLocation'],_0x1699ea=[_0xef9066(0x21d),_0xef9066(0x1c2),_0xef9066(0x200),_0xef9066(0x22e),_0xef9066(0x1d8),_0xef9066(0x145),_0xef9066(0x23c),_0xef9066(0x234),'linklistLocation',_0xef9066(0x1b3)],_0x1d1116=[_0xef9066(0x155),'mysqlHost','mysqlUsername',_0xef9066(0x1e5),_0xef9066(0x16e),_0xef9066(0x15f),_0xef9066(0x17b)],_0x30ae5d={'ServerUrl':_0xef9066(0x2ae),'autoxchange_executable':_0xef9066(0x16f),'linklist_executable':_0xef9066(0x277),'dwgmerge_executable':'DwgMerge\x20Settings','setup_mysqlHost':_0xef9066(0x1eb),'callbackMethod_gatewayUrl_flag':'Callback\x20and\x20Authentication\x20Settings','userFolderMaximumFiles':_0xef9066(0x23d),'smtpHost':'Mail\x20Server\x20Settings'},_0x34379a={'https':_0xef9066(0x223),'ServerFrontEndUrlAsAllowedOriginOnly':'boolean','autodetect_platform':_0xef9066(0x223),'cvjs_svgz_compress':_0xef9066(0x223),'cached_conversion':_0xef9066(0x223),'remainOnServer':_0xef9066(0x223),'cvjs_debug':_0xef9066(0x223),'autodetect_location':_0xef9066(0x223),'platform':_0xef9066(0x27a),'autoxchange_executable':'radio|'+(_0x4dac4b==='windows'?_0x41da3e[_0xef9066(0x274)](','):_0x1a7fcb[_0xef9066(0x274)](',')),'autoxchange_executable_windows':_0xef9066(0x14a)+_0x41da3e[_0xef9066(0x274)](','),'autoxchange_executable_linux':_0xef9066(0x14a)+_0x1a7fcb[_0xef9066(0x274)](','),'dwgmerge_executable':_0xef9066(0x14a)+(_0x4dac4b==='windows'?_0x21ffba[_0xef9066(0x274)](','):_0x1a8016[_0xef9066(0x274)](',')),'dwgmerge_executable_windows':_0xef9066(0x14a)+_0x21ffba[_0xef9066(0x274)](','),'dwgmerge_executable_linux':_0xef9066(0x14a)+_0x1a8016[_0xef9066(0x274)](','),'linklist_executable':_0xef9066(0x14a)+(_0x4dac4b==='windows'?_0x5caedf[_0xef9066(0x274)](','):_0xaaf4ed[_0xef9066(0x274)](',')),'linklist_executable_windows':_0xef9066(0x14a)+_0x5caedf[_0xef9066(0x274)](','),'linklist_executable_linux':_0xef9066(0x14a)+_0xaaf4ed[_0xef9066(0x274)](','),'callbackMethod_gatewayUrl_flag':_0xef9066(0x223),'setup_mysqlHost':_0xef9066(0x223),'ContentSecurityPolicyReportOnly':'boolean','fileLoad_PasswordAuthentication':'boolean','contentLocationCheck':_0xef9066(0x223),'globalBearerAutentication':_0xef9066(0x223),'bcryptSaltRounds':'number','userFolderMaximumFiles':_0xef9066(0x214),'userFolderMaximumSizeInMB':_0xef9066(0x214),'recaptchaEnabled':_0xef9066(0x223),'usersExportFrequency':_0xef9066(0x22a),'enableEmailVerification':_0xef9066(0x223),'demoUserRetentionDaysAlertBeforeDeletion':_0xef9066(0x214),'demoUserRetentionDays':'number'},_0x5ccaff={},_0x22ffe7=Object[_0xef9066(0x231)](_0x1c6842);_0x1c6842['autodetect_platform']&&_0x3c5a9d[_0xef9066(0x29e)]('platform'),_0x1c6842['autodetect_location']&&(_0x1699ea[_0xef9066(0x29e)](_0xef9066(0x228)),_0x1699ea[_0xef9066(0x29e)](_0xef9066(0x1e2)),_0x1699ea[_0xef9066(0x29e)](_0xef9066(0x1cb)),_0x1699ea[_0xef9066(0x29e)](_0xef9066(0x2ab))),!_0x1c6842[_0xef9066(0x26b)]&&_0x1699ea['push'](_0xef9066(0x27c)),!_0x1c6842[_0xef9066(0x23b)]&&(_0x1699ea[_0xef9066(0x29e)](_0xef9066(0x17e)),_0x1699ea[_0xef9066(0x29e)](_0xef9066(0x265)),_0x1699ea[_0xef9066(0x29e)](_0xef9066(0x1e5)),_0x1699ea[_0xef9066(0x29e)](_0xef9066(0x16e))),!_0x1c6842[_0xef9066(0x2bb)]&&_0x1699ea[_0xef9066(0x29e)]('ContentSecurityPolicy'),!_0x1c6842[_0xef9066(0x2ca)]&&(_0x1699ea[_0xef9066(0x29e)](_0xef9066(0x24e)),_0x1699ea[_0xef9066(0x29e)](_0xef9066(0x18c))),!_0x1c6842['globalBearerAutentication']&&_0x1699ea[_0xef9066(0x29e)]('globalBearerAutenticationToken'),_0x22ffe7[_0xef9066(0x1de)](_0x5c0b33=>{const _0x329395=_0xef9066;!_0x3c5a9d[_0x329395(0x256)](_0x5c0b33)&&(_0x5ccaff[_0x5c0b33]=_0x1c6842[_0x5c0b33]);}),_0x5ccaff[_0xef9066(0x1c2)]=''+_0x1c6842['ServerUrl']+_0x1c6842[_0xef9066(0x21d)],_0x3085bd[_0xef9066(0x1af)](0xc8)[_0xef9066(0x182)]({'notEditableFields':_0x1699ea,'customFieldTypes':_0x34379a,'notHotEditableFields':_0x1d1116,'config':_0x5ccaff,'fieldsTitle':_0x30ae5d,'configData':_0x1c6842});}),router['get'](a27_0x3175e6(0x1ea),protectedRoute,async(_0x1cd95e,_0x47f463)=>{const _0x20b24f=a27_0x3175e6,_0x22119e=fs['readFileSync'](path['join'](path['dirname'](require[_0x20b24f(0x1e7)][_0x20b24f(0x2cd)]),_0x20b24f(0x201)),_0x20b24f(0x153)),_0x483e4e=_0x22119e[_0x20b24f(0x28f)](_0x20b24f(0x284),_0x1cd95e[_0x20b24f(0x1b3)]);_0x47f463[_0x20b24f(0x16c)](_0x483e4e);});function a27_0x5f20(_0xb8a1ac,_0x4ca486){const _0x592a9f=a27_0x592a();return a27_0x5f20=function(_0x5f207c,_0x1430b1){_0x5f207c=_0x5f207c-0x13e;let _0x24eadd=_0x592a9f[_0x5f207c];return _0x24eadd;},a27_0x5f20(_0xb8a1ac,_0x4ca486);}function findMatchingLogFiles(_0x5d0cf5,_0x20b2e7=/^call-Api_Conversion_\d{1,2}_\d{1,2}_\d{4}\.log$/){const _0x5da62c=a27_0x3175e6;try{const _0x44bdd8=fs['readdirSync'](_0x5d0cf5);return _0x44bdd8[_0x5da62c(0x22b)](_0x43dab2=>_0x20b2e7[_0x5da62c(0x296)](_0x43dab2))[_0x5da62c(0x25e)](_0x2435f1=>_0x2435f1['replaceAll'](_0x5da62c(0x1a3),'')['replaceAll']('.log',''));}catch(_0x5a79a){return console['error'](_0x5da62c(0x13f),_0x5a79a),[];}}router[a27_0x3175e6(0x1d5)](a27_0x3175e6(0x2b7),async(_0xcf9d3d,_0x689f6d)=>{const _0x1b9778=a27_0x3175e6,_0x294a4d=new Date(),_0x1a0401=_0x294a4d[_0x1b9778(0x1ef)]()[_0x1b9778(0x1e3)]()[_0x1b9778(0x2de)](0x2,'0')+'_'+(_0x294a4d[_0x1b9778(0x18a)]()+0x1)['toString']()[_0x1b9778(0x2de)](0x2,'0')+'_'+_0x294a4d['getFullYear'](),{displayDay:_0x4a5b13}=_0xcf9d3d[_0x1b9778(0x1b9)],_0x55e510=path[_0x1b9778(0x274)](path[_0x1b9778(0x159)](require['main'][_0x1b9778(0x2cd)]),_0x1b9778(0x1c5),_0x1b9778(0x1a3)+(_0x4a5b13??_0x1a0401)+_0x1b9778(0x21b));fs['existsSync'](_0x55e510)?fs['readFile'](_0x55e510,'utf8',function(_0x1ca05e,_0xdb01cd){const _0x4a2765=_0x1b9778;_0x1ca05e&&_0x689f6d[_0x4a2765(0x1af)](0x1f4)[_0x4a2765(0x16c)](_0x1ca05e),_0x689f6d[_0x4a2765(0x1af)](0xc8)[_0x4a2765(0x182)]({'content':_0xdb01cd,'days':findMatchingLogFiles(path[_0x4a2765(0x274)](path[_0x4a2765(0x159)](require[_0x4a2765(0x1e7)][_0x4a2765(0x2cd)]),_0x4a2765(0x1c5)))});}):_0x689f6d[_0x1b9778(0x1af)](0xc8)[_0x1b9778(0x182)]({'content':'','days':findMatchingLogFiles(path[_0x1b9778(0x274)](path[_0x1b9778(0x159)](require['main'][_0x1b9778(0x2cd)]),_0x1b9778(0x1c5)))});}),router[a27_0x3175e6(0x161)]('/logs/clean',async(_0x321729,_0x4ba1ed)=>{const _0x560dfb=a27_0x3175e6,_0x26682e=new Date(),_0x1f6ea3=_0x26682e[_0x560dfb(0x1ef)]()[_0x560dfb(0x1e3)]()[_0x560dfb(0x2de)](0x2,'0')+'_'+(_0x26682e[_0x560dfb(0x18a)]()+0x1)['toString']()[_0x560dfb(0x2de)](0x2,'0')+'_'+_0x26682e[_0x560dfb(0x251)](),_0x49a137=findMatchingLogFiles(path[_0x560dfb(0x274)](path[_0x560dfb(0x159)](require[_0x560dfb(0x1e7)][_0x560dfb(0x2cd)]),_0x560dfb(0x1c5)));_0x49a137['forEach'](_0x493843=>{const _0x45a9a2=_0x560dfb;if(_0x493843!==_0x1f6ea3)fs[_0x45a9a2(0x2ce)](path['join'](path['dirname'](require[_0x45a9a2(0x1e7)]['filename']),_0x45a9a2(0x1c5),'call-Api_Conversion_'+_0x493843+_0x45a9a2(0x21b)));}),logStream['clean'](),_0x4ba1ed[_0x560dfb(0x1af)](0xc8)[_0x560dfb(0x182)]({'message':_0x560dfb(0x24f)});}),router[a27_0x3175e6(0x1ac)](a27_0x3175e6(0x2ba),protectedRoute,async(_0xd06d29,_0x41334f)=>{const _0x3ba734=a27_0x3175e6,_0x52ea9b=path[_0x3ba734(0x274)](path[_0x3ba734(0x159)](require[_0x3ba734(0x1e7)][_0x3ba734(0x2cd)]),_0x3ba734(0x164));if(!fs[_0x3ba734(0x21f)](_0x52ea9b)){const _0x11380a={'jsonDataExtraction':{'standard':[{'paramName':_0x3ba734(0x182),'paramValue':''},{'paramName':_0x3ba734(0x162),'paramValue':''}]},'dwgToSvg':{'standard':[{'paramName':'f','paramValue':_0x3ba734(0x177)},{'paramName':_0x3ba734(0x187),'paramValue':''},{'paramName':_0x3ba734(0x171),'paramValue':''}]},'dwgToPdf':{'standard':[{'paramName':'f','paramValue':_0x3ba734(0x2d3)},{'paramName':_0x3ba734(0x187),'paramValue':''}]},'displayDwg':{'standard':[{'paramName':'f','paramValue':_0x3ba734(0x177)},{'paramName':_0x3ba734(0x187),'paramValue':''},{'paramName':_0x3ba734(0x171),'paramValue':''}]},'dwgToMultiple':{'standard':[{'paramName':_0x3ba734(0x1ae),'paramValue':''}]}};fs['writeFileSync'](_0x52ea9b,JSON[_0x3ba734(0x167)](_0x11380a,null,0x4));}const _0x4c5569=fs['readFileSync'](path['join'](path['dirname'](require[_0x3ba734(0x1e7)]['filename']),'cadviewer/settings/rest-api.html'),_0x3ba734(0x153)),_0x35d65e=_0x4c5569[_0x3ba734(0x28f)](_0x3ba734(0x284),_0xd06d29[_0x3ba734(0x1b3)]);_0x41334f[_0x3ba734(0x16c)](_0x35d65e);}),router['post']('/restapi-test/parameters/search',async(_0x54e1d4,_0x5d709c)=>{const _0x575097=a27_0x3175e6,{actionName:_0x4ade87,contentLocation:_0x2f44d9}=_0x54e1d4[_0x575097(0x1b9)],_0x8e8f4c=path[_0x575097(0x274)](path[_0x575097(0x159)](require[_0x575097(0x1e7)][_0x575097(0x2cd)]),_0x575097(0x164));fs[_0x575097(0x1ec)](_0x8e8f4c,'utf8',function(_0x486a0f,_0x1a75e2){const _0x498fa8=_0x575097;if(_0x486a0f)_0x5d709c[_0x498fa8(0x1af)](0xc8)[_0x498fa8(0x182)]({'parameters':[]});else{const _0x4ef036=JSON[_0x498fa8(0x18e)](_0x1a75e2);if(_0x4ef036[_0x4ade87]&&_0x4ef036[_0x4ade87][_0x2f44d9])_0x5d709c['status'](0xc8)[_0x498fa8(0x182)]({'parameters':_0x4ef036[_0x4ade87][_0x2f44d9]});else _0x4ef036[_0x4ade87]&&_0x4ef036[_0x4ade87][_0x498fa8(0x1c9)]?_0x5d709c[_0x498fa8(0x1af)](0xc8)[_0x498fa8(0x182)]({'parameters':_0x4ef036[_0x4ade87][_0x498fa8(0x1c9)]}):_0x5d709c[_0x498fa8(0x1af)](0xc8)['json']({'parameters':[]});}});}),router['post'](a27_0x3175e6(0x1d1),async(_0x4cf667,_0x4bf957)=>{const _0x599ff4=a27_0x3175e6,{actionName:_0x418d41,contentLocation:_0x1ff0b6,parameters:_0x354d08}=_0x4cf667['body'],_0x211e4e=path[_0x599ff4(0x274)](path[_0x599ff4(0x159)](require[_0x599ff4(0x1e7)]['filename']),'cadviewer/settings/rest-api-parameters.json');fs['readFile'](_0x211e4e,_0x599ff4(0x153),function(_0x1c46c3,_0x7a12fb){const _0x281fbe=_0x599ff4;if(_0x1c46c3)_0x4bf957[_0x281fbe(0x1af)](0x199)[_0x281fbe(0x182)]({'message':_0x281fbe(0x190)});else{const _0x15b7a6=JSON[_0x281fbe(0x18e)](_0x7a12fb);!_0x15b7a6[_0x418d41]&&(_0x15b7a6[_0x418d41]={}),_0x15b7a6[_0x418d41][_0x1ff0b6]=_0x354d08,fs['writeFile'](_0x211e4e,JSON[_0x281fbe(0x167)](_0x15b7a6,null,0x4),function(_0x2cae39){const _0x19441b=_0x281fbe;_0x2cae39&&_0x4bf957['status'](0x199)[_0x19441b(0x182)]({'message':_0x19441b(0x190)}),_0x4bf957[_0x19441b(0x1af)](0xc8)[_0x19441b(0x182)]({'message':'Parameters\x20saved.'});});}});}),router['get'](a27_0x3175e6(0x28c),protectedRoute,async(_0x4ae57a,_0x52d3bd)=>{const _0x480957=a27_0x3175e6,_0x221aaa=fs[_0x480957(0x262)](path[_0x480957(0x274)](path[_0x480957(0x159)](require[_0x480957(0x1e7)][_0x480957(0x2cd)]),_0x480957(0x1fc)),_0x480957(0x153)),_0x359a47=_0x221aaa[_0x480957(0x28f)](_0x480957(0x284),_0x4ae57a[_0x480957(0x1b3)]);_0x52d3bd[_0x480957(0x16c)](_0x359a47);}),router['post']('/doctor/check',async(_0x2b2684,_0x5376a5)=>{const _0x5d272b=a27_0x3175e6,_0x2ecbbf=getHotConfig(),_0x42eae7=_0x2ecbbf[_0x5d272b(0x200)][_0x5d272b(0x28f)]('//','/'),_0x1a3007=_0x2ecbbf[_0x5d272b(0x234)]['replaceAll']('//','/'),_0x2cc4be=_0x2ecbbf[_0x5d272b(0x27d)][_0x5d272b(0x28f)]('//','/'),_0x2a36e5=''+_0x42eae7+_0x2ecbbf[_0x5d272b(0x1e2)],_0x14817b=''+_0x1a3007+_0x2ecbbf[_0x5d272b(0x1cb)],_0x144630=''+_0x2cc4be+_0x2ecbbf[_0x5d272b(0x2ab)],_0x57373c=[],_0x3a8680=new Promise(_0x1aea31=>{const _0x347189=_0x5d272b;exec(os[_0x347189(0x291)]()===_0x347189(0x1ba)?_0x347189(0x1bd):'ls',_0x43ef82=>{const _0x10253c=_0x347189;_0x43ef82?_0x57373c[_0x10253c(0x29e)]({'title':_0x10253c(0x294),'status':![],'priority':0x1}):_0x57373c[_0x10253c(0x29e)]({'title':'\x22exec\x22\x20command\x20activated\x20on\x20NodeJS','status':!![],'priority':0x1}),_0x1aea31();});}),_0x5c0ccd=new Promise(_0x563004=>{const _0x4a5372=_0x5d272b;fs[_0x4a5372(0x1ed)](_0x2a36e5,fs[_0x4a5372(0x238)]['X_OK'],_0x24bdd4=>{const _0x556166=_0x4a5372;_0x24bdd4?_0x57373c[_0x556166(0x29e)]({'title':'Permission\x20750\x20for\x20the\x20\x22'+_0x2ecbbf['autoxchange_executable']+'\x22\x20executable','status':![],'priority':0x2}):_0x57373c[_0x556166(0x29e)]({'title':_0x556166(0x1e0)+_0x2ecbbf[_0x556166(0x1e2)]+'\x22\x20executable','status':!![],'priority':0x2}),_0x563004();});}),_0x2787d2=new Promise(_0xdd2479=>{const _0x5057df=_0x5d272b;fs[_0x5057df(0x1ed)](_0x14817b,fs[_0x5057df(0x238)]['X_OK'],_0x467b7b=>{const _0x2d0a33=_0x5057df;_0x467b7b?_0x57373c[_0x2d0a33(0x29e)]({'title':_0x2d0a33(0x1e0)+_0x2ecbbf['dwgmerge_executable']+_0x2d0a33(0x1f8),'status':![],'priority':0x3}):_0x57373c[_0x2d0a33(0x29e)]({'title':_0x2d0a33(0x1e0)+_0x2ecbbf[_0x2d0a33(0x1cb)]+'\x22\x20executable','status':!![],'priority':0x3}),_0xdd2479();});}),_0xa3d509=new Promise(_0x4e048e=>{const _0x42abb9=_0x5d272b;fs[_0x42abb9(0x1ed)](_0x144630,fs[_0x42abb9(0x238)][_0x42abb9(0x299)],_0x35af6b=>{const _0x2e63c4=_0x42abb9;_0x35af6b?_0x57373c['push']({'title':'Permission\x20750\x20for\x20the\x20\x22'+_0x2ecbbf['linklist_executable']+_0x2e63c4(0x1f8),'status':![],'priority':0x4}):_0x57373c[_0x2e63c4(0x29e)]({'title':_0x2e63c4(0x1e0)+_0x2ecbbf[_0x2e63c4(0x2ab)]+_0x2e63c4(0x1f8),'status':!![],'priority':0x4}),_0x4e048e();});}),_0x392445=new Promise(_0xa6a53b=>{const _0x5a7442=_0x5d272b,_0x54c9a4=new Date(),_0x43a3ba=_0x54c9a4[_0x5a7442(0x1ef)]()[_0x5a7442(0x1e3)]()['padStart'](0x2,'0')+'_'+(_0x54c9a4['getMonth']()+0x1)[_0x5a7442(0x1e3)]()[_0x5a7442(0x2de)](0x2,'0')+'_'+_0x54c9a4[_0x5a7442(0x251)](),{displayDay:_0xe2eeeb}=_0x2b2684['body'];fs[_0x5a7442(0x1ed)](path[_0x5a7442(0x274)](path[_0x5a7442(0x159)](require[_0x5a7442(0x1e7)][_0x5a7442(0x2cd)]),'logs',_0x5a7442(0x1a3)+(_0xe2eeeb??_0x43a3ba)+_0x5a7442(0x21b)),fs[_0x5a7442(0x238)]['W_OK'],_0x17e7da=>{const _0x4de415=_0x5a7442;_0x17e7da?_0x57373c[_0x4de415(0x29e)]({'title':_0x4de415(0x165)+(_0xe2eeeb??_0x43a3ba)+_0x4de415(0x235),'status':![],'priority':0x5}):_0x57373c[_0x4de415(0x29e)]({'title':'Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_'+(_0xe2eeeb??_0x43a3ba)+_0x4de415(0x235),'status':!![],'priority':0x5}),_0xa6a53b();});}),_0x1ad5d7=(_0x258507,_0x3afc98)=>{const _0x19ae27=_0x5d272b,_0x19667f=path[_0x19ae27(0x274)](path[_0x19ae27(0x159)](require[_0x19ae27(0x1e7)][_0x19ae27(0x2cd)]),_0x258507);return new Promise(_0x3265ed=>{const _0x88333d=_0x19ae27;fs[_0x88333d(0x1ed)](path[_0x88333d(0x274)](path[_0x88333d(0x159)](_0x19667f)),fs[_0x88333d(0x238)][_0x88333d(0x16d)]|fs['constants'][_0x88333d(0x26f)],_0x18cbd2=>{const _0x3d8e6b=_0x88333d;_0x18cbd2?_0x57373c[_0x3d8e6b(0x29e)]({'title':'Read\x20and\x20write\x20permission\x20for\x20folder\x20'+_0x258507,'status':![],'priority':_0x3afc98+0x6}):_0x57373c[_0x3d8e6b(0x29e)]({'title':_0x3d8e6b(0x1f3)+_0x258507,'status':!![],'priority':_0x3afc98+0x6}),_0x3265ed();});});},_0x56c430=[_0x5d272b(0x186),_0x5d272b(0x2bf),'/converters/files/merged/',_0x5d272b(0x178),'/converters/files/pdf/','/content/redlines/',_0x5d272b(0x23e)],_0x2be831=_0x56c430[_0x5d272b(0x25e)](_0x1ad5d7);Promise['all']([_0x3a8680,_0x5c0ccd,_0x2787d2,_0xa3d509,_0x392445,..._0x2be831])[_0x5d272b(0x15b)](()=>{const _0x57d3d8=_0x5d272b;_0x5376a5[_0x57d3d8(0x1af)](0xc8)[_0x57d3d8(0x182)]({'checking_list':_0x57373c});})[_0x5d272b(0x1d0)](()=>{const _0x43430d=_0x5d272b;_0x5376a5['status'](0x1f4)[_0x43430d(0x182)]({'error':_0x43430d(0x18f)});});}),router[a27_0x3175e6(0x1ac)]('/users',protectedRoute,async(_0x1f2005,_0x4641e3)=>{const _0x341d00=a27_0x3175e6,_0x2714fe=fs[_0x341d00(0x262)](path['join'](path[_0x341d00(0x159)](require[_0x341d00(0x1e7)][_0x341d00(0x2cd)]),_0x341d00(0x19e)),_0x341d00(0x153)),_0x2b4317=_0x2714fe[_0x341d00(0x28f)](_0x341d00(0x284),_0x1f2005[_0x341d00(0x1b3)]);_0x4641e3['send'](_0x2b4317);}),router[a27_0x3175e6(0x1d5)]('/users/list',async(_0x553b0f,_0x44cc2e)=>{const _0x580b4e=a27_0x3175e6;let _0x65ab5e;try{const [_0x4be2d7]=await conn[_0x580b4e(0x2dc)]()[_0x580b4e(0x25c)](_0x580b4e(0x1a6),[]);_0x65ab5e=_0x4be2d7;}catch(_0x3b7277){console[_0x580b4e(0x263)](_0x3b7277),_0x44cc2e['status'](0x1f4)[_0x580b4e(0x182)]({'error':_0x580b4e(0x189)});return;}_0x44cc2e[_0x580b4e(0x1af)](0xc8)[_0x580b4e(0x182)]({'success':!![],'data':_0x65ab5e});}),router[a27_0x3175e6(0x1d5)](a27_0x3175e6(0x1ca),upload[a27_0x3175e6(0x28b)](a27_0x3175e6(0x183)),async(_0x28e8fa,_0x513487)=>{const _0x2b7fa8=a27_0x3175e6,{id:_0x4b77bb,first_name:_0xb8fbfe,last_name:_0x495fab,username:_0x52d8c6,email:_0x3199ec,password:_0x52fd5,is_enabled:_0x20a124}=_0x28e8fa[_0x2b7fa8(0x1b9)],_0x114cfc=_0x28e8fa[_0x2b7fa8(0x1b9)][_0x2b7fa8(0x22f)]===_0x2b7fa8(0x1c3)?'admin':_0x28e8fa[_0x2b7fa8(0x1b9)][_0x2b7fa8(0x22f)]===_0x2b7fa8(0x1f0)?'demo_user':'user';let _0x2d2c55;console[_0x2b7fa8(0x263)](_0x2b7fa8(0x2d8));_0x52fd5&&(_0x2d2c55=await bcrypt['hash'](_0x52fd5,0xa));let _0x4a0682=null;if(_0x28e8fa['file']){const _0x1efb62=_0x2b7fa8(0x185)+randomUUID()+'.png';fs[_0x2b7fa8(0x1c1)](_0x28e8fa[_0x2b7fa8(0x2aa)][_0x2b7fa8(0x2b2)],'./'+_0x1efb62),fs[_0x2b7fa8(0x2ce)](_0x28e8fa[_0x2b7fa8(0x2aa)][_0x2b7fa8(0x2b2)]),config[_0x2b7fa8(0x26b)]?_0x4a0682=config['callbackMethod_gatewayUrl']+'/'+_0x1efb62:_0x4a0682=config['ServerUrl']+'/'+_0x1efb62;}if(_0x4b77bb){try{let [_0x1eca8a]=await conn[_0x2b7fa8(0x2dc)]()[_0x2b7fa8(0x25c)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20(`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?)\x20AND\x20`id`\x20!=\x20?',[_0x3199ec,_0x52d8c6,_0x4b77bb]);if(_0x1eca8a[_0x2b7fa8(0x230)]>0x0)_0x513487[_0x2b7fa8(0x1af)](0x199)[_0x2b7fa8(0x182)]({'error':_0x2b7fa8(0x2e5)});else{!_0x28e8fa[_0x2b7fa8(0x2aa)]&&([_0x1eca8a]=await conn['promise']()[_0x2b7fa8(0x25c)](_0x2b7fa8(0x2a2),[_0x4b77bb]),_0x4a0682=_0x1eca8a[0x0][_0x2b7fa8(0x144)]);const _0x332535='UPDATE\x20`users`\x20SET\x20`avatar_url`\x20=\x20?,\x20`first_name`\x20=\x20?,\x20`last_name`\x20=\x20?,\x20`username`\x20=\x20?,\x20`email`\x20=\x20?,'+(_0x52fd5?'`crypted_password`\x20=\x20?,\x20':'')+_0x2b7fa8(0x2c7);await conn[_0x2b7fa8(0x2dc)]()[_0x2b7fa8(0x25c)](_0x332535,_0x52fd5?[_0x4a0682,_0xb8fbfe,_0x495fab,_0x52d8c6,_0x3199ec,_0x2d2c55,_0x20a124,_0x114cfc,_0x4b77bb]:[_0x4a0682,_0xb8fbfe,_0x495fab,_0x52d8c6,_0x3199ec,_0x20a124,_0x114cfc,_0x4b77bb]);}}catch(_0x3d219e){console[_0x2b7fa8(0x263)](_0x3d219e),_0x513487[_0x2b7fa8(0x1af)](0x1f4)[_0x2b7fa8(0x182)]({'error':_0x2b7fa8(0x189)});return;}_0x513487['status'](0xc8)['json']({'success':!![],'message':_0x2b7fa8(0x160)});}else{try{const [_0x1d5742]=await conn[_0x2b7fa8(0x2dc)]()[_0x2b7fa8(0x25c)](_0x2b7fa8(0x2c3),[_0x3199ec,_0x52d8c6]);if(_0x1d5742['length']>0x0)_0x513487[_0x2b7fa8(0x1af)](0x199)[_0x2b7fa8(0x182)]({'error':_0x2b7fa8(0x2e5)});else{const _0x4f0c9b=randomUUID();await conn[_0x2b7fa8(0x2dc)]()[_0x2b7fa8(0x25c)](_0x2b7fa8(0x2bd),[_0x4a0682,_0xb8fbfe,_0x495fab,_0x52d8c6,_0x3199ec,_0x2d2c55,_0x114cfc,_0x20a124,_0x4f0c9b]);const _0x4d9b37='./uploads/'+_0x4f0c9b;fs[_0x2b7fa8(0x1d6)](_0x4d9b37);}}catch(_0x145bad){console[_0x2b7fa8(0x263)](_0x145bad),_0x513487[_0x2b7fa8(0x1af)](0x1f4)[_0x2b7fa8(0x182)]({'error':_0x2b7fa8(0x189)});return;}_0x513487[_0x2b7fa8(0x1af)](0xc8)['json']({'success':!![],'message':'User\x20created\x20successfully'});}}),router['delete'](a27_0x3175e6(0x2d4),async(_0x2dc4e4,_0xabbe25)=>{const _0x485458=a27_0x3175e6,{userId:_0x29d62e}=_0x2dc4e4[_0x485458(0x1b9)];let _0x45f17a;try{const [_0x23fc30]=await conn[_0x485458(0x2dc)]()[_0x485458(0x25c)](_0x485458(0x2a2),[_0x29d62e]);_0x23fc30[_0x485458(0x230)]>0x0&&(_0x45f17a=_0x23fc30[0x0]);}catch(_0x4e41ec){console['log']({'err':_0x4e41ec}),_0xabbe25[_0x485458(0x1af)](0x1f4)[_0x485458(0x182)]({'error':_0x485458(0x189)});return;}if(!_0x45f17a){_0xabbe25[_0x485458(0x1af)](0x191)[_0x485458(0x182)]({'error':'Invalid\x20user'});return;}let _0x4c24b1=_0x45f17a[_0x485458(0x2d2)];if(!_0x4c24b1){_0x4c24b1=randomUUID();try{await conn[_0x485458(0x2dc)]()[_0x485458(0x25c)](_0x485458(0x1a0),[_0x4c24b1,_0x29d62e]);}catch(_0x34931b){console[_0x485458(0x263)]({'err':_0x34931b}),_0xabbe25['status'](0x1f4)['json']({'error':'Error!\x20Something\x20went\x20wrong.'});return;}}const _0x18d1a8='./uploads/'+_0x4c24b1;console['log'](_0x485458(0x20e)),console[_0x485458(0x263)](_0x18d1a8),!fs[_0x485458(0x21f)](_0x18d1a8)&&fs['mkdirSync'](_0x18d1a8),cleanCacheForUserFiles(_0x18d1a8),fs['rmSync'](_0x18d1a8,{'recursive':!![],'force':!![]}),fs[_0x485458(0x1d6)](_0x18d1a8),_0xabbe25[_0x485458(0x1af)](0xc8)[_0x485458(0x182)]({'success':!![],'message':_0x485458(0x23a)});}),router[a27_0x3175e6(0x161)]('/users/:userId',async(_0x164ddb,_0x2ab5e4)=>{const _0x4abd1b=a27_0x3175e6,_0x9f1db2=_0x164ddb[_0x4abd1b(0x26a)][_0x4abd1b(0x191)];try{let _0x5de758;try{const [_0x582df0]=await conn[_0x4abd1b(0x2dc)]()[_0x4abd1b(0x25c)](_0x4abd1b(0x2a2),[_0x9f1db2]);_0x582df0[_0x4abd1b(0x230)]>0x0&&(_0x5de758=_0x582df0[0x0]);}catch(_0x3b5dbd){console[_0x4abd1b(0x263)]({'err':_0x3b5dbd}),_0x2ab5e4[_0x4abd1b(0x1af)](0x1f4)['json']({'error':_0x4abd1b(0x189)});return;}if(!_0x5de758){_0x2ab5e4['status'](0x191)[_0x4abd1b(0x182)]({'error':_0x4abd1b(0x233)});return;}let _0x4397dc=_0x5de758[_0x4abd1b(0x2d2)];if(_0x4397dc){const _0x1d033c=_0x4abd1b(0x2b6)+_0x4397dc;fs[_0x4abd1b(0x21f)](_0x1d033c)&&(cleanCacheForUserFiles(_0x1d033c),fs[_0x4abd1b(0x2a3)](_0x1d033c,{'recursive':!![],'force':!![]}));}await conn[_0x4abd1b(0x2dc)]()[_0x4abd1b(0x25c)](_0x4abd1b(0x26e),[_0x9f1db2]);}catch(_0x54c367){console[_0x4abd1b(0x263)](_0x54c367),_0x2ab5e4[_0x4abd1b(0x1af)](0x1f4)[_0x4abd1b(0x182)]({'error':_0x4abd1b(0x189)});return;}_0x2ab5e4[_0x4abd1b(0x1af)](0xc8)[_0x4abd1b(0x182)]({'success':!![],'message':_0x4abd1b(0x1c8)});}),router[a27_0x3175e6(0x1ac)](a27_0x3175e6(0x17a),async(_0x2ba072,_0x72405f)=>{const _0x30660b=a27_0x3175e6,_0x2f5395=osu[_0x30660b(0x148)],_0x446827=osu[_0x30660b(0x1a2)],_0x3a1b44=osu[_0x30660b(0x215)],_0x3dc799=osu['os'],_0xc58e28={'percentage':0x0,'usedGB':0x0,'freeGb':0x0,'totalGB':0x0};try{let _0x2d4738=os['platform']()==='win32'?'c:':'/';const _0x14d663=await _0x3a1b44[_0x30660b(0x1f4)](_0x2d4738);_0xc58e28[_0x30660b(0x20d)]=_0x14d663[_0x30660b(0x19a)],_0xc58e28[_0x30660b(0x287)]=_0x14d663[_0x30660b(0x218)],_0xc58e28[_0x30660b(0x232)]=_0x14d663[_0x30660b(0x232)],_0xc58e28[_0x30660b(0x174)]=_0x14d663[_0x30660b(0x2e4)];}catch(_0x5f2733){console['log'](_0x30660b(0x286),_0x5f2733);}const _0x4f3ae0={'usage':0x0,'count':0x0};try{_0x4f3ae0[_0x30660b(0x1db)]=await _0x2f5395[_0x30660b(0x1db)](),_0x4f3ae0[_0x30660b(0x17f)]=_0x2f5395['count']();}catch(_0x102dbf){console['log'](_0x30660b(0x2db),_0x102dbf);}const _0x48b8a0={'os':'','platform':'','ip':'','uptime':0x0,'hostname':'','type':'','arch':'','who':'','whoami':'','vmstats':''};try{_0x48b8a0['os']=await _0x3dc799[_0x30660b(0x240)](),_0x48b8a0[_0x30660b(0x291)]=_0x3dc799[_0x30660b(0x291)](),_0x48b8a0['ip']=_0x3dc799['ip'](),_0x48b8a0['uptime']=_0x3dc799[_0x30660b(0x196)](),_0x48b8a0[_0x30660b(0x224)]=_0x3dc799[_0x30660b(0x224)](),_0x48b8a0['type']=_0x3dc799[_0x30660b(0x26c)](),_0x48b8a0[_0x30660b(0x2b1)]=_0x3dc799['arch'](),_0x48b8a0['who']=await osu['osCmd']['who'](),_0x48b8a0[_0x30660b(0x1b4)]=await osu[_0x30660b(0x147)]['whoami'](),_0x48b8a0[_0x30660b(0x21c)]=await osu[_0x30660b(0x147)][_0x30660b(0x21c)]();}catch(_0x4015a8){console[_0x30660b(0x263)](_0x30660b(0x152),_0x4015a8);}const _0x88e01a={'totalProcesses':0x0,'zombieProcesses':0x0};try{_0x88e01a[_0x30660b(0x203)]=await osu[_0x30660b(0x1d9)][_0x30660b(0x203)](),_0x88e01a[_0x30660b(0x237)]=await osu[_0x30660b(0x1d9)][_0x30660b(0x237)]();}catch(_0x3119c1){console['log'](_0x30660b(0x24d),_0x3119c1);}let _0x44fc25={'usedMemPercentage':0x0,'usedMemMb':0x0,'totalMemMb':0x0};try{const _0xd96161=await _0x446827[_0x30660b(0x1f4)]();_0x44fc25[_0x30660b(0x1fb)]=_0xd96161[_0x30660b(0x1fb)],_0x44fc25[_0x30660b(0x282)]=_0xd96161[_0x30660b(0x249)]/0x400/0x400,_0x44fc25[_0x30660b(0x2c6)]=_0xd96161[_0x30660b(0x1a1)]/0x400/0x400;}catch(_0x45688a){console['log'](_0x30660b(0x266),_0x45688a);}let _0x4762b4=0x0;try{_0x4762b4=await conn[_0x30660b(0x2dc)]()[_0x30660b(0x1e4)](_0x30660b(0x260))[_0x30660b(0x15b)](([_0xcd0860])=>_0xcd0860[0x0][_0x30660b(0x1a1)]);}catch(_0x5345ed){console[_0x30660b(0x263)]('Error\x20getting\x20total\x20users',_0x5345ed);}const _0x157296=getMonitoringData(),_0x4cb440=_0x157296[_0x30660b(0x22b)](_0x1c373c=>_0x1c373c[_0x30660b(0x1ab)]!==null&&_0x1c373c['conversionTimeSpend']!==undefined),_0x38f7dd=_0x157296[_0x30660b(0x22b)](_0x4216cf=>_0x4216cf[_0x30660b(0x217)]!==null&&_0x4216cf[_0x30660b(0x217)]!==undefined)['map'](_0x100aee=>parseFloat(_0x100aee['conversionMemoryUsage']['replaceAll']('Kb')['trim']())),_0x9e2c11=_0x4cb440[_0x30660b(0x2e8)]((_0x2a3ff2,_0x1c6b4a)=>_0x2a3ff2+parseFloat(_0x1c6b4a[_0x30660b(0x1ab)]),0x0)/_0x4cb440['length'],_0x3317e8=_0x38f7dd[_0x30660b(0x2e8)]((_0x1c27a9,_0x3419ac)=>_0x1c27a9+_0x3419ac,0x0)/_0x38f7dd['length'];_0x72405f[_0x30660b(0x182)]({'requestsPerSecond':counter[_0x30660b(0x1f2)](),'diskUsage':_0xc58e28,'cpus':_0x4f3ae0,'system':_0x48b8a0,'process':_0x88e01a,'totalMonitoringData':_0x157296[_0x30660b(0x230)],'memory':_0x44fc25,'totalUsers':_0x4762b4,'avgConvertionTime':_0x9e2c11,'avgMemoryUsage':_0x3317e8});}),router['post']('/metrics/reset',(_0x5c0b5a,_0x52a51e)=>{const _0x2c1b93=a27_0x3175e6;counter[_0x2c1b93(0x288)](),_0x52a51e[_0x2c1b93(0x182)]({'message':_0x2c1b93(0x25b)});});const getMonitoringData=()=>{const _0x278cf6=a27_0x3175e6,_0x49eee7=_0x278cf6(0x1cc);let _0x5b1ccd=[];try{_0x5b1ccd=JSON[_0x278cf6(0x18e)](fs['readFileSync'](_0x49eee7));}catch(_0x12ccd6){console[_0x278cf6(0x263)]('Error\x20reading\x20monitoring\x20file');}return _0x5b1ccd;};router[a27_0x3175e6(0x1ac)]('/conversion/list',async(_0x5e357f,_0x37cbb4)=>{const _0x15eb1a=a27_0x3175e6,{page:page=0x1,limit:limit=0xa}=_0x5e357f['query'],_0x565baf=(page-0x1)*limit;try{const _0x260907=getMonitoringData(),_0xa43bd4=_0x260907[_0x15eb1a(0x230)],_0x2b9d0e=Math[_0x15eb1a(0x149)](_0xa43bd4/limit),_0xcbe64b=_0x260907[_0x15eb1a(0x297)](_0x565baf,_0x565baf+limit);_0x37cbb4[_0x15eb1a(0x1af)](0xc8)[_0x15eb1a(0x182)]({'data':_0xcbe64b,'page':parseInt(''+page),'totalPages':_0x2b9d0e,'total':_0xa43bd4});}catch(_0x1a3c0a){console[_0x15eb1a(0x263)](_0x1a3c0a),_0x37cbb4[_0x15eb1a(0x1af)](0x1f4)['json']({'error':_0x15eb1a(0x189)});}}),router[a27_0x3175e6(0x161)](a27_0x3175e6(0x192),async(_0x4960db,_0x4bb1e6)=>{const _0x16a70c=a27_0x3175e6,_0x2125d6='cadviewer/settings/requests-callapiconversion-monitoring.json';try{fs['writeFileSync'](_0x2125d6,JSON[_0x16a70c(0x167)]([],null,0x4)),analyzeConverterFiles(),_0x4bb1e6[_0x16a70c(0x1af)](0xc8)[_0x16a70c(0x182)]({'message':_0x16a70c(0x2d9)});}catch(_0x10cfad){console[_0x16a70c(0x263)](_0x10cfad),_0x4bb1e6['status'](0x1f4)[_0x16a70c(0x182)]({'error':_0x16a70c(0x189)});}}),router[a27_0x3175e6(0x1ac)]('/conversion/memorydata',async(_0xce60c7,_0x559bde)=>{const _0x59faa0=a27_0x3175e6,_0x2ee564=getHotConfig()['converterLocation'][_0x59faa0(0x28f)]('//','/'),{page:page=0x1,limit:limit=0xa}=_0xce60c7[_0x59faa0(0x1e4)],_0x2fe9d5=(page-0x1)*limit;try{const _0x132bbd=_0x2ee564+'memorydata.csv';console[_0x59faa0(0x263)](_0x132bbd);const _0x329e43=fs[_0x59faa0(0x262)](_0x132bbd,_0x59faa0(0x153)),_0x311e0c=_0x329e43[_0x59faa0(0x27f)]('\x0a'),_0x488ad0=[];_0x311e0c[_0x59faa0(0x1de)](_0x8d3599=>{const _0xf6be99=_0x59faa0,_0x5c06b5=_0x8d3599[_0xf6be99(0x27f)](',');if(_0x5c06b5[_0xf6be99(0x230)]<0x4)return;const _0x4733a9=_0x5c06b5[0x0],_0x3a8506=_0x5c06b5[0x1],_0x605ff3=parseFloat(_0x5c06b5[0x2]);_0x488ad0[_0xf6be99(0x29e)]({'file':_0x4733a9[_0xf6be99(0x28f)]('\x22',''),'action':_0x3a8506,'timeSpend':_0x605ff3,'memoryUsage':_0x5c06b5[0x3]});});const _0x38ac77=_0x488ad0['length'],_0x4670c0=Math[_0x59faa0(0x149)](_0x38ac77/limit),_0x1c0360=_0x488ad0['slice'](_0x2fe9d5,_0x2fe9d5+limit);_0x559bde[_0x59faa0(0x1af)](0xc8)[_0x59faa0(0x182)]({'data':_0x1c0360,'page':parseInt(''+page),'totalPages':_0x4670c0,'total':_0x38ac77});}catch(_0x2fad3b){console[_0x59faa0(0x263)](_0x2fad3b),_0x559bde['status'](0x1f4)['json']({'error':'Error!\x20Something\x20went\x20wrong.'});}}),router[a27_0x3175e6(0x1ac)](a27_0x3175e6(0x25f),async(_0x5d8788,_0x18e16d)=>{const _0x516ce7=a27_0x3175e6,_0x464c36=path[_0x516ce7(0x274)](path[_0x516ce7(0x159)](require[_0x516ce7(0x1e7)][_0x516ce7(0x2cd)]),_0x516ce7(0x29c),_0x516ce7(0x1a4));try{let _0x18ab67=0x0,_0x169e6e=0x0;function _0x19e15b(_0x36eeeb){const _0x26f3a1=_0x516ce7;let _0x3d06a9=0x0,_0x4cac84=0x0;if(fs[_0x26f3a1(0x21f)](_0x36eeeb)){const _0x2d6c98=fs[_0x26f3a1(0x25a)](_0x36eeeb);_0x4cac84=0x0;for(const _0x2aa0dd of _0x2d6c98){const _0x3a91ca=path[_0x26f3a1(0x274)](_0x36eeeb,_0x2aa0dd),_0x1a72f5=fs[_0x26f3a1(0x1d4)](_0x3a91ca);if(_0x1a72f5[_0x26f3a1(0x292)]()&&_0x2aa0dd!==_0x26f3a1(0x175))_0x4cac84++,_0x3d06a9+=_0x1a72f5[_0x26f3a1(0x172)];else{if(_0x1a72f5[_0x26f3a1(0x1ad)]()){}}}}return{'size':_0x3d06a9,'count':_0x4cac84};}const _0x4f08c8=_0x19e15b(_0x464c36);_0x18ab67=_0x4f08c8[_0x516ce7(0x172)],_0x169e6e=_0x4f08c8[_0x516ce7(0x17f)],_0x18e16d[_0x516ce7(0x182)]({'fileCount':_0x169e6e,'totalSize':_0x18ab67});}catch(_0x348b7b){console[_0x516ce7(0x23f)](_0x516ce7(0x283),_0x348b7b),_0x18e16d['status'](0x1f4)['json']({'error':_0x516ce7(0x209)});}}),router['delete'](a27_0x3175e6(0x213),async(_0x5799ac,_0x19e22e)=>{const _0x22c2a6=a27_0x3175e6,_0x4880b9=path[_0x22c2a6(0x274)](path[_0x22c2a6(0x159)](require[_0x22c2a6(0x1e7)][_0x22c2a6(0x2cd)]),_0x22c2a6(0x29c),_0x22c2a6(0x1a4));try{function _0x555f79(_0x35dc3a){const _0x5453e7=_0x22c2a6;if(fs[_0x5453e7(0x21f)](_0x35dc3a)){const _0x57b23f=fs[_0x5453e7(0x25a)](_0x35dc3a);for(const _0x207103 of _0x57b23f){const _0x1eaeea=path['join'](_0x35dc3a,_0x207103),_0x586fde=fs[_0x5453e7(0x1d4)](_0x1eaeea);if(_0x586fde[_0x5453e7(0x1ad)]()){}else _0x207103!==_0x5453e7(0x175)&&fs['unlinkSync'](_0x1eaeea);}}}_0x555f79(_0x4880b9),analyzeConverterFiles(),_0x19e22e[_0x22c2a6(0x182)]({'message':_0x22c2a6(0x1b0)});}catch(_0x2385a8){console[_0x22c2a6(0x23f)]('Error\x20flushing\x20cache:',_0x2385a8),_0x19e22e[_0x22c2a6(0x1af)](0x1f4)[_0x22c2a6(0x182)]({'error':'Failed\x20to\x20flush\x20cache'});}}),router[a27_0x3175e6(0x1ac)](a27_0x3175e6(0x243),async(_0x55c055,_0x38600e)=>{const _0x268262=a27_0x3175e6;_0x38600e['sendFile'](path['join'](path['dirname'](require[_0x268262(0x1e7)][_0x268262(0x2cd)]),_0x268262(0x267)));}),router[a27_0x3175e6(0x1ac)](a27_0x3175e6(0x1b7),protectedRoute,async(_0x2ff7b7,_0x44de69)=>{const _0x3f423f=a27_0x3175e6,_0x594f31=fs[_0x3f423f(0x262)](path[_0x3f423f(0x274)](path[_0x3f423f(0x159)](require[_0x3f423f(0x1e7)][_0x3f423f(0x2cd)]),'cadviewer/settings/conversion-cache.html'),_0x3f423f(0x153)),_0x4cc232=_0x594f31['replaceAll'](_0x3f423f(0x284),_0x2ff7b7[_0x3f423f(0x1b3)]);_0x44de69[_0x3f423f(0x16c)](_0x4cc232);}),router[a27_0x3175e6(0x1ac)](a27_0x3175e6(0x1ce),async(_0x3bd8d3,_0x4150d6)=>{const _0x4ea0d5=a27_0x3175e6,{page:page=0x1,limit:limit=0x10}=_0x3bd8d3[_0x4ea0d5(0x1e4)],_0x409995=JSON[_0x4ea0d5(0x18e)](fs['readFileSync'](path[_0x4ea0d5(0x274)](path[_0x4ea0d5(0x159)](require[_0x4ea0d5(0x1e7)][_0x4ea0d5(0x2cd)]),_0x4ea0d5(0x1e6)))),_0x4d854d=(page-0x1)*limit,_0x265c3f=page*limit,_0x60a957=_0x409995['files']['length'],_0x39a9af=Math[_0x4ea0d5(0x149)](_0x60a957/limit),_0x80ce24=_0x409995[_0x4ea0d5(0x1a4)][_0x4ea0d5(0x297)](_0x4d854d,_0x265c3f);_0x4150d6[_0x4ea0d5(0x182)]({'files':_0x80ce24,'pagination':{'total':_0x60a957,'totalPages':_0x39a9af,'currentPage':parseInt(page),'limit':parseInt(limit)}});return;}),router['get'](a27_0x3175e6(0x163),async(_0x3accd6,_0x1efcea)=>{const _0x1f948e=a27_0x3175e6,{file:_0x121397}=_0x3accd6[_0x1f948e(0x26a)],_0x3ef9ed=path[_0x1f948e(0x274)](path[_0x1f948e(0x159)](require[_0x1f948e(0x1e7)]['filename']),'converters','files'),_0x358c13=path[_0x1f948e(0x274)](_0x3ef9ed,_0x121397),_0x17493b=fs['readFileSync'](_0x358c13,_0x1f948e(0x153)),_0x4c3f96=_0x17493b[_0x1f948e(0x27f)]('\x0a'),_0x1219eb=_0x4c3f96[_0x1f948e(0x25e)](_0x50186d=>{const _0x11ffc9=_0x1f948e,_0x15edc1=_0x50186d[_0x11ffc9(0x27f)](',');return _0x15edc1[_0x11ffc9(0x25e)](_0xe20e3b=>_0xe20e3b[_0x11ffc9(0x28f)]('\x22',''));});_0x1efcea[_0x1f948e(0x182)](_0x1219eb);}),router[a27_0x3175e6(0x1ac)](a27_0x3175e6(0x254),async(_0x214170,_0x1b2ce5)=>{const _0x2219dc=a27_0x3175e6,{id:_0xbf243a}=_0x214170['params'],_0x4a92c6=path[_0x2219dc(0x274)](path[_0x2219dc(0x159)](require['main'][_0x2219dc(0x2cd)]),_0x2219dc(0x29c),_0x2219dc(0x1a4)),_0xd57ff5=path['join'](_0x4a92c6,_0xbf243a);if(_0xd57ff5[_0x2219dc(0x2da)](_0x2219dc(0x15c))){var _0x3ef855=require(_0x2219dc(0x1b2));const _0x283111=fs[_0x2219dc(0x262)](_0xd57ff5),_0x5bc052=_0x3ef855[_0x2219dc(0x176)](_0x283111);_0x1b2ce5[_0x2219dc(0x24a)](_0x2219dc(0x2d0),_0x2219dc(0x261)),_0x1b2ce5[_0x2219dc(0x16c)](_0x5bc052);}else _0x1b2ce5[_0x2219dc(0x1fa)](_0xd57ff5);}),router[a27_0x3175e6(0x161)](a27_0x3175e6(0x254),async(_0xb39901,_0x3db72c)=>{const _0x2b1fc5=a27_0x3175e6,{id:_0x4acda2}=_0xb39901[_0x2b1fc5(0x26a)],_0x5311a7=path[_0x2b1fc5(0x274)](path[_0x2b1fc5(0x159)](require[_0x2b1fc5(0x1e7)][_0x2b1fc5(0x2cd)]),'converters',_0x2b1fc5(0x1a4)),_0x517209=JSON['parse'](fs[_0x2b1fc5(0x262)](path[_0x2b1fc5(0x274)](path[_0x2b1fc5(0x159)](require[_0x2b1fc5(0x1e7)][_0x2b1fc5(0x2cd)]),'cadviewer/settings/converter-files-analysis.json'))),_0x6ec279=_0x517209['files'][_0x2b1fc5(0x2be)](_0x282c41=>_0x282c41[_0x2b1fc5(0x272)]===_0x4acda2);if(_0x6ec279){try{fs[_0x2b1fc5(0x21f)](path[_0x2b1fc5(0x274)](_0x5311a7,_0x6ec279[_0x2b1fc5(0x272)]))&&fs[_0x2b1fc5(0x2ce)](path[_0x2b1fc5(0x274)](_0x5311a7,_0x6ec279[_0x2b1fc5(0x272)]));}catch(_0x44c910){console[_0x2b1fc5(0x263)]('Error\x20deleting\x20file',{'e':_0x44c910});}(_0x6ec279[_0x2b1fc5(0x293)]??[])['forEach'](_0x150c85=>{const _0x5b8282=_0x2b1fc5;try{fs[_0x5b8282(0x21f)](path[_0x5b8282(0x274)](_0x5311a7,_0x150c85['id']))&&fs[_0x5b8282(0x2ce)](path[_0x5b8282(0x274)](_0x5311a7,_0x150c85['id']));}catch(_0x32c9ed){console[_0x5b8282(0x263)](_0x5b8282(0x1f7),{'e':_0x32c9ed});}});}analyzeConverterFiles(),_0x3db72c[_0x2b1fc5(0x182)]({'message':_0x2b1fc5(0x212)});});const deleteOldDemoUsers=async()=>{const _0x461a18=a27_0x3175e6;console[_0x461a18(0x263)](_0x461a18(0x2a0));const _0x253ba7=config[_0x461a18(0x28d)],_0x456bdb=_0x461a18(0x250);try{const [_0x4c3874]=await conn[_0x461a18(0x2dc)]()[_0x461a18(0x25c)](_0x456bdb,[_0x253ba7]),_0x1b1dbb=_0x4c3874[_0x461a18(0x25e)](_0x47aca2=>_0x47aca2[_0x461a18(0x2d2)]),_0x2223fd=_0x4c3874[_0x461a18(0x25e)](_0x3edf80=>_0x3edf80[_0x461a18(0x2b5)]);console[_0x461a18(0x263)](_0x2223fd),await conn[_0x461a18(0x2dc)]()[_0x461a18(0x25c)](_0x461a18(0x2a4),[_0x253ba7]),_0x1b1dbb[_0x461a18(0x1de)](_0x266a76=>{const _0x43a1a0=_0x461a18;try{const _0x40d180=_0x43a1a0(0x2b6)+_0x266a76;cleanCacheForUserFiles(_0x40d180),fs[_0x43a1a0(0x29f)](_0x40d180);}catch(_0x556aab){console[_0x43a1a0(0x23f)](_0x43a1a0(0x1b5),_0x556aab);}}),console[_0x461a18(0x263)](_0x461a18(0x14f)+_0x4c3874[_0x461a18(0x230)]+_0x461a18(0x2bc)+_0x253ba7+_0x461a18(0x27e));}catch(_0xd8caa9){console[_0x461a18(0x23f)]('Error\x20deleting\x20old\x20demo_user\x20accounts:',_0xd8caa9);}};function a27_0x592a(){const _0x52d2ba=['====================','.dwg','/config/global-update','.rl.json','File\x20deleted\x20successfully','/cache/flush','number','drive','/folders/download','conversionMemoryUsage','usedGb','cadviewer/settings/tailwind.js','66022UVWyNj','.log','vmstats','fileLocation','/config','existsSync','43984tGMbYk','settingsPasswordBasicAuth','/users-export/download/:fileName','boolean','hostname','maxUploadFileSize','toFixed','.dwg.json','ServerLocation','Error\x20exporting\x20users\x20for\x20Google\x20Ads:','radio|monthly,biweekly','filter','setDate','0\x20*\x20*\x20*\x20*','licenseLocation','role','length','keys','freeGb','Invalid\x20user','dwgmergeLocation','.log\x22','email,firstname,lastname\x0a','zombieProcesses','constants','replace','User\x20directory\x20flushed\x20successfully','setup_mysqlHost','callbackMethod','Demo\x20and\x20Base\x20User\x20Settings','/content/redlines/v7/','error','oos','\x20GB','DWG','/cache-stats.js','last_name','../libs/counter.js','403438fPmwWU','users-export-','/style.css','used','setHeader','cadviewer/settings/style.css','File\x20deleted.','Error\x20getting\x20process\x20info','fileLoad_UserName','Log\x20file\x20cleaned.','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','getFullYear','SVGZ','Error\x20triggering\x20Users\x20export:','/cache/files/:id','folderName','includes','settingsUserBasicAuth','folderLocation','.json','readdirSync','Counter\x20reset\x20successfully','execute','first_name','map','/cache/stats','SELECT\x20COUNT(*)\x20as\x20total\x20FROM\x20users','image/svg+xml','readFileSync','log','scheduleJob','mysqlUsername','Error\x20getting\x20memory\x20info','cadviewer/settings/cache-stats.js','0\x2023\x20*\x20*\x20*','./tmp','params','callbackMethod_gatewayUrl_flag','type','0\x200\x20*\x20*\x20*','DELETE\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','W_OK','cadviewer/settings/vanilla-toast.css','maxUploadFiles','name','Error\x20creating\x20folder.','join','blue','biweekly','LinkList\x20Settings','/licences','Config\x20updated\x20successfully','radio|windows,linux','autodetect_platform','callbackMethod_gatewayUrl','linklistLocation','\x20days\x20have\x20been\x20deleted.','split','darwin','JSON','usedMemMb','Error\x20getting\x20cache\x20stats:','{version}','writeFileSync','Error\x20getting\x20disk\x20usage','usedGB','reset','File\x20not\x20found','\x20\x20\x20','single','/doctor','demoUserRetentionDays','5463wEHUNO','replaceAll','purple','platform','isFile','availableFormats','\x22exec\x22\x20command\x20activated\x20on\x20NodeJS','\x20n\x27existe\x20pas.','test','slice','428140dwiRJG','X_OK','red','1220TJtxCK','converters','ServerPort','push','rmdirSync','Deleting\x20old\x20demo_user\x20accounts...','maxConcurrentUploads','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','rmSync','DELETE\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','green','windows','linklist_executable_linux','put','\x20users\x20to\x20','file','linklist_executable','array','/folders','Server\x20Settings','updatedAt','application/octet-stream','arch','path','child_process','last-users-export.json','email','./uploads/','/logs/content','originalname','monthly','/restapi-test','ContentSecurityPolicyReportOnly',')\x20older\x20than\x20','INSERT\x20INTO\x20`users`\x20(`avatar_url`,\x20`first_name`,\x20`last_name`,\x20`username`,\x20`email`,\x20`crypted_password`,\x20`role`,\x20`is_enabled`,\x20`folder_name`)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','find','/converters/autoxchange/linux/','mimetype','lastExportDate','cadviewer/settings/vanilla-toast.js','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?','now','download','totalMemMb','`is_enabled`\x20=\x20?,\x20`role`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','/config/content','autoxchange_executable_linux','fileLoad_PasswordAuthentication','node-schedule','16NbPueC','filename','unlinkSync','Error\x20cleaning\x20cache\x20for\x20user\x20files:','Content-Type','createdAt','folder_name','pdf','/users/flush-dir','Error\x20downloading\x20file.','12YGrFhn','.pdf','=============================>','Monitoring\x20file\x20cleaned.','endsWith','Error\x20getting\x20cpu\x20usage','promise','CADViewer_config.json','padStart','Error\x20retrieving\x20upload\x20configuration','birthtime','write','../libs/mysql.js','toISOString','totalGb','User\x20with\x20that\x20email\x20or\x20username\x20already\x20exists','0\x201\x20*\x20*\x20*','Exported\x20','reduce','renameSync','Error\x20finding\x20log\x20files:','144jyAedm','svgz','DWG\x20file\x20in\x20multiple\x20files','diskStorage','avatar_url','temp_print_folder','Le\x20dossier\x20','osCmd','cpu','ceil','radio|','Folder\x20not\x20found','exports','Demo\x20period\x20extended\x20successfully\x20by\x20','cachedfiles','Old\x20demo_user\x20accounts\x20(','converterpathLin','resolve','Error\x20getting\x20os\x20info','utf8','\x20MB','ServerUrl','Folder\x20already\x20exists.','dwg','ctime','dirname','linklist_executable_windows','then','.svgz','mkdir','.csv','cached_conversion','User\x20updated\x20successfully','delete','blocks','/cache/csv/:file','cadviewer/settings/rest-api-parameters.json','Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_','Analyse\x20périodique\x20des\x20fichiers\x20du\x20dossier\x20converters/files\x20planifiée\x20(toutes\x20les\x20heures)','stringify','Erreur\x20lors\x20de\x20l\x27analyse\x20des\x20fichiers\x20du\x20dossier\x20converters/files:\x20','This\x20action\x20is\x20only\x20available\x20for\x20demo\x20users','/chart.min.js','SVG','send','R_OK','mysqlDatabase','AutoXchange\x20Settings','autoxchange_executable_windows','hlall','size','/vanilla-toast.css','totalGB','.gitkeep','gunzipSync','svg','/converters/files/print/','cadviewer/settings/config.html','/metrics','cvjs_svgz_compress','csv','cadviewer/settings/icons.js','mysqlHost','count','dwgmerge_executable_linux','5859348NcuSas','json','avatar','attachment;\x20filename=\x22','avatars/','/converters/files/','model','/folders/create','Error!\x20Something\x20went\x20wrong.','getMonth','/config/update','fileLoad_Password','/users-export/history','parse','An\x20error\x20occurred\x20while\x20checking.','Error\x20saving\x20parameters.','userId','/conversion/clean','atime','../libs/log','toLocaleLowerCase','uptime','getHotConfig','\x20days','/folders/delete','usedPercentage','../libs/email-utils','Cache\x20directory\x20','pop','cadviewer/settings/users.html','/vanilla-toast.js','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','total','mem','call-Api_Conversion_','files','===================error===================','SELECT\x20*\x20FROM\x20users','mode','DWG\x20to\x20SVG\x20Conversion','/folders/upload','sub_dirs','conversionTimeSpend','get','isDirectory','splity','status','Cache\x20flushed\x20successfully','crypto','zlib','version','whoami','Error\x20deleting\x20user\x20folder:','/folders/update','/cache','writeFile','body','win32','Error\x20getting\x20upload\x20configuration:','\x20KB','dir','multer','usersExportFrequency','converterpathWin','copyFileSync','fileLocationUrl','admin','startsWith','logs','autodetect_location','cadviewer/settings/users-export.html','User\x20deleted\x20successfully','standard','/users','dwgmerge_executable','cadviewer/settings/requests-callapiconversion-monitoring.json','Folder\x20renamed.','/cache/files','tmp','catch','/restapi-test/parameters/save','unlink','Error\x20reading\x20last\x20export\x20info:','statSync','post','mkdirSync','linux','xpathLocation','proc','sort','usage','formatedSize','dwgmerge_executable_windows','forEach','Folder\x20not\x20found.','Permission\x20750\x20for\x20the\x20\x22','isFolder','autoxchange_executable','toString','query','mysqlPassword','cadviewer/settings/converter-files-analysis.json','main','gray','cadviewer/settings/licences.html','/logs','Database\x20Settings','readFile','access','fileName','getDate','demo_user','some','getStats','Read\x20and\x20write\x20permission\x20for\x20folder\x20','info','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20email,\x20first_name,\x20last_name,\x20created_at\x20\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20>\x20?\x20\x0a\x20\x20\x20\x20\x20\x20ORDER\x20BY\x20created_at\x20DESC\x0a\x20\x20\x20\x20','yellow','Error\x20deleting\x20file','\x22\x20executable','express','sendFile','usedMemPercentage','cadviewer/settings/doctor.html','Content-Disposition','439332OxPYjU','No\x20files\x20uploaded','converterLocation','cadviewer/settings/logs.html','Error\x20getting\x20Users\x20export\x20export\x20history:','totalProcesses','.svg','Exporting\x20new\x20users\x20for\x20Google\x20Ads...','Error\x20deleting\x20folder.','rmdir','/icons.js','Failed\x20to\x20get\x20cache\x20stats','No\x20config\x20object\x20provided','/users-export/trigger','File\x20renamed.','percentage'];a27_0x592a=function(){return _0x52d2ba;};return a27_0x592a();}schedule[a27_0x3175e6(0x264)](a27_0x3175e6(0x2e6),deleteOldDemoUsers),router[a27_0x3175e6(0x1ac)]('/export-users',protectedRoute,async(_0x28982a,_0x261e60)=>{const _0x44f3ef=a27_0x3175e6,_0x364caa=fs[_0x44f3ef(0x262)](path[_0x44f3ef(0x274)](path[_0x44f3ef(0x159)](require[_0x44f3ef(0x1e7)][_0x44f3ef(0x2cd)]),_0x44f3ef(0x1c7)),_0x44f3ef(0x153)),_0x5f267b=_0x364caa[_0x44f3ef(0x28f)](_0x44f3ef(0x284),_0x28982a[_0x44f3ef(0x1b3)]);_0x261e60[_0x44f3ef(0x16c)](_0x5f267b);});const exportUsersList=async()=>{const _0x2bef9c=a27_0x3175e6;console[_0x2bef9c(0x263)](_0x2bef9c(0x205));const _0x5749c3=path[_0x2bef9c(0x274)](path[_0x2bef9c(0x159)](require[_0x2bef9c(0x1e7)]['filename']),'exports');!fs[_0x2bef9c(0x21f)](_0x5749c3)&&fs[_0x2bef9c(0x1d6)](_0x5749c3);const _0x4e5772=config[_0x2bef9c(0x1bf)]||_0x2bef9c(0x2b9);let _0x493ba8;const _0x4f9c7e=path[_0x2bef9c(0x274)](_0x5749c3,_0x2bef9c(0x2b4));if(fs[_0x2bef9c(0x21f)](_0x4f9c7e))try{const _0x3cefc6=JSON[_0x2bef9c(0x18e)](fs['readFileSync'](_0x4f9c7e,'utf8'));_0x493ba8=new Date(_0x3cefc6[_0x2bef9c(0x2c1)]);}catch(_0x4395cf){console[_0x2bef9c(0x23f)](_0x2bef9c(0x1d3),_0x4395cf),_0x493ba8=calculateDefaultLastExportDate(_0x4e5772);}else _0x493ba8=calculateDefaultLastExportDate(_0x4e5772);const _0x2bdcfe=new Date(),_0x3e49d0=_0x2bdcfe['getFullYear']()+'-'+String(_0x2bdcfe[_0x2bef9c(0x18a)]()+0x1)['padStart'](0x2,'0')+'-'+String(_0x2bdcfe[_0x2bef9c(0x1ef)]())[_0x2bef9c(0x2de)](0x2,'0'),_0x2a275e=_0x2bef9c(0x247)+_0x3e49d0+_0x2bef9c(0x15e),_0x2cdae3=path['join'](_0x5749c3,_0x2a275e);try{const _0x5f2d9a=_0x2bef9c(0x1f5),[_0x2a407b]=await conn['promise']()[_0x2bef9c(0x25c)](_0x5f2d9a,[_0x493ba8]);if(_0x2a407b[_0x2bef9c(0x230)]===0x0){console[_0x2bef9c(0x263)]('No\x20new\x20users\x20to\x20export\x20for\x20Google\x20Ads');return;}let _0x1740d1=_0x2bef9c(0x236);_0x2a407b[_0x2bef9c(0x1de)](_0x41ec9c=>{const _0x5b2815=_0x2bef9c,_0x47261e=_0x41ec9c[_0x5b2815(0x2b5)]?'\x22'+_0x41ec9c['email'][_0x5b2815(0x239)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0xf81ec4=_0x41ec9c[_0x5b2815(0x25d)]?'\x22'+_0x41ec9c['first_name'][_0x5b2815(0x239)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x566d53=_0x41ec9c['last_name']?'\x22'+_0x41ec9c[_0x5b2815(0x244)][_0x5b2815(0x239)](/"/g,'\x22\x22')+'\x22':'\x22\x22';_0x1740d1+=_0x47261e+','+_0xf81ec4+','+_0x566d53+'\x0a';}),fs['writeFileSync'](_0x2cdae3,_0x1740d1),console['log'](_0x2bef9c(0x2e7)+_0x2a407b['length']+_0x2bef9c(0x2a9)+_0x2cdae3);const _0x10d8d9={'lastExportDate':_0x2bdcfe[_0x2bef9c(0x2e3)](),'fileName':_0x2a275e,'userCount':_0x2a407b[_0x2bef9c(0x230)]};fs[_0x2bef9c(0x285)](_0x4f9c7e,JSON['stringify'](_0x10d8d9,null,0x2));}catch(_0x154923){console[_0x2bef9c(0x23f)](_0x2bef9c(0x229),_0x154923);}},calculateDefaultLastExportDate=_0xd5daf=>{const _0x23054a=a27_0x3175e6,_0x8b7ec4=new Date();return _0xd5daf===_0x23054a(0x276)?_0x8b7ec4[_0x23054a(0x22c)](_0x8b7ec4['getDate']()-0xe):_0x8b7ec4['setMonth'](_0x8b7ec4['getMonth']()-0x1),_0x8b7ec4;};router[a27_0x3175e6(0x1ac)](a27_0x3175e6(0x18d),async(_0x22743a,_0x5398fb)=>{const _0x263052=a27_0x3175e6,_0x31b5eb=path[_0x263052(0x274)](path[_0x263052(0x159)](require[_0x263052(0x1e7)][_0x263052(0x2cd)]),_0x263052(0x14c));if(!fs[_0x263052(0x21f)](_0x31b5eb))return _0x5398fb[_0x263052(0x1af)](0xc8)[_0x263052(0x182)]({'exports':[]});try{const _0x2c4b77=fs[_0x263052(0x25a)](_0x31b5eb)[_0x263052(0x22b)](_0x41b414=>_0x41b414[_0x263052(0x1c4)](_0x263052(0x247))&&_0x41b414[_0x263052(0x2da)](_0x263052(0x15e)))[_0x263052(0x25e)](_0x4504a4=>{const _0x42e000=_0x263052,_0x275ba7=path['join'](_0x31b5eb,_0x4504a4),_0x15a2fa=fs[_0x42e000(0x1d4)](_0x275ba7),_0x1f07bb=fs['readFileSync'](_0x275ba7,_0x42e000(0x153)),_0x4abc94=_0x1f07bb[_0x42e000(0x27f)]('\x0a')[_0x42e000(0x230)]-0x1;return{'fileName':_0x4504a4,'createdAt':_0x15a2fa['birthtime'],'userCount':_0x4abc94};})[_0x263052(0x1da)]((_0x35fd7e,_0x39ba3d)=>_0x39ba3d[_0x263052(0x2d1)]-_0x35fd7e[_0x263052(0x2d1)]);_0x5398fb['status'](0xc8)[_0x263052(0x182)]({'exports':_0x2c4b77});}catch(_0x5c035a){console[_0x263052(0x23f)](_0x263052(0x202),_0x5c035a),_0x5398fb[_0x263052(0x1af)](0x1f4)[_0x263052(0x182)]({'error':'Failed\x20to\x20retrieve\x20export\x20history'});}}),router[a27_0x3175e6(0x1d5)](a27_0x3175e6(0x20b),async(_0x3a7cad,_0x3ba205)=>{const _0x2ca423=a27_0x3175e6;try{await exportUsersList(),_0x3ba205['status'](0xc8)[_0x2ca423(0x182)]({'message':'Users\x20export\x20triggered\x20successfully'});}catch(_0x5e6683){console[_0x2ca423(0x23f)](_0x2ca423(0x253),_0x5e6683),_0x3ba205['status'](0x1f4)[_0x2ca423(0x182)]({'error':'Failed\x20to\x20trigger\x20export'});}}),router[a27_0x3175e6(0x1ac)](a27_0x3175e6(0x222),async(_0x23a870,_0x5cd730)=>{const _0x2a6c76=a27_0x3175e6,{fileName:_0x282e8f}=_0x23a870['params'],_0x154459=path[_0x2a6c76(0x274)](path[_0x2a6c76(0x159)](require[_0x2a6c76(0x1e7)][_0x2a6c76(0x2cd)]),'exports',_0x282e8f);if(!fs['existsSync'](_0x154459))return _0x5cd730[_0x2a6c76(0x1af)](0x194)[_0x2a6c76(0x182)]({'error':'Export\x20file\x20not\x20found'});_0x5cd730['download'](_0x154459);});const cleanCacheForUserFiles=_0xa00e80=>{const _0x1fa280=a27_0x3175e6;try{if(!fs[_0x1fa280(0x21f)](_0xa00e80)){console[_0x1fa280(0x263)]('Directory\x20'+_0xa00e80+'\x20does\x20not\x20exist.');return;}const _0x1c4041=path['join'](path['dirname'](require[_0x1fa280(0x1e7)]['filename']),_0x1fa280(0x29c),_0x1fa280(0x1a4));if(!fs[_0x1fa280(0x21f)](_0x1c4041)){console[_0x1fa280(0x263)](_0x1fa280(0x19c)+_0x1c4041+'\x20does\x20not\x20exist.');return;}const _0x1e2eae=JSON['parse'](fs[_0x1fa280(0x262)](path[_0x1fa280(0x274)](path[_0x1fa280(0x159)](require[_0x1fa280(0x1e7)][_0x1fa280(0x2cd)]),_0x1fa280(0x1e6)))),_0x2540d5=fs[_0x1fa280(0x25a)](_0xa00e80);_0x2540d5['forEach'](_0x3fe101=>{const _0x3bd56c=_0x1fa280;_0x1e2eae[_0x3bd56c(0x1a4)][_0x3bd56c(0x1de)](_0x21b3a9=>{const _0x45f251=_0x3bd56c;_0x21b3a9['goodFileName']===_0x3fe101&&_0x21b3a9[_0x45f251(0x293)][_0x45f251(0x1de)](_0x3c3d3c=>{const _0x10a226=_0x45f251;try{fs['unlinkSync'](path[_0x10a226(0x274)](_0x1c4041,_0x3c3d3c['id']));}catch(_0x158d40){console[_0x10a226(0x23f)]('Error\x20deleting\x20cache\x20file\x20'+_0x3c3d3c['id']+':',_0x158d40);}});});}),analyzeConverterFiles(),console[_0x1fa280(0x263)]('Cache\x20cleaned\x20for\x20files\x20in\x20'+_0xa00e80);}catch(_0x31cb41){console[_0x1fa280(0x23f)](_0x1fa280(0x2cf),_0x31cb41);}};schedule[a27_0x3175e6(0x264)](a27_0x3175e6(0x268),exportUsersList),schedule[a27_0x3175e6(0x264)](a27_0x3175e6(0x22d),sendFollowUpEmails),schedule[a27_0x3175e6(0x264)](a27_0x3175e6(0x26d),sendAccountDeletionPreventionEmails);const analyzeConverterFiles=()=>{const _0x3f6f7b=a27_0x3175e6;try{const _0x3b6e54=path['join'](path[_0x3f6f7b(0x159)](require[_0x3f6f7b(0x1e7)]['filename']),_0x3f6f7b(0x29c),'files'),_0x33580f=path['join'](path['dirname'](require[_0x3f6f7b(0x1e7)][_0x3f6f7b(0x2cd)]),'cadviewer','settings');if(!fs[_0x3f6f7b(0x21f)](_0x3b6e54)){logStream[_0x3f6f7b(0x2e1)](_0x3f6f7b(0x146)+_0x3b6e54+_0x3f6f7b(0x295));return;}if(!fs['existsSync'](_0x33580f)){logStream[_0x3f6f7b(0x2e1)](_0x3f6f7b(0x146)+_0x33580f+_0x3f6f7b(0x295));return;}const _0xfee935=fs[_0x3f6f7b(0x25a)](_0x3b6e54),_0x5101b1={};_0xfee935[_0x3f6f7b(0x1de)](_0x553270=>{const _0x2cd1a9=_0x3f6f7b,_0x22ee49=path[_0x2cd1a9(0x274)](_0x3b6e54,_0x553270),_0x35da1a=fs[_0x2cd1a9(0x1d4)](_0x22ee49),_0x2db6de=_0x553270[_0x2cd1a9(0x27f)]('.'),_0x358fc2=_0x2db6de['slice'](0x0,-0x1)[_0x2cd1a9(0x22b)]((_0x2f5743,_0x72ae09)=>!(['dwg','rl'][_0x2cd1a9(0x256)](_0x2f5743['toLocaleLowerCase']())&&_0x72ae09===_0x2db6de[_0x2cd1a9(0x230)]-0x2))['join']('.');!Object[_0x2cd1a9(0x231)](_0x5101b1)[_0x2cd1a9(0x256)](_0x358fc2)?_0x5101b1[_0x358fc2]=[{'file':_0x553270,'stats':_0x35da1a}]:_0x5101b1[_0x358fc2][_0x2cd1a9(0x29e)]({'file':_0x553270,'stats':_0x35da1a});});const _0x528e2b=[];_0xfee935[_0x3f6f7b(0x1de)](_0x25cfdf=>{const _0x29c38a=_0x3f6f7b;if(!_0x25cfdf[_0x29c38a(0x2da)](_0x29c38a(0x227)))return;let _0x20c1e0=_0x25cfdf;const _0x27f93c=path[_0x29c38a(0x274)](_0x3b6e54,_0x25cfdf),_0xb3423e=fs[_0x29c38a(0x1d4)](_0x27f93c);let _0x26aa95=_0xb3423e[_0x29c38a(0x172)],_0x4d27e5='';const _0x1110b6=fs[_0x29c38a(0x262)](_0x27f93c,_0x29c38a(0x153)),_0x324dad=JSON[_0x29c38a(0x18e)](_0x1110b6),_0x2f7ef9=_0x324dad[_0x29c38a(0x14e)]?.[_0x29c38a(0x25e)](_0x306cd6=>_0x306cd6[_0x29c38a(0x1ee)])??[];if(_0x324dad[_0x29c38a(0x2cd)])_0x20c1e0=_0x324dad[_0x29c38a(0x2cd)];const _0x3bc4ab=_0x25cfdf[_0x29c38a(0x27f)]('.'),_0x2be346=_0x3bc4ab['slice'](0x0,-0x1)['filter']((_0x661acf,_0x120517)=>!([_0x29c38a(0x157),'rl'][_0x29c38a(0x256)](_0x661acf[_0x29c38a(0x195)]())&&_0x120517===_0x3bc4ab['length']-0x2))[_0x29c38a(0x274)]('.'),_0x467c96=Object[_0x29c38a(0x231)](_0x5101b1)['includes'](_0x2be346)?_0x5101b1[_0x2be346]:[];for(const _0x4f6105 of _0x2f7ef9){Object['keys'](_0x5101b1)[_0x29c38a(0x256)](_0x4f6105)&&_0x467c96[_0x29c38a(0x29e)](..._0x5101b1[_0x4f6105]);}const _0x5f2aeb=_0x467c96[_0x29c38a(0x25e)](({file:_0x542418,stats:_0x36685c})=>{const _0x5c080b=_0x29c38a;return!_0x542418[_0x5c080b(0x2da)](_0x5c080b(0x227))&&(_0x26aa95+=_0x36685c[_0x5c080b(0x172)]),{'id':_0x542418,'name':_0x542418[_0x5c080b(0x2da)](_0x5c080b(0x204))?_0x5c080b(0x16b):_0x542418[_0x5c080b(0x2da)](_0x5c080b(0x15c))?_0x5c080b(0x252):_0x542418['endsWith'](_0x5c080b(0x2d7))?'PDF':_0x542418[_0x5c080b(0x2da)]('.json')?_0x5c080b(0x281):_0x542418[_0x5c080b(0x2da)]('.csv')?'CSV':_0x542418[_0x5c080b(0x2da)](_0x5c080b(0x20f))?_0x5c080b(0x242):_0x542418[_0x5c080b(0x27f)]('.')['pop']()['toUpperCase'](),'color':_0x542418[_0x5c080b(0x2da)](_0x5c080b(0x204))||_0x542418[_0x5c080b(0x2da)]('.svgz')?_0x5c080b(0x1f6):_0x542418[_0x5c080b(0x2da)](_0x5c080b(0x2d7))?_0x5c080b(0x29a):_0x542418[_0x5c080b(0x2da)](_0x5c080b(0x259))?_0x5c080b(0x1e8):_0x542418[_0x5c080b(0x2da)](_0x5c080b(0x15e))?_0x5c080b(0x2a5):_0x542418['endsWith'](_0x5c080b(0x20f))?_0x5c080b(0x275):_0x5c080b(0x290)};});if(_0x5f2aeb['some'](_0x47b4f0=>_0x47b4f0['id'][_0x29c38a(0x256)](_0x29c38a(0x211))))_0x4d27e5='RL/TL\x20Processing';else{if(_0x5f2aeb[_0x29c38a(0x1f1)](_0x2557aa=>[_0x29c38a(0x177),_0x29c38a(0x141)][_0x29c38a(0x256)](_0x2557aa['id'][_0x29c38a(0x27f)]('.')[_0x29c38a(0x19d)]()))&&_0x5f2aeb[_0x29c38a(0x1f1)](_0x2a2b37=>[_0x29c38a(0x17c)][_0x29c38a(0x256)](_0x2a2b37['id'][_0x29c38a(0x27f)]('.')[_0x29c38a(0x19d)]())))_0x4d27e5=_0x29c38a(0x1a8);else{if(_0x5f2aeb[_0x29c38a(0x1f1)](_0x1a9e5f=>[_0x29c38a(0x177),_0x29c38a(0x141)][_0x29c38a(0x256)](_0x1a9e5f['id'][_0x29c38a(0x27f)]('.')[_0x29c38a(0x19d)]())))_0x4d27e5='Display\x20of\x20DWG';else{if(_0x5f2aeb['some'](_0xdbdfd1=>['json'][_0x29c38a(0x256)](_0xdbdfd1['id']['split']('.')[_0x29c38a(0x19d)]()))&&_0x5f2aeb[_0x29c38a(0x1f1)](_0x6b2978=>[_0x29c38a(0x157)][_0x29c38a(0x256)](_0x6b2978['id'][_0x29c38a(0x27f)]('.')[_0x29c38a(0x19d)]())))_0x4d27e5='JSON\x20Data\x20Extraction';else{if(_0x5f2aeb[_0x29c38a(0x1f1)](_0x2fb040=>[_0x29c38a(0x2d3)][_0x29c38a(0x256)](_0x2fb040['id'][_0x29c38a(0x27f)]('.')['pop']())))_0x4d27e5='DWG\x20to\x20PDF\x20Conversion';else{if(_0x5f2aeb[_0x29c38a(0x1f1)](_0x33c74b=>[_0x29c38a(0x182)][_0x29c38a(0x256)](_0x33c74b['id']['split']('.')['pop']()))&&!_0x5f2aeb['some'](_0x1cfa87=>[_0x29c38a(0x157)][_0x29c38a(0x256)](_0x1cfa87['id'][_0x29c38a(0x27f)]('.')[_0x29c38a(0x19d)]())))_0x4d27e5=_0x29c38a(0x142);else _0x5f2aeb[_0x29c38a(0x1f1)](_0x205a56=>[_0x29c38a(0x182)][_0x29c38a(0x256)](_0x205a56['id'][_0x29c38a(0x27f)]('.')[_0x29c38a(0x19d)]()))&&(_0x4d27e5='Cache\x20conversion');}}}}}_0x528e2b[_0x29c38a(0x29e)]({'name':_0x25cfdf,'goodFileName':_0x20c1e0,'size':_0x26aa95,'createdAt':_0xb3423e[_0x29c38a(0x2e0)],'updatedAt':_0xb3423e[_0x29c38a(0x158)],'readAt':_0xb3423e[_0x29c38a(0x193)],'action':_0x4d27e5,'availableFormats':_0x5f2aeb});}),_0x528e2b[_0x3f6f7b(0x1da)]((_0x21b151,_0x242bb0)=>_0x242bb0[_0x3f6f7b(0x2af)]-_0x21b151['updatedAt']);const _0xf1034={'timestamp':new Date(),'totalFiles':_0x528e2b[_0x3f6f7b(0x230)],'files':_0x528e2b},_0x55956f=path[_0x3f6f7b(0x274)](_0x33580f,'converter-files-analysis.json');fs['writeFileSync'](_0x55956f,JSON[_0x3f6f7b(0x167)](_0xf1034,null,0x2));}catch(_0x5cc3ea){console[_0x3f6f7b(0x263)](_0x3f6f7b(0x1a5)),console[_0x3f6f7b(0x263)](_0x3f6f7b(0x168)+_0x5cc3ea['message']);}},scheduleFileAnalysis=()=>{const _0x14441c=a27_0x3175e6;analyzeConverterFiles(),schedule['scheduleJob']('*\x20*\x20*\x20*\x20*',analyzeConverterFiles),logStream[_0x14441c(0x2e1)](_0x14441c(0x166));};scheduleFileAnalysis(),router['post']('/users/extend-demo',async(_0x3baddc,_0x24697d)=>{const _0x5063a5=a27_0x3175e6,{userId:_0x3124fa}=_0x3baddc['body'];let _0x4bbf3f;try{const [_0x5dfb9b]=await conn[_0x5063a5(0x2dc)]()[_0x5063a5(0x25c)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?',[_0x3124fa]);_0x5dfb9b['length']>0x0&&(_0x4bbf3f=_0x5dfb9b[0x0]);}catch(_0x178711){console[_0x5063a5(0x263)]({'err':_0x178711}),_0x24697d[_0x5063a5(0x1af)](0x1f4)['json']({'error':'Error!\x20Something\x20went\x20wrong.'});return;}if(!_0x4bbf3f){_0x24697d['status'](0x191)[_0x5063a5(0x182)]({'error':_0x5063a5(0x233)});return;}if(_0x4bbf3f[_0x5063a5(0x22f)]!==_0x5063a5(0x1f0)){_0x24697d[_0x5063a5(0x1af)](0x190)[_0x5063a5(0x182)]({'error':_0x5063a5(0x169)});return;}const _0x37f3bd=new Date();try{await conn[_0x5063a5(0x2dc)]()[_0x5063a5(0x25c)]('UPDATE\x20`users`\x20SET\x20`created_at`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?',[_0x37f3bd,_0x3124fa]),_0x24697d['status'](0xc8)['json']({'success':!![],'message':_0x5063a5(0x14d)+config[_0x5063a5(0x28d)]+_0x5063a5(0x198)});}catch(_0x27b88b){console[_0x5063a5(0x263)]({'err':_0x27b88b}),_0x24697d[_0x5063a5(0x1af)](0x1f4)[_0x5063a5(0x182)]({'error':_0x5063a5(0x189)});return;}}),router[a27_0x3175e6(0x1ac)]('/folders/upload-config',async(_0x405b2e,_0x1207e1)=>{const _0x48e840=a27_0x3175e6;try{const _0x267e30=getHotConfig(),_0x1d88fc={'maxFileSize':(_0x267e30[_0x48e840(0x225)]||0x32)*0x400*0x400,'maxConcurrentUploads':_0x267e30[_0x48e840(0x2a1)]||0x3,'maxFiles':_0x267e30[_0x48e840(0x271)]||0xa};_0x1207e1[_0x48e840(0x1af)](0xc8)[_0x48e840(0x182)](_0x1d88fc);}catch(_0x29803d){console[_0x48e840(0x23f)](_0x48e840(0x1bb),_0x29803d),_0x1207e1[_0x48e840(0x1af)](0x1f4)[_0x48e840(0x182)]({'message':_0x48e840(0x2df)});}}),module[a27_0x3175e6(0x14c)]={'router':router,'analyzeConverterFiles':analyzeConverterFiles};
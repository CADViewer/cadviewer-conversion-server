const a27_0x2772bf=a27_0x1d62;(function(_0x1ebc3f,_0x262fb8){const _0x34829f=a27_0x1d62,_0x53926b=_0x1ebc3f();while(!![]){try{const _0x568b33=parseInt(_0x34829f(0x128))/0x1*(-parseInt(_0x34829f(0xee))/0x2)+parseInt(_0x34829f(0xd5))/0x3*(parseInt(_0x34829f(0x1ea))/0x4)+parseInt(_0x34829f(0x1ad))/0x5*(-parseInt(_0x34829f(0x13f))/0x6)+parseInt(_0x34829f(0x156))/0x7+-parseInt(_0x34829f(0x231))/0x8*(-parseInt(_0x34829f(0x145))/0x9)+parseInt(_0x34829f(0x21b))/0xa+-parseInt(_0x34829f(0x92))/0xb*(-parseInt(_0x34829f(0x153))/0xc);if(_0x568b33===_0x262fb8)break;else _0x53926b['push'](_0x53926b['shift']());}catch(_0x4cac5e){_0x53926b['push'](_0x53926b['shift']());}}}(a27_0x1cdf,0xa68fb));const express=require(a27_0x2772bf(0x163)),router=express[a27_0x2772bf(0xa6)](),multer=require(a27_0x2772bf(0x12c)),fs=require('fs'),path=require(a27_0x2772bf(0x1e3)),getHotConfig=require(a27_0x2772bf(0x1d4))[a27_0x2772bf(0x22a)],{exec}=require('child_process'),os=require('os'),conn=require(a27_0x2772bf(0x162)),bcrypt=require(a27_0x2772bf(0x174)),osu=require(a27_0x2772bf(0x22c)),schedule=require(a27_0x2772bf(0xf0)),counter=require(a27_0x2772bf(0x1c8)),{randomUUID}=require(a27_0x2772bf(0x9c)),logStream=require(a27_0x2772bf(0x1b2)),config=require(a27_0x2772bf(0xf4)),basicAuth=require(a27_0x2772bf(0x17a)),{sendFollowUpEmails,sendAccountDeletionPreventionEmails}=require(a27_0x2772bf(0x1d6)),protectedRoute=basicAuth({'users':{[config[a27_0x2772bf(0x1a5)]]:config[a27_0x2772bf(0x1d3)]},'challenge':!![],'realm':a27_0x2772bf(0xe7)});router[a27_0x2772bf(0xa3)](a27_0x2772bf(0x19b),async(_0x14b4c5,_0x146623)=>{const _0x158799=a27_0x2772bf;_0x146623[_0x158799(0x15f)](path['join'](path[_0x158799(0x223)](require['main']['filename']),'cadviewer/settings/tailwind.js'));}),router['get'](a27_0x2772bf(0x1c5),async(_0x46169f,_0x76f24)=>{const _0x3af7ff=a27_0x2772bf;_0x76f24[_0x3af7ff(0x15f)](path[_0x3af7ff(0x201)](path['dirname'](require[_0x3af7ff(0x233)][_0x3af7ff(0x1c2)]),_0x3af7ff(0x183)));}),router[a27_0x2772bf(0xa3)](a27_0x2772bf(0x9d),async(_0x5bf206,_0x3abc4d)=>{const _0x160320=a27_0x2772bf;_0x3abc4d[_0x160320(0x15f)](path[_0x160320(0x201)](path[_0x160320(0x223)](require[_0x160320(0x233)]['filename']),'cadviewer/settings/style.css'));}),router[a27_0x2772bf(0xa3)](a27_0x2772bf(0x14f),async(_0x34049d,_0x148822)=>{const _0x4acc0b=a27_0x2772bf;_0x148822[_0x4acc0b(0x15f)](path[_0x4acc0b(0x201)](path[_0x4acc0b(0x223)](require[_0x4acc0b(0x233)]['filename']),_0x4acc0b(0x99)));}),router[a27_0x2772bf(0xa3)]('/vanilla-toast.js',async(_0x4a0158,_0x5cf50a)=>{const _0x74b560=a27_0x2772bf;_0x5cf50a[_0x74b560(0x15f)](path[_0x74b560(0x201)](path[_0x74b560(0x223)](require['main'][_0x74b560(0x1c2)]),_0x74b560(0x1e1)));}),router['get']('/icons.js',async(_0xf447de,_0x1e5280)=>{const _0x30af4b=a27_0x2772bf;_0x1e5280['sendFile'](path[_0x30af4b(0x201)](path[_0x30af4b(0x223)](require[_0x30af4b(0x233)][_0x30af4b(0x1c2)]),_0x30af4b(0x22e)));}),router['get']('/',protectedRoute,async(_0x318c0d,_0x1739e2)=>{const _0x274176=a27_0x2772bf,_0x3395b1=fs['readFileSync'](path[_0x274176(0x201)](path['dirname'](require[_0x274176(0x233)][_0x274176(0x1c2)]),_0x274176(0x1d2)),'utf8'),_0x46e88e=_0x3395b1[_0x274176(0x220)](_0x274176(0x11f),_0x318c0d[_0x274176(0x1f2)]);_0x1739e2['send'](_0x46e88e);}),router['get']('/licences',protectedRoute,async(_0xab9651,_0x4eb610)=>{const _0x8996fc=a27_0x2772bf,_0x3714e1=fs[_0x8996fc(0x14d)](path[_0x8996fc(0x201)](path['dirname'](require['main'][_0x8996fc(0x1c2)]),_0x8996fc(0x190)),_0x8996fc(0xfb)),_0x35bb2d=_0x3714e1[_0x8996fc(0x220)](_0x8996fc(0x11f),_0xab9651[_0x8996fc(0x1f2)]);_0x4eb610[_0x8996fc(0xd4)](_0x35bb2d);}),router[a27_0x2772bf(0xa3)](a27_0x2772bf(0x1a2),protectedRoute,async(_0x3fdcff,_0x2d6620)=>{const _0x287d2e=a27_0x2772bf,_0x262f02=fs[_0x287d2e(0x14d)](path[_0x287d2e(0x201)](path['dirname'](require[_0x287d2e(0x233)][_0x287d2e(0x1c2)]),_0x287d2e(0x180)),_0x287d2e(0xfb)),_0x57a7eb=_0x262f02[_0x287d2e(0x220)]('{version}',_0x3fdcff[_0x287d2e(0x1f2)]);_0x2d6620[_0x287d2e(0xd4)](_0x57a7eb);}),router[a27_0x2772bf(0xa3)]('/folders',protectedRoute,async(_0x3d0a0f,_0x57e81b)=>{const _0x210018=a27_0x2772bf,_0x132b74=fs[_0x210018(0x14d)](path['join'](path[_0x210018(0x223)](require[_0x210018(0x233)][_0x210018(0x1c2)]),_0x210018(0x23a)),_0x210018(0xfb)),_0x38475e=_0x132b74[_0x210018(0x220)](_0x210018(0x11f),_0x3d0a0f[_0x210018(0x1f2)]);_0x57e81b[_0x210018(0xd4)](_0x38475e);}),router[a27_0x2772bf(0xef)](a27_0x2772bf(0x15a),async(_0x14021d,_0x28bde3)=>{const _0x29a560=a27_0x2772bf,_0x2b349d=path['join'](path[_0x29a560(0x223)](require[_0x29a560(0x233)][_0x29a560(0x1c2)]),_0x29a560(0x228)),_0x41fe21=JSON[_0x29a560(0x122)](fs[_0x29a560(0x14d)](_0x2b349d,_0x29a560(0xfb))),_0x2136de=_0x41fe21[_0x29a560(0x1e0)];if(!fs['existsSync'](_0x2136de))return _0x28bde3[_0x29a560(0x1ff)](0x194)[_0x29a560(0x221)]({'message':_0x29a560(0xbe)});const _0xc1900e=_0x393455=>{const _0x267a6b=_0x29a560;let _0x11f31f=0x0;return _0x393455[_0x267a6b(0x19d)](_0x241543=>{const _0x5e4989=_0x267a6b;_0x241543[_0x5e4989(0xf6)]?_0x11f31f+=_0xc1900e(_0x241543['sub_dirs']):_0x11f31f+=_0x241543['size'];}),_0x11f31f;},_0x1056e8=_0x445361=>{const _0x21375b=_0x29a560;if(_0x445361<0x400)return _0x445361+'\x20B';else{if(_0x445361<0x400*0x400)return(_0x445361/0x400)['toFixed'](0x2)+_0x21375b(0x1f9);else return _0x445361<0x400*0x400*0x400?(_0x445361/0x400/0x400)[_0x21375b(0x10e)](0x2)+_0x21375b(0x191):(_0x445361/0x400/0x400/0x400)[_0x21375b(0x10e)](0x2)+_0x21375b(0x1a9);}},_0xce272a=(_0x129415,_0x4801ff='')=>{const _0x452940=_0x29a560,_0x406451=fs[_0x452940(0x1b4)](_0x129415),_0x4511d4=[];return _0x406451[_0x452940(0x19d)](_0x1b917c=>{const _0xbb8368=_0x452940,_0x5a2171=path[_0xbb8368(0x201)](_0x129415,_0x1b917c)[_0xbb8368(0x220)]('\x5c','/'),_0x53629f=fs['statSync'](_0x5a2171);if(_0x53629f[_0xbb8368(0x134)]()){const _0x158848=_0xce272a(_0x5a2171,_0x4801ff+_0xbb8368(0xfe));_0x4511d4[_0xbb8368(0x239)]({'name':_0x1b917c,'size':_0x53629f['size'],'path':_0x5a2171,'permissions':_0x53629f[_0xbb8368(0x17d)],'isFolder':!![],'sub_dirs':_0x158848});}else _0x4511d4['push']({'name':_0x1b917c,'size':_0x53629f['size'],'path':_0x5a2171,'permissions':_0x53629f['mode'],'isFolder':![]});}),_0x4511d4;};let _0x10ec56=_0xce272a(_0x2136de);const _0xbee1=_0x474e2d=>{const _0x4abe31=_0x29a560;return _0x474e2d[_0x4abe31(0x19d)](_0x49a536=>{const _0x5d4849=_0x4abe31;_0x49a536[_0x5d4849(0xf6)]?(_0x49a536[_0x5d4849(0xb1)]=_0x1056e8(_0xc1900e(_0x49a536[_0x5d4849(0x22d)])),_0x49a536[_0x5d4849(0x22d)]=_0xbee1(_0x49a536['sub_dirs'])):_0x49a536['formatedSize']=_0x1056e8(_0x49a536['size']);}),_0x474e2d;};_0x28bde3[_0x29a560(0x1ff)](0xc8)[_0x29a560(0x221)](_0xbee1(_0x10ec56));}),router[a27_0x2772bf(0xef)]('/folders/download',async(_0x3d19da,_0x5cdef6)=>{const _0x335ec6=a27_0x2772bf,{path:_0x446a57}=_0x3d19da[_0x335ec6(0xa8)],_0x54a14a=_0x446a57[_0x335ec6(0x1af)]('/')[_0x335ec6(0x1d9)]();if(!fs['existsSync'](_0x446a57))return _0x5cdef6[_0x335ec6(0x1ff)](0x194)[_0x335ec6(0x221)]({'message':_0x335ec6(0x130)});_0x5cdef6[_0x335ec6(0x19e)](_0x335ec6(0xc5),_0x335ec6(0x171)),_0x5cdef6[_0x335ec6(0x19e)](_0x335ec6(0xed),_0x335ec6(0x138)+_0x54a14a+'\x22'),_0x5cdef6[_0x335ec6(0xb8)](_0x446a57,_0x2cd7ea=>{const _0x5d2916=_0x335ec6;_0x2cd7ea&&_0x5cdef6[_0x5d2916(0x1ff)](0x1f4)[_0x5d2916(0x221)]({'message':'Error\x20downloading\x20file.'});});}),router[a27_0x2772bf(0xef)](a27_0x2772bf(0x18d),async(_0x28dd46,_0x1fba9f)=>{const _0x17fb12=a27_0x2772bf,_0x508efc=_0x28dd46[_0x17fb12(0xa8)],_0x3c069c=getHotConfig()[_0x17fb12(0x1e0)],_0x1e9c20=path[_0x17fb12(0x201)](_0x3c069c,_0x508efc[_0x17fb12(0x1e3)]);if(!fs[_0x17fb12(0xe0)](_0x1e9c20))return _0x1fba9f['status'](0x194)['json']({'message':'Folder\x20not\x20found.'});if(fs['existsSync'](path[_0x17fb12(0x201)](_0x1e9c20,_0x508efc['folderName'])))return _0x1fba9f[_0x17fb12(0x1ff)](0x199)[_0x17fb12(0x221)]({'message':_0x17fb12(0x1ec)});fs[_0x17fb12(0x133)](path[_0x17fb12(0x201)](_0x1e9c20,_0x508efc[_0x17fb12(0x164)]),_0x3d9a2a=>{const _0x3d179=_0x17fb12;_0x3d9a2a&&_0x1fba9f['status'](0x1f4)[_0x3d179(0x221)]({'message':_0x3d179(0x1ba)}),_0x1fba9f[_0x3d179(0x1ff)](0xc8)[_0x3d179(0x221)]({'message':_0x3d179(0x1bb)});});}),router[a27_0x2772bf(0x202)](a27_0x2772bf(0x15b),async(_0x59d3d1,_0x261be5)=>{const _0x31b3b8=a27_0x2772bf,{newName:_0x3c0392,isFolder:_0x4b2754,path:_0x557f38}=_0x59d3d1['body'];if(!fs[_0x31b3b8(0xe0)](_0x557f38))return _0x261be5[_0x31b3b8(0x1ff)](0x194)['json']({'message':_0x4b2754?_0x31b3b8(0xbc):'File\x20not\x20found'});const _0x5c58f4=_0x557f38[_0x31b3b8(0x18e)](_0x557f38[_0x31b3b8(0x1af)]('/')[_0x31b3b8(0x1d9)](),_0x3c0392),_0x40e0ec=fs[_0x31b3b8(0xaa)](_0x557f38);_0x40e0ec[_0x31b3b8(0x134)]()?fs[_0x31b3b8(0x169)](_0x557f38,_0x5c58f4):(fs['copyFileSync'](_0x557f38,_0x5c58f4),fs[_0x31b3b8(0xa9)](_0x557f38)),_0x261be5[_0x31b3b8(0x1ff)](0xc8)[_0x31b3b8(0x221)]({'message':_0x4b2754?'Folder\x20renamed.':_0x31b3b8(0x179)});}),router[a27_0x2772bf(0xd9)](a27_0x2772bf(0x157),async(_0x293468,_0x4fdd28)=>{const _0x26e0fb=a27_0x2772bf,{path:_0xf7bbc4}=_0x293468['body'];if(!fs['existsSync'](_0xf7bbc4))return _0x4fdd28['status'](0x194)[_0x26e0fb(0x221)]({'message':'File\x20or\x20Folder\x20not\x20found'});const _0x569ca8=fs[_0x26e0fb(0xaa)](_0xf7bbc4);if(_0x569ca8['isFile']())fs['unlink'](_0xf7bbc4,_0x4f9062=>{const _0x1f9edd=_0x26e0fb;_0x4f9062&&_0x4fdd28['status'](0x1f4)['json']({'message':_0x1f9edd(0x11e)}),_0x4fdd28['status'](0xc8)[_0x1f9edd(0x221)]({'message':_0x1f9edd(0x127)});});else _0x569ca8[_0x26e0fb(0x134)]()&&fs['rmdir'](_0xf7bbc4,{'recursive':!![]},_0x41a7fe=>{const _0x3624b9=_0x26e0fb;_0x41a7fe&&_0x4fdd28[_0x3624b9(0x1ff)](0x1f4)[_0x3624b9(0x221)]({'message':_0x3624b9(0x13a)}),_0x4fdd28[_0x3624b9(0x1ff)](0xc8)['json']({'message':_0x3624b9(0x1b0)});});});!fs['existsSync']('./tmp')&&fs['mkdirSync'](a27_0x2772bf(0xac));const storage=multer[a27_0x2772bf(0x1c7)]({'destination':(_0x441d82,_0x3eaf25,_0x435fd9)=>{_0x435fd9(null,'tmp');},'filename':(_0x40b303,_0x407aa5,_0x4df532)=>{const _0x20cc66=a27_0x2772bf;_0x4df532(null,Date[_0x20cc66(0x1e9)]()+path[_0x20cc66(0x1fe)](_0x407aa5[_0x20cc66(0x142)]));}}),upload=multer({'storage':storage,'limits':{'fileSize':0xa*0x400*0x400}});router[a27_0x2772bf(0xef)]('/folders/upload',upload[a27_0x2772bf(0x206)]('files'),async(_0x4ddcab,_0x3a4349)=>{const _0x14170b=a27_0x2772bf,_0x20660f=_0x4ddcab[_0x14170b(0xa8)];if(!_0x4ddcab['files']||_0x4ddcab['files']['length']===0x0)return _0x3a4349[_0x14170b(0x1ff)](0x190)[_0x14170b(0x221)]({'message':_0x14170b(0x197)});const _0x667de1=getHotConfig()[_0x14170b(0x1e0)],_0x52092a=path[_0x14170b(0x201)](_0x667de1,_0x20660f[_0x14170b(0x1e3)]);if(!fs[_0x14170b(0xe0)](_0x52092a))return _0x3a4349['status'](0x194)[_0x14170b(0x221)]({'message':'Folder\x20not\x20found.'});const _0x39aa93=_0x4ddcab[_0x14170b(0x1e4)][_0x14170b(0xc6)](_0x3e3ee0=>({'originalname':_0x3e3ee0[_0x14170b(0x142)],'filename':_0x3e3ee0[_0x14170b(0x1c2)],'mimetype':_0x3e3ee0['mimetype'],'size':_0x3e3ee0[_0x14170b(0x1b8)]}));_0x39aa93[_0x14170b(0x19d)](_0x22ccee=>{const _0xa46ec1=_0x14170b;fs[_0xa46ec1(0x20d)](path[_0xa46ec1(0x201)]('tmp',_0x22ccee[_0xa46ec1(0x1c2)]),path['join'](_0x52092a,_0x22ccee[_0xa46ec1(0x142)])),fs[_0xa46ec1(0xa9)](path['join'](_0xa46ec1(0x211),_0x22ccee[_0xa46ec1(0x1c2)]));}),_0x3a4349[_0x14170b(0x1ff)](0xc8)[_0x14170b(0x221)]({'message':_0x14170b(0x1f3),'files':_0x39aa93});}),router[a27_0x2772bf(0x202)](a27_0x2772bf(0x1bd),async(_0x2050c8,_0x5f4a83)=>{const _0x47b820=a27_0x2772bf,_0x572045=path[_0x47b820(0x201)](path['dirname'](require[_0x47b820(0x233)][_0x47b820(0x1c2)]),'CADViewer_config.json'),{config:_0xcd79f4}=_0x2050c8[_0x47b820(0xa8)];if(!_0xcd79f4)return _0x5f4a83[_0x47b820(0x1ff)](0x190)[_0x47b820(0x221)]({'message':_0x47b820(0x227)});try{fs[_0x47b820(0x1b1)](_0x572045,JSON[_0x47b820(0x1b9)](_0xcd79f4,null,0x4)),_0x5f4a83['status'](0xc8)[_0x47b820(0x221)]({'message':'Config\x20updated\x20successfully'});}catch(_0x3e1613){_0x5f4a83[_0x47b820(0x1ff)](0x1f4)['json']({'message':_0x47b820(0x11d)});}}),router[a27_0x2772bf(0x202)]('/config/update',async(_0x2ed263,_0x44fb2d)=>{const _0x5c91af=a27_0x2772bf,{key:_0x3c32fd,value:_0x52541f}=_0x2ed263[_0x5c91af(0xa8)],_0x2bf758=path[_0x5c91af(0x201)](path[_0x5c91af(0x223)](require['main'][_0x5c91af(0x1c2)]),_0x5c91af(0x228));fs[_0x5c91af(0x144)](_0x2bf758,_0x5c91af(0xfb),function(_0x7e2952,_0xb28fe7){const _0x5caa9b=_0x5c91af;_0x7e2952&&_0x44fb2d[_0x5caa9b(0x1ff)](0x1f4)[_0x5caa9b(0xd4)](_0x7e2952);const _0x2ea06f=JSON[_0x5caa9b(0x122)](_0xb28fe7);_0x2ea06f[_0x3c32fd]=_0x52541f;if(_0x3c32fd===_0x5caa9b(0x10a)){let _0x226e30='';if(_0x2ea06f[_0x5caa9b(0x15d)]){_0x226e30=os[_0x5caa9b(0x123)]();if(_0x226e30===_0x5caa9b(0x161))_0x226e30=_0x5caa9b(0xa0);else{if(_0x226e30===_0x5caa9b(0xca))_0x226e30=_0x5caa9b(0x199);}}else _0x226e30=_0x2ea06f[_0x5caa9b(0x123)];if(_0x226e30===_0x5caa9b(0xa0)){_0x2ea06f[_0x5caa9b(0xc2)]=path[_0x5caa9b(0x17f)](__dirname,'..')+'/';const _0x4c08e8=/\\/g;_0x2ea06f[_0x5caa9b(0xc2)]=_0x2ea06f[_0x5caa9b(0xc2)]['replace'](_0x4c08e8,'/');}else _0x2ea06f[_0x5caa9b(0xc2)]=path[_0x5caa9b(0x17f)](__dirname,'..')+'/';}if(_0x3c32fd==='autodetect_platform'){let _0x469a88=os[_0x5caa9b(0x123)]();if(_0x469a88===_0x5caa9b(0x161))_0x469a88=_0x5caa9b(0xa0);else _0x469a88=_0x5caa9b(0x199);_0x469a88==='windows'?_0x52541f===!![]&&(_0x2ea06f['autoxchange_executable']=_0x2ea06f[_0x5caa9b(0x218)],_0x2ea06f[_0x5caa9b(0x23b)]=_0x2ea06f[_0x5caa9b(0xba)],_0x2ea06f['linklist_executable']=_0x2ea06f['linklist_executable_windows']):_0x52541f===!![]&&(_0x2ea06f['autoxchange_executable']=_0x2ea06f[_0x5caa9b(0x17c)],_0x2ea06f[_0x5caa9b(0x23b)]=_0x2ea06f[_0x5caa9b(0x1be)],_0x2ea06f[_0x5caa9b(0x214)]=_0x2ea06f[_0x5caa9b(0x125)]),_0x2ea06f[_0x5caa9b(0x123)]=_0x469a88;}if(_0x2ea06f[_0x5caa9b(0x15d)]){let _0x442b75=os[_0x5caa9b(0x123)]();if(_0x442b75===_0x5caa9b(0x161))_0x442b75=_0x5caa9b(0xa0);else _0x442b75=_0x5caa9b(0x199);if(_0x442b75===_0x5caa9b(0xa0)){if(_0x3c32fd===_0x5caa9b(0x218))_0x2ea06f[_0x5caa9b(0x1ab)]=_0x52541f;else{if(_0x3c32fd===_0x5caa9b(0xba))_0x2ea06f[_0x5caa9b(0x23b)]=_0x52541f;else _0x3c32fd==='linklist_executable_windows'&&(_0x2ea06f[_0x5caa9b(0x214)]=_0x52541f);}}else{if(_0x3c32fd===_0x5caa9b(0x17c))_0x2ea06f[_0x5caa9b(0x1ab)]=_0x52541f;else{if(_0x3c32fd===_0x5caa9b(0x1be))_0x2ea06f['dwgmerge_executable']=_0x52541f;else _0x3c32fd===_0x5caa9b(0x125)&&(_0x2ea06f[_0x5caa9b(0x214)]=_0x52541f);}}}fs[_0x5caa9b(0x91)](_0x2bf758,JSON[_0x5caa9b(0x1b9)](_0x2ea06f,null,0x4),function(_0x3d48b1){const _0x2c5691=_0x5caa9b;_0x3d48b1&&_0x44fb2d[_0x2c5691(0x1ff)](0x1f4)[_0x2c5691(0xd4)](_0x3d48b1),_0x44fb2d[_0x2c5691(0x1ff)](0xc8)[_0x2c5691(0x221)]({'message':_0x2c5691(0x96)});});});}),router[a27_0x2772bf(0xef)](a27_0x2772bf(0x12d),async(_0x47145a,_0xdf80ad)=>{const _0x36cb87=a27_0x2772bf,_0x5040f6=getHotConfig(),_0xaffae5=(_0x5040f6[_0x36cb87(0x13d)][_0x36cb87(0x14e)](_0x5040f6['ServerLocation'])?'':_0x5040f6[_0x36cb87(0xc2)])+_0x5040f6['dwgmergeLocation'],_0xcce8ba=(_0x5040f6[_0x36cb87(0x13d)]['includes'](_0x5040f6[_0x36cb87(0xc2)])?'':_0x5040f6['ServerLocation'])+_0x5040f6[_0x36cb87(0x193)],_0x47fa49=(_0x5040f6['converterLocation'][_0x36cb87(0x14e)](_0x5040f6[_0x36cb87(0xc2)])?'':_0x5040f6['ServerLocation'])+_0x5040f6[_0x36cb87(0x94)],_0x11f79f=/ax202.*\.exe/,_0x5f2d58=/ax202.*/,_0x548db9=/dwgmerge202.*\.exe/,_0x1f5986=/dwgmerge_202.*/,_0x26e265=/linklist_202.*\.exe/,_0x1fa95e=/linklist_202.*/,_0x1b0b0e=[],_0x1a4a59=[],_0x4b3126=[],_0x1ae6c1=[],_0x2f73ca=[],_0x520838=[];let _0x187d43='';if(_0x5040f6[_0x36cb87(0x15d)]){_0x187d43=os[_0x36cb87(0x123)]();if(_0x187d43===_0x36cb87(0x161))_0x187d43=_0x36cb87(0xa0);else{if(_0x187d43===_0x36cb87(0xca))_0x187d43='linux';}}else _0x187d43=_0x5040f6['platform'];fs[_0x36cb87(0x1b4)](_0x47fa49[_0x36cb87(0x220)](_0x36cb87(0x199),_0x36cb87(0xa0)))[_0x36cb87(0x19d)](_0x208167=>{const _0x26e024=_0x36cb87;if(_0x11f79f[_0x26e024(0xf7)](_0x208167[_0x26e024(0xeb)]()))_0x1b0b0e['push'](_0x208167);}),fs[_0x36cb87(0x1b4)](_0xaffae5[_0x36cb87(0x220)](_0x36cb87(0x199),'windows'))[_0x36cb87(0x19d)](_0x5d1c2e=>{const _0x258cc2=_0x36cb87;if(_0x548db9[_0x258cc2(0xf7)](_0x5d1c2e[_0x258cc2(0xeb)]()))_0x1a4a59['push'](_0x5d1c2e);}),fs[_0x36cb87(0x1b4)](_0xcce8ba[_0x36cb87(0x220)](_0x36cb87(0x199),_0x36cb87(0xa0)))[_0x36cb87(0x19d)](_0x468052=>{if(_0x26e265['test'](_0x468052['toLocaleLowerCase']()))_0x4b3126['push'](_0x468052);}),fs[_0x36cb87(0x1b4)](_0x47fa49[_0x36cb87(0x220)](_0x36cb87(0xa0),'linux'))[_0x36cb87(0x19d)](_0x124ff3=>{const _0xa31db8=_0x36cb87;if(_0x5f2d58[_0xa31db8(0xf7)](_0x124ff3[_0xa31db8(0xeb)]()))_0x1ae6c1[_0xa31db8(0x239)](_0x124ff3);}),fs[_0x36cb87(0x1b4)](_0xaffae5[_0x36cb87(0x220)]('windows',_0x36cb87(0x199)))['forEach'](_0x2e64d1=>{const _0x160ac0=_0x36cb87;if(_0x1f5986[_0x160ac0(0xf7)](_0x2e64d1['toLocaleLowerCase']()))_0x2f73ca['push'](_0x2e64d1);}),fs[_0x36cb87(0x1b4)](_0xcce8ba[_0x36cb87(0x220)](_0x36cb87(0xa0),_0x36cb87(0x199)))['forEach'](_0x405957=>{const _0x41123c=_0x36cb87;if(_0x1fa95e[_0x41123c(0xf7)](_0x405957[_0x41123c(0xeb)]()))_0x520838[_0x41123c(0x239)](_0x405957);});const _0x4b4193=['ServerPort','https',_0x36cb87(0x148),_0x36cb87(0xc3),_0x36cb87(0x22b)],_0x2bc229=[_0x36cb87(0x152),_0x36cb87(0xdc),_0x36cb87(0x94),_0x36cb87(0x234),'xpathLocation',_0x36cb87(0xf9),_0x36cb87(0x196),_0x36cb87(0x13d),_0x36cb87(0x193),_0x36cb87(0x1f2)],_0x5f3820=[_0x36cb87(0xbd),'mysqlHost',_0x36cb87(0xd7),_0x36cb87(0x1a4),_0x36cb87(0x124),'cached_conversion',_0x36cb87(0x18b)],_0x557586={'ServerUrl':_0x36cb87(0x1b5),'autoxchange_executable':_0x36cb87(0x1e7),'linklist_executable':_0x36cb87(0x1b7),'dwgmerge_executable':_0x36cb87(0xad),'setup_mysqlHost':'Database\x20Settings','callbackMethod_gatewayUrl_flag':_0x36cb87(0x11a),'userFolderMaximumFiles':_0x36cb87(0xde),'smtpHost':_0x36cb87(0x21a)},_0xc8e89f={'https':_0x36cb87(0x11c),'ServerFrontEndUrlAsAllowedOriginOnly':_0x36cb87(0x11c),'autodetect_platform':'boolean','cvjs_svgz_compress':_0x36cb87(0x11c),'cached_conversion':_0x36cb87(0x11c),'remainOnServer':_0x36cb87(0x11c),'cvjs_debug':_0x36cb87(0x11c),'autodetect_location':_0x36cb87(0x11c),'platform':_0x36cb87(0x93),'autoxchange_executable':_0x36cb87(0x114)+(_0x187d43==='windows'?_0x1b0b0e[_0x36cb87(0x201)](','):_0x1ae6c1[_0x36cb87(0x201)](',')),'autoxchange_executable_windows':_0x36cb87(0x114)+_0x1b0b0e[_0x36cb87(0x201)](','),'autoxchange_executable_linux':'radio|'+_0x1ae6c1['join'](','),'dwgmerge_executable':'radio|'+(_0x187d43===_0x36cb87(0xa0)?_0x1a4a59[_0x36cb87(0x201)](','):_0x2f73ca[_0x36cb87(0x201)](',')),'dwgmerge_executable_windows':'radio|'+_0x1a4a59[_0x36cb87(0x201)](','),'dwgmerge_executable_linux':_0x36cb87(0x114)+_0x2f73ca[_0x36cb87(0x201)](','),'linklist_executable':_0x36cb87(0x114)+(_0x187d43===_0x36cb87(0xa0)?_0x4b3126['join'](','):_0x520838[_0x36cb87(0x201)](',')),'linklist_executable_windows':_0x36cb87(0x114)+_0x4b3126[_0x36cb87(0x201)](','),'linklist_executable_linux':_0x36cb87(0x114)+_0x520838['join'](','),'callbackMethod_gatewayUrl_flag':_0x36cb87(0x11c),'setup_mysqlHost':_0x36cb87(0x11c),'ContentSecurityPolicyReportOnly':_0x36cb87(0x11c),'fileLoad_PasswordAuthentication':_0x36cb87(0x11c),'contentLocationCheck':_0x36cb87(0x11c),'globalBearerAutentication':'boolean','bcryptSaltRounds':_0x36cb87(0x109),'userFolderMaximumFiles':_0x36cb87(0x109),'userFolderMaximumSizeInMB':'number','recaptchaEnabled':_0x36cb87(0x11c),'usersExportFrequency':_0x36cb87(0x173),'enableEmailVerification':_0x36cb87(0x11c),'demoUserRetentionDaysAlertBeforeDeletion':'number','demoUserRetentionDays':'number'},_0x1549bd={},_0x570b97=Object[_0x36cb87(0xd2)](_0x5040f6);_0x5040f6[_0x36cb87(0x15d)]&&_0x4b4193[_0x36cb87(0x239)](_0x36cb87(0x123)),_0x5040f6[_0x36cb87(0x10a)]&&(_0x2bc229[_0x36cb87(0x239)](_0x36cb87(0xc2)),_0x2bc229[_0x36cb87(0x239)](_0x36cb87(0x1ab)),_0x2bc229[_0x36cb87(0x239)](_0x36cb87(0x23b)),_0x2bc229['push'](_0x36cb87(0x214))),!_0x5040f6['callbackMethod_gatewayUrl_flag']&&_0x2bc229['push'](_0x36cb87(0xb3)),!_0x5040f6[_0x36cb87(0x116)]&&(_0x2bc229['push'](_0x36cb87(0xb0)),_0x2bc229[_0x36cb87(0x239)](_0x36cb87(0xd7)),_0x2bc229[_0x36cb87(0x239)](_0x36cb87(0x1a4)),_0x2bc229[_0x36cb87(0x239)](_0x36cb87(0x124))),!_0x5040f6[_0x36cb87(0x9f)]&&_0x2bc229[_0x36cb87(0x239)](_0x36cb87(0x1d0)),!_0x5040f6['fileLoad_PasswordAuthentication']&&(_0x2bc229[_0x36cb87(0x239)](_0x36cb87(0xfd)),_0x2bc229[_0x36cb87(0x239)](_0x36cb87(0x198))),!_0x5040f6[_0x36cb87(0x188)]&&_0x2bc229[_0x36cb87(0x239)]('globalBearerAutenticationToken'),_0x570b97[_0x36cb87(0x19d)](_0x501ecd=>{!_0x4b4193['includes'](_0x501ecd)&&(_0x1549bd[_0x501ecd]=_0x5040f6[_0x501ecd]);}),_0x1549bd['fileLocationUrl']=''+_0x5040f6['ServerUrl']+_0x5040f6[_0x36cb87(0x152)],_0xdf80ad[_0x36cb87(0x1ff)](0xc8)['json']({'notEditableFields':_0x2bc229,'customFieldTypes':_0xc8e89f,'notHotEditableFields':_0x5f3820,'config':_0x1549bd,'fieldsTitle':_0x557586,'configData':_0x5040f6});}),router['get'](a27_0x2772bf(0x207),protectedRoute,async(_0x4f7e0b,_0x52edf0)=>{const _0x233793=a27_0x2772bf,_0x21ea5a=fs['readFileSync'](path[_0x233793(0x201)](path[_0x233793(0x223)](require[_0x233793(0x233)][_0x233793(0x1c2)]),_0x233793(0x1f6)),_0x233793(0xfb)),_0x10763f=_0x21ea5a[_0x233793(0x220)](_0x233793(0x11f),_0x4f7e0b[_0x233793(0x1f2)]);_0x52edf0[_0x233793(0xd4)](_0x10763f);});function findMatchingLogFiles(_0x36c8fe,_0x17f38c=/^call-Api_Conversion_\d{1,2}_\d{1,2}_\d{4}\.log$/){const _0x3509fe=a27_0x2772bf;try{const _0x889468=fs['readdirSync'](_0x36c8fe);return _0x889468[_0x3509fe(0x1fa)](_0x400425=>_0x17f38c[_0x3509fe(0xf7)](_0x400425))[_0x3509fe(0xc6)](_0x848b05=>_0x848b05[_0x3509fe(0x220)](_0x3509fe(0x16d),'')['replaceAll'](_0x3509fe(0x1cb),''));}catch(_0x4d781c){return console[_0x3509fe(0x20e)](_0x3509fe(0x1f4),_0x4d781c),[];}}router[a27_0x2772bf(0xef)](a27_0x2772bf(0x1a6),async(_0x4652b4,_0xd59a13)=>{const _0x245e43=a27_0x2772bf,_0x5709b8=new Date(),_0x184850=_0x5709b8[_0x245e43(0x1bf)]()[_0x245e43(0x13e)]()[_0x245e43(0x194)](0x2,'0')+'_'+(_0x5709b8[_0x245e43(0x12e)]()+0x1)[_0x245e43(0x13e)]()[_0x245e43(0x194)](0x2,'0')+'_'+_0x5709b8[_0x245e43(0xd1)](),{displayDay:_0x12d73d}=_0x4652b4[_0x245e43(0xa8)],_0x1737f8=path['join'](path[_0x245e43(0x223)](require[_0x245e43(0x233)]['filename']),_0x245e43(0x98),_0x245e43(0x16d)+(_0x12d73d??_0x184850)+_0x245e43(0x1cb));fs[_0x245e43(0xe0)](_0x1737f8)?fs[_0x245e43(0x144)](_0x1737f8,_0x245e43(0xfb),function(_0x1fe842,_0x36fccf){const _0x4752a7=_0x245e43;_0x1fe842&&_0xd59a13[_0x4752a7(0x1ff)](0x1f4)[_0x4752a7(0xd4)](_0x1fe842),_0xd59a13[_0x4752a7(0x1ff)](0xc8)[_0x4752a7(0x221)]({'content':_0x36fccf,'days':findMatchingLogFiles(path[_0x4752a7(0x201)](path['dirname'](require[_0x4752a7(0x233)]['filename']),'logs'))});}):_0xd59a13['status'](0xc8)['json']({'content':'','days':findMatchingLogFiles(path[_0x245e43(0x201)](path[_0x245e43(0x223)](require[_0x245e43(0x233)]['filename']),_0x245e43(0x98)))});}),router['delete'](a27_0x2772bf(0x21c),async(_0x57b159,_0x13dbdf)=>{const _0x1ff209=a27_0x2772bf,_0xc2d24c=new Date(),_0x596339=_0xc2d24c[_0x1ff209(0x1bf)]()[_0x1ff209(0x13e)]()[_0x1ff209(0x194)](0x2,'0')+'_'+(_0xc2d24c[_0x1ff209(0x12e)]()+0x1)[_0x1ff209(0x13e)]()[_0x1ff209(0x194)](0x2,'0')+'_'+_0xc2d24c[_0x1ff209(0xd1)](),_0x5ede2a=findMatchingLogFiles(path['join'](path[_0x1ff209(0x223)](require[_0x1ff209(0x233)][_0x1ff209(0x1c2)]),_0x1ff209(0x98)));_0x5ede2a['forEach'](_0x3c0283=>{const _0x458241=_0x1ff209;if(_0x3c0283!==_0x596339)fs[_0x458241(0xa9)](path[_0x458241(0x201)](path[_0x458241(0x223)](require[_0x458241(0x233)]['filename']),_0x458241(0x98),_0x458241(0x16d)+_0x3c0283+'.log'));}),logStream[_0x1ff209(0xf2)](),_0x13dbdf[_0x1ff209(0x1ff)](0xc8)[_0x1ff209(0x221)]({'message':_0x1ff209(0x1ae)});}),router[a27_0x2772bf(0xa3)](a27_0x2772bf(0x140),protectedRoute,async(_0x441fd3,_0x355fff)=>{const _0x225fa5=a27_0x2772bf,_0x327336=path[_0x225fa5(0x201)](path[_0x225fa5(0x223)](require[_0x225fa5(0x233)][_0x225fa5(0x1c2)]),'cadviewer/settings/rest-api-parameters.json');if(!fs[_0x225fa5(0xe0)](_0x327336)){const _0x22d9a1={'jsonDataExtraction':{'standard':[{'paramName':'json','paramValue':''},{'paramName':_0x225fa5(0xab),'paramValue':''}]},'dwgToSvg':{'standard':[{'paramName':'f','paramValue':'svg'},{'paramName':_0x225fa5(0x19a),'paramValue':''},{'paramName':'hlall','paramValue':''}]},'dwgToPdf':{'standard':[{'paramName':'f','paramValue':_0x225fa5(0x1df)},{'paramName':'model','paramValue':''}]},'displayDwg':{'standard':[{'paramName':'f','paramValue':_0x225fa5(0xc8)},{'paramName':_0x225fa5(0x19a),'paramValue':''},{'paramName':_0x225fa5(0x1cc),'paramValue':''}]},'dwgToMultiple':{'standard':[{'paramName':_0x225fa5(0xc7),'paramValue':''}]}};fs[_0x225fa5(0x1b1)](_0x327336,JSON['stringify'](_0x22d9a1,null,0x4));}const _0x5ad049=fs[_0x225fa5(0x14d)](path[_0x225fa5(0x201)](path['dirname'](require[_0x225fa5(0x233)][_0x225fa5(0x1c2)]),_0x225fa5(0x158)),_0x225fa5(0xfb)),_0x375d57=_0x5ad049[_0x225fa5(0x220)](_0x225fa5(0x11f),_0x441fd3[_0x225fa5(0x1f2)]);_0x355fff[_0x225fa5(0xd4)](_0x375d57);}),router[a27_0x2772bf(0xef)]('/restapi-test/parameters/search',async(_0x1fcbb4,_0x5b8915)=>{const _0x1b9ed0=a27_0x2772bf,{actionName:_0x2c5be4,contentLocation:_0x41ae49}=_0x1fcbb4[_0x1b9ed0(0xa8)],_0x43e628=path[_0x1b9ed0(0x201)](path[_0x1b9ed0(0x223)](require[_0x1b9ed0(0x233)]['filename']),_0x1b9ed0(0x1fc));fs[_0x1b9ed0(0x144)](_0x43e628,_0x1b9ed0(0xfb),function(_0x72e44e,_0x1963b5){const _0x566ee6=_0x1b9ed0;if(_0x72e44e)_0x5b8915[_0x566ee6(0x1ff)](0xc8)[_0x566ee6(0x221)]({'parameters':[]});else{const _0x3d034b=JSON[_0x566ee6(0x122)](_0x1963b5);if(_0x3d034b[_0x2c5be4]&&_0x3d034b[_0x2c5be4][_0x41ae49])_0x5b8915[_0x566ee6(0x1ff)](0xc8)[_0x566ee6(0x221)]({'parameters':_0x3d034b[_0x2c5be4][_0x41ae49]});else _0x3d034b[_0x2c5be4]&&_0x3d034b[_0x2c5be4][_0x566ee6(0xdd)]?_0x5b8915[_0x566ee6(0x1ff)](0xc8)[_0x566ee6(0x221)]({'parameters':_0x3d034b[_0x2c5be4][_0x566ee6(0xdd)]}):_0x5b8915[_0x566ee6(0x1ff)](0xc8)[_0x566ee6(0x221)]({'parameters':[]});}});}),router[a27_0x2772bf(0xef)]('/restapi-test/parameters/save',async(_0x5d5767,_0x5039db)=>{const _0xc54e35=a27_0x2772bf,{actionName:_0x10a55a,contentLocation:_0x18fa86,parameters:_0x712712}=_0x5d5767['body'],_0x3930ca=path[_0xc54e35(0x201)](path[_0xc54e35(0x223)](require[_0xc54e35(0x233)][_0xc54e35(0x1c2)]),_0xc54e35(0x1fc));fs[_0xc54e35(0x144)](_0x3930ca,_0xc54e35(0xfb),function(_0xf8612d,_0x37349e){const _0x154d5b=_0xc54e35;if(_0xf8612d)_0x5039db[_0x154d5b(0x1ff)](0x199)[_0x154d5b(0x221)]({'message':_0x154d5b(0x1b3)});else{const _0x4e3933=JSON['parse'](_0x37349e);!_0x4e3933[_0x10a55a]&&(_0x4e3933[_0x10a55a]={}),_0x4e3933[_0x10a55a][_0x18fa86]=_0x712712,fs[_0x154d5b(0x91)](_0x3930ca,JSON[_0x154d5b(0x1b9)](_0x4e3933,null,0x4),function(_0x5c0fd6){const _0x9dbc51=_0x154d5b;_0x5c0fd6&&_0x5039db[_0x9dbc51(0x1ff)](0x199)[_0x9dbc51(0x221)]({'message':_0x9dbc51(0x1b3)}),_0x5039db['status'](0xc8)[_0x9dbc51(0x221)]({'message':_0x9dbc51(0xf5)});});}});}),router[a27_0x2772bf(0xa3)](a27_0x2772bf(0x113),protectedRoute,async(_0x152bcd,_0x5af2a4)=>{const _0x31fc5a=a27_0x2772bf,_0x3d2657=fs['readFileSync'](path[_0x31fc5a(0x201)](path['dirname'](require[_0x31fc5a(0x233)][_0x31fc5a(0x1c2)]),'cadviewer/settings/doctor.html'),_0x31fc5a(0xfb)),_0x2113be=_0x3d2657['replaceAll']('{version}',_0x152bcd[_0x31fc5a(0x1f2)]);_0x5af2a4[_0x31fc5a(0xd4)](_0x2113be);}),router[a27_0x2772bf(0xef)](a27_0x2772bf(0x13b),async(_0x244d7e,_0x18cfa7)=>{const _0x3b0895=a27_0x2772bf,_0x54cd1a=getHotConfig(),_0x341d8b=_0x54cd1a[_0x3b0895(0x94)][_0x3b0895(0x220)]('//','/'),_0x32d840=_0x54cd1a[_0x3b0895(0x13d)][_0x3b0895(0x220)]('//','/'),_0x47ab56=_0x54cd1a[_0x3b0895(0x193)][_0x3b0895(0x220)]('//','/'),_0xb1a9b7=''+_0x341d8b+_0x54cd1a['autoxchange_executable'],_0x2a36df=''+_0x32d840+_0x54cd1a['dwgmerge_executable'],_0x347e05=''+_0x47ab56+_0x54cd1a[_0x3b0895(0x214)],_0x58f42c=[],_0x5a8d90=new Promise(_0x1cee49=>{const _0x43985c=_0x3b0895;exec(os[_0x43985c(0x123)]()===_0x43985c(0x161)?_0x43985c(0x18a):'ls',_0x1d5b24=>{const _0x4c74fd=_0x43985c;_0x1d5b24?_0x58f42c[_0x4c74fd(0x239)]({'title':_0x4c74fd(0x10b),'status':![],'priority':0x1}):_0x58f42c['push']({'title':_0x4c74fd(0x10b),'status':!![],'priority':0x1}),_0x1cee49();});}),_0x33ed34=new Promise(_0x55a632=>{const _0x15dd22=_0x3b0895;fs[_0x15dd22(0x1c0)](_0xb1a9b7,fs[_0x15dd22(0x1aa)][_0x15dd22(0x1f8)],_0x5445b2=>{const _0x3e9586=_0x15dd22;_0x5445b2?_0x58f42c[_0x3e9586(0x239)]({'title':'Permission\x20750\x20for\x20the\x20\x22'+_0x54cd1a['autoxchange_executable']+_0x3e9586(0x13c),'status':![],'priority':0x2}):_0x58f42c[_0x3e9586(0x239)]({'title':_0x3e9586(0x176)+_0x54cd1a[_0x3e9586(0x1ab)]+_0x3e9586(0x13c),'status':!![],'priority':0x2}),_0x55a632();});}),_0x27110a=new Promise(_0x7c0325=>{const _0x4cbafc=_0x3b0895;fs[_0x4cbafc(0x1c0)](_0x2a36df,fs[_0x4cbafc(0x1aa)][_0x4cbafc(0x1f8)],_0x5d2cb7=>{const _0x34e60e=_0x4cbafc;_0x5d2cb7?_0x58f42c[_0x34e60e(0x239)]({'title':_0x34e60e(0x176)+_0x54cd1a['dwgmerge_executable']+_0x34e60e(0x13c),'status':![],'priority':0x3}):_0x58f42c[_0x34e60e(0x239)]({'title':_0x34e60e(0x176)+_0x54cd1a[_0x34e60e(0x23b)]+_0x34e60e(0x13c),'status':!![],'priority':0x3}),_0x7c0325();});}),_0x20acc8=new Promise(_0x2ce7a5=>{const _0x3ff528=_0x3b0895;fs[_0x3ff528(0x1c0)](_0x347e05,fs[_0x3ff528(0x1aa)]['X_OK'],_0x3dbff9=>{const _0x3c7419=_0x3ff528;_0x3dbff9?_0x58f42c['push']({'title':'Permission\x20750\x20for\x20the\x20\x22'+_0x54cd1a['linklist_executable']+_0x3c7419(0x13c),'status':![],'priority':0x4}):_0x58f42c[_0x3c7419(0x239)]({'title':'Permission\x20750\x20for\x20the\x20\x22'+_0x54cd1a['linklist_executable']+_0x3c7419(0x13c),'status':!![],'priority':0x4}),_0x2ce7a5();});}),_0x1bcf6e=new Promise(_0x1abc24=>{const _0x23ce2f=_0x3b0895,_0x1eb0f8=new Date(),_0xcc7dd5=_0x1eb0f8[_0x23ce2f(0x1bf)]()['toString']()[_0x23ce2f(0x194)](0x2,'0')+'_'+(_0x1eb0f8['getMonth']()+0x1)['toString']()['padStart'](0x2,'0')+'_'+_0x1eb0f8[_0x23ce2f(0xd1)](),{displayDay:_0x3f2470}=_0x244d7e['body'];fs[_0x23ce2f(0x1c0)](path[_0x23ce2f(0x201)](path[_0x23ce2f(0x223)](require[_0x23ce2f(0x233)]['filename']),_0x23ce2f(0x98),'call-Api_Conversion_'+(_0x3f2470??_0xcc7dd5)+_0x23ce2f(0x1cb)),fs[_0x23ce2f(0x1aa)]['W_OK'],_0x368a08=>{const _0x4252ee=_0x23ce2f;_0x368a08?_0x58f42c[_0x4252ee(0x239)]({'title':'Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_'+(_0x3f2470??_0xcc7dd5)+'.log\x22','status':![],'priority':0x5}):_0x58f42c[_0x4252ee(0x239)]({'title':_0x4252ee(0x168)+(_0x3f2470??_0xcc7dd5)+_0x4252ee(0xb6),'status':!![],'priority':0x5}),_0x1abc24();});}),_0x5d676f=(_0x2fa776,_0x167978)=>{const _0x312d6e=_0x3b0895,_0x11aeae=path[_0x312d6e(0x201)](path[_0x312d6e(0x223)](require[_0x312d6e(0x233)][_0x312d6e(0x1c2)]),_0x2fa776);return new Promise(_0x125df2=>{const _0x3a76cf=_0x312d6e;fs[_0x3a76cf(0x1c0)](path[_0x3a76cf(0x201)](path['dirname'](_0x11aeae)),fs[_0x3a76cf(0x1aa)]['R_OK']|fs[_0x3a76cf(0x1aa)][_0x3a76cf(0x151)],_0x28bef0=>{const _0x34d1c0=_0x3a76cf;_0x28bef0?_0x58f42c[_0x34d1c0(0x239)]({'title':'Read\x20and\x20write\x20permission\x20for\x20folder\x20'+_0x2fa776,'status':![],'priority':_0x167978+0x6}):_0x58f42c['push']({'title':'Read\x20and\x20write\x20permission\x20for\x20folder\x20'+_0x2fa776,'status':!![],'priority':_0x167978+0x6}),_0x125df2();});});},_0x305ce1=['/converters/files/',_0x3b0895(0x126),_0x3b0895(0x1b6),_0x3b0895(0xcc),_0x3b0895(0x12a),_0x3b0895(0x20b),_0x3b0895(0x9b)],_0x5197df=_0x305ce1[_0x3b0895(0xc6)](_0x5d676f);Promise['all']([_0x5a8d90,_0x33ed34,_0x27110a,_0x20acc8,_0x1bcf6e,..._0x5197df])[_0x3b0895(0x224)](()=>{const _0x27f38e=_0x3b0895;_0x18cfa7[_0x27f38e(0x1ff)](0xc8)[_0x27f38e(0x221)]({'checking_list':_0x58f42c});})['catch'](()=>{const _0x353dbe=_0x3b0895;_0x18cfa7['status'](0x1f4)[_0x353dbe(0x221)]({'error':_0x353dbe(0x147)});});}),router[a27_0x2772bf(0xa3)](a27_0x2772bf(0x1fd),protectedRoute,async(_0x371d11,_0x540373)=>{const _0x4a4c85=a27_0x2772bf,_0x3725bd=fs[_0x4a4c85(0x14d)](path[_0x4a4c85(0x201)](path[_0x4a4c85(0x223)](require[_0x4a4c85(0x233)]['filename']),'cadviewer/settings/users.html'),_0x4a4c85(0xfb)),_0x2648d3=_0x3725bd[_0x4a4c85(0x220)](_0x4a4c85(0x11f),_0x371d11[_0x4a4c85(0x1f2)]);_0x540373[_0x4a4c85(0xd4)](_0x2648d3);}),router[a27_0x2772bf(0xef)](a27_0x2772bf(0x1d8),async(_0xfee674,_0x47dbda)=>{const _0xc4bd4=a27_0x2772bf;let _0x15f3f2;try{const [_0x44870d]=await conn[_0xc4bd4(0xc0)]()[_0xc4bd4(0x1f1)](_0xc4bd4(0x1c3),[]);_0x15f3f2=_0x44870d;}catch(_0x10b97a){console['log'](_0x10b97a),_0x47dbda[_0xc4bd4(0x1ff)](0x1f4)[_0xc4bd4(0x221)]({'error':_0xc4bd4(0x14b)});return;}_0x47dbda[_0xc4bd4(0x1ff)](0xc8)[_0xc4bd4(0x221)]({'success':!![],'data':_0x15f3f2});}),router[a27_0x2772bf(0xef)](a27_0x2772bf(0x1fd),upload[a27_0x2772bf(0x90)](a27_0x2772bf(0x21f)),async(_0x4de36c,_0x5d7e7f)=>{const _0xcc3d9a=a27_0x2772bf,{id:_0x3b0343,first_name:_0x12e1ab,last_name:_0x1698fb,username:_0x187c46,email:_0x1a9518,password:_0x2f9328,is_enabled:_0xd210f5}=_0x4de36c['body'],_0x25bc7c=_0x4de36c[_0xcc3d9a(0xa8)]['role']===_0xcc3d9a(0x14c)?_0xcc3d9a(0x14c):_0x4de36c[_0xcc3d9a(0xa8)]['role']===_0xcc3d9a(0x97)?_0xcc3d9a(0x97):_0xcc3d9a(0x1e8);let _0x53d763;console['log'](_0xcc3d9a(0x1d1));_0x2f9328&&(_0x53d763=await bcrypt[_0xcc3d9a(0x106)](_0x2f9328,0xa));let _0x46829c=null;if(_0x4de36c[_0xcc3d9a(0x212)]){const _0x108065=_0xcc3d9a(0x210)+randomUUID()+_0xcc3d9a(0xc4);fs[_0xcc3d9a(0x20d)](_0x4de36c['file'][_0xcc3d9a(0x1e3)],'./'+_0x108065),fs[_0xcc3d9a(0xa9)](_0x4de36c['file']['path']),config['callbackMethod_gatewayUrl_flag']?_0x46829c=config['callbackMethod_gatewayUrl']+'/'+_0x108065:_0x46829c=config[_0xcc3d9a(0xbd)]+'/'+_0x108065;}if(_0x3b0343){try{let [_0x305777]=await conn[_0xcc3d9a(0xc0)]()['execute']('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20(`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?)\x20AND\x20`id`\x20!=\x20?',[_0x1a9518,_0x187c46,_0x3b0343]);if(_0x305777[_0xcc3d9a(0x1d5)]>0x0)_0x5d7e7f[_0xcc3d9a(0x1ff)](0x199)[_0xcc3d9a(0x221)]({'error':_0xcc3d9a(0x1ee)});else{!_0x4de36c[_0xcc3d9a(0x212)]&&([_0x305777]=await conn[_0xcc3d9a(0xc0)]()['execute']('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?',[_0x3b0343]),_0x46829c=_0x305777[0x0]['avatar_url']);const _0x283ecd=_0xcc3d9a(0x105)+(_0x2f9328?_0xcc3d9a(0x117):'')+_0xcc3d9a(0xa2);await conn[_0xcc3d9a(0xc0)]()[_0xcc3d9a(0x1f1)](_0x283ecd,_0x2f9328?[_0x46829c,_0x12e1ab,_0x1698fb,_0x187c46,_0x1a9518,_0x53d763,_0xd210f5,_0x25bc7c,_0x3b0343]:[_0x46829c,_0x12e1ab,_0x1698fb,_0x187c46,_0x1a9518,_0xd210f5,_0x25bc7c,_0x3b0343]);}}catch(_0x752dd6){console[_0xcc3d9a(0x187)](_0x752dd6),_0x5d7e7f[_0xcc3d9a(0x1ff)](0x1f4)[_0xcc3d9a(0x221)]({'error':_0xcc3d9a(0x14b)});return;}_0x5d7e7f['status'](0xc8)[_0xcc3d9a(0x221)]({'success':!![],'message':_0xcc3d9a(0x155)});}else{try{const [_0x5c43bf]=await conn['promise']()[_0xcc3d9a(0x1f1)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?',[_0x1a9518,_0x187c46]);if(_0x5c43bf[_0xcc3d9a(0x1d5)]>0x0)_0x5d7e7f[_0xcc3d9a(0x1ff)](0x199)['json']({'error':_0xcc3d9a(0x1ee)});else{const _0x2b1573=randomUUID();await conn[_0xcc3d9a(0xc0)]()[_0xcc3d9a(0x1f1)](_0xcc3d9a(0x10f),[_0x46829c,_0x12e1ab,_0x1698fb,_0x187c46,_0x1a9518,_0x53d763,_0x25bc7c,_0xd210f5,_0x2b1573]);const _0x2a8869=_0xcc3d9a(0x18f)+_0x2b1573;fs['mkdirSync'](_0x2a8869);}}catch(_0x2676ad){console[_0xcc3d9a(0x187)](_0x2676ad),_0x5d7e7f[_0xcc3d9a(0x1ff)](0x1f4)[_0xcc3d9a(0x221)]({'error':_0xcc3d9a(0x14b)});return;}_0x5d7e7f[_0xcc3d9a(0x1ff)](0xc8)['json']({'success':!![],'message':'User\x20created\x20successfully'});}}),router[a27_0x2772bf(0xd9)](a27_0x2772bf(0xaf),async(_0xb3e3f9,_0x25b8f9)=>{const _0x510a61=a27_0x2772bf,{userId:_0x2b1cea}=_0xb3e3f9[_0x510a61(0xa8)];let _0x367749;try{const [_0x1e1fed]=await conn[_0x510a61(0xc0)]()[_0x510a61(0x1f1)](_0x510a61(0x1f7),[_0x2b1cea]);_0x1e1fed[_0x510a61(0x1d5)]>0x0&&(_0x367749=_0x1e1fed[0x0]);}catch(_0x3a2f8c){console['log']({'err':_0x3a2f8c}),_0x25b8f9['status'](0x1f4)[_0x510a61(0x221)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}if(!_0x367749){_0x25b8f9['status'](0x191)[_0x510a61(0x221)]({'error':_0x510a61(0xcd)});return;}let _0x58eeb5=_0x367749[_0x510a61(0x1f0)];if(!_0x58eeb5){_0x58eeb5=randomUUID();try{await conn['promise']()[_0x510a61(0x1f1)]('UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?',[_0x58eeb5,_0x2b1cea]);}catch(_0x285001){console['log']({'err':_0x285001}),_0x25b8f9[_0x510a61(0x1ff)](0x1f4)[_0x510a61(0x221)]({'error':_0x510a61(0x14b)});return;}}const _0x4b5d13=_0x510a61(0x18f)+_0x58eeb5;console[_0x510a61(0x187)]('===================='),console['log'](_0x4b5d13),!fs[_0x510a61(0xe0)](_0x4b5d13)&&fs[_0x510a61(0x203)](_0x4b5d13),cleanCacheForUserFiles(_0x4b5d13),fs[_0x510a61(0x160)](_0x4b5d13,{'recursive':!![],'force':!![]}),fs[_0x510a61(0x203)](_0x4b5d13),_0x25b8f9[_0x510a61(0x1ff)](0xc8)[_0x510a61(0x221)]({'success':!![],'message':'User\x20directory\x20flushed\x20successfully'});}),router['delete'](a27_0x2772bf(0x1eb),async(_0x85070c,_0x2f28e7)=>{const _0x5d977d=a27_0x2772bf,_0x324511=_0x85070c['params'][_0x5d977d(0x1dd)];try{let _0x2c8c46;try{const [_0xb7f7b]=await conn[_0x5d977d(0xc0)]()[_0x5d977d(0x1f1)](_0x5d977d(0x1f7),[_0x324511]);_0xb7f7b[_0x5d977d(0x1d5)]>0x0&&(_0x2c8c46=_0xb7f7b[0x0]);}catch(_0x241d3c){console[_0x5d977d(0x187)]({'err':_0x241d3c}),_0x2f28e7[_0x5d977d(0x1ff)](0x1f4)['json']({'error':_0x5d977d(0x14b)});return;}if(!_0x2c8c46){_0x2f28e7[_0x5d977d(0x1ff)](0x191)['json']({'error':_0x5d977d(0xcd)});return;}let _0xea4fb0=_0x2c8c46[_0x5d977d(0x1f0)];if(_0xea4fb0){const _0x1ac4a2=_0x5d977d(0x18f)+_0xea4fb0;fs[_0x5d977d(0xe0)](_0x1ac4a2)&&(cleanCacheForUserFiles(_0x1ac4a2),fs[_0x5d977d(0x160)](_0x1ac4a2,{'recursive':!![],'force':!![]}));}await conn['promise']()['execute'](_0x5d977d(0x21e),[_0x324511]);}catch(_0x14a189){console['log'](_0x14a189),_0x2f28e7[_0x5d977d(0x1ff)](0x1f4)['json']({'error':'Error!\x20Something\x20went\x20wrong.'});return;}_0x2f28e7[_0x5d977d(0x1ff)](0xc8)[_0x5d977d(0x221)]({'success':!![],'message':_0x5d977d(0x1a1)});}),router['get'](a27_0x2772bf(0xea),async(_0x1c3ac3,_0x503c94)=>{const _0x312b73=a27_0x2772bf,_0xe9f088=osu[_0x312b73(0x184)],_0xde1027=osu[_0x312b73(0x166)],_0x4ad56b=osu['drive'],_0x101ba9=osu['os'],_0x14fd58={'percentage':0x0,'usedGB':0x0,'freeGb':0x0,'totalGB':0x0};try{let _0x2dfaa5=os['platform']()===_0x312b73(0x161)?'c:':'/';const _0xa3f3e0=await _0x4ad56b[_0x312b73(0x235)](_0x2dfaa5);_0x14fd58['percentage']=_0xa3f3e0[_0x312b73(0xd0)],_0x14fd58[_0x312b73(0x112)]=_0xa3f3e0['usedGb'],_0x14fd58[_0x312b73(0x1da)]=_0xa3f3e0[_0x312b73(0x1da)],_0x14fd58[_0x312b73(0x177)]=_0xa3f3e0[_0x312b73(0x1a7)];}catch(_0x1bc99a){console[_0x312b73(0x187)]('Error\x20getting\x20disk\x20usage',_0x1bc99a);}const _0x21cfb9={'usage':0x0,'count':0x0};try{_0x21cfb9[_0x312b73(0xc1)]=await _0xe9f088[_0x312b73(0xc1)](),_0x21cfb9[_0x312b73(0x14a)]=_0xe9f088[_0x312b73(0x14a)]();}catch(_0x30beea){console[_0x312b73(0x187)]('Error\x20getting\x20cpu\x20usage',_0x30beea);}const _0x470ebb={'os':'','platform':'','ip':'','uptime':0x0,'hostname':'','type':'','arch':'','who':'','whoami':'','vmstats':''};try{_0x470ebb['os']=await _0x101ba9[_0x312b73(0xa4)](),_0x470ebb[_0x312b73(0x123)]=_0x101ba9[_0x312b73(0x123)](),_0x470ebb['ip']=_0x101ba9['ip'](),_0x470ebb[_0x312b73(0x1db)]=_0x101ba9[_0x312b73(0x1db)](),_0x470ebb[_0x312b73(0x111)]=_0x101ba9['hostname'](),_0x470ebb[_0x312b73(0x204)]=_0x101ba9[_0x312b73(0x204)](),_0x470ebb[_0x312b73(0xa5)]=_0x101ba9[_0x312b73(0xa5)](),_0x470ebb[_0x312b73(0x9a)]=await osu[_0x312b73(0x1ac)][_0x312b73(0x9a)](),_0x470ebb[_0x312b73(0x107)]=await osu[_0x312b73(0x1ac)][_0x312b73(0x107)](),_0x470ebb[_0x312b73(0x232)]=await osu['osCmd'][_0x312b73(0x232)]();}catch(_0x5e1a49){console['log'](_0x312b73(0xda),_0x5e1a49);}const _0x3d668c={'totalProcesses':0x0,'zombieProcesses':0x0};try{_0x3d668c[_0x312b73(0x9e)]=await osu['proc'][_0x312b73(0x9e)](),_0x3d668c['zombieProcesses']=await osu[_0x312b73(0x110)][_0x312b73(0x1ed)]();}catch(_0x205445){console[_0x312b73(0x187)](_0x312b73(0x238),_0x205445);}let _0x29a336={'usedMemPercentage':0x0,'usedMemMb':0x0,'totalMemMb':0x0};try{const _0x25e7b9=await _0xde1027[_0x312b73(0x235)]();_0x29a336[_0x312b73(0x225)]=_0x25e7b9[_0x312b73(0x225)],_0x29a336[_0x312b73(0x1a8)]=_0x25e7b9[_0x312b73(0x172)]/0x400/0x400,_0x29a336['totalMemMb']=_0x25e7b9[_0x312b73(0xce)]/0x400/0x400;}catch(_0x1282b9){console['log'](_0x312b73(0x1cf),_0x1282b9);}let _0x21d35c=0x0;try{_0x21d35c=await conn[_0x312b73(0xc0)]()[_0x312b73(0x15c)](_0x312b73(0x11b))[_0x312b73(0x224)](([_0x78c628])=>_0x78c628[0x0][_0x312b73(0xce)]);}catch(_0xb480b7){console[_0x312b73(0x187)](_0x312b73(0x118),_0xb480b7);}const _0xbf9389=getMonitoringData(),_0x4a1de9=_0xbf9389[_0x312b73(0x1fa)](_0x7ea080=>_0x7ea080[_0x312b73(0xbf)]!==null&&_0x7ea080[_0x312b73(0xbf)]!==undefined),_0x19a3eb=_0xbf9389['filter'](_0x3f8f81=>_0x3f8f81['conversionMemoryUsage']!==null&&_0x3f8f81[_0x312b73(0x15e)]!==undefined)[_0x312b73(0xc6)](_0xf77201=>parseFloat(_0xf77201[_0x312b73(0x15e)][_0x312b73(0x220)]('Kb')[_0x312b73(0x222)]())),_0x4c0e6e=_0x4a1de9[_0x312b73(0x17e)]((_0x3a8035,_0x4ccb22)=>_0x3a8035+parseFloat(_0x4ccb22[_0x312b73(0xbf)]),0x0)/_0x4a1de9[_0x312b73(0x1d5)],_0x994d7d=_0x19a3eb[_0x312b73(0x17e)]((_0x12927d,_0xbba74a)=>_0x12927d+_0xbba74a,0x0)/_0x19a3eb[_0x312b73(0x1d5)];_0x503c94[_0x312b73(0x221)]({'requestsPerSecond':counter['getStats'](),'diskUsage':_0x14fd58,'cpus':_0x21cfb9,'system':_0x470ebb,'process':_0x3d668c,'totalMonitoringData':_0xbf9389[_0x312b73(0x1d5)],'memory':_0x29a336,'totalUsers':_0x21d35c,'avgConvertionTime':_0x4c0e6e,'avgMemoryUsage':_0x994d7d});}),router[a27_0x2772bf(0xef)](a27_0x2772bf(0x10c),(_0x13c494,_0x1cfd64)=>{const _0x7a14e1=a27_0x2772bf;counter[_0x7a14e1(0x205)](),_0x1cfd64[_0x7a14e1(0x221)]({'message':_0x7a14e1(0x226)});});const getMonitoringData=()=>{const _0x4cfa8a=a27_0x2772bf,_0xef423b=_0x4cfa8a(0x1c6);let _0x535ecf=[];try{_0x535ecf=JSON['parse'](fs['readFileSync'](_0xef423b));}catch(_0x4c6fa0){console[_0x4cfa8a(0x187)](_0x4cfa8a(0x181));}return _0x535ecf;};router['get'](a27_0x2772bf(0x16e),async(_0x165d66,_0x494baa)=>{const _0x144e49=a27_0x2772bf,{page:page=0x1,limit:limit=0xa}=_0x165d66[_0x144e49(0x15c)],_0x54d2b3=(page-0x1)*limit;try{const _0x3b968b=getMonitoringData(),_0x3f5549=_0x3b968b['length'],_0x303da0=Math[_0x144e49(0x16c)](_0x3f5549/limit),_0x57a121=_0x3b968b['slice'](_0x54d2b3,_0x54d2b3+limit);_0x494baa[_0x144e49(0x1ff)](0xc8)[_0x144e49(0x221)]({'data':_0x57a121,'page':parseInt(''+page),'totalPages':_0x303da0,'total':_0x3f5549});}catch(_0x7f9316){console['log'](_0x7f9316),_0x494baa[_0x144e49(0x1ff)](0x1f4)[_0x144e49(0x221)]({'error':_0x144e49(0x14b)});}}),router[a27_0x2772bf(0xd9)]('/conversion/clean',async(_0x5d0bcb,_0xb63d3e)=>{const _0x4ec63d=a27_0x2772bf,_0x515860=_0x4ec63d(0x1c6);try{fs['writeFileSync'](_0x515860,JSON[_0x4ec63d(0x1b9)]([],null,0x4)),analyzeConverterFiles(),_0xb63d3e[_0x4ec63d(0x1ff)](0xc8)[_0x4ec63d(0x221)]({'message':_0x4ec63d(0x1de)});}catch(_0x311b3b){console['log'](_0x311b3b),_0xb63d3e[_0x4ec63d(0x1ff)](0x1f4)['json']({'error':_0x4ec63d(0x14b)});}}),router[a27_0x2772bf(0xa3)](a27_0x2772bf(0xff),async(_0x5672ab,_0x381a47)=>{const _0x2f63b0=a27_0x2772bf,_0x34bfcc=getHotConfig()[_0x2f63b0(0x94)][_0x2f63b0(0x220)]('//','/'),{page:page=0x1,limit:limit=0xa}=_0x5672ab[_0x2f63b0(0x15c)],_0x41ca5=(page-0x1)*limit;try{const _0x56bbc7=_0x34bfcc+'memorydata.csv';console[_0x2f63b0(0x187)](_0x56bbc7);const _0x21b32e=fs[_0x2f63b0(0x14d)](_0x56bbc7,_0x2f63b0(0xfb)),_0x3f3b27=_0x21b32e[_0x2f63b0(0x1af)]('\x0a'),_0x59b01c=[];_0x3f3b27['forEach'](_0x28e8c7=>{const _0x519778=_0x2f63b0,_0x3f0e79=_0x28e8c7[_0x519778(0x1af)](',');if(_0x3f0e79[_0x519778(0x1d5)]<0x4)return;const _0x25ab36=_0x3f0e79[0x0],_0x4cf570=_0x3f0e79[0x1],_0x5e03b3=parseFloat(_0x3f0e79[0x2]);_0x59b01c[_0x519778(0x239)]({'file':_0x25ab36[_0x519778(0x220)]('\x22',''),'action':_0x4cf570,'timeSpend':_0x5e03b3,'memoryUsage':_0x3f0e79[0x3]});});const _0x3b5f9b=_0x59b01c['length'],_0xefd5e6=Math[_0x2f63b0(0x16c)](_0x3b5f9b/limit),_0x9e8292=_0x59b01c[_0x2f63b0(0xb7)](_0x41ca5,_0x41ca5+limit);_0x381a47[_0x2f63b0(0x1ff)](0xc8)[_0x2f63b0(0x221)]({'data':_0x9e8292,'page':parseInt(''+page),'totalPages':_0xefd5e6,'total':_0x3b5f9b});}catch(_0x2024be){console['log'](_0x2024be),_0x381a47[_0x2f63b0(0x1ff)](0x1f4)[_0x2f63b0(0x221)]({'error':'Error!\x20Something\x20went\x20wrong.'});}}),router['get']('/cache/stats',async(_0x4f2a3f,_0xc9675b)=>{const _0x3c97b0=a27_0x2772bf,_0x2d85fd=path[_0x3c97b0(0x201)](path[_0x3c97b0(0x223)](require[_0x3c97b0(0x233)]['filename']),_0x3c97b0(0xb5),_0x3c97b0(0x1e4));try{let _0x4068ea=0x0,_0x3627c5=0x0;function _0x3693b6(_0x97218e){const _0x55255c=_0x3c97b0;let _0x113c62=0x0,_0x28e55a=0x0;if(fs['existsSync'](_0x97218e)){const _0x2d63b3=fs[_0x55255c(0x1b4)](_0x97218e);_0x28e55a=0x0;for(const _0x15f050 of _0x2d63b3){const _0x75c25a=path[_0x55255c(0x201)](_0x97218e,_0x15f050),_0x20c533=fs['statSync'](_0x75c25a);if(_0x20c533[_0x55255c(0x1ef)]()&&_0x15f050!==_0x55255c(0x1c9))_0x28e55a++,_0x113c62+=_0x20c533[_0x55255c(0x1b8)];else{if(_0x20c533[_0x55255c(0x134)]()){}}}}return{'size':_0x113c62,'count':_0x28e55a};}const _0x2a6284=_0x3693b6(_0x2d85fd);_0x4068ea=_0x2a6284['size'],_0x3627c5=_0x2a6284[_0x3c97b0(0x14a)],_0xc9675b['json']({'fileCount':_0x3627c5,'totalSize':_0x4068ea});}catch(_0x2d06af){console[_0x3c97b0(0x20e)](_0x3c97b0(0x237),_0x2d06af),_0xc9675b[_0x3c97b0(0x1ff)](0x1f4)['json']({'error':_0x3c97b0(0xe3)});}}),router[a27_0x2772bf(0xd9)](a27_0x2772bf(0x141),async(_0x104b55,_0x1b9c2f)=>{const _0x42197f=a27_0x2772bf,_0x2f456b=path[_0x42197f(0x201)](path[_0x42197f(0x223)](require[_0x42197f(0x233)][_0x42197f(0x1c2)]),_0x42197f(0xb5),_0x42197f(0x1e4));try{function _0x499633(_0x4622d7){const _0x14c22f=_0x42197f;if(fs[_0x14c22f(0xe0)](_0x4622d7)){const _0x47652c=fs[_0x14c22f(0x1b4)](_0x4622d7);for(const _0x4a463c of _0x47652c){const _0x22afea=path[_0x14c22f(0x201)](_0x4622d7,_0x4a463c),_0x5141a3=fs[_0x14c22f(0xaa)](_0x22afea);if(_0x5141a3[_0x14c22f(0x134)]()){}else _0x4a463c!==_0x14c22f(0x1c9)&&fs['unlinkSync'](_0x22afea);}}}_0x499633(_0x2f456b),analyzeConverterFiles(),_0x1b9c2f[_0x42197f(0x221)]({'message':_0x42197f(0x217)});}catch(_0x534360){console[_0x42197f(0x20e)](_0x42197f(0x20c),_0x534360),_0x1b9c2f[_0x42197f(0x1ff)](0x1f4)[_0x42197f(0x221)]({'error':'Failed\x20to\x20flush\x20cache'});}}),router['get'](a27_0x2772bf(0x135),async(_0x2ff02b,_0x56eb84)=>{const _0x133255=a27_0x2772bf;_0x56eb84[_0x133255(0x15f)](path[_0x133255(0x201)](path[_0x133255(0x223)](require[_0x133255(0x233)][_0x133255(0x1c2)]),_0x133255(0x12b)));}),router[a27_0x2772bf(0xa3)]('/cache',protectedRoute,async(_0x35c7ca,_0xb181c2)=>{const _0x25eece=a27_0x2772bf,_0x113554=fs['readFileSync'](path[_0x25eece(0x201)](path['dirname'](require[_0x25eece(0x233)][_0x25eece(0x1c2)]),_0x25eece(0x121)),_0x25eece(0xfb)),_0x434133=_0x113554[_0x25eece(0x220)](_0x25eece(0x11f),_0x35c7ca[_0x25eece(0x1f2)]);_0xb181c2['send'](_0x434133);}),router[a27_0x2772bf(0xa3)]('/cache/files',async(_0x120858,_0x49e021)=>{const _0x2a2590=a27_0x2772bf,{page:page=0x1,limit:limit=0x10}=_0x120858[_0x2a2590(0x15c)],_0x1cfc95=JSON['parse'](fs[_0x2a2590(0x14d)](path[_0x2a2590(0x201)](path[_0x2a2590(0x223)](require[_0x2a2590(0x233)][_0x2a2590(0x1c2)]),'cadviewer/settings/converter-files-analysis.json'))),_0x1697e2=(page-0x1)*limit,_0x54b912=page*limit,_0x169af5=_0x1cfc95[_0x2a2590(0x1e4)]['length'],_0x221dd8=Math[_0x2a2590(0x16c)](_0x169af5/limit),_0x56763f=_0x1cfc95[_0x2a2590(0x1e4)][_0x2a2590(0xb7)](_0x1697e2,_0x54b912);_0x49e021['json']({'files':_0x56763f,'pagination':{'total':_0x169af5,'totalPages':_0x221dd8,'currentPage':parseInt(page),'limit':parseInt(limit)}});return;}),router[a27_0x2772bf(0xa3)](a27_0x2772bf(0x22f),async(_0xbcebf8,_0x133f58)=>{const _0x55d3e3=a27_0x2772bf,{file:_0x4253ff}=_0xbcebf8[_0x55d3e3(0x1a0)],_0x222aaa=path[_0x55d3e3(0x201)](path[_0x55d3e3(0x223)](require[_0x55d3e3(0x233)][_0x55d3e3(0x1c2)]),_0x55d3e3(0xb5),_0x55d3e3(0x1e4)),_0x1ace3c=path[_0x55d3e3(0x201)](_0x222aaa,_0x4253ff),_0x2b5a9f=fs[_0x55d3e3(0x14d)](_0x1ace3c,_0x55d3e3(0xfb)),_0x1eae42=_0x2b5a9f[_0x55d3e3(0x1af)]('\x0a'),_0x4c738b=_0x1eae42[_0x55d3e3(0xc6)](_0x3809db=>{const _0x2638d7=_0x55d3e3,_0x435f72=_0x3809db[_0x2638d7(0x1af)](',');return _0x435f72[_0x2638d7(0xc6)](_0x482b34=>_0x482b34[_0x2638d7(0x220)]('\x22',''));});_0x133f58[_0x55d3e3(0x221)](_0x4c738b);}),router[a27_0x2772bf(0xa3)](a27_0x2772bf(0x208),async(_0x5e6104,_0x1de1fd)=>{const _0x3d8bf0=a27_0x2772bf,{id:_0x16c7ff}=_0x5e6104[_0x3d8bf0(0x1a0)],_0x1b5f27=path[_0x3d8bf0(0x201)](path[_0x3d8bf0(0x223)](require[_0x3d8bf0(0x233)][_0x3d8bf0(0x1c2)]),_0x3d8bf0(0xb5),_0x3d8bf0(0x1e4)),_0x58e851=path['join'](_0x1b5f27,_0x16c7ff);if(_0x58e851[_0x3d8bf0(0x129)]('.svgz')){var _0x584f76=require(_0x3d8bf0(0x1c1));const _0x38ce6f=fs[_0x3d8bf0(0x14d)](_0x58e851),_0x23cd36=_0x584f76[_0x3d8bf0(0x189)](_0x38ce6f);_0x1de1fd[_0x3d8bf0(0x19e)]('Content-Type',_0x3d8bf0(0x1bc)),_0x1de1fd[_0x3d8bf0(0xd4)](_0x23cd36);}else _0x1de1fd['sendFile'](_0x58e851);}),router['delete'](a27_0x2772bf(0x208),async(_0x1de23d,_0x59e688)=>{const _0x3f81a3=a27_0x2772bf,{id:_0x5a954a}=_0x1de23d['params'],_0x126a10=path[_0x3f81a3(0x201)](path[_0x3f81a3(0x223)](require[_0x3f81a3(0x233)][_0x3f81a3(0x1c2)]),'converters','files'),_0x31fa78=JSON[_0x3f81a3(0x122)](fs[_0x3f81a3(0x14d)](path[_0x3f81a3(0x201)](path[_0x3f81a3(0x223)](require['main'][_0x3f81a3(0x1c2)]),_0x3f81a3(0xfc)))),_0x5925b9=_0x31fa78[_0x3f81a3(0x1e4)]['find'](_0xee920d=>_0xee920d[_0x3f81a3(0x215)]===_0x5a954a);if(_0x5925b9){try{fs['existsSync'](path[_0x3f81a3(0x201)](_0x126a10,_0x5925b9[_0x3f81a3(0x215)]))&&fs[_0x3f81a3(0xa9)](path['join'](_0x126a10,_0x5925b9[_0x3f81a3(0x215)]));}catch(_0x3fe807){console['log'](_0x3f81a3(0x170),{'e':_0x3fe807});}(_0x5925b9[_0x3f81a3(0xd6)]??[])[_0x3f81a3(0x19d)](_0x207805=>{const _0x374801=_0x3f81a3;try{fs['existsSync'](path['join'](_0x126a10,_0x207805['id']))&&fs[_0x374801(0xa9)](path[_0x374801(0x201)](_0x126a10,_0x207805['id']));}catch(_0x25143d){console['log'](_0x374801(0x170),{'e':_0x25143d});}});}analyzeConverterFiles(),_0x59e688['json']({'message':_0x3f81a3(0x19f)});});const deleteOldDemoUsers=async()=>{const _0x46cc28=a27_0x2772bf;console[_0x46cc28(0x187)](_0x46cc28(0x1ca));const _0x597f73=config[_0x46cc28(0x16a)],_0x593543=_0x46cc28(0xb9);try{const [_0x522891]=await conn[_0x46cc28(0xc0)]()[_0x46cc28(0x1f1)](_0x593543,[_0x597f73]),_0x2d1bac=_0x522891['map'](_0x193b90=>_0x193b90[_0x46cc28(0x1f0)]),_0x365ec1=_0x522891[_0x46cc28(0xc6)](_0x3735db=>_0x3735db[_0x46cc28(0x16f)]);console[_0x46cc28(0x187)](_0x365ec1),await conn[_0x46cc28(0xc0)]()['execute']('DELETE\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)',[_0x597f73]),_0x2d1bac[_0x46cc28(0x19d)](_0x3dd1a0=>{const _0x4cbbea=_0x46cc28;try{const _0x44758e=_0x4cbbea(0x18f)+_0x3dd1a0;cleanCacheForUserFiles(_0x44758e),fs['rmdirSync'](_0x44758e);}catch(_0x42184f){console[_0x4cbbea(0x20e)](_0x4cbbea(0xe8),_0x42184f);}}),console[_0x46cc28(0x187)](_0x46cc28(0xe9)+_0x522891['length']+_0x46cc28(0x167)+_0x597f73+_0x46cc28(0xfa));}catch(_0x1cf36c){console[_0x46cc28(0x20e)](_0x46cc28(0x95),_0x1cf36c);}};function a27_0x1cdf(){const _0x52345a=['padStart','fileName','callbackMethod','No\x20files\x20uploaded','fileLoad_Password','linux','model','/tailwind.js','toISOString','forEach','setHeader','File\x20deleted\x20successfully','params','User\x20deleted\x20successfully','/config','email,firstname,lastname\x0a','mysqlPassword','settingsUserBasicAuth','/logs/content','totalGb','usedMemMb','\x20GB','constants','autoxchange_executable','osCmd','10FOeIoo','Log\x20file\x20cleaned.','split','Folder\x20deleted.','writeFileSync','../libs/log','Error\x20saving\x20parameters.','readdirSync','Server\x20Settings','/converters/files/merged/','LinkList\x20Settings','size','stringify','Error\x20creating\x20folder.','Folder\x20created.','image/svg+xml','/config/global-update','dwgmerge_executable_linux','getDate','access','zlib','filename','SELECT\x20*\x20FROM\x20users','DWG','/chart.min.js','cadviewer/settings/requests-callapiconversion-monitoring.json','diskStorage','../libs/counter.js','.gitkeep','Deleting\x20old\x20demo_user\x20accounts...','.log','hlall','some','updatedAt','Error\x20getting\x20memory\x20info','ContentSecurityPolicy','=============================>','cadviewer/settings/home.html','settingsPasswordBasicAuth','../libs/config','length','../libs/email-utils','cachedfiles','/users/list','pop','freeGb','uptime','Exporting\x20new\x20users\x20for\x20Google\x20Ads...','userId','Monitoring\x20file\x20cleaned.','pdf','folderLocation','cadviewer/settings/vanilla-toast.js','Failed\x20to\x20trigger\x20export','path','files','\x20does\x20not\x20exist.','setMonth','AutoXchange\x20Settings','user','now','24708lqJXCv','/users/:userId','Folder\x20already\x20exists.','zombieProcesses','User\x20with\x20that\x20email\x20or\x20username\x20already\x20exists','isFile','folder_name','execute','version','Files\x20uploaded\x20successfully','Error\x20finding\x20log\x20files:','Error\x20getting\x20Users\x20export\x20export\x20history:','cadviewer/settings/logs.html','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','X_OK','\x20KB','filter','startsWith','cadviewer/settings/rest-api-parameters.json','/users','extname','status','Le\x20dossier\x20','join','put','mkdirSync','type','reset','array','/logs','/cache/files/:id','Cache\x20directory\x20','No\x20new\x20users\x20to\x20export\x20for\x20Google\x20Ads','/content/redlines/','Error\x20flushing\x20cache:','copyFileSync','error','.svg','avatars/','tmp','file','Directory\x20','linklist_executable','name','0\x200\x20*\x20*\x20*','Cache\x20flushed\x20successfully','autoxchange_executable_windows','Analyse\x20périodique\x20des\x20fichiers\x20du\x20dossier\x20converters/files\x20planifiée\x20(toutes\x20les\x20heures)','Mail\x20Server\x20Settings','2876780DCxVxH','/logs/clean','.json','DELETE\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','avatar','replaceAll','json','trim','dirname','then','usedMemPercentage','Counter\x20reset\x20successfully','No\x20config\x20object\x20provided','CADViewer_config.json','purple','getHotConfig','fontLocation','node-os-utils','sub_dirs','cadviewer/settings/icons.js','/cache/csv/:file','createdAt','8CJFKKo','vmstats','main','licenseLocation','info','SVGZ','Error\x20getting\x20cache\x20stats:','Error\x20getting\x20process\x20info','push','cadviewer/settings/folders.html','dwgmerge_executable','single','writeFile','2101tmpvhy','radio|windows,linux','converterLocation','Error\x20deleting\x20old\x20demo_user\x20accounts:','Config\x20updated.','demo_user','logs','cadviewer/settings/vanilla-toast.css','who','/content/redlines/v7/','crypto','/style.css','totalProcesses','ContentSecurityPolicyReportOnly','windows','.csv','`is_enabled`\x20=\x20?,\x20`role`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','get','oos','arch','Router','/users-export/trigger','body','unlinkSync','statSync','blocks','./tmp','DwgMerge\x20Settings','last-users-export.json','/users/flush-dir','mysqlHost','formatedSize','RL/TL\x20Processing','callbackMethod_gatewayUrl','message','converters','.log\x22','slice','download','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','dwgmerge_executable_windows','svgz','Folder\x20not\x20found','ServerUrl','Base\x20folder\x20not\x20exists,\x20please\x20verify\x20your\x20configuration.','conversionTimeSpend','promise','usage','ServerLocation','converterpathLin','.png','Content-Type','map','splity','svg','Error\x20reading\x20last\x20export\x20info:','darwin','usersExportFrequency','/converters/files/print/','Invalid\x20user','total','settings','usedPercentage','getFullYear','keys','PDF','send','393ohFMrb','availableFormats','mysqlUsername','.dwg.json','delete','Error\x20getting\x20os\x20info','Error\x20exporting\x20users\x20for\x20Google\x20Ads:','fileLocationUrl','standard','Demo\x20and\x20Base\x20User\x20Settings','JSON\x20Data\x20Extraction','existsSync','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20email,\x20first_name,\x20last_name,\x20created_at\x20\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20>\x20?\x20\x0a\x20\x20\x20\x20\x20\x20ORDER\x20BY\x20created_at\x20DESC\x0a\x20\x20\x20\x20','atime','Failed\x20to\x20get\x20cache\x20stats','Error\x20cleaning\x20cache\x20for\x20user\x20files:','Erreur\x20lors\x20de\x20l\x27analyse\x20des\x20fichiers\x20du\x20dossier\x20converters/files:\x20','goodFileName','CADViewer\x20Settings','Error\x20deleting\x20user\x20folder:','Old\x20demo_user\x20accounts\x20(','/metrics','toLocaleLowerCase','red','Content-Disposition','107478xwWlMZ','post','node-schedule','cadviewer','clean','csv','../CADViewer_config.json','Parameters\x20saved.','isFolder','test','exports','temp_print_folder','\x20days\x20have\x20been\x20deleted.','utf8','cadviewer/settings/converter-files-analysis.json','fileLoad_UserName','\x20\x20\x20','/conversion/memorydata','dwg','last_name','===================error===================','Error\x20deleting\x20cache\x20file\x20','first_name','UPDATE\x20`users`\x20SET\x20`avatar_url`\x20=\x20?,\x20`first_name`\x20=\x20?,\x20`last_name`\x20=\x20?,\x20`username`\x20=\x20?,\x20`email`\x20=\x20?,','hash','whoami','converter-files-analysis.json','number','autodetect_location','\x22exec\x22\x20command\x20activated\x20on\x20NodeJS','/metrics/reset','biweekly','toFixed','INSERT\x20INTO\x20`users`\x20(`avatar_url`,\x20`first_name`,\x20`last_name`,\x20`username`,\x20`email`,\x20`crypted_password`,\x20`role`,\x20`is_enabled`,\x20`folder_name`)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','proc','hostname','usedGB','/doctor','radio|','DWG\x20to\x20PDF\x20Conversion','setup_mysqlHost','`crypted_password`\x20=\x20?,\x20','Error\x20getting\x20total\x20users','setDate','Callback\x20and\x20Authentication\x20Settings','SELECT\x20COUNT(*)\x20as\x20total\x20FROM\x20users','boolean','Error\x20updating\x20config','Error\x20deleting\x20file.','{version}','users-export-','cadviewer/settings/conversion-cache.html','parse','platform','mysqlDatabase','linklist_executable_linux','/converters/autoxchange/linux/','File\x20deleted.','23jrurCf','endsWith','/converters/files/pdf/','cadviewer/settings/cache-stats.js','multer','/config/content','getMonth','0\x201\x20*\x20*\x20*','File\x20not\x20found','yellow','.pdf','mkdir','isDirectory','/cache-stats.js','ctime','Error\x20triggering\x20Users\x20export:','attachment;\x20filename=\x22','SVG','Error\x20deleting\x20folder.','/doctor/check','\x22\x20executable','dwgmergeLocation','toString','867462qFxbCE','/restapi-test','/cache/flush','originalname','\x20users\x20to\x20','readFile','2663019iimGrV','Cache\x20cleaned\x20for\x20files\x20in\x20','An\x20error\x20occurred\x20while\x20checking.','converterpathWin','*\x20*\x20*\x20*\x20*','count','Error!\x20Something\x20went\x20wrong.','admin','readFileSync','includes','/vanilla-toast.css','DWG\x20file\x20in\x20multiple\x20files','W_OK','fileLocation','24108QzCMNs','Users\x20export\x20triggered\x20successfully','User\x20updated\x20successfully','3016377UrHvXZ','/folders/delete','cadviewer/settings/rest-api.html','.dwg','/folders','/folders/update','query','autodetect_platform','conversionMemoryUsage','sendFile','rmSync','win32','../libs/mysql.js','express','folderName','0\x2023\x20*\x20*\x20*','mem',')\x20older\x20than\x20','Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_','renameSync','demoUserRetentionDays','cadviewer/settings/users-export.html','ceil','call-Api_Conversion_','/conversion/list','email','Error\x20deleting\x20file','application/octet-stream','used','radio|monthly,biweekly','bcrypt','/export-users','Permission\x20750\x20for\x20the\x20\x22','totalGB','write','File\x20renamed.','express-basic-auth','CSV','autoxchange_executable_linux','mode','reduce','resolve','cadviewer/settings/config.html','Error\x20reading\x20monitoring\x20file','sort','cadviewer/settings/chart.min.js','cpu','Failed\x20to\x20retrieve\x20export\x20history','birthtime','log','globalBearerAutentication','gunzipSync','dir','cvjs_svgz_compress','/users-export/history','/folders/create','replace','./uploads/','cadviewer/settings/licences.html','\x20MB','scheduleJob','linklistLocation'];a27_0x1cdf=function(){return _0x52345a;};return a27_0x1cdf();}schedule[a27_0x2772bf(0x192)](a27_0x2772bf(0x12f),deleteOldDemoUsers),router[a27_0x2772bf(0xa3)](a27_0x2772bf(0x175),protectedRoute,async(_0x2911ac,_0x36db94)=>{const _0x2c6778=a27_0x2772bf,_0x5e07a7=fs[_0x2c6778(0x14d)](path[_0x2c6778(0x201)](path[_0x2c6778(0x223)](require[_0x2c6778(0x233)][_0x2c6778(0x1c2)]),_0x2c6778(0x16b)),_0x2c6778(0xfb)),_0x2d67e6=_0x5e07a7[_0x2c6778(0x220)](_0x2c6778(0x11f),_0x2911ac[_0x2c6778(0x1f2)]);_0x36db94[_0x2c6778(0xd4)](_0x2d67e6);});const exportUsersList=async()=>{const _0x1abd1d=a27_0x2772bf;console[_0x1abd1d(0x187)](_0x1abd1d(0x1dc));const _0x5ef79a=path['join'](path[_0x1abd1d(0x223)](require[_0x1abd1d(0x233)][_0x1abd1d(0x1c2)]),_0x1abd1d(0xf8));!fs['existsSync'](_0x5ef79a)&&fs[_0x1abd1d(0x203)](_0x5ef79a);const _0x2a74bb=config[_0x1abd1d(0xcb)]||'monthly';let _0x467c97;const _0x350e50=path[_0x1abd1d(0x201)](_0x5ef79a,_0x1abd1d(0xae));if(fs[_0x1abd1d(0xe0)](_0x350e50))try{const _0x4a0261=JSON['parse'](fs[_0x1abd1d(0x14d)](_0x350e50,'utf8'));_0x467c97=new Date(_0x4a0261['lastExportDate']);}catch(_0x2d094e){console[_0x1abd1d(0x20e)](_0x1abd1d(0xc9),_0x2d094e),_0x467c97=calculateDefaultLastExportDate(_0x2a74bb);}else _0x467c97=calculateDefaultLastExportDate(_0x2a74bb);const _0x1e04c9=new Date(),_0x4609f5=_0x1e04c9[_0x1abd1d(0xd1)]()+'-'+String(_0x1e04c9[_0x1abd1d(0x12e)]()+0x1)[_0x1abd1d(0x194)](0x2,'0')+'-'+String(_0x1e04c9[_0x1abd1d(0x1bf)]())[_0x1abd1d(0x194)](0x2,'0'),_0x2e7ce1=_0x1abd1d(0x120)+_0x4609f5+_0x1abd1d(0xa1),_0x1ea67a=path[_0x1abd1d(0x201)](_0x5ef79a,_0x2e7ce1);try{const _0x81295c=_0x1abd1d(0xe1),[_0x1f1c81]=await conn[_0x1abd1d(0xc0)]()['execute'](_0x81295c,[_0x467c97]);if(_0x1f1c81[_0x1abd1d(0x1d5)]===0x0){console['log'](_0x1abd1d(0x20a));return;}let _0x4750bc=_0x1abd1d(0x1a3);_0x1f1c81[_0x1abd1d(0x19d)](_0x4dad61=>{const _0x1447ba=_0x1abd1d,_0x5a3a5a=_0x4dad61[_0x1447ba(0x16f)]?'\x22'+_0x4dad61[_0x1447ba(0x16f)][_0x1447ba(0x18e)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x939c66=_0x4dad61[_0x1447ba(0x104)]?'\x22'+_0x4dad61[_0x1447ba(0x104)][_0x1447ba(0x18e)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0xa266ea=_0x4dad61[_0x1447ba(0x101)]?'\x22'+_0x4dad61[_0x1447ba(0x101)]['replace'](/"/g,'\x22\x22')+'\x22':'\x22\x22';_0x4750bc+=_0x5a3a5a+','+_0x939c66+','+_0xa266ea+'\x0a';}),fs['writeFileSync'](_0x1ea67a,_0x4750bc),console[_0x1abd1d(0x187)]('Exported\x20'+_0x1f1c81[_0x1abd1d(0x1d5)]+_0x1abd1d(0x143)+_0x1ea67a);const _0x3e7449={'lastExportDate':_0x1e04c9[_0x1abd1d(0x19c)](),'fileName':_0x2e7ce1,'userCount':_0x1f1c81[_0x1abd1d(0x1d5)]};fs['writeFileSync'](_0x350e50,JSON[_0x1abd1d(0x1b9)](_0x3e7449,null,0x2));}catch(_0x4251f0){console[_0x1abd1d(0x20e)](_0x1abd1d(0xdb),_0x4251f0);}},calculateDefaultLastExportDate=_0x103506=>{const _0xff78b9=a27_0x2772bf,_0x51b518=new Date();return _0x103506===_0xff78b9(0x10d)?_0x51b518[_0xff78b9(0x119)](_0x51b518[_0xff78b9(0x1bf)]()-0xe):_0x51b518[_0xff78b9(0x1e6)](_0x51b518[_0xff78b9(0x12e)]()-0x1),_0x51b518;};function a27_0x1d62(_0x69c04,_0x491a5a){const _0x1cdf61=a27_0x1cdf();return a27_0x1d62=function(_0x1d6249,_0x592d54){_0x1d6249=_0x1d6249-0x90;let _0x1607c7=_0x1cdf61[_0x1d6249];return _0x1607c7;},a27_0x1d62(_0x69c04,_0x491a5a);}router['get'](a27_0x2772bf(0x18c),async(_0x380c85,_0x4827cb)=>{const _0x7a2b72=a27_0x2772bf,_0x1c695c=path['join'](path[_0x7a2b72(0x223)](require[_0x7a2b72(0x233)][_0x7a2b72(0x1c2)]),_0x7a2b72(0xf8));if(!fs[_0x7a2b72(0xe0)](_0x1c695c))return _0x4827cb[_0x7a2b72(0x1ff)](0xc8)['json']({'exports':[]});try{const _0x173c58=fs[_0x7a2b72(0x1b4)](_0x1c695c)[_0x7a2b72(0x1fa)](_0x10226c=>_0x10226c[_0x7a2b72(0x1fb)](_0x7a2b72(0x120))&&_0x10226c[_0x7a2b72(0x129)](_0x7a2b72(0xa1)))[_0x7a2b72(0xc6)](_0x2aa109=>{const _0x26c7a8=_0x7a2b72,_0x4ecf7a=path[_0x26c7a8(0x201)](_0x1c695c,_0x2aa109),_0x3616a7=fs['statSync'](_0x4ecf7a),_0xd13ea=fs['readFileSync'](_0x4ecf7a,_0x26c7a8(0xfb)),_0x5c6051=_0xd13ea[_0x26c7a8(0x1af)]('\x0a')[_0x26c7a8(0x1d5)]-0x1;return{'fileName':_0x2aa109,'createdAt':_0x3616a7[_0x26c7a8(0x186)],'userCount':_0x5c6051};})['sort']((_0x519562,_0x1bd464)=>_0x1bd464['createdAt']-_0x519562[_0x7a2b72(0x230)]);_0x4827cb[_0x7a2b72(0x1ff)](0xc8)[_0x7a2b72(0x221)]({'exports':_0x173c58});}catch(_0x304709){console[_0x7a2b72(0x20e)](_0x7a2b72(0x1f5),_0x304709),_0x4827cb[_0x7a2b72(0x1ff)](0x1f4)['json']({'error':_0x7a2b72(0x185)});}}),router['post'](a27_0x2772bf(0xa7),async(_0x33db11,_0x23523b)=>{const _0x19e08f=a27_0x2772bf;try{await exportUsersList(),_0x23523b['status'](0xc8)[_0x19e08f(0x221)]({'message':_0x19e08f(0x154)});}catch(_0x28ddf2){console[_0x19e08f(0x20e)](_0x19e08f(0x137),_0x28ddf2),_0x23523b['status'](0x1f4)['json']({'error':_0x19e08f(0x1e2)});}}),router[a27_0x2772bf(0xa3)]('/users-export/download/:fileName',async(_0x44bc12,_0x4f47f8)=>{const _0x139558=a27_0x2772bf,{fileName:_0x479541}=_0x44bc12[_0x139558(0x1a0)],_0x1d57c5=path['join'](path[_0x139558(0x223)](require['main']['filename']),_0x139558(0xf8),_0x479541);if(!fs[_0x139558(0xe0)](_0x1d57c5))return _0x4f47f8[_0x139558(0x1ff)](0x194)['json']({'error':'Export\x20file\x20not\x20found'});_0x4f47f8[_0x139558(0xb8)](_0x1d57c5);});const cleanCacheForUserFiles=_0x41d764=>{const _0x5950b6=a27_0x2772bf;try{if(!fs[_0x5950b6(0xe0)](_0x41d764)){console[_0x5950b6(0x187)](_0x5950b6(0x213)+_0x41d764+_0x5950b6(0x1e5));return;}const _0x37aeb1=path['join'](path['dirname'](require[_0x5950b6(0x233)][_0x5950b6(0x1c2)]),_0x5950b6(0xb5),_0x5950b6(0x1e4));if(!fs[_0x5950b6(0xe0)](_0x37aeb1)){console[_0x5950b6(0x187)](_0x5950b6(0x209)+_0x37aeb1+_0x5950b6(0x1e5));return;}const _0x5276b4=JSON[_0x5950b6(0x122)](fs['readFileSync'](path['join'](path[_0x5950b6(0x223)](require[_0x5950b6(0x233)][_0x5950b6(0x1c2)]),_0x5950b6(0xfc)))),_0x190a77=fs[_0x5950b6(0x1b4)](_0x41d764);_0x190a77['forEach'](_0x38ea6a=>{const _0x3802b9=_0x5950b6;_0x5276b4[_0x3802b9(0x1e4)]['forEach'](_0x30cbff=>{const _0x44107b=_0x3802b9;_0x30cbff[_0x44107b(0xe6)]===_0x38ea6a&&_0x30cbff['availableFormats'][_0x44107b(0x19d)](_0x124781=>{const _0x3fd359=_0x44107b;try{fs[_0x3fd359(0xa9)](path[_0x3fd359(0x201)](_0x37aeb1,_0x124781['id']));}catch(_0x224c65){console[_0x3fd359(0x20e)](_0x3fd359(0x103)+_0x124781['id']+':',_0x224c65);}});});}),analyzeConverterFiles(),console[_0x5950b6(0x187)](_0x5950b6(0x146)+_0x41d764);}catch(_0x169ab5){console[_0x5950b6(0x20e)](_0x5950b6(0xe4),_0x169ab5);}};schedule[a27_0x2772bf(0x192)](a27_0x2772bf(0x165),exportUsersList),schedule[a27_0x2772bf(0x192)]('0\x20*\x20*\x20*\x20*',sendFollowUpEmails),schedule[a27_0x2772bf(0x192)](a27_0x2772bf(0x216),sendAccountDeletionPreventionEmails);const analyzeConverterFiles=()=>{const _0x1fc7f0=a27_0x2772bf;try{const _0x5eceb9=path[_0x1fc7f0(0x201)](path[_0x1fc7f0(0x223)](require['main']['filename']),_0x1fc7f0(0xb5),_0x1fc7f0(0x1e4)),_0x3d72ee=path[_0x1fc7f0(0x201)](path[_0x1fc7f0(0x223)](require[_0x1fc7f0(0x233)]['filename']),_0x1fc7f0(0xf1),_0x1fc7f0(0xcf));if(!fs[_0x1fc7f0(0xe0)](_0x5eceb9)){logStream[_0x1fc7f0(0x178)](_0x1fc7f0(0x200)+_0x5eceb9+'\x20n\x27existe\x20pas.');return;}if(!fs['existsSync'](_0x3d72ee)){logStream['write']('Le\x20dossier\x20'+_0x3d72ee+'\x20n\x27existe\x20pas.');return;}const _0x1ade78=fs[_0x1fc7f0(0x1b4)](_0x5eceb9),_0x2345b9={};_0x1ade78[_0x1fc7f0(0x19d)](_0x5ce187=>{const _0x12cba3=_0x1fc7f0,_0x17e074=path[_0x12cba3(0x201)](_0x5eceb9,_0x5ce187),_0x59c2b5=fs['statSync'](_0x17e074),_0x1dbf0b=_0x5ce187['split']('.'),_0xb5f22f=_0x1dbf0b[_0x12cba3(0xb7)](0x0,-0x1)[_0x12cba3(0x1fa)]((_0x13a77f,_0x2a798d)=>!([_0x12cba3(0x100),'rl'][_0x12cba3(0x14e)](_0x13a77f[_0x12cba3(0xeb)]())&&_0x2a798d===_0x1dbf0b[_0x12cba3(0x1d5)]-0x2))[_0x12cba3(0x201)]('.');!Object['keys'](_0x2345b9)[_0x12cba3(0x14e)](_0xb5f22f)?_0x2345b9[_0xb5f22f]=[{'file':_0x5ce187,'stats':_0x59c2b5}]:_0x2345b9[_0xb5f22f][_0x12cba3(0x239)]({'file':_0x5ce187,'stats':_0x59c2b5});});const _0x3ea7f6=[];_0x1ade78[_0x1fc7f0(0x19d)](_0x37dd05=>{const _0x28584d=_0x1fc7f0;if(!_0x37dd05[_0x28584d(0x129)]('.dwg.json'))return;let _0x253832=_0x37dd05;const _0x2c3de4=path['join'](_0x5eceb9,_0x37dd05),_0x17631b=fs['statSync'](_0x2c3de4);let _0x36fcfa=_0x17631b[_0x28584d(0x1b8)],_0x4f0ca6='';const _0x424f1e=fs[_0x28584d(0x14d)](_0x2c3de4,'utf8'),_0x3e003c=JSON[_0x28584d(0x122)](_0x424f1e),_0x2e30d7=_0x3e003c[_0x28584d(0x1d7)]?.[_0x28584d(0xc6)](_0x56d1ed=>_0x56d1ed[_0x28584d(0x195)])??[];if(_0x3e003c[_0x28584d(0x1c2)])_0x253832=_0x3e003c[_0x28584d(0x1c2)];const _0x313a04=_0x37dd05['split']('.'),_0x84c22a=_0x313a04[_0x28584d(0xb7)](0x0,-0x1)[_0x28584d(0x1fa)]((_0x25a4ae,_0x253190)=>!(['dwg','rl'][_0x28584d(0x14e)](_0x25a4ae['toLocaleLowerCase']())&&_0x253190===_0x313a04[_0x28584d(0x1d5)]-0x2))['join']('.'),_0x4e5dd1=Object['keys'](_0x2345b9)['includes'](_0x84c22a)?_0x2345b9[_0x84c22a]:[];for(const _0x19158d of _0x2e30d7){Object['keys'](_0x2345b9)[_0x28584d(0x14e)](_0x19158d)&&_0x4e5dd1[_0x28584d(0x239)](..._0x2345b9[_0x19158d]);}const _0x311250=_0x4e5dd1[_0x28584d(0xc6)](({file:_0x5c3197,stats:_0x330b43})=>{const _0x1ef602=_0x28584d;return!_0x5c3197[_0x1ef602(0x129)](_0x1ef602(0xd8))&&(_0x36fcfa+=_0x330b43[_0x1ef602(0x1b8)]),{'id':_0x5c3197,'name':_0x5c3197[_0x1ef602(0x129)]('.svg')?_0x1ef602(0x139):_0x5c3197[_0x1ef602(0x129)]('.svgz')?_0x1ef602(0x236):_0x5c3197[_0x1ef602(0x129)](_0x1ef602(0x132))?_0x1ef602(0xd3):_0x5c3197[_0x1ef602(0x129)](_0x1ef602(0x21d))?'JSON':_0x5c3197[_0x1ef602(0x129)](_0x1ef602(0xa1))?_0x1ef602(0x17b):_0x5c3197[_0x1ef602(0x129)](_0x1ef602(0x159))?_0x1ef602(0x1c4):_0x5c3197[_0x1ef602(0x1af)]('.')[_0x1ef602(0x1d9)]()['toUpperCase'](),'color':_0x5c3197['endsWith'](_0x1ef602(0x20f))||_0x5c3197[_0x1ef602(0x129)]('.svgz')?_0x1ef602(0x131):_0x5c3197[_0x1ef602(0x129)](_0x1ef602(0x132))?_0x1ef602(0xec):_0x5c3197['endsWith']('.json')?'gray':_0x5c3197['endsWith'](_0x1ef602(0xa1))?'green':_0x5c3197[_0x1ef602(0x129)](_0x1ef602(0x159))?'blue':_0x1ef602(0x229)};});if(_0x311250[_0x28584d(0x1cd)](_0x19060a=>_0x19060a['id'][_0x28584d(0x14e)]('.rl.json')))_0x4f0ca6=_0x28584d(0xb2);else{if(_0x311250['some'](_0xc9fefe=>[_0x28584d(0xc8),_0x28584d(0xbb)][_0x28584d(0x14e)](_0xc9fefe['id']['split']('.')['pop']()))&&_0x311250['some'](_0x597eb7=>[_0x28584d(0xf3)][_0x28584d(0x14e)](_0x597eb7['id'][_0x28584d(0x1af)]('.')[_0x28584d(0x1d9)]())))_0x4f0ca6='DWG\x20to\x20SVG\x20Conversion';else{if(_0x311250['some'](_0x47ec3d=>[_0x28584d(0xc8),_0x28584d(0xbb)][_0x28584d(0x14e)](_0x47ec3d['id']['split']('.')[_0x28584d(0x1d9)]())))_0x4f0ca6='Display\x20of\x20DWG';else{if(_0x311250[_0x28584d(0x1cd)](_0x35df08=>['json'][_0x28584d(0x14e)](_0x35df08['id'][_0x28584d(0x1af)]('.')[_0x28584d(0x1d9)]()))&&_0x311250[_0x28584d(0x1cd)](_0x3b382c=>[_0x28584d(0x100)][_0x28584d(0x14e)](_0x3b382c['id'][_0x28584d(0x1af)]('.')[_0x28584d(0x1d9)]())))_0x4f0ca6=_0x28584d(0xdf);else{if(_0x311250[_0x28584d(0x1cd)](_0x518fe0=>[_0x28584d(0x1df)][_0x28584d(0x14e)](_0x518fe0['id'][_0x28584d(0x1af)]('.')['pop']())))_0x4f0ca6=_0x28584d(0x115);else{if(_0x311250[_0x28584d(0x1cd)](_0x153a9d=>['json']['includes'](_0x153a9d['id'][_0x28584d(0x1af)]('.')[_0x28584d(0x1d9)]()))&&!_0x311250['some'](_0x118cba=>[_0x28584d(0x100)][_0x28584d(0x14e)](_0x118cba['id']['split']('.')[_0x28584d(0x1d9)]())))_0x4f0ca6=_0x28584d(0x150);else _0x311250[_0x28584d(0x1cd)](_0x40aba5=>[_0x28584d(0x221)]['includes'](_0x40aba5['id']['split']('.')[_0x28584d(0x1d9)]()))&&(_0x4f0ca6='Cache\x20conversion');}}}}}_0x3ea7f6[_0x28584d(0x239)]({'name':_0x37dd05,'goodFileName':_0x253832,'size':_0x36fcfa,'createdAt':_0x17631b[_0x28584d(0x186)],'updatedAt':_0x17631b[_0x28584d(0x136)],'readAt':_0x17631b[_0x28584d(0xe2)],'action':_0x4f0ca6,'availableFormats':_0x311250});}),_0x3ea7f6[_0x1fc7f0(0x182)]((_0x3d61b7,_0x564fb0)=>_0x564fb0[_0x1fc7f0(0x1ce)]-_0x3d61b7[_0x1fc7f0(0x1ce)]);const _0x5d6dc7={'timestamp':new Date(),'totalFiles':_0x3ea7f6['length'],'files':_0x3ea7f6},_0x568bdd=path[_0x1fc7f0(0x201)](_0x3d72ee,_0x1fc7f0(0x108));fs['writeFileSync'](_0x568bdd,JSON[_0x1fc7f0(0x1b9)](_0x5d6dc7,null,0x2));}catch(_0xfd82f7){console[_0x1fc7f0(0x187)](_0x1fc7f0(0x102)),console['log'](_0x1fc7f0(0xe5)+_0xfd82f7[_0x1fc7f0(0xb4)]);}},scheduleFileAnalysis=()=>{const _0x534602=a27_0x2772bf;analyzeConverterFiles(),schedule[_0x534602(0x192)](_0x534602(0x149),analyzeConverterFiles),logStream['write'](_0x534602(0x219));};scheduleFileAnalysis(),module[a27_0x2772bf(0xf8)]={'router':router,'analyzeConverterFiles':analyzeConverterFiles};
const a27_0x27b13b=a27_0x3da1;(function(_0x4676e2,_0x456a65){const _0x131b94=a27_0x3da1,_0x49ad8e=_0x4676e2();while(!![]){try{const _0x286d3c=-parseInt(_0x131b94(0x164))/0x1+parseInt(_0x131b94(0x1ba))/0x2+parseInt(_0x131b94(0x141))/0x3+-parseInt(_0x131b94(0x1bf))/0x4+-parseInt(_0x131b94(0x26e))/0x5+-parseInt(_0x131b94(0x1f2))/0x6*(parseInt(_0x131b94(0x222))/0x7)+parseInt(_0x131b94(0x196))/0x8;if(_0x286d3c===_0x456a65)break;else _0x49ad8e['push'](_0x49ad8e['shift']());}catch(_0x1febfc){_0x49ad8e['push'](_0x49ad8e['shift']());}}}(a27_0x1269,0x33aeb));const express=require(a27_0x27b13b(0x267)),router=express[a27_0x27b13b(0x280)](),multer=require(a27_0x27b13b(0x26f)),fs=require('fs'),path=require(a27_0x27b13b(0x1cd)),getHotConfig=require('../libs/config')[a27_0x27b13b(0x13d)],{exec}=require(a27_0x27b13b(0x1df)),os=require('os'),conn=require(a27_0x27b13b(0x225)),bcrypt=require('bcrypt'),osu=require(a27_0x27b13b(0x208)),schedule=require(a27_0x27b13b(0x233)),counter=require(a27_0x27b13b(0x174)),{randomUUID}=require(a27_0x27b13b(0x26a)),logStream=require(a27_0x27b13b(0x1aa)),config=require(a27_0x27b13b(0x10b)),basicAuth=require(a27_0x27b13b(0x18c)),{sendFollowUpEmails,sendAccountDeletionPreventionEmails}=require('../libs/email-utils'),protectedRoute=basicAuth({'users':{[config[a27_0x27b13b(0x14f)]]:config[a27_0x27b13b(0x1b5)]},'challenge':!![],'realm':a27_0x27b13b(0x232)});router[a27_0x27b13b(0x1f5)](a27_0x27b13b(0x28a),async(_0x1e7034,_0x3dc7b1)=>{const _0x4a66dc=a27_0x27b13b;_0x3dc7b1[_0x4a66dc(0x289)](path[_0x4a66dc(0x274)](path['dirname'](require['main'][_0x4a66dc(0x19a)]),_0x4a66dc(0x294)));}),router['get']('/chart.min.js',async(_0x44bad4,_0x3d068c)=>{const _0x52f817=a27_0x27b13b;_0x3d068c[_0x52f817(0x289)](path[_0x52f817(0x274)](path['dirname'](require['main'][_0x52f817(0x19a)]),_0x52f817(0x28d)));}),router[a27_0x27b13b(0x1f5)](a27_0x27b13b(0x11a),async(_0x1d7e78,_0x4fd86a)=>{const _0xda2db3=a27_0x27b13b;_0x4fd86a['sendFile'](path[_0xda2db3(0x274)](path[_0xda2db3(0x160)](require['main'][_0xda2db3(0x19a)]),'cadviewer/settings/style.css'));}),router[a27_0x27b13b(0x1f5)](a27_0x27b13b(0x1d8),async(_0x52e202,_0xd22fd0)=>{const _0x508d67=a27_0x27b13b;_0xd22fd0['sendFile'](path[_0x508d67(0x274)](path[_0x508d67(0x160)](require[_0x508d67(0x13f)][_0x508d67(0x19a)]),_0x508d67(0x240)));}),router[a27_0x27b13b(0x1f5)](a27_0x27b13b(0x1cb),async(_0x12044b,_0x5b6354)=>{const _0x5ec530=a27_0x27b13b;_0x5b6354['sendFile'](path[_0x5ec530(0x274)](path[_0x5ec530(0x160)](require[_0x5ec530(0x13f)][_0x5ec530(0x19a)]),'cadviewer/settings/vanilla-toast.js'));}),router[a27_0x27b13b(0x1f5)]('/icons.js',async(_0x56a2a0,_0x1c9537)=>{const _0x3e96b1=a27_0x27b13b;_0x1c9537[_0x3e96b1(0x289)](path['join'](path[_0x3e96b1(0x160)](require[_0x3e96b1(0x13f)][_0x3e96b1(0x19a)]),_0x3e96b1(0x152)));}),router['get']('/',protectedRoute,async(_0x41f9e2,_0x920b96)=>{const _0x264ed0=a27_0x27b13b,_0x1405b0=fs['readFileSync'](path[_0x264ed0(0x274)](path[_0x264ed0(0x160)](require[_0x264ed0(0x13f)]['filename']),_0x264ed0(0x23a)),_0x264ed0(0x256)),_0x1b7046=_0x1405b0[_0x264ed0(0x180)](_0x264ed0(0x19f),_0x41f9e2[_0x264ed0(0x27b)]);_0x920b96[_0x264ed0(0x1c0)](_0x1b7046);}),router['get'](a27_0x27b13b(0x1b3),protectedRoute,async(_0x4429cc,_0x4549aa)=>{const _0x2ada8c=a27_0x27b13b,_0x59557f=fs['readFileSync'](path[_0x2ada8c(0x274)](path['dirname'](require['main'][_0x2ada8c(0x19a)]),_0x2ada8c(0x243)),_0x2ada8c(0x256)),_0x17143e=_0x59557f['replaceAll'](_0x2ada8c(0x19f),_0x4429cc['version']);_0x4549aa['send'](_0x17143e);}),router['get'](a27_0x27b13b(0x192),protectedRoute,async(_0x5adf1b,_0x26ba2b)=>{const _0x529eb0=a27_0x27b13b,_0x4c65e1=fs['readFileSync'](path['join'](path[_0x529eb0(0x160)](require[_0x529eb0(0x13f)][_0x529eb0(0x19a)]),_0x529eb0(0x13a)),_0x529eb0(0x256)),_0x161149=_0x4c65e1[_0x529eb0(0x180)](_0x529eb0(0x19f),_0x5adf1b[_0x529eb0(0x27b)]);_0x26ba2b[_0x529eb0(0x1c0)](_0x161149);}),router[a27_0x27b13b(0x1f5)]('/folders',protectedRoute,async(_0x323d92,_0x4b2c62)=>{const _0x1e3713=a27_0x27b13b,_0x4737a2=fs[_0x1e3713(0x116)](path[_0x1e3713(0x274)](path[_0x1e3713(0x160)](require[_0x1e3713(0x13f)][_0x1e3713(0x19a)]),_0x1e3713(0x16a)),_0x1e3713(0x256)),_0x455d91=_0x4737a2['replaceAll']('{version}',_0x323d92['version']);_0x4b2c62[_0x1e3713(0x1c0)](_0x455d91);}),router[a27_0x27b13b(0x132)](a27_0x27b13b(0x20e),async(_0x4562df,_0x4a0748)=>{const _0x8b3811=a27_0x27b13b,_0x15d349=path[_0x8b3811(0x274)](path[_0x8b3811(0x160)](require[_0x8b3811(0x13f)][_0x8b3811(0x19a)]),_0x8b3811(0x237)),_0x12343f=JSON['parse'](fs[_0x8b3811(0x116)](_0x15d349,_0x8b3811(0x256))),_0x5feca0=_0x12343f[_0x8b3811(0x135)];if(!fs['existsSync'](_0x5feca0))return _0x4a0748[_0x8b3811(0x249)](0x194)['json']({'message':'Base\x20folder\x20not\x20exists,\x20please\x20verify\x20your\x20configuration.'});const _0x406551=_0x1260d4=>{const _0x15ec5b=_0x8b3811;let _0x4b4c7a=0x0;return _0x1260d4[_0x15ec5b(0x297)](_0x4a2eeb=>{const _0x119434=_0x15ec5b;_0x4a2eeb['isFolder']?_0x4b4c7a+=_0x406551(_0x4a2eeb[_0x119434(0x133)]):_0x4b4c7a+=_0x4a2eeb[_0x119434(0x153)];}),_0x4b4c7a;},_0x526977=_0x44d3da=>{const _0x220f50=_0x8b3811;if(_0x44d3da<0x400)return _0x44d3da+'\x20B';else{if(_0x44d3da<0x400*0x400)return(_0x44d3da/0x400)[_0x220f50(0x13c)](0x2)+'\x20KB';else return _0x44d3da<0x400*0x400*0x400?(_0x44d3da/0x400/0x400)[_0x220f50(0x13c)](0x2)+_0x220f50(0x1da):(_0x44d3da/0x400/0x400/0x400)['toFixed'](0x2)+_0x220f50(0x24f);}},_0x28903f=(_0xbb5943,_0x4c92f3='')=>{const _0x2d710a=_0x8b3811,_0x1d0f5d=fs[_0x2d710a(0x149)](_0xbb5943),_0x51987f=[];return _0x1d0f5d[_0x2d710a(0x297)](_0x2d1e92=>{const _0x513953=_0x2d710a,_0x2899e4=path[_0x513953(0x274)](_0xbb5943,_0x2d1e92)[_0x513953(0x180)]('\x5c','/'),_0x1370e6=fs[_0x513953(0x272)](_0x2899e4);if(_0x1370e6[_0x513953(0x21e)]()){const _0x438368=_0x28903f(_0x2899e4,_0x4c92f3+_0x513953(0x182));_0x51987f[_0x513953(0x1e8)]({'name':_0x2d1e92,'size':_0x1370e6[_0x513953(0x153)],'path':_0x2899e4,'permissions':_0x1370e6[_0x513953(0x226)],'isFolder':!![],'sub_dirs':_0x438368});}else _0x51987f['push']({'name':_0x2d1e92,'size':_0x1370e6[_0x513953(0x153)],'path':_0x2899e4,'permissions':_0x1370e6[_0x513953(0x226)],'isFolder':![]});}),_0x51987f;};let _0x5ceae2=_0x28903f(_0x5feca0);const _0x7d23e4=_0x397ee9=>{const _0x30c2fb=_0x8b3811;return _0x397ee9[_0x30c2fb(0x297)](_0x5bb62a=>{const _0x350df3=_0x30c2fb;_0x5bb62a[_0x350df3(0x13b)]?(_0x5bb62a['formatedSize']=_0x526977(_0x406551(_0x5bb62a['sub_dirs'])),_0x5bb62a[_0x350df3(0x133)]=_0x7d23e4(_0x5bb62a[_0x350df3(0x133)])):_0x5bb62a[_0x350df3(0x185)]=_0x526977(_0x5bb62a[_0x350df3(0x153)]);}),_0x397ee9;};_0x4a0748['status'](0xc8)[_0x8b3811(0x1bb)](_0x7d23e4(_0x5ceae2));}),router[a27_0x27b13b(0x132)](a27_0x27b13b(0x16d),async(_0x2cfd17,_0x81906c)=>{const _0x2317ac=a27_0x27b13b,{path:_0x4402be}=_0x2cfd17[_0x2317ac(0x1a2)],_0x369456=_0x4402be[_0x2317ac(0x221)]('/')[_0x2317ac(0x17c)]();if(!fs[_0x2317ac(0x1dd)](_0x4402be))return _0x81906c['status'](0x194)['json']({'message':_0x2317ac(0x1e5)});_0x81906c[_0x2317ac(0x234)]('Content-Type',_0x2317ac(0x1b7)),_0x81906c['setHeader'](_0x2317ac(0x1c3),_0x2317ac(0x202)+_0x369456+'\x22'),_0x81906c[_0x2317ac(0x1e6)](_0x4402be,_0x4e4fcb=>{const _0xe76fab=_0x2317ac;_0x4e4fcb&&_0x81906c['status'](0x1f4)[_0xe76fab(0x1bb)]({'message':_0xe76fab(0x1b6)});});}),router[a27_0x27b13b(0x132)]('/folders/create',async(_0x6418e6,_0x4be1cb)=>{const _0x13f85b=a27_0x27b13b,_0x4b9de2=_0x6418e6[_0x13f85b(0x1a2)],_0x66c887=getHotConfig()[_0x13f85b(0x135)],_0x357666=path[_0x13f85b(0x274)](_0x66c887,_0x4b9de2[_0x13f85b(0x1cd)]);if(!fs['existsSync'](_0x357666))return _0x4be1cb[_0x13f85b(0x249)](0x194)[_0x13f85b(0x1bb)]({'message':_0x13f85b(0x257)});if(fs[_0x13f85b(0x1dd)](path['join'](_0x357666,_0x4b9de2[_0x13f85b(0x1d5)])))return _0x4be1cb[_0x13f85b(0x249)](0x199)['json']({'message':'Folder\x20already\x20exists.'});fs[_0x13f85b(0x10d)](path[_0x13f85b(0x274)](_0x357666,_0x4b9de2['folderName']),_0x349547=>{const _0xc1dce6=_0x13f85b;_0x349547&&_0x4be1cb[_0xc1dce6(0x249)](0x1f4)[_0xc1dce6(0x1bb)]({'message':_0xc1dce6(0x1fe)}),_0x4be1cb[_0xc1dce6(0x249)](0xc8)[_0xc1dce6(0x1bb)]({'message':_0xc1dce6(0x1a9)});});}),router[a27_0x27b13b(0x191)](a27_0x27b13b(0x15b),async(_0x31065d,_0x533cdf)=>{const _0x41a1aa=a27_0x27b13b,{newName:_0x58d445,isFolder:_0x83daff,path:_0x2af8eb}=_0x31065d[_0x41a1aa(0x1a2)];if(!fs[_0x41a1aa(0x1dd)](_0x2af8eb))return _0x533cdf[_0x41a1aa(0x249)](0x194)['json']({'message':_0x83daff?_0x41a1aa(0x28b):'File\x20not\x20found'});const _0x574dd3=_0x2af8eb[_0x41a1aa(0x1f4)](_0x2af8eb[_0x41a1aa(0x221)]('/')['pop'](),_0x58d445),_0x3df44c=fs[_0x41a1aa(0x272)](_0x2af8eb);_0x3df44c['isDirectory']()?fs[_0x41a1aa(0x27f)](_0x2af8eb,_0x574dd3):(fs['copyFileSync'](_0x2af8eb,_0x574dd3),fs[_0x41a1aa(0x1e1)](_0x2af8eb)),_0x533cdf[_0x41a1aa(0x249)](0xc8)['json']({'message':_0x83daff?_0x41a1aa(0x146):_0x41a1aa(0x147)});}),router[a27_0x27b13b(0x183)]('/folders/delete',async(_0x26a1be,_0x49f91b)=>{const _0x331462=a27_0x27b13b,{path:_0x28ea83}=_0x26a1be['body'];if(!fs[_0x331462(0x1dd)](_0x28ea83))return _0x49f91b[_0x331462(0x249)](0x194)[_0x331462(0x1bb)]({'message':_0x331462(0x148)});const _0x39d956=fs[_0x331462(0x272)](_0x28ea83);if(_0x39d956['isFile']())fs[_0x331462(0x161)](_0x28ea83,_0x3bb5a2=>{const _0x51c618=_0x331462;_0x3bb5a2&&_0x49f91b['status'](0x1f4)[_0x51c618(0x1bb)]({'message':_0x51c618(0x1ae)}),_0x49f91b['status'](0xc8)[_0x51c618(0x1bb)]({'message':_0x51c618(0x1b2)});});else _0x39d956[_0x331462(0x21e)]()&&fs[_0x331462(0x1a5)](_0x28ea83,{'recursive':!![]},_0x2fd1b5=>{const _0x213df3=_0x331462;_0x2fd1b5&&_0x49f91b['status'](0x1f4)['json']({'message':_0x213df3(0x170)}),_0x49f91b[_0x213df3(0x249)](0xc8)['json']({'message':'Folder\x20deleted.'});});});!fs[a27_0x27b13b(0x1dd)](a27_0x27b13b(0x252))&&fs[a27_0x27b13b(0x16f)](a27_0x27b13b(0x252));const storage=multer[a27_0x27b13b(0x2a1)]({'destination':(_0x3ab7db,_0x2271f1,_0x4d8e44)=>{const _0x1fa162=a27_0x27b13b;_0x4d8e44(null,_0x1fa162(0x24d));},'filename':(_0x40a076,_0x432315,_0x50ebd6)=>{const _0x430751=a27_0x27b13b;_0x50ebd6(null,Date['now']()+path[_0x430751(0x171)](_0x432315['originalname']));}}),upload=multer({'storage':storage,'limits':{'fileSize':0xa*0x400*0x400}});router[a27_0x27b13b(0x132)](a27_0x27b13b(0x18d),upload[a27_0x27b13b(0x138)](a27_0x27b13b(0x24c)),async(_0x5f16ec,_0x7bfeec)=>{const _0x2b5a95=a27_0x27b13b,_0x3a34ea=_0x5f16ec[_0x2b5a95(0x1a2)];if(!_0x5f16ec['files']||_0x5f16ec[_0x2b5a95(0x24c)][_0x2b5a95(0x1dc)]===0x0)return _0x7bfeec[_0x2b5a95(0x249)](0x190)[_0x2b5a95(0x1bb)]({'message':_0x2b5a95(0x2a5)});const _0x3bd8f7=getHotConfig()[_0x2b5a95(0x135)],_0x3e58f9=path[_0x2b5a95(0x274)](_0x3bd8f7,_0x3a34ea['path']);if(!fs[_0x2b5a95(0x1dd)](_0x3e58f9))return _0x7bfeec['status'](0x194)['json']({'message':_0x2b5a95(0x257)});const _0x8c6e66=_0x5f16ec[_0x2b5a95(0x24c)][_0x2b5a95(0x139)](_0x54889a=>({'originalname':_0x54889a[_0x2b5a95(0x167)],'filename':_0x54889a['filename'],'mimetype':_0x54889a[_0x2b5a95(0x17b)],'size':_0x54889a[_0x2b5a95(0x153)]}));_0x8c6e66['forEach'](_0x2e8fa4=>{const _0x1a5934=_0x2b5a95;fs[_0x1a5934(0x117)](path[_0x1a5934(0x274)]('tmp',_0x2e8fa4[_0x1a5934(0x19a)]),path[_0x1a5934(0x274)](_0x3e58f9,_0x2e8fa4[_0x1a5934(0x167)])),fs[_0x1a5934(0x1e1)](path[_0x1a5934(0x274)]('tmp',_0x2e8fa4[_0x1a5934(0x19a)]));}),_0x7bfeec[_0x2b5a95(0x249)](0xc8)[_0x2b5a95(0x1bb)]({'message':'Files\x20uploaded\x20successfully','files':_0x8c6e66});}),router[a27_0x27b13b(0x191)](a27_0x27b13b(0x230),async(_0x6d3534,_0xc825ad)=>{const _0x4647d8=a27_0x27b13b,_0x7032d8=path['join'](path[_0x4647d8(0x160)](require[_0x4647d8(0x13f)][_0x4647d8(0x19a)]),'CADViewer_config.json'),{config:_0x2f3113}=_0x6d3534[_0x4647d8(0x1a2)];if(!_0x2f3113)return _0xc825ad[_0x4647d8(0x249)](0x190)[_0x4647d8(0x1bb)]({'message':_0x4647d8(0x1bc)});try{fs[_0x4647d8(0x1c1)](_0x7032d8,JSON[_0x4647d8(0x23c)](_0x2f3113,null,0x4)),_0xc825ad[_0x4647d8(0x249)](0xc8)[_0x4647d8(0x1bb)]({'message':_0x4647d8(0x158)});}catch(_0x80c130){_0xc825ad['status'](0x1f4)[_0x4647d8(0x1bb)]({'message':_0x4647d8(0x1d6)});}}),router[a27_0x27b13b(0x191)](a27_0x27b13b(0x19d),async(_0x286fc6,_0x35e780)=>{const _0x5405e4=a27_0x27b13b,{key:_0xf8f9f6,value:_0x3abdfd}=_0x286fc6[_0x5405e4(0x1a2)],_0xb8d392=path['join'](path[_0x5405e4(0x160)](require['main']['filename']),'CADViewer_config.json');fs[_0x5405e4(0x201)](_0xb8d392,_0x5405e4(0x256),function(_0x1ae87a,_0x47e4f8){const _0x3397fc=_0x5405e4;_0x1ae87a&&_0x35e780['status'](0x1f4)[_0x3397fc(0x1c0)](_0x1ae87a);const _0x313e47=JSON['parse'](_0x47e4f8);_0x313e47[_0xf8f9f6]=_0x3abdfd;if(_0xf8f9f6===_0x3397fc(0x1b4)){let _0x59b080='';if(_0x313e47[_0x3397fc(0x120)]){_0x59b080=os[_0x3397fc(0x265)]();if(_0x59b080===_0x3397fc(0x1d7))_0x59b080=_0x3397fc(0x279);else{if(_0x59b080===_0x3397fc(0x199))_0x59b080=_0x3397fc(0x189);}}else _0x59b080=_0x313e47[_0x3397fc(0x265)];if(_0x59b080==='windows'){_0x313e47[_0x3397fc(0x270)]=path[_0x3397fc(0x1fb)](__dirname,'..')+'/';const _0x2df0eb=/\\/g;_0x313e47[_0x3397fc(0x270)]=_0x313e47[_0x3397fc(0x270)][_0x3397fc(0x1f4)](_0x2df0eb,'/');}else _0x313e47['ServerLocation']=path[_0x3397fc(0x1fb)](__dirname,'..')+'/';}if(_0xf8f9f6==='autodetect_platform'){let _0xe1e41=os[_0x3397fc(0x265)]();if(_0xe1e41===_0x3397fc(0x1d7))_0xe1e41='windows';else _0xe1e41=_0x3397fc(0x189);_0xe1e41===_0x3397fc(0x279)?_0x3abdfd===!![]&&(_0x313e47['autoxchange_executable']=_0x313e47[_0x3397fc(0x1ee)],_0x313e47[_0x3397fc(0x173)]=_0x313e47['dwgmerge_executable_windows'],_0x313e47[_0x3397fc(0x204)]=_0x313e47[_0x3397fc(0x1e9)]):_0x3abdfd===!![]&&(_0x313e47[_0x3397fc(0x1de)]=_0x313e47[_0x3397fc(0x218)],_0x313e47[_0x3397fc(0x173)]=_0x313e47[_0x3397fc(0x1ff)],_0x313e47[_0x3397fc(0x204)]=_0x313e47[_0x3397fc(0x128)]),_0x313e47[_0x3397fc(0x265)]=_0xe1e41;}if(_0x313e47[_0x3397fc(0x120)]){let _0x529f98=os[_0x3397fc(0x265)]();if(_0x529f98==='win32')_0x529f98='windows';else _0x529f98='linux';if(_0x529f98===_0x3397fc(0x279)){if(_0xf8f9f6==='autoxchange_executable_windows')_0x313e47[_0x3397fc(0x1de)]=_0x3abdfd;else{if(_0xf8f9f6===_0x3397fc(0x1b8))_0x313e47[_0x3397fc(0x173)]=_0x3abdfd;else _0xf8f9f6==='linklist_executable_windows'&&(_0x313e47[_0x3397fc(0x204)]=_0x3abdfd);}}else{if(_0xf8f9f6===_0x3397fc(0x218))_0x313e47[_0x3397fc(0x1de)]=_0x3abdfd;else{if(_0xf8f9f6==='dwgmerge_executable_linux')_0x313e47['dwgmerge_executable']=_0x3abdfd;else _0xf8f9f6===_0x3397fc(0x128)&&(_0x313e47[_0x3397fc(0x204)]=_0x3abdfd);}}}fs[_0x3397fc(0x1ab)](_0xb8d392,JSON[_0x3397fc(0x23c)](_0x313e47,null,0x4),function(_0x269d61){const _0x42dbab=_0x3397fc;_0x269d61&&_0x35e780['status'](0x1f4)[_0x42dbab(0x1c0)](_0x269d61),_0x35e780[_0x42dbab(0x249)](0xc8)[_0x42dbab(0x1bb)]({'message':_0x42dbab(0x12c)});});});}),router['post'](a27_0x27b13b(0x25a),async(_0x1b36f4,_0xbcd27c)=>{const _0x594ca3=a27_0x27b13b,_0x352fab=getHotConfig(),_0x13c53b=(_0x352fab[_0x594ca3(0x127)][_0x594ca3(0x16c)](_0x352fab['ServerLocation'])?'':_0x352fab[_0x594ca3(0x270)])+_0x352fab[_0x594ca3(0x127)],_0x4343de=(_0x352fab[_0x594ca3(0x127)][_0x594ca3(0x16c)](_0x352fab[_0x594ca3(0x270)])?'':_0x352fab['ServerLocation'])+_0x352fab[_0x594ca3(0x291)],_0x28fd40=(_0x352fab[_0x594ca3(0x16b)][_0x594ca3(0x16c)](_0x352fab[_0x594ca3(0x270)])?'':_0x352fab['ServerLocation'])+_0x352fab['converterLocation'],_0x55039f=/ax202.*\.exe/,_0x2ea838=/ax202.*/,_0x30f155=/dwgmerge202.*\.exe/,_0x19c820=/dwgmerge_202.*/,_0x433c9a=/linklist_202.*\.exe/,_0xfd6bae=/linklist_202.*/,_0x2609ca=[],_0x559cd4=[],_0x28b56c=[],_0x457544=[],_0x447a66=[],_0x4c094=[];let _0x31674='';if(_0x352fab[_0x594ca3(0x120)]){_0x31674=os[_0x594ca3(0x265)]();if(_0x31674===_0x594ca3(0x1d7))_0x31674=_0x594ca3(0x279);else{if(_0x31674==='darwin')_0x31674=_0x594ca3(0x189);}}else _0x31674=_0x352fab[_0x594ca3(0x265)];fs[_0x594ca3(0x149)](_0x28fd40[_0x594ca3(0x180)]('linux',_0x594ca3(0x279)))[_0x594ca3(0x297)](_0x3cded4=>{const _0x15172f=_0x594ca3;if(_0x55039f[_0x15172f(0x1af)](_0x3cded4[_0x15172f(0x1fc)]()))_0x2609ca['push'](_0x3cded4);}),fs[_0x594ca3(0x149)](_0x13c53b[_0x594ca3(0x180)](_0x594ca3(0x189),_0x594ca3(0x279)))[_0x594ca3(0x297)](_0xb08a7b=>{const _0x2512ab=_0x594ca3;if(_0x30f155['test'](_0xb08a7b['toLocaleLowerCase']()))_0x559cd4[_0x2512ab(0x1e8)](_0xb08a7b);}),fs[_0x594ca3(0x149)](_0x4343de[_0x594ca3(0x180)](_0x594ca3(0x189),_0x594ca3(0x279)))[_0x594ca3(0x297)](_0x13a902=>{const _0x457ae0=_0x594ca3;if(_0x433c9a[_0x457ae0(0x1af)](_0x13a902[_0x457ae0(0x1fc)]()))_0x28b56c['push'](_0x13a902);}),fs[_0x594ca3(0x149)](_0x28fd40[_0x594ca3(0x180)]('windows','linux'))[_0x594ca3(0x297)](_0x371367=>{const _0x56511a=_0x594ca3;if(_0x2ea838['test'](_0x371367['toLocaleLowerCase']()))_0x457544[_0x56511a(0x1e8)](_0x371367);}),fs[_0x594ca3(0x149)](_0x13c53b[_0x594ca3(0x180)](_0x594ca3(0x279),_0x594ca3(0x189)))[_0x594ca3(0x297)](_0x297aa9=>{const _0xa4ba57=_0x594ca3;if(_0x19c820[_0xa4ba57(0x1af)](_0x297aa9['toLocaleLowerCase']()))_0x447a66[_0xa4ba57(0x1e8)](_0x297aa9);}),fs[_0x594ca3(0x149)](_0x4343de[_0x594ca3(0x180)](_0x594ca3(0x279),_0x594ca3(0x189)))[_0x594ca3(0x297)](_0x29d348=>{const _0x312135=_0x594ca3;if(_0xfd6bae[_0x312135(0x1af)](_0x29d348[_0x312135(0x1fc)]()))_0x4c094[_0x312135(0x1e8)](_0x29d348);});const _0x1c10ce=[_0x594ca3(0x118),_0x594ca3(0x22b),_0x594ca3(0x22f),'converterpathLin',_0x594ca3(0x1e2)],_0x336e58=[_0x594ca3(0x106),_0x594ca3(0x1c9),'converterLocation',_0x594ca3(0x17f),'xpathLocation','temp_print_folder',_0x594ca3(0x24b),_0x594ca3(0x127),'linklistLocation',_0x594ca3(0x27b)],_0x1dc54c=['ServerUrl','mysqlHost',_0x594ca3(0x10f),_0x594ca3(0x277),'mysqlDatabase',_0x594ca3(0x268),_0x594ca3(0x23b)],_0x31e783={'ServerUrl':_0x594ca3(0x19e),'autoxchange_executable':'AutoXchange\x20Settings','linklist_executable':_0x594ca3(0x246),'dwgmerge_executable':_0x594ca3(0x197),'setup_mysqlHost':_0x594ca3(0x136),'callbackMethod_gatewayUrl_flag':_0x594ca3(0x1e4),'userFolderMaximumFiles':'Demo\x20and\x20Base\x20User\x20Settings','smtpHost':_0x594ca3(0x12a)},_0x11d28a={'https':_0x594ca3(0x11c),'ServerFrontEndUrlAsAllowedOriginOnly':'boolean','autodetect_platform':_0x594ca3(0x11c),'cvjs_svgz_compress':_0x594ca3(0x11c),'cached_conversion':_0x594ca3(0x11c),'remainOnServer':_0x594ca3(0x11c),'cvjs_debug':'boolean','autodetect_location':_0x594ca3(0x11c),'platform':_0x594ca3(0x1d1),'autoxchange_executable':'radio|'+(_0x31674===_0x594ca3(0x279)?_0x2609ca[_0x594ca3(0x274)](','):_0x457544[_0x594ca3(0x274)](',')),'autoxchange_executable_windows':_0x594ca3(0x292)+_0x2609ca[_0x594ca3(0x274)](','),'autoxchange_executable_linux':_0x594ca3(0x292)+_0x457544[_0x594ca3(0x274)](','),'dwgmerge_executable':_0x594ca3(0x292)+(_0x31674===_0x594ca3(0x279)?_0x559cd4[_0x594ca3(0x274)](','):_0x447a66['join'](',')),'dwgmerge_executable_windows':_0x594ca3(0x292)+_0x559cd4[_0x594ca3(0x274)](','),'dwgmerge_executable_linux':'radio|'+_0x447a66['join'](','),'linklist_executable':'radio|'+(_0x31674===_0x594ca3(0x279)?_0x28b56c[_0x594ca3(0x274)](','):_0x4c094[_0x594ca3(0x274)](',')),'linklist_executable_windows':_0x594ca3(0x292)+_0x28b56c[_0x594ca3(0x274)](','),'linklist_executable_linux':_0x594ca3(0x292)+_0x4c094['join'](','),'callbackMethod_gatewayUrl_flag':_0x594ca3(0x11c),'setup_mysqlHost':_0x594ca3(0x11c),'ContentSecurityPolicyReportOnly':_0x594ca3(0x11c),'fileLoad_PasswordAuthentication':'boolean','contentLocationCheck':_0x594ca3(0x11c),'globalBearerAutentication':_0x594ca3(0x11c),'bcryptSaltRounds':_0x594ca3(0x288),'userFolderMaximumFiles':_0x594ca3(0x288),'userFolderMaximumSizeInMB':'number','recaptchaEnabled':_0x594ca3(0x11c),'usersExportFrequency':_0x594ca3(0x26b),'enableEmailVerification':_0x594ca3(0x11c),'demoUserRetentionDaysAlertBeforeDeletion':_0x594ca3(0x288),'demoUserRetentionDays':_0x594ca3(0x288)},_0x43e454={},_0x5a83e0=Object[_0x594ca3(0x29c)](_0x352fab);_0x352fab[_0x594ca3(0x120)]&&_0x1c10ce[_0x594ca3(0x1e8)](_0x594ca3(0x265)),_0x352fab['autodetect_location']&&(_0x336e58['push'](_0x594ca3(0x270)),_0x336e58[_0x594ca3(0x1e8)](_0x594ca3(0x1de)),_0x336e58[_0x594ca3(0x1e8)](_0x594ca3(0x173)),_0x336e58['push']('linklist_executable')),!_0x352fab[_0x594ca3(0x14e)]&&_0x336e58[_0x594ca3(0x1e8)]('callbackMethod_gatewayUrl'),!_0x352fab['setup_mysqlHost']&&(_0x336e58[_0x594ca3(0x1e8)](_0x594ca3(0x27c)),_0x336e58['push'](_0x594ca3(0x10f)),_0x336e58[_0x594ca3(0x1e8)](_0x594ca3(0x277)),_0x336e58['push'](_0x594ca3(0x1be))),!_0x352fab[_0x594ca3(0x11b)]&&_0x336e58[_0x594ca3(0x1e8)](_0x594ca3(0x245)),!_0x352fab[_0x594ca3(0x129)]&&(_0x336e58['push'](_0x594ca3(0x109)),_0x336e58[_0x594ca3(0x1e8)](_0x594ca3(0x284))),!_0x352fab[_0x594ca3(0x219)]&&_0x336e58['push'](_0x594ca3(0x28e)),_0x5a83e0[_0x594ca3(0x297)](_0x382a59=>{const _0x32563a=_0x594ca3;!_0x1c10ce[_0x32563a(0x16c)](_0x382a59)&&(_0x43e454[_0x382a59]=_0x352fab[_0x382a59]);}),_0x43e454[_0x594ca3(0x1c9)]=''+_0x352fab['ServerUrl']+_0x352fab['fileLocation'],_0xbcd27c[_0x594ca3(0x249)](0xc8)[_0x594ca3(0x1bb)]({'notEditableFields':_0x336e58,'customFieldTypes':_0x11d28a,'notHotEditableFields':_0x1dc54c,'config':_0x43e454,'fieldsTitle':_0x31e783,'configData':_0x352fab});}),router[a27_0x27b13b(0x1f5)](a27_0x27b13b(0x286),protectedRoute,async(_0x1252d3,_0x2e071f)=>{const _0xb2de48=a27_0x27b13b,_0x123f90=fs['readFileSync'](path[_0xb2de48(0x274)](path['dirname'](require['main']['filename']),_0xb2de48(0x12b)),_0xb2de48(0x256)),_0x3add8e=_0x123f90['replaceAll'](_0xb2de48(0x19f),_0x1252d3['version']);_0x2e071f['send'](_0x3add8e);});function findMatchingLogFiles(_0x5dc627,_0x5d1578=/^call-Api_Conversion_\d{1,2}_\d{1,2}_\d{4}\.log$/){const _0x520580=a27_0x27b13b;try{const _0x15fb04=fs[_0x520580(0x149)](_0x5dc627);return _0x15fb04[_0x520580(0x282)](_0xd00f74=>_0x5d1578[_0x520580(0x1af)](_0xd00f74))[_0x520580(0x139)](_0x510236=>_0x510236[_0x520580(0x180)](_0x520580(0x217),'')[_0x520580(0x180)](_0x520580(0x20c),''));}catch(_0x4c558d){return console[_0x520580(0x19b)](_0x520580(0x205),_0x4c558d),[];}}function a27_0x3da1(_0x56e7e2,_0x168a0c){const _0x1269ea=a27_0x1269();return a27_0x3da1=function(_0x3da164,_0x48d176){_0x3da164=_0x3da164-0x106;let _0x3befc6=_0x1269ea[_0x3da164];return _0x3befc6;},a27_0x3da1(_0x56e7e2,_0x168a0c);}function a27_0x1269(){const _0x5298c3=['renameSync','Router','X_OK','filter','last-users-export.json','fileLoad_Password','/content/redlines/','/logs','\x22\x20executable','number','sendFile','/tailwind.js','Folder\x20not\x20found','getDate','cadviewer/settings/chart.min.js','globalBearerAutenticationToken','Error\x20triggering\x20Users\x20export:','padStart','linklistLocation','radio|','exports','cadviewer/settings/tailwind.js','PDF','Error\x20getting\x20memory\x20info','forEach','count','totalGb','rmSync','Error\x20cleaning\x20cache\x20for\x20user\x20files:','keys','birthtime','createdAt','availableFormats','total','diskStorage','zlib','monthly','Error\x20deleting\x20file','No\x20files\x20uploaded','fileLocation','ceil','access','fileLoad_UserName','Analyse\x20périodique\x20des\x20fichiers\x20du\x20dossier\x20converters/files\x20planifiée\x20(toutes\x20les\x20heures)','../CADViewer_config.json','/users/list','mkdir','all','mysqlUsername','drive','splity','memorydata.csv','freeGb','whoami','/converters/files/merged/','readFileSync','copyFileSync','ServerPort','arch','/style.css','ContentSecurityPolicyReportOnly','boolean','Content-Type','getFullYear','Error\x20getting\x20cache\x20stats:','autodetect_platform','SVG','percentage','W_OK','cadviewer/settings/users-export.html','promise','standard','dwgmergeLocation','linklist_executable_linux','fileLoad_PasswordAuthentication','Mail\x20Server\x20Settings','cadviewer/settings/logs.html','Config\x20updated.','/restapi-test/parameters/search','./uploads/','cadviewer/settings/converter-files-analysis.json','hlall','/users/:userId','post','sub_dirs','getStats','folderLocation','Database\x20Settings','type','array','map','cadviewer/settings/config.html','isFolder','toFixed','getHotConfig','.csv','main','/content/redlines/v7/','851694qnTgaS','DWG\x20file\x20in\x20multiple\x20files','/cache/stats','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20(`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?)\x20AND\x20`id`\x20!=\x20?','/export-users','Folder\x20renamed.','File\x20renamed.','File\x20or\x20Folder\x20not\x20found','readdirSync','0\x20*\x20*\x20*\x20*','toString','File\x20deleted\x20successfully','mem','callbackMethod_gatewayUrl_flag','settingsUserBasicAuth','reset','/metrics','cadviewer/settings/icons.js','size','CSV','write','slice','Error\x20getting\x20Users\x20export\x20export\x20history:','Config\x20updated\x20successfully','Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_','usedPercentage','/folders/update','Error\x20getting\x20process\x20info','An\x20error\x20occurred\x20while\x20checking.','.dwg.json','clean','dirname','unlink','cadviewer/settings/requests-callapiconversion-monitoring.json','.dwg','148421ziSrKp','image/svg+xml','osCmd','originalname','usedMemMb','totalMemMb','cadviewer/settings/folders.html','converterLocation','includes','/folders/download','\x20n\x27existe\x20pas.','mkdirSync','Error\x20deleting\x20folder.','extname','Cache\x20directory\x20','dwgmerge_executable','../libs/counter.js','DWG\x20to\x20SVG\x20Conversion','log','totalProcesses','Error\x20reading\x20last\x20export\x20info:','endsWith','0\x200\x20*\x20*\x20*','mimetype','pop','execute','.svgz','licenseLocation','replaceAll','Failed\x20to\x20flush\x20cache','\x20\x20\x20','delete','demoUserRetentionDays','formatedSize','csv','some','/users-export/download/:fileName','linux','/users-export/trigger','logs','express-basic-auth','/folders/upload','usedGb','No\x20new\x20users\x20to\x20export\x20for\x20Google\x20Ads','converter-files-analysis.json','put','/config','/logs/clean','constants','sort','2283824DMVSse','DwgMerge\x20Settings','cadviewer/settings/rest-api-parameters.json','darwin','filename','error','rmdirSync','/config/update','Server\x20Settings','{version}','DELETE\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','\x20days\x20have\x20been\x20deleted.','body','blocks','vmstats','rmdir','svgz','svg','DWG','Folder\x20created.','../libs/log','writeFile','first_name','/users','Error\x20deleting\x20file.','test','conversionTimeSpend','green','File\x20deleted.','/licences','autodetect_location','settingsPasswordBasicAuth','Error\x20downloading\x20file.','application/octet-stream','dwgmerge_executable_windows','converters','838920xQbDAX','json','No\x20config\x20object\x20provided','/doctor/check','mysqlDatabase','1137368xfcHns','send','writeFileSync','Parameters\x20saved.','Content-Disposition','scheduleJob','RL/TL\x20Processing','zombieProcesses','/converters/files/pdf/','catch','fileLocationUrl','Error\x20saving\x20parameters.','/vanilla-toast.js','lastExportDate','path','*\x20*\x20*\x20*\x20*','toISOString','SELECT\x20*\x20FROM\x20users','radio|windows,linux','`crypted_password`\x20=\x20?,\x20','/converters/autoxchange/linux/','Error\x20getting\x20total\x20users','folderName','Error\x20updating\x20config','win32','/vanilla-toast.css','pdf','\x20MB','/converters/files/print/','length','existsSync','autoxchange_executable','child_process','cadviewer/settings/rest-api.html','unlinkSync','fontLocation','reduce','Callback\x20and\x20Authentication\x20Settings','File\x20not\x20found','download','params','push','linklist_executable_windows','JSON\x20Data\x20Extraction','users-export-','/cache/flush','Display\x20of\x20DWG','autoxchange_executable_windows','\x20users\x20to\x20','last_name','Error!\x20Something\x20went\x20wrong.','24738BfeHaG','=============================>','replace','get','cadviewer/settings/conversion-cache.html','.log\x22','then','Error\x20getting\x20disk\x20usage','DELETE\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','resolve','toLocaleLowerCase','cpu','Error\x20creating\x20folder.','dwgmerge_executable_linux','ctime','readFile','attachment;\x20filename=\x22','setMonth','linklist_executable','Error\x20finding\x20log\x20files:','/restapi-test/parameters/save','file','node-os-utils','usedGB','callbackMethod_gatewayUrl','dir','.log','/logs/content','/folders','.json','Read\x20and\x20write\x20permission\x20for\x20folder\x20','setDate','info','Export\x20file\x20not\x20found','Error\x20deleting\x20cache\x20file\x20','User\x20deleted\x20successfully','R_OK','call-Api_Conversion_','autoxchange_executable_linux','globalBearerAutentication','parse','dwg','Exporting\x20new\x20users\x20for\x20Google\x20Ads...','/cache/files','isDirectory','cadviewer/settings/cache-stats.js','updatedAt','split','399oQXICE','Directory\x20','uptime','../libs/mysql.js','mode','\x22exec\x22\x20command\x20activated\x20on\x20NodeJS',')\x20older\x20than\x20','used','\x20does\x20not\x20exist.','https','Counter\x20reset\x20successfully','UPDATE\x20`users`\x20SET\x20`avatar_url`\x20=\x20?,\x20`first_name`\x20=\x20?,\x20`last_name`\x20=\x20?,\x20`username`\x20=\x20?,\x20`email`\x20=\x20?,','/users/flush-dir','converterpathWin','/config/global-update','Permission\x20750\x20for\x20the\x20\x22','CADViewer\x20Settings','node-schedule','setHeader','/cache','totalGB','CADViewer_config.json','hostname','Erreur\x20lors\x20de\x20l\x27analyse\x20des\x20fichiers\x20du\x20dossier\x20converters/files:\x20','cadviewer/settings/home.html','cvjs_svgz_compress','stringify','name','/conversion/clean','User\x20with\x20that\x20email\x20or\x20username\x20already\x20exists','cadviewer/settings/vanilla-toast.css','Deleting\x20old\x20demo_user\x20accounts...','===================error===================','cadviewer/settings/licences.html','.svg','ContentSecurityPolicy','LinkList\x20Settings','Error\x20getting\x20cpu\x20usage','Invalid\x20user','status','avatar_url','callbackMethod','files','tmp','/cache/files/:id','\x20GB','User\x20updated\x20successfully','yellow','./tmp','Monitoring\x20file\x20cleaned.','Le\x20dossier\x20','getMonth','utf8','Folder\x20not\x20found.','cachedfiles','Exported\x20','/config/content','query','Users\x20export\x20triggered\x20successfully','model','email','conversionMemoryUsage','/conversion/memorydata','purple','.gitkeep','find','role','platform','admin','express','cached_conversion','trim','crypto','radio|monthly,biweekly','/conversion/list','usage','546855hfaOAg','multer','ServerLocation','folder_name','statSync','blue','join','usedMemPercentage','startsWith','mysqlPassword','settings','windows','.png','version','mysqlHost','INSERT\x20INTO\x20`users`\x20(`avatar_url`,\x20`first_name`,\x20`last_name`,\x20`username`,\x20`email`,\x20`crypted_password`,\x20`role`,\x20`is_enabled`,\x20`folder_name`)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?'];a27_0x1269=function(){return _0x5298c3;};return a27_0x1269();}router[a27_0x27b13b(0x132)](a27_0x27b13b(0x20d),async(_0x46a108,_0x1c0a99)=>{const _0x3dc4d3=a27_0x27b13b,_0x27cf66=new Date(),_0x108ca7=_0x27cf66[_0x3dc4d3(0x28c)]()[_0x3dc4d3(0x14b)]()[_0x3dc4d3(0x290)](0x2,'0')+'_'+(_0x27cf66[_0x3dc4d3(0x255)]()+0x1)[_0x3dc4d3(0x14b)]()[_0x3dc4d3(0x290)](0x2,'0')+'_'+_0x27cf66['getFullYear'](),{displayDay:_0x3447a8}=_0x46a108['body'],_0x3112c3=path[_0x3dc4d3(0x274)](path[_0x3dc4d3(0x160)](require['main']['filename']),_0x3dc4d3(0x18b),_0x3dc4d3(0x217)+(_0x3447a8??_0x108ca7)+_0x3dc4d3(0x20c));fs[_0x3dc4d3(0x1dd)](_0x3112c3)?fs[_0x3dc4d3(0x201)](_0x3112c3,_0x3dc4d3(0x256),function(_0x6f00c0,_0x55a66a){const _0x2f72e8=_0x3dc4d3;_0x6f00c0&&_0x1c0a99['status'](0x1f4)[_0x2f72e8(0x1c0)](_0x6f00c0),_0x1c0a99['status'](0xc8)[_0x2f72e8(0x1bb)]({'content':_0x55a66a,'days':findMatchingLogFiles(path[_0x2f72e8(0x274)](path[_0x2f72e8(0x160)](require['main']['filename']),_0x2f72e8(0x18b)))});}):_0x1c0a99[_0x3dc4d3(0x249)](0xc8)['json']({'content':'','days':findMatchingLogFiles(path[_0x3dc4d3(0x274)](path[_0x3dc4d3(0x160)](require[_0x3dc4d3(0x13f)]['filename']),_0x3dc4d3(0x18b)))});}),router['delete'](a27_0x27b13b(0x193),async(_0x2e9467,_0x1d8543)=>{const _0x43a13e=a27_0x27b13b,_0x2682b5=new Date(),_0x10a778=_0x2682b5['getDate']()[_0x43a13e(0x14b)]()['padStart'](0x2,'0')+'_'+(_0x2682b5[_0x43a13e(0x255)]()+0x1)['toString']()['padStart'](0x2,'0')+'_'+_0x2682b5[_0x43a13e(0x11e)](),_0x50214f=findMatchingLogFiles(path[_0x43a13e(0x274)](path[_0x43a13e(0x160)](require[_0x43a13e(0x13f)]['filename']),'logs'));_0x50214f[_0x43a13e(0x297)](_0x1b0c93=>{const _0x2d190c=_0x43a13e;if(_0x1b0c93!==_0x10a778)fs[_0x2d190c(0x1e1)](path['join'](path['dirname'](require['main'][_0x2d190c(0x19a)]),'logs','call-Api_Conversion_'+_0x1b0c93+_0x2d190c(0x20c)));}),logStream[_0x43a13e(0x15f)](),_0x1d8543[_0x43a13e(0x249)](0xc8)['json']({'message':'Log\x20file\x20cleaned.'});}),router['get']('/restapi-test',protectedRoute,async(_0x56047f,_0x5bece9)=>{const _0x5910d5=a27_0x27b13b,_0x206144=path[_0x5910d5(0x274)](path[_0x5910d5(0x160)](require[_0x5910d5(0x13f)][_0x5910d5(0x19a)]),_0x5910d5(0x198));if(!fs[_0x5910d5(0x1dd)](_0x206144)){const _0x7766e8={'jsonDataExtraction':{'standard':[{'paramName':_0x5910d5(0x1bb),'paramValue':''},{'paramName':_0x5910d5(0x1a3),'paramValue':''}]},'dwgToSvg':{'standard':[{'paramName':'f','paramValue':_0x5910d5(0x1a7)},{'paramName':_0x5910d5(0x25d),'paramValue':''},{'paramName':_0x5910d5(0x130),'paramValue':''}]},'dwgToPdf':{'standard':[{'paramName':'f','paramValue':_0x5910d5(0x1d9)},{'paramName':_0x5910d5(0x25d),'paramValue':''}]},'displayDwg':{'standard':[{'paramName':'f','paramValue':'svg'},{'paramName':_0x5910d5(0x25d),'paramValue':''},{'paramName':_0x5910d5(0x130),'paramValue':''}]},'dwgToMultiple':{'standard':[{'paramName':_0x5910d5(0x111),'paramValue':''}]}};fs[_0x5910d5(0x1c1)](_0x206144,JSON['stringify'](_0x7766e8,null,0x4));}const _0x55ad67=fs[_0x5910d5(0x116)](path['join'](path[_0x5910d5(0x160)](require[_0x5910d5(0x13f)][_0x5910d5(0x19a)]),_0x5910d5(0x1e0)),_0x5910d5(0x256)),_0x291f4f=_0x55ad67['replaceAll']('{version}',_0x56047f['version']);_0x5bece9[_0x5910d5(0x1c0)](_0x291f4f);}),router[a27_0x27b13b(0x132)](a27_0x27b13b(0x12d),async(_0x52fe62,_0x3976f4)=>{const _0x3eba36=a27_0x27b13b,{actionName:_0xbc6742,contentLocation:_0x3a801f}=_0x52fe62['body'],_0x3319a0=path[_0x3eba36(0x274)](path[_0x3eba36(0x160)](require[_0x3eba36(0x13f)][_0x3eba36(0x19a)]),_0x3eba36(0x198));fs[_0x3eba36(0x201)](_0x3319a0,'utf8',function(_0x4f2aeb,_0x5c2937){const _0x4513a6=_0x3eba36;if(_0x4f2aeb)_0x3976f4[_0x4513a6(0x249)](0xc8)[_0x4513a6(0x1bb)]({'parameters':[]});else{const _0x57d9b5=JSON[_0x4513a6(0x21a)](_0x5c2937);if(_0x57d9b5[_0xbc6742]&&_0x57d9b5[_0xbc6742][_0x3a801f])_0x3976f4['status'](0xc8)[_0x4513a6(0x1bb)]({'parameters':_0x57d9b5[_0xbc6742][_0x3a801f]});else _0x57d9b5[_0xbc6742]&&_0x57d9b5[_0xbc6742]['standard']?_0x3976f4[_0x4513a6(0x249)](0xc8)['json']({'parameters':_0x57d9b5[_0xbc6742][_0x4513a6(0x126)]}):_0x3976f4[_0x4513a6(0x249)](0xc8)[_0x4513a6(0x1bb)]({'parameters':[]});}});}),router[a27_0x27b13b(0x132)](a27_0x27b13b(0x206),async(_0x98368c,_0xb78d41)=>{const _0x1fa5c0=a27_0x27b13b,{actionName:_0x1d3356,contentLocation:_0x3a3f34,parameters:_0x4e9170}=_0x98368c['body'],_0xd6a6a3=path[_0x1fa5c0(0x274)](path[_0x1fa5c0(0x160)](require[_0x1fa5c0(0x13f)][_0x1fa5c0(0x19a)]),_0x1fa5c0(0x198));fs[_0x1fa5c0(0x201)](_0xd6a6a3,_0x1fa5c0(0x256),function(_0x2d2f2a,_0x41bc69){const _0x9999c3=_0x1fa5c0;if(_0x2d2f2a)_0xb78d41[_0x9999c3(0x249)](0x199)[_0x9999c3(0x1bb)]({'message':_0x9999c3(0x1ca)});else{const _0x389933=JSON[_0x9999c3(0x21a)](_0x41bc69);!_0x389933[_0x1d3356]&&(_0x389933[_0x1d3356]={}),_0x389933[_0x1d3356][_0x3a3f34]=_0x4e9170,fs[_0x9999c3(0x1ab)](_0xd6a6a3,JSON[_0x9999c3(0x23c)](_0x389933,null,0x4),function(_0x419e85){const _0x7b6761=_0x9999c3;_0x419e85&&_0xb78d41[_0x7b6761(0x249)](0x199)[_0x7b6761(0x1bb)]({'message':_0x7b6761(0x1ca)}),_0xb78d41[_0x7b6761(0x249)](0xc8)['json']({'message':_0x7b6761(0x1c2)});});}});}),router[a27_0x27b13b(0x1f5)]('/doctor',protectedRoute,async(_0x1fe602,_0x2b3e19)=>{const _0x469e5c=a27_0x27b13b,_0x4d589c=fs['readFileSync'](path['join'](path[_0x469e5c(0x160)](require['main'][_0x469e5c(0x19a)]),'cadviewer/settings/doctor.html'),_0x469e5c(0x256)),_0xf39f15=_0x4d589c[_0x469e5c(0x180)](_0x469e5c(0x19f),_0x1fe602[_0x469e5c(0x27b)]);_0x2b3e19[_0x469e5c(0x1c0)](_0xf39f15);}),router[a27_0x27b13b(0x132)](a27_0x27b13b(0x1bd),async(_0xf45a37,_0x51a5b2)=>{const _0x494491=a27_0x27b13b,_0xae1a7=getHotConfig(),_0x3f4d9f=_0xae1a7[_0x494491(0x16b)]['replaceAll']('//','/'),_0x4a6e5d=_0xae1a7[_0x494491(0x127)][_0x494491(0x180)]('//','/'),_0x3247db=_0xae1a7[_0x494491(0x291)][_0x494491(0x180)]('//','/'),_0x2ace85=''+_0x3f4d9f+_0xae1a7[_0x494491(0x1de)],_0x367bc0=''+_0x4a6e5d+_0xae1a7['dwgmerge_executable'],_0x38444c=''+_0x3247db+_0xae1a7[_0x494491(0x204)],_0x2874a1=[],_0x3ccb2e=new Promise(_0x2dcab7=>{const _0xfd9280=_0x494491;exec(os[_0xfd9280(0x265)]()==='win32'?_0xfd9280(0x20b):'ls',_0x46ec78=>{const _0x233fe3=_0xfd9280;_0x46ec78?_0x2874a1[_0x233fe3(0x1e8)]({'title':_0x233fe3(0x227),'status':![],'priority':0x1}):_0x2874a1['push']({'title':_0x233fe3(0x227),'status':!![],'priority':0x1}),_0x2dcab7();});}),_0x3d9671=new Promise(_0x27aeff=>{const _0x3b61ba=_0x494491;fs[_0x3b61ba(0x108)](_0x2ace85,fs[_0x3b61ba(0x194)][_0x3b61ba(0x281)],_0x27a958=>{const _0x47bb07=_0x3b61ba;_0x27a958?_0x2874a1[_0x47bb07(0x1e8)]({'title':_0x47bb07(0x231)+_0xae1a7[_0x47bb07(0x1de)]+_0x47bb07(0x287),'status':![],'priority':0x2}):_0x2874a1[_0x47bb07(0x1e8)]({'title':_0x47bb07(0x231)+_0xae1a7['autoxchange_executable']+_0x47bb07(0x287),'status':!![],'priority':0x2}),_0x27aeff();});}),_0x3696bc=new Promise(_0x327ab7=>{const _0x4c9662=_0x494491;fs['access'](_0x367bc0,fs[_0x4c9662(0x194)][_0x4c9662(0x281)],_0x4c7b03=>{const _0x4cd587=_0x4c9662;_0x4c7b03?_0x2874a1['push']({'title':_0x4cd587(0x231)+_0xae1a7[_0x4cd587(0x173)]+'\x22\x20executable','status':![],'priority':0x3}):_0x2874a1[_0x4cd587(0x1e8)]({'title':_0x4cd587(0x231)+_0xae1a7[_0x4cd587(0x173)]+'\x22\x20executable','status':!![],'priority':0x3}),_0x327ab7();});}),_0x389c0a=new Promise(_0x209066=>{const _0x43bb5a=_0x494491;fs[_0x43bb5a(0x108)](_0x38444c,fs[_0x43bb5a(0x194)][_0x43bb5a(0x281)],_0x40fd78=>{const _0x38eddc=_0x43bb5a;_0x40fd78?_0x2874a1['push']({'title':_0x38eddc(0x231)+_0xae1a7[_0x38eddc(0x204)]+'\x22\x20executable','status':![],'priority':0x4}):_0x2874a1[_0x38eddc(0x1e8)]({'title':_0x38eddc(0x231)+_0xae1a7[_0x38eddc(0x204)]+_0x38eddc(0x287),'status':!![],'priority':0x4}),_0x209066();});}),_0x902d11=new Promise(_0x51ce53=>{const _0x3d5f1b=_0x494491,_0x2a45ce=new Date(),_0x311f1e=_0x2a45ce[_0x3d5f1b(0x28c)]()['toString']()[_0x3d5f1b(0x290)](0x2,'0')+'_'+(_0x2a45ce[_0x3d5f1b(0x255)]()+0x1)[_0x3d5f1b(0x14b)]()[_0x3d5f1b(0x290)](0x2,'0')+'_'+_0x2a45ce[_0x3d5f1b(0x11e)](),{displayDay:_0x18c38c}=_0xf45a37['body'];fs[_0x3d5f1b(0x108)](path[_0x3d5f1b(0x274)](path['dirname'](require[_0x3d5f1b(0x13f)]['filename']),_0x3d5f1b(0x18b),_0x3d5f1b(0x217)+(_0x18c38c??_0x311f1e)+'.log'),fs[_0x3d5f1b(0x194)][_0x3d5f1b(0x123)],_0x3119d5=>{const _0x7ceb8c=_0x3d5f1b;_0x3119d5?_0x2874a1[_0x7ceb8c(0x1e8)]({'title':_0x7ceb8c(0x159)+(_0x18c38c??_0x311f1e)+_0x7ceb8c(0x1f7),'status':![],'priority':0x5}):_0x2874a1['push']({'title':'Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_'+(_0x18c38c??_0x311f1e)+_0x7ceb8c(0x1f7),'status':!![],'priority':0x5}),_0x51ce53();});}),_0x26e8dd=(_0x50b9b1,_0x23030b)=>{const _0x147391=_0x494491,_0x5825de=path[_0x147391(0x274)](path[_0x147391(0x160)](require[_0x147391(0x13f)][_0x147391(0x19a)]),_0x50b9b1);return new Promise(_0x34fd28=>{const _0x170648=_0x147391;fs[_0x170648(0x108)](path[_0x170648(0x274)](path[_0x170648(0x160)](_0x5825de)),fs['constants'][_0x170648(0x216)]|fs[_0x170648(0x194)][_0x170648(0x123)],_0xad529a=>{const _0x40f471=_0x170648;_0xad529a?_0x2874a1[_0x40f471(0x1e8)]({'title':_0x40f471(0x210)+_0x50b9b1,'status':![],'priority':_0x23030b+0x6}):_0x2874a1[_0x40f471(0x1e8)]({'title':_0x40f471(0x210)+_0x50b9b1,'status':!![],'priority':_0x23030b+0x6}),_0x34fd28();});});},_0x2692c8=['/converters/files/',_0x494491(0x1d3),_0x494491(0x115),_0x494491(0x1db),_0x494491(0x1c7),_0x494491(0x285),_0x494491(0x140)],_0x4a8411=_0x2692c8['map'](_0x26e8dd);Promise[_0x494491(0x10e)]([_0x3ccb2e,_0x3d9671,_0x3696bc,_0x389c0a,_0x902d11,..._0x4a8411])[_0x494491(0x1f8)](()=>{const _0x14f5d7=_0x494491;_0x51a5b2[_0x14f5d7(0x249)](0xc8)['json']({'checking_list':_0x2874a1});})[_0x494491(0x1c8)](()=>{const _0x2be6c0=_0x494491;_0x51a5b2[_0x2be6c0(0x249)](0x1f4)[_0x2be6c0(0x1bb)]({'error':_0x2be6c0(0x15d)});});}),router[a27_0x27b13b(0x1f5)](a27_0x27b13b(0x1ad),protectedRoute,async(_0x4f6a4e,_0x6c225f)=>{const _0x1cd298=a27_0x27b13b,_0x278d6d=fs[_0x1cd298(0x116)](path[_0x1cd298(0x274)](path['dirname'](require[_0x1cd298(0x13f)]['filename']),'cadviewer/settings/users.html'),'utf8'),_0x5bdc85=_0x278d6d[_0x1cd298(0x180)](_0x1cd298(0x19f),_0x4f6a4e[_0x1cd298(0x27b)]);_0x6c225f[_0x1cd298(0x1c0)](_0x5bdc85);}),router['post'](a27_0x27b13b(0x10c),async(_0x1ee611,_0x401b2a)=>{const _0x577007=a27_0x27b13b;let _0x4082ad;try{const [_0x27ff38]=await conn[_0x577007(0x125)]()['execute'](_0x577007(0x1d0),[]);_0x4082ad=_0x27ff38;}catch(_0x434fd6){console[_0x577007(0x176)](_0x434fd6),_0x401b2a['status'](0x1f4)[_0x577007(0x1bb)]({'error':_0x577007(0x1f1)});return;}_0x401b2a['status'](0xc8)[_0x577007(0x1bb)]({'success':!![],'data':_0x4082ad});}),router[a27_0x27b13b(0x132)](a27_0x27b13b(0x1ad),upload['single']('avatar'),async(_0xfdd122,_0x285bd7)=>{const _0x187c33=a27_0x27b13b,{id:_0x530299,first_name:_0x40eadf,last_name:_0x206faa,username:_0x629425,email:_0x5a58b9,password:_0x2783b2,is_enabled:_0x21ac2c}=_0xfdd122[_0x187c33(0x1a2)],_0x5e6a74=_0xfdd122['body'][_0x187c33(0x264)]===_0x187c33(0x266)?_0x187c33(0x266):_0xfdd122[_0x187c33(0x1a2)][_0x187c33(0x264)]==='demo_user'?'demo_user':'user';let _0xd7ec43;console[_0x187c33(0x176)](_0x187c33(0x1f3));_0x2783b2&&(_0xd7ec43=await bcrypt['hash'](_0x2783b2,0xa));let _0x228402=null;if(_0xfdd122[_0x187c33(0x207)]){const _0x1b8e5f='avatars/'+randomUUID()+_0x187c33(0x27a);fs['copyFileSync'](_0xfdd122[_0x187c33(0x207)][_0x187c33(0x1cd)],'./'+_0x1b8e5f),fs[_0x187c33(0x1e1)](_0xfdd122[_0x187c33(0x207)][_0x187c33(0x1cd)]),config[_0x187c33(0x14e)]?_0x228402=config[_0x187c33(0x20a)]+'/'+_0x1b8e5f:_0x228402=config['ServerUrl']+'/'+_0x1b8e5f;}if(_0x530299){try{let [_0x39c09f]=await conn[_0x187c33(0x125)]()[_0x187c33(0x17d)](_0x187c33(0x144),[_0x5a58b9,_0x629425,_0x530299]);if(_0x39c09f[_0x187c33(0x1dc)]>0x0)_0x285bd7[_0x187c33(0x249)](0x199)[_0x187c33(0x1bb)]({'error':_0x187c33(0x23f)});else{!_0xfdd122['file']&&([_0x39c09f]=await conn[_0x187c33(0x125)]()['execute']('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?',[_0x530299]),_0x228402=_0x39c09f[0x0][_0x187c33(0x24a)]);const _0x2d4c1c=_0x187c33(0x22d)+(_0x2783b2?_0x187c33(0x1d2):'')+'`is_enabled`\x20=\x20?,\x20`role`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?';await conn['promise']()[_0x187c33(0x17d)](_0x2d4c1c,_0x2783b2?[_0x228402,_0x40eadf,_0x206faa,_0x629425,_0x5a58b9,_0xd7ec43,_0x21ac2c,_0x5e6a74,_0x530299]:[_0x228402,_0x40eadf,_0x206faa,_0x629425,_0x5a58b9,_0x21ac2c,_0x5e6a74,_0x530299]);}}catch(_0x590866){console[_0x187c33(0x176)](_0x590866),_0x285bd7[_0x187c33(0x249)](0x1f4)[_0x187c33(0x1bb)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}_0x285bd7[_0x187c33(0x249)](0xc8)['json']({'success':!![],'message':_0x187c33(0x250)});}else{try{const [_0x10a5f8]=await conn[_0x187c33(0x125)]()[_0x187c33(0x17d)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?',[_0x5a58b9,_0x629425]);if(_0x10a5f8['length']>0x0)_0x285bd7[_0x187c33(0x249)](0x199)[_0x187c33(0x1bb)]({'error':_0x187c33(0x23f)});else{const _0x141e5f=randomUUID();await conn[_0x187c33(0x125)]()['execute'](_0x187c33(0x27d),[_0x228402,_0x40eadf,_0x206faa,_0x629425,_0x5a58b9,_0xd7ec43,_0x5e6a74,_0x21ac2c,_0x141e5f]);const _0xca009b=_0x187c33(0x12e)+_0x141e5f;fs[_0x187c33(0x16f)](_0xca009b);}}catch(_0x19315a){console[_0x187c33(0x176)](_0x19315a),_0x285bd7['status'](0x1f4)[_0x187c33(0x1bb)]({'error':_0x187c33(0x1f1)});return;}_0x285bd7[_0x187c33(0x249)](0xc8)[_0x187c33(0x1bb)]({'success':!![],'message':'User\x20created\x20successfully'});}}),router[a27_0x27b13b(0x183)](a27_0x27b13b(0x22e),async(_0x41c36d,_0x4849c3)=>{const _0x2f9915=a27_0x27b13b,{userId:_0x1f8ab7}=_0x41c36d[_0x2f9915(0x1a2)];let _0x53e8a5;try{const [_0xabc4d3]=await conn[_0x2f9915(0x125)]()[_0x2f9915(0x17d)](_0x2f9915(0x27e),[_0x1f8ab7]);_0xabc4d3[_0x2f9915(0x1dc)]>0x0&&(_0x53e8a5=_0xabc4d3[0x0]);}catch(_0x359e79){console['log']({'err':_0x359e79}),_0x4849c3[_0x2f9915(0x249)](0x1f4)[_0x2f9915(0x1bb)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}if(!_0x53e8a5){_0x4849c3[_0x2f9915(0x249)](0x191)[_0x2f9915(0x1bb)]({'error':_0x2f9915(0x248)});return;}let _0x2304c6=_0x53e8a5[_0x2f9915(0x271)];if(!_0x2304c6){_0x2304c6=randomUUID();try{await conn[_0x2f9915(0x125)]()[_0x2f9915(0x17d)]('UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?',[_0x2304c6,_0x1f8ab7]);}catch(_0x24a55c){console['log']({'err':_0x24a55c}),_0x4849c3[_0x2f9915(0x249)](0x1f4)[_0x2f9915(0x1bb)]({'error':_0x2f9915(0x1f1)});return;}}const _0x599a9b=_0x2f9915(0x12e)+_0x2304c6;console[_0x2f9915(0x176)]('===================='),console[_0x2f9915(0x176)](_0x599a9b),!fs[_0x2f9915(0x1dd)](_0x599a9b)&&fs['mkdirSync'](_0x599a9b),cleanCacheForUserFiles(_0x599a9b),fs[_0x2f9915(0x29a)](_0x599a9b,{'recursive':!![],'force':!![]}),fs['mkdirSync'](_0x599a9b),_0x4849c3[_0x2f9915(0x249)](0xc8)['json']({'success':!![],'message':'User\x20directory\x20flushed\x20successfully'});}),router[a27_0x27b13b(0x183)](a27_0x27b13b(0x131),async(_0x52249,_0x207f6d)=>{const _0x181c8a=a27_0x27b13b,_0x5a197b=_0x52249['params']['userId'];try{let _0x2f95fd;try{const [_0x593883]=await conn[_0x181c8a(0x125)]()[_0x181c8a(0x17d)](_0x181c8a(0x27e),[_0x5a197b]);_0x593883[_0x181c8a(0x1dc)]>0x0&&(_0x2f95fd=_0x593883[0x0]);}catch(_0x18f54b){console[_0x181c8a(0x176)]({'err':_0x18f54b}),_0x207f6d[_0x181c8a(0x249)](0x1f4)['json']({'error':_0x181c8a(0x1f1)});return;}if(!_0x2f95fd){_0x207f6d[_0x181c8a(0x249)](0x191)[_0x181c8a(0x1bb)]({'error':_0x181c8a(0x248)});return;}let _0x46018e=_0x2f95fd[_0x181c8a(0x271)];if(_0x46018e){const _0x30e8d1=_0x181c8a(0x12e)+_0x46018e;fs[_0x181c8a(0x1dd)](_0x30e8d1)&&(cleanCacheForUserFiles(_0x30e8d1),fs[_0x181c8a(0x29a)](_0x30e8d1,{'recursive':!![],'force':!![]}));}await conn[_0x181c8a(0x125)]()[_0x181c8a(0x17d)](_0x181c8a(0x1a0),[_0x5a197b]);}catch(_0x18eeda){console[_0x181c8a(0x176)](_0x18eeda),_0x207f6d[_0x181c8a(0x249)](0x1f4)[_0x181c8a(0x1bb)]({'error':_0x181c8a(0x1f1)});return;}_0x207f6d[_0x181c8a(0x249)](0xc8)[_0x181c8a(0x1bb)]({'success':!![],'message':_0x181c8a(0x215)});}),router[a27_0x27b13b(0x1f5)](a27_0x27b13b(0x151),async(_0x3ea86f,_0x1d94d3)=>{const _0x432c48=a27_0x27b13b,_0x27c193=osu[_0x432c48(0x1fd)],_0x2c3132=osu[_0x432c48(0x14d)],_0xede752=osu[_0x432c48(0x110)],_0x4084eb=osu['os'],_0x23fb35={'percentage':0x0,'usedGB':0x0,'freeGb':0x0,'totalGB':0x0};try{let _0x4002cc=os[_0x432c48(0x265)]()===_0x432c48(0x1d7)?'c:':'/';const _0x384f9a=await _0xede752[_0x432c48(0x212)](_0x4002cc);_0x23fb35[_0x432c48(0x122)]=_0x384f9a[_0x432c48(0x15a)],_0x23fb35[_0x432c48(0x209)]=_0x384f9a[_0x432c48(0x18e)],_0x23fb35['freeGb']=_0x384f9a[_0x432c48(0x113)],_0x23fb35[_0x432c48(0x236)]=_0x384f9a[_0x432c48(0x299)];}catch(_0x33ab68){console[_0x432c48(0x176)](_0x432c48(0x1f9),_0x33ab68);}const _0xad5caa={'usage':0x0,'count':0x0};try{_0xad5caa[_0x432c48(0x26d)]=await _0x27c193[_0x432c48(0x26d)](),_0xad5caa[_0x432c48(0x298)]=_0x27c193[_0x432c48(0x298)]();}catch(_0x9ffb89){console[_0x432c48(0x176)](_0x432c48(0x247),_0x9ffb89);}const _0x4c56de={'os':'','platform':'','ip':'','uptime':0x0,'hostname':'','type':'','arch':'','who':'','whoami':'','vmstats':''};try{_0x4c56de['os']=await _0x4084eb['oos'](),_0x4c56de['platform']=_0x4084eb[_0x432c48(0x265)](),_0x4c56de['ip']=_0x4084eb['ip'](),_0x4c56de[_0x432c48(0x224)]=_0x4084eb[_0x432c48(0x224)](),_0x4c56de[_0x432c48(0x238)]=_0x4084eb[_0x432c48(0x238)](),_0x4c56de[_0x432c48(0x137)]=_0x4084eb[_0x432c48(0x137)](),_0x4c56de[_0x432c48(0x119)]=_0x4084eb['arch'](),_0x4c56de['who']=await osu['osCmd']['who'](),_0x4c56de[_0x432c48(0x114)]=await osu[_0x432c48(0x166)][_0x432c48(0x114)](),_0x4c56de[_0x432c48(0x1a4)]=await osu[_0x432c48(0x166)][_0x432c48(0x1a4)]();}catch(_0x121a88){console[_0x432c48(0x176)]('Error\x20getting\x20os\x20info',_0x121a88);}const _0x28053b={'totalProcesses':0x0,'zombieProcesses':0x0};try{_0x28053b[_0x432c48(0x177)]=await osu['proc'][_0x432c48(0x177)](),_0x28053b[_0x432c48(0x1c6)]=await osu['proc']['zombieProcesses']();}catch(_0x5d3b4b){console[_0x432c48(0x176)](_0x432c48(0x15c),_0x5d3b4b);}let _0x41733b={'usedMemPercentage':0x0,'usedMemMb':0x0,'totalMemMb':0x0};try{const _0x54b097=await _0x2c3132[_0x432c48(0x212)]();_0x41733b[_0x432c48(0x275)]=_0x54b097[_0x432c48(0x275)],_0x41733b[_0x432c48(0x168)]=_0x54b097[_0x432c48(0x229)]/0x400/0x400,_0x41733b[_0x432c48(0x169)]=_0x54b097[_0x432c48(0x2a0)]/0x400/0x400;}catch(_0x3e2c29){console['log'](_0x432c48(0x296),_0x3e2c29);}let _0x2bb663=0x0;try{_0x2bb663=await conn[_0x432c48(0x125)]()[_0x432c48(0x25b)]('SELECT\x20COUNT(*)\x20as\x20total\x20FROM\x20users')[_0x432c48(0x1f8)](([_0x534c96])=>_0x534c96[0x0][_0x432c48(0x2a0)]);}catch(_0x8bf5b3){console[_0x432c48(0x176)](_0x432c48(0x1d4),_0x8bf5b3);}const _0x1425ee=getMonitoringData(),_0x3cc361=_0x1425ee[_0x432c48(0x282)](_0x15c388=>_0x15c388['conversionTimeSpend']!==null&&_0x15c388['conversionTimeSpend']!==undefined),_0xaf26f7=_0x1425ee[_0x432c48(0x282)](_0x217b11=>_0x217b11[_0x432c48(0x25f)]!==null&&_0x217b11[_0x432c48(0x25f)]!==undefined)[_0x432c48(0x139)](_0x56727f=>parseFloat(_0x56727f[_0x432c48(0x25f)][_0x432c48(0x180)]('Kb')[_0x432c48(0x269)]())),_0x21dc06=_0x3cc361[_0x432c48(0x1e3)]((_0x47fc7d,_0x55d5ce)=>_0x47fc7d+parseFloat(_0x55d5ce[_0x432c48(0x1b0)]),0x0)/_0x3cc361[_0x432c48(0x1dc)],_0x818df8=_0xaf26f7['reduce']((_0x4f5f2f,_0x24e5a7)=>_0x4f5f2f+_0x24e5a7,0x0)/_0xaf26f7[_0x432c48(0x1dc)];_0x1d94d3[_0x432c48(0x1bb)]({'requestsPerSecond':counter[_0x432c48(0x134)](),'diskUsage':_0x23fb35,'cpus':_0xad5caa,'system':_0x4c56de,'process':_0x28053b,'totalMonitoringData':_0x1425ee[_0x432c48(0x1dc)],'memory':_0x41733b,'totalUsers':_0x2bb663,'avgConvertionTime':_0x21dc06,'avgMemoryUsage':_0x818df8});}),router['post']('/metrics/reset',(_0x3820cd,_0x351af7)=>{const _0x343468=a27_0x27b13b;counter[_0x343468(0x150)](),_0x351af7['json']({'message':_0x343468(0x22c)});});const getMonitoringData=()=>{const _0x20d058=a27_0x27b13b,_0x135308=_0x20d058(0x162);let _0x45a647=[];try{_0x45a647=JSON[_0x20d058(0x21a)](fs[_0x20d058(0x116)](_0x135308));}catch(_0x2fc8f3){console['log']('Error\x20reading\x20monitoring\x20file');}return _0x45a647;};router[a27_0x27b13b(0x1f5)](a27_0x27b13b(0x26c),async(_0x3c3e03,_0x2ea2e4)=>{const _0x257cb5=a27_0x27b13b,{page:page=0x1,limit:limit=0xa}=_0x3c3e03['query'],_0x10d4e4=(page-0x1)*limit;try{const _0x15756a=getMonitoringData(),_0x5bd642=_0x15756a['length'],_0x57f405=Math[_0x257cb5(0x107)](_0x5bd642/limit),_0x93384e=_0x15756a['slice'](_0x10d4e4,_0x10d4e4+limit);_0x2ea2e4[_0x257cb5(0x249)](0xc8)[_0x257cb5(0x1bb)]({'data':_0x93384e,'page':parseInt(''+page),'totalPages':_0x57f405,'total':_0x5bd642});}catch(_0x58eb90){console[_0x257cb5(0x176)](_0x58eb90),_0x2ea2e4[_0x257cb5(0x249)](0x1f4)[_0x257cb5(0x1bb)]({'error':_0x257cb5(0x1f1)});}}),router['delete'](a27_0x27b13b(0x23e),async(_0x126615,_0x132d9e)=>{const _0x5d1cc4=a27_0x27b13b,_0xd4dbd3=_0x5d1cc4(0x162);try{fs[_0x5d1cc4(0x1c1)](_0xd4dbd3,JSON[_0x5d1cc4(0x23c)]([],null,0x4)),analyzeConverterFiles(),_0x132d9e[_0x5d1cc4(0x249)](0xc8)[_0x5d1cc4(0x1bb)]({'message':_0x5d1cc4(0x253)});}catch(_0x32ad51){console[_0x5d1cc4(0x176)](_0x32ad51),_0x132d9e[_0x5d1cc4(0x249)](0x1f4)[_0x5d1cc4(0x1bb)]({'error':_0x5d1cc4(0x1f1)});}}),router[a27_0x27b13b(0x1f5)](a27_0x27b13b(0x260),async(_0x463e66,_0x4ed3d4)=>{const _0x314969=a27_0x27b13b,_0x44ecfe=getHotConfig()['converterLocation'][_0x314969(0x180)]('//','/'),{page:page=0x1,limit:limit=0xa}=_0x463e66['query'],_0x14e541=(page-0x1)*limit;try{const _0x58575e=_0x44ecfe+_0x314969(0x112);console[_0x314969(0x176)](_0x58575e);const _0x545455=fs[_0x314969(0x116)](_0x58575e,_0x314969(0x256)),_0x1f8dd7=_0x545455[_0x314969(0x221)]('\x0a'),_0x2d6c19=[];_0x1f8dd7[_0x314969(0x297)](_0x137f37=>{const _0x45f667=_0x314969,_0x31113a=_0x137f37[_0x45f667(0x221)](',');if(_0x31113a[_0x45f667(0x1dc)]<0x4)return;const _0x2b575b=_0x31113a[0x0],_0x537f51=_0x31113a[0x1],_0x2637da=parseFloat(_0x31113a[0x2]);_0x2d6c19[_0x45f667(0x1e8)]({'file':_0x2b575b[_0x45f667(0x180)]('\x22',''),'action':_0x537f51,'timeSpend':_0x2637da,'memoryUsage':_0x31113a[0x3]});});const _0x2d6276=_0x2d6c19[_0x314969(0x1dc)],_0x2f93e5=Math['ceil'](_0x2d6276/limit),_0x12f491=_0x2d6c19['slice'](_0x14e541,_0x14e541+limit);_0x4ed3d4[_0x314969(0x249)](0xc8)[_0x314969(0x1bb)]({'data':_0x12f491,'page':parseInt(''+page),'totalPages':_0x2f93e5,'total':_0x2d6276});}catch(_0x304582){console['log'](_0x304582),_0x4ed3d4[_0x314969(0x249)](0x1f4)[_0x314969(0x1bb)]({'error':_0x314969(0x1f1)});}}),router[a27_0x27b13b(0x1f5)](a27_0x27b13b(0x143),async(_0x4a1913,_0x59cdba)=>{const _0x3969f7=a27_0x27b13b,_0x281309=path['join'](path[_0x3969f7(0x160)](require[_0x3969f7(0x13f)][_0x3969f7(0x19a)]),_0x3969f7(0x1b9),'files');try{let _0x48586c=0x0,_0x2ed622=0x0;function _0x1b59bb(_0x4db92c){const _0x37ea74=_0x3969f7;let _0xa21690=0x0,_0x250186=0x0;if(fs[_0x37ea74(0x1dd)](_0x4db92c)){const _0x2a0c83=fs[_0x37ea74(0x149)](_0x4db92c);_0x250186=0x0;for(const _0xd6b791 of _0x2a0c83){const _0x4796e4=path['join'](_0x4db92c,_0xd6b791),_0x5809a2=fs[_0x37ea74(0x272)](_0x4796e4);if(_0x5809a2['isFile']()&&_0xd6b791!==_0x37ea74(0x262))_0x250186++,_0xa21690+=_0x5809a2['size'];else{if(_0x5809a2[_0x37ea74(0x21e)]()){}}}}return{'size':_0xa21690,'count':_0x250186};}const _0xaf0a4b=_0x1b59bb(_0x281309);_0x48586c=_0xaf0a4b[_0x3969f7(0x153)],_0x2ed622=_0xaf0a4b['count'],_0x59cdba[_0x3969f7(0x1bb)]({'fileCount':_0x2ed622,'totalSize':_0x48586c});}catch(_0x461c8e){console['error'](_0x3969f7(0x11f),_0x461c8e),_0x59cdba[_0x3969f7(0x249)](0x1f4)[_0x3969f7(0x1bb)]({'error':'Failed\x20to\x20get\x20cache\x20stats'});}}),router[a27_0x27b13b(0x183)](a27_0x27b13b(0x1ec),async(_0x1c19da,_0x1f8fed)=>{const _0x24c5ea=a27_0x27b13b,_0x1d4be4=path[_0x24c5ea(0x274)](path[_0x24c5ea(0x160)](require[_0x24c5ea(0x13f)]['filename']),_0x24c5ea(0x1b9),_0x24c5ea(0x24c));try{function _0x568e72(_0x5baa9d){const _0x12999e=_0x24c5ea;if(fs[_0x12999e(0x1dd)](_0x5baa9d)){const _0x46f1f3=fs[_0x12999e(0x149)](_0x5baa9d);for(const _0x10ddd3 of _0x46f1f3){const _0x324b92=path[_0x12999e(0x274)](_0x5baa9d,_0x10ddd3),_0x52f292=fs[_0x12999e(0x272)](_0x324b92);if(_0x52f292[_0x12999e(0x21e)]()){}else _0x10ddd3!=='.gitkeep'&&fs[_0x12999e(0x1e1)](_0x324b92);}}}_0x568e72(_0x1d4be4),analyzeConverterFiles(),_0x1f8fed[_0x24c5ea(0x1bb)]({'message':'Cache\x20flushed\x20successfully'});}catch(_0x104540){console['error']('Error\x20flushing\x20cache:',_0x104540),_0x1f8fed[_0x24c5ea(0x249)](0x1f4)[_0x24c5ea(0x1bb)]({'error':_0x24c5ea(0x181)});}}),router[a27_0x27b13b(0x1f5)]('/cache-stats.js',async(_0x1b8ff5,_0x5b1d92)=>{const _0xf891d9=a27_0x27b13b;_0x5b1d92['sendFile'](path[_0xf891d9(0x274)](path[_0xf891d9(0x160)](require[_0xf891d9(0x13f)]['filename']),_0xf891d9(0x21f)));}),router[a27_0x27b13b(0x1f5)](a27_0x27b13b(0x235),protectedRoute,async(_0x13d071,_0x4e2205)=>{const _0x59ee92=a27_0x27b13b,_0x2e18e1=fs[_0x59ee92(0x116)](path[_0x59ee92(0x274)](path[_0x59ee92(0x160)](require[_0x59ee92(0x13f)]['filename']),_0x59ee92(0x1f6)),'utf8'),_0x505015=_0x2e18e1['replaceAll'](_0x59ee92(0x19f),_0x13d071[_0x59ee92(0x27b)]);_0x4e2205['send'](_0x505015);}),router[a27_0x27b13b(0x1f5)](a27_0x27b13b(0x21d),async(_0x140a47,_0x5f320c)=>{const _0x262044=a27_0x27b13b,{page:page=0x1,limit:limit=0x10}=_0x140a47[_0x262044(0x25b)],_0x430909=JSON[_0x262044(0x21a)](fs[_0x262044(0x116)](path[_0x262044(0x274)](path[_0x262044(0x160)](require['main'][_0x262044(0x19a)]),_0x262044(0x12f)))),_0x3d1e31=(page-0x1)*limit,_0x2bd7ca=page*limit,_0x737d94=_0x430909[_0x262044(0x24c)][_0x262044(0x1dc)],_0x377851=Math['ceil'](_0x737d94/limit),_0x37b101=_0x430909[_0x262044(0x24c)][_0x262044(0x156)](_0x3d1e31,_0x2bd7ca);_0x5f320c[_0x262044(0x1bb)]({'files':_0x37b101,'pagination':{'total':_0x737d94,'totalPages':_0x377851,'currentPage':parseInt(page),'limit':parseInt(limit)}});return;}),router['get']('/cache/csv/:file',async(_0x5c7b98,_0x31618d)=>{const _0x3840cb=a27_0x27b13b,{file:_0x16dfb7}=_0x5c7b98[_0x3840cb(0x1e7)],_0xfd2bc2=path['join'](path[_0x3840cb(0x160)](require[_0x3840cb(0x13f)][_0x3840cb(0x19a)]),_0x3840cb(0x1b9),_0x3840cb(0x24c)),_0x242fce=path['join'](_0xfd2bc2,_0x16dfb7),_0xb05a0d=fs[_0x3840cb(0x116)](_0x242fce,_0x3840cb(0x256)),_0x388b81=_0xb05a0d['split']('\x0a'),_0x1aad27=_0x388b81[_0x3840cb(0x139)](_0x1e9283=>{const _0x2d587c=_0x3840cb,_0x4acc00=_0x1e9283['split'](',');return _0x4acc00[_0x2d587c(0x139)](_0x46a003=>_0x46a003[_0x2d587c(0x180)]('\x22',''));});_0x31618d['json'](_0x1aad27);}),router[a27_0x27b13b(0x1f5)](a27_0x27b13b(0x24e),async(_0x3446ec,_0x1a664e)=>{const _0x246989=a27_0x27b13b,{id:_0x5a6e55}=_0x3446ec[_0x246989(0x1e7)],_0x1aa2b6=path['join'](path[_0x246989(0x160)](require[_0x246989(0x13f)]['filename']),_0x246989(0x1b9),_0x246989(0x24c)),_0x3bf1cb=path[_0x246989(0x274)](_0x1aa2b6,_0x5a6e55);if(_0x3bf1cb[_0x246989(0x179)](_0x246989(0x17e))){var _0x7dc0ca=require(_0x246989(0x2a2));const _0xf5a3d7=fs[_0x246989(0x116)](_0x3bf1cb),_0xdfa2c4=_0x7dc0ca['gunzipSync'](_0xf5a3d7);_0x1a664e['setHeader'](_0x246989(0x11d),_0x246989(0x165)),_0x1a664e['send'](_0xdfa2c4);}else _0x1a664e[_0x246989(0x289)](_0x3bf1cb);}),router['delete']('/cache/files/:id',async(_0x3f9ea7,_0x3bd433)=>{const _0x265eb9=a27_0x27b13b,{id:_0x24084}=_0x3f9ea7[_0x265eb9(0x1e7)],_0x3e9bfe=path[_0x265eb9(0x274)](path[_0x265eb9(0x160)](require[_0x265eb9(0x13f)][_0x265eb9(0x19a)]),_0x265eb9(0x1b9),_0x265eb9(0x24c)),_0xef9dd6=JSON['parse'](fs['readFileSync'](path['join'](path[_0x265eb9(0x160)](require[_0x265eb9(0x13f)][_0x265eb9(0x19a)]),_0x265eb9(0x12f)))),_0x455b06=_0xef9dd6[_0x265eb9(0x24c)][_0x265eb9(0x263)](_0x256f6b=>_0x256f6b['name']===_0x24084);if(_0x455b06){try{fs[_0x265eb9(0x1dd)](path[_0x265eb9(0x274)](_0x3e9bfe,_0x455b06[_0x265eb9(0x23d)]))&&fs[_0x265eb9(0x1e1)](path[_0x265eb9(0x274)](_0x3e9bfe,_0x455b06['name']));}catch(_0x1fa265){console[_0x265eb9(0x176)](_0x265eb9(0x2a4),{'e':_0x1fa265});}(_0x455b06['availableFormats']??[])['forEach'](_0x1e70a6=>{const _0x47444e=_0x265eb9;try{fs['existsSync'](path['join'](_0x3e9bfe,_0x1e70a6['id']))&&fs[_0x47444e(0x1e1)](path['join'](_0x3e9bfe,_0x1e70a6['id']));}catch(_0x292bb4){console[_0x47444e(0x176)](_0x47444e(0x2a4),{'e':_0x292bb4});}});}analyzeConverterFiles(),_0x3bd433[_0x265eb9(0x1bb)]({'message':_0x265eb9(0x14c)});});const deleteOldDemoUsers=async()=>{const _0x55dfd7=a27_0x27b13b;console[_0x55dfd7(0x176)](_0x55dfd7(0x241));const _0x323a86=config[_0x55dfd7(0x184)],_0x120889='SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)';try{const [_0x508577]=await conn[_0x55dfd7(0x125)]()['execute'](_0x120889,[_0x323a86]),_0x38789a=_0x508577[_0x55dfd7(0x139)](_0x3067eb=>_0x3067eb[_0x55dfd7(0x271)]),_0x369b93=_0x508577[_0x55dfd7(0x139)](_0x14c1e2=>_0x14c1e2[_0x55dfd7(0x25e)]);console[_0x55dfd7(0x176)](_0x369b93),await conn[_0x55dfd7(0x125)]()[_0x55dfd7(0x17d)](_0x55dfd7(0x1fa),[_0x323a86]),_0x38789a['forEach'](_0x2250a3=>{const _0x2ec57b=_0x55dfd7;try{const _0x9d7cfe=_0x2ec57b(0x12e)+_0x2250a3;cleanCacheForUserFiles(_0x9d7cfe),fs[_0x2ec57b(0x19c)](_0x9d7cfe);}catch(_0x393993){console[_0x2ec57b(0x19b)]('Error\x20deleting\x20user\x20folder:',_0x393993);}}),console['log']('Old\x20demo_user\x20accounts\x20('+_0x508577['length']+_0x55dfd7(0x228)+_0x323a86+_0x55dfd7(0x1a1));}catch(_0x56a659){console[_0x55dfd7(0x19b)]('Error\x20deleting\x20old\x20demo_user\x20accounts:',_0x56a659);}};schedule[a27_0x27b13b(0x1c4)]('0\x201\x20*\x20*\x20*',deleteOldDemoUsers),router['get'](a27_0x27b13b(0x145),protectedRoute,async(_0x1e146c,_0x1c5bc3)=>{const _0x25558c=a27_0x27b13b,_0x1c7fbd=fs[_0x25558c(0x116)](path[_0x25558c(0x274)](path['dirname'](require['main'][_0x25558c(0x19a)]),_0x25558c(0x124)),'utf8'),_0x203afa=_0x1c7fbd[_0x25558c(0x180)]('{version}',_0x1e146c[_0x25558c(0x27b)]);_0x1c5bc3[_0x25558c(0x1c0)](_0x203afa);});const exportUsersList=async()=>{const _0x54fc10=a27_0x27b13b;console[_0x54fc10(0x176)](_0x54fc10(0x21c));const _0xe9b882=path[_0x54fc10(0x274)](path[_0x54fc10(0x160)](require[_0x54fc10(0x13f)][_0x54fc10(0x19a)]),_0x54fc10(0x293));!fs[_0x54fc10(0x1dd)](_0xe9b882)&&fs['mkdirSync'](_0xe9b882);const _0x2d01da=config['usersExportFrequency']||_0x54fc10(0x2a3);let _0x5a18d9;const _0x3f6f50=path[_0x54fc10(0x274)](_0xe9b882,_0x54fc10(0x283));if(fs[_0x54fc10(0x1dd)](_0x3f6f50))try{const _0x55cd9c=JSON[_0x54fc10(0x21a)](fs[_0x54fc10(0x116)](_0x3f6f50,_0x54fc10(0x256)));_0x5a18d9=new Date(_0x55cd9c[_0x54fc10(0x1cc)]);}catch(_0x2e9fff){console[_0x54fc10(0x19b)](_0x54fc10(0x178),_0x2e9fff),_0x5a18d9=calculateDefaultLastExportDate(_0x2d01da);}else _0x5a18d9=calculateDefaultLastExportDate(_0x2d01da);const _0x29a02a=new Date(),_0x46a13d=_0x29a02a['getFullYear']()+'-'+String(_0x29a02a[_0x54fc10(0x255)]()+0x1)[_0x54fc10(0x290)](0x2,'0')+'-'+String(_0x29a02a[_0x54fc10(0x28c)]())[_0x54fc10(0x290)](0x2,'0'),_0x4527f7=_0x54fc10(0x1eb)+_0x46a13d+_0x54fc10(0x13e),_0x1c3e10=path[_0x54fc10(0x274)](_0xe9b882,_0x4527f7);try{const _0x44bf5c='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20email,\x20first_name,\x20last_name,\x20created_at\x20\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20>\x20?\x20\x0a\x20\x20\x20\x20\x20\x20ORDER\x20BY\x20created_at\x20DESC\x0a\x20\x20\x20\x20',[_0x982a48]=await conn[_0x54fc10(0x125)]()[_0x54fc10(0x17d)](_0x44bf5c,[_0x5a18d9]);if(_0x982a48[_0x54fc10(0x1dc)]===0x0){console[_0x54fc10(0x176)](_0x54fc10(0x18f));return;}let _0x1f21b5='email,firstname,lastname\x0a';_0x982a48[_0x54fc10(0x297)](_0x70eb30=>{const _0x23b873=_0x54fc10,_0x179ca4=_0x70eb30[_0x23b873(0x25e)]?'\x22'+_0x70eb30[_0x23b873(0x25e)][_0x23b873(0x1f4)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x4af0a5=_0x70eb30[_0x23b873(0x1ac)]?'\x22'+_0x70eb30[_0x23b873(0x1ac)][_0x23b873(0x1f4)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x2b8b91=_0x70eb30[_0x23b873(0x1f0)]?'\x22'+_0x70eb30[_0x23b873(0x1f0)][_0x23b873(0x1f4)](/"/g,'\x22\x22')+'\x22':'\x22\x22';_0x1f21b5+=_0x179ca4+','+_0x4af0a5+','+_0x2b8b91+'\x0a';}),fs[_0x54fc10(0x1c1)](_0x1c3e10,_0x1f21b5),console[_0x54fc10(0x176)](_0x54fc10(0x259)+_0x982a48[_0x54fc10(0x1dc)]+_0x54fc10(0x1ef)+_0x1c3e10);const _0x527c23={'lastExportDate':_0x29a02a[_0x54fc10(0x1cf)](),'fileName':_0x4527f7,'userCount':_0x982a48[_0x54fc10(0x1dc)]};fs[_0x54fc10(0x1c1)](_0x3f6f50,JSON[_0x54fc10(0x23c)](_0x527c23,null,0x2));}catch(_0x269e75){console['error']('Error\x20exporting\x20users\x20for\x20Google\x20Ads:',_0x269e75);}},calculateDefaultLastExportDate=_0x2a27e1=>{const _0x59c25c=a27_0x27b13b,_0x57fefd=new Date();return _0x2a27e1==='biweekly'?_0x57fefd[_0x59c25c(0x211)](_0x57fefd[_0x59c25c(0x28c)]()-0xe):_0x57fefd[_0x59c25c(0x203)](_0x57fefd['getMonth']()-0x1),_0x57fefd;};router[a27_0x27b13b(0x1f5)]('/users-export/history',async(_0x39103d,_0x6e3f4)=>{const _0x155985=a27_0x27b13b,_0x584025=path[_0x155985(0x274)](path['dirname'](require[_0x155985(0x13f)][_0x155985(0x19a)]),_0x155985(0x293));if(!fs[_0x155985(0x1dd)](_0x584025))return _0x6e3f4[_0x155985(0x249)](0xc8)[_0x155985(0x1bb)]({'exports':[]});try{const _0x3e3aad=fs['readdirSync'](_0x584025)['filter'](_0xa73348=>_0xa73348[_0x155985(0x276)](_0x155985(0x1eb))&&_0xa73348[_0x155985(0x179)]('.csv'))[_0x155985(0x139)](_0x27ee5b=>{const _0xc5e05e=_0x155985,_0x6e113=path[_0xc5e05e(0x274)](_0x584025,_0x27ee5b),_0x4ac64f=fs[_0xc5e05e(0x272)](_0x6e113),_0x217582=fs[_0xc5e05e(0x116)](_0x6e113,_0xc5e05e(0x256)),_0x2996ef=_0x217582['split']('\x0a')[_0xc5e05e(0x1dc)]-0x1;return{'fileName':_0x27ee5b,'createdAt':_0x4ac64f[_0xc5e05e(0x29d)],'userCount':_0x2996ef};})[_0x155985(0x195)]((_0x2b7879,_0x51c9d0)=>_0x51c9d0['createdAt']-_0x2b7879[_0x155985(0x29e)]);_0x6e3f4['status'](0xc8)[_0x155985(0x1bb)]({'exports':_0x3e3aad});}catch(_0x5c49d8){console[_0x155985(0x19b)](_0x155985(0x157),_0x5c49d8),_0x6e3f4[_0x155985(0x249)](0x1f4)[_0x155985(0x1bb)]({'error':'Failed\x20to\x20retrieve\x20export\x20history'});}}),router[a27_0x27b13b(0x132)](a27_0x27b13b(0x18a),async(_0x11db17,_0x144506)=>{const _0x238596=a27_0x27b13b;try{await exportUsersList(),_0x144506[_0x238596(0x249)](0xc8)[_0x238596(0x1bb)]({'message':_0x238596(0x25c)});}catch(_0x4aeb8a){console[_0x238596(0x19b)](_0x238596(0x28f),_0x4aeb8a),_0x144506[_0x238596(0x249)](0x1f4)[_0x238596(0x1bb)]({'error':'Failed\x20to\x20trigger\x20export'});}}),router[a27_0x27b13b(0x1f5)](a27_0x27b13b(0x188),async(_0x43b0b1,_0x304d78)=>{const _0x49d9e0=a27_0x27b13b,{fileName:_0x1fef0a}=_0x43b0b1['params'],_0x95631=path[_0x49d9e0(0x274)](path[_0x49d9e0(0x160)](require[_0x49d9e0(0x13f)]['filename']),_0x49d9e0(0x293),_0x1fef0a);if(!fs[_0x49d9e0(0x1dd)](_0x95631))return _0x304d78[_0x49d9e0(0x249)](0x194)[_0x49d9e0(0x1bb)]({'error':_0x49d9e0(0x213)});_0x304d78[_0x49d9e0(0x1e6)](_0x95631);});const cleanCacheForUserFiles=_0x9359ec=>{const _0x5562a4=a27_0x27b13b;try{if(!fs['existsSync'](_0x9359ec)){console[_0x5562a4(0x176)](_0x5562a4(0x223)+_0x9359ec+_0x5562a4(0x22a));return;}const _0x59f4e4=path['join'](path[_0x5562a4(0x160)](require[_0x5562a4(0x13f)][_0x5562a4(0x19a)]),_0x5562a4(0x1b9),_0x5562a4(0x24c));if(!fs[_0x5562a4(0x1dd)](_0x59f4e4)){console[_0x5562a4(0x176)](_0x5562a4(0x172)+_0x59f4e4+_0x5562a4(0x22a));return;}const _0x175e47=JSON[_0x5562a4(0x21a)](fs[_0x5562a4(0x116)](path[_0x5562a4(0x274)](path[_0x5562a4(0x160)](require[_0x5562a4(0x13f)]['filename']),_0x5562a4(0x12f)))),_0x472390=fs[_0x5562a4(0x149)](_0x9359ec);_0x472390['forEach'](_0x6b2690=>{const _0x4760df=_0x5562a4;_0x175e47[_0x4760df(0x24c)][_0x4760df(0x297)](_0x329a9b=>{const _0x5a9fc1=_0x4760df;_0x329a9b['goodFileName']===_0x6b2690&&_0x329a9b[_0x5a9fc1(0x29f)][_0x5a9fc1(0x297)](_0x3baf2a=>{const _0x1e7a26=_0x5a9fc1;try{fs[_0x1e7a26(0x1e1)](path[_0x1e7a26(0x274)](_0x59f4e4,_0x3baf2a['id']));}catch(_0x11ac51){console[_0x1e7a26(0x19b)](_0x1e7a26(0x214)+_0x3baf2a['id']+':',_0x11ac51);}});});}),analyzeConverterFiles(),console[_0x5562a4(0x176)]('Cache\x20cleaned\x20for\x20files\x20in\x20'+_0x9359ec);}catch(_0x361066){console[_0x5562a4(0x19b)](_0x5562a4(0x29b),_0x361066);}};schedule[a27_0x27b13b(0x1c4)]('0\x2023\x20*\x20*\x20*',exportUsersList),schedule[a27_0x27b13b(0x1c4)](a27_0x27b13b(0x14a),sendFollowUpEmails),schedule[a27_0x27b13b(0x1c4)](a27_0x27b13b(0x17a),sendAccountDeletionPreventionEmails);const analyzeConverterFiles=()=>{const _0x4a9f4f=a27_0x27b13b;try{const _0x3d2281=path[_0x4a9f4f(0x274)](path[_0x4a9f4f(0x160)](require[_0x4a9f4f(0x13f)][_0x4a9f4f(0x19a)]),_0x4a9f4f(0x1b9),_0x4a9f4f(0x24c)),_0x4bae77=path[_0x4a9f4f(0x274)](path['dirname'](require[_0x4a9f4f(0x13f)][_0x4a9f4f(0x19a)]),'cadviewer',_0x4a9f4f(0x278));if(!fs[_0x4a9f4f(0x1dd)](_0x3d2281)){logStream['write'](_0x4a9f4f(0x254)+_0x3d2281+'\x20n\x27existe\x20pas.');return;}if(!fs[_0x4a9f4f(0x1dd)](_0x4bae77)){logStream['write'](_0x4a9f4f(0x254)+_0x4bae77+_0x4a9f4f(0x16e));return;}const _0x24bcbd=fs['readdirSync'](_0x3d2281),_0x422267={};_0x24bcbd[_0x4a9f4f(0x297)](_0x5bd3de=>{const _0x1d070e=_0x4a9f4f,_0x2f9d1b=path[_0x1d070e(0x274)](_0x3d2281,_0x5bd3de),_0x130234=fs['statSync'](_0x2f9d1b),_0x19b56d=_0x5bd3de[_0x1d070e(0x221)]('.'),_0x4ba200=_0x19b56d[_0x1d070e(0x156)](0x0,-0x1)[_0x1d070e(0x282)]((_0x411b13,_0x484ca0)=>!(['dwg','rl'][_0x1d070e(0x16c)](_0x411b13[_0x1d070e(0x1fc)]())&&_0x484ca0===_0x19b56d['length']-0x2))[_0x1d070e(0x274)]('.');!Object[_0x1d070e(0x29c)](_0x422267)['includes'](_0x4ba200)?_0x422267[_0x4ba200]=[{'file':_0x5bd3de,'stats':_0x130234}]:_0x422267[_0x4ba200][_0x1d070e(0x1e8)]({'file':_0x5bd3de,'stats':_0x130234});});const _0x576abe=[];_0x24bcbd['forEach'](_0x3c8798=>{const _0x5d0f12=_0x4a9f4f;if(!_0x3c8798['endsWith']('.dwg.json'))return;let _0xf9159=_0x3c8798;const _0xd0f646=path[_0x5d0f12(0x274)](_0x3d2281,_0x3c8798),_0x2e5fe6=fs[_0x5d0f12(0x272)](_0xd0f646);let _0x3fcbc5=_0x2e5fe6[_0x5d0f12(0x153)],_0x479163='';const _0x661029=fs[_0x5d0f12(0x116)](_0xd0f646,'utf8'),_0x837f04=JSON['parse'](_0x661029),_0x753fb2=_0x837f04[_0x5d0f12(0x258)]?.[_0x5d0f12(0x139)](_0xd8a079=>_0xd8a079['fileName'])??[];if(_0x837f04[_0x5d0f12(0x19a)])_0xf9159=_0x837f04[_0x5d0f12(0x19a)];const _0x5aaa99=_0x3c8798[_0x5d0f12(0x221)]('.'),_0x19e2ff=_0x5aaa99['slice'](0x0,-0x1)[_0x5d0f12(0x282)]((_0x2b986f,_0x527850)=>!(['dwg','rl'][_0x5d0f12(0x16c)](_0x2b986f['toLocaleLowerCase']())&&_0x527850===_0x5aaa99['length']-0x2))[_0x5d0f12(0x274)]('.'),_0x39d9d4=Object[_0x5d0f12(0x29c)](_0x422267)[_0x5d0f12(0x16c)](_0x19e2ff)?_0x422267[_0x19e2ff]:[];for(const _0x1ff523 of _0x753fb2){Object[_0x5d0f12(0x29c)](_0x422267)[_0x5d0f12(0x16c)](_0x1ff523)&&_0x39d9d4['push'](..._0x422267[_0x1ff523]);}const _0x37c503=_0x39d9d4[_0x5d0f12(0x139)](({file:_0x471bbc,stats:_0x4f1e5a})=>{const _0x13b452=_0x5d0f12;return!_0x471bbc[_0x13b452(0x179)](_0x13b452(0x15e))&&(_0x3fcbc5+=_0x4f1e5a[_0x13b452(0x153)]),{'id':_0x471bbc,'name':_0x471bbc[_0x13b452(0x179)](_0x13b452(0x244))?_0x13b452(0x121):_0x471bbc[_0x13b452(0x179)]('.svgz')?'SVGZ':_0x471bbc[_0x13b452(0x179)]('.pdf')?_0x13b452(0x295):_0x471bbc['endsWith'](_0x13b452(0x20f))?'JSON':_0x471bbc[_0x13b452(0x179)](_0x13b452(0x13e))?_0x13b452(0x154):_0x471bbc[_0x13b452(0x179)](_0x13b452(0x163))?_0x13b452(0x1a8):_0x471bbc['split']('.')[_0x13b452(0x17c)]()['toUpperCase'](),'color':_0x471bbc[_0x13b452(0x179)](_0x13b452(0x244))||_0x471bbc['endsWith'](_0x13b452(0x17e))?_0x13b452(0x251):_0x471bbc['endsWith']('.pdf')?'red':_0x471bbc[_0x13b452(0x179)]('.json')?'gray':_0x471bbc[_0x13b452(0x179)](_0x13b452(0x13e))?_0x13b452(0x1b1):_0x471bbc['endsWith'](_0x13b452(0x163))?_0x13b452(0x273):_0x13b452(0x261)};});if(_0x37c503[_0x5d0f12(0x187)](_0x1af67a=>_0x1af67a['id'][_0x5d0f12(0x16c)]('.rl.json')))_0x479163=_0x5d0f12(0x1c5);else{if(_0x37c503['some'](_0x47f513=>[_0x5d0f12(0x1a7),_0x5d0f12(0x1a6)][_0x5d0f12(0x16c)](_0x47f513['id'][_0x5d0f12(0x221)]('.')['pop']()))&&_0x37c503[_0x5d0f12(0x187)](_0x43a588=>[_0x5d0f12(0x186)]['includes'](_0x43a588['id'][_0x5d0f12(0x221)]('.')[_0x5d0f12(0x17c)]())))_0x479163=_0x5d0f12(0x175);else{if(_0x37c503[_0x5d0f12(0x187)](_0x537c8d=>['svg',_0x5d0f12(0x1a6)]['includes'](_0x537c8d['id'][_0x5d0f12(0x221)]('.')['pop']())))_0x479163=_0x5d0f12(0x1ed);else{if(_0x37c503['some'](_0x3d675c=>[_0x5d0f12(0x1bb)]['includes'](_0x3d675c['id'][_0x5d0f12(0x221)]('.')[_0x5d0f12(0x17c)]()))&&_0x37c503[_0x5d0f12(0x187)](_0x5cbbd4=>[_0x5d0f12(0x21b)][_0x5d0f12(0x16c)](_0x5cbbd4['id']['split']('.')[_0x5d0f12(0x17c)]())))_0x479163=_0x5d0f12(0x1ea);else{if(_0x37c503['some'](_0x2a8f57=>['pdf'][_0x5d0f12(0x16c)](_0x2a8f57['id'][_0x5d0f12(0x221)]('.')[_0x5d0f12(0x17c)]())))_0x479163='DWG\x20to\x20PDF\x20Conversion';else{if(_0x37c503[_0x5d0f12(0x187)](_0x44c632=>['json'][_0x5d0f12(0x16c)](_0x44c632['id'][_0x5d0f12(0x221)]('.')[_0x5d0f12(0x17c)]()))&&!_0x37c503[_0x5d0f12(0x187)](_0x40dd92=>[_0x5d0f12(0x21b)]['includes'](_0x40dd92['id'][_0x5d0f12(0x221)]('.')[_0x5d0f12(0x17c)]())))_0x479163=_0x5d0f12(0x142);else _0x37c503['some'](_0xb7c1cb=>[_0x5d0f12(0x1bb)][_0x5d0f12(0x16c)](_0xb7c1cb['id'][_0x5d0f12(0x221)]('.')[_0x5d0f12(0x17c)]()))&&(_0x479163='Cache\x20conversion');}}}}}_0x576abe[_0x5d0f12(0x1e8)]({'name':_0x3c8798,'goodFileName':_0xf9159,'size':_0x3fcbc5,'createdAt':_0x2e5fe6['birthtime'],'updatedAt':_0x2e5fe6[_0x5d0f12(0x200)],'readAt':_0x2e5fe6['atime'],'action':_0x479163,'availableFormats':_0x37c503});}),_0x576abe[_0x4a9f4f(0x195)]((_0x535014,_0x5310ad)=>_0x5310ad[_0x4a9f4f(0x220)]-_0x535014[_0x4a9f4f(0x220)]);const _0x411b75={'timestamp':new Date(),'totalFiles':_0x576abe[_0x4a9f4f(0x1dc)],'files':_0x576abe},_0x359fc1=path[_0x4a9f4f(0x274)](_0x4bae77,_0x4a9f4f(0x190));fs[_0x4a9f4f(0x1c1)](_0x359fc1,JSON[_0x4a9f4f(0x23c)](_0x411b75,null,0x2));}catch(_0x4cd004){console[_0x4a9f4f(0x176)](_0x4a9f4f(0x242)),console[_0x4a9f4f(0x176)](_0x4a9f4f(0x239)+_0x4cd004['message']);}},scheduleFileAnalysis=()=>{const _0x44cf8c=a27_0x27b13b;analyzeConverterFiles(),schedule['scheduleJob'](_0x44cf8c(0x1ce),analyzeConverterFiles),logStream[_0x44cf8c(0x155)](_0x44cf8c(0x10a));};scheduleFileAnalysis(),module[a27_0x27b13b(0x293)]={'router':router,'analyzeConverterFiles':analyzeConverterFiles};
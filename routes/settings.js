const a27_0x4d8ada=a27_0x1f59;(function(_0x523cd3,_0x105efa){const _0x35b13a=a27_0x1f59,_0xce3f66=_0x523cd3();while(!![]){try{const _0x18dc12=parseInt(_0x35b13a(0xfd))/0x1+parseInt(_0x35b13a(0x10b))/0x2+parseInt(_0x35b13a(0x148))/0x3+-parseInt(_0x35b13a(0x1c0))/0x4*(-parseInt(_0x35b13a(0x207))/0x5)+-parseInt(_0x35b13a(0x132))/0x6+parseInt(_0x35b13a(0x12a))/0x7+-parseInt(_0x35b13a(0x217))/0x8*(parseInt(_0x35b13a(0x1aa))/0x9);if(_0x18dc12===_0x105efa)break;else _0xce3f66['push'](_0xce3f66['shift']());}catch(_0x38e546){_0xce3f66['push'](_0xce3f66['shift']());}}}(a27_0x3c1a,0x94488));const express=require('express'),router=express['Router'](),multer=require(a27_0x4d8ada(0x179)),fs=require('fs'),path=require(a27_0x4d8ada(0x171)),getHotConfig=require(a27_0x4d8ada(0x22f))[a27_0x4d8ada(0x1d4)],{exec}=require(a27_0x4d8ada(0x1f9)),os=require('os'),conn=require(a27_0x4d8ada(0x222)),bcrypt=require('bcrypt'),osu=require(a27_0x4d8ada(0x17f)),schedule=require('node-schedule'),counter=require(a27_0x4d8ada(0x1dd)),{randomUUID}=require(a27_0x4d8ada(0x1a1)),logStream=require(a27_0x4d8ada(0xc9)),config=require(a27_0x4d8ada(0x1be)),basicAuth=require(a27_0x4d8ada(0xb2)),{sendFollowUpEmails,sendAccountDeletionPreventionEmails}=require(a27_0x4d8ada(0xd2)),protectedRoute=basicAuth({'users':{[config['settingsUserBasicAuth']]:config['settingsPasswordBasicAuth']},'challenge':!![],'realm':'CADViewer\x20Settings'});router[a27_0x4d8ada(0x1fb)](a27_0x4d8ada(0x11a),async(_0x5cdd5f,_0x3e9fb8)=>{const _0x4fe7a0=a27_0x4d8ada;_0x3e9fb8[_0x4fe7a0(0x1a9)](path[_0x4fe7a0(0x149)](path[_0x4fe7a0(0xf4)](require[_0x4fe7a0(0x196)][_0x4fe7a0(0x1c3)]),_0x4fe7a0(0x143)));}),router['get']('/chart.min.js',async(_0x1ceb7b,_0x3c1e03)=>{const _0x371b2f=a27_0x4d8ada;_0x3c1e03[_0x371b2f(0x1a9)](path[_0x371b2f(0x149)](path[_0x371b2f(0xf4)](require[_0x371b2f(0x196)][_0x371b2f(0x1c3)]),_0x371b2f(0xc8)));}),router[a27_0x4d8ada(0x1fb)](a27_0x4d8ada(0x184),async(_0x3155f9,_0x5e7177)=>{const _0x2d68c5=a27_0x4d8ada;_0x5e7177[_0x2d68c5(0x1a9)](path[_0x2d68c5(0x149)](path[_0x2d68c5(0xf4)](require['main'][_0x2d68c5(0x1c3)]),_0x2d68c5(0xe7)));}),router[a27_0x4d8ada(0x1fb)](a27_0x4d8ada(0x204),async(_0x1ea9c2,_0x4072b7)=>{const _0x2be191=a27_0x4d8ada;_0x4072b7[_0x2be191(0x1a9)](path[_0x2be191(0x149)](path[_0x2be191(0xf4)](require[_0x2be191(0x196)][_0x2be191(0x1c3)]),'cadviewer/settings/vanilla-toast.css'));}),router['get'](a27_0x4d8ada(0x12c),async(_0x1eb15b,_0x3e0a50)=>{const _0x36a41d=a27_0x4d8ada;_0x3e0a50[_0x36a41d(0x1a9)](path[_0x36a41d(0x149)](path[_0x36a41d(0xf4)](require[_0x36a41d(0x196)]['filename']),'cadviewer/settings/vanilla-toast.js'));}),router['get'](a27_0x4d8ada(0x14f),async(_0x2c69b0,_0x2a28a5)=>{const _0x39a772=a27_0x4d8ada;_0x2a28a5['sendFile'](path['join'](path[_0x39a772(0xf4)](require[_0x39a772(0x196)][_0x39a772(0x1c3)]),_0x39a772(0x1c1)));}),router[a27_0x4d8ada(0x1fb)]('/',protectedRoute,async(_0x53c3a1,_0xa20172)=>{const _0x26283f=a27_0x4d8ada,_0x21d91e=fs[_0x26283f(0x209)](path[_0x26283f(0x149)](path['dirname'](require[_0x26283f(0x196)][_0x26283f(0x1c3)]),_0x26283f(0xa8)),_0x26283f(0xda)),_0x1cda25=_0x21d91e[_0x26283f(0x1f7)](_0x26283f(0x1e9),_0x53c3a1[_0x26283f(0xf2)]);_0xa20172[_0x26283f(0x1c4)](_0x1cda25);}),router[a27_0x4d8ada(0x1fb)]('/licences',protectedRoute,async(_0x38f1c9,_0x3d0817)=>{const _0x143b70=a27_0x4d8ada,_0xac0da8=fs['readFileSync'](path[_0x143b70(0x149)](path[_0x143b70(0xf4)](require[_0x143b70(0x196)][_0x143b70(0x1c3)]),_0x143b70(0x102)),_0x143b70(0xda)),_0x28c3a9=_0xac0da8['replaceAll'](_0x143b70(0x1e9),_0x38f1c9[_0x143b70(0xf2)]);_0x3d0817[_0x143b70(0x1c4)](_0x28c3a9);}),router[a27_0x4d8ada(0x1fb)](a27_0x4d8ada(0x1d0),protectedRoute,async(_0x1131b9,_0x2b62bf)=>{const _0x550845=a27_0x4d8ada,_0x4d0a35=fs[_0x550845(0x209)](path[_0x550845(0x149)](path['dirname'](require[_0x550845(0x196)][_0x550845(0x1c3)]),'cadviewer/settings/config.html'),'utf8'),_0x4cae2c=_0x4d0a35['replaceAll'](_0x550845(0x1e9),_0x1131b9[_0x550845(0xf2)]);_0x2b62bf[_0x550845(0x1c4)](_0x4cae2c);}),router[a27_0x4d8ada(0x1fb)](a27_0x4d8ada(0x145),protectedRoute,async(_0xbc4ef7,_0x26522b)=>{const _0x5292e4=a27_0x4d8ada,_0x269489=fs[_0x5292e4(0x209)](path[_0x5292e4(0x149)](path['dirname'](require[_0x5292e4(0x196)][_0x5292e4(0x1c3)]),_0x5292e4(0xb9)),_0x5292e4(0xda)),_0x2a5619=_0x269489[_0x5292e4(0x1f7)]('{version}',_0xbc4ef7[_0x5292e4(0xf2)]);_0x26522b[_0x5292e4(0x1c4)](_0x2a5619);}),router[a27_0x4d8ada(0x227)](a27_0x4d8ada(0x145),async(_0x488c9d,_0x31a28b)=>{const _0x322033=a27_0x4d8ada,_0x3b7fd9=path[_0x322033(0x149)](path[_0x322033(0xf4)](require['main'][_0x322033(0x1c3)]),_0x322033(0x234)),_0x5b5b07=JSON[_0x322033(0x136)](fs[_0x322033(0x209)](_0x3b7fd9,_0x322033(0xda))),_0x565104=_0x5b5b07[_0x322033(0xdc)];if(!fs[_0x322033(0xf3)](_0x565104))return _0x31a28b[_0x322033(0x130)](0x194)[_0x322033(0x1bf)]({'message':'Base\x20folder\x20not\x20exists,\x20please\x20verify\x20your\x20configuration.'});const _0x538a64=_0x4afb66=>{const _0x5eccbd=_0x322033;let _0x161e5f=0x0;return _0x4afb66[_0x5eccbd(0x18a)](_0xd13802=>{const _0x5541fd=_0x5eccbd;_0xd13802[_0x5541fd(0x17b)]?_0x161e5f+=_0x538a64(_0xd13802[_0x5541fd(0x15e)]):_0x161e5f+=_0xd13802['size'];}),_0x161e5f;},_0x391486=_0x380fdf=>{const _0x155f20=_0x322033;if(_0x380fdf<0x400)return _0x380fdf+'\x20B';else{if(_0x380fdf<0x400*0x400)return(_0x380fdf/0x400)[_0x155f20(0x140)](0x2)+_0x155f20(0xcc);else return _0x380fdf<0x400*0x400*0x400?(_0x380fdf/0x400/0x400)[_0x155f20(0x140)](0x2)+_0x155f20(0x13b):(_0x380fdf/0x400/0x400/0x400)[_0x155f20(0x140)](0x2)+_0x155f20(0x1cb);}},_0x5135a5=(_0x173679,_0x4996e7='')=>{const _0x106a5a=_0x322033,_0x5932aa=fs[_0x106a5a(0x1f5)](_0x173679),_0x1ee9f2=[];return _0x5932aa[_0x106a5a(0x18a)](_0x1d3c81=>{const _0xb61f70=_0x106a5a,_0x5d65e1=path[_0xb61f70(0x149)](_0x173679,_0x1d3c81)[_0xb61f70(0x1f7)]('\x5c','/'),_0x227074=fs[_0xb61f70(0x1ff)](_0x5d65e1);if(_0x227074[_0xb61f70(0x181)]()){const _0x2549be=_0x5135a5(_0x5d65e1,_0x4996e7+'\x20\x20\x20');_0x1ee9f2[_0xb61f70(0x224)]({'name':_0x1d3c81,'size':_0x227074[_0xb61f70(0x159)],'path':_0x5d65e1,'permissions':_0x227074['mode'],'isFolder':!![],'sub_dirs':_0x2549be});}else _0x1ee9f2[_0xb61f70(0x224)]({'name':_0x1d3c81,'size':_0x227074[_0xb61f70(0x159)],'path':_0x5d65e1,'permissions':_0x227074[_0xb61f70(0x153)],'isFolder':![]});}),_0x1ee9f2;};let _0x45d273=_0x5135a5(_0x565104);const _0x368b27=_0x3b23b3=>{return _0x3b23b3['forEach'](_0x5da677=>{const _0x88fd01=a27_0x1f59;_0x5da677[_0x88fd01(0x17b)]?(_0x5da677[_0x88fd01(0xdd)]=_0x391486(_0x538a64(_0x5da677['sub_dirs'])),_0x5da677['sub_dirs']=_0x368b27(_0x5da677[_0x88fd01(0x15e)])):_0x5da677[_0x88fd01(0xdd)]=_0x391486(_0x5da677[_0x88fd01(0x159)]);}),_0x3b23b3;};_0x31a28b[_0x322033(0x130)](0xc8)[_0x322033(0x1bf)](_0x368b27(_0x45d273));}),router[a27_0x4d8ada(0x227)]('/folders/download',async(_0x381e40,_0xedf6f4)=>{const _0x18d93e=a27_0x4d8ada,{path:_0x1ed88f}=_0x381e40[_0x18d93e(0x1f2)],_0xaafb20=_0x1ed88f[_0x18d93e(0x1ca)]('/')[_0x18d93e(0x1b2)]();if(!fs[_0x18d93e(0xf3)](_0x1ed88f))return _0xedf6f4[_0x18d93e(0x130)](0x194)[_0x18d93e(0x1bf)]({'message':'File\x20not\x20found'});_0xedf6f4[_0x18d93e(0x167)](_0x18d93e(0xad),_0x18d93e(0x117)),_0xedf6f4['setHeader'](_0x18d93e(0x23c),'attachment;\x20filename=\x22'+_0xaafb20+'\x22'),_0xedf6f4[_0x18d93e(0x21f)](_0x1ed88f,_0x50ace6=>{const _0x336a03=_0x18d93e;_0x50ace6&&_0xedf6f4['status'](0x1f4)[_0x336a03(0x1bf)]({'message':_0x336a03(0x1ac)});});}),router[a27_0x4d8ada(0x227)](a27_0x4d8ada(0x1a5),async(_0x1a22d1,_0x58f80c)=>{const _0x278106=a27_0x4d8ada,_0x179582=_0x1a22d1['body'],_0x5e67bf=getHotConfig()[_0x278106(0xdc)],_0x44db2f=path[_0x278106(0x149)](_0x5e67bf,_0x179582[_0x278106(0x171)]);if(!fs['existsSync'](_0x44db2f))return _0x58f80c[_0x278106(0x130)](0x194)[_0x278106(0x1bf)]({'message':'Folder\x20not\x20found.'});if(fs[_0x278106(0xf3)](path['join'](_0x44db2f,_0x179582[_0x278106(0x10e)])))return _0x58f80c[_0x278106(0x130)](0x199)[_0x278106(0x1bf)]({'message':_0x278106(0x13a)});fs['mkdir'](path['join'](_0x44db2f,_0x179582[_0x278106(0x10e)]),_0x14454f=>{const _0x45d6f1=_0x278106;_0x14454f&&_0x58f80c[_0x45d6f1(0x130)](0x1f4)[_0x45d6f1(0x1bf)]({'message':_0x45d6f1(0x129)}),_0x58f80c[_0x45d6f1(0x130)](0xc8)[_0x45d6f1(0x1bf)]({'message':_0x45d6f1(0x1cd)});});}),router[a27_0x4d8ada(0xff)](a27_0x4d8ada(0x19f),async(_0x374da3,_0x386cd9)=>{const _0x38e0b2=a27_0x4d8ada,{newName:_0x3d176f,isFolder:_0xbd3a1f,path:_0x50fd0e}=_0x374da3[_0x38e0b2(0x1f2)];if(!fs[_0x38e0b2(0xf3)](_0x50fd0e))return _0x386cd9[_0x38e0b2(0x130)](0x194)['json']({'message':_0xbd3a1f?_0x38e0b2(0x1fd):'File\x20not\x20found'});const _0x2b254f=_0x50fd0e[_0x38e0b2(0x16b)](_0x50fd0e[_0x38e0b2(0x1ca)]('/')[_0x38e0b2(0x1b2)](),_0x3d176f),_0xe3ae98=fs['statSync'](_0x50fd0e);_0xe3ae98[_0x38e0b2(0x181)]()?fs[_0x38e0b2(0xe4)](_0x50fd0e,_0x2b254f):(fs[_0x38e0b2(0x177)](_0x50fd0e,_0x2b254f),fs[_0x38e0b2(0xb3)](_0x50fd0e)),_0x386cd9['status'](0xc8)['json']({'message':_0xbd3a1f?'Folder\x20renamed.':_0x38e0b2(0x1c9)});}),router[a27_0x4d8ada(0x20c)](a27_0x4d8ada(0x1e6),async(_0x22bfe2,_0x385deb)=>{const _0x2f3d26=a27_0x4d8ada,{path:_0x190755}=_0x22bfe2[_0x2f3d26(0x1f2)];if(!fs[_0x2f3d26(0xf3)](_0x190755))return _0x385deb['status'](0x194)['json']({'message':_0x2f3d26(0x16f)});const _0x2014f5=fs[_0x2f3d26(0x1ff)](_0x190755);if(_0x2014f5['isFile']())fs[_0x2f3d26(0xcd)](_0x190755,_0x5d160b=>{const _0x2490e1=_0x2f3d26;_0x5d160b&&_0x385deb[_0x2490e1(0x130)](0x1f4)[_0x2490e1(0x1bf)]({'message':'Error\x20deleting\x20file.'}),_0x385deb[_0x2490e1(0x130)](0xc8)['json']({'message':_0x2490e1(0x14d)});});else _0x2014f5[_0x2f3d26(0x181)]()&&fs['rmdir'](_0x190755,{'recursive':!![]},_0x4c9291=>{const _0xb41896=_0x2f3d26;_0x4c9291&&_0x385deb[_0xb41896(0x130)](0x1f4)[_0xb41896(0x1bf)]({'message':_0xb41896(0x1f6)}),_0x385deb['status'](0xc8)[_0xb41896(0x1bf)]({'message':_0xb41896(0xf1)});});});!fs[a27_0x4d8ada(0xf3)](a27_0x4d8ada(0xcb))&&fs[a27_0x4d8ada(0x162)]('./tmp');const storage=multer[a27_0x4d8ada(0xe0)]({'destination':(_0x4dd906,_0x43c3b0,_0x52c64f)=>{_0x52c64f(null,'tmp');},'filename':(_0x1c9a90,_0x44a611,_0x54866a)=>{const _0x4a7812=a27_0x4d8ada;_0x54866a(null,Date['now']()+path['extname'](_0x44a611[_0x4a7812(0x15a)]));}}),upload=multer({'storage':storage,'limits':{'fileSize':0xa*0x400*0x400}});router[a27_0x4d8ada(0x227)](a27_0x4d8ada(0x1e2),upload[a27_0x4d8ada(0x1e0)](a27_0x4d8ada(0x15f)),async(_0x2dc18e,_0x32a1cb)=>{const _0x43db0b=a27_0x4d8ada,_0x5c602d=_0x2dc18e['body'];if(!_0x2dc18e[_0x43db0b(0x15f)]||_0x2dc18e[_0x43db0b(0x15f)][_0x43db0b(0x19c)]===0x0)return _0x32a1cb[_0x43db0b(0x130)](0x190)[_0x43db0b(0x1bf)]({'message':'No\x20files\x20uploaded'});const _0x2c0763=getHotConfig()[_0x43db0b(0xdc)],_0x26c922=path[_0x43db0b(0x149)](_0x2c0763,_0x5c602d[_0x43db0b(0x171)]);if(!fs[_0x43db0b(0xf3)](_0x26c922))return _0x32a1cb[_0x43db0b(0x130)](0x194)[_0x43db0b(0x1bf)]({'message':_0x43db0b(0x23b)});const _0x3a0421=_0x2dc18e[_0x43db0b(0x15f)][_0x43db0b(0xbc)](_0x2238f3=>({'originalname':_0x2238f3['originalname'],'filename':_0x2238f3[_0x43db0b(0x1c3)],'mimetype':_0x2238f3[_0x43db0b(0x237)],'size':_0x2238f3['size']}));_0x3a0421[_0x43db0b(0x18a)](_0x24d99a=>{const _0x281f60=_0x43db0b;fs[_0x281f60(0x177)](path[_0x281f60(0x149)](_0x281f60(0x12f),_0x24d99a[_0x281f60(0x1c3)]),path['join'](_0x26c922,_0x24d99a['originalname'])),fs['unlinkSync'](path['join']('tmp',_0x24d99a[_0x281f60(0x1c3)]));}),_0x32a1cb['status'](0xc8)[_0x43db0b(0x1bf)]({'message':'Files\x20uploaded\x20successfully','files':_0x3a0421});}),router[a27_0x4d8ada(0xff)](a27_0x4d8ada(0xef),async(_0x264023,_0x707865)=>{const _0x561913=a27_0x4d8ada,_0x220c69=path['join'](path[_0x561913(0xf4)](require[_0x561913(0x196)][_0x561913(0x1c3)]),'CADViewer_config.json'),{config:_0x14292e}=_0x264023[_0x561913(0x1f2)];if(!_0x14292e)return _0x707865['status'](0x190)['json']({'message':'No\x20config\x20object\x20provided'});try{fs[_0x561913(0x142)](_0x220c69,JSON[_0x561913(0xd8)](_0x14292e,null,0x4)),_0x707865[_0x561913(0x130)](0xc8)[_0x561913(0x1bf)]({'message':'Config\x20updated\x20successfully'});}catch(_0x9d6bdb){_0x707865[_0x561913(0x130)](0x1f4)[_0x561913(0x1bf)]({'message':_0x561913(0xec)});}}),router[a27_0x4d8ada(0xff)]('/config/update',async(_0x53c6da,_0x1f27ba)=>{const _0x1f9b7f=a27_0x4d8ada,{key:_0x26d2c0,value:_0x3dd34f}=_0x53c6da[_0x1f9b7f(0x1f2)],_0xe58fe=path[_0x1f9b7f(0x149)](path[_0x1f9b7f(0xf4)](require[_0x1f9b7f(0x196)][_0x1f9b7f(0x1c3)]),_0x1f9b7f(0x234));fs[_0x1f9b7f(0x112)](_0xe58fe,_0x1f9b7f(0xda),function(_0x17c927,_0x1c0be1){const _0x3fc578=_0x1f9b7f;_0x17c927&&_0x1f27ba['status'](0x1f4)[_0x3fc578(0x1c4)](_0x17c927);const _0x133893=JSON[_0x3fc578(0x136)](_0x1c0be1);_0x133893[_0x26d2c0]=_0x3dd34f;if(_0x26d2c0==='autodetect_location'){let _0x241807='';if(_0x133893[_0x3fc578(0x20f)]){_0x241807=os[_0x3fc578(0x170)]();if(_0x241807===_0x3fc578(0x18f))_0x241807=_0x3fc578(0x150);else{if(_0x241807===_0x3fc578(0x1bd))_0x241807=_0x3fc578(0x19b);}}else _0x241807=_0x133893[_0x3fc578(0x170)];if(_0x241807===_0x3fc578(0x150)){_0x133893[_0x3fc578(0x18c)]=path[_0x3fc578(0x210)](__dirname,'..')+'/';const _0x17fe01=/\\/g;_0x133893['ServerLocation']=_0x133893[_0x3fc578(0x18c)][_0x3fc578(0x16b)](_0x17fe01,'/');}else _0x133893['ServerLocation']=path[_0x3fc578(0x210)](__dirname,'..')+'/';}if(_0x26d2c0===_0x3fc578(0x20f)){let _0x31cb0b=os[_0x3fc578(0x170)]();if(_0x31cb0b==='win32')_0x31cb0b=_0x3fc578(0x150);else _0x31cb0b=_0x3fc578(0x19b);_0x31cb0b===_0x3fc578(0x150)?_0x3dd34f===!![]&&(_0x133893[_0x3fc578(0x120)]=_0x133893[_0x3fc578(0x1d3)],_0x133893[_0x3fc578(0xfa)]=_0x133893[_0x3fc578(0xf8)],_0x133893[_0x3fc578(0xe8)]=_0x133893[_0x3fc578(0xe1)]):_0x3dd34f===!![]&&(_0x133893['autoxchange_executable']=_0x133893[_0x3fc578(0x113)],_0x133893['dwgmerge_executable']=_0x133893[_0x3fc578(0x11b)],_0x133893['linklist_executable']=_0x133893[_0x3fc578(0x126)]),_0x133893[_0x3fc578(0x170)]=_0x31cb0b;}if(_0x133893[_0x3fc578(0x20f)]){let _0x3ebefd=os[_0x3fc578(0x170)]();if(_0x3ebefd===_0x3fc578(0x18f))_0x3ebefd=_0x3fc578(0x150);else _0x3ebefd=_0x3fc578(0x19b);if(_0x3ebefd===_0x3fc578(0x150)){if(_0x26d2c0===_0x3fc578(0x1d3))_0x133893[_0x3fc578(0x120)]=_0x3dd34f;else{if(_0x26d2c0==='dwgmerge_executable_windows')_0x133893[_0x3fc578(0xfa)]=_0x3dd34f;else _0x26d2c0===_0x3fc578(0xe1)&&(_0x133893['linklist_executable']=_0x3dd34f);}}else{if(_0x26d2c0===_0x3fc578(0x113))_0x133893[_0x3fc578(0x120)]=_0x3dd34f;else{if(_0x26d2c0==='dwgmerge_executable_linux')_0x133893[_0x3fc578(0xfa)]=_0x3dd34f;else _0x26d2c0===_0x3fc578(0x126)&&(_0x133893['linklist_executable']=_0x3dd34f);}}}fs[_0x3fc578(0x1f4)](_0xe58fe,JSON[_0x3fc578(0xd8)](_0x133893,null,0x4),function(_0x5454e5){const _0x3c98c6=_0x3fc578;_0x5454e5&&_0x1f27ba[_0x3c98c6(0x130)](0x1f4)['send'](_0x5454e5),_0x1f27ba[_0x3c98c6(0x130)](0xc8)[_0x3c98c6(0x1bf)]({'message':'Config\x20updated.'});});});}),router[a27_0x4d8ada(0x227)]('/config/content',async(_0x50f83b,_0x3edd17)=>{const _0x30df67=a27_0x4d8ada,_0x21eb69=getHotConfig(),_0xee972=(_0x21eb69[_0x30df67(0x186)]['includes'](_0x21eb69['ServerLocation'])?'':_0x21eb69[_0x30df67(0x18c)])+_0x21eb69[_0x30df67(0x186)],_0x1ce5f0=(_0x21eb69[_0x30df67(0x186)]['includes'](_0x21eb69[_0x30df67(0x18c)])?'':_0x21eb69[_0x30df67(0x18c)])+_0x21eb69[_0x30df67(0x101)],_0x3126ee=(_0x21eb69['converterLocation']['includes'](_0x21eb69[_0x30df67(0x18c)])?'':_0x21eb69[_0x30df67(0x18c)])+_0x21eb69[_0x30df67(0x1db)],_0x1c88de=/ax202.*\.exe/,_0x180d9d=/ax202.*/,_0x494a2c=/dwgmerge202.*\.exe/,_0x3990ea=/dwgmerge_202.*/,_0xd1840c=/linklist_202.*\.exe/,_0x2adcf7=/linklist_202.*/,_0x1636a2=[],_0xc74b1=[],_0x1f64e0=[],_0x24fbb4=[],_0x58532d=[],_0x4ad6d0=[];let _0x1b3892='';if(_0x21eb69[_0x30df67(0x20f)]){_0x1b3892=os[_0x30df67(0x170)]();if(_0x1b3892==='win32')_0x1b3892=_0x30df67(0x150);else{if(_0x1b3892===_0x30df67(0x1bd))_0x1b3892=_0x30df67(0x19b);}}else _0x1b3892=_0x21eb69[_0x30df67(0x170)];fs[_0x30df67(0x1f5)](_0x3126ee[_0x30df67(0x1f7)]('linux',_0x30df67(0x150)))[_0x30df67(0x18a)](_0x3a8a01=>{const _0xfd6242=_0x30df67;if(_0x1c88de['test'](_0x3a8a01[_0xfd6242(0x131)]()))_0x1636a2[_0xfd6242(0x224)](_0x3a8a01);}),fs[_0x30df67(0x1f5)](_0xee972[_0x30df67(0x1f7)]('linux',_0x30df67(0x150)))[_0x30df67(0x18a)](_0x498d1b=>{const _0x2ff479=_0x30df67;if(_0x494a2c[_0x2ff479(0x231)](_0x498d1b['toLocaleLowerCase']()))_0xc74b1['push'](_0x498d1b);}),fs[_0x30df67(0x1f5)](_0x1ce5f0[_0x30df67(0x1f7)](_0x30df67(0x19b),_0x30df67(0x150)))[_0x30df67(0x18a)](_0x1c1f2f=>{const _0x3ef9fb=_0x30df67;if(_0xd1840c[_0x3ef9fb(0x231)](_0x1c1f2f[_0x3ef9fb(0x131)]()))_0x1f64e0['push'](_0x1c1f2f);}),fs[_0x30df67(0x1f5)](_0x3126ee['replaceAll'](_0x30df67(0x150),_0x30df67(0x19b)))['forEach'](_0x32f8d6=>{const _0x542ea9=_0x30df67;if(_0x180d9d['test'](_0x32f8d6[_0x542ea9(0x131)]()))_0x24fbb4[_0x542ea9(0x224)](_0x32f8d6);}),fs[_0x30df67(0x1f5)](_0xee972[_0x30df67(0x1f7)]('windows',_0x30df67(0x19b)))[_0x30df67(0x18a)](_0x4acffd=>{const _0x42d800=_0x30df67;if(_0x3990ea[_0x42d800(0x231)](_0x4acffd[_0x42d800(0x131)]()))_0x58532d[_0x42d800(0x224)](_0x4acffd);}),fs[_0x30df67(0x1f5)](_0x1ce5f0[_0x30df67(0x1f7)](_0x30df67(0x150),_0x30df67(0x19b)))[_0x30df67(0x18a)](_0x2123d7=>{const _0xa61add=_0x30df67;if(_0x2adcf7[_0xa61add(0x231)](_0x2123d7['toLocaleLowerCase']()))_0x4ad6d0['push'](_0x2123d7);});const _0x35f95b=[_0x30df67(0x17d),_0x30df67(0x155),_0x30df67(0x109),'converterpathLin',_0x30df67(0x1ad)],_0x456c8c=['fileLocation',_0x30df67(0x10d),_0x30df67(0x1db),'licenseLocation',_0x30df67(0x189),_0x30df67(0x1c5),_0x30df67(0xd1),_0x30df67(0x186),'linklistLocation',_0x30df67(0xf2)],_0x228d11=[_0x30df67(0x18d),_0x30df67(0x1e3),_0x30df67(0xa5),_0x30df67(0xbe),_0x30df67(0x1f8),'cached_conversion',_0x30df67(0x22d)],_0x4695f5={'ServerUrl':_0x30df67(0x125),'autoxchange_executable':_0x30df67(0xd9),'linklist_executable':'LinkList\x20Settings','dwgmerge_executable':_0x30df67(0xb6),'setup_mysqlHost':_0x30df67(0xb7),'callbackMethod_gatewayUrl_flag':_0x30df67(0x1b0),'userFolderMaximumFiles':'Demo\x20and\x20Base\x20User\x20Settings','smtpHost':_0x30df67(0x1fa)},_0xa6df60={'https':_0x30df67(0x12e),'ServerFrontEndUrlAsAllowedOriginOnly':_0x30df67(0x12e),'autodetect_platform':_0x30df67(0x12e),'cvjs_svgz_compress':_0x30df67(0x12e),'cached_conversion':_0x30df67(0x12e),'remainOnServer':_0x30df67(0x12e),'cvjs_debug':_0x30df67(0x12e),'autodetect_location':_0x30df67(0x12e),'platform':'radio|windows,linux','autoxchange_executable':'radio|'+(_0x1b3892===_0x30df67(0x150)?_0x1636a2['join'](','):_0x24fbb4['join'](',')),'autoxchange_executable_windows':'radio|'+_0x1636a2[_0x30df67(0x149)](','),'autoxchange_executable_linux':'radio|'+_0x24fbb4['join'](','),'dwgmerge_executable':_0x30df67(0x1b4)+(_0x1b3892===_0x30df67(0x150)?_0xc74b1[_0x30df67(0x149)](','):_0x58532d['join'](',')),'dwgmerge_executable_windows':_0x30df67(0x1b4)+_0xc74b1[_0x30df67(0x149)](','),'dwgmerge_executable_linux':_0x30df67(0x1b4)+_0x58532d[_0x30df67(0x149)](','),'linklist_executable':_0x30df67(0x1b4)+(_0x1b3892===_0x30df67(0x150)?_0x1f64e0[_0x30df67(0x149)](','):_0x4ad6d0[_0x30df67(0x149)](',')),'linklist_executable_windows':_0x30df67(0x1b4)+_0x1f64e0[_0x30df67(0x149)](','),'linklist_executable_linux':_0x30df67(0x1b4)+_0x4ad6d0[_0x30df67(0x149)](','),'callbackMethod_gatewayUrl_flag':_0x30df67(0x12e),'setup_mysqlHost':_0x30df67(0x12e),'ContentSecurityPolicyReportOnly':_0x30df67(0x12e),'fileLoad_PasswordAuthentication':'boolean','contentLocationCheck':_0x30df67(0x12e),'globalBearerAutentication':_0x30df67(0x12e),'bcryptSaltRounds':_0x30df67(0x1ec),'userFolderMaximumFiles':_0x30df67(0x1ec),'userFolderMaximumSizeInMB':_0x30df67(0x1ec),'recaptchaEnabled':_0x30df67(0x12e),'usersExportFrequency':_0x30df67(0x1dc),'enableEmailVerification':_0x30df67(0x12e),'demoUserRetentionDaysAlertBeforeDeletion':_0x30df67(0x1ec),'demoUserRetentionDays':_0x30df67(0x1ec)},_0x433f10={},_0x134d5a=Object[_0x30df67(0xde)](_0x21eb69);_0x21eb69['autodetect_platform']&&_0x35f95b[_0x30df67(0x224)](_0x30df67(0x170)),_0x21eb69[_0x30df67(0x21c)]&&(_0x456c8c[_0x30df67(0x224)](_0x30df67(0x18c)),_0x456c8c[_0x30df67(0x224)]('autoxchange_executable'),_0x456c8c[_0x30df67(0x224)](_0x30df67(0xfa)),_0x456c8c['push']('linklist_executable')),!_0x21eb69[_0x30df67(0x11f)]&&_0x456c8c[_0x30df67(0x224)](_0x30df67(0xb4)),!_0x21eb69[_0x30df67(0x1c8)]&&(_0x456c8c['push'](_0x30df67(0x1e3)),_0x456c8c['push'](_0x30df67(0xa5)),_0x456c8c[_0x30df67(0x224)](_0x30df67(0xbe)),_0x456c8c[_0x30df67(0x224)](_0x30df67(0x1f8))),!_0x21eb69[_0x30df67(0xd5)]&&_0x456c8c[_0x30df67(0x224)]('ContentSecurityPolicy'),!_0x21eb69['fileLoad_PasswordAuthentication']&&(_0x456c8c['push'](_0x30df67(0xd0)),_0x456c8c[_0x30df67(0x224)](_0x30df67(0x238))),!_0x21eb69[_0x30df67(0xaf)]&&_0x456c8c[_0x30df67(0x224)](_0x30df67(0x15d)),_0x134d5a[_0x30df67(0x18a)](_0x1518f7=>{const _0x5be26f=_0x30df67;!_0x35f95b[_0x5be26f(0xee)](_0x1518f7)&&(_0x433f10[_0x1518f7]=_0x21eb69[_0x1518f7]);}),_0x433f10['fileLocationUrl']=''+_0x21eb69['ServerUrl']+_0x21eb69[_0x30df67(0x1e1)],_0x3edd17['status'](0xc8)[_0x30df67(0x1bf)]({'notEditableFields':_0x456c8c,'customFieldTypes':_0xa6df60,'notHotEditableFields':_0x228d11,'config':_0x433f10,'fieldsTitle':_0x4695f5,'configData':_0x21eb69});}),router[a27_0x4d8ada(0x1fb)](a27_0x4d8ada(0x1bc),protectedRoute,async(_0x88ef15,_0x2df633)=>{const _0x598f56=a27_0x4d8ada,_0x407652=fs[_0x598f56(0x209)](path[_0x598f56(0x149)](path[_0x598f56(0xf4)](require[_0x598f56(0x196)][_0x598f56(0x1c3)]),_0x598f56(0x17a)),_0x598f56(0xda)),_0x3cb7cb=_0x407652[_0x598f56(0x1f7)](_0x598f56(0x1e9),_0x88ef15[_0x598f56(0xf2)]);_0x2df633[_0x598f56(0x1c4)](_0x3cb7cb);});function findMatchingLogFiles(_0xeddc3a,_0xbe41d4=/^call-Api_Conversion_\d{1,2}_\d{1,2}_\d{4}\.log$/){const _0x17f959=a27_0x4d8ada;try{const _0xdffe1c=fs['readdirSync'](_0xeddc3a);return _0xdffe1c[_0x17f959(0x236)](_0x4a4d65=>_0xbe41d4['test'](_0x4a4d65))[_0x17f959(0xbc)](_0x418306=>_0x418306[_0x17f959(0x1f7)](_0x17f959(0x119),'')[_0x17f959(0x1f7)](_0x17f959(0x212),''));}catch(_0x4d043a){return console['error'](_0x17f959(0x16a),_0x4d043a),[];}}router['post']('/logs/content',async(_0x434d9e,_0x19e52c)=>{const _0x1559e8=a27_0x4d8ada,_0x34d296=new Date(),_0x11d5f5=_0x34d296[_0x1559e8(0x1f3)]()[_0x1559e8(0x198)]()[_0x1559e8(0x15b)](0x2,'0')+'_'+(_0x34d296['getMonth']()+0x1)['toString']()[_0x1559e8(0x15b)](0x2,'0')+'_'+_0x34d296[_0x1559e8(0x16e)](),{displayDay:_0x448fec}=_0x434d9e[_0x1559e8(0x1f2)],_0x43f021=path[_0x1559e8(0x149)](path[_0x1559e8(0xf4)](require[_0x1559e8(0x196)][_0x1559e8(0x1c3)]),_0x1559e8(0x233),'call-Api_Conversion_'+(_0x448fec??_0x11d5f5)+_0x1559e8(0x212));fs[_0x1559e8(0xf3)](_0x43f021)?fs[_0x1559e8(0x112)](_0x43f021,_0x1559e8(0xda),function(_0x3ff806,_0xc727c){const _0x5746d6=_0x1559e8;_0x3ff806&&_0x19e52c['status'](0x1f4)[_0x5746d6(0x1c4)](_0x3ff806),_0x19e52c[_0x5746d6(0x130)](0xc8)[_0x5746d6(0x1bf)]({'content':_0xc727c,'days':findMatchingLogFiles(path[_0x5746d6(0x149)](path[_0x5746d6(0xf4)](require[_0x5746d6(0x196)][_0x5746d6(0x1c3)]),'logs'))});}):_0x19e52c[_0x1559e8(0x130)](0xc8)[_0x1559e8(0x1bf)]({'content':'','days':findMatchingLogFiles(path[_0x1559e8(0x149)](path['dirname'](require[_0x1559e8(0x196)][_0x1559e8(0x1c3)]),_0x1559e8(0x233)))});}),router[a27_0x4d8ada(0x20c)]('/logs/clean',async(_0x2c6750,_0x40808c)=>{const _0x3405ec=a27_0x4d8ada,_0x780fd1=new Date(),_0x2d2bb0=_0x780fd1[_0x3405ec(0x1f3)]()[_0x3405ec(0x198)]()[_0x3405ec(0x15b)](0x2,'0')+'_'+(_0x780fd1[_0x3405ec(0xd6)]()+0x1)[_0x3405ec(0x198)]()[_0x3405ec(0x15b)](0x2,'0')+'_'+_0x780fd1['getFullYear'](),_0x2ef156=findMatchingLogFiles(path[_0x3405ec(0x149)](path[_0x3405ec(0xf4)](require[_0x3405ec(0x196)][_0x3405ec(0x1c3)]),'logs'));_0x2ef156[_0x3405ec(0x18a)](_0x5715cd=>{const _0x29dce3=_0x3405ec;if(_0x5715cd!==_0x2d2bb0)fs[_0x29dce3(0xb3)](path[_0x29dce3(0x149)](path[_0x29dce3(0xf4)](require[_0x29dce3(0x196)]['filename']),_0x29dce3(0x233),_0x29dce3(0x119)+_0x5715cd+_0x29dce3(0x212)));}),logStream[_0x3405ec(0x1d2)](),_0x40808c[_0x3405ec(0x130)](0xc8)[_0x3405ec(0x1bf)]({'message':_0x3405ec(0x1b3)});}),router[a27_0x4d8ada(0x1fb)](a27_0x4d8ada(0x232),protectedRoute,async(_0x375613,_0x24e7f7)=>{const _0x16306c=a27_0x4d8ada,_0x2decbb=path[_0x16306c(0x149)](path[_0x16306c(0xf4)](require[_0x16306c(0x196)][_0x16306c(0x1c3)]),_0x16306c(0x21e));if(!fs[_0x16306c(0xf3)](_0x2decbb)){const _0x4e721d={'jsonDataExtraction':{'standard':[{'paramName':'json','paramValue':''},{'paramName':_0x16306c(0x1a3),'paramValue':''}]},'dwgToSvg':{'standard':[{'paramName':'f','paramValue':_0x16306c(0x158)},{'paramName':_0x16306c(0x1de),'paramValue':''},{'paramName':_0x16306c(0x191),'paramValue':''}]},'dwgToPdf':{'standard':[{'paramName':'f','paramValue':'pdf'},{'paramName':'model','paramValue':''}]},'displayDwg':{'standard':[{'paramName':'f','paramValue':_0x16306c(0x158)},{'paramName':_0x16306c(0x1de),'paramValue':''},{'paramName':_0x16306c(0x191),'paramValue':''}]},'dwgToMultiple':{'standard':[{'paramName':_0x16306c(0x137),'paramValue':''}]}};fs[_0x16306c(0x142)](_0x2decbb,JSON[_0x16306c(0xd8)](_0x4e721d,null,0x4));}const _0x152dab=fs[_0x16306c(0x209)](path[_0x16306c(0x149)](path[_0x16306c(0xf4)](require[_0x16306c(0x196)]['filename']),_0x16306c(0x213)),_0x16306c(0xda)),_0x5cbb25=_0x152dab[_0x16306c(0x1f7)](_0x16306c(0x1e9),_0x375613['version']);_0x24e7f7[_0x16306c(0x1c4)](_0x5cbb25);}),router[a27_0x4d8ada(0x227)](a27_0x4d8ada(0x1c7),async(_0x1cbc74,_0x47c934)=>{const _0x2af66f=a27_0x4d8ada,{actionName:_0x327b5d,contentLocation:_0x1dc295}=_0x1cbc74[_0x2af66f(0x1f2)],_0x25ca72=path[_0x2af66f(0x149)](path[_0x2af66f(0xf4)](require['main'][_0x2af66f(0x1c3)]),_0x2af66f(0x21e));fs[_0x2af66f(0x112)](_0x25ca72,_0x2af66f(0xda),function(_0x186041,_0x4c3721){const _0x70261f=_0x2af66f;if(_0x186041)_0x47c934[_0x70261f(0x130)](0xc8)[_0x70261f(0x1bf)]({'parameters':[]});else{const _0x28f592=JSON['parse'](_0x4c3721);if(_0x28f592[_0x327b5d]&&_0x28f592[_0x327b5d][_0x1dc295])_0x47c934[_0x70261f(0x130)](0xc8)[_0x70261f(0x1bf)]({'parameters':_0x28f592[_0x327b5d][_0x1dc295]});else _0x28f592[_0x327b5d]&&_0x28f592[_0x327b5d][_0x70261f(0x176)]?_0x47c934[_0x70261f(0x130)](0xc8)['json']({'parameters':_0x28f592[_0x327b5d]['standard']}):_0x47c934['status'](0xc8)[_0x70261f(0x1bf)]({'parameters':[]});}});}),router['post']('/restapi-test/parameters/save',async(_0x4a99c2,_0x4c434a)=>{const _0x5007fe=a27_0x4d8ada,{actionName:_0x316a0d,contentLocation:_0x5df8d2,parameters:_0x3986d5}=_0x4a99c2['body'],_0x5b648e=path[_0x5007fe(0x149)](path['dirname'](require[_0x5007fe(0x196)][_0x5007fe(0x1c3)]),_0x5007fe(0x21e));fs[_0x5007fe(0x112)](_0x5b648e,'utf8',function(_0x2a7c2e,_0x2f60db){const _0x4b1ba0=_0x5007fe;if(_0x2a7c2e)_0x4c434a[_0x4b1ba0(0x130)](0x199)[_0x4b1ba0(0x1bf)]({'message':_0x4b1ba0(0x115)});else{const _0x2bca10=JSON[_0x4b1ba0(0x136)](_0x2f60db);!_0x2bca10[_0x316a0d]&&(_0x2bca10[_0x316a0d]={}),_0x2bca10[_0x316a0d][_0x5df8d2]=_0x3986d5,fs[_0x4b1ba0(0x1f4)](_0x5b648e,JSON[_0x4b1ba0(0xd8)](_0x2bca10,null,0x4),function(_0x104097){const _0x4bec22=_0x4b1ba0;_0x104097&&_0x4c434a[_0x4bec22(0x130)](0x199)[_0x4bec22(0x1bf)]({'message':_0x4bec22(0x115)}),_0x4c434a['status'](0xc8)['json']({'message':'Parameters\x20saved.'});});}});}),router[a27_0x4d8ada(0x1fb)](a27_0x4d8ada(0xf7),protectedRoute,async(_0x32dab2,_0x9279d0)=>{const _0x146cec=a27_0x4d8ada,_0x162d25=fs[_0x146cec(0x209)](path['join'](path['dirname'](require[_0x146cec(0x196)]['filename']),_0x146cec(0x10c)),'utf8'),_0x526a5d=_0x162d25[_0x146cec(0x1f7)](_0x146cec(0x1e9),_0x32dab2[_0x146cec(0xf2)]);_0x9279d0[_0x146cec(0x1c4)](_0x526a5d);}),router['post'](a27_0x4d8ada(0x16d),async(_0x5b4789,_0x3af424)=>{const _0x28cb7c=a27_0x4d8ada,_0x2f59ab=getHotConfig(),_0x483956=_0x2f59ab[_0x28cb7c(0x1db)]['replaceAll']('//','/'),_0x10e6e8=_0x2f59ab[_0x28cb7c(0x186)][_0x28cb7c(0x1f7)]('//','/'),_0x442b52=_0x2f59ab[_0x28cb7c(0x101)][_0x28cb7c(0x1f7)]('//','/'),_0x1e975f=''+_0x483956+_0x2f59ab[_0x28cb7c(0x120)],_0x588dc0=''+_0x10e6e8+_0x2f59ab[_0x28cb7c(0xfa)],_0x360331=''+_0x442b52+_0x2f59ab[_0x28cb7c(0xe8)],_0x5a4b73=[],_0x374849=new Promise(_0x3c669b=>{const _0x272e61=_0x28cb7c;exec(os[_0x272e61(0x170)]()===_0x272e61(0x18f)?_0x272e61(0x21d):'ls',_0x4f3ff0=>{const _0x37135c=_0x272e61;_0x4f3ff0?_0x5a4b73['push']({'title':'\x22exec\x22\x20command\x20activated\x20on\x20NodeJS','status':![],'priority':0x1}):_0x5a4b73[_0x37135c(0x224)]({'title':_0x37135c(0x161),'status':!![],'priority':0x1}),_0x3c669b();});}),_0x2a9e22=new Promise(_0x195612=>{const _0x24405e=_0x28cb7c;fs[_0x24405e(0x19d)](_0x1e975f,fs['constants']['X_OK'],_0x655e12=>{const _0x3ca9bb=_0x24405e;_0x655e12?_0x5a4b73[_0x3ca9bb(0x224)]({'title':_0x3ca9bb(0x1ed)+_0x2f59ab['autoxchange_executable']+'\x22\x20executable','status':![],'priority':0x2}):_0x5a4b73['push']({'title':_0x3ca9bb(0x1ed)+_0x2f59ab[_0x3ca9bb(0x120)]+'\x22\x20executable','status':!![],'priority':0x2}),_0x195612();});}),_0x35e7af=new Promise(_0xb3a438=>{const _0x343808=_0x28cb7c;fs[_0x343808(0x19d)](_0x588dc0,fs['constants'][_0x343808(0x13e)],_0x3d00e3=>{const _0x4f34b0=_0x343808;_0x3d00e3?_0x5a4b73[_0x4f34b0(0x224)]({'title':_0x4f34b0(0x1ed)+_0x2f59ab[_0x4f34b0(0xfa)]+_0x4f34b0(0x105),'status':![],'priority':0x3}):_0x5a4b73[_0x4f34b0(0x224)]({'title':'Permission\x20750\x20for\x20the\x20\x22'+_0x2f59ab['dwgmerge_executable']+_0x4f34b0(0x105),'status':!![],'priority':0x3}),_0xb3a438();});}),_0xfc64e8=new Promise(_0x2cb04e=>{const _0xf9faa2=_0x28cb7c;fs[_0xf9faa2(0x19d)](_0x360331,fs['constants'][_0xf9faa2(0x13e)],_0x35bba6=>{const _0x1d73a5=_0xf9faa2;_0x35bba6?_0x5a4b73[_0x1d73a5(0x224)]({'title':_0x1d73a5(0x1ed)+_0x2f59ab['linklist_executable']+_0x1d73a5(0x105),'status':![],'priority':0x4}):_0x5a4b73[_0x1d73a5(0x224)]({'title':'Permission\x20750\x20for\x20the\x20\x22'+_0x2f59ab[_0x1d73a5(0xe8)]+_0x1d73a5(0x105),'status':!![],'priority':0x4}),_0x2cb04e();});}),_0x320dbb=new Promise(_0x1f536b=>{const _0x2e0bfa=_0x28cb7c,_0x2c4093=new Date(),_0x212ff4=_0x2c4093[_0x2e0bfa(0x1f3)]()['toString']()[_0x2e0bfa(0x15b)](0x2,'0')+'_'+(_0x2c4093[_0x2e0bfa(0xd6)]()+0x1)['toString']()[_0x2e0bfa(0x15b)](0x2,'0')+'_'+_0x2c4093[_0x2e0bfa(0x16e)](),{displayDay:_0x22acef}=_0x5b4789[_0x2e0bfa(0x1f2)];fs['access'](path[_0x2e0bfa(0x149)](path['dirname'](require[_0x2e0bfa(0x196)][_0x2e0bfa(0x1c3)]),_0x2e0bfa(0x233),'call-Api_Conversion_'+(_0x22acef??_0x212ff4)+'.log'),fs[_0x2e0bfa(0x1d6)][_0x2e0bfa(0x1b9)],_0x54b659=>{const _0x2e730a=_0x2e0bfa;_0x54b659?_0x5a4b73['push']({'title':_0x2e730a(0x172)+(_0x22acef??_0x212ff4)+_0x2e730a(0x230),'status':![],'priority':0x5}):_0x5a4b73[_0x2e730a(0x224)]({'title':_0x2e730a(0x172)+(_0x22acef??_0x212ff4)+_0x2e730a(0x230),'status':!![],'priority':0x5}),_0x1f536b();});}),_0x54c142=(_0x12ad48,_0xd00c84)=>{const _0x263fd9=_0x28cb7c,_0x56ad27=path['join'](path[_0x263fd9(0xf4)](require['main']['filename']),_0x12ad48);return new Promise(_0x4d1828=>{const _0x315a5d=_0x263fd9;fs['access'](path[_0x315a5d(0x149)](path[_0x315a5d(0xf4)](_0x56ad27)),fs[_0x315a5d(0x1d6)][_0x315a5d(0xe6)]|fs['constants'][_0x315a5d(0x1b9)],_0x35b68c=>{const _0x32caf3=_0x315a5d;_0x35b68c?_0x5a4b73[_0x32caf3(0x224)]({'title':_0x32caf3(0xc5)+_0x12ad48,'status':![],'priority':_0xd00c84+0x6}):_0x5a4b73[_0x32caf3(0x224)]({'title':_0x32caf3(0xc5)+_0x12ad48,'status':!![],'priority':_0xd00c84+0x6}),_0x4d1828();});});},_0x3b6652=[_0x28cb7c(0xea),'/converters/autoxchange/linux/','/converters/files/merged/',_0x28cb7c(0xa6),'/converters/files/pdf/',_0x28cb7c(0x1a4),'/content/redlines/v7/'],_0xa2ef1a=_0x3b6652[_0x28cb7c(0xbc)](_0x54c142);Promise[_0x28cb7c(0x152)]([_0x374849,_0x2a9e22,_0x35e7af,_0xfc64e8,_0x320dbb,..._0xa2ef1a])[_0x28cb7c(0x1a2)](()=>{_0x3af424['status'](0xc8)['json']({'checking_list':_0x5a4b73});})[_0x28cb7c(0x156)](()=>{const _0x2f8958=_0x28cb7c;_0x3af424[_0x2f8958(0x130)](0x1f4)['json']({'error':_0x2f8958(0xb1)});});}),router[a27_0x4d8ada(0x1fb)]('/users',protectedRoute,async(_0x2d0c25,_0x16941f)=>{const _0xd3b449=a27_0x4d8ada,_0x173518=fs[_0xd3b449(0x209)](path[_0xd3b449(0x149)](path[_0xd3b449(0xf4)](require[_0xd3b449(0x196)][_0xd3b449(0x1c3)]),_0xd3b449(0x1b7)),_0xd3b449(0xda)),_0x5955d0=_0x173518[_0xd3b449(0x1f7)]('{version}',_0x2d0c25['version']);_0x16941f['send'](_0x5955d0);}),router[a27_0x4d8ada(0x227)](a27_0x4d8ada(0x1d9),async(_0x271b5f,_0x5c214c)=>{const _0x49b8ec=a27_0x4d8ada;let _0x1d1c8a;try{const [_0x55fc0c]=await conn['promise']()[_0x49b8ec(0xc7)](_0x49b8ec(0xa7),[]);_0x1d1c8a=_0x55fc0c;}catch(_0x50696d){console[_0x49b8ec(0x228)](_0x50696d),_0x5c214c['status'](0x1f4)[_0x49b8ec(0x1bf)]({'error':_0x49b8ec(0x229)});return;}_0x5c214c[_0x49b8ec(0x130)](0xc8)[_0x49b8ec(0x1bf)]({'success':!![],'data':_0x1d1c8a});}),router[a27_0x4d8ada(0x227)](a27_0x4d8ada(0xc4),upload['single'](a27_0x4d8ada(0x12d)),async(_0x1e8c78,_0x509886)=>{const _0xa1dc86=a27_0x4d8ada,{id:_0x55709b,first_name:_0x11a6f5,last_name:_0x436f37,username:_0xe79a0d,email:_0x2bfbeb,password:_0x54fede,is_enabled:_0x357c99}=_0x1e8c78[_0xa1dc86(0x1f2)],_0x3990af=_0x1e8c78[_0xa1dc86(0x1f2)][_0xa1dc86(0x239)]==='admin'?_0xa1dc86(0x218):_0x1e8c78['body'][_0xa1dc86(0x239)]===_0xa1dc86(0x108)?_0xa1dc86(0x108):'user';let _0x45d1ac;console[_0xa1dc86(0x228)](_0xa1dc86(0x20d));_0x54fede&&(_0x45d1ac=await bcrypt[_0xa1dc86(0x100)](_0x54fede,0xa));let _0x3d7970=null;if(_0x1e8c78[_0xa1dc86(0x192)]){const _0x45a8fa=_0xa1dc86(0x10f)+randomUUID()+'.png';fs[_0xa1dc86(0x177)](_0x1e8c78['file']['path'],'./'+_0x45a8fa),fs[_0xa1dc86(0xb3)](_0x1e8c78['file'][_0xa1dc86(0x171)]),config['callbackMethod_gatewayUrl_flag']?_0x3d7970=config['callbackMethod_gatewayUrl']+'/'+_0x45a8fa:_0x3d7970=config[_0xa1dc86(0x18d)]+'/'+_0x45a8fa;}if(_0x55709b){try{let [_0xfd9291]=await conn[_0xa1dc86(0x19e)]()[_0xa1dc86(0xc7)](_0xa1dc86(0x1c2),[_0x2bfbeb,_0xe79a0d,_0x55709b]);if(_0xfd9291[_0xa1dc86(0x19c)]>0x0)_0x509886[_0xa1dc86(0x130)](0x199)[_0xa1dc86(0x1bf)]({'error':_0xa1dc86(0xfc)});else{!_0x1e8c78[_0xa1dc86(0x192)]&&([_0xfd9291]=await conn['promise']()[_0xa1dc86(0xc7)](_0xa1dc86(0x11c),[_0x55709b]),_0x3d7970=_0xfd9291[0x0]['avatar_url']);const _0x141d36='UPDATE\x20`users`\x20SET\x20`avatar_url`\x20=\x20?,\x20`first_name`\x20=\x20?,\x20`last_name`\x20=\x20?,\x20`username`\x20=\x20?,\x20`email`\x20=\x20?,'+(_0x54fede?'`crypted_password`\x20=\x20?,\x20':'')+_0xa1dc86(0xf0);await conn[_0xa1dc86(0x19e)]()[_0xa1dc86(0xc7)](_0x141d36,_0x54fede?[_0x3d7970,_0x11a6f5,_0x436f37,_0xe79a0d,_0x2bfbeb,_0x45d1ac,_0x357c99,_0x3990af,_0x55709b]:[_0x3d7970,_0x11a6f5,_0x436f37,_0xe79a0d,_0x2bfbeb,_0x357c99,_0x3990af,_0x55709b]);}}catch(_0x247d64){console['log'](_0x247d64),_0x509886[_0xa1dc86(0x130)](0x1f4)[_0xa1dc86(0x1bf)]({'error':_0xa1dc86(0x229)});return;}_0x509886[_0xa1dc86(0x130)](0xc8)[_0xa1dc86(0x1bf)]({'success':!![],'message':_0xa1dc86(0xb8)});}else{try{const [_0x338003]=await conn[_0xa1dc86(0x19e)]()[_0xa1dc86(0xc7)](_0xa1dc86(0xc6),[_0x2bfbeb,_0xe79a0d]);if(_0x338003[_0xa1dc86(0x19c)]>0x0)_0x509886[_0xa1dc86(0x130)](0x199)['json']({'error':_0xa1dc86(0xfc)});else{const _0x1ccfd3=randomUUID();await conn[_0xa1dc86(0x19e)]()[_0xa1dc86(0xc7)]('INSERT\x20INTO\x20`users`\x20(`avatar_url`,\x20`first_name`,\x20`last_name`,\x20`username`,\x20`email`,\x20`crypted_password`,\x20`role`,\x20`is_enabled`,\x20`folder_name`)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)',[_0x3d7970,_0x11a6f5,_0x436f37,_0xe79a0d,_0x2bfbeb,_0x45d1ac,_0x3990af,_0x357c99,_0x1ccfd3]);const _0x1cf98a=_0xa1dc86(0x123)+_0x1ccfd3;fs['mkdirSync'](_0x1cf98a);}}catch(_0x21d76b){console['log'](_0x21d76b),_0x509886['status'](0x1f4)[_0xa1dc86(0x1bf)]({'error':_0xa1dc86(0x229)});return;}_0x509886[_0xa1dc86(0x130)](0xc8)[_0xa1dc86(0x1bf)]({'success':!![],'message':_0xa1dc86(0x11e)});}}),router['delete'](a27_0x4d8ada(0xb5),async(_0x4cc199,_0x857aeb)=>{const _0x1c4e5d=a27_0x4d8ada,{userId:_0x36591c}=_0x4cc199[_0x1c4e5d(0x1f2)];let _0x1e1f3f;try{const [_0x313e9a]=await conn[_0x1c4e5d(0x19e)]()[_0x1c4e5d(0xc7)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?',[_0x36591c]);_0x313e9a['length']>0x0&&(_0x1e1f3f=_0x313e9a[0x0]);}catch(_0x2bc5){console['log']({'err':_0x2bc5}),_0x857aeb[_0x1c4e5d(0x130)](0x1f4)[_0x1c4e5d(0x1bf)]({'error':_0x1c4e5d(0x229)});return;}if(!_0x1e1f3f){_0x857aeb[_0x1c4e5d(0x130)](0x191)[_0x1c4e5d(0x1bf)]({'error':'Invalid\x20user'});return;}let _0x223244=_0x1e1f3f[_0x1c4e5d(0x168)];if(!_0x223244){_0x223244=randomUUID();try{await conn[_0x1c4e5d(0x19e)]()[_0x1c4e5d(0xc7)]('UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?',[_0x223244,_0x36591c]);}catch(_0x3581f1){console[_0x1c4e5d(0x228)]({'err':_0x3581f1}),_0x857aeb[_0x1c4e5d(0x130)](0x1f4)[_0x1c4e5d(0x1bf)]({'error':_0x1c4e5d(0x229)});return;}}const _0x5ed497=_0x1c4e5d(0x123)+_0x223244;console['log']('===================='),console['log'](_0x5ed497),!fs['existsSync'](_0x5ed497)&&fs['mkdirSync'](_0x5ed497),cleanCacheForUserFiles(_0x5ed497),fs[_0x1c4e5d(0x133)](_0x5ed497,{'recursive':!![],'force':!![]}),fs['mkdirSync'](_0x5ed497),_0x857aeb[_0x1c4e5d(0x130)](0xc8)[_0x1c4e5d(0x1bf)]({'success':!![],'message':'User\x20directory\x20flushed\x20successfully'});}),router[a27_0x4d8ada(0x20c)]('/users/:userId',async(_0x3b815b,_0x41a872)=>{const _0x3fefe2=a27_0x4d8ada,_0x21ec19=_0x3b815b['params']['userId'];try{let _0x14202a;try{const [_0x3c44dc]=await conn[_0x3fefe2(0x19e)]()[_0x3fefe2(0xc7)](_0x3fefe2(0x11c),[_0x21ec19]);_0x3c44dc[_0x3fefe2(0x19c)]>0x0&&(_0x14202a=_0x3c44dc[0x0]);}catch(_0x3078e7){console[_0x3fefe2(0x228)]({'err':_0x3078e7}),_0x41a872[_0x3fefe2(0x130)](0x1f4)['json']({'error':_0x3fefe2(0x229)});return;}if(!_0x14202a){_0x41a872[_0x3fefe2(0x130)](0x191)[_0x3fefe2(0x1bf)]({'error':'Invalid\x20user'});return;}let _0x53f63f=_0x14202a['folder_name'];if(_0x53f63f){const _0x520db9=_0x3fefe2(0x123)+_0x53f63f;fs[_0x3fefe2(0xf3)](_0x520db9)&&(cleanCacheForUserFiles(_0x520db9),fs['rmSync'](_0x520db9,{'recursive':!![],'force':!![]}));}await conn[_0x3fefe2(0x19e)]()['execute']('DELETE\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?',[_0x21ec19]);}catch(_0x3a8878){console[_0x3fefe2(0x228)](_0x3a8878),_0x41a872['status'](0x1f4)['json']({'error':_0x3fefe2(0x229)});return;}_0x41a872[_0x3fefe2(0x130)](0xc8)[_0x3fefe2(0x1bf)]({'success':!![],'message':'User\x20deleted\x20successfully'});}),router[a27_0x4d8ada(0x1fb)](a27_0x4d8ada(0x10a),async(_0x8e7d09,_0x293f2e)=>{const _0x48a7be=a27_0x4d8ada,_0x4cdd0d=osu['cpu'],_0x475973=osu[_0x48a7be(0x174)],_0x483a87=osu[_0x48a7be(0x1da)],_0x5565dd=osu['os'],_0x4c3dbd={'percentage':0x0,'usedGB':0x0,'freeGb':0x0,'totalGB':0x0};try{let _0x3d62bd=os[_0x48a7be(0x170)]()===_0x48a7be(0x18f)?'c:':'/';const _0x56e95f=await _0x483a87[_0x48a7be(0x166)](_0x3d62bd);_0x4c3dbd[_0x48a7be(0x219)]=_0x56e95f['usedPercentage'],_0x4c3dbd[_0x48a7be(0x18b)]=_0x56e95f[_0x48a7be(0x106)],_0x4c3dbd['freeGb']=_0x56e95f['freeGb'],_0x4c3dbd[_0x48a7be(0xe5)]=_0x56e95f[_0x48a7be(0xae)];}catch(_0x46d1a4){console[_0x48a7be(0x228)]('Error\x20getting\x20disk\x20usage',_0x46d1a4);}const _0x3e22c9={'usage':0x0,'count':0x0};try{_0x3e22c9['usage']=await _0x4cdd0d[_0x48a7be(0x14c)](),_0x3e22c9['count']=_0x4cdd0d[_0x48a7be(0x157)]();}catch(_0x5ed9f3){console[_0x48a7be(0x228)]('Error\x20getting\x20cpu\x20usage',_0x5ed9f3);}const _0x23fdc8={'os':'','platform':'','ip':'','uptime':0x0,'hostname':'','type':'','arch':'','who':'','whoami':'','vmstats':''};try{_0x23fdc8['os']=await _0x5565dd[_0x48a7be(0x160)](),_0x23fdc8['platform']=_0x5565dd[_0x48a7be(0x170)](),_0x23fdc8['ip']=_0x5565dd['ip'](),_0x23fdc8[_0x48a7be(0x151)]=_0x5565dd[_0x48a7be(0x151)](),_0x23fdc8[_0x48a7be(0x144)]=_0x5565dd[_0x48a7be(0x144)](),_0x23fdc8[_0x48a7be(0x1f1)]=_0x5565dd[_0x48a7be(0x1f1)](),_0x23fdc8[_0x48a7be(0x14a)]=_0x5565dd[_0x48a7be(0x14a)](),_0x23fdc8[_0x48a7be(0xc0)]=await osu[_0x48a7be(0x214)][_0x48a7be(0xc0)](),_0x23fdc8['whoami']=await osu['osCmd'][_0x48a7be(0x121)](),_0x23fdc8[_0x48a7be(0x203)]=await osu['osCmd']['vmstats']();}catch(_0x72e3c1){console[_0x48a7be(0x228)]('Error\x20getting\x20os\x20info',_0x72e3c1);}const _0x199b60={'totalProcesses':0x0,'zombieProcesses':0x0};try{_0x199b60['totalProcesses']=await osu[_0x48a7be(0xd4)][_0x48a7be(0x180)](),_0x199b60[_0x48a7be(0x1cf)]=await osu[_0x48a7be(0xd4)][_0x48a7be(0x1cf)]();}catch(_0xfc61b7){console[_0x48a7be(0x228)]('Error\x20getting\x20process\x20info',_0xfc61b7);}let _0x444e30={'usedMemPercentage':0x0,'usedMemMb':0x0,'totalMemMb':0x0};try{const _0x350d99=await _0x475973['info']();_0x444e30['usedMemPercentage']=_0x350d99[_0x48a7be(0x1fc)],_0x444e30['usedMemMb']=_0x350d99[_0x48a7be(0xca)]/0x400/0x400,_0x444e30[_0x48a7be(0x1a7)]=_0x350d99[_0x48a7be(0x225)]/0x400/0x400;}catch(_0x5c1bd8){console[_0x48a7be(0x228)]('Error\x20getting\x20memory\x20info',_0x5c1bd8);}let _0x47883d=0x0;try{_0x47883d=await conn[_0x48a7be(0x19e)]()['query']('SELECT\x20COUNT(*)\x20as\x20total\x20FROM\x20users')[_0x48a7be(0x1a2)](([_0x36c1a4])=>_0x36c1a4[0x0][_0x48a7be(0x225)]);}catch(_0x489b87){console[_0x48a7be(0x228)]('Error\x20getting\x20total\x20users',_0x489b87);}const _0x652522=getMonitoringData(),_0x34d72d=_0x652522[_0x48a7be(0x236)](_0x3f59a0=>_0x3f59a0[_0x48a7be(0x163)]!==null&&_0x3f59a0[_0x48a7be(0x163)]!==undefined),_0x41976d=_0x652522[_0x48a7be(0x236)](_0x24345d=>_0x24345d[_0x48a7be(0x1d7)]!==null&&_0x24345d[_0x48a7be(0x1d7)]!==undefined)[_0x48a7be(0xbc)](_0x4dfedd=>parseFloat(_0x4dfedd[_0x48a7be(0x1d7)][_0x48a7be(0x1f7)]('Kb')[_0x48a7be(0x1ea)]())),_0x1eb4ef=_0x34d72d[_0x48a7be(0x134)]((_0x3ed8a5,_0x5104a4)=>_0x3ed8a5+parseFloat(_0x5104a4['conversionTimeSpend']),0x0)/_0x34d72d[_0x48a7be(0x19c)],_0x875cfd=_0x41976d[_0x48a7be(0x134)]((_0x179817,_0x5112ca)=>_0x179817+_0x5112ca,0x0)/_0x41976d[_0x48a7be(0x19c)];_0x293f2e[_0x48a7be(0x1bf)]({'requestsPerSecond':counter['getStats'](),'diskUsage':_0x4c3dbd,'cpus':_0x3e22c9,'system':_0x23fdc8,'process':_0x199b60,'totalMonitoringData':_0x652522[_0x48a7be(0x19c)],'memory':_0x444e30,'totalUsers':_0x47883d,'avgConvertionTime':_0x1eb4ef,'avgMemoryUsage':_0x875cfd});}),router[a27_0x4d8ada(0x227)](a27_0x4d8ada(0x141),(_0x3031dd,_0x33c62c)=>{const _0x415781=a27_0x4d8ada;counter[_0x415781(0xf5)](),_0x33c62c[_0x415781(0x1bf)]({'message':'Counter\x20reset\x20successfully'});});const getMonitoringData=()=>{const _0x4e8652=a27_0x4d8ada,_0x2282b6=_0x4e8652(0x116);let _0x570c02=[];try{_0x570c02=JSON[_0x4e8652(0x136)](fs[_0x4e8652(0x209)](_0x2282b6));}catch(_0x302713){console['log'](_0x4e8652(0x208));}return _0x570c02;};router[a27_0x4d8ada(0x1fb)](a27_0x4d8ada(0x21a),async(_0xa69682,_0x1bb2cb)=>{const _0x39d529=a27_0x4d8ada,{page:page=0x1,limit:limit=0xa}=_0xa69682['query'],_0x4e8147=(page-0x1)*limit;try{const _0x23e373=getMonitoringData(),_0xb89bd2=_0x23e373[_0x39d529(0x19c)],_0x21e6c3=Math[_0x39d529(0x154)](_0xb89bd2/limit),_0x45ed13=_0x23e373['slice'](_0x4e8147,_0x4e8147+limit);_0x1bb2cb[_0x39d529(0x130)](0xc8)[_0x39d529(0x1bf)]({'data':_0x45ed13,'page':parseInt(''+page),'totalPages':_0x21e6c3,'total':_0xb89bd2});}catch(_0x81a323){console[_0x39d529(0x228)](_0x81a323),_0x1bb2cb[_0x39d529(0x130)](0x1f4)[_0x39d529(0x1bf)]({'error':_0x39d529(0x229)});}}),router[a27_0x4d8ada(0x20c)](a27_0x4d8ada(0xba),async(_0x4ac6fc,_0x384ebe)=>{const _0x3feda6=a27_0x4d8ada,_0x4ee624=_0x3feda6(0x116);try{fs[_0x3feda6(0x142)](_0x4ee624,JSON['stringify']([],null,0x4)),analyzeConverterFiles(),_0x384ebe[_0x3feda6(0x130)](0xc8)[_0x3feda6(0x1bf)]({'message':'Monitoring\x20file\x20cleaned.'});}catch(_0x220adc){console[_0x3feda6(0x228)](_0x220adc),_0x384ebe['status'](0x1f4)[_0x3feda6(0x1bf)]({'error':_0x3feda6(0x229)});}}),router[a27_0x4d8ada(0x1fb)](a27_0x4d8ada(0x1a6),async(_0x51cec7,_0x250318)=>{const _0x52760e=a27_0x4d8ada,_0x19a310=getHotConfig()[_0x52760e(0x1db)][_0x52760e(0x1f7)]('//','/'),{page:page=0x1,limit:limit=0xa}=_0x51cec7[_0x52760e(0x12b)],_0x2ab320=(page-0x1)*limit;try{const _0x896be7=_0x19a310+_0x52760e(0x223);console['log'](_0x896be7);const _0x406279=fs['readFileSync'](_0x896be7,'utf8'),_0x1fcabd=_0x406279[_0x52760e(0x1ca)]('\x0a'),_0x4b5871=[];_0x1fcabd[_0x52760e(0x18a)](_0x186142=>{const _0x4810ae=_0x52760e,_0x4c5739=_0x186142[_0x4810ae(0x1ca)](',');if(_0x4c5739[_0x4810ae(0x19c)]<0x4)return;const _0x37b751=_0x4c5739[0x0],_0x36e82f=_0x4c5739[0x1],_0x27e153=parseFloat(_0x4c5739[0x2]);_0x4b5871[_0x4810ae(0x224)]({'file':_0x37b751[_0x4810ae(0x1f7)]('\x22',''),'action':_0x36e82f,'timeSpend':_0x27e153,'memoryUsage':_0x4c5739[0x3]});});const _0x4d1398=_0x4b5871[_0x52760e(0x19c)],_0x385efb=Math[_0x52760e(0x154)](_0x4d1398/limit),_0x2e2e69=_0x4b5871['slice'](_0x2ab320,_0x2ab320+limit);_0x250318[_0x52760e(0x130)](0xc8)[_0x52760e(0x1bf)]({'data':_0x2e2e69,'page':parseInt(''+page),'totalPages':_0x385efb,'total':_0x4d1398});}catch(_0x25a0dc){console[_0x52760e(0x228)](_0x25a0dc),_0x250318[_0x52760e(0x130)](0x1f4)[_0x52760e(0x1bf)]({'error':_0x52760e(0x229)});}}),router[a27_0x4d8ada(0x1fb)](a27_0x4d8ada(0x107),async(_0x132a50,_0x5b0b77)=>{const _0x5027c7=a27_0x4d8ada,_0x17adac=path[_0x5027c7(0x149)](path[_0x5027c7(0xf4)](require[_0x5027c7(0x196)][_0x5027c7(0x1c3)]),_0x5027c7(0x216),_0x5027c7(0x15f));try{let _0x44ec38=0x0,_0x42b295=0x0;function _0x5426de(_0x13c4ba){const _0xe5f135=_0x5027c7;let _0x19c4d8=0x0,_0x2b19e0=0x0;if(fs[_0xe5f135(0xf3)](_0x13c4ba)){const _0x42e8c4=fs[_0xe5f135(0x1f5)](_0x13c4ba);_0x2b19e0=0x0;for(const _0x52bbec of _0x42e8c4){const _0x5aa58b=path[_0xe5f135(0x149)](_0x13c4ba,_0x52bbec),_0x303e01=fs[_0xe5f135(0x1ff)](_0x5aa58b);if(_0x303e01[_0xe5f135(0x215)]()&&_0x52bbec!==_0xe5f135(0x146))_0x2b19e0++,_0x19c4d8+=_0x303e01[_0xe5f135(0x159)];else{if(_0x303e01[_0xe5f135(0x181)]()){}}}}return{'size':_0x19c4d8,'count':_0x2b19e0};}const _0x50b287=_0x5426de(_0x17adac);_0x44ec38=_0x50b287[_0x5027c7(0x159)],_0x42b295=_0x50b287[_0x5027c7(0x157)],_0x5b0b77[_0x5027c7(0x1bf)]({'fileCount':_0x42b295,'totalSize':_0x44ec38});}catch(_0x4eeaa0){console[_0x5027c7(0x1a0)]('Error\x20getting\x20cache\x20stats:',_0x4eeaa0),_0x5b0b77[_0x5027c7(0x130)](0x1f4)[_0x5027c7(0x1bf)]({'error':_0x5027c7(0x122)});}}),router[a27_0x4d8ada(0x20c)](a27_0x4d8ada(0x1b1),async(_0x346978,_0x245c8d)=>{const _0x3d2fb7=a27_0x4d8ada,_0x14cd58=path['join'](path['dirname'](require[_0x3d2fb7(0x196)][_0x3d2fb7(0x1c3)]),'converters',_0x3d2fb7(0x15f));try{function _0x55a0e9(_0x2cf780){const _0x1f529f=_0x3d2fb7;if(fs[_0x1f529f(0xf3)](_0x2cf780)){const _0x1d9eee=fs[_0x1f529f(0x1f5)](_0x2cf780);for(const _0x363073 of _0x1d9eee){const _0x2c938f=path['join'](_0x2cf780,_0x363073),_0x7f6ebe=fs['statSync'](_0x2c938f);if(_0x7f6ebe[_0x1f529f(0x181)]()){}else _0x363073!==_0x1f529f(0x146)&&fs[_0x1f529f(0xb3)](_0x2c938f);}}}_0x55a0e9(_0x14cd58),analyzeConverterFiles(),_0x245c8d[_0x3d2fb7(0x1bf)]({'message':'Cache\x20flushed\x20successfully'});}catch(_0x19094b){console[_0x3d2fb7(0x1a0)](_0x3d2fb7(0x220),_0x19094b),_0x245c8d[_0x3d2fb7(0x130)](0x1f4)[_0x3d2fb7(0x1bf)]({'error':'Failed\x20to\x20flush\x20cache'});}}),router['get'](a27_0x4d8ada(0xc2),async(_0x404036,_0x2c60b8)=>{const _0x5b4c9d=a27_0x4d8ada;_0x2c60b8['sendFile'](path[_0x5b4c9d(0x149)](path['dirname'](require[_0x5b4c9d(0x196)][_0x5b4c9d(0x1c3)]),'cadviewer/settings/cache-stats.js'));}),router[a27_0x4d8ada(0x1fb)](a27_0x4d8ada(0x128),protectedRoute,async(_0x35d8f5,_0x21cf35)=>{const _0x469ec3=a27_0x4d8ada,_0x2251bd=fs[_0x469ec3(0x209)](path['join'](path['dirname'](require['main'][_0x469ec3(0x1c3)]),_0x469ec3(0x22b)),_0x469ec3(0xda)),_0x2d2d92=_0x2251bd[_0x469ec3(0x1f7)](_0x469ec3(0x1e9),_0x35d8f5[_0x469ec3(0xf2)]);_0x21cf35[_0x469ec3(0x1c4)](_0x2d2d92);}),router[a27_0x4d8ada(0x1fb)](a27_0x4d8ada(0x13d),async(_0x27ba0b,_0x164813)=>{const _0x2103ea=a27_0x4d8ada,{page:page=0x1,limit:limit=0x10}=_0x27ba0b[_0x2103ea(0x12b)],_0x2ac4fb=JSON['parse'](fs['readFileSync'](path[_0x2103ea(0x149)](path[_0x2103ea(0xf4)](require['main'][_0x2103ea(0x1c3)]),_0x2103ea(0xe3)))),_0x10b381=(page-0x1)*limit,_0x4a4801=page*limit,_0xce7784=_0x2ac4fb['files'][_0x2103ea(0x19c)],_0x19224e=Math[_0x2103ea(0x154)](_0xce7784/limit),_0x48b353=_0x2ac4fb['files'][_0x2103ea(0x16c)](_0x10b381,_0x4a4801);_0x164813[_0x2103ea(0x1bf)]({'files':_0x48b353,'pagination':{'total':_0xce7784,'totalPages':_0x19224e,'currentPage':parseInt(page),'limit':parseInt(limit)}});return;}),router['get'](a27_0x4d8ada(0xcf),async(_0x18764a,_0x4eb8df)=>{const _0xb9a047=a27_0x4d8ada,{file:_0x219726}=_0x18764a[_0xb9a047(0xe2)],_0x2aafa7=path[_0xb9a047(0x149)](path[_0xb9a047(0xf4)](require[_0xb9a047(0x196)][_0xb9a047(0x1c3)]),'converters',_0xb9a047(0x15f)),_0x26411b=path['join'](_0x2aafa7,_0x219726),_0x54811e=fs[_0xb9a047(0x209)](_0x26411b,_0xb9a047(0xda)),_0x259d59=_0x54811e[_0xb9a047(0x1ca)]('\x0a'),_0x296701=_0x259d59[_0xb9a047(0xbc)](_0x5df028=>{const _0x5f43f0=_0xb9a047,_0x4ddee7=_0x5df028[_0x5f43f0(0x1ca)](',');return _0x4ddee7[_0x5f43f0(0xbc)](_0x4095f4=>_0x4095f4[_0x5f43f0(0x1f7)]('\x22',''));});_0x4eb8df[_0xb9a047(0x1bf)](_0x296701);}),router['get']('/cache/files/:id',async(_0x45cc84,_0x3ded1a)=>{const _0x551302=a27_0x4d8ada,{id:_0x58ea3a}=_0x45cc84[_0x551302(0xe2)],_0x5e08d2=path[_0x551302(0x149)](path['dirname'](require['main']['filename']),_0x551302(0x216),_0x551302(0x15f)),_0x419366=path[_0x551302(0x149)](_0x5e08d2,_0x58ea3a);if(_0x419366[_0x551302(0x235)](_0x551302(0xfb))){var _0x549a33=require('zlib');const _0x4eb788=fs['readFileSync'](_0x419366),_0x5479aa=_0x549a33[_0x551302(0x182)](_0x4eb788);_0x3ded1a['setHeader'](_0x551302(0xad),_0x551302(0x19a)),_0x3ded1a['send'](_0x5479aa);}else _0x3ded1a[_0x551302(0x1a9)](_0x419366);}),router[a27_0x4d8ada(0x20c)]('/cache/files/:id',async(_0x3c5125,_0x46d3b1)=>{const _0x3edd24=a27_0x4d8ada,{id:_0x1181ed}=_0x3c5125[_0x3edd24(0xe2)],_0x59d3ef=path[_0x3edd24(0x149)](path[_0x3edd24(0xf4)](require[_0x3edd24(0x196)][_0x3edd24(0x1c3)]),_0x3edd24(0x216),_0x3edd24(0x15f)),_0x19c908=JSON[_0x3edd24(0x136)](fs[_0x3edd24(0x209)](path['join'](path['dirname'](require[_0x3edd24(0x196)][_0x3edd24(0x1c3)]),_0x3edd24(0xe3)))),_0x3fd439=_0x19c908[_0x3edd24(0x15f)][_0x3edd24(0x124)](_0x325f18=>_0x325f18[_0x3edd24(0x1ce)]===_0x1181ed);if(_0x3fd439){try{fs[_0x3edd24(0xf3)](path[_0x3edd24(0x149)](_0x59d3ef,_0x3fd439[_0x3edd24(0x1ce)]))&&fs[_0x3edd24(0xb3)](path['join'](_0x59d3ef,_0x3fd439[_0x3edd24(0x1ce)]));}catch(_0x4b1b50){console[_0x3edd24(0x228)](_0x3edd24(0xbb),{'e':_0x4b1b50});}(_0x3fd439[_0x3edd24(0x195)]??[])[_0x3edd24(0x18a)](_0x289176=>{const _0x25ee75=_0x3edd24;try{fs[_0x25ee75(0xf3)](path[_0x25ee75(0x149)](_0x59d3ef,_0x289176['id']))&&fs['unlinkSync'](path[_0x25ee75(0x149)](_0x59d3ef,_0x289176['id']));}catch(_0x3c9435){console[_0x25ee75(0x228)]('Error\x20deleting\x20file',{'e':_0x3c9435});}});}analyzeConverterFiles(),_0x46d3b1[_0x3edd24(0x1bf)]({'message':_0x3edd24(0x169)});});function a27_0x1f59(_0x2a1131,_0x32fa34){const _0x3c1a08=a27_0x3c1a();return a27_0x1f59=function(_0x1f5971,_0x42bb0b){_0x1f5971=_0x1f5971-0xa5;let _0x46a7f2=_0x3c1a08[_0x1f5971];return _0x46a7f2;},a27_0x1f59(_0x2a1131,_0x32fa34);}const deleteOldDemoUsers=async()=>{const _0x3050fe=a27_0x4d8ada;console[_0x3050fe(0x228)](_0x3050fe(0x185));const _0x427979=config[_0x3050fe(0x205)],_0x58f30e=_0x3050fe(0xce);try{const [_0x15c6f3]=await conn[_0x3050fe(0x19e)]()[_0x3050fe(0xc7)](_0x58f30e,[_0x427979]),_0x34fdc9=_0x15c6f3[_0x3050fe(0xbc)](_0x1a3ece=>_0x1a3ece['folder_name']),_0x16db9a=_0x15c6f3[_0x3050fe(0xbc)](_0x5c62e2=>_0x5c62e2['email']);console['log'](_0x16db9a),await conn['promise']()[_0x3050fe(0xc7)](_0x3050fe(0x1e7),[_0x427979]),_0x34fdc9[_0x3050fe(0x18a)](_0x1b1dfd=>{const _0x9ea26=_0x3050fe;try{const _0x814303='./uploads/'+_0x1b1dfd;cleanCacheForUserFiles(_0x814303),fs[_0x9ea26(0x1af)](_0x814303);}catch(_0x30e7db){console[_0x9ea26(0x1a0)](_0x9ea26(0x14b),_0x30e7db);}}),console['log']('Old\x20demo_user\x20accounts\x20('+_0x15c6f3[_0x3050fe(0x19c)]+_0x3050fe(0x1b5)+_0x427979+_0x3050fe(0xe9));}catch(_0x1114f5){console[_0x3050fe(0x1a0)]('Error\x20deleting\x20old\x20demo_user\x20accounts:',_0x1114f5);}};schedule[a27_0x4d8ada(0x20e)](a27_0x4d8ada(0x110),deleteOldDemoUsers),router[a27_0x4d8ada(0x1fb)](a27_0x4d8ada(0x1b8),protectedRoute,async(_0xf63c6e,_0x523997)=>{const _0x415411=a27_0x4d8ada,_0x1f60b0=fs[_0x415411(0x209)](path['join'](path[_0x415411(0xf4)](require[_0x415411(0x196)]['filename']),_0x415411(0x18e)),_0x415411(0xda)),_0x4b8fde=_0x1f60b0[_0x415411(0x1f7)](_0x415411(0x1e9),_0xf63c6e['version']);_0x523997[_0x415411(0x1c4)](_0x4b8fde);});const exportUsersList=async()=>{const _0x272440=a27_0x4d8ada;console[_0x272440(0x228)](_0x272440(0x1a8));const _0x2d796e=path[_0x272440(0x149)](path['dirname'](require['main'][_0x272440(0x1c3)]),_0x272440(0x226));!fs[_0x272440(0xf3)](_0x2d796e)&&fs[_0x272440(0x162)](_0x2d796e);const _0x5abb95=config['usersExportFrequency']||_0x272440(0x1cc);let _0x1e2294;const _0x3cca60=path[_0x272440(0x149)](_0x2d796e,_0x272440(0x20a));if(fs['existsSync'](_0x3cca60))try{const _0x2e51d9=JSON[_0x272440(0x136)](fs['readFileSync'](_0x3cca60,_0x272440(0xda)));_0x1e2294=new Date(_0x2e51d9[_0x272440(0x188)]);}catch(_0x4c2ee7){console[_0x272440(0x1a0)](_0x272440(0x17e),_0x4c2ee7),_0x1e2294=calculateDefaultLastExportDate(_0x5abb95);}else _0x1e2294=calculateDefaultLastExportDate(_0x5abb95);const _0x505e91=new Date(),_0x54109c=_0x505e91[_0x272440(0x16e)]()+'-'+String(_0x505e91[_0x272440(0xd6)]()+0x1)[_0x272440(0x15b)](0x2,'0')+'-'+String(_0x505e91[_0x272440(0x1f3)]())[_0x272440(0x15b)](0x2,'0'),_0x14aba6=_0x272440(0x165)+_0x54109c+_0x272440(0x13f),_0x123d2b=path['join'](_0x2d796e,_0x14aba6);try{const _0x3516aa=_0x272440(0xdf),[_0x40362d]=await conn[_0x272440(0x19e)]()[_0x272440(0xc7)](_0x3516aa,[_0x1e2294]);if(_0x40362d['length']===0x0){console['log'](_0x272440(0x23a));return;}let _0x80dd9=_0x272440(0x22e);_0x40362d[_0x272440(0x18a)](_0x4c87a4=>{const _0x416fa3=_0x272440,_0x3e73a9=_0x4c87a4['email']?'\x22'+_0x4c87a4[_0x416fa3(0x1d5)][_0x416fa3(0x16b)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x4b4068=_0x4c87a4[_0x416fa3(0x193)]?'\x22'+_0x4c87a4[_0x416fa3(0x193)][_0x416fa3(0x16b)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x586aff=_0x4c87a4[_0x416fa3(0x127)]?'\x22'+_0x4c87a4[_0x416fa3(0x127)]['replace'](/"/g,'\x22\x22')+'\x22':'\x22\x22';_0x80dd9+=_0x3e73a9+','+_0x4b4068+','+_0x586aff+'\x0a';}),fs[_0x272440(0x142)](_0x123d2b,_0x80dd9),console[_0x272440(0x228)](_0x272440(0xdb)+_0x40362d[_0x272440(0x19c)]+'\x20users\x20to\x20'+_0x123d2b);const _0x48ff97={'lastExportDate':_0x505e91[_0x272440(0x17c)](),'fileName':_0x14aba6,'userCount':_0x40362d[_0x272440(0x19c)]};fs[_0x272440(0x142)](_0x3cca60,JSON[_0x272440(0xd8)](_0x48ff97,null,0x2));}catch(_0x5c6303){console[_0x272440(0x1a0)](_0x272440(0xbf),_0x5c6303);}},calculateDefaultLastExportDate=_0x2c1ab7=>{const _0x3f6df8=a27_0x4d8ada,_0x6f7fad=new Date();return _0x2c1ab7===_0x3f6df8(0x20b)?_0x6f7fad[_0x3f6df8(0x15c)](_0x6f7fad['getDate']()-0xe):_0x6f7fad[_0x3f6df8(0x190)](_0x6f7fad[_0x3f6df8(0xd6)]()-0x1),_0x6f7fad;};router[a27_0x4d8ada(0x1fb)](a27_0x4d8ada(0x14e),async(_0x4db629,_0x4708d3)=>{const _0x4b79f8=a27_0x4d8ada,_0x185dbe=path[_0x4b79f8(0x149)](path[_0x4b79f8(0xf4)](require[_0x4b79f8(0x196)][_0x4b79f8(0x1c3)]),'exports');if(!fs['existsSync'](_0x185dbe))return _0x4708d3[_0x4b79f8(0x130)](0xc8)[_0x4b79f8(0x1bf)]({'exports':[]});try{const _0x5b944e=fs[_0x4b79f8(0x1f5)](_0x185dbe)[_0x4b79f8(0x236)](_0x5471f1=>_0x5471f1[_0x4b79f8(0xd3)](_0x4b79f8(0x165))&&_0x5471f1[_0x4b79f8(0x235)]('.csv'))[_0x4b79f8(0xbc)](_0x2540db=>{const _0x538048=_0x4b79f8,_0x272a84=path[_0x538048(0x149)](_0x185dbe,_0x2540db),_0x3a52d5=fs[_0x538048(0x1ff)](_0x272a84),_0x5e532f=fs[_0x538048(0x209)](_0x272a84,_0x538048(0xda)),_0x21c459=_0x5e532f[_0x538048(0x1ca)]('\x0a')[_0x538048(0x19c)]-0x1;return{'fileName':_0x2540db,'createdAt':_0x3a52d5[_0x538048(0xc1)],'userCount':_0x21c459};})[_0x4b79f8(0x1e4)]((_0x1c6ef3,_0x3cbb9)=>_0x3cbb9['createdAt']-_0x1c6ef3[_0x4b79f8(0xaa)]);_0x4708d3['status'](0xc8)[_0x4b79f8(0x1bf)]({'exports':_0x5b944e});}catch(_0x1703d7){console[_0x4b79f8(0x1a0)](_0x4b79f8(0x118),_0x1703d7),_0x4708d3['status'](0x1f4)[_0x4b79f8(0x1bf)]({'error':_0x4b79f8(0x1df)});}}),router['post'](a27_0x4d8ada(0x202),async(_0x578f81,_0x41c5a1)=>{const _0x4edbf2=a27_0x4d8ada;try{await exportUsersList(),_0x41c5a1['status'](0xc8)['json']({'message':_0x4edbf2(0x21b)});}catch(_0x12397c){console[_0x4edbf2(0x1a0)](_0x4edbf2(0xa9),_0x12397c),_0x41c5a1['status'](0x1f4)[_0x4edbf2(0x1bf)]({'error':_0x4edbf2(0xab)});}}),router[a27_0x4d8ada(0x1fb)](a27_0x4d8ada(0x194),async(_0x33b6fd,_0x21a5fc)=>{const _0x2e4583=a27_0x4d8ada,{fileName:_0x4485f5}=_0x33b6fd[_0x2e4583(0xe2)],_0x5ecb8b=path['join'](path['dirname'](require[_0x2e4583(0x196)][_0x2e4583(0x1c3)]),_0x2e4583(0x226),_0x4485f5);if(!fs[_0x2e4583(0xf3)](_0x5ecb8b))return _0x21a5fc[_0x2e4583(0x130)](0x194)[_0x2e4583(0x1bf)]({'error':'Export\x20file\x20not\x20found'});_0x21a5fc[_0x2e4583(0x21f)](_0x5ecb8b);});const cleanCacheForUserFiles=_0x4329cb=>{const _0x12672d=a27_0x4d8ada;try{if(!fs[_0x12672d(0xf3)](_0x4329cb)){console[_0x12672d(0x228)](_0x12672d(0xac)+_0x4329cb+_0x12672d(0x111));return;}const _0x1eca44=path[_0x12672d(0x149)](path[_0x12672d(0xf4)](require[_0x12672d(0x196)]['filename']),'converters','files');if(!fs['existsSync'](_0x1eca44)){console[_0x12672d(0x228)](_0x12672d(0x164)+_0x1eca44+_0x12672d(0x111));return;}const _0x15d8c2=JSON[_0x12672d(0x136)](fs[_0x12672d(0x209)](path[_0x12672d(0x149)](path['dirname'](require[_0x12672d(0x196)]['filename']),_0x12672d(0xe3)))),_0x9e0b4b=fs[_0x12672d(0x1f5)](_0x4329cb);_0x9e0b4b[_0x12672d(0x18a)](_0x2428ca=>{const _0x129242=_0x12672d;_0x15d8c2[_0x129242(0x15f)][_0x129242(0x18a)](_0x145cf4=>{const _0x3371d3=_0x129242;_0x145cf4[_0x3371d3(0x1eb)]===_0x2428ca&&_0x145cf4[_0x3371d3(0x195)][_0x3371d3(0x18a)](_0x407887=>{const _0xf54a87=_0x3371d3;try{fs[_0xf54a87(0xb3)](path[_0xf54a87(0x149)](_0x1eca44,_0x407887['id']));}catch(_0x5e1666){console[_0xf54a87(0x1a0)](_0xf54a87(0x178)+_0x407887['id']+':',_0x5e1666);}});});}),analyzeConverterFiles(),console[_0x12672d(0x228)](_0x12672d(0x1e5)+_0x4329cb);}catch(_0x40b26c){console[_0x12672d(0x1a0)](_0x12672d(0x1d8),_0x40b26c);}};schedule['scheduleJob'](a27_0x4d8ada(0x103),exportUsersList),schedule[a27_0x4d8ada(0x20e)](a27_0x4d8ada(0x221),sendFollowUpEmails),schedule[a27_0x4d8ada(0x20e)](a27_0x4d8ada(0xd7),sendAccountDeletionPreventionEmails);const analyzeConverterFiles=()=>{const _0x546b56=a27_0x4d8ada;try{const _0x557375=path[_0x546b56(0x149)](path[_0x546b56(0xf4)](require[_0x546b56(0x196)]['filename']),_0x546b56(0x216),_0x546b56(0x15f)),_0x592c36=path[_0x546b56(0x149)](path[_0x546b56(0xf4)](require['main'][_0x546b56(0x1c3)]),'cadviewer',_0x546b56(0x1b6));if(!fs[_0x546b56(0xf3)](_0x557375)){logStream[_0x546b56(0xeb)](_0x546b56(0x206)+_0x557375+_0x546b56(0xf6));return;}if(!fs[_0x546b56(0xf3)](_0x592c36)){logStream[_0x546b56(0xeb)](_0x546b56(0x206)+_0x592c36+_0x546b56(0xf6));return;}const _0x51f067=fs['readdirSync'](_0x557375),_0x3f3e1f={};_0x51f067[_0x546b56(0x18a)](_0x5ee4b0=>{const _0x4a0305=_0x546b56,_0x5cb7d3=path[_0x4a0305(0x149)](_0x557375,_0x5ee4b0),_0x150eed=fs['statSync'](_0x5cb7d3),_0x4666f1=_0x5ee4b0[_0x4a0305(0x1ca)]('.'),_0x1d88ca=_0x4666f1[_0x4a0305(0x16c)](0x0,-0x1)[_0x4a0305(0x236)]((_0x391789,_0x3a3f3b)=>!([_0x4a0305(0x135),'rl'][_0x4a0305(0xee)](_0x391789[_0x4a0305(0x131)]())&&_0x3a3f3b===_0x4666f1[_0x4a0305(0x19c)]-0x2))[_0x4a0305(0x149)]('.');!Object[_0x4a0305(0xde)](_0x3f3e1f)[_0x4a0305(0xee)](_0x1d88ca)?_0x3f3e1f[_0x1d88ca]=[{'file':_0x5ee4b0,'stats':_0x150eed}]:_0x3f3e1f[_0x1d88ca][_0x4a0305(0x224)]({'file':_0x5ee4b0,'stats':_0x150eed});});const _0x23f3b5=[];_0x51f067[_0x546b56(0x18a)](_0x1d6c0a=>{const _0x5b54ee=_0x546b56;if(!_0x1d6c0a[_0x5b54ee(0x235)]('.dwg.json'))return;let _0x4372e6=_0x1d6c0a;const _0x1fcb19=path['join'](_0x557375,_0x1d6c0a),_0x2d374d=fs[_0x5b54ee(0x1ff)](_0x1fcb19);let _0x51964f=_0x2d374d['size'],_0x2c205b='';const _0x431a9d=fs['readFileSync'](_0x1fcb19,_0x5b54ee(0xda)),_0x47c01e=JSON[_0x5b54ee(0x136)](_0x431a9d),_0x1847da=_0x47c01e['cachedfiles']?.['map'](_0x465d89=>_0x465d89[_0x5b54ee(0x201)])??[];if(_0x47c01e[_0x5b54ee(0x1c3)])_0x4372e6=_0x47c01e['filename'];const _0x3b33fb=_0x1d6c0a[_0x5b54ee(0x1ca)]('.'),_0x3c999e=_0x3b33fb[_0x5b54ee(0x16c)](0x0,-0x1)[_0x5b54ee(0x236)]((_0x49ea7a,_0x53dbf5)=>!(['dwg','rl'][_0x5b54ee(0xee)](_0x49ea7a[_0x5b54ee(0x131)]())&&_0x53dbf5===_0x3b33fb[_0x5b54ee(0x19c)]-0x2))[_0x5b54ee(0x149)]('.'),_0x5bedad=Object[_0x5b54ee(0xde)](_0x3f3e1f)[_0x5b54ee(0xee)](_0x3c999e)?_0x3f3e1f[_0x3c999e]:[];for(const _0x4f59c5 of _0x1847da){Object[_0x5b54ee(0xde)](_0x3f3e1f)[_0x5b54ee(0xee)](_0x4f59c5)&&_0x5bedad['push'](..._0x3f3e1f[_0x4f59c5]);}const _0x5159d9=_0x5bedad[_0x5b54ee(0xbc)](({file:_0x52e3c4,stats:_0x319093})=>{const _0x3c7b7a=_0x5b54ee;return!_0x52e3c4[_0x3c7b7a(0x235)](_0x3c7b7a(0x173))&&(_0x51964f+=_0x319093[_0x3c7b7a(0x159)]),{'id':_0x52e3c4,'name':_0x52e3c4[_0x3c7b7a(0x235)](_0x3c7b7a(0x139))?'SVG':_0x52e3c4[_0x3c7b7a(0x235)](_0x3c7b7a(0xfb))?_0x3c7b7a(0x104):_0x52e3c4[_0x3c7b7a(0x235)](_0x3c7b7a(0x1d1))?_0x3c7b7a(0x175):_0x52e3c4[_0x3c7b7a(0x235)](_0x3c7b7a(0x147))?'JSON':_0x52e3c4[_0x3c7b7a(0x235)]('.csv')?'CSV':_0x52e3c4[_0x3c7b7a(0x235)](_0x3c7b7a(0x200))?_0x3c7b7a(0x1bb):_0x52e3c4[_0x3c7b7a(0x1ca)]('.')[_0x3c7b7a(0x1b2)]()[_0x3c7b7a(0x114)](),'color':_0x52e3c4['endsWith'](_0x3c7b7a(0x139))||_0x52e3c4[_0x3c7b7a(0x235)](_0x3c7b7a(0xfb))?_0x3c7b7a(0xf9):_0x52e3c4['endsWith']('.pdf')?_0x3c7b7a(0xc3):_0x52e3c4[_0x3c7b7a(0x235)](_0x3c7b7a(0x147))?_0x3c7b7a(0x1ba):_0x52e3c4['endsWith']('.csv')?_0x3c7b7a(0x22a):_0x52e3c4[_0x3c7b7a(0x235)](_0x3c7b7a(0x200))?_0x3c7b7a(0x1c6):'purple'};});if(_0x5159d9[_0x5b54ee(0x11d)](_0x3bc908=>_0x3bc908['id'][_0x5b54ee(0xee)](_0x5b54ee(0x138))))_0x2c205b=_0x5b54ee(0x197);else{if(_0x5159d9[_0x5b54ee(0x11d)](_0x48a38a=>[_0x5b54ee(0x158),_0x5b54ee(0x22c)][_0x5b54ee(0xee)](_0x48a38a['id'][_0x5b54ee(0x1ca)]('.')[_0x5b54ee(0x1b2)]()))&&_0x5159d9[_0x5b54ee(0x11d)](_0x26e202=>[_0x5b54ee(0x199)][_0x5b54ee(0xee)](_0x26e202['id'][_0x5b54ee(0x1ca)]('.')[_0x5b54ee(0x1b2)]())))_0x2c205b=_0x5b54ee(0xed);else{if(_0x5159d9['some'](_0x3434e1=>['svg',_0x5b54ee(0x22c)]['includes'](_0x3434e1['id'][_0x5b54ee(0x1ca)]('.')[_0x5b54ee(0x1b2)]())))_0x2c205b=_0x5b54ee(0x1fe);else{if(_0x5159d9[_0x5b54ee(0x11d)](_0x5d42c7=>[_0x5b54ee(0x1bf)]['includes'](_0x5d42c7['id']['split']('.')[_0x5b54ee(0x1b2)]()))&&_0x5159d9[_0x5b54ee(0x11d)](_0x24aa17=>[_0x5b54ee(0x135)][_0x5b54ee(0xee)](_0x24aa17['id']['split']('.')[_0x5b54ee(0x1b2)]())))_0x2c205b=_0x5b54ee(0x187);else{if(_0x5159d9[_0x5b54ee(0x11d)](_0x5a50d3=>[_0x5b54ee(0x1ef)]['includes'](_0x5a50d3['id'][_0x5b54ee(0x1ca)]('.')[_0x5b54ee(0x1b2)]())))_0x2c205b=_0x5b54ee(0xbd);else{if(_0x5159d9[_0x5b54ee(0x11d)](_0x4d4700=>['json'][_0x5b54ee(0xee)](_0x4d4700['id'][_0x5b54ee(0x1ca)]('.')['pop']()))&&!_0x5159d9[_0x5b54ee(0x11d)](_0x44109c=>[_0x5b54ee(0x135)][_0x5b54ee(0xee)](_0x44109c['id'][_0x5b54ee(0x1ca)]('.')[_0x5b54ee(0x1b2)]())))_0x2c205b=_0x5b54ee(0xb0);else _0x5159d9['some'](_0x5492d8=>[_0x5b54ee(0x1bf)][_0x5b54ee(0xee)](_0x5492d8['id'][_0x5b54ee(0x1ca)]('.')[_0x5b54ee(0x1b2)]()))&&(_0x2c205b=_0x5b54ee(0xfe));}}}}}_0x23f3b5[_0x5b54ee(0x224)]({'name':_0x1d6c0a,'goodFileName':_0x4372e6,'size':_0x51964f,'createdAt':_0x2d374d[_0x5b54ee(0xc1)],'updatedAt':_0x2d374d[_0x5b54ee(0x13c)],'readAt':_0x2d374d[_0x5b54ee(0x183)],'action':_0x2c205b,'availableFormats':_0x5159d9});}),_0x23f3b5[_0x546b56(0x1e4)]((_0xb1fa17,_0x41ba8d)=>_0x41ba8d[_0x546b56(0x1e8)]-_0xb1fa17['updatedAt']);const _0x38f2c5={'timestamp':new Date(),'totalFiles':_0x23f3b5['length'],'files':_0x23f3b5},_0x3f4859=path[_0x546b56(0x149)](_0x592c36,_0x546b56(0x1f0));fs['writeFileSync'](_0x3f4859,JSON[_0x546b56(0xd8)](_0x38f2c5,null,0x2));}catch(_0x242737){console[_0x546b56(0x228)](_0x546b56(0x1ae)),console[_0x546b56(0x228)]('Erreur\x20lors\x20de\x20l\x27analyse\x20des\x20fichiers\x20du\x20dossier\x20converters/files:\x20'+_0x242737[_0x546b56(0x211)]);}},scheduleFileAnalysis=()=>{const _0x188515=a27_0x4d8ada;analyzeConverterFiles(),schedule[_0x188515(0x20e)](_0x188515(0x1ab),analyzeConverterFiles),logStream[_0x188515(0xeb)](_0x188515(0x1ee));};function a27_0x3c1a(){const _0x1e4ecf=['Error\x20flushing\x20cache:','0\x20*\x20*\x20*\x20*','../libs/mysql.js','memorydata.csv','push','total','exports','post','log','Error!\x20Something\x20went\x20wrong.','green','cadviewer/settings/conversion-cache.html','svgz','cvjs_svgz_compress','email,firstname,lastname\x0a','../libs/config','.log\x22','test','/restapi-test','logs','CADViewer_config.json','endsWith','filter','mimetype','fileLoad_Password','role','No\x20new\x20users\x20to\x20export\x20for\x20Google\x20Ads','Folder\x20not\x20found.','Content-Disposition','mysqlUsername','/converters/files/print/','SELECT\x20*\x20FROM\x20users','cadviewer/settings/home.html','Error\x20triggering\x20Users\x20export:','createdAt','Failed\x20to\x20trigger\x20export','Directory\x20','Content-Type','totalGb','globalBearerAutentication','DWG\x20file\x20in\x20multiple\x20files','An\x20error\x20occurred\x20while\x20checking.','express-basic-auth','unlinkSync','callbackMethod_gatewayUrl','/users/flush-dir','DwgMerge\x20Settings','Database\x20Settings','User\x20updated\x20successfully','cadviewer/settings/folders.html','/conversion/clean','Error\x20deleting\x20file','map','DWG\x20to\x20PDF\x20Conversion','mysqlPassword','Error\x20exporting\x20users\x20for\x20Google\x20Ads:','who','birthtime','/cache-stats.js','red','/users','Read\x20and\x20write\x20permission\x20for\x20folder\x20','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?','execute','cadviewer/settings/chart.min.js','../libs/log','used','./tmp','\x20KB','unlink','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','/cache/csv/:file','fileLoad_UserName','callbackMethod','../libs/email-utils','startsWith','proc','ContentSecurityPolicyReportOnly','getMonth','0\x200\x20*\x20*\x20*','stringify','AutoXchange\x20Settings','utf8','Exported\x20','folderLocation','formatedSize','keys','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20email,\x20first_name,\x20last_name,\x20created_at\x20\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20>\x20?\x20\x0a\x20\x20\x20\x20\x20\x20ORDER\x20BY\x20created_at\x20DESC\x0a\x20\x20\x20\x20','diskStorage','linklist_executable_windows','params','cadviewer/settings/converter-files-analysis.json','renameSync','totalGB','R_OK','cadviewer/settings/style.css','linklist_executable','\x20days\x20have\x20been\x20deleted.','/converters/files/','write','Error\x20updating\x20config','DWG\x20to\x20SVG\x20Conversion','includes','/config/global-update','`is_enabled`\x20=\x20?,\x20`role`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','Folder\x20deleted.','version','existsSync','dirname','reset','\x20n\x27existe\x20pas.','/doctor','dwgmerge_executable_windows','yellow','dwgmerge_executable','.svgz','User\x20with\x20that\x20email\x20or\x20username\x20already\x20exists','228607tkBOnx','Cache\x20conversion','put','hash','linklistLocation','cadviewer/settings/licences.html','0\x2023\x20*\x20*\x20*','SVGZ','\x22\x20executable','usedGb','/cache/stats','demo_user','converterpathWin','/metrics','875434EDORfV','cadviewer/settings/doctor.html','fileLocationUrl','folderName','avatars/','0\x201\x20*\x20*\x20*','\x20does\x20not\x20exist.','readFile','autoxchange_executable_linux','toUpperCase','Error\x20saving\x20parameters.','cadviewer/settings/requests-callapiconversion-monitoring.json','application/octet-stream','Error\x20getting\x20Users\x20export\x20export\x20history:','call-Api_Conversion_','/tailwind.js','dwgmerge_executable_linux','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','some','User\x20created\x20successfully','callbackMethod_gatewayUrl_flag','autoxchange_executable','whoami','Failed\x20to\x20get\x20cache\x20stats','./uploads/','find','Server\x20Settings','linklist_executable_linux','last_name','/cache','Error\x20creating\x20folder.','3810128OBCCsy','query','/vanilla-toast.js','avatar','boolean','tmp','status','toLocaleLowerCase','1778694NXTUgg','rmSync','reduce','dwg','parse','splity','.rl.json','.svg','Folder\x20already\x20exists.','\x20MB','ctime','/cache/files','X_OK','.csv','toFixed','/metrics/reset','writeFileSync','cadviewer/settings/tailwind.js','hostname','/folders','.gitkeep','.json','1747260oZMsaf','join','arch','Error\x20deleting\x20user\x20folder:','usage','File\x20deleted.','/users-export/history','/icons.js','windows','uptime','all','mode','ceil','https','catch','count','svg','size','originalname','padStart','setDate','globalBearerAutenticationToken','sub_dirs','files','oos','\x22exec\x22\x20command\x20activated\x20on\x20NodeJS','mkdirSync','conversionTimeSpend','Cache\x20directory\x20','users-export-','info','setHeader','folder_name','File\x20deleted\x20successfully','Error\x20finding\x20log\x20files:','replace','slice','/doctor/check','getFullYear','File\x20or\x20Folder\x20not\x20found','platform','path','Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_','.dwg.json','mem','PDF','standard','copyFileSync','Error\x20deleting\x20cache\x20file\x20','multer','cadviewer/settings/logs.html','isFolder','toISOString','ServerPort','Error\x20reading\x20last\x20export\x20info:','node-os-utils','totalProcesses','isDirectory','gunzipSync','atime','/style.css','Deleting\x20old\x20demo_user\x20accounts...','dwgmergeLocation','JSON\x20Data\x20Extraction','lastExportDate','xpathLocation','forEach','usedGB','ServerLocation','ServerUrl','cadviewer/settings/users-export.html','win32','setMonth','hlall','file','first_name','/users-export/download/:fileName','availableFormats','main','RL/TL\x20Processing','toString','csv','image/svg+xml','linux','length','access','promise','/folders/update','error','crypto','then','blocks','/content/redlines/','/folders/create','/conversion/memorydata','totalMemMb','Exporting\x20new\x20users\x20for\x20Google\x20Ads...','sendFile','9hhFSvW','*\x20*\x20*\x20*\x20*','Error\x20downloading\x20file.','fontLocation','===================error===================','rmdirSync','Callback\x20and\x20Authentication\x20Settings','/cache/flush','pop','Log\x20file\x20cleaned.','radio|',')\x20older\x20than\x20','settings','cadviewer/settings/users.html','/export-users','W_OK','gray','DWG','/logs','darwin','../CADViewer_config.json','json','4372HnaAkJ','cadviewer/settings/icons.js','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20(`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?)\x20AND\x20`id`\x20!=\x20?','filename','send','temp_print_folder','blue','/restapi-test/parameters/search','setup_mysqlHost','File\x20renamed.','split','\x20GB','monthly','Folder\x20created.','name','zombieProcesses','/config','.pdf','clean','autoxchange_executable_windows','getHotConfig','email','constants','conversionMemoryUsage','Error\x20cleaning\x20cache\x20for\x20user\x20files:','/users/list','drive','converterLocation','radio|monthly,biweekly','../libs/counter.js','model','Failed\x20to\x20retrieve\x20export\x20history','array','fileLocation','/folders/upload','mysqlHost','sort','Cache\x20cleaned\x20for\x20files\x20in\x20','/folders/delete','DELETE\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','updatedAt','{version}','trim','goodFileName','number','Permission\x20750\x20for\x20the\x20\x22','Analyse\x20priodique\x20des\x20fichiers\x20du\x20dossier\x20converters/files\x20planifie\x20(toutes\x20les\x20heures)','pdf','converter-files-analysis.json','type','body','getDate','writeFile','readdirSync','Error\x20deleting\x20folder.','replaceAll','mysqlDatabase','child_process','Mail\x20Server\x20Settings','get','usedMemPercentage','Folder\x20not\x20found','Display\x20of\x20DWG','statSync','.dwg','fileName','/users-export/trigger','vmstats','/vanilla-toast.css','demoUserRetentionDays','Le\x20dossier\x20','4335NUKtRT','Error\x20reading\x20monitoring\x20file','readFileSync','last-users-export.json','biweekly','delete','=============================>','scheduleJob','autodetect_platform','resolve','message','.log','cadviewer/settings/rest-api.html','osCmd','isFile','converters','14694896tjSAgG','admin','percentage','/conversion/list','Users\x20export\x20triggered\x20successfully','autodetect_location','dir','cadviewer/settings/rest-api-parameters.json','download'];a27_0x3c1a=function(){return _0x1e4ecf;};return a27_0x3c1a();}scheduleFileAnalysis(),module[a27_0x4d8ada(0x226)]={'router':router,'analyzeConverterFiles':analyzeConverterFiles};
const a26_0x55de58=a26_0x5d1f;(function(_0x2d94f5,_0x3be122){const _0x28b8f3=a26_0x5d1f,_0x3d5152=_0x2d94f5();while(!![]){try{const _0x3f76c5=parseInt(_0x28b8f3(0x1d1))/0x1+parseInt(_0x28b8f3(0x200))/0x2+-parseInt(_0x28b8f3(0x2dd))/0x3+-parseInt(_0x28b8f3(0x268))/0x4*(-parseInt(_0x28b8f3(0x2e7))/0x5)+parseInt(_0x28b8f3(0x274))/0x6*(parseInt(_0x28b8f3(0x216))/0x7)+parseInt(_0x28b8f3(0x1a9))/0x8+-parseInt(_0x28b8f3(0x28c))/0x9*(parseInt(_0x28b8f3(0x19c))/0xa);if(_0x3f76c5===_0x3be122)break;else _0x3d5152['push'](_0x3d5152['shift']());}catch(_0x5ecd3d){_0x3d5152['push'](_0x3d5152['shift']());}}}(a26_0x1dfd,0xc373a));const express=require('express'),router=express[a26_0x55de58(0x1e9)](),multer=require(a26_0x55de58(0x2b8)),fs=require('fs'),path=require(a26_0x55de58(0x2bf)),getHotConfig=require(a26_0x55de58(0x24e))[a26_0x55de58(0x2ae)],{exec}=require(a26_0x55de58(0x214)),os=require('os'),conn=require(a26_0x55de58(0x195)),bcrypt=require(a26_0x55de58(0x21c)),osu=require(a26_0x55de58(0x298)),schedule=require(a26_0x55de58(0x149)),counter=require(a26_0x55de58(0x179)),{randomUUID}=require(a26_0x55de58(0x20e)),logStream=require('../libs/log'),config=require(a26_0x55de58(0x18a)),basicAuth=require('express-basic-auth'),{sendFollowUpEmails,sendAccountDeletionPreventionEmails}=require(a26_0x55de58(0x1ee)),protectedRoute=basicAuth({'users':{[config['settingsUserBasicAuth']]:config[a26_0x55de58(0x185)]},'challenge':!![],'realm':a26_0x55de58(0x275)});router['get'](a26_0x55de58(0x2b4),async(_0x328600,_0x5b3ace)=>{const _0xad1e49=a26_0x55de58;_0x5b3ace[_0xad1e49(0x2b1)](path[_0xad1e49(0x176)](path[_0xad1e49(0x207)](require[_0xad1e49(0x235)][_0xad1e49(0x29c)]),'cadviewer/settings/tailwind.js'));}),router[a26_0x55de58(0x25e)]('/chart.min.js',async(_0x14299a,_0x141a45)=>{const _0x3dbc4d=a26_0x55de58;_0x141a45['sendFile'](path[_0x3dbc4d(0x176)](path[_0x3dbc4d(0x207)](require[_0x3dbc4d(0x235)][_0x3dbc4d(0x29c)]),_0x3dbc4d(0x1c0)));}),router[a26_0x55de58(0x25e)](a26_0x55de58(0x282),async(_0x5e0ed1,_0x459ba5)=>{const _0x4ff92a=a26_0x55de58;_0x459ba5[_0x4ff92a(0x2b1)](path[_0x4ff92a(0x176)](path[_0x4ff92a(0x207)](require['main'][_0x4ff92a(0x29c)]),_0x4ff92a(0x262)));}),router[a26_0x55de58(0x25e)](a26_0x55de58(0x1d0),async(_0x2de948,_0xd3e0de)=>{const _0x12a570=a26_0x55de58;_0xd3e0de[_0x12a570(0x2b1)](path[_0x12a570(0x176)](path[_0x12a570(0x207)](require[_0x12a570(0x235)]['filename']),_0x12a570(0x173)));}),router[a26_0x55de58(0x25e)]('/vanilla-toast.js',async(_0x10faa7,_0x1e97dd)=>{const _0x3e6ec0=a26_0x55de58;_0x1e97dd[_0x3e6ec0(0x2b1)](path['join'](path[_0x3e6ec0(0x207)](require[_0x3e6ec0(0x235)][_0x3e6ec0(0x29c)]),_0x3e6ec0(0x1a4)));}),router[a26_0x55de58(0x25e)]('/icons.js',async(_0x92c091,_0x4289f7)=>{const _0x25fd38=a26_0x55de58;_0x4289f7['sendFile'](path[_0x25fd38(0x176)](path[_0x25fd38(0x207)](require['main'][_0x25fd38(0x29c)]),_0x25fd38(0x212)));}),router[a26_0x55de58(0x25e)]('/',protectedRoute,async(_0x1fcac8,_0x4bf975)=>{const _0x5e0cfc=a26_0x55de58,_0x4ce3eb=fs[_0x5e0cfc(0x161)](path[_0x5e0cfc(0x176)](path[_0x5e0cfc(0x207)](require[_0x5e0cfc(0x235)]['filename']),'cadviewer/settings/home.html'),'utf8'),_0x2705f5=_0x4ce3eb[_0x5e0cfc(0x266)](_0x5e0cfc(0x1e4),_0x1fcac8[_0x5e0cfc(0x276)]);_0x4bf975[_0x5e0cfc(0x27f)](_0x2705f5);}),router[a26_0x55de58(0x25e)]('/licences',protectedRoute,async(_0x317030,_0x57b6aa)=>{const _0xbcb328=a26_0x55de58,_0x8cdeb2=fs[_0xbcb328(0x161)](path[_0xbcb328(0x176)](path['dirname'](require[_0xbcb328(0x235)][_0xbcb328(0x29c)]),'cadviewer/settings/licences.html'),'utf8'),_0x1bff7d=_0x8cdeb2['replaceAll'](_0xbcb328(0x1e4),_0x317030[_0xbcb328(0x276)]);_0x57b6aa[_0xbcb328(0x27f)](_0x1bff7d);}),router[a26_0x55de58(0x25e)]('/config',protectedRoute,async(_0x143193,_0x422d5b)=>{const _0x4a2b96=a26_0x55de58,_0x44f8d4=fs[_0x4a2b96(0x161)](path[_0x4a2b96(0x176)](path[_0x4a2b96(0x207)](require[_0x4a2b96(0x235)][_0x4a2b96(0x29c)]),_0x4a2b96(0x267)),_0x4a2b96(0x2b6)),_0xfd2b61=_0x44f8d4[_0x4a2b96(0x266)](_0x4a2b96(0x1e4),_0x143193[_0x4a2b96(0x276)]);_0x422d5b[_0x4a2b96(0x27f)](_0xfd2b61);}),router[a26_0x55de58(0x25e)](a26_0x55de58(0x230),protectedRoute,async(_0x3aef97,_0x2123cd)=>{const _0x475937=a26_0x55de58,_0x3e942a=fs[_0x475937(0x161)](path['join'](path[_0x475937(0x207)](require['main'][_0x475937(0x29c)]),_0x475937(0x1b3)),_0x475937(0x2b6)),_0x2c6895=_0x3e942a[_0x475937(0x266)](_0x475937(0x1e4),_0x3aef97[_0x475937(0x276)]);_0x2123cd[_0x475937(0x27f)](_0x2c6895);}),router[a26_0x55de58(0x1ae)]('/folders',async(_0x19dcb0,_0x2aa8ef)=>{const _0x4d50bb=a26_0x55de58,_0x4280d0=path[_0x4d50bb(0x176)](path[_0x4d50bb(0x207)](require[_0x4d50bb(0x235)][_0x4d50bb(0x29c)]),_0x4d50bb(0x1df)),_0x15a323=JSON[_0x4d50bb(0x1bf)](fs['readFileSync'](_0x4280d0,_0x4d50bb(0x2b6))),_0x201bfd=_0x15a323[_0x4d50bb(0x2a6)];if(!fs[_0x4d50bb(0x1e3)](_0x201bfd))return _0x2aa8ef[_0x4d50bb(0x1f3)](0x194)[_0x4d50bb(0x1e7)]({'message':_0x4d50bb(0x2c0)});const _0xf1d702=_0x15d751=>{const _0x594bb2=_0x4d50bb;let _0x2d057f=0x0;return _0x15d751[_0x594bb2(0x15c)](_0x3bab76=>{const _0x584ecf=_0x594bb2;_0x3bab76[_0x584ecf(0x147)]?_0x2d057f+=_0xf1d702(_0x3bab76[_0x584ecf(0x171)]):_0x2d057f+=_0x3bab76[_0x584ecf(0x196)];}),_0x2d057f;},_0xe5d827=_0x17c795=>{const _0x3eba31=_0x4d50bb;if(_0x17c795<0x400)return _0x17c795+'\x20B';else{if(_0x17c795<0x400*0x400)return(_0x17c795/0x400)[_0x3eba31(0x226)](0x2)+_0x3eba31(0x178);else return _0x17c795<0x400*0x400*0x400?(_0x17c795/0x400/0x400)[_0x3eba31(0x226)](0x2)+_0x3eba31(0x2d8):(_0x17c795/0x400/0x400/0x400)[_0x3eba31(0x226)](0x2)+_0x3eba31(0x175);}},_0x563b81=(_0x453725,_0x533c2f='')=>{const _0x111a8f=_0x4d50bb,_0x2994d7=fs[_0x111a8f(0x15e)](_0x453725),_0x4048a6=[];return _0x2994d7[_0x111a8f(0x15c)](_0xd170a8=>{const _0x559d47=_0x111a8f,_0x58d2bc=path[_0x559d47(0x176)](_0x453725,_0xd170a8)[_0x559d47(0x266)]('\x5c','/'),_0xe7e1a8=fs[_0x559d47(0x1f1)](_0x58d2bc);if(_0xe7e1a8['isDirectory']()){const _0x39d015=_0x563b81(_0x58d2bc,_0x533c2f+_0x559d47(0x2c4));_0x4048a6[_0x559d47(0x23a)]({'name':_0xd170a8,'size':_0xe7e1a8[_0x559d47(0x196)],'path':_0x58d2bc,'permissions':_0xe7e1a8[_0x559d47(0x253)],'isFolder':!![],'sub_dirs':_0x39d015});}else _0x4048a6[_0x559d47(0x23a)]({'name':_0xd170a8,'size':_0xe7e1a8[_0x559d47(0x196)],'path':_0x58d2bc,'permissions':_0xe7e1a8[_0x559d47(0x253)],'isFolder':![]});}),_0x4048a6;};let _0x1fced1=_0x563b81(_0x201bfd);const _0x470d39=_0x52a929=>{const _0x347eb0=_0x4d50bb;return _0x52a929[_0x347eb0(0x15c)](_0x37bd96=>{const _0x341afa=_0x347eb0;_0x37bd96[_0x341afa(0x147)]?(_0x37bd96[_0x341afa(0x2cd)]=_0xe5d827(_0xf1d702(_0x37bd96[_0x341afa(0x171)])),_0x37bd96['sub_dirs']=_0x470d39(_0x37bd96[_0x341afa(0x171)])):_0x37bd96[_0x341afa(0x2cd)]=_0xe5d827(_0x37bd96[_0x341afa(0x196)]);}),_0x52a929;};_0x2aa8ef[_0x4d50bb(0x1f3)](0xc8)[_0x4d50bb(0x1e7)](_0x470d39(_0x1fced1));}),router[a26_0x55de58(0x1ae)]('/folders/download',async(_0x5ecbf9,_0x423a1e)=>{const _0xeeff21=a26_0x55de58,{path:_0x3cbadc}=_0x5ecbf9[_0xeeff21(0x29b)],_0x3f56b0=_0x3cbadc[_0xeeff21(0x283)]('/')[_0xeeff21(0x1f9)]();if(!fs[_0xeeff21(0x1e3)](_0x3cbadc))return _0x423a1e[_0xeeff21(0x1f3)](0x194)[_0xeeff21(0x1e7)]({'message':_0xeeff21(0x231)});_0x423a1e[_0xeeff21(0x250)](_0xeeff21(0x1c2),_0xeeff21(0x280)),_0x423a1e[_0xeeff21(0x250)](_0xeeff21(0x16c),'attachment;\x20filename=\x22'+_0x3f56b0+'\x22'),_0x423a1e['download'](_0x3cbadc,_0x4caad7=>{const _0x5c0fcb=_0xeeff21;_0x4caad7&&_0x423a1e['status'](0x1f4)[_0x5c0fcb(0x1e7)]({'message':_0x5c0fcb(0x1a3)});});}),router['post'](a26_0x55de58(0x199),async(_0x318ca2,_0x117cac)=>{const _0x13e78e=a26_0x55de58,_0x4065ee=_0x318ca2[_0x13e78e(0x29b)],_0xe0d0c1=getHotConfig()[_0x13e78e(0x2a6)],_0x121a68=path[_0x13e78e(0x176)](_0xe0d0c1,_0x4065ee['path']);if(!fs[_0x13e78e(0x1e3)](_0x121a68))return _0x117cac[_0x13e78e(0x1f3)](0x194)[_0x13e78e(0x1e7)]({'message':_0x13e78e(0x2ad)});if(fs[_0x13e78e(0x1e3)](path[_0x13e78e(0x176)](_0x121a68,_0x4065ee[_0x13e78e(0x1ab)])))return _0x117cac['status'](0x199)['json']({'message':_0x13e78e(0x227)});fs[_0x13e78e(0x1a5)](path[_0x13e78e(0x176)](_0x121a68,_0x4065ee['folderName']),_0x315ad7=>{const _0xc1d4f1=_0x13e78e;_0x315ad7&&_0x117cac['status'](0x1f4)[_0xc1d4f1(0x1e7)]({'message':_0xc1d4f1(0x28b)}),_0x117cac[_0xc1d4f1(0x1f3)](0xc8)[_0xc1d4f1(0x1e7)]({'message':_0xc1d4f1(0x163)});});}),router[a26_0x55de58(0x1e8)](a26_0x55de58(0x1fd),async(_0x315e8f,_0x248ccb)=>{const _0x7ebfd5=a26_0x55de58,{newName:_0x12b863,isFolder:_0x3f6865,path:_0x56861f}=_0x315e8f[_0x7ebfd5(0x29b)];if(!fs['existsSync'](_0x56861f))return _0x248ccb[_0x7ebfd5(0x1f3)](0x194)[_0x7ebfd5(0x1e7)]({'message':_0x3f6865?'Folder\x20not\x20found':_0x7ebfd5(0x231)});const _0x19f5f4=_0x56861f[_0x7ebfd5(0x243)](_0x56861f[_0x7ebfd5(0x283)]('/')[_0x7ebfd5(0x1f9)](),_0x12b863),_0x3ce9c2=fs[_0x7ebfd5(0x1f1)](_0x56861f);_0x3ce9c2[_0x7ebfd5(0x271)]()?fs['renameSync'](_0x56861f,_0x19f5f4):(fs[_0x7ebfd5(0x14d)](_0x56861f,_0x19f5f4),fs[_0x7ebfd5(0x284)](_0x56861f)),_0x248ccb[_0x7ebfd5(0x1f3)](0xc8)[_0x7ebfd5(0x1e7)]({'message':_0x3f6865?_0x7ebfd5(0x14e):_0x7ebfd5(0x2e2)});}),router[a26_0x55de58(0x211)]('/folders/delete',async(_0x1b6c9b,_0x45e021)=>{const _0x2810e6=a26_0x55de58,{path:_0x6d262e}=_0x1b6c9b[_0x2810e6(0x29b)];if(!fs[_0x2810e6(0x1e3)](_0x6d262e))return _0x45e021[_0x2810e6(0x1f3)](0x194)['json']({'message':_0x2810e6(0x241)});const _0xd5e8a4=fs['statSync'](_0x6d262e);if(_0xd5e8a4[_0x2810e6(0x220)]())fs[_0x2810e6(0x2dc)](_0x6d262e,_0x2d7a2=>{const _0x54cf2c=_0x2810e6;_0x2d7a2&&_0x45e021[_0x54cf2c(0x1f3)](0x1f4)['json']({'message':_0x54cf2c(0x1b2)}),_0x45e021['status'](0xc8)[_0x54cf2c(0x1e7)]({'message':'File\x20deleted.'});});else _0xd5e8a4[_0x2810e6(0x271)]()&&fs['rmdir'](_0x6d262e,{'recursive':!![]},_0x45a28d=>{const _0x50fbeb=_0x2810e6;_0x45a28d&&_0x45e021['status'](0x1f4)[_0x50fbeb(0x1e7)]({'message':'Error\x20deleting\x20folder.'}),_0x45e021['status'](0xc8)[_0x50fbeb(0x1e7)]({'message':_0x50fbeb(0x1d5)});});});!fs['existsSync'](a26_0x55de58(0x181))&&fs[a26_0x55de58(0x1c6)](a26_0x55de58(0x181));const storage=multer[a26_0x55de58(0x18e)]({'destination':(_0x4123a7,_0x53cc96,_0xe742f8)=>{_0xe742f8(null,'tmp');},'filename':(_0xd1fd3e,_0x1cb88a,_0x44964d)=>{const _0x336a20=a26_0x55de58;_0x44964d(null,Date[_0x336a20(0x23c)]()+path[_0x336a20(0x1c4)](_0x1cb88a[_0x336a20(0x174)]));}}),upload=multer({'storage':storage,'limits':{'fileSize':0xa*0x400*0x400}});router[a26_0x55de58(0x1ae)](a26_0x55de58(0x2a9),upload[a26_0x55de58(0x2a0)](a26_0x55de58(0x1ce)),async(_0x3b8af3,_0x374374)=>{const _0x40f6fe=a26_0x55de58,_0x3fbbd9=_0x3b8af3[_0x40f6fe(0x29b)];if(!_0x3b8af3[_0x40f6fe(0x1ce)]||_0x3b8af3[_0x40f6fe(0x1ce)]['length']===0x0)return _0x374374[_0x40f6fe(0x1f3)](0x190)['json']({'message':_0x40f6fe(0x1b7)});const _0x5d4bc2=getHotConfig()[_0x40f6fe(0x2a6)],_0x5de6d4=path['join'](_0x5d4bc2,_0x3fbbd9[_0x40f6fe(0x2bf)]);if(!fs['existsSync'](_0x5de6d4))return _0x374374[_0x40f6fe(0x1f3)](0x194)['json']({'message':_0x40f6fe(0x2ad)});const _0x2fd4a0=_0x3b8af3[_0x40f6fe(0x1ce)][_0x40f6fe(0x1b5)](_0x5642c0=>({'originalname':_0x5642c0[_0x40f6fe(0x174)],'filename':_0x5642c0[_0x40f6fe(0x29c)],'mimetype':_0x5642c0[_0x40f6fe(0x1a1)],'size':_0x5642c0[_0x40f6fe(0x196)]}));_0x2fd4a0[_0x40f6fe(0x15c)](_0x4cec0a=>{const _0x518140=_0x40f6fe;fs['copyFileSync'](path[_0x518140(0x176)]('tmp',_0x4cec0a[_0x518140(0x29c)]),path['join'](_0x5de6d4,_0x4cec0a['originalname'])),fs[_0x518140(0x284)](path['join']('tmp',_0x4cec0a[_0x518140(0x29c)]));}),_0x374374[_0x40f6fe(0x1f3)](0xc8)[_0x40f6fe(0x1e7)]({'message':_0x40f6fe(0x2d9),'files':_0x2fd4a0});}),router['put']('/config/global-update',async(_0x323eec,_0x240b03)=>{const _0x430381=a26_0x55de58,_0x133ecd=path[_0x430381(0x176)](path['dirname'](require[_0x430381(0x235)][_0x430381(0x29c)]),_0x430381(0x1df)),{config:_0x30676c}=_0x323eec[_0x430381(0x29b)];if(!_0x30676c)return _0x240b03[_0x430381(0x1f3)](0x190)[_0x430381(0x1e7)]({'message':_0x430381(0x296)});try{fs[_0x430381(0x232)](_0x133ecd,JSON['stringify'](_0x30676c,null,0x4)),_0x240b03[_0x430381(0x1f3)](0xc8)[_0x430381(0x1e7)]({'message':_0x430381(0x24a)});}catch(_0x1d3951){_0x240b03[_0x430381(0x1f3)](0x1f4)[_0x430381(0x1e7)]({'message':_0x430381(0x295)});}}),router[a26_0x55de58(0x1e8)]('/config/update',async(_0x340131,_0x36cd8f)=>{const _0x41c55f=a26_0x55de58,{key:_0x11ea4c,value:_0x55b61c}=_0x340131['body'],_0x541bf8=path['join'](path['dirname'](require[_0x41c55f(0x235)]['filename']),'CADViewer_config.json');fs['readFile'](_0x541bf8,_0x41c55f(0x2b6),function(_0x41b38f,_0x3523bb){const _0x3ceeca=_0x41c55f;_0x41b38f&&_0x36cd8f['status'](0x1f4)[_0x3ceeca(0x27f)](_0x41b38f);const _0x573f1b=JSON[_0x3ceeca(0x1bf)](_0x3523bb);_0x573f1b[_0x11ea4c]=_0x55b61c;if(_0x11ea4c==='autodetect_location'){let _0x109522='';if(_0x573f1b[_0x3ceeca(0x278)]){_0x109522=os[_0x3ceeca(0x1b0)]();if(_0x109522===_0x3ceeca(0x1f2))_0x109522=_0x3ceeca(0x287);else{if(_0x109522==='darwin')_0x109522=_0x3ceeca(0x1af);}}else _0x109522=_0x573f1b['platform'];if(_0x109522===_0x3ceeca(0x287)){_0x573f1b[_0x3ceeca(0x182)]=path[_0x3ceeca(0x252)](__dirname,'..')+'/';const _0x1b3e4f=/\\/g;_0x573f1b[_0x3ceeca(0x182)]=_0x573f1b['ServerLocation']['replace'](_0x1b3e4f,'/');}else _0x573f1b['ServerLocation']=path[_0x3ceeca(0x252)](__dirname,'..')+'/';}if(_0x11ea4c===_0x3ceeca(0x278)){let _0x46a23c=os[_0x3ceeca(0x1b0)]();if(_0x46a23c===_0x3ceeca(0x1f2))_0x46a23c=_0x3ceeca(0x287);else _0x46a23c=_0x3ceeca(0x1af);_0x46a23c==='windows'?_0x55b61c===!![]&&(_0x573f1b[_0x3ceeca(0x1d4)]=_0x573f1b['autoxchange_executable_windows'],_0x573f1b[_0x3ceeca(0x17c)]=_0x573f1b['dwgmerge_executable_windows'],_0x573f1b['linklist_executable']=_0x573f1b[_0x3ceeca(0x28f)]):_0x55b61c===!![]&&(_0x573f1b[_0x3ceeca(0x1d4)]=_0x573f1b['autoxchange_executable_linux'],_0x573f1b[_0x3ceeca(0x17c)]=_0x573f1b[_0x3ceeca(0x17b)],_0x573f1b[_0x3ceeca(0x168)]=_0x573f1b['linklist_executable_linux']),_0x573f1b[_0x3ceeca(0x1b0)]=_0x46a23c;}if(_0x573f1b['autodetect_platform']){let _0x51ea3b=os[_0x3ceeca(0x1b0)]();if(_0x51ea3b===_0x3ceeca(0x1f2))_0x51ea3b=_0x3ceeca(0x287);else _0x51ea3b=_0x3ceeca(0x1af);if(_0x51ea3b===_0x3ceeca(0x287)){if(_0x11ea4c===_0x3ceeca(0x290))_0x573f1b[_0x3ceeca(0x1d4)]=_0x55b61c;else{if(_0x11ea4c==='dwgmerge_executable_windows')_0x573f1b[_0x3ceeca(0x17c)]=_0x55b61c;else _0x11ea4c==='linklist_executable_windows'&&(_0x573f1b[_0x3ceeca(0x168)]=_0x55b61c);}}else{if(_0x11ea4c===_0x3ceeca(0x1da))_0x573f1b[_0x3ceeca(0x1d4)]=_0x55b61c;else{if(_0x11ea4c===_0x3ceeca(0x17b))_0x573f1b['dwgmerge_executable']=_0x55b61c;else _0x11ea4c===_0x3ceeca(0x18c)&&(_0x573f1b[_0x3ceeca(0x168)]=_0x55b61c);}}}fs[_0x3ceeca(0x277)](_0x541bf8,JSON[_0x3ceeca(0x159)](_0x573f1b,null,0x4),function(_0x186024){const _0x5965ef=_0x3ceeca;_0x186024&&_0x36cd8f[_0x5965ef(0x1f3)](0x1f4)[_0x5965ef(0x27f)](_0x186024),_0x36cd8f[_0x5965ef(0x1f3)](0xc8)[_0x5965ef(0x1e7)]({'message':_0x5965ef(0x25d)});});});}),router['post'](a26_0x55de58(0x279),async(_0x240d73,_0x2edba6)=>{const _0xf9fc36=a26_0x55de58,_0x4b35c0=getHotConfig(),_0x5a9510=(_0x4b35c0[_0xf9fc36(0x1ca)][_0xf9fc36(0x23e)](_0x4b35c0['ServerLocation'])?'':_0x4b35c0[_0xf9fc36(0x182)])+_0x4b35c0['dwgmergeLocation'],_0x34d3f6=(_0x4b35c0[_0xf9fc36(0x1ca)]['includes'](_0x4b35c0['ServerLocation'])?'':_0x4b35c0[_0xf9fc36(0x182)])+_0x4b35c0[_0xf9fc36(0x254)],_0x12699c=(_0x4b35c0[_0xf9fc36(0x223)][_0xf9fc36(0x23e)](_0x4b35c0['ServerLocation'])?'':_0x4b35c0[_0xf9fc36(0x182)])+_0x4b35c0[_0xf9fc36(0x223)],_0x225a21=/ax202.*\.exe/,_0x262200=/ax202.*/,_0x2a1443=/dwgmerge202.*\.exe/,_0xb02811=/dwgmerge_202.*/,_0x560d50=/linklist_202.*\.exe/,_0x4679bb=/linklist_202.*/,_0x2c67d2=[],_0xce2bc9=[],_0x46a888=[],_0x9ece9b=[],_0xffb824=[],_0x2321b9=[];let _0x5e495f='';if(_0x4b35c0['autodetect_platform']){_0x5e495f=os['platform']();if(_0x5e495f==='win32')_0x5e495f=_0xf9fc36(0x287);else{if(_0x5e495f===_0xf9fc36(0x198))_0x5e495f=_0xf9fc36(0x1af);}}else _0x5e495f=_0x4b35c0[_0xf9fc36(0x1b0)];fs[_0xf9fc36(0x15e)](_0x12699c[_0xf9fc36(0x266)](_0xf9fc36(0x1af),_0xf9fc36(0x287)))['forEach'](_0x1746c3=>{const _0x5a6bda=_0xf9fc36;if(_0x225a21[_0x5a6bda(0x2e1)](_0x1746c3[_0x5a6bda(0x1be)]()))_0x2c67d2[_0x5a6bda(0x23a)](_0x1746c3);}),fs[_0xf9fc36(0x15e)](_0x5a9510[_0xf9fc36(0x266)](_0xf9fc36(0x1af),'windows'))[_0xf9fc36(0x15c)](_0x404a84=>{const _0x1a53ca=_0xf9fc36;if(_0x2a1443[_0x1a53ca(0x2e1)](_0x404a84[_0x1a53ca(0x1be)]()))_0xce2bc9[_0x1a53ca(0x23a)](_0x404a84);}),fs['readdirSync'](_0x34d3f6[_0xf9fc36(0x266)](_0xf9fc36(0x1af),_0xf9fc36(0x287)))[_0xf9fc36(0x15c)](_0x4be102=>{const _0x5ec0a6=_0xf9fc36;if(_0x560d50['test'](_0x4be102[_0x5ec0a6(0x1be)]()))_0x46a888[_0x5ec0a6(0x23a)](_0x4be102);}),fs['readdirSync'](_0x12699c[_0xf9fc36(0x266)](_0xf9fc36(0x287),_0xf9fc36(0x1af)))[_0xf9fc36(0x15c)](_0x36ea5d=>{const _0x223dea=_0xf9fc36;if(_0x262200[_0x223dea(0x2e1)](_0x36ea5d[_0x223dea(0x1be)]()))_0x9ece9b[_0x223dea(0x23a)](_0x36ea5d);}),fs[_0xf9fc36(0x15e)](_0x5a9510[_0xf9fc36(0x266)](_0xf9fc36(0x287),_0xf9fc36(0x1af)))['forEach'](_0x5f1ee1=>{const _0x2d28a6=_0xf9fc36;if(_0xb02811[_0x2d28a6(0x2e1)](_0x5f1ee1['toLocaleLowerCase']()))_0xffb824[_0x2d28a6(0x23a)](_0x5f1ee1);}),fs[_0xf9fc36(0x15e)](_0x34d3f6[_0xf9fc36(0x266)](_0xf9fc36(0x287),_0xf9fc36(0x1af)))[_0xf9fc36(0x15c)](_0x10a72a=>{if(_0x4679bb['test'](_0x10a72a['toLocaleLowerCase']()))_0x2321b9['push'](_0x10a72a);});const _0x3c4331=[_0xf9fc36(0x257),_0xf9fc36(0x15a),_0xf9fc36(0x17a),'converterpathLin','fontLocation'],_0x340981=[_0xf9fc36(0x1ef),_0xf9fc36(0x21d),_0xf9fc36(0x223),_0xf9fc36(0x2b5),_0xf9fc36(0x2c9),_0xf9fc36(0x2ba),_0xf9fc36(0x2d0),_0xf9fc36(0x1ca),_0xf9fc36(0x254),'version'],_0x267cda=[_0xf9fc36(0x293),'mysqlHost',_0xf9fc36(0x21b),_0xf9fc36(0x16d),_0xf9fc36(0x1cd),_0xf9fc36(0x152),_0xf9fc36(0x1d9)],_0x37ab34={'ServerUrl':_0xf9fc36(0x237),'autoxchange_executable':_0xf9fc36(0x213),'linklist_executable':'LinkList\x20Settings','dwgmerge_executable':_0xf9fc36(0x14b),'setup_mysqlHost':_0xf9fc36(0x2a2),'callbackMethod_gatewayUrl_flag':'Callback\x20and\x20Authentication\x20Settings','userFolderMaximumFiles':_0xf9fc36(0x1ba),'smtpHost':_0xf9fc36(0x17e)},_0x145ad0={'https':'boolean','ServerFrontEndUrlAsAllowedOriginOnly':_0xf9fc36(0x215),'autodetect_platform':_0xf9fc36(0x215),'cvjs_svgz_compress':_0xf9fc36(0x215),'cached_conversion':'boolean','remainOnServer':'boolean','cvjs_debug':_0xf9fc36(0x215),'autodetect_location':_0xf9fc36(0x215),'platform':'radio|windows,linux','autoxchange_executable':_0xf9fc36(0x25a)+(_0x5e495f==='windows'?_0x2c67d2[_0xf9fc36(0x176)](','):_0x9ece9b['join'](',')),'autoxchange_executable_windows':'radio|'+_0x2c67d2[_0xf9fc36(0x176)](','),'autoxchange_executable_linux':'radio|'+_0x9ece9b[_0xf9fc36(0x176)](','),'dwgmerge_executable':_0xf9fc36(0x25a)+(_0x5e495f===_0xf9fc36(0x287)?_0xce2bc9[_0xf9fc36(0x176)](','):_0xffb824[_0xf9fc36(0x176)](',')),'dwgmerge_executable_windows':_0xf9fc36(0x25a)+_0xce2bc9['join'](','),'dwgmerge_executable_linux':'radio|'+_0xffb824['join'](','),'linklist_executable':_0xf9fc36(0x25a)+(_0x5e495f==='windows'?_0x46a888['join'](','):_0x2321b9[_0xf9fc36(0x176)](',')),'linklist_executable_windows':_0xf9fc36(0x25a)+_0x46a888[_0xf9fc36(0x176)](','),'linklist_executable_linux':_0xf9fc36(0x25a)+_0x2321b9['join'](','),'callbackMethod_gatewayUrl_flag':_0xf9fc36(0x215),'setup_mysqlHost':_0xf9fc36(0x215),'ContentSecurityPolicyReportOnly':_0xf9fc36(0x215),'fileLoad_PasswordAuthentication':_0xf9fc36(0x215),'contentLocationCheck':_0xf9fc36(0x215),'globalBearerAutentication':_0xf9fc36(0x215),'bcryptSaltRounds':_0xf9fc36(0x27e),'userFolderMaximumFiles':_0xf9fc36(0x27e),'userFolderMaximumSizeInMB':_0xf9fc36(0x27e),'recaptchaEnabled':_0xf9fc36(0x215),'usersExportFrequency':_0xf9fc36(0x27a),'enableEmailVerification':_0xf9fc36(0x215),'demoUserRetentionDaysAlertBeforeDeletion':'number','demoUserRetentionDays':_0xf9fc36(0x27e)},_0x120597={},_0x2ffdea=Object[_0xf9fc36(0x2bd)](_0x4b35c0);_0x4b35c0[_0xf9fc36(0x278)]&&_0x3c4331[_0xf9fc36(0x23a)](_0xf9fc36(0x1b0)),_0x4b35c0[_0xf9fc36(0x238)]&&(_0x340981['push'](_0xf9fc36(0x182)),_0x340981['push']('autoxchange_executable'),_0x340981[_0xf9fc36(0x23a)](_0xf9fc36(0x17c)),_0x340981[_0xf9fc36(0x23a)]('linklist_executable')),!_0x4b35c0[_0xf9fc36(0x1e5)]&&_0x340981[_0xf9fc36(0x23a)](_0xf9fc36(0x22a)),!_0x4b35c0['setup_mysqlHost']&&(_0x340981[_0xf9fc36(0x23a)](_0xf9fc36(0x229)),_0x340981[_0xf9fc36(0x23a)]('mysqlUsername'),_0x340981[_0xf9fc36(0x23a)](_0xf9fc36(0x16d)),_0x340981[_0xf9fc36(0x23a)](_0xf9fc36(0x1cd))),!_0x4b35c0[_0xf9fc36(0x258)]&&_0x340981[_0xf9fc36(0x23a)](_0xf9fc36(0x1a8)),!_0x4b35c0['fileLoad_PasswordAuthentication']&&(_0x340981[_0xf9fc36(0x23a)](_0xf9fc36(0x26d)),_0x340981[_0xf9fc36(0x23a)](_0xf9fc36(0x150))),!_0x4b35c0['globalBearerAutentication']&&_0x340981[_0xf9fc36(0x23a)](_0xf9fc36(0x2cb)),_0x2ffdea[_0xf9fc36(0x15c)](_0x576fed=>{const _0x3b9ddc=_0xf9fc36;!_0x3c4331[_0x3b9ddc(0x23e)](_0x576fed)&&(_0x120597[_0x576fed]=_0x4b35c0[_0x576fed]);}),_0x120597[_0xf9fc36(0x21d)]=''+_0x4b35c0['ServerUrl']+_0x4b35c0[_0xf9fc36(0x1ef)],_0x2edba6[_0xf9fc36(0x1f3)](0xc8)['json']({'notEditableFields':_0x340981,'customFieldTypes':_0x145ad0,'notHotEditableFields':_0x267cda,'config':_0x120597,'fieldsTitle':_0x37ab34,'configData':_0x4b35c0});}),router['get'](a26_0x55de58(0x23b),protectedRoute,async(_0x5a458c,_0x11d77d)=>{const _0x423332=a26_0x55de58,_0x44d11a=fs[_0x423332(0x161)](path['join'](path['dirname'](require['main'][_0x423332(0x29c)]),'cadviewer/settings/logs.html'),_0x423332(0x2b6)),_0x57f11c=_0x44d11a[_0x423332(0x266)](_0x423332(0x1e4),_0x5a458c[_0x423332(0x276)]);_0x11d77d[_0x423332(0x27f)](_0x57f11c);});function findMatchingLogFiles(_0x17131a,_0x3eb8cc=/^call-Api_Conversion_\d{1,2}_\d{1,2}_\d{4}\.log$/){const _0x5392a9=a26_0x55de58;try{const _0x3e1431=fs[_0x5392a9(0x15e)](_0x17131a);return _0x3e1431[_0x5392a9(0x18d)](_0x277182=>_0x3eb8cc[_0x5392a9(0x2e1)](_0x277182))[_0x5392a9(0x1b5)](_0x2aed4a=>_0x2aed4a[_0x5392a9(0x266)](_0x5392a9(0x19e),'')['replaceAll'](_0x5392a9(0x1e1),''));}catch(_0x5a9348){return console[_0x5392a9(0x1f0)](_0x5392a9(0x1ea),_0x5a9348),[];}}router[a26_0x55de58(0x1ae)](a26_0x55de58(0x2de),async(_0x164c1f,_0x141479)=>{const _0x15c983=a26_0x55de58,_0x5d6955=new Date(),_0x1dadfc=_0x5d6955[_0x15c983(0x1cf)]()['toString']()[_0x15c983(0x22f)](0x2,'0')+'_'+(_0x5d6955['getMonth']()+0x1)[_0x15c983(0x1fe)]()[_0x15c983(0x22f)](0x2,'0')+'_'+_0x5d6955[_0x15c983(0x14f)](),{displayDay:_0xdf2852}=_0x164c1f[_0x15c983(0x29b)],_0x461941=path[_0x15c983(0x176)](path[_0x15c983(0x207)](require[_0x15c983(0x235)][_0x15c983(0x29c)]),_0x15c983(0x1b6),_0x15c983(0x19e)+(_0xdf2852??_0x1dadfc)+_0x15c983(0x1e1));fs['existsSync'](_0x461941)?fs['readFile'](_0x461941,_0x15c983(0x2b6),function(_0x4845fb,_0x949f17){const _0x214838=_0x15c983;_0x4845fb&&_0x141479['status'](0x1f4)[_0x214838(0x27f)](_0x4845fb),_0x141479[_0x214838(0x1f3)](0xc8)[_0x214838(0x1e7)]({'content':_0x949f17,'days':findMatchingLogFiles(path['join'](path['dirname'](require['main']['filename']),'logs'))});}):_0x141479[_0x15c983(0x1f3)](0xc8)[_0x15c983(0x1e7)]({'content':'','days':findMatchingLogFiles(path['join'](path['dirname'](require[_0x15c983(0x235)][_0x15c983(0x29c)]),_0x15c983(0x1b6)))});}),router['delete'](a26_0x55de58(0x1fa),async(_0x125f20,_0x14c91f)=>{const _0x1d4827=a26_0x55de58,_0x560a65=new Date(),_0x5a6d35=_0x560a65['getDate']()['toString']()['padStart'](0x2,'0')+'_'+(_0x560a65['getMonth']()+0x1)[_0x1d4827(0x1fe)]()[_0x1d4827(0x22f)](0x2,'0')+'_'+_0x560a65[_0x1d4827(0x14f)](),_0x882cd5=findMatchingLogFiles(path[_0x1d4827(0x176)](path[_0x1d4827(0x207)](require[_0x1d4827(0x235)][_0x1d4827(0x29c)]),'logs'));_0x882cd5[_0x1d4827(0x15c)](_0xe24a09=>{const _0x3988bb=_0x1d4827;if(_0xe24a09!==_0x5a6d35)fs[_0x3988bb(0x284)](path[_0x3988bb(0x176)](path[_0x3988bb(0x207)](require[_0x3988bb(0x235)][_0x3988bb(0x29c)]),_0x3988bb(0x1b6),_0x3988bb(0x19e)+_0xe24a09+_0x3988bb(0x1e1)));}),logStream['clean'](),_0x14c91f[_0x1d4827(0x1f3)](0xc8)['json']({'message':_0x1d4827(0x24b)});}),router['get'](a26_0x55de58(0x197),protectedRoute,async(_0x366eba,_0x5c88c7)=>{const _0x2acca8=a26_0x55de58,_0x4252d2=path[_0x2acca8(0x176)](path[_0x2acca8(0x207)](require[_0x2acca8(0x235)]['filename']),_0x2acca8(0x269));if(!fs['existsSync'](_0x4252d2)){const _0x2f9d36={'jsonDataExtraction':{'standard':[{'paramName':_0x2acca8(0x1e7),'paramValue':''},{'paramName':_0x2acca8(0x177),'paramValue':''}]},'dwgToSvg':{'standard':[{'paramName':'f','paramValue':_0x2acca8(0x297)},{'paramName':_0x2acca8(0x26a),'paramValue':''},{'paramName':'hlall','paramValue':''}]},'dwgToPdf':{'standard':[{'paramName':'f','paramValue':_0x2acca8(0x154)},{'paramName':_0x2acca8(0x26a),'paramValue':''}]},'displayDwg':{'standard':[{'paramName':'f','paramValue':_0x2acca8(0x297)},{'paramName':_0x2acca8(0x26a),'paramValue':''},{'paramName':'hlall','paramValue':''}]},'dwgToMultiple':{'standard':[{'paramName':_0x2acca8(0x1f8),'paramValue':''}]}};fs[_0x2acca8(0x232)](_0x4252d2,JSON[_0x2acca8(0x159)](_0x2f9d36,null,0x4));}const _0x4da07d=fs[_0x2acca8(0x161)](path[_0x2acca8(0x176)](path[_0x2acca8(0x207)](require[_0x2acca8(0x235)]['filename']),_0x2acca8(0x273)),'utf8'),_0x1c1a4a=_0x4da07d[_0x2acca8(0x266)](_0x2acca8(0x1e4),_0x366eba['version']);_0x5c88c7['send'](_0x1c1a4a);}),router['post'](a26_0x55de58(0x22e),async(_0x597b4f,_0x32976b)=>{const _0x6eb040=a26_0x55de58,{actionName:_0x5a51c2,contentLocation:_0x5668b1}=_0x597b4f['body'],_0xa85afd=path[_0x6eb040(0x176)](path[_0x6eb040(0x207)](require[_0x6eb040(0x235)][_0x6eb040(0x29c)]),'cadviewer/settings/rest-api-parameters.json');fs[_0x6eb040(0x16b)](_0xa85afd,_0x6eb040(0x2b6),function(_0x1591e8,_0xed4548){const _0x4d6624=_0x6eb040;if(_0x1591e8)_0x32976b['status'](0xc8)[_0x4d6624(0x1e7)]({'parameters':[]});else{const _0x4a60da=JSON[_0x4d6624(0x1bf)](_0xed4548);if(_0x4a60da[_0x5a51c2]&&_0x4a60da[_0x5a51c2][_0x5668b1])_0x32976b[_0x4d6624(0x1f3)](0xc8)[_0x4d6624(0x1e7)]({'parameters':_0x4a60da[_0x5a51c2][_0x5668b1]});else _0x4a60da[_0x5a51c2]&&_0x4a60da[_0x5a51c2][_0x4d6624(0x21f)]?_0x32976b[_0x4d6624(0x1f3)](0xc8)[_0x4d6624(0x1e7)]({'parameters':_0x4a60da[_0x5a51c2]['standard']}):_0x32976b[_0x4d6624(0x1f3)](0xc8)['json']({'parameters':[]});}});}),router['post'](a26_0x55de58(0x1ec),async(_0x2a5f3b,_0x3b2aad)=>{const _0x36b379=a26_0x55de58,{actionName:_0x47ec1c,contentLocation:_0x46a414,parameters:_0x595b31}=_0x2a5f3b[_0x36b379(0x29b)],_0x24bd0e=path['join'](path[_0x36b379(0x207)](require['main'][_0x36b379(0x29c)]),_0x36b379(0x269));fs[_0x36b379(0x16b)](_0x24bd0e,_0x36b379(0x2b6),function(_0x163b20,_0x2ad9d6){const _0x42eca6=_0x36b379;if(_0x163b20)_0x3b2aad[_0x42eca6(0x1f3)](0x199)[_0x42eca6(0x1e7)]({'message':_0x42eca6(0x29a)});else{const _0x32c52f=JSON['parse'](_0x2ad9d6);!_0x32c52f[_0x47ec1c]&&(_0x32c52f[_0x47ec1c]={}),_0x32c52f[_0x47ec1c][_0x46a414]=_0x595b31,fs[_0x42eca6(0x277)](_0x24bd0e,JSON[_0x42eca6(0x159)](_0x32c52f,null,0x4),function(_0x25b344){const _0x287324=_0x42eca6;_0x25b344&&_0x3b2aad['status'](0x199)['json']({'message':_0x287324(0x29a)}),_0x3b2aad[_0x287324(0x1f3)](0xc8)[_0x287324(0x1e7)]({'message':_0x287324(0x261)});});}});}),router[a26_0x55de58(0x25e)](a26_0x55de58(0x165),protectedRoute,async(_0x150469,_0x2416bb)=>{const _0x42414d=a26_0x55de58,_0x32d942=fs['readFileSync'](path[_0x42414d(0x176)](path[_0x42414d(0x207)](require[_0x42414d(0x235)][_0x42414d(0x29c)]),_0x42414d(0x146)),_0x42414d(0x2b6)),_0x40981a=_0x32d942[_0x42414d(0x266)]('{version}',_0x150469[_0x42414d(0x276)]);_0x2416bb[_0x42414d(0x27f)](_0x40981a);}),router[a26_0x55de58(0x1ae)]('/doctor/check',async(_0x44f3ac,_0x1c2864)=>{const _0x38235d=a26_0x55de58,_0x3740f2=getHotConfig(),_0x1f4bec=_0x3740f2[_0x38235d(0x223)][_0x38235d(0x266)]('//','/'),_0x52e8ff=_0x3740f2[_0x38235d(0x1ca)]['replaceAll']('//','/'),_0x3e13d4=_0x3740f2['linklistLocation'][_0x38235d(0x266)]('//','/'),_0x191541=''+_0x1f4bec+_0x3740f2[_0x38235d(0x1d4)],_0x31b02e=''+_0x52e8ff+_0x3740f2[_0x38235d(0x17c)],_0x381ce=''+_0x3e13d4+_0x3740f2['linklist_executable'],_0x81093e=[],_0x1a4c37=new Promise(_0x122346=>{const _0x48d561=_0x38235d;exec(os[_0x48d561(0x1b0)]()==='win32'?_0x48d561(0x2c6):'ls',_0x4b2b5e=>{const _0x3d1ca2=_0x48d561;_0x4b2b5e?_0x81093e[_0x3d1ca2(0x23a)]({'title':_0x3d1ca2(0x27b),'status':![],'priority':0x1}):_0x81093e[_0x3d1ca2(0x23a)]({'title':_0x3d1ca2(0x27b),'status':!![],'priority':0x1}),_0x122346();});}),_0xe0c5ce=new Promise(_0x5ccbef=>{const _0x1974a7=_0x38235d;fs[_0x1974a7(0x1c3)](_0x191541,fs[_0x1974a7(0x1eb)][_0x1974a7(0x1d7)],_0x172abf=>{const _0x4676d1=_0x1974a7;_0x172abf?_0x81093e[_0x4676d1(0x23a)]({'title':_0x4676d1(0x2d6)+_0x3740f2[_0x4676d1(0x1d4)]+'\x22\x20executable','status':![],'priority':0x2}):_0x81093e['push']({'title':_0x4676d1(0x2d6)+_0x3740f2[_0x4676d1(0x1d4)]+'\x22\x20executable','status':!![],'priority':0x2}),_0x5ccbef();});}),_0x1da769=new Promise(_0x19df60=>{const _0x35c7b8=_0x38235d;fs[_0x35c7b8(0x1c3)](_0x31b02e,fs[_0x35c7b8(0x1eb)][_0x35c7b8(0x1d7)],_0x4541bc=>{const _0x2847c5=_0x35c7b8;_0x4541bc?_0x81093e['push']({'title':_0x2847c5(0x2d6)+_0x3740f2['dwgmerge_executable']+'\x22\x20executable','status':![],'priority':0x3}):_0x81093e[_0x2847c5(0x23a)]({'title':_0x2847c5(0x2d6)+_0x3740f2[_0x2847c5(0x17c)]+_0x2847c5(0x299),'status':!![],'priority':0x3}),_0x19df60();});}),_0x430aff=new Promise(_0x1492aa=>{const _0x482703=_0x38235d;fs['access'](_0x381ce,fs[_0x482703(0x1eb)][_0x482703(0x1d7)],_0x500ad7=>{const _0x41d21c=_0x482703;_0x500ad7?_0x81093e['push']({'title':_0x41d21c(0x2d6)+_0x3740f2['linklist_executable']+'\x22\x20executable','status':![],'priority':0x4}):_0x81093e[_0x41d21c(0x23a)]({'title':_0x41d21c(0x2d6)+_0x3740f2[_0x41d21c(0x168)]+_0x41d21c(0x299),'status':!![],'priority':0x4}),_0x1492aa();});}),_0x526284=new Promise(_0x1d7c95=>{const _0x7db9cb=_0x38235d,_0x35f6e5=new Date(),_0x4fd59f=_0x35f6e5[_0x7db9cb(0x1cf)]()['toString']()['padStart'](0x2,'0')+'_'+(_0x35f6e5[_0x7db9cb(0x170)]()+0x1)[_0x7db9cb(0x1fe)]()['padStart'](0x2,'0')+'_'+_0x35f6e5[_0x7db9cb(0x14f)](),{displayDay:_0xe5c8dd}=_0x44f3ac[_0x7db9cb(0x29b)];fs[_0x7db9cb(0x1c3)](path[_0x7db9cb(0x176)](path[_0x7db9cb(0x207)](require[_0x7db9cb(0x235)][_0x7db9cb(0x29c)]),_0x7db9cb(0x1b6),'call-Api_Conversion_'+(_0xe5c8dd??_0x4fd59f)+'.log'),fs[_0x7db9cb(0x1eb)][_0x7db9cb(0x158)],_0x55b35e=>{const _0x15139c=_0x7db9cb;_0x55b35e?_0x81093e[_0x15139c(0x23a)]({'title':'Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_'+(_0xe5c8dd??_0x4fd59f)+_0x15139c(0x242),'status':![],'priority':0x5}):_0x81093e['push']({'title':'Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_'+(_0xe5c8dd??_0x4fd59f)+'.log\x22','status':!![],'priority':0x5}),_0x1d7c95();});}),_0x1046c3=(_0x2a6ce9,_0x4b195a)=>{const _0x2728fe=_0x38235d,_0x4574b1=path[_0x2728fe(0x176)](path['dirname'](require['main'][_0x2728fe(0x29c)]),_0x2a6ce9);return new Promise(_0x3d9543=>{const _0x59b09c=_0x2728fe;fs[_0x59b09c(0x1c3)](path['join'](path[_0x59b09c(0x207)](_0x4574b1)),fs[_0x59b09c(0x1eb)][_0x59b09c(0x1bb)]|fs[_0x59b09c(0x1eb)][_0x59b09c(0x158)],_0x43d30a=>{const _0x2d55a3=_0x59b09c;_0x43d30a?_0x81093e['push']({'title':_0x2d55a3(0x289)+_0x2a6ce9,'status':![],'priority':_0x4b195a+0x6}):_0x81093e['push']({'title':_0x2d55a3(0x289)+_0x2a6ce9,'status':!![],'priority':_0x4b195a+0x6}),_0x3d9543();});});},_0x197ddd=[_0x38235d(0x20a),_0x38235d(0x206),_0x38235d(0x217),'/converters/files/print/',_0x38235d(0x15b),'/content/redlines/',_0x38235d(0x25c)],_0x2b6cca=_0x197ddd[_0x38235d(0x1b5)](_0x1046c3);Promise[_0x38235d(0x2e5)]([_0x1a4c37,_0xe0c5ce,_0x1da769,_0x430aff,_0x526284,..._0x2b6cca])[_0x38235d(0x210)](()=>{const _0xcf2032=_0x38235d;_0x1c2864[_0xcf2032(0x1f3)](0xc8)['json']({'checking_list':_0x81093e});})[_0x38235d(0x18f)](()=>{const _0x518d1b=_0x38235d;_0x1c2864[_0x518d1b(0x1f3)](0x1f4)[_0x518d1b(0x1e7)]({'error':_0x518d1b(0x22d)});});}),router[a26_0x55de58(0x25e)](a26_0x55de58(0x218),protectedRoute,async(_0x2bcff6,_0x5ba6a9)=>{const _0x23ee1b=a26_0x55de58,_0x576062=fs[_0x23ee1b(0x161)](path[_0x23ee1b(0x176)](path[_0x23ee1b(0x207)](require[_0x23ee1b(0x235)][_0x23ee1b(0x29c)]),_0x23ee1b(0x2b2)),'utf8'),_0x2f3c11=_0x576062['replaceAll'](_0x23ee1b(0x1e4),_0x2bcff6['version']);_0x5ba6a9[_0x23ee1b(0x27f)](_0x2f3c11);}),router['post'](a26_0x55de58(0x25b),async(_0x500f9a,_0x47a40e)=>{const _0x6bc016=a26_0x55de58;let _0x23c038;try{const [_0x1ca4bb]=await conn[_0x6bc016(0x2bc)]()['execute']('SELECT\x20*\x20FROM\x20users',[]);_0x23c038=_0x1ca4bb;}catch(_0x1f2545){console[_0x6bc016(0x224)](_0x1f2545),_0x47a40e[_0x6bc016(0x1f3)](0x1f4)[_0x6bc016(0x1e7)]({'error':_0x6bc016(0x1a0)});return;}_0x47a40e[_0x6bc016(0x1f3)](0xc8)[_0x6bc016(0x1e7)]({'success':!![],'data':_0x23c038});}),router[a26_0x55de58(0x1ae)](a26_0x55de58(0x218),upload[a26_0x55de58(0x1db)](a26_0x55de58(0x169)),async(_0x47a77a,_0x3409c1)=>{const _0x5aa49f=a26_0x55de58,{id:_0x3c252e,first_name:_0x43d12d,last_name:_0x5df0c8,username:_0x5d738a,email:_0x1e63e3,password:_0x1e4f73,is_enabled:_0x480423}=_0x47a77a['body'],_0x4c7335=_0x47a77a[_0x5aa49f(0x29b)][_0x5aa49f(0x156)]===_0x5aa49f(0x221)?_0x5aa49f(0x221):_0x47a77a['body']['role']===_0x5aa49f(0x1bc)?'demo_user':_0x5aa49f(0x205);let _0x5ad5e1;console[_0x5aa49f(0x224)](_0x5aa49f(0x28a));_0x1e4f73&&(_0x5ad5e1=await bcrypt[_0x5aa49f(0x2aa)](_0x1e4f73,0xa));let _0xe4f6ac=null;if(_0x47a77a[_0x5aa49f(0x2ab)]){const _0x41de85='avatars/'+randomUUID()+_0x5aa49f(0x1d6);fs[_0x5aa49f(0x14d)](_0x47a77a['file']['path'],'./'+_0x41de85),fs[_0x5aa49f(0x284)](_0x47a77a[_0x5aa49f(0x2ab)][_0x5aa49f(0x2bf)]),config['callbackMethod_gatewayUrl_flag']?_0xe4f6ac=config['callbackMethod_gatewayUrl']+'/'+_0x41de85:_0xe4f6ac=config[_0x5aa49f(0x293)]+'/'+_0x41de85;}if(_0x3c252e){try{let [_0x5a23a9]=await conn[_0x5aa49f(0x2bc)]()['execute']('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20(`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?)\x20AND\x20`id`\x20!=\x20?',[_0x1e63e3,_0x5d738a,_0x3c252e]);if(_0x5a23a9[_0x5aa49f(0x24f)]>0x0)_0x3409c1[_0x5aa49f(0x1f3)](0x199)[_0x5aa49f(0x1e7)]({'error':_0x5aa49f(0x286)});else{!_0x47a77a[_0x5aa49f(0x2ab)]&&([_0x5a23a9]=await conn[_0x5aa49f(0x2bc)]()[_0x5aa49f(0x239)](_0x5aa49f(0x1cb),[_0x3c252e]),_0xe4f6ac=_0x5a23a9[0x0][_0x5aa49f(0x1ed)]);const _0x415ab3=_0x5aa49f(0x208)+(_0x1e4f73?_0x5aa49f(0x2a7):'')+_0x5aa49f(0x18b);await conn[_0x5aa49f(0x2bc)]()[_0x5aa49f(0x239)](_0x415ab3,_0x1e4f73?[_0xe4f6ac,_0x43d12d,_0x5df0c8,_0x5d738a,_0x1e63e3,_0x5ad5e1,_0x480423,_0x4c7335,_0x3c252e]:[_0xe4f6ac,_0x43d12d,_0x5df0c8,_0x5d738a,_0x1e63e3,_0x480423,_0x4c7335,_0x3c252e]);}}catch(_0x23b402){console[_0x5aa49f(0x224)](_0x23b402),_0x3409c1[_0x5aa49f(0x1f3)](0x1f4)[_0x5aa49f(0x1e7)]({'error':_0x5aa49f(0x1a0)});return;}_0x3409c1['status'](0xc8)[_0x5aa49f(0x1e7)]({'success':!![],'message':_0x5aa49f(0x20c)});}else{try{const [_0x56feec]=await conn[_0x5aa49f(0x2bc)]()[_0x5aa49f(0x239)](_0x5aa49f(0x1b9),[_0x1e63e3,_0x5d738a]);if(_0x56feec[_0x5aa49f(0x24f)]>0x0)_0x3409c1['status'](0x199)[_0x5aa49f(0x1e7)]({'error':_0x5aa49f(0x286)});else{const _0x40604c=randomUUID();await conn[_0x5aa49f(0x2bc)]()[_0x5aa49f(0x239)]('INSERT\x20INTO\x20`users`\x20(`avatar_url`,\x20`first_name`,\x20`last_name`,\x20`username`,\x20`email`,\x20`crypted_password`,\x20`role`,\x20`is_enabled`,\x20`folder_name`)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)',[_0xe4f6ac,_0x43d12d,_0x5df0c8,_0x5d738a,_0x1e63e3,_0x5ad5e1,_0x4c7335,_0x480423,_0x40604c]);const _0x3c21aa=_0x5aa49f(0x2a5)+_0x40604c;fs[_0x5aa49f(0x1c6)](_0x3c21aa);}}catch(_0x41a34c){console[_0x5aa49f(0x224)](_0x41a34c),_0x3409c1[_0x5aa49f(0x1f3)](0x1f4)['json']({'error':'Error!\x20Something\x20went\x20wrong.'});return;}_0x3409c1[_0x5aa49f(0x1f3)](0xc8)[_0x5aa49f(0x1e7)]({'success':!![],'message':_0x5aa49f(0x1dd)});}}),router[a26_0x55de58(0x211)]('/users/flush-dir',async(_0x3bb766,_0x3501ee)=>{const _0x35d1ab=a26_0x55de58,{userId:_0x38b081}=_0x3bb766['body'];let _0x3580e6;try{const [_0x17ccb7]=await conn[_0x35d1ab(0x2bc)]()[_0x35d1ab(0x239)](_0x35d1ab(0x1cb),[_0x38b081]);_0x17ccb7[_0x35d1ab(0x24f)]>0x0&&(_0x3580e6=_0x17ccb7[0x0]);}catch(_0x2991d2){console[_0x35d1ab(0x224)]({'err':_0x2991d2}),_0x3501ee[_0x35d1ab(0x1f3)](0x1f4)[_0x35d1ab(0x1e7)]({'error':_0x35d1ab(0x1a0)});return;}if(!_0x3580e6){_0x3501ee[_0x35d1ab(0x1f3)](0x191)['json']({'error':'Invalid\x20user'});return;}let _0x4cec8a=_0x3580e6[_0x35d1ab(0x2c2)];if(!_0x4cec8a){_0x4cec8a=randomUUID();try{await conn[_0x35d1ab(0x2bc)]()[_0x35d1ab(0x239)]('UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?',[_0x4cec8a,_0x38b081]);}catch(_0x5284b3){console['log']({'err':_0x5284b3}),_0x3501ee[_0x35d1ab(0x1f3)](0x1f4)[_0x35d1ab(0x1e7)]({'error':_0x35d1ab(0x1a0)});return;}}const _0x417912='./uploads/'+_0x4cec8a;console[_0x35d1ab(0x224)](_0x35d1ab(0x1f5)),console[_0x35d1ab(0x224)](_0x417912),!fs[_0x35d1ab(0x1e3)](_0x417912)&&fs['mkdirSync'](_0x417912),cleanCacheForUserFiles(_0x417912),fs[_0x35d1ab(0x26c)](_0x417912,{'recursive':!![],'force':!![]}),fs[_0x35d1ab(0x1c6)](_0x417912),_0x3501ee[_0x35d1ab(0x1f3)](0xc8)['json']({'success':!![],'message':_0x35d1ab(0x26f)});}),router['delete'](a26_0x55de58(0x193),async(_0x4e5e72,_0x54e83c)=>{const _0x5bde42=a26_0x55de58,_0x4e5b96=_0x4e5e72[_0x5bde42(0x272)]['userId'];try{let _0x1e5aa5;try{const [_0x547e78]=await conn['promise']()[_0x5bde42(0x239)](_0x5bde42(0x1cb),[_0x4e5b96]);_0x547e78[_0x5bde42(0x24f)]>0x0&&(_0x1e5aa5=_0x547e78[0x0]);}catch(_0x220bcc){console[_0x5bde42(0x224)]({'err':_0x220bcc}),_0x54e83c['status'](0x1f4)[_0x5bde42(0x1e7)]({'error':_0x5bde42(0x1a0)});return;}if(!_0x1e5aa5){_0x54e83c['status'](0x191)['json']({'error':_0x5bde42(0x2ac)});return;}let _0x1868ba=_0x1e5aa5[_0x5bde42(0x2c2)];if(_0x1868ba){const _0x1b8b00=_0x5bde42(0x2a5)+_0x1868ba;fs[_0x5bde42(0x1e3)](_0x1b8b00)&&(cleanCacheForUserFiles(_0x1b8b00),fs['rmSync'](_0x1b8b00,{'recursive':!![],'force':!![]}));}await conn[_0x5bde42(0x2bc)]()[_0x5bde42(0x239)](_0x5bde42(0x180),[_0x4e5b96]);}catch(_0x3604a0){console['log'](_0x3604a0),_0x54e83c['status'](0x1f4)[_0x5bde42(0x1e7)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}_0x54e83c[_0x5bde42(0x1f3)](0xc8)[_0x5bde42(0x1e7)]({'success':!![],'message':_0x5bde42(0x1de)});}),router[a26_0x55de58(0x25e)](a26_0x55de58(0x2d3),async(_0x28c826,_0x26b5f3)=>{const _0x4e01a1=a26_0x55de58,_0x315f1e=osu['cpu'],_0x467239=osu[_0x4e01a1(0x249)],_0x528384=osu[_0x4e01a1(0x190)],_0x3431da=osu['os'],_0x5624d5={'percentage':0x0,'usedGB':0x0,'freeGb':0x0,'totalGB':0x0};try{let _0x54a724=os[_0x4e01a1(0x1b0)]()==='win32'?'c:':'/';const _0x4b3a6a=await _0x528384[_0x4e01a1(0x204)](_0x54a724);_0x5624d5[_0x4e01a1(0x157)]=_0x4b3a6a[_0x4e01a1(0x1aa)],_0x5624d5[_0x4e01a1(0x164)]=_0x4b3a6a['usedGb'],_0x5624d5[_0x4e01a1(0x1c9)]=_0x4b3a6a[_0x4e01a1(0x1c9)],_0x5624d5[_0x4e01a1(0x26e)]=_0x4b3a6a[_0x4e01a1(0x151)];}catch(_0x1f507e){console['log'](_0x4e01a1(0x1a2),_0x1f507e);}const _0x2810d0={'usage':0x0,'count':0x0};try{_0x2810d0[_0x4e01a1(0x183)]=await _0x315f1e[_0x4e01a1(0x183)](),_0x2810d0[_0x4e01a1(0x256)]=_0x315f1e[_0x4e01a1(0x256)]();}catch(_0x58f28e){console[_0x4e01a1(0x224)]('Error\x20getting\x20cpu\x20usage',_0x58f28e);}const _0x7a1f59={'os':'','platform':'','ip':'','uptime':0x0,'hostname':'','type':'','arch':'','who':'','whoami':'','vmstats':''};try{_0x7a1f59['os']=await _0x3431da[_0x4e01a1(0x1d3)](),_0x7a1f59[_0x4e01a1(0x1b0)]=_0x3431da[_0x4e01a1(0x1b0)](),_0x7a1f59['ip']=_0x3431da['ip'](),_0x7a1f59['uptime']=_0x3431da[_0x4e01a1(0x259)](),_0x7a1f59[_0x4e01a1(0x24d)]=_0x3431da['hostname'](),_0x7a1f59[_0x4e01a1(0x2b9)]=_0x3431da[_0x4e01a1(0x2b9)](),_0x7a1f59['arch']=_0x3431da['arch'](),_0x7a1f59[_0x4e01a1(0x2b0)]=await osu[_0x4e01a1(0x1f7)]['who'](),_0x7a1f59[_0x4e01a1(0x148)]=await osu[_0x4e01a1(0x1f7)]['whoami'](),_0x7a1f59[_0x4e01a1(0x260)]=await osu[_0x4e01a1(0x1f7)][_0x4e01a1(0x260)]();}catch(_0x338967){console[_0x4e01a1(0x224)](_0x4e01a1(0x20d),_0x338967);}const _0x27911e={'totalProcesses':0x0,'zombieProcesses':0x0};try{_0x27911e[_0x4e01a1(0x203)]=await osu['proc'][_0x4e01a1(0x203)](),_0x27911e['zombieProcesses']=await osu['proc']['zombieProcesses']();}catch(_0x4dc0f9){console[_0x4e01a1(0x224)](_0x4e01a1(0x2c7),_0x4dc0f9);}let _0x5935be={'usedMemPercentage':0x0,'usedMemMb':0x0,'totalMemMb':0x0};try{const _0x413ef5=await _0x467239[_0x4e01a1(0x204)]();_0x5935be[_0x4e01a1(0x245)]=_0x413ef5[_0x4e01a1(0x245)],_0x5935be[_0x4e01a1(0x167)]=_0x413ef5[_0x4e01a1(0x2e4)]/0x400/0x400,_0x5935be['totalMemMb']=_0x413ef5['total']/0x400/0x400;}catch(_0x490ca9){console['log'](_0x4e01a1(0x2df),_0x490ca9);}let _0x543379=0x0;try{_0x543379=await conn[_0x4e01a1(0x2bc)]()[_0x4e01a1(0x16e)]('SELECT\x20COUNT(*)\x20as\x20total\x20FROM\x20users')[_0x4e01a1(0x210)](([_0x567f0f])=>_0x567f0f[0x0][_0x4e01a1(0x1c8)]);}catch(_0x54318c){console[_0x4e01a1(0x224)](_0x4e01a1(0x2cf),_0x54318c);}const _0x2a2f2f=getMonitoringData(),_0x139196=_0x2a2f2f[_0x4e01a1(0x18d)](_0x25581e=>_0x25581e['conversionTimeSpend']!==null&&_0x25581e['conversionTimeSpend']!==undefined),_0x8ecc88=_0x2a2f2f[_0x4e01a1(0x18d)](_0x2c7b75=>_0x2c7b75[_0x4e01a1(0x2b7)]!==null&&_0x2c7b75[_0x4e01a1(0x2b7)]!==undefined)[_0x4e01a1(0x1b5)](_0x3c8247=>parseFloat(_0x3c8247[_0x4e01a1(0x2b7)][_0x4e01a1(0x266)]('Kb')[_0x4e01a1(0x247)]())),_0x467b93=_0x139196[_0x4e01a1(0x1c5)]((_0x4a7fac,_0x39c342)=>_0x4a7fac+parseFloat(_0x39c342[_0x4e01a1(0x288)]),0x0)/_0x139196['length'],_0x3134fa=_0x8ecc88[_0x4e01a1(0x1c5)]((_0x38d7f5,_0xdfa933)=>_0x38d7f5+_0xdfa933,0x0)/_0x8ecc88['length'];_0x26b5f3[_0x4e01a1(0x1e7)]({'requestsPerSecond':counter['getStats'](),'diskUsage':_0x5624d5,'cpus':_0x2810d0,'system':_0x7a1f59,'process':_0x27911e,'totalMonitoringData':_0x2a2f2f[_0x4e01a1(0x24f)],'memory':_0x5935be,'totalUsers':_0x543379,'avgConvertionTime':_0x467b93,'avgMemoryUsage':_0x3134fa});}),router[a26_0x55de58(0x1ae)](a26_0x55de58(0x1e6),(_0x128bcf,_0x2c3b76)=>{const _0x3279b7=a26_0x55de58;counter[_0x3279b7(0x1dc)](),_0x2c3b76[_0x3279b7(0x1e7)]({'message':_0x3279b7(0x2ce)});});function a26_0x1dfd(){const _0x55f51a=['Cache\x20cleaned\x20for\x20files\x20in\x20','Server\x20Settings','autodetect_location','execute','push','/logs','now','DWG','includes','.dwg','DWG\x20to\x20PDF\x20Conversion','File\x20or\x20Folder\x20not\x20found','.log\x22','replace','Exporting\x20new\x20users\x20for\x20Google\x20Ads...','usedMemPercentage','\x20users\x20to\x20','trim','Cache\x20directory\x20','mem','Config\x20updated\x20successfully','Log\x20file\x20cleaned.','email','hostname','../libs/config','length','setHeader','\x20days\x20have\x20been\x20deleted.','resolve','mode','linklistLocation','Error\x20cleaning\x20cache\x20for\x20user\x20files:','count','ServerPort','ContentSecurityPolicyReportOnly','uptime','radio|','/users/list','/content/redlines/v7/','Config\x20updated.','get','goodFileName','vmstats','Parameters\x20saved.','cadviewer/settings/style.css','zlib','/cache/csv/:file','Failed\x20to\x20retrieve\x20export\x20history','replaceAll','cadviewer/settings/config.html','428fXMVbp','cadviewer/settings/rest-api-parameters.json','model','JSON','rmSync','fileLoad_UserName','totalGB','User\x20directory\x20flushed\x20successfully','Exported\x20','isDirectory','params','cadviewer/settings/rest-api.html','162VEsqQQ','CADViewer\x20Settings','version','writeFile','autodetect_platform','/config/content','radio|monthly,biweekly','\x22exec\x22\x20command\x20activated\x20on\x20NodeJS','converter-files-analysis.json','updatedAt','number','send','application/octet-stream','SVGZ','/style.css','split','unlinkSync','cachedfiles','User\x20with\x20that\x20email\x20or\x20username\x20already\x20exists','windows','conversionTimeSpend','Read\x20and\x20write\x20permission\x20for\x20folder\x20','=============================>','Error\x20creating\x20folder.','25830lKfXEy','/users-export/history','/users-export/download/:fileName','linklist_executable_windows','autoxchange_executable_windows','.csv','Error\x20deleting\x20file','ServerUrl','.svgz','Error\x20updating\x20config','No\x20config\x20object\x20provided','svg','node-os-utils','\x22\x20executable','Error\x20saving\x20parameters.','body','filename','.pdf','Erreur\x20lors\x20de\x20l\x27analyse\x20des\x20fichiers\x20du\x20dossier\x20converters/files:\x20','File\x20deleted\x20successfully','array','/cache/files/:id','Database\x20Settings','CSV','cadviewer/settings/requests-callapiconversion-monitoring.json','./uploads/','folderLocation','`crypted_password`\x20=\x20?,\x20','ceil','/folders/upload','hash','file','Invalid\x20user','Folder\x20not\x20found.','getHotConfig','name','who','sendFile','cadviewer/settings/users.html','Le\x20dossier\x20','/tailwind.js','licenseLocation','utf8','conversionMemoryUsage','multer','type','temp_print_folder','.dwg.json','promise','keys','biweekly','path','Base\x20folder\x20not\x20exists,\x20please\x20verify\x20your\x20configuration.','svgz','folder_name','slice','\x20\x20\x20','usersExportFrequency','dir','Error\x20getting\x20process\x20info','0\x201\x20*\x20*\x20*','xpathLocation','.gitkeep','globalBearerAutenticationToken','cadviewer/settings/users-export.html','formatedSize','Counter\x20reset\x20successfully','Error\x20getting\x20total\x20users','callbackMethod','/cache/stats','birthtime','/metrics','purple','exports','Permission\x20750\x20for\x20the\x20\x22','dwg','\x20MB','Files\x20uploaded\x20successfully','Error\x20deleting\x20cache\x20file\x20','yellow','unlink','1121199MPnfft','/logs/content','Error\x20getting\x20memory\x20info','/conversion/memorydata','test','File\x20renamed.','/cache/files','used','all','Display\x20of\x20DWG','3235tDAefW','Error\x20getting\x20cache\x20stats:','cadviewer/settings/doctor.html','isFolder','whoami','node-schedule','endsWith','DwgMerge\x20Settings','cadviewer','copyFileSync','Folder\x20renamed.','getFullYear','fileLoad_Password','totalGb','cached_conversion','Cache\x20conversion','pdf','converters','role','percentage','W_OK','stringify','https','/converters/files/pdf/','forEach','DWG\x20to\x20SVG\x20Conversion','readdirSync','some','memorydata.csv','readFileSync','demoUserRetentionDays','Folder\x20created.','usedGB','/doctor','gunzipSync','usedMemMb','linklist_executable','avatar','setDate','readFile','Content-Disposition','mysqlPassword','query','.svg','getMonth','sub_dirs','Cache\x20flushed\x20successfully','cadviewer/settings/vanilla-toast.css','originalname','\x20GB','join','blocks','\x20KB','../libs/counter.js','converterpathWin','dwgmerge_executable_linux','dwgmerge_executable','write','Mail\x20Server\x20Settings','setMonth','DELETE\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','./tmp','ServerLocation','usage','atime','settingsPasswordBasicAuth','DELETE\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','message','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','Analyse\x20périodique\x20des\x20fichiers\x20du\x20dossier\x20converters/files\x20planifiée\x20(toutes\x20les\x20heures)','../CADViewer_config.json','`is_enabled`\x20=\x20?,\x20`role`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','linklist_executable_linux','filter','diskStorage','catch','drive','\x20n\x27existe\x20pas.','gray','/users/:userId','find','../libs/mysql.js','size','/restapi-test','darwin','/folders/create','.json',')\x20older\x20than\x20','6850GNfjow','JSON\x20Data\x20Extraction','call-Api_Conversion_','Failed\x20to\x20trigger\x20export','Error!\x20Something\x20went\x20wrong.','mimetype','Error\x20getting\x20disk\x20usage','Error\x20downloading\x20file.','cadviewer/settings/vanilla-toast.js','mkdir','availableFormats','0\x2023\x20*\x20*\x20*','ContentSecurityPolicy','1822072tUmrhf','usedPercentage','folderName','users-export-','createdAt','post','linux','platform','No\x20new\x20users\x20to\x20export\x20for\x20Google\x20Ads','Error\x20deleting\x20file.','cadviewer/settings/folders.html','toUpperCase','map','logs','No\x20files\x20uploaded','sort','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?','Demo\x20and\x20Base\x20User\x20Settings','R_OK','demo_user','0\x20*\x20*\x20*\x20*','toLocaleLowerCase','parse','cadviewer/settings/chart.min.js','image/svg+xml','Content-Type','access','extname','reduce','mkdirSync','SVG','total','freeGb','dwgmergeLocation','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','Error\x20getting\x20Users\x20export\x20export\x20history:','mysqlDatabase','files','getDate','/vanilla-toast.css','805182dwtugn','Error\x20flushing\x20cache:','oos','autoxchange_executable','Folder\x20deleted.','.png','X_OK','/export-users','cvjs_svgz_compress','autoxchange_executable_linux','single','reset','User\x20created\x20successfully','User\x20deleted\x20successfully','CADViewer_config.json','cadviewer/settings/converter-files-analysis.json','.log','/users-export/trigger','existsSync','{version}','callbackMethod_gatewayUrl_flag','/metrics/reset','json','put','Router','Error\x20finding\x20log\x20files:','constants','/restapi-test/parameters/save','avatar_url','../libs/email-utils','fileLocation','error','statSync','win32','status','first_name','====================','Failed\x20to\x20get\x20cache\x20stats','osCmd','splity','pop','/logs/clean','/cache','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20email,\x20first_name,\x20last_name,\x20created_at\x20\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20>\x20?\x20\x0a\x20\x20\x20\x20\x20\x20ORDER\x20BY\x20created_at\x20DESC\x0a\x20\x20\x20\x20','/folders/update','toString','settings','1062588IbrCWF','Users\x20export\x20triggered\x20successfully','Error\x20exporting\x20users\x20for\x20Google\x20Ads:','totalProcesses','info','user','/converters/autoxchange/linux/','dirname','UPDATE\x20`users`\x20SET\x20`avatar_url`\x20=\x20?,\x20`first_name`\x20=\x20?,\x20`last_name`\x20=\x20?,\x20`username`\x20=\x20?,\x20`email`\x20=\x20?,','last-users-export.json','/converters/files/','0\x200\x20*\x20*\x20*','User\x20updated\x20successfully','Error\x20getting\x20os\x20info','crypto','lastExportDate','then','delete','cadviewer/settings/icons.js','AutoXchange\x20Settings','child_process','boolean','390649dyHZbH','/converters/files/merged/','/users','*\x20*\x20*\x20*\x20*','RL/TL\x20Processing','mysqlUsername','bcrypt','fileLocationUrl','\x20does\x20not\x20exist.','standard','isFile','admin','scheduleJob','converterLocation','log','cadviewer/settings/conversion-cache.html','toFixed','Folder\x20already\x20exists.','cadviewer/settings/cache-stats.js','mysqlHost','callbackMethod_gatewayUrl','Directory\x20','===================error===================','An\x20error\x20occurred\x20while\x20checking.','/restapi-test/parameters/search','padStart','/folders','File\x20not\x20found','writeFileSync','Failed\x20to\x20flush\x20cache','DWG\x20file\x20in\x20multiple\x20files','main'];a26_0x1dfd=function(){return _0x55f51a;};return a26_0x1dfd();}function a26_0x5d1f(_0xaab905,_0xa048e2){const _0x1dfdf1=a26_0x1dfd();return a26_0x5d1f=function(_0x5d1f92,_0x181bd1){_0x5d1f92=_0x5d1f92-0x145;let _0x526394=_0x1dfdf1[_0x5d1f92];return _0x526394;},a26_0x5d1f(_0xaab905,_0xa048e2);}const getMonitoringData=()=>{const _0x43c3fa=a26_0x55de58,_0x27015f=_0x43c3fa(0x2a4);let _0x29ccda=[];try{_0x29ccda=JSON[_0x43c3fa(0x1bf)](fs[_0x43c3fa(0x161)](_0x27015f));}catch(_0x4472a0){console[_0x43c3fa(0x224)]('Error\x20reading\x20monitoring\x20file');}return _0x29ccda;};router[a26_0x55de58(0x25e)]('/conversion/list',async(_0x4e68e3,_0xe447e9)=>{const _0x32ee0a=a26_0x55de58,{page:page=0x1,limit:limit=0xa}=_0x4e68e3['query'],_0x3a3896=(page-0x1)*limit;try{const _0x4af507=getMonitoringData(),_0x4b30c5=_0x4af507['length'],_0x397d58=Math['ceil'](_0x4b30c5/limit),_0x2cf300=_0x4af507['slice'](_0x3a3896,_0x3a3896+limit);_0xe447e9[_0x32ee0a(0x1f3)](0xc8)[_0x32ee0a(0x1e7)]({'data':_0x2cf300,'page':parseInt(''+page),'totalPages':_0x397d58,'total':_0x4b30c5});}catch(_0x551497){console[_0x32ee0a(0x224)](_0x551497),_0xe447e9[_0x32ee0a(0x1f3)](0x1f4)[_0x32ee0a(0x1e7)]({'error':_0x32ee0a(0x1a0)});}}),router['delete']('/conversion/clean',async(_0x546132,_0x317717)=>{const _0x3bc842=a26_0x55de58,_0x25c3d9=_0x3bc842(0x2a4);try{fs[_0x3bc842(0x232)](_0x25c3d9,JSON[_0x3bc842(0x159)]([],null,0x4)),analyzeConverterFiles(),_0x317717[_0x3bc842(0x1f3)](0xc8)[_0x3bc842(0x1e7)]({'message':'Monitoring\x20file\x20cleaned.'});}catch(_0x42fdea){console[_0x3bc842(0x224)](_0x42fdea),_0x317717['status'](0x1f4)[_0x3bc842(0x1e7)]({'error':_0x3bc842(0x1a0)});}}),router[a26_0x55de58(0x25e)](a26_0x55de58(0x2e0),async(_0x35fd3b,_0x264ef7)=>{const _0x4ca5d0=a26_0x55de58,_0x50b676=getHotConfig()[_0x4ca5d0(0x223)][_0x4ca5d0(0x266)]('//','/'),{page:page=0x1,limit:limit=0xa}=_0x35fd3b[_0x4ca5d0(0x16e)],_0x3a2f77=(page-0x1)*limit;try{const _0x581e5a=_0x50b676+_0x4ca5d0(0x160);console['log'](_0x581e5a);const _0x179bb4=fs[_0x4ca5d0(0x161)](_0x581e5a,_0x4ca5d0(0x2b6)),_0xb131aa=_0x179bb4['split']('\x0a'),_0x204617=[];_0xb131aa['forEach'](_0x42d821=>{const _0x780b9b=_0x4ca5d0,_0x55fc81=_0x42d821['split'](',');if(_0x55fc81['length']<0x4)return;const _0x523e98=_0x55fc81[0x0],_0x2ae082=_0x55fc81[0x1],_0x23fca0=parseFloat(_0x55fc81[0x2]);_0x204617[_0x780b9b(0x23a)]({'file':_0x523e98[_0x780b9b(0x266)]('\x22',''),'action':_0x2ae082,'timeSpend':_0x23fca0,'memoryUsage':_0x55fc81[0x3]});});const _0x404e38=_0x204617[_0x4ca5d0(0x24f)],_0x124677=Math[_0x4ca5d0(0x2a8)](_0x404e38/limit),_0x1b8d56=_0x204617[_0x4ca5d0(0x2c3)](_0x3a2f77,_0x3a2f77+limit);_0x264ef7['status'](0xc8)[_0x4ca5d0(0x1e7)]({'data':_0x1b8d56,'page':parseInt(''+page),'totalPages':_0x124677,'total':_0x404e38});}catch(_0x2ec6b6){console[_0x4ca5d0(0x224)](_0x2ec6b6),_0x264ef7[_0x4ca5d0(0x1f3)](0x1f4)[_0x4ca5d0(0x1e7)]({'error':_0x4ca5d0(0x1a0)});}}),router['get'](a26_0x55de58(0x2d1),async(_0x5cf8d0,_0x189991)=>{const _0x4bb667=a26_0x55de58,_0x1bbdef=path[_0x4bb667(0x176)](path['dirname'](require[_0x4bb667(0x235)][_0x4bb667(0x29c)]),_0x4bb667(0x155),_0x4bb667(0x1ce));try{let _0xd2f7af=0x0,_0x425410=0x0;function _0x5cc3ee(_0x30eb89){const _0x1d733d=_0x4bb667;let _0x8d8379=0x0,_0x329ef5=0x0;if(fs[_0x1d733d(0x1e3)](_0x30eb89)){const _0x7b88b2=fs[_0x1d733d(0x15e)](_0x30eb89);_0x329ef5=0x0;for(const _0x17f311 of _0x7b88b2){const _0x37cf7a=path[_0x1d733d(0x176)](_0x30eb89,_0x17f311),_0xa55584=fs[_0x1d733d(0x1f1)](_0x37cf7a);if(_0xa55584[_0x1d733d(0x220)]()&&_0x17f311!==_0x1d733d(0x2ca))_0x329ef5++,_0x8d8379+=_0xa55584['size'];else{if(_0xa55584['isDirectory']()){}}}}return{'size':_0x8d8379,'count':_0x329ef5};}const _0x564a89=_0x5cc3ee(_0x1bbdef);_0xd2f7af=_0x564a89[_0x4bb667(0x196)],_0x425410=_0x564a89['count'],_0x189991[_0x4bb667(0x1e7)]({'fileCount':_0x425410,'totalSize':_0xd2f7af});}catch(_0x52c929){console[_0x4bb667(0x1f0)](_0x4bb667(0x145),_0x52c929),_0x189991[_0x4bb667(0x1f3)](0x1f4)[_0x4bb667(0x1e7)]({'error':_0x4bb667(0x1f6)});}}),router['delete']('/cache/flush',async(_0x376de1,_0x12b572)=>{const _0xfcf0b0=a26_0x55de58,_0x3f516e=path['join'](path['dirname'](require[_0xfcf0b0(0x235)][_0xfcf0b0(0x29c)]),_0xfcf0b0(0x155),_0xfcf0b0(0x1ce));try{function _0x2ae0a3(_0x5e2d1d){const _0x48803b=_0xfcf0b0;if(fs['existsSync'](_0x5e2d1d)){const _0x2326df=fs[_0x48803b(0x15e)](_0x5e2d1d);for(const _0x3da829 of _0x2326df){const _0x2809c9=path[_0x48803b(0x176)](_0x5e2d1d,_0x3da829),_0x503e27=fs[_0x48803b(0x1f1)](_0x2809c9);if(_0x503e27[_0x48803b(0x271)]()){}else _0x3da829!==_0x48803b(0x2ca)&&fs[_0x48803b(0x284)](_0x2809c9);}}}_0x2ae0a3(_0x3f516e),analyzeConverterFiles(),_0x12b572[_0xfcf0b0(0x1e7)]({'message':_0xfcf0b0(0x172)});}catch(_0x4cf0e9){console[_0xfcf0b0(0x1f0)](_0xfcf0b0(0x1d2),_0x4cf0e9),_0x12b572[_0xfcf0b0(0x1f3)](0x1f4)[_0xfcf0b0(0x1e7)]({'error':_0xfcf0b0(0x233)});}}),router[a26_0x55de58(0x25e)]('/cache-stats.js',async(_0x10688d,_0x5afb3f)=>{const _0x169e37=a26_0x55de58;_0x5afb3f[_0x169e37(0x2b1)](path[_0x169e37(0x176)](path['dirname'](require['main']['filename']),_0x169e37(0x228)));}),router['get'](a26_0x55de58(0x1fb),protectedRoute,async(_0x271bd7,_0x48cce2)=>{const _0x202f51=a26_0x55de58,_0x25d5aa=fs[_0x202f51(0x161)](path[_0x202f51(0x176)](path[_0x202f51(0x207)](require[_0x202f51(0x235)][_0x202f51(0x29c)]),_0x202f51(0x225)),'utf8'),_0x160657=_0x25d5aa[_0x202f51(0x266)](_0x202f51(0x1e4),_0x271bd7[_0x202f51(0x276)]);_0x48cce2['send'](_0x160657);}),router['get'](a26_0x55de58(0x2e3),async(_0x59bee6,_0xbfdb63)=>{const _0x30e0a4=a26_0x55de58,{page:page=0x1,limit:limit=0x10}=_0x59bee6[_0x30e0a4(0x16e)],_0x218aec=JSON[_0x30e0a4(0x1bf)](fs[_0x30e0a4(0x161)](path[_0x30e0a4(0x176)](path[_0x30e0a4(0x207)](require[_0x30e0a4(0x235)][_0x30e0a4(0x29c)]),_0x30e0a4(0x1e0)))),_0x121975=(page-0x1)*limit,_0x1c7f6b=page*limit,_0xe17a90=_0x218aec[_0x30e0a4(0x1ce)][_0x30e0a4(0x24f)],_0x3fb8a4=Math[_0x30e0a4(0x2a8)](_0xe17a90/limit),_0x442f0d=_0x218aec[_0x30e0a4(0x1ce)][_0x30e0a4(0x2c3)](_0x121975,_0x1c7f6b);_0xbfdb63[_0x30e0a4(0x1e7)]({'files':_0x442f0d,'pagination':{'total':_0xe17a90,'totalPages':_0x3fb8a4,'currentPage':parseInt(page),'limit':parseInt(limit)}});return;}),router['get'](a26_0x55de58(0x264),async(_0xd6483d,_0x338b9e)=>{const _0x4837fc=a26_0x55de58,{file:_0x328290}=_0xd6483d[_0x4837fc(0x272)],_0x569e2c=path[_0x4837fc(0x176)](path[_0x4837fc(0x207)](require[_0x4837fc(0x235)][_0x4837fc(0x29c)]),_0x4837fc(0x155),_0x4837fc(0x1ce)),_0x4fc9bd=path['join'](_0x569e2c,_0x328290),_0x4e8aee=fs['readFileSync'](_0x4fc9bd,_0x4837fc(0x2b6)),_0x2e5dcd=_0x4e8aee[_0x4837fc(0x283)]('\x0a'),_0x31d0b7=_0x2e5dcd[_0x4837fc(0x1b5)](_0x266325=>{const _0x320142=_0x4837fc,_0x45fba2=_0x266325[_0x320142(0x283)](',');return _0x45fba2[_0x320142(0x1b5)](_0x4431dc=>_0x4431dc['replaceAll']('\x22',''));});_0x338b9e['json'](_0x31d0b7);}),router['get']('/cache/files/:id',async(_0x10b6ab,_0xb9d31c)=>{const _0x49987b=a26_0x55de58,{id:_0x1d8e6d}=_0x10b6ab[_0x49987b(0x272)],_0xebefa3=path[_0x49987b(0x176)](path[_0x49987b(0x207)](require[_0x49987b(0x235)]['filename']),_0x49987b(0x155),_0x49987b(0x1ce)),_0x5073ed=path['join'](_0xebefa3,_0x1d8e6d);if(_0x5073ed[_0x49987b(0x14a)](_0x49987b(0x294))){var _0x570630=require(_0x49987b(0x263));const _0x52736a=fs[_0x49987b(0x161)](_0x5073ed),_0xc04c9c=_0x570630[_0x49987b(0x166)](_0x52736a);_0xb9d31c['setHeader'](_0x49987b(0x1c2),_0x49987b(0x1c1)),_0xb9d31c['send'](_0xc04c9c);}else _0xb9d31c['sendFile'](_0x5073ed);}),router['delete'](a26_0x55de58(0x2a1),async(_0x1d3c79,_0x5de6f9)=>{const _0x340bb2=a26_0x55de58,{id:_0x4fb860}=_0x1d3c79[_0x340bb2(0x272)],_0x4c09cc=path[_0x340bb2(0x176)](path[_0x340bb2(0x207)](require[_0x340bb2(0x235)][_0x340bb2(0x29c)]),_0x340bb2(0x155),_0x340bb2(0x1ce)),_0x2911fc=JSON['parse'](fs[_0x340bb2(0x161)](path['join'](path[_0x340bb2(0x207)](require[_0x340bb2(0x235)][_0x340bb2(0x29c)]),'cadviewer/settings/converter-files-analysis.json'))),_0x1e7ead=_0x2911fc[_0x340bb2(0x1ce)][_0x340bb2(0x194)](_0xace535=>_0xace535[_0x340bb2(0x2af)]===_0x4fb860);if(_0x1e7ead){try{fs['existsSync'](path[_0x340bb2(0x176)](_0x4c09cc,_0x1e7ead[_0x340bb2(0x2af)]))&&fs[_0x340bb2(0x284)](path['join'](_0x4c09cc,_0x1e7ead['name']));}catch(_0x58f295){console[_0x340bb2(0x224)](_0x340bb2(0x292),{'e':_0x58f295});}(_0x1e7ead['availableFormats']??[])['forEach'](_0x3e3a1c=>{const _0x507555=_0x340bb2;try{fs[_0x507555(0x1e3)](path[_0x507555(0x176)](_0x4c09cc,_0x3e3a1c['id']))&&fs['unlinkSync'](path[_0x507555(0x176)](_0x4c09cc,_0x3e3a1c['id']));}catch(_0x3a7fcf){console[_0x507555(0x224)]('Error\x20deleting\x20file',{'e':_0x3a7fcf});}});}analyzeConverterFiles(),_0x5de6f9['json']({'message':_0x340bb2(0x29f)});});const deleteOldDemoUsers=async()=>{const _0x1dc2df=a26_0x55de58;console[_0x1dc2df(0x224)]('Deleting\x20old\x20demo_user\x20accounts...');const _0xe89c82=config[_0x1dc2df(0x162)],_0x278168=_0x1dc2df(0x188);try{const [_0x312b10]=await conn[_0x1dc2df(0x2bc)]()[_0x1dc2df(0x239)](_0x278168,[_0xe89c82]),_0x13ee98=_0x312b10[_0x1dc2df(0x1b5)](_0x4e3773=>_0x4e3773[_0x1dc2df(0x2c2)]),_0x1fb009=_0x312b10['map'](_0x4fdc34=>_0x4fdc34[_0x1dc2df(0x24c)]);console[_0x1dc2df(0x224)](_0x1fb009),await conn[_0x1dc2df(0x2bc)]()[_0x1dc2df(0x239)](_0x1dc2df(0x186),[_0xe89c82]),_0x13ee98['forEach'](_0x5c4296=>{const _0x49569f=_0x1dc2df;try{const _0x32fdcd=_0x49569f(0x2a5)+_0x5c4296;cleanCacheForUserFiles(_0x32fdcd),fs['rmdirSync'](_0x32fdcd);}catch(_0x98b978){console[_0x49569f(0x1f0)]('Error\x20deleting\x20user\x20folder:',_0x98b978);}}),console['log']('Old\x20demo_user\x20accounts\x20('+_0x312b10[_0x1dc2df(0x24f)]+_0x1dc2df(0x19b)+_0xe89c82+_0x1dc2df(0x251));}catch(_0x36a345){console[_0x1dc2df(0x1f0)]('Error\x20deleting\x20old\x20demo_user\x20accounts:',_0x36a345);}};schedule[a26_0x55de58(0x222)](a26_0x55de58(0x2c8),deleteOldDemoUsers),router[a26_0x55de58(0x25e)](a26_0x55de58(0x1d8),protectedRoute,async(_0x1fdcad,_0x225dc2)=>{const _0x59a69c=a26_0x55de58,_0x4176cb=fs[_0x59a69c(0x161)](path[_0x59a69c(0x176)](path[_0x59a69c(0x207)](require[_0x59a69c(0x235)][_0x59a69c(0x29c)]),_0x59a69c(0x2cc)),_0x59a69c(0x2b6)),_0x508809=_0x4176cb[_0x59a69c(0x266)](_0x59a69c(0x1e4),_0x1fdcad[_0x59a69c(0x276)]);_0x225dc2[_0x59a69c(0x27f)](_0x508809);});const exportUsersList=async()=>{const _0x48e183=a26_0x55de58;console[_0x48e183(0x224)](_0x48e183(0x244));const _0x56d9f1=path[_0x48e183(0x176)](path[_0x48e183(0x207)](require[_0x48e183(0x235)][_0x48e183(0x29c)]),_0x48e183(0x2d5));!fs['existsSync'](_0x56d9f1)&&fs[_0x48e183(0x1c6)](_0x56d9f1);const _0x10ce42=config[_0x48e183(0x2c5)]||'monthly';let _0x47c644;const _0x4eefe8=path['join'](_0x56d9f1,_0x48e183(0x209));if(fs[_0x48e183(0x1e3)](_0x4eefe8))try{const _0x4b1d3a=JSON[_0x48e183(0x1bf)](fs[_0x48e183(0x161)](_0x4eefe8,'utf8'));_0x47c644=new Date(_0x4b1d3a[_0x48e183(0x20f)]);}catch(_0xf08e73){console[_0x48e183(0x1f0)]('Error\x20reading\x20last\x20export\x20info:',_0xf08e73),_0x47c644=calculateDefaultLastExportDate(_0x10ce42);}else _0x47c644=calculateDefaultLastExportDate(_0x10ce42);const _0x1dcde9=new Date(),_0xb804c=_0x1dcde9[_0x48e183(0x14f)]()+'-'+String(_0x1dcde9[_0x48e183(0x170)]()+0x1)[_0x48e183(0x22f)](0x2,'0')+'-'+String(_0x1dcde9[_0x48e183(0x1cf)]())[_0x48e183(0x22f)](0x2,'0'),_0x5b3ea0=_0x48e183(0x1ac)+_0xb804c+_0x48e183(0x291),_0x32d3dd=path[_0x48e183(0x176)](_0x56d9f1,_0x5b3ea0);try{const _0x14f2e8=_0x48e183(0x1fc),[_0x12d781]=await conn[_0x48e183(0x2bc)]()[_0x48e183(0x239)](_0x14f2e8,[_0x47c644]);if(_0x12d781[_0x48e183(0x24f)]===0x0){console[_0x48e183(0x224)](_0x48e183(0x1b1));return;}let _0x455301='email,firstname,lastname\x0a';_0x12d781['forEach'](_0x11951e=>{const _0x4bd452=_0x48e183,_0x77968d=_0x11951e[_0x4bd452(0x24c)]?'\x22'+_0x11951e[_0x4bd452(0x24c)]['replace'](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x2c7193=_0x11951e[_0x4bd452(0x1f4)]?'\x22'+_0x11951e[_0x4bd452(0x1f4)][_0x4bd452(0x243)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x31c1a4=_0x11951e['last_name']?'\x22'+_0x11951e['last_name'][_0x4bd452(0x243)](/"/g,'\x22\x22')+'\x22':'\x22\x22';_0x455301+=_0x77968d+','+_0x2c7193+','+_0x31c1a4+'\x0a';}),fs[_0x48e183(0x232)](_0x32d3dd,_0x455301),console[_0x48e183(0x224)](_0x48e183(0x270)+_0x12d781[_0x48e183(0x24f)]+_0x48e183(0x246)+_0x32d3dd);const _0x12e26={'lastExportDate':_0x1dcde9['toISOString'](),'fileName':_0x5b3ea0,'userCount':_0x12d781['length']};fs[_0x48e183(0x232)](_0x4eefe8,JSON[_0x48e183(0x159)](_0x12e26,null,0x2));}catch(_0x317763){console['error'](_0x48e183(0x202),_0x317763);}},calculateDefaultLastExportDate=_0x3392ba=>{const _0x586a2b=a26_0x55de58,_0x526a7e=new Date();return _0x3392ba===_0x586a2b(0x2be)?_0x526a7e[_0x586a2b(0x16a)](_0x526a7e[_0x586a2b(0x1cf)]()-0xe):_0x526a7e[_0x586a2b(0x17f)](_0x526a7e['getMonth']()-0x1),_0x526a7e;};router['get'](a26_0x55de58(0x28d),async(_0x223d49,_0x3ec501)=>{const _0x3515fc=a26_0x55de58,_0x4a4078=path['join'](path['dirname'](require[_0x3515fc(0x235)][_0x3515fc(0x29c)]),_0x3515fc(0x2d5));if(!fs[_0x3515fc(0x1e3)](_0x4a4078))return _0x3ec501[_0x3515fc(0x1f3)](0xc8)['json']({'exports':[]});try{const _0x1f3eb7=fs['readdirSync'](_0x4a4078)['filter'](_0x4bd00e=>_0x4bd00e['startsWith'](_0x3515fc(0x1ac))&&_0x4bd00e[_0x3515fc(0x14a)]('.csv'))[_0x3515fc(0x1b5)](_0x2a32a5=>{const _0x9a1d41=_0x3515fc,_0x184b9c=path[_0x9a1d41(0x176)](_0x4a4078,_0x2a32a5),_0x44506c=fs[_0x9a1d41(0x1f1)](_0x184b9c),_0x472391=fs['readFileSync'](_0x184b9c,_0x9a1d41(0x2b6)),_0x232911=_0x472391[_0x9a1d41(0x283)]('\x0a')[_0x9a1d41(0x24f)]-0x1;return{'fileName':_0x2a32a5,'createdAt':_0x44506c[_0x9a1d41(0x2d2)],'userCount':_0x232911};})[_0x3515fc(0x1b8)]((_0x246796,_0x2c00ac)=>_0x2c00ac[_0x3515fc(0x1ad)]-_0x246796[_0x3515fc(0x1ad)]);_0x3ec501[_0x3515fc(0x1f3)](0xc8)[_0x3515fc(0x1e7)]({'exports':_0x1f3eb7});}catch(_0x24116e){console[_0x3515fc(0x1f0)](_0x3515fc(0x1cc),_0x24116e),_0x3ec501[_0x3515fc(0x1f3)](0x1f4)[_0x3515fc(0x1e7)]({'error':_0x3515fc(0x265)});}}),router[a26_0x55de58(0x1ae)](a26_0x55de58(0x1e2),async(_0x141531,_0x2cb482)=>{const _0x410fdf=a26_0x55de58;try{await exportUsersList(),_0x2cb482[_0x410fdf(0x1f3)](0xc8)[_0x410fdf(0x1e7)]({'message':_0x410fdf(0x201)});}catch(_0x292662){console[_0x410fdf(0x1f0)]('Error\x20triggering\x20Users\x20export:',_0x292662),_0x2cb482[_0x410fdf(0x1f3)](0x1f4)[_0x410fdf(0x1e7)]({'error':_0x410fdf(0x19f)});}}),router[a26_0x55de58(0x25e)](a26_0x55de58(0x28e),async(_0x3cc6d4,_0x53222f)=>{const _0x1cb189=a26_0x55de58,{fileName:_0x4cd06e}=_0x3cc6d4[_0x1cb189(0x272)],_0x4df871=path[_0x1cb189(0x176)](path[_0x1cb189(0x207)](require[_0x1cb189(0x235)][_0x1cb189(0x29c)]),_0x1cb189(0x2d5),_0x4cd06e);if(!fs[_0x1cb189(0x1e3)](_0x4df871))return _0x53222f[_0x1cb189(0x1f3)](0x194)['json']({'error':'Export\x20file\x20not\x20found'});_0x53222f['download'](_0x4df871);});const cleanCacheForUserFiles=_0x3c2c4a=>{const _0x4e0dac=a26_0x55de58;try{if(!fs[_0x4e0dac(0x1e3)](_0x3c2c4a)){console[_0x4e0dac(0x224)](_0x4e0dac(0x22b)+_0x3c2c4a+_0x4e0dac(0x21e));return;}const _0x3d4f0e=path[_0x4e0dac(0x176)](path[_0x4e0dac(0x207)](require[_0x4e0dac(0x235)]['filename']),_0x4e0dac(0x155),_0x4e0dac(0x1ce));if(!fs[_0x4e0dac(0x1e3)](_0x3d4f0e)){console[_0x4e0dac(0x224)](_0x4e0dac(0x248)+_0x3d4f0e+_0x4e0dac(0x21e));return;}const _0x36ee5c=JSON[_0x4e0dac(0x1bf)](fs[_0x4e0dac(0x161)](path[_0x4e0dac(0x176)](path[_0x4e0dac(0x207)](require[_0x4e0dac(0x235)][_0x4e0dac(0x29c)]),'cadviewer/settings/converter-files-analysis.json'))),_0x4eeb98=fs[_0x4e0dac(0x15e)](_0x3c2c4a);_0x4eeb98[_0x4e0dac(0x15c)](_0x2bf833=>{const _0x4f896a=_0x4e0dac;_0x36ee5c[_0x4f896a(0x1ce)][_0x4f896a(0x15c)](_0x3da455=>{const _0x357e22=_0x4f896a;_0x3da455[_0x357e22(0x25f)]===_0x2bf833&&_0x3da455[_0x357e22(0x1a6)][_0x357e22(0x15c)](_0x3bc42c=>{const _0x1b03fa=_0x357e22;try{fs['unlinkSync'](path[_0x1b03fa(0x176)](_0x3d4f0e,_0x3bc42c['id']));}catch(_0x41e399){console[_0x1b03fa(0x1f0)](_0x1b03fa(0x2da)+_0x3bc42c['id']+':',_0x41e399);}});});}),analyzeConverterFiles(),console[_0x4e0dac(0x224)](_0x4e0dac(0x236)+_0x3c2c4a);}catch(_0x5898a7){console[_0x4e0dac(0x1f0)](_0x4e0dac(0x255),_0x5898a7);}};schedule[a26_0x55de58(0x222)](a26_0x55de58(0x1a7),exportUsersList),schedule[a26_0x55de58(0x222)](a26_0x55de58(0x1bd),sendFollowUpEmails),schedule[a26_0x55de58(0x222)](a26_0x55de58(0x20b),sendAccountDeletionPreventionEmails);const analyzeConverterFiles=()=>{const _0x1f2763=a26_0x55de58;try{const _0x29f3c4=path[_0x1f2763(0x176)](path['dirname'](require[_0x1f2763(0x235)][_0x1f2763(0x29c)]),'converters',_0x1f2763(0x1ce)),_0x45e97e=path[_0x1f2763(0x176)](path[_0x1f2763(0x207)](require['main']['filename']),_0x1f2763(0x14c),_0x1f2763(0x1ff));if(!fs['existsSync'](_0x29f3c4)){logStream[_0x1f2763(0x17d)](_0x1f2763(0x2b3)+_0x29f3c4+_0x1f2763(0x191));return;}if(!fs[_0x1f2763(0x1e3)](_0x45e97e)){logStream[_0x1f2763(0x17d)](_0x1f2763(0x2b3)+_0x45e97e+_0x1f2763(0x191));return;}const _0x3cae8f=fs[_0x1f2763(0x15e)](_0x29f3c4),_0x41cb51={};_0x3cae8f['forEach'](_0x59b5e2=>{const _0x2a2e16=_0x1f2763,_0x1fef47=path[_0x2a2e16(0x176)](_0x29f3c4,_0x59b5e2),_0x8013d8=fs['statSync'](_0x1fef47),_0x34d55a=_0x59b5e2['split']('.'),_0xbc542c=_0x34d55a['slice'](0x0,-0x1)[_0x2a2e16(0x18d)]((_0x1b6a66,_0x382624)=>!([_0x2a2e16(0x2d7),'rl']['includes'](_0x1b6a66[_0x2a2e16(0x1be)]())&&_0x382624===_0x34d55a[_0x2a2e16(0x24f)]-0x2))[_0x2a2e16(0x176)]('.');!Object[_0x2a2e16(0x2bd)](_0x41cb51)[_0x2a2e16(0x23e)](_0xbc542c)?_0x41cb51[_0xbc542c]=[{'file':_0x59b5e2,'stats':_0x8013d8}]:_0x41cb51[_0xbc542c][_0x2a2e16(0x23a)]({'file':_0x59b5e2,'stats':_0x8013d8});});const _0x2c6ced=[];_0x3cae8f[_0x1f2763(0x15c)](_0x40709a=>{const _0x6035ee=_0x1f2763;if(!_0x40709a[_0x6035ee(0x14a)](_0x6035ee(0x2bb)))return;let _0x6cc60f=_0x40709a;const _0x2dd7d3=path['join'](_0x29f3c4,_0x40709a),_0x27b9a2=fs[_0x6035ee(0x1f1)](_0x2dd7d3);let _0x479c8d=_0x27b9a2[_0x6035ee(0x196)],_0x5e03de='';const _0xa2d47c=fs[_0x6035ee(0x161)](_0x2dd7d3,_0x6035ee(0x2b6)),_0x2c0429=JSON[_0x6035ee(0x1bf)](_0xa2d47c),_0x3c03e5=_0x2c0429[_0x6035ee(0x285)]?.['map'](_0x49859d=>_0x49859d['fileName'])??[];if(_0x2c0429['filename'])_0x6cc60f=_0x2c0429[_0x6035ee(0x29c)];const _0x49828b=_0x40709a[_0x6035ee(0x283)]('.'),_0x217333=_0x49828b[_0x6035ee(0x2c3)](0x0,-0x1)[_0x6035ee(0x18d)]((_0x117a7f,_0x16366b)=>!([_0x6035ee(0x2d7),'rl']['includes'](_0x117a7f[_0x6035ee(0x1be)]())&&_0x16366b===_0x49828b[_0x6035ee(0x24f)]-0x2))['join']('.'),_0x214dc9=Object[_0x6035ee(0x2bd)](_0x41cb51)[_0x6035ee(0x23e)](_0x217333)?_0x41cb51[_0x217333]:[];for(const _0x1e5e1e of _0x3c03e5){Object[_0x6035ee(0x2bd)](_0x41cb51)[_0x6035ee(0x23e)](_0x1e5e1e)&&_0x214dc9['push'](..._0x41cb51[_0x1e5e1e]);}const _0x4a7f5d=_0x214dc9[_0x6035ee(0x1b5)](({file:_0xc177bb,stats:_0x130974})=>{const _0x41c4e8=_0x6035ee;return!_0xc177bb['endsWith'](_0x41c4e8(0x2bb))&&(_0x479c8d+=_0x130974[_0x41c4e8(0x196)]),{'id':_0xc177bb,'name':_0xc177bb[_0x41c4e8(0x14a)](_0x41c4e8(0x16f))?_0x41c4e8(0x1c7):_0xc177bb['endsWith'](_0x41c4e8(0x294))?_0x41c4e8(0x281):_0xc177bb[_0x41c4e8(0x14a)](_0x41c4e8(0x29d))?'PDF':_0xc177bb[_0x41c4e8(0x14a)](_0x41c4e8(0x19a))?_0x41c4e8(0x26b):_0xc177bb[_0x41c4e8(0x14a)](_0x41c4e8(0x291))?_0x41c4e8(0x2a3):_0xc177bb[_0x41c4e8(0x14a)](_0x41c4e8(0x23f))?_0x41c4e8(0x23d):_0xc177bb[_0x41c4e8(0x283)]('.')[_0x41c4e8(0x1f9)]()[_0x41c4e8(0x1b4)](),'color':_0xc177bb[_0x41c4e8(0x14a)]('.svg')||_0xc177bb[_0x41c4e8(0x14a)](_0x41c4e8(0x294))?_0x41c4e8(0x2db):_0xc177bb['endsWith'](_0x41c4e8(0x29d))?'red':_0xc177bb[_0x41c4e8(0x14a)](_0x41c4e8(0x19a))?_0x41c4e8(0x192):_0xc177bb[_0x41c4e8(0x14a)](_0x41c4e8(0x291))?'green':_0xc177bb[_0x41c4e8(0x14a)](_0x41c4e8(0x23f))?'blue':_0x41c4e8(0x2d4)};});if(_0x4a7f5d[_0x6035ee(0x15f)](_0x4da580=>_0x4da580['id']['includes']('.rl.json')))_0x5e03de=_0x6035ee(0x21a);else{if(_0x4a7f5d['some'](_0x1e3a41=>[_0x6035ee(0x297),_0x6035ee(0x2c1)][_0x6035ee(0x23e)](_0x1e3a41['id'][_0x6035ee(0x283)]('.')['pop']()))&&_0x4a7f5d['some'](_0x262f0c=>['csv'][_0x6035ee(0x23e)](_0x262f0c['id'][_0x6035ee(0x283)]('.')[_0x6035ee(0x1f9)]())))_0x5e03de=_0x6035ee(0x15d);else{if(_0x4a7f5d['some'](_0x5a9601=>[_0x6035ee(0x297),_0x6035ee(0x2c1)][_0x6035ee(0x23e)](_0x5a9601['id']['split']('.')['pop']())))_0x5e03de=_0x6035ee(0x2e6);else{if(_0x4a7f5d['some'](_0x2d0e4a=>['json'][_0x6035ee(0x23e)](_0x2d0e4a['id'][_0x6035ee(0x283)]('.')['pop']()))&&_0x4a7f5d[_0x6035ee(0x15f)](_0x22c67a=>['dwg'][_0x6035ee(0x23e)](_0x22c67a['id'][_0x6035ee(0x283)]('.')[_0x6035ee(0x1f9)]())))_0x5e03de=_0x6035ee(0x19d);else{if(_0x4a7f5d[_0x6035ee(0x15f)](_0x1501ca=>[_0x6035ee(0x154)]['includes'](_0x1501ca['id']['split']('.')['pop']())))_0x5e03de=_0x6035ee(0x240);else{if(_0x4a7f5d[_0x6035ee(0x15f)](_0x294bec=>[_0x6035ee(0x1e7)][_0x6035ee(0x23e)](_0x294bec['id'][_0x6035ee(0x283)]('.')[_0x6035ee(0x1f9)]()))&&!_0x4a7f5d[_0x6035ee(0x15f)](_0x473fe7=>[_0x6035ee(0x2d7)][_0x6035ee(0x23e)](_0x473fe7['id'][_0x6035ee(0x283)]('.')[_0x6035ee(0x1f9)]())))_0x5e03de=_0x6035ee(0x234);else _0x4a7f5d[_0x6035ee(0x15f)](_0x3ee03e=>['json'][_0x6035ee(0x23e)](_0x3ee03e['id'][_0x6035ee(0x283)]('.')[_0x6035ee(0x1f9)]()))&&(_0x5e03de=_0x6035ee(0x153));}}}}}_0x2c6ced['push']({'name':_0x40709a,'goodFileName':_0x6cc60f,'size':_0x479c8d,'createdAt':_0x27b9a2['birthtime'],'updatedAt':_0x27b9a2['ctime'],'readAt':_0x27b9a2[_0x6035ee(0x184)],'action':_0x5e03de,'availableFormats':_0x4a7f5d});}),_0x2c6ced[_0x1f2763(0x1b8)]((_0x116daa,_0x5a7c72)=>_0x5a7c72[_0x1f2763(0x27d)]-_0x116daa['updatedAt']);const _0x4350f6={'timestamp':new Date(),'totalFiles':_0x2c6ced[_0x1f2763(0x24f)],'files':_0x2c6ced},_0x2d90ac=path[_0x1f2763(0x176)](_0x45e97e,_0x1f2763(0x27c));fs[_0x1f2763(0x232)](_0x2d90ac,JSON[_0x1f2763(0x159)](_0x4350f6,null,0x2));}catch(_0x491b7f){console[_0x1f2763(0x224)](_0x1f2763(0x22c)),console[_0x1f2763(0x224)](_0x1f2763(0x29e)+_0x491b7f[_0x1f2763(0x187)]);}},scheduleFileAnalysis=()=>{const _0x536601=a26_0x55de58;analyzeConverterFiles(),schedule[_0x536601(0x222)](_0x536601(0x219),analyzeConverterFiles),logStream['write'](_0x536601(0x189));};scheduleFileAnalysis(),module[a26_0x55de58(0x2d5)]={'router':router,'analyzeConverterFiles':analyzeConverterFiles};
const a27_0x4e4db8=a27_0x26cb;function a27_0x4a95(){const _0x255351=['folderLocation','tmp','Old\x20demo_user\x20accounts\x20(','\x20\x20\x20','6ssdfXi','DWG\x20to\x20SVG\x20Conversion','mem','cpu','Error\x20reading\x20last\x20export\x20info:','setDate','/conversion/list','/converters/files/','*\x20*\x20*\x20*\x20*','single','push','autodetect_location','updatedAt','mkdirSync','dir','cadviewer/settings/vanilla-toast.js','array','filter','Erreur\x20lors\x20de\x20l\x27analyse\x20des\x20fichiers\x20du\x20dossier\x20converters/files:\x20','DWG','query','Failed\x20to\x20flush\x20cache','An\x20error\x20occurred\x20while\x20checking.','/folders/update','path','slice','Error\x20creating\x20folder.','sendFile','/metrics/reset','Error\x20deleting\x20folder.','File\x20deleted\x20successfully','avatars/','getHotConfig','/licences','cachedfiles','cadviewer/settings/doctor.html','dwg','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20(`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?)\x20AND\x20`id`\x20!=\x20?','Error\x20flushing\x20cache:','====================','zombieProcesses','linklist_executable','Users\x20export\x20triggered\x20successfully','Error\x20getting\x20process\x20info','name','cadviewer/settings/style.css','../libs/counter.js','extname','converters','cadviewer/settings/tailwind.js','cadviewer/settings/icons.js','first_name','get','node-schedule','autoxchange_executable_linux','application/octet-stream','ServerUrl','lastExportDate','send','avatar_url','mkdir','Exported\x20','cadviewer/settings/users.html','createdAt','cached_conversion','Error\x20saving\x20parameters.','3902451fhuZjk','unlinkSync','Deleting\x20old\x20demo_user\x20accounts...','../libs/config','unlink','.dwg','split','log','status','rmdirSync','Le\x20dossier\x20','File\x20deleted.','padStart','originalname','mysqlHost','version','/cache/files/:id','getFullYear','ctime','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','ContentSecurityPolicy','fileLoad_Password','birthtime','/users/flush-dir','Error\x20getting\x20total\x20users','converterpathLin','cadviewer/settings/chart.min.js','role','LinkList\x20Settings','Error!\x20Something\x20went\x20wrong.','Error\x20deleting\x20file','admin','CADViewer_config.json','.svgz','/logs','dirname','Error\x20deleting\x20file.','getMonth','fileName','blocks','/converters/files/merged/','Display\x20of\x20DWG','pop','W_OK','dwgmergeLocation','formatedSize','cadviewer/settings/home.html','Writing\x20to\x20the\x20log\x20file\x20\x22call-Api_Conversion_','User\x20with\x20that\x20email\x20or\x20username\x20already\x20exists','dwgmerge_executable','info','map','existsSync','purple','\x20days\x20have\x20been\x20deleted.','stringify','cvjs_svgz_compress','Error\x20getting\x20disk\x20usage','last_name','resolve','join','Failed\x20to\x20trigger\x20export','standard','Folder\x20not\x20found.','DWG\x20to\x20PDF\x20Conversion','access','multer','radio|windows,linux','User\x20updated\x20successfully','CADViewer\x20Settings','file','No\x20config\x20object\x20provided','/vanilla-toast.css','totalMemMb','xpathLocation','sort','count','delete','usage','isDirectory','User\x20created\x20successfully','3576ekHPUQ','INSERT\x20INTO\x20`users`\x20(`avatar_url`,\x20`first_name`,\x20`last_name`,\x20`username`,\x20`email`,\x20`crypted_password`,\x20`role`,\x20`is_enabled`,\x20`folder_name`)\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','converterLocation','linklist_executable_linux','length','/converters/autoxchange/linux/','radio|','users-export-','proc','0\x200\x20*\x20*\x20*','/config/global-update','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?','PDF','test','csv','exports','fileLocation','Error\x20exporting\x20users\x20for\x20Google\x20Ads:','folder_name','Server\x20Settings','temp_print_folder','Mail\x20Server\x20Settings','User\x20directory\x20flushed\x20successfully','biweekly','SVGZ','/conversion/clean','yellow','File\x20not\x20found','fileLocationUrl','who','\x20n\x27existe\x20pas.','usedMemPercentage','.log','keys','readdirSync','drive','svg','number','demo_user','folderName','/tailwind.js','/logs/content','rmSync','/users/:userId','Read\x20and\x20write\x20permission\x20for\x20folder\x20','40OYvsSN','params','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20email,\x20first_name,\x20last_name,\x20created_at\x20\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x20\x0a\x20\x20\x20\x20\x20\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20>\x20?\x20\x0a\x20\x20\x20\x20\x20\x20ORDER\x20BY\x20created_at\x20DESC\x0a\x20\x20\x20\x20','linklist_executable_windows','conversionTimeSpend','getDate','converter-files-analysis.json','\x20does\x20not\x20exist.','hash','usedGB','/vanilla-toast.js','fontLocation','Folder\x20created.','bcrypt','JSON\x20Data\x20Extraction','/cache-stats.js','pdf','Error\x20finding\x20log\x20files:','find','type','settings','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)',')\x20older\x20than\x20','\x22\x20executable','green','sub_dirs','4940622rymmEM','`is_enabled`\x20=\x20?,\x20`role`\x20=\x20?\x20WHERE\x20`id`\x20=\x20?','error','Log\x20file\x20cleaned.','.log\x22','146884AUwWLQ','demoUserRetentionDays','=============================>','linux','whoami','cadviewer/settings/rest-api-parameters.json','0\x20*\x20*\x20*\x20*','662dRoZJE','0\x2023\x20*\x20*\x20*','ceil','Error\x20downloading\x20file.','call-Api_Conversion_','darwin','post','readFile','\x22exec\x22\x20command\x20activated\x20on\x20NodeJS','write','X_OK','monthly','/doctor','scheduleJob','DwgMerge\x20Settings','radio|monthly,biweekly','parse','mysqlUsername','email,firstname,lastname\x0a','win32','hlall','replace','toString','cadviewer/settings/cache-stats.js','Router','getStats','Invalid\x20user','replaceAll','statSync','toFixed','/users','blue','licenseLocation','forEach','.dwg.json','.rl.json','cadviewer/settings/logs.html','now','promise','endsWith','callbackMethod_gatewayUrl_flag','percentage','Folder\x20renamed.','Cache\x20conversion','download','reduce','/folders','Error\x20triggering\x20Users\x20export:','catch','/export-users','Export\x20file\x20not\x20found','uptime','filename','model','usedPercentage','toUpperCase','ContentSecurityPolicyReportOnly','.pdf','Error\x20cleaning\x20cache\x20for\x20user\x20files:','setHeader','main','/converters/files/pdf/','image/svg+xml','Error\x20getting\x20cache\x20stats:','mimetype','callbackMethod_gatewayUrl','Error\x20getting\x20cpu\x20usage','SVG','mysqlDatabase','\x20MB','autodetect_platform','Error\x20reading\x20monitoring\x20file','594915tPHMbt','4656552iUrJgN','attachment;\x20filename=\x22','json','execute','toLocaleLowerCase','some','mysqlPassword','cadviewer/settings/requests-callapiconversion-monitoring.json','renameSync','/content/redlines/','svgz','put','boolean','2094880sDVJxY','/restapi-test','writeFile','Permission\x20750\x20for\x20the\x20\x22','Error\x20getting\x20Users\x20export\x20export\x20history:','Error\x20getting\x20memory\x20info','dwgmerge_executable_linux','/cache/flush','windows','Content-Type','settingsUserBasicAuth','\x20GB','Config\x20updated\x20successfully','UPDATE\x20`users`\x20SET\x20`avatar_url`\x20=\x20?,\x20`first_name`\x20=\x20?,\x20`last_name`\x20=\x20?,\x20`username`\x20=\x20?,\x20`email`\x20=\x20?,','setMonth','writeFileSync','cadviewer/settings/rest-api.html','utf8','Error\x20deleting\x20cache\x20file\x20','arch','ServerPort','rmdir','/folders/create','/users/list','{version}','Error\x20deleting\x20old\x20demo_user\x20accounts:','red','constants','user','size','isFile','totalGB','linklistLocation','body','SELECT\x20*\x20FROM\x20users','gunzipSync','No\x20files\x20uploaded','CSV','conversionMemoryUsage','readFileSync','oos','child_process','/config','/config/content','File\x20or\x20Folder\x20not\x20found','autoxchange_executable','usedGb','Base\x20folder\x20not\x20exists,\x20please\x20verify\x20your\x20configuration.','message','\x20users\x20to\x20','/icons.js','logs','0\x201\x20*\x20*\x20*','cadviewer/settings/licences.html','Database\x20Settings','isFolder','hostname','Monitoring\x20file\x20cleaned.','Folder\x20deleted.','.csv','totalProcesses','userId','dwgmerge_executable_windows','files','callbackMethod','.json','DWG\x20file\x20in\x20multiple\x20files','express','autoxchange_executable_windows','.gitkeep','mode','../libs/mysql.js','osCmd','trim','cadviewer/settings/conversion-cache.html','AutoXchange\x20Settings','includes','usersExportFrequency','atime','https','/content/redlines/v7/','./uploads/','globalBearerAutentication','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?\x20OR\x20`username`\x20=\x20?','Error\x20deleting\x20user\x20folder:','cadviewer/settings/config.html','File\x20renamed.','platform','copyFileSync','toISOString','Config\x20updated.','goodFileName','converterpathWin','/users-export/download/:fileName','./tmp','ServerLocation','diskStorage','.svg','cadviewer/settings/users-export.html','`crypted_password`\x20=\x20?,\x20','email','availableFormats','cadviewer/settings/converter-files-analysis.json','total','last-users-export.json','/restapi-test/parameters/save','then','Directory\x20'];a27_0x4a95=function(){return _0x255351;};return a27_0x4a95();}(function(_0x128bc2,_0x13bbd3){const _0xbc9410=a27_0x26cb,_0x3e76cb=_0x128bc2();while(!![]){try{const _0x3761c3=parseInt(_0xbc9410(0x245))/0x1+parseInt(_0xbc9410(0x1fd))/0x2*(parseInt(_0xbc9410(0x1aa))/0x3)+-parseInt(_0xbc9410(0x1f6))/0x4+parseInt(_0xbc9410(0x253))/0x5+-parseInt(_0xbc9410(0x2c3))/0x6*(-parseInt(_0xbc9410(0x159))/0x7)+parseInt(_0xbc9410(0x246))/0x8+parseInt(_0xbc9410(0x1f1))/0x9*(-parseInt(_0xbc9410(0x1d7))/0xa);if(_0x3761c3===_0x13bbd3)break;else _0x3e76cb['push'](_0x3e76cb['shift']());}catch(_0x4af26a){_0x3e76cb['push'](_0x3e76cb['shift']());}}}(a27_0x4a95,0x4d03c));const express=require(a27_0x4e4db8(0x296)),router=express[a27_0x4e4db8(0x215)](),multer=require(a27_0x4e4db8(0x19b)),fs=require('fs'),path=require(a27_0x4e4db8(0x2db)),getHotConfig=require(a27_0x4e4db8(0x15c))[a27_0x4e4db8(0x2e3)],{exec}=require(a27_0x4e4db8(0x27c)),os=require('os'),conn=require(a27_0x4e4db8(0x29a)),bcrypt=require(a27_0x4e4db8(0x1e4)),osu=require('node-os-utils'),schedule=require(a27_0x4e4db8(0x2f8)),counter=require(a27_0x4e4db8(0x2f1)),{randomUUID}=require('crypto'),logStream=require('../libs/log'),config=require('../CADViewer_config.json'),basicAuth=require('express-basic-auth'),{sendFollowUpEmails,sendAccountDeletionPreventionEmails}=require('../libs/email-utils'),protectedRoute=basicAuth({'users':{[config[a27_0x4e4db8(0x25d)]]:config['settingsPasswordBasicAuth']},'challenge':!![],'realm':a27_0x4e4db8(0x19e)});router[a27_0x4e4db8(0x2f7)](a27_0x4e4db8(0x1d2),async(_0x22edc3,_0x953b71)=>{const _0x45952e=a27_0x4e4db8;_0x953b71['sendFile'](path[_0x45952e(0x195)](path[_0x45952e(0x17c)](require[_0x45952e(0x239)]['filename']),_0x45952e(0x2f4)));}),router[a27_0x4e4db8(0x2f7)]('/chart.min.js',async(_0x3f95a7,_0x7fbbc7)=>{const _0x39f906=a27_0x4e4db8;_0x7fbbc7[_0x39f906(0x2de)](path[_0x39f906(0x195)](path[_0x39f906(0x17c)](require[_0x39f906(0x239)][_0x39f906(0x231)]),_0x39f906(0x173)));}),router['get']('/style.css',async(_0x46127a,_0x20f14b)=>{const _0x28f313=a27_0x4e4db8;_0x20f14b[_0x28f313(0x2de)](path[_0x28f313(0x195)](path[_0x28f313(0x17c)](require[_0x28f313(0x239)][_0x28f313(0x231)]),_0x28f313(0x2f0)));}),router[a27_0x4e4db8(0x2f7)](a27_0x4e4db8(0x1a1),async(_0x35ce4d,_0x3c4f2b)=>{const _0xffa6cd=a27_0x4e4db8;_0x3c4f2b['sendFile'](path[_0xffa6cd(0x195)](path['dirname'](require['main'][_0xffa6cd(0x231)]),'cadviewer/settings/vanilla-toast.css'));}),router['get'](a27_0x4e4db8(0x1e1),async(_0x3d4aac,_0x8eeb95)=>{const _0xf51a5c=a27_0x4e4db8;_0x8eeb95[_0xf51a5c(0x2de)](path[_0xf51a5c(0x195)](path[_0xf51a5c(0x17c)](require[_0xf51a5c(0x239)][_0xf51a5c(0x231)]),_0xf51a5c(0x2d2)));}),router[a27_0x4e4db8(0x2f7)](a27_0x4e4db8(0x285),async(_0x132f25,_0x450611)=>{const _0x1d9c23=a27_0x4e4db8;_0x450611[_0x1d9c23(0x2de)](path[_0x1d9c23(0x195)](path['dirname'](require[_0x1d9c23(0x239)]['filename']),_0x1d9c23(0x2f5)));}),router[a27_0x4e4db8(0x2f7)]('/',protectedRoute,async(_0x4f04f5,_0x37cc96)=>{const _0x5db473=a27_0x4e4db8,_0x18f38a=fs[_0x5db473(0x27a)](path[_0x5db473(0x195)](path[_0x5db473(0x17c)](require['main'][_0x5db473(0x231)]),_0x5db473(0x187)),_0x5db473(0x264)),_0x517732=_0x18f38a[_0x5db473(0x218)]('{version}',_0x4f04f5['version']);_0x37cc96[_0x5db473(0x2fd)](_0x517732);}),router[a27_0x4e4db8(0x2f7)](a27_0x4e4db8(0x2e4),protectedRoute,async(_0x41be2f,_0x21679b)=>{const _0x1876da=a27_0x4e4db8,_0xd82c1=fs[_0x1876da(0x27a)](path[_0x1876da(0x195)](path[_0x1876da(0x17c)](require[_0x1876da(0x239)][_0x1876da(0x231)]),_0x1876da(0x288)),'utf8'),_0x37a81c=_0xd82c1[_0x1876da(0x218)](_0x1876da(0x26b),_0x41be2f[_0x1876da(0x168)]);_0x21679b[_0x1876da(0x2fd)](_0x37a81c);}),router[a27_0x4e4db8(0x2f7)](a27_0x4e4db8(0x27d),protectedRoute,async(_0x1e9e19,_0x402857)=>{const _0x47c22f=a27_0x4e4db8,_0x474ec6=fs['readFileSync'](path['join'](path['dirname'](require['main'][_0x47c22f(0x231)]),_0x47c22f(0x2a8)),'utf8'),_0x589765=_0x474ec6[_0x47c22f(0x218)](_0x47c22f(0x26b),_0x1e9e19['version']);_0x402857[_0x47c22f(0x2fd)](_0x589765);}),router[a27_0x4e4db8(0x2f7)](a27_0x4e4db8(0x22b),protectedRoute,async(_0x10b812,_0x2f9b5f)=>{const _0x6e567=a27_0x4e4db8,_0xb3c6fc=fs['readFileSync'](path['join'](path[_0x6e567(0x17c)](require['main'][_0x6e567(0x231)]),'cadviewer/settings/folders.html'),_0x6e567(0x264)),_0x346b91=_0xb3c6fc['replaceAll'](_0x6e567(0x26b),_0x10b812['version']);_0x2f9b5f[_0x6e567(0x2fd)](_0x346b91);}),router['post'](a27_0x4e4db8(0x22b),async(_0x18aadf,_0x1f7348)=>{const _0x55ccb3=a27_0x4e4db8,_0x55b975=path[_0x55ccb3(0x195)](path[_0x55ccb3(0x17c)](require[_0x55ccb3(0x239)]['filename']),'CADViewer_config.json'),_0x2788cb=JSON['parse'](fs[_0x55ccb3(0x27a)](_0x55b975,_0x55ccb3(0x264))),_0x438a2a=_0x2788cb['folderLocation'];if(!fs[_0x55ccb3(0x18d)](_0x438a2a))return _0x1f7348[_0x55ccb3(0x161)](0x194)[_0x55ccb3(0x248)]({'message':_0x55ccb3(0x282)});const _0x48b499=_0x27bc8a=>{const _0x1406f3=_0x55ccb3;let _0x43c99b=0x0;return _0x27bc8a[_0x1406f3(0x21e)](_0x24004b=>{const _0x21cf7b=_0x1406f3;_0x24004b[_0x21cf7b(0x28a)]?_0x43c99b+=_0x48b499(_0x24004b[_0x21cf7b(0x1f0)]):_0x43c99b+=_0x24004b[_0x21cf7b(0x270)];}),_0x43c99b;},_0xb60480=_0x370956=>{const _0x11a537=_0x55ccb3;if(_0x370956<0x400)return _0x370956+'\x20B';else{if(_0x370956<0x400*0x400)return(_0x370956/0x400)[_0x11a537(0x21a)](0x2)+'\x20KB';else return _0x370956<0x400*0x400*0x400?(_0x370956/0x400/0x400)[_0x11a537(0x21a)](0x2)+_0x11a537(0x242):(_0x370956/0x400/0x400/0x400)[_0x11a537(0x21a)](0x2)+_0x11a537(0x25e);}},_0x256685=(_0x3bf19a,_0x2c3e39='')=>{const _0x2969ae=_0x55ccb3,_0x26fc8e=fs['readdirSync'](_0x3bf19a),_0x2f76cf=[];return _0x26fc8e[_0x2969ae(0x21e)](_0x22cd7f=>{const _0x2ef37b=_0x2969ae,_0x1cfd32=path[_0x2ef37b(0x195)](_0x3bf19a,_0x22cd7f)['replaceAll']('\x5c','/'),_0x1833e5=fs[_0x2ef37b(0x219)](_0x1cfd32);if(_0x1833e5[_0x2ef37b(0x1a8)]()){const _0x39556a=_0x256685(_0x1cfd32,_0x2c3e39+_0x2ef37b(0x2c2));_0x2f76cf[_0x2ef37b(0x2cd)]({'name':_0x22cd7f,'size':_0x1833e5[_0x2ef37b(0x270)],'path':_0x1cfd32,'permissions':_0x1833e5[_0x2ef37b(0x299)],'isFolder':!![],'sub_dirs':_0x39556a});}else _0x2f76cf['push']({'name':_0x22cd7f,'size':_0x1833e5['size'],'path':_0x1cfd32,'permissions':_0x1833e5[_0x2ef37b(0x299)],'isFolder':![]});}),_0x2f76cf;};let _0x2184a2=_0x256685(_0x438a2a);const _0x4b45da=_0x38e418=>{const _0x3d1025=_0x55ccb3;return _0x38e418[_0x3d1025(0x21e)](_0x25ea0c=>{const _0x19fd58=_0x3d1025;_0x25ea0c['isFolder']?(_0x25ea0c[_0x19fd58(0x186)]=_0xb60480(_0x48b499(_0x25ea0c[_0x19fd58(0x1f0)])),_0x25ea0c['sub_dirs']=_0x4b45da(_0x25ea0c['sub_dirs'])):_0x25ea0c['formatedSize']=_0xb60480(_0x25ea0c[_0x19fd58(0x270)]);}),_0x38e418;};_0x1f7348[_0x55ccb3(0x161)](0xc8)[_0x55ccb3(0x248)](_0x4b45da(_0x2184a2));}),router[a27_0x4e4db8(0x203)]('/folders/download',async(_0x43a36a,_0x211aa2)=>{const _0x24e772=a27_0x4e4db8,{path:_0x1fb3b3}=_0x43a36a[_0x24e772(0x274)],_0x2878e2=_0x1fb3b3['split']('/')[_0x24e772(0x183)]();if(!fs['existsSync'](_0x1fb3b3))return _0x211aa2['status'](0x194)['json']({'message':'File\x20not\x20found'});_0x211aa2[_0x24e772(0x238)]('Content-Type',_0x24e772(0x2fa)),_0x211aa2[_0x24e772(0x238)]('Content-Disposition',_0x24e772(0x247)+_0x2878e2+'\x22'),_0x211aa2[_0x24e772(0x229)](_0x1fb3b3,_0x32d1ce=>{const _0x58c7dc=_0x24e772;_0x32d1ce&&_0x211aa2[_0x58c7dc(0x161)](0x1f4)[_0x58c7dc(0x248)]({'message':_0x58c7dc(0x200)});});}),router[a27_0x4e4db8(0x203)](a27_0x4e4db8(0x269),async(_0x5a12bc,_0x3b3139)=>{const _0x3aa081=a27_0x4e4db8,_0x557f62=_0x5a12bc[_0x3aa081(0x274)],_0x215911=getHotConfig()[_0x3aa081(0x2bf)],_0x101b2a=path['join'](_0x215911,_0x557f62[_0x3aa081(0x2db)]);if(!fs['existsSync'](_0x101b2a))return _0x3b3139[_0x3aa081(0x161)](0x194)[_0x3aa081(0x248)]({'message':'Folder\x20not\x20found.'});if(fs[_0x3aa081(0x18d)](path['join'](_0x101b2a,_0x557f62[_0x3aa081(0x1d1)])))return _0x3b3139[_0x3aa081(0x161)](0x199)[_0x3aa081(0x248)]({'message':'Folder\x20already\x20exists.'});fs[_0x3aa081(0x2ff)](path[_0x3aa081(0x195)](_0x101b2a,_0x557f62[_0x3aa081(0x1d1)]),_0x421238=>{const _0x56ba8d=_0x3aa081;_0x421238&&_0x3b3139[_0x56ba8d(0x161)](0x1f4)['json']({'message':_0x56ba8d(0x2dd)}),_0x3b3139['status'](0xc8)[_0x56ba8d(0x248)]({'message':_0x56ba8d(0x1e3)});});}),router['put'](a27_0x4e4db8(0x2da),async(_0x420f0d,_0xaa45b1)=>{const _0x559631=a27_0x4e4db8,{newName:_0x6c5b1e,isFolder:_0x567c9b,path:_0x1153a6}=_0x420f0d[_0x559631(0x274)];if(!fs[_0x559631(0x18d)](_0x1153a6))return _0xaa45b1[_0x559631(0x161)](0x194)[_0x559631(0x248)]({'message':_0x567c9b?'Folder\x20not\x20found':_0x559631(0x1c5)});const _0xed6ad4=_0x1153a6[_0x559631(0x212)](_0x1153a6['split']('/')[_0x559631(0x183)](),_0x6c5b1e),_0x4041d0=fs[_0x559631(0x219)](_0x1153a6);_0x4041d0['isDirectory']()?fs[_0x559631(0x24e)](_0x1153a6,_0xed6ad4):(fs[_0x559631(0x2ab)](_0x1153a6,_0xed6ad4),fs[_0x559631(0x15a)](_0x1153a6)),_0xaa45b1['status'](0xc8)[_0x559631(0x248)]({'message':_0x567c9b?_0x559631(0x227):_0x559631(0x2a9)});}),router[a27_0x4e4db8(0x1a6)]('/folders/delete',async(_0x1b6c3f,_0x48bdef)=>{const _0x35ed65=a27_0x4e4db8,{path:_0x19877a}=_0x1b6c3f[_0x35ed65(0x274)];if(!fs[_0x35ed65(0x18d)](_0x19877a))return _0x48bdef[_0x35ed65(0x161)](0x194)['json']({'message':_0x35ed65(0x27f)});const _0x2f40bf=fs['statSync'](_0x19877a);if(_0x2f40bf[_0x35ed65(0x271)]())fs[_0x35ed65(0x15d)](_0x19877a,_0x10cd2c=>{const _0x38617b=_0x35ed65;_0x10cd2c&&_0x48bdef['status'](0x1f4)['json']({'message':_0x38617b(0x17d)}),_0x48bdef[_0x38617b(0x161)](0xc8)[_0x38617b(0x248)]({'message':_0x38617b(0x164)});});else _0x2f40bf['isDirectory']()&&fs[_0x35ed65(0x268)](_0x19877a,{'recursive':!![]},_0x20f42b=>{const _0x552a1c=_0x35ed65;_0x20f42b&&_0x48bdef[_0x552a1c(0x161)](0x1f4)[_0x552a1c(0x248)]({'message':_0x552a1c(0x2e0)}),_0x48bdef[_0x552a1c(0x161)](0xc8)[_0x552a1c(0x248)]({'message':_0x552a1c(0x28d)});});});!fs[a27_0x4e4db8(0x18d)]('./tmp')&&fs['mkdirSync'](a27_0x4e4db8(0x2b1));const storage=multer[a27_0x4e4db8(0x2b3)]({'destination':(_0x339df4,_0x610500,_0x5be7ee)=>{_0x5be7ee(null,'tmp');},'filename':(_0x10d160,_0x2b9340,_0x513af4)=>{const _0x5a5b33=a27_0x4e4db8;_0x513af4(null,Date[_0x5a5b33(0x222)]()+path[_0x5a5b33(0x2f2)](_0x2b9340[_0x5a5b33(0x166)]));}}),upload=multer({'storage':storage,'limits':{'fileSize':0xa*0x400*0x400}});router[a27_0x4e4db8(0x203)]('/folders/upload',upload[a27_0x4e4db8(0x2d3)]('files'),async(_0x15b2c5,_0x5a5320)=>{const _0x3d75f9=a27_0x4e4db8,_0x58db80=_0x15b2c5[_0x3d75f9(0x274)];if(!_0x15b2c5[_0x3d75f9(0x292)]||_0x15b2c5['files'][_0x3d75f9(0x1ae)]===0x0)return _0x5a5320[_0x3d75f9(0x161)](0x190)['json']({'message':_0x3d75f9(0x277)});const _0x11d857=getHotConfig()[_0x3d75f9(0x2bf)],_0x36f529=path['join'](_0x11d857,_0x58db80['path']);if(!fs[_0x3d75f9(0x18d)](_0x36f529))return _0x5a5320['status'](0x194)[_0x3d75f9(0x248)]({'message':_0x3d75f9(0x198)});const _0xa69e64=_0x15b2c5[_0x3d75f9(0x292)][_0x3d75f9(0x18c)](_0x541126=>({'originalname':_0x541126[_0x3d75f9(0x166)],'filename':_0x541126['filename'],'mimetype':_0x541126[_0x3d75f9(0x23d)],'size':_0x541126[_0x3d75f9(0x270)]}));_0xa69e64[_0x3d75f9(0x21e)](_0x1b7917=>{const _0x3b921a=_0x3d75f9;fs[_0x3b921a(0x2ab)](path[_0x3b921a(0x195)](_0x3b921a(0x2c0),_0x1b7917['filename']),path[_0x3b921a(0x195)](_0x36f529,_0x1b7917[_0x3b921a(0x166)])),fs[_0x3b921a(0x15a)](path[_0x3b921a(0x195)](_0x3b921a(0x2c0),_0x1b7917['filename']));}),_0x5a5320[_0x3d75f9(0x161)](0xc8)[_0x3d75f9(0x248)]({'message':'Files\x20uploaded\x20successfully','files':_0xa69e64});}),router[a27_0x4e4db8(0x251)](a27_0x4e4db8(0x1b4),async(_0x29a53d,_0x4900b8)=>{const _0xc1b83c=a27_0x4e4db8,_0xb5ea7c=path['join'](path[_0xc1b83c(0x17c)](require[_0xc1b83c(0x239)]['filename']),_0xc1b83c(0x179)),{config:_0x1c50a9}=_0x29a53d[_0xc1b83c(0x274)];if(!_0x1c50a9)return _0x4900b8[_0xc1b83c(0x161)](0x190)[_0xc1b83c(0x248)]({'message':_0xc1b83c(0x1a0)});try{fs[_0xc1b83c(0x262)](_0xb5ea7c,JSON['stringify'](_0x1c50a9,null,0x4)),_0x4900b8[_0xc1b83c(0x161)](0xc8)[_0xc1b83c(0x248)]({'message':_0xc1b83c(0x25f)});}catch(_0x583b16){_0x4900b8[_0xc1b83c(0x161)](0x1f4)[_0xc1b83c(0x248)]({'message':'Error\x20updating\x20config'});}}),router[a27_0x4e4db8(0x251)]('/config/update',async(_0x174d84,_0x1d9fa5)=>{const _0x55c851=a27_0x4e4db8,{key:_0x5340,value:_0x2710dc}=_0x174d84[_0x55c851(0x274)],_0xd516d4=path[_0x55c851(0x195)](path[_0x55c851(0x17c)](require[_0x55c851(0x239)][_0x55c851(0x231)]),'CADViewer_config.json');fs[_0x55c851(0x204)](_0xd516d4,'utf8',function(_0x430e52,_0x20cd63){const _0x53c564=_0x55c851;_0x430e52&&_0x1d9fa5['status'](0x1f4)[_0x53c564(0x2fd)](_0x430e52);const _0x3adfbc=JSON[_0x53c564(0x20d)](_0x20cd63);_0x3adfbc[_0x5340]=_0x2710dc;if(_0x5340==='autodetect_location'){let _0x2e8910='';if(_0x3adfbc['autodetect_platform']){_0x2e8910=os[_0x53c564(0x2aa)]();if(_0x2e8910===_0x53c564(0x210))_0x2e8910='windows';else{if(_0x2e8910===_0x53c564(0x202))_0x2e8910=_0x53c564(0x1f9);}}else _0x2e8910=_0x3adfbc[_0x53c564(0x2aa)];if(_0x2e8910===_0x53c564(0x25b)){_0x3adfbc[_0x53c564(0x2b2)]=path[_0x53c564(0x194)](__dirname,'..')+'/';const _0x2203e1=/\\/g;_0x3adfbc['ServerLocation']=_0x3adfbc['ServerLocation'][_0x53c564(0x212)](_0x2203e1,'/');}else _0x3adfbc[_0x53c564(0x2b2)]=path['resolve'](__dirname,'..')+'/';}if(_0x5340===_0x53c564(0x243)){let _0xf1d34a=os[_0x53c564(0x2aa)]();if(_0xf1d34a===_0x53c564(0x210))_0xf1d34a=_0x53c564(0x25b);else _0xf1d34a='linux';_0xf1d34a===_0x53c564(0x25b)?_0x2710dc===!![]&&(_0x3adfbc['autoxchange_executable']=_0x3adfbc[_0x53c564(0x297)],_0x3adfbc[_0x53c564(0x18a)]=_0x3adfbc[_0x53c564(0x291)],_0x3adfbc[_0x53c564(0x2ec)]=_0x3adfbc[_0x53c564(0x1da)]):_0x2710dc===!![]&&(_0x3adfbc[_0x53c564(0x280)]=_0x3adfbc[_0x53c564(0x2f9)],_0x3adfbc[_0x53c564(0x18a)]=_0x3adfbc['dwgmerge_executable_linux'],_0x3adfbc[_0x53c564(0x2ec)]=_0x3adfbc[_0x53c564(0x1ad)]),_0x3adfbc[_0x53c564(0x2aa)]=_0xf1d34a;}if(_0x3adfbc[_0x53c564(0x243)]){let _0x182ee0=os[_0x53c564(0x2aa)]();if(_0x182ee0==='win32')_0x182ee0=_0x53c564(0x25b);else _0x182ee0='linux';if(_0x182ee0===_0x53c564(0x25b)){if(_0x5340==='autoxchange_executable_windows')_0x3adfbc[_0x53c564(0x280)]=_0x2710dc;else{if(_0x5340===_0x53c564(0x291))_0x3adfbc[_0x53c564(0x18a)]=_0x2710dc;else _0x5340===_0x53c564(0x1da)&&(_0x3adfbc['linklist_executable']=_0x2710dc);}}else{if(_0x5340===_0x53c564(0x2f9))_0x3adfbc[_0x53c564(0x280)]=_0x2710dc;else{if(_0x5340===_0x53c564(0x259))_0x3adfbc[_0x53c564(0x18a)]=_0x2710dc;else _0x5340==='linklist_executable_linux'&&(_0x3adfbc[_0x53c564(0x2ec)]=_0x2710dc);}}}fs[_0x53c564(0x255)](_0xd516d4,JSON[_0x53c564(0x190)](_0x3adfbc,null,0x4),function(_0x5e8f33){const _0x1246d9=_0x53c564;_0x5e8f33&&_0x1d9fa5[_0x1246d9(0x161)](0x1f4)[_0x1246d9(0x2fd)](_0x5e8f33),_0x1d9fa5[_0x1246d9(0x161)](0xc8)['json']({'message':_0x1246d9(0x2ad)});});});}),router[a27_0x4e4db8(0x203)](a27_0x4e4db8(0x27e),async(_0x13cc25,_0x57fe1a)=>{const _0x32559c=a27_0x4e4db8,_0x3b41da=getHotConfig(),_0x3f29b9=(_0x3b41da[_0x32559c(0x185)][_0x32559c(0x29f)](_0x3b41da[_0x32559c(0x2b2)])?'':_0x3b41da[_0x32559c(0x2b2)])+_0x3b41da[_0x32559c(0x185)],_0x2c1743=(_0x3b41da['dwgmergeLocation'][_0x32559c(0x29f)](_0x3b41da['ServerLocation'])?'':_0x3b41da[_0x32559c(0x2b2)])+_0x3b41da['linklistLocation'],_0x1febf3=(_0x3b41da[_0x32559c(0x1ac)][_0x32559c(0x29f)](_0x3b41da['ServerLocation'])?'':_0x3b41da['ServerLocation'])+_0x3b41da['converterLocation'],_0x580d09=/ax202.*\.exe/,_0x119118=/ax202.*/,_0x25b287=/dwgmerge202.*\.exe/,_0x3a7d3b=/dwgmerge_202.*/,_0x36b43d=/linklist_202.*\.exe/,_0x34b60d=/linklist_202.*/,_0x19deb5=[],_0x4fd48b=[],_0x4eb729=[],_0x1ac8e1=[],_0x404729=[],_0x5f1f0b=[];let _0x258ec9='';if(_0x3b41da[_0x32559c(0x243)]){_0x258ec9=os[_0x32559c(0x2aa)]();if(_0x258ec9===_0x32559c(0x210))_0x258ec9=_0x32559c(0x25b);else{if(_0x258ec9===_0x32559c(0x202))_0x258ec9='linux';}}else _0x258ec9=_0x3b41da[_0x32559c(0x2aa)];fs['readdirSync'](_0x1febf3[_0x32559c(0x218)](_0x32559c(0x1f9),'windows'))[_0x32559c(0x21e)](_0x1e9c40=>{const _0x51c2ca=_0x32559c;if(_0x580d09['test'](_0x1e9c40[_0x51c2ca(0x24a)]()))_0x19deb5['push'](_0x1e9c40);}),fs['readdirSync'](_0x3f29b9[_0x32559c(0x218)](_0x32559c(0x1f9),'windows'))[_0x32559c(0x21e)](_0x3536fc=>{const _0xf69a4a=_0x32559c;if(_0x25b287[_0xf69a4a(0x1b7)](_0x3536fc[_0xf69a4a(0x24a)]()))_0x4fd48b[_0xf69a4a(0x2cd)](_0x3536fc);}),fs[_0x32559c(0x1cc)](_0x2c1743[_0x32559c(0x218)](_0x32559c(0x1f9),'windows'))[_0x32559c(0x21e)](_0x480e18=>{const _0x19c4d0=_0x32559c;if(_0x36b43d[_0x19c4d0(0x1b7)](_0x480e18[_0x19c4d0(0x24a)]()))_0x4eb729[_0x19c4d0(0x2cd)](_0x480e18);}),fs[_0x32559c(0x1cc)](_0x1febf3['replaceAll'](_0x32559c(0x25b),_0x32559c(0x1f9)))[_0x32559c(0x21e)](_0x160ff7=>{const _0x1d857b=_0x32559c;if(_0x119118['test'](_0x160ff7[_0x1d857b(0x24a)]()))_0x1ac8e1[_0x1d857b(0x2cd)](_0x160ff7);}),fs[_0x32559c(0x1cc)](_0x3f29b9[_0x32559c(0x218)](_0x32559c(0x25b),'linux'))['forEach'](_0x37f316=>{const _0x483b8c=_0x32559c;if(_0x3a7d3b[_0x483b8c(0x1b7)](_0x37f316['toLocaleLowerCase']()))_0x404729[_0x483b8c(0x2cd)](_0x37f316);}),fs[_0x32559c(0x1cc)](_0x2c1743[_0x32559c(0x218)](_0x32559c(0x25b),_0x32559c(0x1f9)))['forEach'](_0x2d6dc2=>{const _0xbbcb6b=_0x32559c;if(_0x34b60d['test'](_0x2d6dc2['toLocaleLowerCase']()))_0x5f1f0b[_0xbbcb6b(0x2cd)](_0x2d6dc2);});const _0x5cd8eb=[_0x32559c(0x267),_0x32559c(0x2a2),_0x32559c(0x2af),_0x32559c(0x172),_0x32559c(0x1e2)],_0x34612e=[_0x32559c(0x1ba),_0x32559c(0x1c6),'converterLocation',_0x32559c(0x21d),_0x32559c(0x1a3),_0x32559c(0x1be),_0x32559c(0x293),'dwgmergeLocation',_0x32559c(0x273),_0x32559c(0x168)],_0x2edef8=[_0x32559c(0x2fb),_0x32559c(0x167),_0x32559c(0x20e),_0x32559c(0x24c),_0x32559c(0x241),_0x32559c(0x157),_0x32559c(0x191)],_0x6ad4a1={'ServerUrl':_0x32559c(0x1bd),'autoxchange_executable':_0x32559c(0x29e),'linklist_executable':_0x32559c(0x175),'dwgmerge_executable':_0x32559c(0x20b),'setup_mysqlHost':_0x32559c(0x289),'callbackMethod_gatewayUrl_flag':'Callback\x20and\x20Authentication\x20Settings','userFolderMaximumFiles':'Demo\x20and\x20Base\x20User\x20Settings','smtpHost':_0x32559c(0x1bf)},_0x436e2a={'https':_0x32559c(0x252),'ServerFrontEndUrlAsAllowedOriginOnly':_0x32559c(0x252),'autodetect_platform':'boolean','cvjs_svgz_compress':_0x32559c(0x252),'cached_conversion':'boolean','remainOnServer':'boolean','cvjs_debug':'boolean','autodetect_location':_0x32559c(0x252),'platform':_0x32559c(0x19c),'autoxchange_executable':_0x32559c(0x1b0)+(_0x258ec9===_0x32559c(0x25b)?_0x19deb5[_0x32559c(0x195)](','):_0x1ac8e1['join'](',')),'autoxchange_executable_windows':_0x32559c(0x1b0)+_0x19deb5[_0x32559c(0x195)](','),'autoxchange_executable_linux':'radio|'+_0x1ac8e1[_0x32559c(0x195)](','),'dwgmerge_executable':_0x32559c(0x1b0)+(_0x258ec9===_0x32559c(0x25b)?_0x4fd48b[_0x32559c(0x195)](','):_0x404729[_0x32559c(0x195)](',')),'dwgmerge_executable_windows':_0x32559c(0x1b0)+_0x4fd48b[_0x32559c(0x195)](','),'dwgmerge_executable_linux':'radio|'+_0x404729[_0x32559c(0x195)](','),'linklist_executable':'radio|'+(_0x258ec9==='windows'?_0x4eb729['join'](','):_0x5f1f0b[_0x32559c(0x195)](',')),'linklist_executable_windows':_0x32559c(0x1b0)+_0x4eb729[_0x32559c(0x195)](','),'linklist_executable_linux':_0x32559c(0x1b0)+_0x5f1f0b[_0x32559c(0x195)](','),'callbackMethod_gatewayUrl_flag':_0x32559c(0x252),'setup_mysqlHost':_0x32559c(0x252),'ContentSecurityPolicyReportOnly':_0x32559c(0x252),'fileLoad_PasswordAuthentication':_0x32559c(0x252),'contentLocationCheck':_0x32559c(0x252),'globalBearerAutentication':'boolean','bcryptSaltRounds':_0x32559c(0x1cf),'userFolderMaximumFiles':_0x32559c(0x1cf),'userFolderMaximumSizeInMB':_0x32559c(0x1cf),'recaptchaEnabled':'boolean','usersExportFrequency':_0x32559c(0x20c),'enableEmailVerification':'boolean','demoUserRetentionDaysAlertBeforeDeletion':_0x32559c(0x1cf),'demoUserRetentionDays':'number'},_0x13e51e={},_0xbedf1d=Object[_0x32559c(0x1cb)](_0x3b41da);_0x3b41da[_0x32559c(0x243)]&&_0x5cd8eb[_0x32559c(0x2cd)](_0x32559c(0x2aa)),_0x3b41da[_0x32559c(0x2ce)]&&(_0x34612e[_0x32559c(0x2cd)](_0x32559c(0x2b2)),_0x34612e[_0x32559c(0x2cd)](_0x32559c(0x280)),_0x34612e[_0x32559c(0x2cd)](_0x32559c(0x18a)),_0x34612e[_0x32559c(0x2cd)]('linklist_executable')),!_0x3b41da['callbackMethod_gatewayUrl_flag']&&_0x34612e[_0x32559c(0x2cd)](_0x32559c(0x23e)),!_0x3b41da['setup_mysqlHost']&&(_0x34612e[_0x32559c(0x2cd)](_0x32559c(0x167)),_0x34612e[_0x32559c(0x2cd)](_0x32559c(0x20e)),_0x34612e[_0x32559c(0x2cd)](_0x32559c(0x24c)),_0x34612e[_0x32559c(0x2cd)](_0x32559c(0x241))),!_0x3b41da[_0x32559c(0x235)]&&_0x34612e[_0x32559c(0x2cd)](_0x32559c(0x16d)),!_0x3b41da['fileLoad_PasswordAuthentication']&&(_0x34612e[_0x32559c(0x2cd)]('fileLoad_UserName'),_0x34612e['push'](_0x32559c(0x16e))),!_0x3b41da[_0x32559c(0x2a5)]&&_0x34612e[_0x32559c(0x2cd)]('globalBearerAutenticationToken'),_0xbedf1d['forEach'](_0x350cd4=>{const _0x2d6057=_0x32559c;!_0x5cd8eb[_0x2d6057(0x29f)](_0x350cd4)&&(_0x13e51e[_0x350cd4]=_0x3b41da[_0x350cd4]);}),_0x13e51e[_0x32559c(0x1c6)]=''+_0x3b41da[_0x32559c(0x2fb)]+_0x3b41da['fileLocation'],_0x57fe1a['status'](0xc8)[_0x32559c(0x248)]({'notEditableFields':_0x34612e,'customFieldTypes':_0x436e2a,'notHotEditableFields':_0x2edef8,'config':_0x13e51e,'fieldsTitle':_0x6ad4a1,'configData':_0x3b41da});}),router[a27_0x4e4db8(0x2f7)](a27_0x4e4db8(0x17b),protectedRoute,async(_0x2dfa7e,_0x15d89c)=>{const _0x270c5e=a27_0x4e4db8,_0x562289=fs[_0x270c5e(0x27a)](path[_0x270c5e(0x195)](path[_0x270c5e(0x17c)](require[_0x270c5e(0x239)]['filename']),_0x270c5e(0x221)),_0x270c5e(0x264)),_0x448812=_0x562289['replaceAll']('{version}',_0x2dfa7e[_0x270c5e(0x168)]);_0x15d89c[_0x270c5e(0x2fd)](_0x448812);});function findMatchingLogFiles(_0x221530,_0x444762=/^call-Api_Conversion_\d{1,2}_\d{1,2}_\d{4}\.log$/){const _0x581341=a27_0x4e4db8;try{const _0x1328b7=fs[_0x581341(0x1cc)](_0x221530);return _0x1328b7[_0x581341(0x2d4)](_0x5608d8=>_0x444762[_0x581341(0x1b7)](_0x5608d8))['map'](_0x51e77f=>_0x51e77f[_0x581341(0x218)](_0x581341(0x201),'')[_0x581341(0x218)]('.log',''));}catch(_0x2aadf8){return console[_0x581341(0x1f3)](_0x581341(0x1e8),_0x2aadf8),[];}}router[a27_0x4e4db8(0x203)](a27_0x4e4db8(0x1d3),async(_0x5e6049,_0x316524)=>{const _0x33688e=a27_0x4e4db8,_0x21d212=new Date(),_0x47dcaa=_0x21d212[_0x33688e(0x1dc)]()[_0x33688e(0x213)]()[_0x33688e(0x165)](0x2,'0')+'_'+(_0x21d212[_0x33688e(0x17e)]()+0x1)[_0x33688e(0x213)]()['padStart'](0x2,'0')+'_'+_0x21d212[_0x33688e(0x16a)](),{displayDay:_0x5132e4}=_0x5e6049[_0x33688e(0x274)],_0x41bfe4=path[_0x33688e(0x195)](path[_0x33688e(0x17c)](require[_0x33688e(0x239)][_0x33688e(0x231)]),_0x33688e(0x286),_0x33688e(0x201)+(_0x5132e4??_0x47dcaa)+_0x33688e(0x1ca));fs['existsSync'](_0x41bfe4)?fs[_0x33688e(0x204)](_0x41bfe4,'utf8',function(_0x1d1740,_0x27e1a3){const _0x2ceee5=_0x33688e;_0x1d1740&&_0x316524[_0x2ceee5(0x161)](0x1f4)[_0x2ceee5(0x2fd)](_0x1d1740),_0x316524['status'](0xc8)[_0x2ceee5(0x248)]({'content':_0x27e1a3,'days':findMatchingLogFiles(path[_0x2ceee5(0x195)](path[_0x2ceee5(0x17c)](require[_0x2ceee5(0x239)]['filename']),_0x2ceee5(0x286)))});}):_0x316524['status'](0xc8)['json']({'content':'','days':findMatchingLogFiles(path[_0x33688e(0x195)](path[_0x33688e(0x17c)](require['main'][_0x33688e(0x231)]),_0x33688e(0x286)))});}),router[a27_0x4e4db8(0x1a6)]('/logs/clean',async(_0x41b92c,_0x237beb)=>{const _0x2cc163=a27_0x4e4db8,_0x4b2cad=new Date(),_0x1bebc2=_0x4b2cad[_0x2cc163(0x1dc)]()[_0x2cc163(0x213)]()['padStart'](0x2,'0')+'_'+(_0x4b2cad[_0x2cc163(0x17e)]()+0x1)[_0x2cc163(0x213)]()['padStart'](0x2,'0')+'_'+_0x4b2cad[_0x2cc163(0x16a)](),_0x1a82a1=findMatchingLogFiles(path[_0x2cc163(0x195)](path['dirname'](require[_0x2cc163(0x239)][_0x2cc163(0x231)]),_0x2cc163(0x286)));_0x1a82a1[_0x2cc163(0x21e)](_0x3d9c2f=>{const _0xc3a4c0=_0x2cc163;if(_0x3d9c2f!==_0x1bebc2)fs[_0xc3a4c0(0x15a)](path['join'](path[_0xc3a4c0(0x17c)](require[_0xc3a4c0(0x239)]['filename']),_0xc3a4c0(0x286),'call-Api_Conversion_'+_0x3d9c2f+_0xc3a4c0(0x1ca)));}),logStream['clean'](),_0x237beb[_0x2cc163(0x161)](0xc8)[_0x2cc163(0x248)]({'message':_0x2cc163(0x1f4)});}),router[a27_0x4e4db8(0x2f7)](a27_0x4e4db8(0x254),protectedRoute,async(_0x19fbc1,_0x2f85d8)=>{const _0x1ed865=a27_0x4e4db8,_0x2bf6d3=path['join'](path['dirname'](require[_0x1ed865(0x239)]['filename']),_0x1ed865(0x1fb));if(!fs['existsSync'](_0x2bf6d3)){const _0x3e0746={'jsonDataExtraction':{'standard':[{'paramName':_0x1ed865(0x248),'paramValue':''},{'paramName':_0x1ed865(0x180),'paramValue':''}]},'dwgToSvg':{'standard':[{'paramName':'f','paramValue':_0x1ed865(0x1ce)},{'paramName':_0x1ed865(0x232),'paramValue':''},{'paramName':_0x1ed865(0x211),'paramValue':''}]},'dwgToPdf':{'standard':[{'paramName':'f','paramValue':_0x1ed865(0x1e7)},{'paramName':_0x1ed865(0x232),'paramValue':''}]},'displayDwg':{'standard':[{'paramName':'f','paramValue':'svg'},{'paramName':'model','paramValue':''},{'paramName':'hlall','paramValue':''}]},'dwgToMultiple':{'standard':[{'paramName':'splity','paramValue':''}]}};fs[_0x1ed865(0x262)](_0x2bf6d3,JSON['stringify'](_0x3e0746,null,0x4));}const _0x15ce18=fs[_0x1ed865(0x27a)](path[_0x1ed865(0x195)](path[_0x1ed865(0x17c)](require[_0x1ed865(0x239)][_0x1ed865(0x231)]),_0x1ed865(0x263)),'utf8'),_0x27571e=_0x15ce18[_0x1ed865(0x218)](_0x1ed865(0x26b),_0x19fbc1[_0x1ed865(0x168)]);_0x2f85d8[_0x1ed865(0x2fd)](_0x27571e);}),router[a27_0x4e4db8(0x203)]('/restapi-test/parameters/search',async(_0x150050,_0x51bbb5)=>{const _0x21c286=a27_0x4e4db8,{actionName:_0x442a83,contentLocation:_0x2f07fc}=_0x150050[_0x21c286(0x274)],_0x50f87f=path[_0x21c286(0x195)](path['dirname'](require[_0x21c286(0x239)][_0x21c286(0x231)]),_0x21c286(0x1fb));fs[_0x21c286(0x204)](_0x50f87f,_0x21c286(0x264),function(_0x1f8224,_0x94694e){const _0x3dfed1=_0x21c286;if(_0x1f8224)_0x51bbb5[_0x3dfed1(0x161)](0xc8)[_0x3dfed1(0x248)]({'parameters':[]});else{const _0x55affc=JSON[_0x3dfed1(0x20d)](_0x94694e);if(_0x55affc[_0x442a83]&&_0x55affc[_0x442a83][_0x2f07fc])_0x51bbb5['status'](0xc8)['json']({'parameters':_0x55affc[_0x442a83][_0x2f07fc]});else _0x55affc[_0x442a83]&&_0x55affc[_0x442a83]['standard']?_0x51bbb5[_0x3dfed1(0x161)](0xc8)[_0x3dfed1(0x248)]({'parameters':_0x55affc[_0x442a83][_0x3dfed1(0x197)]}):_0x51bbb5[_0x3dfed1(0x161)](0xc8)[_0x3dfed1(0x248)]({'parameters':[]});}});}),router['post'](a27_0x4e4db8(0x2bc),async(_0xae4571,_0x3716af)=>{const _0x5b1087=a27_0x4e4db8,{actionName:_0x37ea5f,contentLocation:_0x1c7ce8,parameters:_0x30e701}=_0xae4571[_0x5b1087(0x274)],_0x991f30=path[_0x5b1087(0x195)](path[_0x5b1087(0x17c)](require[_0x5b1087(0x239)][_0x5b1087(0x231)]),_0x5b1087(0x1fb));fs[_0x5b1087(0x204)](_0x991f30,_0x5b1087(0x264),function(_0x1ae335,_0x730036){const _0x214be4=_0x5b1087;if(_0x1ae335)_0x3716af['status'](0x199)['json']({'message':'Error\x20saving\x20parameters.'});else{const _0x82f96c=JSON[_0x214be4(0x20d)](_0x730036);!_0x82f96c[_0x37ea5f]&&(_0x82f96c[_0x37ea5f]={}),_0x82f96c[_0x37ea5f][_0x1c7ce8]=_0x30e701,fs[_0x214be4(0x255)](_0x991f30,JSON[_0x214be4(0x190)](_0x82f96c,null,0x4),function(_0x21a05e){const _0x388708=_0x214be4;_0x21a05e&&_0x3716af[_0x388708(0x161)](0x199)['json']({'message':_0x388708(0x158)}),_0x3716af[_0x388708(0x161)](0xc8)[_0x388708(0x248)]({'message':'Parameters\x20saved.'});});}});}),router[a27_0x4e4db8(0x2f7)](a27_0x4e4db8(0x209),protectedRoute,async(_0x442829,_0x157f82)=>{const _0x327a23=a27_0x4e4db8,_0x23102c=fs[_0x327a23(0x27a)](path[_0x327a23(0x195)](path[_0x327a23(0x17c)](require[_0x327a23(0x239)][_0x327a23(0x231)]),_0x327a23(0x2e6)),_0x327a23(0x264)),_0x46e619=_0x23102c['replaceAll'](_0x327a23(0x26b),_0x442829[_0x327a23(0x168)]);_0x157f82[_0x327a23(0x2fd)](_0x46e619);}),router[a27_0x4e4db8(0x203)]('/doctor/check',async(_0x5b8511,_0xa7e9f1)=>{const _0x37923b=a27_0x4e4db8,_0x391a30=getHotConfig(),_0x269439=_0x391a30['converterLocation'][_0x37923b(0x218)]('//','/'),_0x2df383=_0x391a30['dwgmergeLocation']['replaceAll']('//','/'),_0x35f75f=_0x391a30[_0x37923b(0x273)][_0x37923b(0x218)]('//','/'),_0xd33dfd=''+_0x269439+_0x391a30['autoxchange_executable'],_0x5e9efa=''+_0x2df383+_0x391a30[_0x37923b(0x18a)],_0x3dbaa2=''+_0x35f75f+_0x391a30['linklist_executable'],_0x9d0d0c=[],_0x469bc2=new Promise(_0x3f307f=>{const _0x4492df=_0x37923b;exec(os['platform']()===_0x4492df(0x210)?_0x4492df(0x2d1):'ls',_0x33d855=>{const _0x372df9=_0x4492df;_0x33d855?_0x9d0d0c[_0x372df9(0x2cd)]({'title':_0x372df9(0x205),'status':![],'priority':0x1}):_0x9d0d0c[_0x372df9(0x2cd)]({'title':'\x22exec\x22\x20command\x20activated\x20on\x20NodeJS','status':!![],'priority':0x1}),_0x3f307f();});}),_0x3c1f03=new Promise(_0x3a9ca3=>{const _0x590a86=_0x37923b;fs[_0x590a86(0x19a)](_0xd33dfd,fs[_0x590a86(0x26e)][_0x590a86(0x207)],_0x4637aa=>{const _0xffa452=_0x590a86;_0x4637aa?_0x9d0d0c['push']({'title':_0xffa452(0x256)+_0x391a30[_0xffa452(0x280)]+_0xffa452(0x1ee),'status':![],'priority':0x2}):_0x9d0d0c[_0xffa452(0x2cd)]({'title':_0xffa452(0x256)+_0x391a30[_0xffa452(0x280)]+_0xffa452(0x1ee),'status':!![],'priority':0x2}),_0x3a9ca3();});}),_0x1066a5=new Promise(_0x5e2e0a=>{const _0x433cff=_0x37923b;fs[_0x433cff(0x19a)](_0x5e9efa,fs[_0x433cff(0x26e)][_0x433cff(0x207)],_0x38b72f=>{const _0x5ed098=_0x433cff;_0x38b72f?_0x9d0d0c[_0x5ed098(0x2cd)]({'title':_0x5ed098(0x256)+_0x391a30[_0x5ed098(0x18a)]+'\x22\x20executable','status':![],'priority':0x3}):_0x9d0d0c[_0x5ed098(0x2cd)]({'title':_0x5ed098(0x256)+_0x391a30[_0x5ed098(0x18a)]+_0x5ed098(0x1ee),'status':!![],'priority':0x3}),_0x5e2e0a();});}),_0x5f4a09=new Promise(_0x59f2c9=>{const _0x4f3f71=_0x37923b;fs[_0x4f3f71(0x19a)](_0x3dbaa2,fs[_0x4f3f71(0x26e)][_0x4f3f71(0x207)],_0x1a27e1=>{const _0x1a747a=_0x4f3f71;_0x1a27e1?_0x9d0d0c[_0x1a747a(0x2cd)]({'title':_0x1a747a(0x256)+_0x391a30[_0x1a747a(0x2ec)]+_0x1a747a(0x1ee),'status':![],'priority':0x4}):_0x9d0d0c[_0x1a747a(0x2cd)]({'title':'Permission\x20750\x20for\x20the\x20\x22'+_0x391a30[_0x1a747a(0x2ec)]+_0x1a747a(0x1ee),'status':!![],'priority':0x4}),_0x59f2c9();});}),_0x3d4bf5=new Promise(_0x1f761b=>{const _0x229f57=_0x37923b,_0x32dd7a=new Date(),_0x9a77c7=_0x32dd7a[_0x229f57(0x1dc)]()[_0x229f57(0x213)]()[_0x229f57(0x165)](0x2,'0')+'_'+(_0x32dd7a['getMonth']()+0x1)['toString']()[_0x229f57(0x165)](0x2,'0')+'_'+_0x32dd7a[_0x229f57(0x16a)](),{displayDay:_0x43967b}=_0x5b8511[_0x229f57(0x274)];fs[_0x229f57(0x19a)](path[_0x229f57(0x195)](path[_0x229f57(0x17c)](require['main']['filename']),_0x229f57(0x286),'call-Api_Conversion_'+(_0x43967b??_0x9a77c7)+_0x229f57(0x1ca)),fs[_0x229f57(0x26e)][_0x229f57(0x184)],_0x25c573=>{const _0xcd40ad=_0x229f57;_0x25c573?_0x9d0d0c[_0xcd40ad(0x2cd)]({'title':_0xcd40ad(0x188)+(_0x43967b??_0x9a77c7)+_0xcd40ad(0x1f5),'status':![],'priority':0x5}):_0x9d0d0c['push']({'title':_0xcd40ad(0x188)+(_0x43967b??_0x9a77c7)+_0xcd40ad(0x1f5),'status':!![],'priority':0x5}),_0x1f761b();});}),_0x28562b=(_0x28f0e7,_0x4d243f)=>{const _0x7e9e81=_0x37923b,_0x5bbd2a=path[_0x7e9e81(0x195)](path['dirname'](require[_0x7e9e81(0x239)]['filename']),_0x28f0e7);return new Promise(_0x1b59dc=>{const _0x41889f=_0x7e9e81;fs[_0x41889f(0x19a)](path[_0x41889f(0x195)](path[_0x41889f(0x17c)](_0x5bbd2a)),fs[_0x41889f(0x26e)]['R_OK']|fs[_0x41889f(0x26e)][_0x41889f(0x184)],_0x22dbd5=>{const _0x3097d0=_0x41889f;_0x22dbd5?_0x9d0d0c[_0x3097d0(0x2cd)]({'title':_0x3097d0(0x1d6)+_0x28f0e7,'status':![],'priority':_0x4d243f+0x6}):_0x9d0d0c[_0x3097d0(0x2cd)]({'title':_0x3097d0(0x1d6)+_0x28f0e7,'status':!![],'priority':_0x4d243f+0x6}),_0x1b59dc();});});},_0x466fd7=[_0x37923b(0x2ca),_0x37923b(0x1af),_0x37923b(0x181),'/converters/files/print/',_0x37923b(0x23a),_0x37923b(0x24f),_0x37923b(0x2a3)],_0x562240=_0x466fd7[_0x37923b(0x18c)](_0x28562b);Promise['all']([_0x469bc2,_0x3c1f03,_0x1066a5,_0x5f4a09,_0x3d4bf5,..._0x562240])[_0x37923b(0x2bd)](()=>{const _0x31d2d3=_0x37923b;_0xa7e9f1[_0x31d2d3(0x161)](0xc8)['json']({'checking_list':_0x9d0d0c});})[_0x37923b(0x22d)](()=>{const _0x4f3936=_0x37923b;_0xa7e9f1[_0x4f3936(0x161)](0x1f4)['json']({'error':_0x4f3936(0x2d9)});});}),router[a27_0x4e4db8(0x2f7)]('/users',protectedRoute,async(_0x3fdbf9,_0x507235)=>{const _0x11cdc9=a27_0x4e4db8,_0x12475f=fs['readFileSync'](path[_0x11cdc9(0x195)](path[_0x11cdc9(0x17c)](require[_0x11cdc9(0x239)][_0x11cdc9(0x231)]),_0x11cdc9(0x301)),_0x11cdc9(0x264)),_0x3ca50a=_0x12475f[_0x11cdc9(0x218)](_0x11cdc9(0x26b),_0x3fdbf9[_0x11cdc9(0x168)]);_0x507235[_0x11cdc9(0x2fd)](_0x3ca50a);}),router[a27_0x4e4db8(0x203)](a27_0x4e4db8(0x26a),async(_0x16640f,_0x152c2a)=>{const _0x50af9c=a27_0x4e4db8;let _0x29c79e;try{const [_0x17dac0]=await conn[_0x50af9c(0x223)]()['execute'](_0x50af9c(0x275),[]);_0x29c79e=_0x17dac0;}catch(_0x5e8bd8){console['log'](_0x5e8bd8),_0x152c2a['status'](0x1f4)[_0x50af9c(0x248)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}_0x152c2a['status'](0xc8)[_0x50af9c(0x248)]({'success':!![],'data':_0x29c79e});}),router[a27_0x4e4db8(0x203)](a27_0x4e4db8(0x21b),upload[a27_0x4e4db8(0x2cc)]('avatar'),async(_0x4377e8,_0x1dbea5)=>{const _0x471fcf=a27_0x4e4db8,{id:_0x460ac3,first_name:_0x5a6929,last_name:_0x40cd21,username:_0x5540f8,email:_0x1d6982,password:_0xf00e96,is_enabled:_0x1a40a2}=_0x4377e8[_0x471fcf(0x274)],_0x2ae67a=_0x4377e8[_0x471fcf(0x274)]['role']===_0x471fcf(0x178)?_0x471fcf(0x178):_0x4377e8[_0x471fcf(0x274)][_0x471fcf(0x174)]===_0x471fcf(0x1d0)?'demo_user':_0x471fcf(0x26f);let _0x40b2eb;console[_0x471fcf(0x160)](_0x471fcf(0x1f8));_0xf00e96&&(_0x40b2eb=await bcrypt[_0x471fcf(0x1df)](_0xf00e96,0xa));let _0x49c4ea=null;if(_0x4377e8[_0x471fcf(0x19f)]){const _0x563ada=_0x471fcf(0x2e2)+randomUUID()+'.png';fs[_0x471fcf(0x2ab)](_0x4377e8[_0x471fcf(0x19f)]['path'],'./'+_0x563ada),fs['unlinkSync'](_0x4377e8[_0x471fcf(0x19f)][_0x471fcf(0x2db)]),config[_0x471fcf(0x225)]?_0x49c4ea=config['callbackMethod_gatewayUrl']+'/'+_0x563ada:_0x49c4ea=config['ServerUrl']+'/'+_0x563ada;}if(_0x460ac3){try{let [_0x2c74ea]=await conn[_0x471fcf(0x223)]()['execute'](_0x471fcf(0x2e8),[_0x1d6982,_0x5540f8,_0x460ac3]);if(_0x2c74ea['length']>0x0)_0x1dbea5['status'](0x199)['json']({'error':_0x471fcf(0x189)});else{!_0x4377e8[_0x471fcf(0x19f)]&&([_0x2c74ea]=await conn[_0x471fcf(0x223)]()[_0x471fcf(0x249)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?',[_0x460ac3]),_0x49c4ea=_0x2c74ea[0x0][_0x471fcf(0x2fe)]);const _0x4f0b82=_0x471fcf(0x260)+(_0xf00e96?_0x471fcf(0x2b6):'')+_0x471fcf(0x1f2);await conn[_0x471fcf(0x223)]()['execute'](_0x4f0b82,_0xf00e96?[_0x49c4ea,_0x5a6929,_0x40cd21,_0x5540f8,_0x1d6982,_0x40b2eb,_0x1a40a2,_0x2ae67a,_0x460ac3]:[_0x49c4ea,_0x5a6929,_0x40cd21,_0x5540f8,_0x1d6982,_0x1a40a2,_0x2ae67a,_0x460ac3]);}}catch(_0x49649a){console[_0x471fcf(0x160)](_0x49649a),_0x1dbea5['status'](0x1f4)[_0x471fcf(0x248)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}_0x1dbea5[_0x471fcf(0x161)](0xc8)[_0x471fcf(0x248)]({'success':!![],'message':_0x471fcf(0x19d)});}else{try{const [_0x40896e]=await conn[_0x471fcf(0x223)]()[_0x471fcf(0x249)](_0x471fcf(0x2a6),[_0x1d6982,_0x5540f8]);if(_0x40896e[_0x471fcf(0x1ae)]>0x0)_0x1dbea5[_0x471fcf(0x161)](0x199)['json']({'error':_0x471fcf(0x189)});else{const _0x26f0d5=randomUUID();await conn['promise']()['execute'](_0x471fcf(0x1ab),[_0x49c4ea,_0x5a6929,_0x40cd21,_0x5540f8,_0x1d6982,_0x40b2eb,_0x2ae67a,_0x1a40a2,_0x26f0d5]);const _0x49363b='./uploads/'+_0x26f0d5;fs[_0x471fcf(0x2d0)](_0x49363b);}}catch(_0x523983){console[_0x471fcf(0x160)](_0x523983),_0x1dbea5[_0x471fcf(0x161)](0x1f4)[_0x471fcf(0x248)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}_0x1dbea5[_0x471fcf(0x161)](0xc8)[_0x471fcf(0x248)]({'success':!![],'message':_0x471fcf(0x1a9)});}}),router['delete'](a27_0x4e4db8(0x170),async(_0x21fa14,_0x1f192a)=>{const _0xdd5702=a27_0x4e4db8,{userId:_0x454c9e}=_0x21fa14[_0xdd5702(0x274)];let _0x28cb43;try{const [_0x4f2a45]=await conn[_0xdd5702(0x223)]()['execute'](_0xdd5702(0x1b5),[_0x454c9e]);_0x4f2a45[_0xdd5702(0x1ae)]>0x0&&(_0x28cb43=_0x4f2a45[0x0]);}catch(_0xfa4843){console[_0xdd5702(0x160)]({'err':_0xfa4843}),_0x1f192a[_0xdd5702(0x161)](0x1f4)[_0xdd5702(0x248)]({'error':_0xdd5702(0x176)});return;}if(!_0x28cb43){_0x1f192a[_0xdd5702(0x161)](0x191)[_0xdd5702(0x248)]({'error':_0xdd5702(0x217)});return;}let _0x4a1ae4=_0x28cb43[_0xdd5702(0x1bc)];if(!_0x4a1ae4){_0x4a1ae4=randomUUID();try{await conn['promise']()[_0xdd5702(0x249)](_0xdd5702(0x16c),[_0x4a1ae4,_0x454c9e]);}catch(_0x4d5956){console[_0xdd5702(0x160)]({'err':_0x4d5956}),_0x1f192a[_0xdd5702(0x161)](0x1f4)['json']({'error':_0xdd5702(0x176)});return;}}const _0x535c6d='./uploads/'+_0x4a1ae4;console[_0xdd5702(0x160)](_0xdd5702(0x2ea)),console['log'](_0x535c6d),!fs[_0xdd5702(0x18d)](_0x535c6d)&&fs[_0xdd5702(0x2d0)](_0x535c6d),cleanCacheForUserFiles(_0x535c6d),fs['rmSync'](_0x535c6d,{'recursive':!![],'force':!![]}),fs['mkdirSync'](_0x535c6d),_0x1f192a['status'](0xc8)[_0xdd5702(0x248)]({'success':!![],'message':_0xdd5702(0x1c0)});}),router['delete'](a27_0x4e4db8(0x1d5),async(_0x4cd6e3,_0x3dd773)=>{const _0x342b6f=a27_0x4e4db8,_0x2444e9=_0x4cd6e3[_0x342b6f(0x1d8)][_0x342b6f(0x290)];try{let _0x59aa44;try{const [_0x237282]=await conn['promise']()[_0x342b6f(0x249)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?',[_0x2444e9]);_0x237282['length']>0x0&&(_0x59aa44=_0x237282[0x0]);}catch(_0x13712a){console[_0x342b6f(0x160)]({'err':_0x13712a}),_0x3dd773['status'](0x1f4)['json']({'error':_0x342b6f(0x176)});return;}if(!_0x59aa44){_0x3dd773[_0x342b6f(0x161)](0x191)['json']({'error':_0x342b6f(0x217)});return;}let _0x12c024=_0x59aa44[_0x342b6f(0x1bc)];if(_0x12c024){const _0x541ff2='./uploads/'+_0x12c024;fs['existsSync'](_0x541ff2)&&(cleanCacheForUserFiles(_0x541ff2),fs[_0x342b6f(0x1d4)](_0x541ff2,{'recursive':!![],'force':!![]}));}await conn[_0x342b6f(0x223)]()[_0x342b6f(0x249)]('DELETE\x20FROM\x20`users`\x20WHERE\x20`id`\x20=\x20?',[_0x2444e9]);}catch(_0x2dca0e){console['log'](_0x2dca0e),_0x3dd773[_0x342b6f(0x161)](0x1f4)[_0x342b6f(0x248)]({'error':_0x342b6f(0x176)});return;}_0x3dd773[_0x342b6f(0x161)](0xc8)[_0x342b6f(0x248)]({'success':!![],'message':'User\x20deleted\x20successfully'});}),router[a27_0x4e4db8(0x2f7)]('/metrics',async(_0x5d00f3,_0x2da4f8)=>{const _0x43c159=a27_0x4e4db8,_0x116cbe=osu[_0x43c159(0x2c6)],_0x13cd27=osu[_0x43c159(0x2c5)],_0x49248e=osu[_0x43c159(0x1cd)],_0x2d310a=osu['os'],_0x19726b={'percentage':0x0,'usedGB':0x0,'freeGb':0x0,'totalGB':0x0};try{let _0x31aa50=os[_0x43c159(0x2aa)]()===_0x43c159(0x210)?'c:':'/';const _0x4a6842=await _0x49248e[_0x43c159(0x18b)](_0x31aa50);_0x19726b[_0x43c159(0x226)]=_0x4a6842[_0x43c159(0x233)],_0x19726b[_0x43c159(0x1e0)]=_0x4a6842[_0x43c159(0x281)],_0x19726b['freeGb']=_0x4a6842['freeGb'],_0x19726b[_0x43c159(0x272)]=_0x4a6842['totalGb'];}catch(_0x1d5654){console[_0x43c159(0x160)](_0x43c159(0x192),_0x1d5654);}const _0x525daa={'usage':0x0,'count':0x0};try{_0x525daa[_0x43c159(0x1a7)]=await _0x116cbe[_0x43c159(0x1a7)](),_0x525daa[_0x43c159(0x1a5)]=_0x116cbe[_0x43c159(0x1a5)]();}catch(_0x2fda07){console['log'](_0x43c159(0x23f),_0x2fda07);}const _0x1004f4={'os':'','platform':'','ip':'','uptime':0x0,'hostname':'','type':'','arch':'','who':'','whoami':'','vmstats':''};try{_0x1004f4['os']=await _0x2d310a[_0x43c159(0x27b)](),_0x1004f4[_0x43c159(0x2aa)]=_0x2d310a[_0x43c159(0x2aa)](),_0x1004f4['ip']=_0x2d310a['ip'](),_0x1004f4[_0x43c159(0x230)]=_0x2d310a[_0x43c159(0x230)](),_0x1004f4[_0x43c159(0x28b)]=_0x2d310a[_0x43c159(0x28b)](),_0x1004f4[_0x43c159(0x1ea)]=_0x2d310a[_0x43c159(0x1ea)](),_0x1004f4[_0x43c159(0x266)]=_0x2d310a[_0x43c159(0x266)](),_0x1004f4[_0x43c159(0x1c7)]=await osu[_0x43c159(0x29b)]['who'](),_0x1004f4[_0x43c159(0x1fa)]=await osu['osCmd'][_0x43c159(0x1fa)](),_0x1004f4['vmstats']=await osu[_0x43c159(0x29b)]['vmstats']();}catch(_0x5b603e){console['log']('Error\x20getting\x20os\x20info',_0x5b603e);}const _0x4e0996={'totalProcesses':0x0,'zombieProcesses':0x0};try{_0x4e0996[_0x43c159(0x28f)]=await osu['proc'][_0x43c159(0x28f)](),_0x4e0996[_0x43c159(0x2eb)]=await osu[_0x43c159(0x1b2)]['zombieProcesses']();}catch(_0xb01816){console['log'](_0x43c159(0x2ee),_0xb01816);}let _0xcb158b={'usedMemPercentage':0x0,'usedMemMb':0x0,'totalMemMb':0x0};try{const _0x3b37cf=await _0x13cd27[_0x43c159(0x18b)]();_0xcb158b[_0x43c159(0x1c9)]=_0x3b37cf[_0x43c159(0x1c9)],_0xcb158b['usedMemMb']=_0x3b37cf['used']/0x400/0x400,_0xcb158b[_0x43c159(0x1a2)]=_0x3b37cf['total']/0x400/0x400;}catch(_0x1d3919){console['log'](_0x43c159(0x258),_0x1d3919);}let _0x120492=0x0;try{_0x120492=await conn[_0x43c159(0x223)]()[_0x43c159(0x2d7)]('SELECT\x20COUNT(*)\x20as\x20total\x20FROM\x20users')[_0x43c159(0x2bd)](([_0x68e466])=>_0x68e466[0x0][_0x43c159(0x2ba)]);}catch(_0x1da8fd){console[_0x43c159(0x160)](_0x43c159(0x171),_0x1da8fd);}const _0x46396c=getMonitoringData(),_0x26d74b=_0x46396c['filter'](_0x58e72e=>_0x58e72e[_0x43c159(0x1db)]!==null&&_0x58e72e['conversionTimeSpend']!==undefined),_0x230855=_0x46396c['filter'](_0x4f9831=>_0x4f9831[_0x43c159(0x279)]!==null&&_0x4f9831['conversionMemoryUsage']!==undefined)[_0x43c159(0x18c)](_0x5820b0=>parseFloat(_0x5820b0[_0x43c159(0x279)][_0x43c159(0x218)]('Kb')[_0x43c159(0x29c)]())),_0xbaaa09=_0x26d74b['reduce']((_0xd187fa,_0x178a29)=>_0xd187fa+parseFloat(_0x178a29['conversionTimeSpend']),0x0)/_0x26d74b[_0x43c159(0x1ae)],_0xacaee5=_0x230855[_0x43c159(0x22a)]((_0x652d5,_0x52cb4c)=>_0x652d5+_0x52cb4c,0x0)/_0x230855[_0x43c159(0x1ae)];_0x2da4f8[_0x43c159(0x248)]({'requestsPerSecond':counter[_0x43c159(0x216)](),'diskUsage':_0x19726b,'cpus':_0x525daa,'system':_0x1004f4,'process':_0x4e0996,'totalMonitoringData':_0x46396c[_0x43c159(0x1ae)],'memory':_0xcb158b,'totalUsers':_0x120492,'avgConvertionTime':_0xbaaa09,'avgMemoryUsage':_0xacaee5});}),router['post'](a27_0x4e4db8(0x2df),(_0x26724c,_0x158f4c)=>{const _0x52ef47=a27_0x4e4db8;counter['reset'](),_0x158f4c[_0x52ef47(0x248)]({'message':'Counter\x20reset\x20successfully'});});function a27_0x26cb(_0x445c59,_0x496aac){const _0x4a9585=a27_0x4a95();return a27_0x26cb=function(_0x26cb09,_0x9f171b){_0x26cb09=_0x26cb09-0x156;let _0x1ead4c=_0x4a9585[_0x26cb09];return _0x1ead4c;},a27_0x26cb(_0x445c59,_0x496aac);}const getMonitoringData=()=>{const _0x2ebf78=a27_0x4e4db8,_0x58f9d7=_0x2ebf78(0x24d);let _0x208e67=[];try{_0x208e67=JSON[_0x2ebf78(0x20d)](fs[_0x2ebf78(0x27a)](_0x58f9d7));}catch(_0xaa2cd){console[_0x2ebf78(0x160)](_0x2ebf78(0x244));}return _0x208e67;};router[a27_0x4e4db8(0x2f7)](a27_0x4e4db8(0x2c9),async(_0xffa428,_0x243d58)=>{const _0x3612f4=a27_0x4e4db8,{page:page=0x1,limit:limit=0xa}=_0xffa428['query'],_0x4834bf=(page-0x1)*limit;try{const _0x4c467d=getMonitoringData(),_0x5d0834=_0x4c467d['length'],_0x1b676f=Math[_0x3612f4(0x1ff)](_0x5d0834/limit),_0x11ee3b=_0x4c467d['slice'](_0x4834bf,_0x4834bf+limit);_0x243d58[_0x3612f4(0x161)](0xc8)[_0x3612f4(0x248)]({'data':_0x11ee3b,'page':parseInt(''+page),'totalPages':_0x1b676f,'total':_0x5d0834});}catch(_0xbe8cbe){console['log'](_0xbe8cbe),_0x243d58['status'](0x1f4)[_0x3612f4(0x248)]({'error':_0x3612f4(0x176)});}}),router[a27_0x4e4db8(0x1a6)](a27_0x4e4db8(0x1c3),async(_0x210333,_0x2c8276)=>{const _0x563ef0=a27_0x4e4db8,_0x71d2c=_0x563ef0(0x24d);try{fs[_0x563ef0(0x262)](_0x71d2c,JSON[_0x563ef0(0x190)]([],null,0x4)),analyzeConverterFiles(),_0x2c8276[_0x563ef0(0x161)](0xc8)['json']({'message':_0x563ef0(0x28c)});}catch(_0x5d783f){console['log'](_0x5d783f),_0x2c8276[_0x563ef0(0x161)](0x1f4)[_0x563ef0(0x248)]({'error':_0x563ef0(0x176)});}}),router['get']('/conversion/memorydata',async(_0x378350,_0x190b40)=>{const _0x1fe5c6=a27_0x4e4db8,_0x3c3f63=getHotConfig()[_0x1fe5c6(0x1ac)][_0x1fe5c6(0x218)]('//','/'),{page:page=0x1,limit:limit=0xa}=_0x378350[_0x1fe5c6(0x2d7)],_0x35ddb5=(page-0x1)*limit;try{const _0xa7929d=_0x3c3f63+'memorydata.csv';console[_0x1fe5c6(0x160)](_0xa7929d);const _0x33955a=fs[_0x1fe5c6(0x27a)](_0xa7929d,'utf8'),_0x16ff82=_0x33955a['split']('\x0a'),_0x251720=[];_0x16ff82[_0x1fe5c6(0x21e)](_0x1caacd=>{const _0x446a02=_0x1fe5c6,_0x58b50a=_0x1caacd[_0x446a02(0x15f)](',');if(_0x58b50a[_0x446a02(0x1ae)]<0x4)return;const _0x533dd1=_0x58b50a[0x0],_0x41b6b5=_0x58b50a[0x1],_0x223a4b=parseFloat(_0x58b50a[0x2]);_0x251720[_0x446a02(0x2cd)]({'file':_0x533dd1[_0x446a02(0x218)]('\x22',''),'action':_0x41b6b5,'timeSpend':_0x223a4b,'memoryUsage':_0x58b50a[0x3]});});const _0x3afb82=_0x251720['length'],_0x4cf42e=Math[_0x1fe5c6(0x1ff)](_0x3afb82/limit),_0xc0edf1=_0x251720[_0x1fe5c6(0x2dc)](_0x35ddb5,_0x35ddb5+limit);_0x190b40[_0x1fe5c6(0x161)](0xc8)['json']({'data':_0xc0edf1,'page':parseInt(''+page),'totalPages':_0x4cf42e,'total':_0x3afb82});}catch(_0x16ebca){console[_0x1fe5c6(0x160)](_0x16ebca),_0x190b40[_0x1fe5c6(0x161)](0x1f4)[_0x1fe5c6(0x248)]({'error':_0x1fe5c6(0x176)});}}),router[a27_0x4e4db8(0x2f7)]('/cache/stats',async(_0x13b1cd,_0x30a0e4)=>{const _0x4b024c=a27_0x4e4db8,_0x290707=path['join'](path[_0x4b024c(0x17c)](require['main']['filename']),_0x4b024c(0x2f3),_0x4b024c(0x292));try{let _0x1ba99b=0x0,_0x4b1a1c=0x0;function _0x2c5834(_0x11fcc1){const _0x1efbf4=_0x4b024c;let _0x53cf43=0x0,_0xac6110=0x0;if(fs[_0x1efbf4(0x18d)](_0x11fcc1)){const _0x577aab=fs[_0x1efbf4(0x1cc)](_0x11fcc1);_0xac6110=0x0;for(const _0x48344c of _0x577aab){const _0x56640a=path['join'](_0x11fcc1,_0x48344c),_0x2b2d37=fs['statSync'](_0x56640a);if(_0x2b2d37[_0x1efbf4(0x271)]()&&_0x48344c!==_0x1efbf4(0x298))_0xac6110++,_0x53cf43+=_0x2b2d37[_0x1efbf4(0x270)];else{if(_0x2b2d37[_0x1efbf4(0x1a8)]()){}}}}return{'size':_0x53cf43,'count':_0xac6110};}const _0x1f1563=_0x2c5834(_0x290707);_0x1ba99b=_0x1f1563[_0x4b024c(0x270)],_0x4b1a1c=_0x1f1563[_0x4b024c(0x1a5)],_0x30a0e4['json']({'fileCount':_0x4b1a1c,'totalSize':_0x1ba99b});}catch(_0x443f34){console[_0x4b024c(0x1f3)](_0x4b024c(0x23c),_0x443f34),_0x30a0e4[_0x4b024c(0x161)](0x1f4)[_0x4b024c(0x248)]({'error':'Failed\x20to\x20get\x20cache\x20stats'});}}),router[a27_0x4e4db8(0x1a6)](a27_0x4e4db8(0x25a),async(_0x4ab4ad,_0x43a952)=>{const _0x1b92d7=a27_0x4e4db8,_0x2e2f26=path[_0x1b92d7(0x195)](path[_0x1b92d7(0x17c)](require[_0x1b92d7(0x239)][_0x1b92d7(0x231)]),_0x1b92d7(0x2f3),_0x1b92d7(0x292));try{function _0x468b5e(_0x2fc10a){const _0xa0c7e3=_0x1b92d7;if(fs[_0xa0c7e3(0x18d)](_0x2fc10a)){const _0x10a65e=fs[_0xa0c7e3(0x1cc)](_0x2fc10a);for(const _0x20e231 of _0x10a65e){const _0xcc2f18=path['join'](_0x2fc10a,_0x20e231),_0x541017=fs[_0xa0c7e3(0x219)](_0xcc2f18);if(_0x541017['isDirectory']()){}else _0x20e231!==_0xa0c7e3(0x298)&&fs[_0xa0c7e3(0x15a)](_0xcc2f18);}}}_0x468b5e(_0x2e2f26),analyzeConverterFiles(),_0x43a952[_0x1b92d7(0x248)]({'message':'Cache\x20flushed\x20successfully'});}catch(_0x27f8a4){console['error'](_0x1b92d7(0x2e9),_0x27f8a4),_0x43a952[_0x1b92d7(0x161)](0x1f4)[_0x1b92d7(0x248)]({'error':_0x1b92d7(0x2d8)});}}),router[a27_0x4e4db8(0x2f7)](a27_0x4e4db8(0x1e6),async(_0x37534d,_0x2849f5)=>{const _0x49dabd=a27_0x4e4db8;_0x2849f5[_0x49dabd(0x2de)](path[_0x49dabd(0x195)](path['dirname'](require[_0x49dabd(0x239)]['filename']),_0x49dabd(0x214)));}),router[a27_0x4e4db8(0x2f7)]('/cache',protectedRoute,async(_0x58019a,_0x46fec1)=>{const _0x20bc23=a27_0x4e4db8,_0x3903b9=fs[_0x20bc23(0x27a)](path['join'](path[_0x20bc23(0x17c)](require[_0x20bc23(0x239)][_0x20bc23(0x231)]),_0x20bc23(0x29d)),_0x20bc23(0x264)),_0x2f8a73=_0x3903b9[_0x20bc23(0x218)](_0x20bc23(0x26b),_0x58019a[_0x20bc23(0x168)]);_0x46fec1[_0x20bc23(0x2fd)](_0x2f8a73);}),router[a27_0x4e4db8(0x2f7)]('/cache/files',async(_0x37c06c,_0x1c3949)=>{const _0x399c11=a27_0x4e4db8,{page:page=0x1,limit:limit=0x10}=_0x37c06c[_0x399c11(0x2d7)],_0x2622f9=JSON[_0x399c11(0x20d)](fs[_0x399c11(0x27a)](path[_0x399c11(0x195)](path[_0x399c11(0x17c)](require['main'][_0x399c11(0x231)]),_0x399c11(0x2b9)))),_0x2acdde=(page-0x1)*limit,_0x26fe47=page*limit,_0x3b1b37=_0x2622f9[_0x399c11(0x292)][_0x399c11(0x1ae)],_0x2307fb=Math[_0x399c11(0x1ff)](_0x3b1b37/limit),_0x5d198c=_0x2622f9[_0x399c11(0x292)][_0x399c11(0x2dc)](_0x2acdde,_0x26fe47);_0x1c3949['json']({'files':_0x5d198c,'pagination':{'total':_0x3b1b37,'totalPages':_0x2307fb,'currentPage':parseInt(page),'limit':parseInt(limit)}});return;}),router['get']('/cache/csv/:file',async(_0x1c2f0f,_0x5f213b)=>{const _0x22284d=a27_0x4e4db8,{file:_0x3e954c}=_0x1c2f0f[_0x22284d(0x1d8)],_0x4d516d=path['join'](path[_0x22284d(0x17c)](require[_0x22284d(0x239)][_0x22284d(0x231)]),_0x22284d(0x2f3),_0x22284d(0x292)),_0x5696e9=path[_0x22284d(0x195)](_0x4d516d,_0x3e954c),_0x2e678d=fs[_0x22284d(0x27a)](_0x5696e9,_0x22284d(0x264)),_0x287f92=_0x2e678d[_0x22284d(0x15f)]('\x0a'),_0x4b627b=_0x287f92[_0x22284d(0x18c)](_0x3d9988=>{const _0x534235=_0x22284d,_0x163022=_0x3d9988[_0x534235(0x15f)](',');return _0x163022[_0x534235(0x18c)](_0x3e560b=>_0x3e560b[_0x534235(0x218)]('\x22',''));});_0x5f213b[_0x22284d(0x248)](_0x4b627b);}),router[a27_0x4e4db8(0x2f7)](a27_0x4e4db8(0x169),async(_0x319fe2,_0x4cb794)=>{const _0x3d2e94=a27_0x4e4db8,{id:_0x3f6f7b}=_0x319fe2['params'],_0x41928e=path['join'](path[_0x3d2e94(0x17c)](require[_0x3d2e94(0x239)]['filename']),_0x3d2e94(0x2f3),'files'),_0x441ebf=path['join'](_0x41928e,_0x3f6f7b);if(_0x441ebf[_0x3d2e94(0x224)](_0x3d2e94(0x17a))){var _0x540564=require('zlib');const _0x420034=fs[_0x3d2e94(0x27a)](_0x441ebf),_0x2f558d=_0x540564[_0x3d2e94(0x276)](_0x420034);_0x4cb794[_0x3d2e94(0x238)](_0x3d2e94(0x25c),_0x3d2e94(0x23b)),_0x4cb794['send'](_0x2f558d);}else _0x4cb794[_0x3d2e94(0x2de)](_0x441ebf);}),router[a27_0x4e4db8(0x1a6)]('/cache/files/:id',async(_0xea436c,_0x43b4b9)=>{const _0x3cfde3=a27_0x4e4db8,{id:_0x205f38}=_0xea436c[_0x3cfde3(0x1d8)],_0x336b28=path[_0x3cfde3(0x195)](path['dirname'](require[_0x3cfde3(0x239)][_0x3cfde3(0x231)]),_0x3cfde3(0x2f3),'files'),_0x8fc5d7=JSON['parse'](fs[_0x3cfde3(0x27a)](path[_0x3cfde3(0x195)](path['dirname'](require[_0x3cfde3(0x239)]['filename']),_0x3cfde3(0x2b9)))),_0x4bebf9=_0x8fc5d7[_0x3cfde3(0x292)][_0x3cfde3(0x1e9)](_0x277870=>_0x277870['name']===_0x205f38);if(_0x4bebf9){try{fs['existsSync'](path['join'](_0x336b28,_0x4bebf9[_0x3cfde3(0x2ef)]))&&fs['unlinkSync'](path[_0x3cfde3(0x195)](_0x336b28,_0x4bebf9[_0x3cfde3(0x2ef)]));}catch(_0xd9ea31){console[_0x3cfde3(0x160)]('Error\x20deleting\x20file',{'e':_0xd9ea31});}(_0x4bebf9[_0x3cfde3(0x2b8)]??[])[_0x3cfde3(0x21e)](_0x11fd0d=>{const _0x508b76=_0x3cfde3;try{fs[_0x508b76(0x18d)](path[_0x508b76(0x195)](_0x336b28,_0x11fd0d['id']))&&fs[_0x508b76(0x15a)](path['join'](_0x336b28,_0x11fd0d['id']));}catch(_0x9c410){console[_0x508b76(0x160)](_0x508b76(0x177),{'e':_0x9c410});}});}analyzeConverterFiles(),_0x43b4b9[_0x3cfde3(0x248)]({'message':_0x3cfde3(0x2e1)});});const deleteOldDemoUsers=async()=>{const _0x1a6427=a27_0x4e4db8;console[_0x1a6427(0x160)](_0x1a6427(0x15b));const _0x4be6cd=config[_0x1a6427(0x1f7)],_0x21a621=_0x1a6427(0x1ec);try{const [_0x29d07c]=await conn[_0x1a6427(0x223)]()['execute'](_0x21a621,[_0x4be6cd]),_0xa838a9=_0x29d07c[_0x1a6427(0x18c)](_0x5558f8=>_0x5558f8[_0x1a6427(0x1bc)]),_0x1981d4=_0x29d07c['map'](_0x122790=>_0x122790[_0x1a6427(0x2b7)]);console[_0x1a6427(0x160)](_0x1981d4),await conn[_0x1a6427(0x223)]()[_0x1a6427(0x249)]('DELETE\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)',[_0x4be6cd]),_0xa838a9[_0x1a6427(0x21e)](_0x5a8d3f=>{const _0x116aba=_0x1a6427;try{const _0x26666e=_0x116aba(0x2a4)+_0x5a8d3f;cleanCacheForUserFiles(_0x26666e),fs[_0x116aba(0x162)](_0x26666e);}catch(_0x5a9c27){console[_0x116aba(0x1f3)](_0x116aba(0x2a7),_0x5a9c27);}}),console[_0x1a6427(0x160)](_0x1a6427(0x2c1)+_0x29d07c['length']+_0x1a6427(0x1ed)+_0x4be6cd+_0x1a6427(0x18f));}catch(_0x27320d){console['error'](_0x1a6427(0x26c),_0x27320d);}};schedule[a27_0x4e4db8(0x20a)](a27_0x4e4db8(0x287),deleteOldDemoUsers),router[a27_0x4e4db8(0x2f7)](a27_0x4e4db8(0x22e),protectedRoute,async(_0x47bacd,_0x405ae0)=>{const _0x496fa3=a27_0x4e4db8,_0x579183=fs[_0x496fa3(0x27a)](path[_0x496fa3(0x195)](path[_0x496fa3(0x17c)](require[_0x496fa3(0x239)][_0x496fa3(0x231)]),_0x496fa3(0x2b5)),'utf8'),_0x3ac4bc=_0x579183[_0x496fa3(0x218)](_0x496fa3(0x26b),_0x47bacd[_0x496fa3(0x168)]);_0x405ae0[_0x496fa3(0x2fd)](_0x3ac4bc);});const exportUsersList=async()=>{const _0x38adc1=a27_0x4e4db8;console['log']('Exporting\x20new\x20users\x20for\x20Google\x20Ads...');const _0x5e9d5f=path[_0x38adc1(0x195)](path[_0x38adc1(0x17c)](require['main'][_0x38adc1(0x231)]),'exports');!fs[_0x38adc1(0x18d)](_0x5e9d5f)&&fs[_0x38adc1(0x2d0)](_0x5e9d5f);const _0xcfaf10=config[_0x38adc1(0x2a0)]||_0x38adc1(0x208);let _0x34df12;const _0x57b2e0=path[_0x38adc1(0x195)](_0x5e9d5f,_0x38adc1(0x2bb));if(fs[_0x38adc1(0x18d)](_0x57b2e0))try{const _0x2ec55e=JSON[_0x38adc1(0x20d)](fs[_0x38adc1(0x27a)](_0x57b2e0,'utf8'));_0x34df12=new Date(_0x2ec55e[_0x38adc1(0x2fc)]);}catch(_0xe5c206){console['error'](_0x38adc1(0x2c7),_0xe5c206),_0x34df12=calculateDefaultLastExportDate(_0xcfaf10);}else _0x34df12=calculateDefaultLastExportDate(_0xcfaf10);const _0x1fc7c8=new Date(),_0x54591b=_0x1fc7c8[_0x38adc1(0x16a)]()+'-'+String(_0x1fc7c8[_0x38adc1(0x17e)]()+0x1)['padStart'](0x2,'0')+'-'+String(_0x1fc7c8[_0x38adc1(0x1dc)]())[_0x38adc1(0x165)](0x2,'0'),_0x4c2e60=_0x38adc1(0x1b1)+_0x54591b+_0x38adc1(0x28e),_0x5262dd=path[_0x38adc1(0x195)](_0x5e9d5f,_0x4c2e60);try{const _0x1d43ba=_0x38adc1(0x1d9),[_0x4fa2ad]=await conn['promise']()[_0x38adc1(0x249)](_0x1d43ba,[_0x34df12]);if(_0x4fa2ad['length']===0x0){console[_0x38adc1(0x160)]('No\x20new\x20users\x20to\x20export\x20for\x20Google\x20Ads');return;}let _0x505234=_0x38adc1(0x20f);_0x4fa2ad[_0x38adc1(0x21e)](_0x4b9869=>{const _0xd4195b=_0x38adc1,_0x4b5a31=_0x4b9869['email']?'\x22'+_0x4b9869[_0xd4195b(0x2b7)]['replace'](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x35fd5b=_0x4b9869[_0xd4195b(0x2f6)]?'\x22'+_0x4b9869[_0xd4195b(0x2f6)][_0xd4195b(0x212)](/"/g,'\x22\x22')+'\x22':'\x22\x22',_0x3dcc5b=_0x4b9869[_0xd4195b(0x193)]?'\x22'+_0x4b9869[_0xd4195b(0x193)][_0xd4195b(0x212)](/"/g,'\x22\x22')+'\x22':'\x22\x22';_0x505234+=_0x4b5a31+','+_0x35fd5b+','+_0x3dcc5b+'\x0a';}),fs[_0x38adc1(0x262)](_0x5262dd,_0x505234),console[_0x38adc1(0x160)](_0x38adc1(0x300)+_0x4fa2ad[_0x38adc1(0x1ae)]+_0x38adc1(0x284)+_0x5262dd);const _0xd26623={'lastExportDate':_0x1fc7c8[_0x38adc1(0x2ac)](),'fileName':_0x4c2e60,'userCount':_0x4fa2ad[_0x38adc1(0x1ae)]};fs[_0x38adc1(0x262)](_0x57b2e0,JSON[_0x38adc1(0x190)](_0xd26623,null,0x2));}catch(_0x1a0f62){console[_0x38adc1(0x1f3)](_0x38adc1(0x1bb),_0x1a0f62);}},calculateDefaultLastExportDate=_0xee576b=>{const _0x226c44=a27_0x4e4db8,_0x19d772=new Date();return _0xee576b===_0x226c44(0x1c1)?_0x19d772[_0x226c44(0x2c8)](_0x19d772['getDate']()-0xe):_0x19d772[_0x226c44(0x261)](_0x19d772[_0x226c44(0x17e)]()-0x1),_0x19d772;};router[a27_0x4e4db8(0x2f7)]('/users-export/history',async(_0x454c86,_0x334d7e)=>{const _0x17114f=a27_0x4e4db8,_0x4c6eed=path[_0x17114f(0x195)](path[_0x17114f(0x17c)](require[_0x17114f(0x239)]['filename']),'exports');if(!fs[_0x17114f(0x18d)](_0x4c6eed))return _0x334d7e[_0x17114f(0x161)](0xc8)[_0x17114f(0x248)]({'exports':[]});try{const _0x4d3b5f=fs[_0x17114f(0x1cc)](_0x4c6eed)[_0x17114f(0x2d4)](_0x1a35ab=>_0x1a35ab['startsWith'](_0x17114f(0x1b1))&&_0x1a35ab[_0x17114f(0x224)](_0x17114f(0x28e)))[_0x17114f(0x18c)](_0x42bfc4=>{const _0x260b69=_0x17114f,_0x499105=path[_0x260b69(0x195)](_0x4c6eed,_0x42bfc4),_0x3607ae=fs['statSync'](_0x499105),_0x35cbce=fs['readFileSync'](_0x499105,_0x260b69(0x264)),_0x2825d0=_0x35cbce['split']('\x0a')[_0x260b69(0x1ae)]-0x1;return{'fileName':_0x42bfc4,'createdAt':_0x3607ae[_0x260b69(0x16f)],'userCount':_0x2825d0};})['sort']((_0x865ccf,_0x3109fb)=>_0x3109fb[_0x17114f(0x156)]-_0x865ccf[_0x17114f(0x156)]);_0x334d7e['status'](0xc8)['json']({'exports':_0x4d3b5f});}catch(_0x3f0fbc){console['error'](_0x17114f(0x257),_0x3f0fbc),_0x334d7e[_0x17114f(0x161)](0x1f4)[_0x17114f(0x248)]({'error':'Failed\x20to\x20retrieve\x20export\x20history'});}}),router['post']('/users-export/trigger',async(_0xe77a2c,_0x59f62d)=>{const _0x53b0c3=a27_0x4e4db8;try{await exportUsersList(),_0x59f62d[_0x53b0c3(0x161)](0xc8)[_0x53b0c3(0x248)]({'message':_0x53b0c3(0x2ed)});}catch(_0xe86b3f){console[_0x53b0c3(0x1f3)](_0x53b0c3(0x22c),_0xe86b3f),_0x59f62d[_0x53b0c3(0x161)](0x1f4)[_0x53b0c3(0x248)]({'error':_0x53b0c3(0x196)});}}),router[a27_0x4e4db8(0x2f7)](a27_0x4e4db8(0x2b0),async(_0xe118da,_0x1171ad)=>{const _0x4ea861=a27_0x4e4db8,{fileName:_0x589563}=_0xe118da['params'],_0x66ecea=path[_0x4ea861(0x195)](path['dirname'](require[_0x4ea861(0x239)][_0x4ea861(0x231)]),_0x4ea861(0x1b9),_0x589563);if(!fs[_0x4ea861(0x18d)](_0x66ecea))return _0x1171ad[_0x4ea861(0x161)](0x194)[_0x4ea861(0x248)]({'error':_0x4ea861(0x22f)});_0x1171ad[_0x4ea861(0x229)](_0x66ecea);});const cleanCacheForUserFiles=_0x4541de=>{const _0x22db79=a27_0x4e4db8;try{if(!fs['existsSync'](_0x4541de)){console[_0x22db79(0x160)](_0x22db79(0x2be)+_0x4541de+_0x22db79(0x1de));return;}const _0x378594=path[_0x22db79(0x195)](path[_0x22db79(0x17c)](require[_0x22db79(0x239)]['filename']),_0x22db79(0x2f3),_0x22db79(0x292));if(!fs['existsSync'](_0x378594)){console[_0x22db79(0x160)]('Cache\x20directory\x20'+_0x378594+_0x22db79(0x1de));return;}const _0x55edca=JSON['parse'](fs['readFileSync'](path[_0x22db79(0x195)](path[_0x22db79(0x17c)](require[_0x22db79(0x239)][_0x22db79(0x231)]),'cadviewer/settings/converter-files-analysis.json'))),_0xe5d9d7=fs[_0x22db79(0x1cc)](_0x4541de);_0xe5d9d7[_0x22db79(0x21e)](_0x313abb=>{const _0x507271=_0x22db79;_0x55edca[_0x507271(0x292)][_0x507271(0x21e)](_0xc830c9=>{const _0x215ce2=_0x507271;_0xc830c9[_0x215ce2(0x2ae)]===_0x313abb&&_0xc830c9['availableFormats'][_0x215ce2(0x21e)](_0x232894=>{const _0x4cb2af=_0x215ce2;try{fs[_0x4cb2af(0x15a)](path['join'](_0x378594,_0x232894['id']));}catch(_0x1752da){console[_0x4cb2af(0x1f3)](_0x4cb2af(0x265)+_0x232894['id']+':',_0x1752da);}});});}),analyzeConverterFiles(),console[_0x22db79(0x160)]('Cache\x20cleaned\x20for\x20files\x20in\x20'+_0x4541de);}catch(_0x43c6a1){console[_0x22db79(0x1f3)](_0x22db79(0x237),_0x43c6a1);}};schedule['scheduleJob'](a27_0x4e4db8(0x1fe),exportUsersList),schedule['scheduleJob'](a27_0x4e4db8(0x1fc),sendFollowUpEmails),schedule[a27_0x4e4db8(0x20a)](a27_0x4e4db8(0x1b3),sendAccountDeletionPreventionEmails);const analyzeConverterFiles=()=>{const _0x49efca=a27_0x4e4db8;try{const _0x1819df=path[_0x49efca(0x195)](path['dirname'](require[_0x49efca(0x239)][_0x49efca(0x231)]),_0x49efca(0x2f3),'files'),_0x3e8212=path[_0x49efca(0x195)](path[_0x49efca(0x17c)](require['main'][_0x49efca(0x231)]),'cadviewer',_0x49efca(0x1eb));if(!fs['existsSync'](_0x1819df)){logStream['write'](_0x49efca(0x163)+_0x1819df+_0x49efca(0x1c8));return;}if(!fs['existsSync'](_0x3e8212)){logStream[_0x49efca(0x206)](_0x49efca(0x163)+_0x3e8212+_0x49efca(0x1c8));return;}const _0x45a269=fs[_0x49efca(0x1cc)](_0x1819df),_0x2c42e5={};_0x45a269['forEach'](_0x4574eb=>{const _0x231b25=_0x49efca,_0x24e949=path[_0x231b25(0x195)](_0x1819df,_0x4574eb),_0x1c54d7=fs[_0x231b25(0x219)](_0x24e949),_0x3da41a=_0x4574eb['split']('.'),_0x1a11ae=_0x3da41a[_0x231b25(0x2dc)](0x0,-0x1)[_0x231b25(0x2d4)]((_0x5d012f,_0x313d7a)=>!([_0x231b25(0x2e7),'rl'][_0x231b25(0x29f)](_0x5d012f[_0x231b25(0x24a)]())&&_0x313d7a===_0x3da41a[_0x231b25(0x1ae)]-0x2))[_0x231b25(0x195)]('.');!Object['keys'](_0x2c42e5)[_0x231b25(0x29f)](_0x1a11ae)?_0x2c42e5[_0x1a11ae]=[{'file':_0x4574eb,'stats':_0x1c54d7}]:_0x2c42e5[_0x1a11ae]['push']({'file':_0x4574eb,'stats':_0x1c54d7});});const _0x3f2645=[];_0x45a269['forEach'](_0xea97ee=>{const _0x4a66a0=_0x49efca;if(!_0xea97ee['endsWith'](_0x4a66a0(0x21f)))return;let _0x4cf1fe=_0xea97ee;const _0xb8a09b=path[_0x4a66a0(0x195)](_0x1819df,_0xea97ee),_0x25306e=fs[_0x4a66a0(0x219)](_0xb8a09b);let _0x212e08=_0x25306e[_0x4a66a0(0x270)],_0x374e47='';const _0x357fdd=fs[_0x4a66a0(0x27a)](_0xb8a09b,'utf8'),_0x18a713=JSON[_0x4a66a0(0x20d)](_0x357fdd),_0x402a39=_0x18a713[_0x4a66a0(0x2e5)]?.[_0x4a66a0(0x18c)](_0x17b60c=>_0x17b60c[_0x4a66a0(0x17f)])??[];if(_0x18a713[_0x4a66a0(0x231)])_0x4cf1fe=_0x18a713[_0x4a66a0(0x231)];const _0x584da4=_0xea97ee['split']('.'),_0x53902b=_0x584da4[_0x4a66a0(0x2dc)](0x0,-0x1)[_0x4a66a0(0x2d4)]((_0x125d06,_0x1930a7)=>!(['dwg','rl'][_0x4a66a0(0x29f)](_0x125d06[_0x4a66a0(0x24a)]())&&_0x1930a7===_0x584da4['length']-0x2))[_0x4a66a0(0x195)]('.'),_0x287d76=Object['keys'](_0x2c42e5)[_0x4a66a0(0x29f)](_0x53902b)?_0x2c42e5[_0x53902b]:[];for(const _0x35fbe5 of _0x402a39){Object[_0x4a66a0(0x1cb)](_0x2c42e5)['includes'](_0x35fbe5)&&_0x287d76[_0x4a66a0(0x2cd)](..._0x2c42e5[_0x35fbe5]);}const _0x1c353d=_0x287d76[_0x4a66a0(0x18c)](({file:_0x1e9183,stats:_0x423774})=>{const _0x4a59e3=_0x4a66a0;return!_0x1e9183[_0x4a59e3(0x224)](_0x4a59e3(0x21f))&&(_0x212e08+=_0x423774[_0x4a59e3(0x270)]),{'id':_0x1e9183,'name':_0x1e9183['endsWith'](_0x4a59e3(0x2b4))?_0x4a59e3(0x240):_0x1e9183[_0x4a59e3(0x224)](_0x4a59e3(0x17a))?_0x4a59e3(0x1c2):_0x1e9183[_0x4a59e3(0x224)]('.pdf')?_0x4a59e3(0x1b6):_0x1e9183['endsWith']('.json')?'JSON':_0x1e9183[_0x4a59e3(0x224)](_0x4a59e3(0x28e))?_0x4a59e3(0x278):_0x1e9183[_0x4a59e3(0x224)](_0x4a59e3(0x15e))?_0x4a59e3(0x2d6):_0x1e9183[_0x4a59e3(0x15f)]('.')[_0x4a59e3(0x183)]()[_0x4a59e3(0x234)](),'color':_0x1e9183[_0x4a59e3(0x224)](_0x4a59e3(0x2b4))||_0x1e9183[_0x4a59e3(0x224)](_0x4a59e3(0x17a))?_0x4a59e3(0x1c4):_0x1e9183['endsWith'](_0x4a59e3(0x236))?_0x4a59e3(0x26d):_0x1e9183['endsWith'](_0x4a59e3(0x294))?'gray':_0x1e9183[_0x4a59e3(0x224)]('.csv')?_0x4a59e3(0x1ef):_0x1e9183[_0x4a59e3(0x224)]('.dwg')?_0x4a59e3(0x21c):_0x4a59e3(0x18e)};});if(_0x1c353d['some'](_0x252a11=>_0x252a11['id'][_0x4a66a0(0x29f)](_0x4a66a0(0x220))))_0x374e47='RL/TL\x20Processing';else{if(_0x1c353d['some'](_0x286d92=>[_0x4a66a0(0x1ce),_0x4a66a0(0x250)][_0x4a66a0(0x29f)](_0x286d92['id'][_0x4a66a0(0x15f)]('.')[_0x4a66a0(0x183)]()))&&_0x1c353d[_0x4a66a0(0x24b)](_0x49cbfd=>[_0x4a66a0(0x1b8)][_0x4a66a0(0x29f)](_0x49cbfd['id'][_0x4a66a0(0x15f)]('.')['pop']())))_0x374e47=_0x4a66a0(0x2c4);else{if(_0x1c353d[_0x4a66a0(0x24b)](_0x17deba=>[_0x4a66a0(0x1ce),_0x4a66a0(0x250)][_0x4a66a0(0x29f)](_0x17deba['id'][_0x4a66a0(0x15f)]('.')[_0x4a66a0(0x183)]())))_0x374e47=_0x4a66a0(0x182);else{if(_0x1c353d[_0x4a66a0(0x24b)](_0x499189=>[_0x4a66a0(0x248)][_0x4a66a0(0x29f)](_0x499189['id'][_0x4a66a0(0x15f)]('.')[_0x4a66a0(0x183)]()))&&_0x1c353d[_0x4a66a0(0x24b)](_0x1d2044=>[_0x4a66a0(0x2e7)]['includes'](_0x1d2044['id']['split']('.')[_0x4a66a0(0x183)]())))_0x374e47=_0x4a66a0(0x1e5);else{if(_0x1c353d[_0x4a66a0(0x24b)](_0x2c63bc=>['pdf'][_0x4a66a0(0x29f)](_0x2c63bc['id']['split']('.')[_0x4a66a0(0x183)]())))_0x374e47=_0x4a66a0(0x199);else{if(_0x1c353d[_0x4a66a0(0x24b)](_0xe6d2e1=>['json']['includes'](_0xe6d2e1['id'][_0x4a66a0(0x15f)]('.')[_0x4a66a0(0x183)]()))&&!_0x1c353d[_0x4a66a0(0x24b)](_0xa5aa1c=>[_0x4a66a0(0x2e7)][_0x4a66a0(0x29f)](_0xa5aa1c['id'][_0x4a66a0(0x15f)]('.')[_0x4a66a0(0x183)]())))_0x374e47=_0x4a66a0(0x295);else _0x1c353d['some'](_0x5d8de0=>[_0x4a66a0(0x248)][_0x4a66a0(0x29f)](_0x5d8de0['id']['split']('.')[_0x4a66a0(0x183)]()))&&(_0x374e47=_0x4a66a0(0x228));}}}}}_0x3f2645[_0x4a66a0(0x2cd)]({'name':_0xea97ee,'goodFileName':_0x4cf1fe,'size':_0x212e08,'createdAt':_0x25306e[_0x4a66a0(0x16f)],'updatedAt':_0x25306e[_0x4a66a0(0x16b)],'readAt':_0x25306e[_0x4a66a0(0x2a1)],'action':_0x374e47,'availableFormats':_0x1c353d});}),_0x3f2645[_0x49efca(0x1a4)]((_0x5b833d,_0x2b701a)=>_0x2b701a[_0x49efca(0x2cf)]-_0x5b833d[_0x49efca(0x2cf)]);const _0x2a464c={'timestamp':new Date(),'totalFiles':_0x3f2645[_0x49efca(0x1ae)],'files':_0x3f2645},_0x49e95c=path['join'](_0x3e8212,_0x49efca(0x1dd));fs[_0x49efca(0x262)](_0x49e95c,JSON[_0x49efca(0x190)](_0x2a464c,null,0x2));}catch(_0x3813d3){console[_0x49efca(0x160)]('===================error==================='),console[_0x49efca(0x160)](_0x49efca(0x2d5)+_0x3813d3[_0x49efca(0x283)]);}},scheduleFileAnalysis=()=>{const _0x3bba62=a27_0x4e4db8;analyzeConverterFiles(),schedule['scheduleJob'](_0x3bba62(0x2cb),analyzeConverterFiles),logStream[_0x3bba62(0x206)]('Analyse\x20périodique\x20des\x20fichiers\x20du\x20dossier\x20converters/files\x20planifiée\x20(toutes\x20les\x20heures)');};scheduleFileAnalysis(),module[a27_0x4e4db8(0x1b9)]={'router':router,'analyzeConverterFiles':analyzeConverterFiles};
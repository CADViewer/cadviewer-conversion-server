var a16_0x46296d=a16_0x19fe;(function(_0x36ffca,_0x31a165){var _0x165ba3=a16_0x19fe,_0x2f5498=_0x36ffca();while(!![]){try{var _0x5742e3=parseInt(_0x165ba3(0x16a))/0x1*(-parseInt(_0x165ba3(0x184))/0x2)+-parseInt(_0x165ba3(0x179))/0x3+-parseInt(_0x165ba3(0x183))/0x4+-parseInt(_0x165ba3(0x16f))/0x5*(parseInt(_0x165ba3(0x1a0))/0x6)+parseInt(_0x165ba3(0x170))/0x7+parseInt(_0x165ba3(0x163))/0x8+parseInt(_0x165ba3(0x1a3))/0x9*(parseInt(_0x165ba3(0x194))/0xa);if(_0x5742e3===_0x31a165)break;else _0x2f5498['push'](_0x2f5498['shift']());}catch(_0x36029c){_0x2f5498['push'](_0x2f5498['shift']());}}}(a16_0x230f,0xea335));function a16_0x19fe(_0x2edfa7,_0x4f35c6){var _0x230f6e=a16_0x230f();return a16_0x19fe=function(_0x19fe67,_0x544274){_0x19fe67=_0x19fe67-0x162;var _0x14ef27=_0x230f6e[_0x19fe67];return _0x14ef27;},a16_0x19fe(_0x2edfa7,_0x4f35c6);}var config=require('../CADViewer_config.json'),cvjs_debug=config[a16_0x46296d(0x168)];const httprequest=require(a16_0x46296d(0x176));var express=require(a16_0x46296d(0x17a)),router=express[a16_0x46296d(0x1a8)]();function a16_0x230f(){var _0x4fa4f9=['languagefile','substring','ServerFrontEndUrl','dwg','Router','/loadfile','ServerUrl','png','menufile','Access-Control-Allow-Origin','jpeg','3363512AHpRZl','fileLocation','text/plain','body','image/svg+xml','cvjs_debug','Content-Type','1lhwHaW','random','ERROR\x20-\x20httprequest/createWriteStream\x20does\x20this\x20location\x20exist?:\x20','Error\x20loadfile:','json','3054965kCNbfH','10214505qvYcUR','attachment;filename=\x22','finish','Access-Control-Allow-Credentials','svg','/loadfile\x20-\x20error','request','jpg','image/gif','1984392HnjTrr','express','ServerLocation','floor','send','branch\x202','\x20\x20loadtype=\x20','branch\x205','error\x20-\x20loadfile','GET,\x20POST,\x20OPTIONS,\x20PUT,\x20PATCH,\x20DELETE','7384540fztWuA','2515364RPdcae','application/json','log','branch\x201','setHeader','X-Requested-With,content-type','image/png','replaceAll','https:','finshed\x20loading\x20','\x20,\x20writing\x20to:\x20','file','query','length','ServerFrontEndUrlAsAllowedOriginOnly','newcontenLocation\x20','34559050wYmguI','replace','indexOf','lastIndexOf','image/jpeg','application/dwg','createWriteStream','Content-Disposition','gif','exports','branch\x204','readFileSync','6EmpfTR','loadtype','http:','9SDdHjV'];a16_0x230f=function(){return _0x4fa4f9;};return a16_0x230f();}function loadFile(_0x431094,_0x2b1bb6){var _0x542471=a16_0x46296d;try{config[_0x542471(0x192)]==!![]?_0x2b1bb6['setHeader'](_0x542471(0x1ad),config[_0x542471(0x1a6)]):_0x2b1bb6[_0x542471(0x188)](_0x542471(0x1ad),'*');_0x2b1bb6['setHeader']('Access-Control-Allow-Methods',_0x542471(0x182)),_0x2b1bb6['setHeader']('Access-Control-Allow-Headers',_0x542471(0x189)),_0x2b1bb6[_0x542471(0x188)](_0x542471(0x173),!![]);var _0x4fa3e7=_0x431094[_0x542471(0x166)][_0x542471(0x18f)];_0x4fa3e7==undefined&&(_0x4fa3e7=_0x431094[_0x542471(0x190)][_0x542471(0x18f)]);var _0x52de8b=_0x431094[_0x542471(0x166)][_0x542471(0x1a1)];_0x52de8b==undefined&&(_0x52de8b=_0x431094['query']['loadtype']);_0x4fa3e7=decodeURI(_0x4fa3e7),_0x4fa3e7=_0x4fa3e7[_0x542471(0x195)](/%3A/g,':'),_0x4fa3e7=_0x4fa3e7[_0x542471(0x195)](/%2F/g,'/'),_0x4fa3e7=_0x4fa3e7[_0x542471(0x195)](/%20/g,'\x20'),_0x4fa3e7=_0x4fa3e7[_0x542471(0x18b)]('+','\x20');if(config['cvjs_debug'])console[_0x542471(0x186)]('1:\x20/loadfile:\x20'+_0x4fa3e7+_0x542471(0x17f)+_0x52de8b);if(config[_0x542471(0x1a6)]!=''&&_0x4fa3e7[_0x542471(0x196)](config[_0x542471(0x1a6)])==0x0&&_0x4fa3e7[_0x542471(0x196)](config[_0x542471(0x1aa)])!=0x0){if(config[_0x542471(0x168)])console[_0x542471(0x186)](_0x542471(0x187));_0x4fa3e7=config[_0x542471(0x17b)]+_0x4fa3e7[_0x542471(0x1a5)](config[_0x542471(0x1a6)][_0x542471(0x191)]);}else{if(_0x4fa3e7['indexOf'](config['ServerUrl'])==0x0){if(config[_0x542471(0x168)])console[_0x542471(0x186)](_0x542471(0x17e));_0x4fa3e7=config[_0x542471(0x17b)]+_0x4fa3e7['substring'](config['ServerUrl'][_0x542471(0x191)]);}else{if(_0x52de8b!=undefined&&_0x52de8b[_0x542471(0x196)](_0x542471(0x1ac))==0x0||_0x52de8b!=undefined&&_0x52de8b[_0x542471(0x196)](_0x542471(0x1a4))==0x0||_0x52de8b!=undefined&&_0x52de8b['indexOf']('merge')==0x0||_0x52de8b!=undefined&&_0x52de8b[_0x542471(0x196)]('redline')==0x0){if(_0x4fa3e7['indexOf'](_0x542471(0x1a2))==0x0||_0x4fa3e7[_0x542471(0x196)](_0x542471(0x18c))==0x0){if(config['cvjs_debug'])console[_0x542471(0x186)]('branch\x203');}else{if(_0x4fa3e7[_0x542471(0x196)](config[_0x542471(0x17b)])==0x0){if(config[_0x542471(0x168)])console[_0x542471(0x186)](_0x542471(0x19e));}else{if(config[_0x542471(0x168)])console['log'](_0x542471(0x180));_0x4fa3e7=config[_0x542471(0x17b)]+_0x4fa3e7;}}}}}var _0x18a7ff=require('fs');if(_0x4fa3e7[_0x542471(0x196)]('http')==0x0){var _0x1d4a0d=Math['floor'](Math[_0x542471(0x16b)]()*Math[_0x542471(0x17c)](0xf4240)),_0x1b82d7='F'+_0x1d4a0d,_0x3613f7=_0x4fa3e7[_0x542471(0x1a5)](_0x4fa3e7[_0x542471(0x197)]('.')+0x1),_0x2bf161=config[_0x542471(0x164)]+_0x1b82d7+'.'+_0x3613f7;if(cvjs_debug)console[_0x542471(0x186)](_0x542471(0x193)+_0x2bf161);var _0x18a7ff=require('fs');httprequest(_0x4fa3e7)['pipe'](_0x18a7ff[_0x542471(0x19a)](_0x2bf161))['on']('error',()=>{var _0x41ed2e=_0x542471;console[_0x41ed2e(0x186)](_0x41ed2e(0x16c)+_0x4fa3e7),_0x2b1bb6[_0x41ed2e(0x17d)](_0x41ed2e(0x175));})['on'](_0x542471(0x172),()=>{var _0x1cd411=_0x542471;if(cvjs_debug)console[_0x1cd411(0x186)](_0x1cd411(0x18d)+_0x4fa3e7+_0x1cd411(0x18e)+_0x2bf161);var _0x5e5b47=_0x18a7ff['readFileSync'](_0x2bf161);if(_0x3613f7[_0x1cd411(0x196)]('png')==0x0)_0x2b1bb6['setHeader'](_0x1cd411(0x169),_0x1cd411(0x18a));else{if(_0x3613f7[_0x1cd411(0x196)]('jpg')==0x0)_0x2b1bb6['setHeader'](_0x1cd411(0x169),_0x1cd411(0x198));else{if(_0x3613f7[_0x1cd411(0x196)](_0x1cd411(0x162))==0x0)_0x2b1bb6[_0x1cd411(0x188)](_0x1cd411(0x169),'image/jpeg');else{if(_0x3613f7[_0x1cd411(0x196)](_0x1cd411(0x19c))==0x0)_0x2b1bb6[_0x1cd411(0x188)](_0x1cd411(0x169),'image/gif');else{if(_0x3613f7['indexOf'](_0x1cd411(0x16e))==0x0)_0x2b1bb6[_0x1cd411(0x188)](_0x1cd411(0x169),_0x1cd411(0x185));else{if(_0x3613f7[_0x1cd411(0x196)](_0x1cd411(0x174))==0x0)_0x2b1bb6[_0x1cd411(0x188)](_0x1cd411(0x169),_0x1cd411(0x167));else{if(_0x3613f7[_0x1cd411(0x196)](_0x1cd411(0x1a7))==0x0){_0x2b1bb6[_0x1cd411(0x188)](_0x1cd411(0x169),_0x1cd411(0x199));var _0x4383d1=_0x4fa3e7[_0x1cd411(0x1a5)](_0x4fa3e7[_0x1cd411(0x197)]('/')+0x1);_0x2b1bb6[_0x1cd411(0x188)]('Content-Disposition',_0x1cd411(0x171)+_0x4383d1+'\x22');}else _0x2b1bb6[_0x1cd411(0x188)]('Content-Type','text/plain');}}}}}}if(cvjs_debug)console[_0x1cd411(0x186)]('4:'+_0x3613f7);if(cvjs_debug)console['log']('\x20reading\x20and\x20sending\x20data\x20png:'+(_0x3613f7['indexOf']('png')==0x0));_0x2b1bb6[_0x1cd411(0x17d)](_0x5e5b47);});}else{var _0x2baa1a=_0x18a7ff[_0x542471(0x19f)](_0x4fa3e7),_0x3613f7=_0x4fa3e7[_0x542471(0x1a5)](_0x4fa3e7[_0x542471(0x197)]('.')+0x1);if(_0x3613f7['indexOf'](_0x542471(0x1ab))==0x0)_0x2b1bb6[_0x542471(0x188)](_0x542471(0x169),'image/png');else{if(_0x3613f7[_0x542471(0x196)](_0x542471(0x177))==0x0)_0x2b1bb6['setHeader'](_0x542471(0x169),_0x542471(0x198));else{if(_0x3613f7['indexOf'](_0x542471(0x162))==0x0)_0x2b1bb6[_0x542471(0x188)](_0x542471(0x169),'image/jpeg');else{if(_0x3613f7[_0x542471(0x196)](_0x542471(0x19c))==0x0)_0x2b1bb6[_0x542471(0x188)](_0x542471(0x169),_0x542471(0x178));else{if(_0x3613f7['indexOf']('json')==0x0)_0x2b1bb6[_0x542471(0x188)](_0x542471(0x169),_0x542471(0x185));else{if(_0x3613f7[_0x542471(0x196)](_0x542471(0x174))==0x0)_0x2b1bb6[_0x542471(0x188)]('Content-Type',_0x542471(0x167));else{if(_0x3613f7[_0x542471(0x196)](_0x542471(0x1a7))==0x0){_0x2b1bb6[_0x542471(0x188)]('Content-Type',_0x542471(0x199));var _0x429585=_0x4fa3e7[_0x542471(0x1a5)](_0x4fa3e7[_0x542471(0x197)]('/')+0x1);_0x2b1bb6[_0x542471(0x188)](_0x542471(0x19b),_0x542471(0x171)+_0x429585+'\x22');}else _0x2b1bb6[_0x542471(0x188)]('Content-Type',_0x542471(0x165));}}}}}}_0x2b1bb6[_0x542471(0x17d)](_0x2baa1a);}}catch(_0xdc5242){_0x2b1bb6[_0x542471(0x17d)](_0x542471(0x181));if(config[_0x542471(0x168)])console[_0x542471(0x186)](_0x542471(0x16d)+_0xdc5242);}}router['get'](a16_0x46296d(0x1a9),function(_0x3eb6aa,_0x295b86){loadFile(_0x3eb6aa,_0x295b86);}),router['post']('/loadfile',(_0x469bec,_0x55e57c)=>{loadFile(_0x469bec,_0x55e57c);}),module[a16_0x46296d(0x19d)]=router;
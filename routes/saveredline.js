var a25_0x363f75=a25_0x2997;function a25_0x9268(){var _0x4bddfa=['ServerFrontEndUrl','file\x20written','from','redline','Access-Control-Allow-Origin\x20:\x20*','8ZyUYOe','1483666UrrkYi','indexOf','3005680SvtIDm','write','dirname','substring','1:\x20saveredline\x20\x20','ServerUrl','cvjs_debug','4385094UEgPUu','replaceAll','ServerFrontEndUrlAsAllowedOriginOnly','2413558nZdAVo','send','error\x20saveredlines:\x20','post','Succes','path','3:\x20saveredline\x20\x20','setHeader','Router','express','Access-Control-Allow-Origin','join','open','3VOhhFB','ServerLocation','9tfvpXf','\x20config.ServerUrl:','log','486210JFbcJZ','error\x20-\x20saveredline','existsSync','body','\x20\x20\x20\x20config.ServerFrontEndUrl:','file_content','13883990MBGcDv','/saveredline','close','replace','file','7442312SpmMGf','filename:','length'];a25_0x9268=function(){return _0x4bddfa;};return a25_0x9268();}(function(_0x5ac8d6,_0x2a20f6){var _0x2d64a5=a25_0x2997,_0x283d06=_0x5ac8d6();while(!![]){try{var _0x10fcff=-parseInt(_0x2d64a5(0x109))/0x1+-parseInt(_0x2d64a5(0xeb))/0x2*(-parseInt(_0x2d64a5(0x104))/0x3)+-parseInt(_0x2d64a5(0xea))/0x4*(-parseInt(_0x2d64a5(0xed))/0x5)+-parseInt(_0x2d64a5(0xf4))/0x6+parseInt(_0x2d64a5(0xf7))/0x7+parseInt(_0x2d64a5(0xe2))/0x8+-parseInt(_0x2d64a5(0x106))/0x9*(parseInt(_0x2d64a5(0x10f))/0xa);if(_0x10fcff===_0x2a20f6)break;else _0x283d06['push'](_0x283d06['shift']());}catch(_0x3a30d5){_0x283d06['push'](_0x283d06['shift']());}}}(a25_0x9268,0x95d62));var config=require('../CADViewer_config.json'),cvjs_debug=config[a25_0x363f75(0xf3)],express=require(a25_0x363f75(0x100)),router=express[a25_0x363f75(0xff)]();const fs=require('fs'),path=require(a25_0x363f75(0xfc));function createDirRecursively(_0x194aa0){var _0x2d805a=a25_0x363f75;!fs[_0x2d805a(0x10b)](_0x194aa0)&&(createDirRecursively(path[_0x2d805a(0x102)](_0x194aa0,'..')),fs['mkdirSync'](_0x194aa0));}function a25_0x2997(_0x2b6a1e,_0x1dff63){var _0x926885=a25_0x9268();return a25_0x2997=function(_0x299779,_0x9ccd53){_0x299779=_0x299779-0xdf;var _0xfa65d9=_0x926885[_0x299779];return _0xfa65d9;},a25_0x2997(_0x2b6a1e,_0x1dff63);}router[a25_0x363f75(0xfa)](a25_0x363f75(0x110),(_0xe4f894,_0x491e0c)=>{var _0x1da9e1=a25_0x363f75;if(config[_0x1da9e1(0xf6)]==!![]){_0x491e0c[_0x1da9e1(0xfe)](_0x1da9e1(0x101),config[_0x1da9e1(0xe5)]);if(cvjs_debug)console[_0x1da9e1(0x108)]('Access-Control-Allow-Origin\x20:'+config['ServerFrontEndUrl']);}else{_0x491e0c[_0x1da9e1(0xfe)](_0x1da9e1(0x101),'*');if(cvjs_debug)console['log'](_0x1da9e1(0xe9));}try{var _0x3f2659=_0xe4f894[_0x1da9e1(0x10c)][_0x1da9e1(0xe1)],_0x33eb37=_0xe4f894[_0x1da9e1(0x10c)][_0x1da9e1(0x10e)],_0x177466=Buffer[_0x1da9e1(0xe7)](_0x33eb37),_0xa216f9=_0xe4f894['body']['listtype'];if(cvjs_debug)console['log']('save\x20redline\x20listtype:'+_0xa216f9);if(_0xa216f9=='serverfolder'||_0xa216f9==_0x1da9e1(0xe8)){if(_0x3f2659[_0x1da9e1(0xec)](config[_0x1da9e1(0x105)])==0x0){}else _0x3f2659=config['ServerLocation']+_0x3f2659;}if(cvjs_debug)console[_0x1da9e1(0x108)](_0x1da9e1(0xe3)+_0x3f2659);var _0x40480b=require('fs');if(config[_0x1da9e1(0xf3)])console['log'](_0x1da9e1(0xf1)+_0x3f2659);_0x3f2659=decodeURI(_0x3f2659),_0x3f2659=_0x3f2659[_0x1da9e1(0xe0)](/%3A/g,':'),_0x3f2659=_0x3f2659[_0x1da9e1(0xe0)](/%2F/g,'/'),_0x3f2659=_0x3f2659[_0x1da9e1(0xe0)](/%20/g,'\x20'),_0x3f2659=_0x3f2659[_0x1da9e1(0xf5)]('+','\x20');if(config[_0x1da9e1(0xf3)])console['log']('2:\x20saveredline\x20\x20'+_0x3f2659+_0x1da9e1(0x10d)+config[_0x1da9e1(0xe5)]+_0x1da9e1(0x107)+config[_0x1da9e1(0xf2)]);if(config['ServerFrontEndUrl']!=''&&_0x3f2659[_0x1da9e1(0xec)](config[_0x1da9e1(0xe5)])==0x0){if(config[_0x1da9e1(0xf3)])console[_0x1da9e1(0x108)]('4:');_0x3f2659=config['ServerLocation']+_0x3f2659['substring'](config[_0x1da9e1(0xe5)][_0x1da9e1(0xe4)]);}else{if(config[_0x1da9e1(0xf2)]!=''&&_0x3f2659[_0x1da9e1(0xec)](config[_0x1da9e1(0xf2)])==0x0){if(config[_0x1da9e1(0xf3)])console[_0x1da9e1(0x108)]('5:');_0x3f2659=config['ServerLocation']+_0x3f2659[_0x1da9e1(0xf0)](config['ServerUrl'][_0x1da9e1(0xe4)]);}}_0x3f2659=_0x3f2659['replace'](/\\/g,'/');if(config[_0x1da9e1(0xf3)])console[_0x1da9e1(0x108)](_0x1da9e1(0xfd)+_0x3f2659);var _0xcd14a4=path[_0x1da9e1(0xef)](_0x3f2659);createDirRecursively(_0xcd14a4),_0x40480b[_0x1da9e1(0x103)](_0x3f2659,'w',function(_0x6ee232,_0xd2b7fd){var _0x55accb=_0x1da9e1;_0x40480b[_0x55accb(0xee)](_0xd2b7fd,_0x177466,0x0,_0x177466[_0x55accb(0xe4)],null,function(_0x407911){var _0xe4e161=_0x55accb;if(_0x407911){if(config['cvjs_debug'])console[_0xe4e161(0x108)](_0xe4e161(0xf9)+_0x407911);_0x491e0c[_0xe4e161(0xf8)](_0xe4e161(0xf9)+_0x407911);}else _0x40480b[_0xe4e161(0xdf)](_0xd2b7fd,function(){var _0x1c75ac=_0xe4e161;if(config['cvjs_debug'])console[_0x1c75ac(0x108)](_0x1c75ac(0xe6));_0x491e0c[_0x1c75ac(0xf8)](_0x1c75ac(0xfb));});});});}catch(_0x2cb95d){_0x491e0c[_0x1da9e1(0xf8)](_0x1da9e1(0x10a));if(config[_0x1da9e1(0xf3)])console[_0x1da9e1(0x108)](_0x2cb95d);}}),module['exports']=router;
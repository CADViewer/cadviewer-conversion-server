function a25_0x2d59(){var _0x542f54=['1418002eYKIEt','exports','serverfolder','length','3059608YmWMgv','file\x20written','from','replace','existsSync','open','6850467LYVZrT','substring','indexOf','957262UXMAyi','Access-Control-Allow-Origin','Access-Control-Allow-Origin\x20:\x20*','Succes','ServerUrl','3:\x20saveredline\x20\x20','save\x20redline\x20listtype:','/saveredline','post','cvjs_debug','file','setHeader','log','replaceAll','ServerLocation','\x20\x20\x20\x20config.ServerFrontEndUrl:','dirname','error\x20saveredlines:\x20','join','12SPWHAI','1:\x20saveredline\x20\x20','filename:','Access-Control-Allow-Origin\x20:','body','mkdirSync','listtype','4uMTnyY','1755957pgrSdu','\x20config.ServerUrl:','4432135qaKMeY','3MqMjEQ','710iYtFnZ','ServerFrontEndUrl','575707UFqrpm','send'];a25_0x2d59=function(){return _0x542f54;};return a25_0x2d59();}var a25_0x539306=a25_0x1e81;(function(_0x4ff8c7,_0x266a4e){var _0x3f9d78=a25_0x1e81,_0xa143a0=_0x4ff8c7();while(!![]){try{var _0x1e03f7=parseInt(_0x3f9d78(0x1f8))/0x1+-parseInt(_0x3f9d78(0x1eb))/0x2*(-parseInt(_0x3f9d78(0x1e6))/0x3)+-parseInt(_0x3f9d78(0x1e2))/0x4*(-parseInt(_0x3f9d78(0x1e5))/0x5)+parseInt(_0x3f9d78(0x1db))/0x6*(parseInt(_0x3f9d78(0x1e3))/0x7)+parseInt(_0x3f9d78(0x1ef))/0x8+parseInt(_0x3f9d78(0x1f5))/0x9+parseInt(_0x3f9d78(0x1e7))/0xa*(-parseInt(_0x3f9d78(0x1e9))/0xb);if(_0x1e03f7===_0x266a4e)break;else _0xa143a0['push'](_0xa143a0['shift']());}catch(_0x2df1d4){_0xa143a0['push'](_0xa143a0['shift']());}}}(a25_0x2d59,0x75b1f));var config=require('../CADViewer_config.json'),cvjs_debug=config[a25_0x539306(0x1d1)],express=require('express'),router=express['Router']();const fs=require('fs'),path=require('path');function createDirRecursively(_0x21cc07){var _0x1f3cb2=a25_0x539306;!fs[_0x1f3cb2(0x1f3)](_0x21cc07)&&(createDirRecursively(path[_0x1f3cb2(0x1da)](_0x21cc07,'..')),fs[_0x1f3cb2(0x1e0)](_0x21cc07));}function a25_0x1e81(_0x2150ee,_0x2bb837){var _0x2d594b=a25_0x2d59();return a25_0x1e81=function(_0x1e817b,_0x28d568){_0x1e817b=_0x1e817b-0x1cd;var _0x32ff6b=_0x2d594b[_0x1e817b];return _0x32ff6b;},a25_0x1e81(_0x2150ee,_0x2bb837);}router[a25_0x539306(0x1d0)](a25_0x539306(0x1cf),(_0xafc75a,_0x18b7b7)=>{var _0xaa8ae=a25_0x539306;if(config['ServerFrontEndUrlAsAllowedOriginOnly']==!![]){_0x18b7b7[_0xaa8ae(0x1d3)](_0xaa8ae(0x1f9),config[_0xaa8ae(0x1e8)]);if(cvjs_debug)console['log'](_0xaa8ae(0x1de)+config[_0xaa8ae(0x1e8)]);}else{_0x18b7b7[_0xaa8ae(0x1d3)]('Access-Control-Allow-Origin','*');if(cvjs_debug)console['log'](_0xaa8ae(0x1fa));}try{var _0x17da89=_0xafc75a['body'][_0xaa8ae(0x1d2)],_0x376cc4=_0xafc75a[_0xaa8ae(0x1df)]['file_content'],_0x37260f=Buffer[_0xaa8ae(0x1f1)](_0x376cc4),_0x24d9b2=_0xafc75a['body'][_0xaa8ae(0x1e1)];if(cvjs_debug)console[_0xaa8ae(0x1d4)](_0xaa8ae(0x1ce)+_0x24d9b2);if(_0x24d9b2==_0xaa8ae(0x1ed)||_0x24d9b2=='redline'){if(_0x17da89[_0xaa8ae(0x1f7)](config[_0xaa8ae(0x1d6)])==0x0){}else _0x17da89=config['ServerLocation']+_0x17da89;}if(cvjs_debug)console[_0xaa8ae(0x1d4)](_0xaa8ae(0x1dd)+_0x17da89);var _0x768ad6=require('fs');if(config['cvjs_debug'])console[_0xaa8ae(0x1d4)](_0xaa8ae(0x1dc)+_0x17da89);_0x17da89=decodeURI(_0x17da89),_0x17da89=_0x17da89[_0xaa8ae(0x1f2)](/%3A/g,':'),_0x17da89=_0x17da89[_0xaa8ae(0x1f2)](/%2F/g,'/'),_0x17da89=_0x17da89[_0xaa8ae(0x1f2)](/%20/g,'\x20'),_0x17da89=_0x17da89[_0xaa8ae(0x1d5)]('+','\x20');if(config[_0xaa8ae(0x1d1)])console[_0xaa8ae(0x1d4)]('2:\x20saveredline\x20\x20'+_0x17da89+_0xaa8ae(0x1d7)+config['ServerFrontEndUrl']+_0xaa8ae(0x1e4)+config[_0xaa8ae(0x1fc)]);if(config['ServerFrontEndUrl']!=''&&_0x17da89[_0xaa8ae(0x1f7)](config['ServerFrontEndUrl'])==0x0){if(config[_0xaa8ae(0x1d1)])console[_0xaa8ae(0x1d4)]('4:');_0x17da89=config[_0xaa8ae(0x1d6)]+_0x17da89[_0xaa8ae(0x1f6)](config['ServerFrontEndUrl'][_0xaa8ae(0x1ee)]);}else{if(config[_0xaa8ae(0x1fc)]!=''&&_0x17da89[_0xaa8ae(0x1f7)](config[_0xaa8ae(0x1fc)])==0x0){if(config[_0xaa8ae(0x1d1)])console['log']('5:');_0x17da89=config[_0xaa8ae(0x1d6)]+_0x17da89[_0xaa8ae(0x1f6)](config[_0xaa8ae(0x1fc)][_0xaa8ae(0x1ee)]);}}_0x17da89=_0x17da89[_0xaa8ae(0x1f2)](/\\/g,'/');if(config[_0xaa8ae(0x1d1)])console[_0xaa8ae(0x1d4)](_0xaa8ae(0x1cd)+_0x17da89);var _0x1b0f33=path[_0xaa8ae(0x1d8)](_0x17da89);createDirRecursively(_0x1b0f33),_0x768ad6[_0xaa8ae(0x1f4)](_0x17da89,'w',function(_0x25fe22,_0x45c1af){var _0x45f114=_0xaa8ae;_0x768ad6['write'](_0x45c1af,_0x37260f,0x0,_0x37260f[_0x45f114(0x1ee)],null,function(_0x4507c2){var _0x3117ee=_0x45f114;if(_0x4507c2){if(config[_0x3117ee(0x1d1)])console[_0x3117ee(0x1d4)](_0x3117ee(0x1d9)+_0x4507c2);_0x18b7b7[_0x3117ee(0x1ea)](_0x3117ee(0x1d9)+_0x4507c2);}else _0x768ad6['close'](_0x45c1af,function(){var _0x5185f3=_0x3117ee;if(config[_0x5185f3(0x1d1)])console['log'](_0x5185f3(0x1f0));_0x18b7b7[_0x5185f3(0x1ea)](_0x5185f3(0x1fb));});});});}catch(_0x44f07d){_0x18b7b7[_0xaa8ae(0x1ea)]('error\x20-\x20saveredline');if(config[_0xaa8ae(0x1d1)])console['log'](_0x44f07d);}}),module[a25_0x539306(0x1ec)]=router;
var a25_0x294239=a25_0x1e31;function a25_0x5f01(){var _0x8f184a=['Access-Control-Allow-Origin','listtype','send','18068IlQfcq','open','39xLXXOo','ServerLocation','setHeader','post','mkdirSync','express','log','indexOf','filename:','../CADViewer_config.json','4477672oaPLXg','replace','join','805998CWHXEH','body','ServerUrl','2305UivTtq','file\x20written','save\x20redline\x20listtype:','839260lHECdc','cvjs_debug','165YiCWMH','close','\x20config.ServerUrl:','3732jvAeTy','1632177BeaYjA','exports','file_content','Access-Control-Allow-Origin\x20:','221926IQZiKj','/saveredline','path','ServerFrontEndUrlAsAllowedOriginOnly','2:\x20saveredline\x20\x20','length','serverfolder','substring','Succes','replaceAll','write','7jWtMBM','dirname','ServerFrontEndUrl','error\x20saveredlines:\x20'];a25_0x5f01=function(){return _0x8f184a;};return a25_0x5f01();}(function(_0x21b6df,_0x5edaa8){var _0x25aa6b=a25_0x1e31,_0x3a5b05=_0x21b6df();while(!![]){try{var _0x5c2cd3=parseInt(_0x25aa6b(0x14a))/0x1+-parseInt(_0x25aa6b(0x15c))/0x2*(-parseInt(_0x25aa6b(0x15e))/0x3)+parseInt(_0x25aa6b(0x145))/0x4*(-parseInt(_0x25aa6b(0x16e))/0x5)+parseInt(_0x25aa6b(0x16b))/0x6*(-parseInt(_0x25aa6b(0x155))/0x7)+-parseInt(_0x25aa6b(0x168))/0x8+-parseInt(_0x25aa6b(0x146))/0x9+parseInt(_0x25aa6b(0x140))/0xa*(parseInt(_0x25aa6b(0x142))/0xb);if(_0x5c2cd3===_0x5edaa8)break;else _0x3a5b05['push'](_0x3a5b05['shift']());}catch(_0x169ff8){_0x3a5b05['push'](_0x3a5b05['shift']());}}}(a25_0x5f01,0x4778e));var config=require(a25_0x294239(0x167)),cvjs_debug=config[a25_0x294239(0x141)],express=require(a25_0x294239(0x163)),router=express['Router']();function a25_0x1e31(_0x2998ea,_0x52b1c5){var _0x5f012e=a25_0x5f01();return a25_0x1e31=function(_0x1e3154,_0x15a8a8){_0x1e3154=_0x1e3154-0x140;var _0x26f013=_0x5f012e[_0x1e3154];return _0x26f013;},a25_0x1e31(_0x2998ea,_0x52b1c5);}const fs=require('fs'),path=require(a25_0x294239(0x14c));function createDirRecursively(_0x2aaec1){var _0x946eec=a25_0x294239;!fs['existsSync'](_0x2aaec1)&&(createDirRecursively(path[_0x946eec(0x16a)](_0x2aaec1,'..')),fs[_0x946eec(0x162)](_0x2aaec1));}router[a25_0x294239(0x161)](a25_0x294239(0x14b),(_0xfc2524,_0x56015a)=>{var _0x5874d9=a25_0x294239;if(config[_0x5874d9(0x14d)]==!![]){_0x56015a[_0x5874d9(0x160)]('Access-Control-Allow-Origin',config[_0x5874d9(0x157)]);if(cvjs_debug)console['log'](_0x5874d9(0x149)+config[_0x5874d9(0x157)]);}else{_0x56015a['setHeader'](_0x5874d9(0x159),'*');if(cvjs_debug)console['log']('Access-Control-Allow-Origin\x20:\x20*');}try{var _0x10d184=_0xfc2524['body']['file'],_0x49eb28=_0xfc2524[_0x5874d9(0x16c)][_0x5874d9(0x148)],_0x506f7d=Buffer['from'](_0x49eb28),_0x322390=_0xfc2524[_0x5874d9(0x16c)][_0x5874d9(0x15a)];if(cvjs_debug)console[_0x5874d9(0x164)](_0x5874d9(0x170)+_0x322390);if(_0x322390==_0x5874d9(0x150)||_0x322390=='redline'){if(_0x10d184[_0x5874d9(0x165)](config['ServerLocation'])==0x0){}else _0x10d184=config[_0x5874d9(0x15f)]+_0x10d184;}if(cvjs_debug)console[_0x5874d9(0x164)](_0x5874d9(0x166)+_0x10d184);var _0x5e85c3=require('fs');if(config[_0x5874d9(0x141)])console[_0x5874d9(0x164)]('1:\x20saveredline\x20\x20'+_0x10d184);_0x10d184=decodeURI(_0x10d184),_0x10d184=_0x10d184[_0x5874d9(0x169)](/%3A/g,':'),_0x10d184=_0x10d184[_0x5874d9(0x169)](/%2F/g,'/'),_0x10d184=_0x10d184[_0x5874d9(0x169)](/%20/g,'\x20'),_0x10d184=_0x10d184[_0x5874d9(0x153)]('+','\x20');if(config[_0x5874d9(0x141)])console[_0x5874d9(0x164)](_0x5874d9(0x14e)+_0x10d184+'\x20\x20\x20\x20config.ServerFrontEndUrl:'+config['ServerFrontEndUrl']+_0x5874d9(0x144)+config[_0x5874d9(0x16d)]);if(config[_0x5874d9(0x157)]!=''&&_0x10d184['indexOf'](config[_0x5874d9(0x157)])==0x0){if(config[_0x5874d9(0x141)])console[_0x5874d9(0x164)]('4:');_0x10d184=config['ServerLocation']+_0x10d184[_0x5874d9(0x151)](config[_0x5874d9(0x157)]['length']);}else{if(config[_0x5874d9(0x16d)]!=''&&_0x10d184[_0x5874d9(0x165)](config[_0x5874d9(0x16d)])==0x0){if(config[_0x5874d9(0x141)])console[_0x5874d9(0x164)]('5:');_0x10d184=config[_0x5874d9(0x15f)]+_0x10d184['substring'](config[_0x5874d9(0x16d)][_0x5874d9(0x14f)]);}}_0x10d184=_0x10d184[_0x5874d9(0x169)](/\\/g,'/');if(config[_0x5874d9(0x141)])console['log']('3:\x20saveredline\x20\x20'+_0x10d184);var _0x195e4c=path[_0x5874d9(0x156)](_0x10d184);createDirRecursively(_0x195e4c),_0x5e85c3[_0x5874d9(0x15d)](_0x10d184,'w',function(_0x35fe0a,_0x73fc31){var _0x2ab911=_0x5874d9;_0x5e85c3[_0x2ab911(0x154)](_0x73fc31,_0x506f7d,0x0,_0x506f7d[_0x2ab911(0x14f)],null,function(_0x3fe378){var _0x22debe=_0x2ab911;if(_0x3fe378){if(config[_0x22debe(0x141)])console[_0x22debe(0x164)]('error\x20saveredlines:\x20'+_0x3fe378);_0x56015a[_0x22debe(0x15b)](_0x22debe(0x158)+_0x3fe378);}else _0x5e85c3[_0x22debe(0x143)](_0x73fc31,function(){var _0x1268a1=_0x22debe;if(config[_0x1268a1(0x141)])console[_0x1268a1(0x164)](_0x1268a1(0x16f));_0x56015a['send'](_0x1268a1(0x152));});});});}catch(_0x434f71){_0x56015a['send']('error\x20-\x20saveredline');if(config['cvjs_debug'])console['log'](_0x434f71);}}),module[a25_0x294239(0x147)]=router;
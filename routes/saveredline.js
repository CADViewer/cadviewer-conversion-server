var a25_0x6a8ea6=a25_0x3f16;function a25_0x3f16(_0x507d8f,_0xdd357){var _0x280e28=a25_0x280e();return a25_0x3f16=function(_0x3f16cd,_0x465d88){_0x3f16cd=_0x3f16cd-0x1e3;var _0x311566=_0x280e28[_0x3f16cd];return _0x311566;},a25_0x3f16(_0x507d8f,_0xdd357);}(function(_0x350ad6,_0x102d25){var _0x58a39f=a25_0x3f16,_0x272f2a=_0x350ad6();while(!![]){try{var _0x116fd7=parseInt(_0x58a39f(0x1fd))/0x1+parseInt(_0x58a39f(0x1ff))/0x2+-parseInt(_0x58a39f(0x1fb))/0x3+parseInt(_0x58a39f(0x1ea))/0x4+parseInt(_0x58a39f(0x1f5))/0x5+-parseInt(_0x58a39f(0x1ed))/0x6*(-parseInt(_0x58a39f(0x200))/0x7)+-parseInt(_0x58a39f(0x1f6))/0x8;if(_0x116fd7===_0x102d25)break;else _0x272f2a['push'](_0x272f2a['shift']());}catch(_0x415aaf){_0x272f2a['push'](_0x272f2a['shift']());}}}(a25_0x280e,0xd2a64));var config=require('../CADViewer_config.json'),cvjs_debug=config['cvjs_debug'],express=require(a25_0x6a8ea6(0x209)),router=express['Router']();const fs=require('fs'),path=require(a25_0x6a8ea6(0x1e6));function a25_0x280e(){var _0x3f1eb9=['ServerUrl','join','save\x20redline\x20listtype:','file','setHeader','error\x20-\x20saveredline','Access-Control-Allow-Origin','path','ServerFrontEndUrl','from','\x20\x20\x20\x20config.ServerFrontEndUrl:','628844rBlCWo','close','post','12DKMPCQ','send','2:\x20saveredline\x20\x20','existsSync','serverfolder','body','error\x20saveredlines:\x20','ServerLocation','7980150fIpqrN','16153136XiHrYO','Access-Control-Allow-Origin\x20:','indexOf','log','file_content','4804401oBTaov','write','973087rknrmd','Succes','2047434NCFSfg','2566844jhCeSg','substring','replace','exports','file\x20written','open','length','cvjs_debug','3:\x20saveredline\x20\x20','express'];a25_0x280e=function(){return _0x3f1eb9;};return a25_0x280e();}function createDirRecursively(_0x33df24){var _0x2e70c7=a25_0x6a8ea6;!fs[_0x2e70c7(0x1f0)](_0x33df24)&&(createDirRecursively(path[_0x2e70c7(0x20b)](_0x33df24,'..')),fs['mkdirSync'](_0x33df24));}router[a25_0x6a8ea6(0x1ec)]('/saveredline',(_0x487cfa,_0x180eee)=>{var _0x43ee6b=a25_0x6a8ea6;if(config['ServerFrontEndUrlAsAllowedOriginOnly']==!![]){_0x180eee[_0x43ee6b(0x1e3)](_0x43ee6b(0x1e5),config['ServerFrontEndUrl']);if(cvjs_debug)console[_0x43ee6b(0x1f9)](_0x43ee6b(0x1f7)+config[_0x43ee6b(0x1e7)]);}else{_0x180eee[_0x43ee6b(0x1e3)](_0x43ee6b(0x1e5),'*');if(cvjs_debug)console[_0x43ee6b(0x1f9)]('Access-Control-Allow-Origin\x20:\x20*');}try{var _0x187cb6=_0x487cfa[_0x43ee6b(0x1f2)][_0x43ee6b(0x20d)],_0x14e0e5=_0x487cfa['body'][_0x43ee6b(0x1fa)],_0x16aad4=Buffer[_0x43ee6b(0x1e8)](_0x14e0e5),_0x2a2594=_0x487cfa[_0x43ee6b(0x1f2)]['listtype'];if(cvjs_debug)console[_0x43ee6b(0x1f9)](_0x43ee6b(0x20c)+_0x2a2594);if(_0x2a2594==_0x43ee6b(0x1f1)||_0x2a2594=='redline'){if(_0x187cb6[_0x43ee6b(0x1f8)](config[_0x43ee6b(0x1f4)])==0x0){}else _0x187cb6=config[_0x43ee6b(0x1f4)]+_0x187cb6;}if(cvjs_debug)console[_0x43ee6b(0x1f9)]('filename:'+_0x187cb6);var _0x5b641a=require('fs');if(config['cvjs_debug'])console[_0x43ee6b(0x1f9)]('1:\x20saveredline\x20\x20'+_0x187cb6);_0x187cb6=decodeURI(_0x187cb6),_0x187cb6=_0x187cb6[_0x43ee6b(0x202)](/%3A/g,':'),_0x187cb6=_0x187cb6[_0x43ee6b(0x202)](/%2F/g,'/'),_0x187cb6=_0x187cb6[_0x43ee6b(0x202)](/%20/g,'\x20'),_0x187cb6=_0x187cb6['replaceAll']('+','\x20');if(config[_0x43ee6b(0x207)])console[_0x43ee6b(0x1f9)](_0x43ee6b(0x1ef)+_0x187cb6+_0x43ee6b(0x1e9)+config[_0x43ee6b(0x1e7)]+'\x20config.ServerUrl:'+config[_0x43ee6b(0x20a)]);if(config[_0x43ee6b(0x1e7)]!=''&&_0x187cb6[_0x43ee6b(0x1f8)](config[_0x43ee6b(0x1e7)])==0x0){if(config['cvjs_debug'])console[_0x43ee6b(0x1f9)]('4:');_0x187cb6=config['ServerLocation']+_0x187cb6[_0x43ee6b(0x201)](config[_0x43ee6b(0x1e7)][_0x43ee6b(0x206)]);}else{if(config[_0x43ee6b(0x20a)]!=''&&_0x187cb6[_0x43ee6b(0x1f8)](config[_0x43ee6b(0x20a)])==0x0){if(config[_0x43ee6b(0x207)])console[_0x43ee6b(0x1f9)]('5:');_0x187cb6=config[_0x43ee6b(0x1f4)]+_0x187cb6['substring'](config['ServerUrl'][_0x43ee6b(0x206)]);}}_0x187cb6=_0x187cb6['replace'](/\\/g,'/');if(config[_0x43ee6b(0x207)])console[_0x43ee6b(0x1f9)](_0x43ee6b(0x208)+_0x187cb6);var _0x56ed18=path['dirname'](_0x187cb6);createDirRecursively(_0x56ed18),_0x5b641a[_0x43ee6b(0x205)](_0x187cb6,'w',function(_0x1a3caa,_0x1fea2e){var _0x163e21=_0x43ee6b;_0x5b641a[_0x163e21(0x1fc)](_0x1fea2e,_0x16aad4,0x0,_0x16aad4['length'],null,function(_0x111c34){var _0xe8098=_0x163e21;if(_0x111c34){if(config[_0xe8098(0x207)])console[_0xe8098(0x1f9)]('error\x20saveredlines:\x20'+_0x111c34);_0x180eee[_0xe8098(0x1ee)](_0xe8098(0x1f3)+_0x111c34);}else _0x5b641a[_0xe8098(0x1eb)](_0x1fea2e,function(){var _0x50b864=_0xe8098;if(config[_0x50b864(0x207)])console[_0x50b864(0x1f9)](_0x50b864(0x204));_0x180eee[_0x50b864(0x1ee)](_0x50b864(0x1fe));});});});}catch(_0x3f2d85){_0x180eee['send'](_0x43ee6b(0x1e4));if(config['cvjs_debug'])console['log'](_0x3f2d85);}}),module[a25_0x6a8ea6(0x203)]=router;
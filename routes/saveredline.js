var a25_0x4a8b0f=a25_0x1a6e;(function(_0x56c155,_0x450b3a){var _0x59e221=a25_0x1a6e,_0x244ec2=_0x56c155();while(!![]){try{var _0x18bbf3=parseInt(_0x59e221(0xf7))/0x1*(parseInt(_0x59e221(0x10f))/0x2)+parseInt(_0x59e221(0x111))/0x3*(-parseInt(_0x59e221(0xf5))/0x4)+-parseInt(_0x59e221(0x108))/0x5*(parseInt(_0x59e221(0x11c))/0x6)+-parseInt(_0x59e221(0x102))/0x7+parseInt(_0x59e221(0x10a))/0x8+-parseInt(_0x59e221(0x10c))/0x9*(-parseInt(_0x59e221(0x112))/0xa)+parseInt(_0x59e221(0xf8))/0xb*(parseInt(_0x59e221(0xff))/0xc);if(_0x18bbf3===_0x450b3a)break;else _0x244ec2['push'](_0x244ec2['shift']());}catch(_0xe2d3ea){_0x244ec2['push'](_0x244ec2['shift']());}}}(a25_0x1441,0x2489a));function a25_0x1441(){var _0x5723a8=['indexOf','filename:','express','Access-Control-Allow-Origin\x20:\x20*','listtype','132gioFwd','send','length','1069691CCfsgj','post','log','1:\x20saveredline\x20\x20','Router','error\x20-\x20saveredline','17735YdeXOe','ServerUrl','421904oUfkzb','close','9KMvetc','file\x20written','\x20\x20\x20\x20config.ServerFrontEndUrl:','24686CtzqhU','dirname','12741ZnykIa','579100NgauPJ','body','2:\x20saveredline\x20\x20','replace','save\x20redline\x20listtype:','open','substring','serverfolder','ServerLocation','replaceAll','162XkJtgC','../CADViewer_config.json','Access-Control-Allow-Origin\x20:','redline','cvjs_debug','error\x20saveredlines:\x20','mkdirSync','ServerFrontEndUrl','\x20config.ServerUrl:','3:\x20saveredline\x20\x20','Succes','200lkKjHV','setHeader','3PhSyAv','462913iAjNrl','file'];a25_0x1441=function(){return _0x5723a8;};return a25_0x1441();}var config=require(a25_0x4a8b0f(0x11d)),cvjs_debug=config[a25_0x4a8b0f(0x120)],express=require(a25_0x4a8b0f(0xfc)),router=express[a25_0x4a8b0f(0x106)]();function a25_0x1a6e(_0x165abd,_0x429c57){var _0x144183=a25_0x1441();return a25_0x1a6e=function(_0x1a6eb1,_0x328e52){_0x1a6eb1=_0x1a6eb1-0xf5;var _0x2e46f8=_0x144183[_0x1a6eb1];return _0x2e46f8;},a25_0x1a6e(_0x165abd,_0x429c57);}const fs=require('fs'),path=require('path');function createDirRecursively(_0x5b94b4){var _0xb3f95d=a25_0x4a8b0f;!fs['existsSync'](_0x5b94b4)&&(createDirRecursively(path['join'](_0x5b94b4,'..')),fs[_0xb3f95d(0x122)](_0x5b94b4));}router[a25_0x4a8b0f(0x103)]('/saveredline',(_0x250450,_0x401c02)=>{var _0xe2a9ba=a25_0x4a8b0f;if(config['ServerFrontEndUrlAsAllowedOriginOnly']==!![]){_0x401c02[_0xe2a9ba(0xf6)]('Access-Control-Allow-Origin',config['ServerFrontEndUrl']);if(cvjs_debug)console[_0xe2a9ba(0x104)](_0xe2a9ba(0x11e)+config[_0xe2a9ba(0x123)]);}else{_0x401c02['setHeader']('Access-Control-Allow-Origin','*');if(cvjs_debug)console[_0xe2a9ba(0x104)](_0xe2a9ba(0xfd));}try{var _0x1792fe=_0x250450[_0xe2a9ba(0x113)][_0xe2a9ba(0xf9)],_0x457751=_0x250450['body']['file_content'],_0xa37788=Buffer['from'](_0x457751),_0x42ec25=_0x250450['body'][_0xe2a9ba(0xfe)];if(cvjs_debug)console[_0xe2a9ba(0x104)](_0xe2a9ba(0x116)+_0x42ec25);if(_0x42ec25==_0xe2a9ba(0x119)||_0x42ec25==_0xe2a9ba(0x11f)){if(_0x1792fe['indexOf'](config[_0xe2a9ba(0x11a)])==0x0){}else _0x1792fe=config['ServerLocation']+_0x1792fe;}if(cvjs_debug)console[_0xe2a9ba(0x104)](_0xe2a9ba(0xfb)+_0x1792fe);var _0x27e01e=require('fs');if(config[_0xe2a9ba(0x120)])console[_0xe2a9ba(0x104)](_0xe2a9ba(0x105)+_0x1792fe);_0x1792fe=decodeURI(_0x1792fe),_0x1792fe=_0x1792fe[_0xe2a9ba(0x115)](/%3A/g,':'),_0x1792fe=_0x1792fe[_0xe2a9ba(0x115)](/%2F/g,'/'),_0x1792fe=_0x1792fe['replace'](/%20/g,'\x20'),_0x1792fe=_0x1792fe[_0xe2a9ba(0x11b)]('+','\x20');if(config['cvjs_debug'])console[_0xe2a9ba(0x104)](_0xe2a9ba(0x114)+_0x1792fe+_0xe2a9ba(0x10e)+config['ServerFrontEndUrl']+_0xe2a9ba(0x124)+config['ServerUrl']);if(config[_0xe2a9ba(0x123)]!=''&&_0x1792fe[_0xe2a9ba(0xfa)](config[_0xe2a9ba(0x123)])==0x0){if(config[_0xe2a9ba(0x120)])console['log']('4:');_0x1792fe=config[_0xe2a9ba(0x11a)]+_0x1792fe[_0xe2a9ba(0x118)](config[_0xe2a9ba(0x123)][_0xe2a9ba(0x101)]);}else{if(config[_0xe2a9ba(0x109)]!=''&&_0x1792fe[_0xe2a9ba(0xfa)](config[_0xe2a9ba(0x109)])==0x0){if(config[_0xe2a9ba(0x120)])console['log']('5:');_0x1792fe=config[_0xe2a9ba(0x11a)]+_0x1792fe['substring'](config[_0xe2a9ba(0x109)][_0xe2a9ba(0x101)]);}}_0x1792fe=_0x1792fe[_0xe2a9ba(0x115)](/\\/g,'/');if(config[_0xe2a9ba(0x120)])console['log'](_0xe2a9ba(0x125)+_0x1792fe);var _0x5f0ef2=path[_0xe2a9ba(0x110)](_0x1792fe);createDirRecursively(_0x5f0ef2),_0x27e01e[_0xe2a9ba(0x117)](_0x1792fe,'w',function(_0x5c2e80,_0x20e7f9){var _0x569d5c=_0xe2a9ba;_0x27e01e['write'](_0x20e7f9,_0xa37788,0x0,_0xa37788[_0x569d5c(0x101)],null,function(_0x56f39d){var _0x79cbce=_0x569d5c;if(_0x56f39d){if(config[_0x79cbce(0x120)])console[_0x79cbce(0x104)]('error\x20saveredlines:\x20'+_0x56f39d);_0x401c02[_0x79cbce(0x100)](_0x79cbce(0x121)+_0x56f39d);}else _0x27e01e[_0x79cbce(0x10b)](_0x20e7f9,function(){var _0x3498d3=_0x79cbce;if(config[_0x3498d3(0x120)])console[_0x3498d3(0x104)](_0x3498d3(0x10d));_0x401c02['send'](_0x3498d3(0x126));});});});}catch(_0x474a8a){_0x401c02[_0xe2a9ba(0x100)](_0xe2a9ba(0x107));if(config[_0xe2a9ba(0x120)])console['log'](_0x474a8a);}}),module['exports']=router;
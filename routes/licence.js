const a12_0x51e04d=a12_0x52c2;(function(_0x273a16,_0x297766){const _0x3020ee=a12_0x52c2,_0x2e27ef=_0x273a16();while(!![]){try{const _0x21fb40=-parseInt(_0x3020ee(0x1a7))/0x1+-parseInt(_0x3020ee(0x1a2))/0x2*(-parseInt(_0x3020ee(0x1cd))/0x3)+-parseInt(_0x3020ee(0x1ba))/0x4+-parseInt(_0x3020ee(0x1c1))/0x5+-parseInt(_0x3020ee(0x19b))/0x6+parseInt(_0x3020ee(0x199))/0x7+parseInt(_0x3020ee(0x1a5))/0x8;if(_0x21fb40===_0x297766)break;else _0x2e27ef['push'](_0x2e27ef['shift']());}catch(_0x218bd6){_0x2e27ef['push'](_0x2e27ef['shift']());}}}(a12_0x2110,0x8927f));const config=require('../CADViewer_config.json'),multer=require(a12_0x51e04d(0x197)),express=require(a12_0x51e04d(0x1bf)),router=express['Router'](),fs=require('fs'),path=require(a12_0x51e04d(0x1b4)),{randomUUID}=require('crypto'),{exec}=require('child_process'),dir='./uploads';!fs['existsSync'](dir)&&fs[a12_0x51e04d(0x1a6)](dir);const storage=multer[a12_0x51e04d(0x1b5)]({'destination':function(_0x8d853c,_0x52c353,_0x45d5cd){const _0x4c582f=a12_0x51e04d;_0x45d5cd(null,_0x4c582f(0x19e));}}),upload=multer({'storage':storage});function a12_0x2110(){const _0x347cc4=['linklistLocation','3892482lnqrQD','/axlic.key','match','uploads','dirname','dwgmergeLocation','/dwgmerge/applylicense','142ISXWKx','filename','main','13907008pNXYWC','mkdirSync','391851BTYZQf','readFile','json','put','autoxchange_executable','join','body','/autoxchange/applylicense','trim','error','child_process','verify','get','path','diskStorage','stderr:\x20','Error\x20writing\x20licence\x20to\x20file','cvKey\x20not\x20found','renameSync','3477204HrNoDK','/linklist/applylicense','status','cadviewer/app/licence.html','converterLocation','express','/ll_lic.key','288745xEFoEt','file','\x22\x20};\x0a\x20\x20\x20\x20cvjs_licenseKeyLoaded\x20=\x20true;\x0a\x20\x20\x20\x20','single','sendFile','/cvjs/applylicense','\x0a\x20\x20\x20\x20var\x20cvjsLicenseKey\x20=\x20{\x20cvKey:\x20\x22','log','/dl_lic.key','replaceAll','\x20-verify\x20-lpath=','cadviewer/app/js/cvlicense.js','12030AwbKLm','License\x20applied','multer','post','3544471gByGWF'];a12_0x2110=function(){return _0x347cc4;};return a12_0x2110();}function a12_0x52c2(_0x5158d5,_0xf21c2e){const _0x2110d6=a12_0x2110();return a12_0x52c2=function(_0x52c2be,_0x194ebb){_0x52c2be=_0x52c2be-0x197;let _0x333329=_0x2110d6[_0x52c2be];return _0x333329;},a12_0x52c2(_0x5158d5,_0xf21c2e);}router[a12_0x51e04d(0x1b3)]('',async(_0x18124c,_0x4cfdbd)=>{const _0x209764=a12_0x51e04d;_0x4cfdbd[_0x209764(0x1c5)](path[_0x209764(0x1ac)](path['dirname'](require[_0x209764(0x1a4)][_0x209764(0x1a3)]),_0x209764(0x1bd)));}),router[a12_0x51e04d(0x1b3)]('/verify',async(_0xcc8055,_0x5b1ae2)=>{const _0x11277c=a12_0x51e04d,_0x3ce0a3=config[_0x11277c(0x1be)][_0x11277c(0x1ca)]('//','/'),_0x5cbb8b=''+_0x3ce0a3+config[_0x11277c(0x1ab)]+_0x11277c(0x1cb)+_0x3ce0a3,{exec:_0x5657d9}=require('child_process');fs[_0x11277c(0x1a8)](path[_0x11277c(0x1ac)](path[_0x11277c(0x19f)](require['main'][_0x11277c(0x1a3)]),_0x11277c(0x1cc)),'utf8',(_0x5b91f7,_0x2c9862)=>{const _0x23c480=_0x11277c,_0x51ebdf=/cvKey:\s*"([^']+)"/;let _0x370b0c=[];if(_0x2c9862&&!_0x5b91f7){const _0x10cdb4=_0x2c9862[_0x23c480(0x19d)](_0x51ebdf);if(_0x10cdb4){const _0xcdb40=_0x10cdb4[0x1];_0x370b0c=_0xcdb40[_0x23c480(0x1af)]()['split']('\x20');}else console[_0x23c480(0x1c8)](_0x23c480(0x1b8));}_0x5657d9(_0x5cbb8b,(_0x55f0bf,_0x570680,_0x40bc12)=>{const _0x180f86=_0x23c480;console[_0x180f86(0x1b0)](_0x180f86(0x1b6)+_0x40bc12),_0x5b1ae2['status'](0xc8)[_0x180f86(0x1a9)]({'verify':_0x180f86(0x1b2),'stdout':_0x570680,'cvjs':_0x370b0c[_0x180f86(0x1ac)]('\x20')});});});}),router[a12_0x51e04d(0x1aa)](a12_0x51e04d(0x1c6),async(_0x5d4662,_0x5b3a4d)=>{const _0x157c1a=a12_0x51e04d,{cvjs:_0x304551}=_0x5d4662[_0x157c1a(0x1ad)],_0x5d1b3d=_0x157c1a(0x1c7)+_0x304551+_0x157c1a(0x1c3);try{fs['writeFileSync'](path[_0x157c1a(0x1ac)](path[_0x157c1a(0x19f)](require['main']['filename']),'cadviewer/app/js/cvlicense.js'),_0x5d1b3d,{'flag':'w'}),_0x5b3a4d[_0x157c1a(0x1bc)](0xc8)[_0x157c1a(0x1a9)]({'msg':_0x157c1a(0x1ce)});}catch(_0x463f7d){_0x5b3a4d[_0x157c1a(0x1bc)](0xc8)['json']({'msg':_0x157c1a(0x1b7)});}}),router[a12_0x51e04d(0x198)](a12_0x51e04d(0x1ae),upload[a12_0x51e04d(0x1c4)]('file'),async(_0x34a27d,_0x2f4a65)=>{const _0x13dc17=a12_0x51e04d,_0x3375ce=config['licenseLocation'][_0x13dc17(0x1ca)]('//','/'),_0x185b75=config['converterLocation'][_0x13dc17(0x1ca)]('//','/'),_0x4bf0a6=''+_0x185b75+config[_0x13dc17(0x1ab)]+_0x13dc17(0x1cb)+_0x185b75;if(_0x34a27d[_0x13dc17(0x1c2)]){const _0x567fd9=_0x3375ce+_0x13dc17(0x19c);fs[_0x13dc17(0x1b9)](_0x34a27d[_0x13dc17(0x1c2)]['path'],_0x567fd9);const {exec:_0xad9222}=require(_0x13dc17(0x1b1));_0xad9222(_0x4bf0a6,(_0xfa8a4e,_0x54a3aa,_0x1df09a)=>{const _0x25aadc=_0x13dc17;console[_0x25aadc(0x1b0)]('stderr:\x20'+_0x1df09a),_0x2f4a65[_0x25aadc(0x1bc)](0xc8)[_0x25aadc(0x1a9)]({'msg':'License\x20applied','stdout':_0x54a3aa});});}else{_0x2f4a65[_0x13dc17(0x1bc)](0x190)[_0x13dc17(0x1a9)]({'error':''});return;}}),router[a12_0x51e04d(0x198)](a12_0x51e04d(0x1bb),upload[a12_0x51e04d(0x1c4)](a12_0x51e04d(0x1c2)),async(_0xf3482d,_0x2de4fc)=>{const _0x18f134=a12_0x51e04d,_0x16ed60=config[_0x18f134(0x19a)][_0x18f134(0x1ca)]('//','/'),_0x3d202f=config[_0x18f134(0x1be)][_0x18f134(0x1ca)]('//','/'),_0x32c854=''+_0x3d202f+config['autoxchange_executable']+'\x20-verify\x20-lpath='+_0x3d202f;if(_0xf3482d[_0x18f134(0x1c2)]){const _0x1ac0f6=_0x16ed60+_0x18f134(0x1c0);fs[_0x18f134(0x1b9)](_0xf3482d[_0x18f134(0x1c2)]['path'],_0x1ac0f6);const {exec:_0x2d195b}=require(_0x18f134(0x1b1));_0x2d195b(_0x32c854,(_0x5e0a7e,_0x2b8763,_0x28dfd8)=>{const _0x2a6156=_0x18f134;console[_0x2a6156(0x1b0)]('stderr:\x20'+_0x28dfd8),_0x2de4fc[_0x2a6156(0x1bc)](0xc8)[_0x2a6156(0x1a9)]({'msg':_0x2a6156(0x1ce),'stdout':_0x2b8763});});}else{_0x2de4fc[_0x18f134(0x1bc)](0x190)[_0x18f134(0x1a9)]({'error':''});return;}}),router['post'](a12_0x51e04d(0x1a1),upload['single'](a12_0x51e04d(0x1c2)),async(_0x523f26,_0x277c04)=>{const _0x2cd0ed=a12_0x51e04d,_0xdf1a12=config[_0x2cd0ed(0x1a0)][_0x2cd0ed(0x1ca)]('//','/'),_0x4b4fee=config[_0x2cd0ed(0x1be)]['replaceAll']('//','/'),_0x3a5807=''+_0x4b4fee+config[_0x2cd0ed(0x1ab)]+_0x2cd0ed(0x1cb)+_0x4b4fee;if(_0x523f26[_0x2cd0ed(0x1c2)]){const _0x4f652d=_0xdf1a12+_0x2cd0ed(0x1c9);fs[_0x2cd0ed(0x1b9)](_0x523f26[_0x2cd0ed(0x1c2)]['path'],_0x4f652d);const {exec:_0x14840d}=require(_0x2cd0ed(0x1b1));_0x14840d(_0x3a5807,(_0x3bea8e,_0x1348bf,_0x445889)=>{const _0xd369a9=_0x2cd0ed;console[_0xd369a9(0x1b0)](_0xd369a9(0x1b6)+_0x445889),_0x277c04[_0xd369a9(0x1bc)](0xc8)[_0xd369a9(0x1a9)]({'msg':_0xd369a9(0x1ce),'stdout':_0x1348bf});});}else{_0x277c04[_0x2cd0ed(0x1bc)](0x190)['json']({'error':''});return;}}),module['exports']=router;
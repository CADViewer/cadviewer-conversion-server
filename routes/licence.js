const a12_0x286006=a12_0x5a22;(function(_0x68fb2e,_0x6bea9d){const _0x5c7782=a12_0x5a22,_0x2d370c=_0x68fb2e();while(!![]){try{const _0x3e44c4=-parseInt(_0x5c7782(0x152))/0x1*(parseInt(_0x5c7782(0x149))/0x2)+-parseInt(_0x5c7782(0x154))/0x3*(-parseInt(_0x5c7782(0x135))/0x4)+parseInt(_0x5c7782(0x151))/0x5*(-parseInt(_0x5c7782(0x161))/0x6)+parseInt(_0x5c7782(0x13a))/0x7*(-parseInt(_0x5c7782(0x143))/0x8)+-parseInt(_0x5c7782(0x164))/0x9+-parseInt(_0x5c7782(0x13d))/0xa*(parseInt(_0x5c7782(0x14e))/0xb)+-parseInt(_0x5c7782(0x13f))/0xc*(-parseInt(_0x5c7782(0x165))/0xd);if(_0x3e44c4===_0x6bea9d)break;else _0x2d370c['push'](_0x2d370c['shift']());}catch(_0xd6b46a){_0x2d370c['push'](_0x2d370c['shift']());}}}(a12_0x5c8d,0x7e383));function a12_0x5a22(_0x130d6c,_0x5f478f){const _0x5c8dca=a12_0x5c8d();return a12_0x5a22=function(_0x5a22fe,_0x5aca2a){_0x5a22fe=_0x5a22fe-0x132;let _0x1eddd1=_0x5c8dca[_0x5a22fe];return _0x1eddd1;},a12_0x5a22(_0x130d6c,_0x5f478f);}const config=require('../CADViewer_config.json'),multer=require(a12_0x286006(0x15c)),express=require('express'),router=express[a12_0x286006(0x16c)](),fs=require('fs'),path=require(a12_0x286006(0x14b)),{randomUUID}=require('crypto'),{exec}=require('child_process'),dir=a12_0x286006(0x16a);!fs[a12_0x286006(0x15d)](dir)&&fs[a12_0x286006(0x141)](dir);const storage=multer[a12_0x286006(0x150)]({'destination':function(_0x31e769,_0x2d21ef,_0x3b9f8c){const _0x38b481=a12_0x286006;_0x3b9f8c(null,_0x38b481(0x14c));}}),upload=multer({'storage':storage});router[a12_0x286006(0x153)]('',async(_0x2754a7,_0x2b104f)=>{const _0x44dee6=a12_0x286006;_0x2b104f[_0x44dee6(0x132)](path['join'](path['dirname'](require['main'][_0x44dee6(0x13e)]),_0x44dee6(0x138)));}),router['get'](a12_0x286006(0x15b),async(_0x4c2c22,_0xdb4a48)=>{const _0x13a329=a12_0x286006,_0x3711dc=config['converterLocation'][_0x13a329(0x14a)]('//','/'),_0x4b9cef=''+_0x3711dc+config[_0x13a329(0x157)]+_0x13a329(0x155)+_0x3711dc,{exec:_0x58c100}=require(_0x13a329(0x167));fs[_0x13a329(0x145)](path[_0x13a329(0x156)](path[_0x13a329(0x15a)](require[_0x13a329(0x159)][_0x13a329(0x13e)]),'cadviewer/app/js/cvlicense.js'),_0x13a329(0x160),(_0x253af3,_0x2737c0)=>{const _0x53186b=_0x13a329,_0x3da172=/cvKey:\s*"([^']+)"/;let _0x34bce5=[];if(_0x2737c0&&!_0x253af3){const _0x12ff50=_0x2737c0[_0x53186b(0x13c)](_0x3da172);if(_0x12ff50){const _0x14a80d=_0x12ff50[0x1];_0x34bce5=_0x14a80d[_0x53186b(0x168)]()['split']('\x20');}else console['log'](_0x53186b(0x134));}_0x58c100(_0x4b9cef,(_0x5de088,_0x2a6209,_0x170f27)=>{const _0x3a7b28=_0x53186b;console[_0x3a7b28(0x163)](_0x3a7b28(0x14d)+_0x170f27),_0xdb4a48[_0x3a7b28(0x15f)](0xc8)[_0x3a7b28(0x13b)]({'verify':_0x3a7b28(0x136),'stdout':_0x2a6209,'cvjs':_0x34bce5[_0x3a7b28(0x156)]('\x20')});});});}),router['put'](a12_0x286006(0x137),async(_0x347705,_0x25d6a0)=>{const _0x43ff49=a12_0x286006,{cvjs:_0x41a3a4}=_0x347705[_0x43ff49(0x133)],_0x25d330=_0x43ff49(0x166)+_0x41a3a4+'\x22\x20};\x0a\x20\x20\x20\x20cvjs_licenseKeyLoaded\x20=\x20true;\x0a\x20\x20\x20\x20';try{fs[_0x43ff49(0x147)](path[_0x43ff49(0x156)](path[_0x43ff49(0x15a)](require['main']['filename']),_0x43ff49(0x142)),_0x25d330,{'flag':'w'}),_0x25d6a0[_0x43ff49(0x15f)](0xc8)['json']({'msg':_0x43ff49(0x16b)});}catch(_0x4eb34c){_0x25d6a0[_0x43ff49(0x15f)](0xc8)[_0x43ff49(0x13b)]({'msg':'Error\x20writing\x20licence\x20to\x20file'});}}),router['post']('/autoxchange/applylicense',upload[a12_0x286006(0x162)]('file'),async(_0x33a2d3,_0x53adbd)=>{const _0xa5f36b=a12_0x286006,_0x1216e5=config[_0xa5f36b(0x146)][_0xa5f36b(0x14a)]('//','/'),_0x109a85=config[_0xa5f36b(0x144)][_0xa5f36b(0x14a)]('//','/'),_0x91e3b=''+_0x109a85+config['autoxchange_executable']+_0xa5f36b(0x155)+_0x109a85;if(_0x33a2d3[_0xa5f36b(0x140)]){const _0x27a38b=_0x1216e5+_0xa5f36b(0x169);fs['renameSync'](_0x33a2d3[_0xa5f36b(0x140)]['path'],_0x27a38b);const {exec:_0x251940}=require(_0xa5f36b(0x167));_0x251940(_0x91e3b,(_0xeaf50e,_0x35ebc1,_0x4ecb79)=>{const _0x8ad212=_0xa5f36b;console[_0x8ad212(0x163)](_0x8ad212(0x14d)+_0x4ecb79),_0x53adbd[_0x8ad212(0x15f)](0xc8)[_0x8ad212(0x13b)]({'msg':'License\x20applied','stdout':_0x35ebc1});});}else{_0x53adbd[_0xa5f36b(0x15f)](0x190)[_0xa5f36b(0x13b)]({'error':''});return;}}),router[a12_0x286006(0x158)](a12_0x286006(0x14f),upload[a12_0x286006(0x162)](a12_0x286006(0x140)),async(_0x473d30,_0x3ef7de)=>{const _0x41e869=a12_0x286006,_0xc4c124=config['linklistLocation'][_0x41e869(0x14a)]('//','/'),_0x5a10ea=config[_0x41e869(0x144)][_0x41e869(0x14a)]('//','/'),_0x271e26=''+_0x5a10ea+config['autoxchange_executable']+_0x41e869(0x155)+_0x5a10ea;if(_0x473d30[_0x41e869(0x140)]){const _0x4b9c32=_0xc4c124+_0x41e869(0x148);fs[_0x41e869(0x15e)](_0x473d30[_0x41e869(0x140)][_0x41e869(0x14b)],_0x4b9c32);const {exec:_0x50b5ab}=require(_0x41e869(0x167));_0x50b5ab(_0x271e26,(_0x55b010,_0x579dce,_0x3b75b3)=>{const _0x38a55c=_0x41e869;console['error'](_0x38a55c(0x14d)+_0x3b75b3),_0x3ef7de[_0x38a55c(0x15f)](0xc8)[_0x38a55c(0x13b)]({'msg':_0x38a55c(0x16b),'stdout':_0x579dce});});}else{_0x3ef7de[_0x41e869(0x15f)](0x190)[_0x41e869(0x13b)]({'error':''});return;}}),router[a12_0x286006(0x158)](a12_0x286006(0x139),upload[a12_0x286006(0x162)](a12_0x286006(0x140)),async(_0x2f701c,_0x1cfb70)=>{const _0x57f4c7=a12_0x286006,_0x1578ec=config['dwgmergeLocation'][_0x57f4c7(0x14a)]('//','/'),_0x5eb246=config['converterLocation'][_0x57f4c7(0x14a)]('//','/'),_0x194223=''+_0x5eb246+config[_0x57f4c7(0x157)]+_0x57f4c7(0x155)+_0x5eb246;if(_0x2f701c[_0x57f4c7(0x140)]){const _0x731251=_0x1578ec+'/dl_lic.key';fs[_0x57f4c7(0x15e)](_0x2f701c[_0x57f4c7(0x140)][_0x57f4c7(0x14b)],_0x731251);const {exec:_0x8b64fd}=require('child_process');_0x8b64fd(_0x194223,(_0x54c973,_0x385cb7,_0x3493f7)=>{const _0x2e436d=_0x57f4c7;console[_0x2e436d(0x163)](_0x2e436d(0x14d)+_0x3493f7),_0x1cfb70['status'](0xc8)['json']({'msg':'License\x20applied','stdout':_0x385cb7});});}else{_0x1cfb70[_0x57f4c7(0x15f)](0x190)[_0x57f4c7(0x13b)]({'error':''});return;}}),module['exports']=router;function a12_0x5c8d(){const _0x3c2faf=['License\x20applied','Router','sendFile','body','cvKey\x20not\x20found','4tPISlM','verify','/cvjs/applylicense','cadviewer/app/licence.html','/dwgmerge/applylicense','112QaJMRE','json','match','9750660IKuCkD','filename','22260FGZurL','file','mkdirSync','cadviewer/app/js/cvlicense.js','460336GvFCur','converterLocation','readFile','licenseLocation','writeFileSync','/ll_lic.key','210930ENvtbV','replaceAll','path','uploads','stderr:\x20','11YZrZie','/linklist/applylicense','diskStorage','5ecyMWz','5hEOAij','get','924921hMZvEt','\x20-verify\x20-lpath=','join','autoxchange_executable','post','main','dirname','/verify','multer','existsSync','renameSync','status','utf8','3835374qFFMqa','single','error','1697355TqnaJu','24245tQjPKI','\x0a\x20\x20\x20\x20var\x20cvjsLicenseKey\x20=\x20{\x20cvKey:\x20\x22','child_process','trim','/axlic.key','./uploads'];a12_0x5c8d=function(){return _0x3c2faf;};return a12_0x5c8d();}
const a11_0x5cfc19=a11_0x47aa;(function(_0x4d79a9,_0x1cf935){const _0x47a2c7=a11_0x47aa,_0x8543c6=_0x4d79a9();while(!![]){try{const _0x312ca0=-parseInt(_0x47a2c7(0x74))/0x1+-parseInt(_0x47a2c7(0x9a))/0x2*(parseInt(_0x47a2c7(0x78))/0x3)+parseInt(_0x47a2c7(0x80))/0x4*(-parseInt(_0x47a2c7(0x8f))/0x5)+parseInt(_0x47a2c7(0x72))/0x6+parseInt(_0x47a2c7(0x6a))/0x7*(-parseInt(_0x47a2c7(0x7b))/0x8)+parseInt(_0x47a2c7(0x79))/0x9+parseInt(_0x47a2c7(0x7f))/0xa;if(_0x312ca0===_0x1cf935)break;else _0x8543c6['push'](_0x8543c6['shift']());}catch(_0xceb5a0){_0x8543c6['push'](_0x8543c6['shift']());}}}(a11_0x238f,0xe56cb));const config=require(a11_0x5cfc19(0x93)),multer=require(a11_0x5cfc19(0x97)),express=require('express'),router=express[a11_0x5cfc19(0x69)](),fs=require('fs'),path=require(a11_0x5cfc19(0x8e)),{randomUUID}=require(a11_0x5cfc19(0x6d)),{exec}=require(a11_0x5cfc19(0x9b)),dir=a11_0x5cfc19(0x90);function a11_0x238f(){const _0x52bd1b=['License\x20applied','\x0a\x20\x20\x20\x20var\x20cvjsLicenseKey\x20=\x20{\x20cvKey:\x20\x22','cvKey\x20not\x20found','path','155fWVBeB','./uploads','renameSync','dirname','../CADViewer_config.json','autoxchange_executable','\x20-verify\x20-lpath=','converterLocation','multer','mkdirSync','/autoxchange/applylicense','610DhKrEA','child_process','log','split','main','json','error','file','Router','2836393MQjAwd','single','Error\x20writing\x20licence\x20to\x20file','crypto','/axlic.key','post','dwgmergeLocation','status','8310846oELhxS','sendFile','380840abWSBy','filename','cadviewer/app/licence.html','verify','16659Fczsnq','7061121FufCnw','readFile','32sklpQT','body','\x22\x20};\x0a\x20\x20\x20\x20cvjs_licenseKeyLoaded\x20=\x20true;\x0a\x20\x20\x20\x20','/dl_lic.key','27385790BljzlT','35260NaiDoN','linklistLocation','utf8','get','join','match','/linklist/applylicense','diskStorage','stderr:\x20','/ll_lic.key','replaceAll'];a11_0x238f=function(){return _0x52bd1b;};return a11_0x238f();}function a11_0x47aa(_0x5c1004,_0x574ee6){const _0x238f82=a11_0x238f();return a11_0x47aa=function(_0x47aa3b,_0x2362cd){_0x47aa3b=_0x47aa3b-0x66;let _0x20595b=_0x238f82[_0x47aa3b];return _0x20595b;},a11_0x47aa(_0x5c1004,_0x574ee6);}!fs['existsSync'](dir)&&fs[a11_0x5cfc19(0x98)](dir);const storage=multer[a11_0x5cfc19(0x87)]({'destination':function(_0x569d15,_0x21ac90,_0x5183bd){_0x5183bd(null,'uploads');}}),upload=multer({'storage':storage});router[a11_0x5cfc19(0x83)]('',async(_0x5a659d,_0x170ad4)=>{const _0x2e7aed=a11_0x5cfc19;_0x170ad4[_0x2e7aed(0x73)](path[_0x2e7aed(0x84)](path['dirname'](require['main'][_0x2e7aed(0x75)]),_0x2e7aed(0x76)));}),router[a11_0x5cfc19(0x83)]('/verify',async(_0xa3818c,_0x5bc851)=>{const _0x43f1dc=a11_0x5cfc19,_0xc377ed=config['converterLocation'][_0x43f1dc(0x8a)]('//','/'),_0x53095c=''+_0xc377ed+config[_0x43f1dc(0x94)]+'\x20-verify\x20-lpath='+_0xc377ed,{exec:_0x2c7f1b}=require(_0x43f1dc(0x9b));fs[_0x43f1dc(0x7a)](path[_0x43f1dc(0x84)](path[_0x43f1dc(0x92)](require[_0x43f1dc(0x9e)]['filename']),'cadviewer/app/js/cvlicense.js'),_0x43f1dc(0x82),(_0x2b9d9a,_0x42218f)=>{const _0x24ad14=_0x43f1dc,_0x344718=/cvKey:\s*"([^']+)"/;let _0x1c9828=[];if(_0x42218f&&!_0x2b9d9a){const _0x5a955b=_0x42218f[_0x24ad14(0x85)](_0x344718);if(_0x5a955b){const _0x1546c7=_0x5a955b[0x1];_0x1c9828=_0x1546c7['trim']()[_0x24ad14(0x9d)]('\x20');}else console[_0x24ad14(0x9c)](_0x24ad14(0x8d));}_0x2c7f1b(_0x53095c,(_0x2af412,_0x63f5d7,_0x31c837)=>{const _0x29b487=_0x24ad14;console[_0x29b487(0x67)](_0x29b487(0x88)+_0x31c837),_0x5bc851[_0x29b487(0x71)](0xc8)[_0x29b487(0x66)]({'verify':_0x29b487(0x77),'stdout':_0x63f5d7,'cvjs':_0x1c9828[_0x29b487(0x84)]('\x20')});});});}),router['put']('/cvjs/applylicense',async(_0x43761d,_0x45d6a5)=>{const _0x2a3b56=a11_0x5cfc19,{cvjs:_0x29066b}=_0x43761d[_0x2a3b56(0x7c)],_0x30663c=_0x2a3b56(0x8c)+_0x29066b+_0x2a3b56(0x7d);try{fs['writeFileSync'](path[_0x2a3b56(0x84)](path[_0x2a3b56(0x92)](require['main'][_0x2a3b56(0x75)]),'cadviewer/app/js/cvlicense.js'),_0x30663c,{'flag':'w'}),_0x45d6a5[_0x2a3b56(0x71)](0xc8)[_0x2a3b56(0x66)]({'msg':'License\x20applied'});}catch(_0x43470c){_0x45d6a5[_0x2a3b56(0x71)](0xc8)[_0x2a3b56(0x66)]({'msg':_0x2a3b56(0x6c)});}}),router[a11_0x5cfc19(0x6f)](a11_0x5cfc19(0x99),upload['single'](a11_0x5cfc19(0x68)),async(_0x3fa1d3,_0x31967d)=>{const _0x45f76f=a11_0x5cfc19,_0x5230dd=config['licenseLocation']['replaceAll']('//','/'),_0x4f8613=config['converterLocation'][_0x45f76f(0x8a)]('//','/'),_0x176947=''+_0x4f8613+config[_0x45f76f(0x94)]+_0x45f76f(0x95)+_0x4f8613;if(_0x3fa1d3[_0x45f76f(0x68)]){const _0xb1630a=_0x5230dd+_0x45f76f(0x6e);fs[_0x45f76f(0x91)](_0x3fa1d3[_0x45f76f(0x68)][_0x45f76f(0x8e)],_0xb1630a);const {exec:_0x1676a3}=require('child_process');_0x1676a3(_0x176947,(_0x1db5be,_0xa46f03,_0xa7753c)=>{const _0x3a06a4=_0x45f76f;console[_0x3a06a4(0x67)](_0x3a06a4(0x88)+_0xa7753c),_0x31967d[_0x3a06a4(0x71)](0xc8)['json']({'msg':_0x3a06a4(0x8b),'stdout':_0xa46f03});});}else{_0x31967d[_0x45f76f(0x71)](0x190)[_0x45f76f(0x66)]({'error':''});return;}}),router['post'](a11_0x5cfc19(0x86),upload[a11_0x5cfc19(0x6b)](a11_0x5cfc19(0x68)),async(_0x54f203,_0xa4775b)=>{const _0x53d88b=a11_0x5cfc19,_0x58e643=config[_0x53d88b(0x81)]['replaceAll']('//','/'),_0x47c210=config[_0x53d88b(0x96)][_0x53d88b(0x8a)]('//','/'),_0x179cca=''+_0x47c210+config['autoxchange_executable']+_0x53d88b(0x95)+_0x47c210;if(_0x54f203[_0x53d88b(0x68)]){const _0x42867a=_0x58e643+_0x53d88b(0x89);fs[_0x53d88b(0x91)](_0x54f203['file'][_0x53d88b(0x8e)],_0x42867a);const {exec:_0x1aab3d}=require(_0x53d88b(0x9b));_0x1aab3d(_0x179cca,(_0x53cf17,_0x1864b3,_0x252e60)=>{const _0x41c700=_0x53d88b;console[_0x41c700(0x67)](_0x41c700(0x88)+_0x252e60),_0xa4775b[_0x41c700(0x71)](0xc8)[_0x41c700(0x66)]({'msg':_0x41c700(0x8b),'stdout':_0x1864b3});});}else{_0xa4775b[_0x53d88b(0x71)](0x190)[_0x53d88b(0x66)]({'error':''});return;}}),router['post']('/dwgmerge/applylicense',upload[a11_0x5cfc19(0x6b)](a11_0x5cfc19(0x68)),async(_0x2e0ad5,_0x374815)=>{const _0x18ab6e=a11_0x5cfc19,_0x1bfb18=config[_0x18ab6e(0x70)][_0x18ab6e(0x8a)]('//','/'),_0x3f488c=config['converterLocation'][_0x18ab6e(0x8a)]('//','/'),_0x12e24f=''+_0x3f488c+config[_0x18ab6e(0x94)]+_0x18ab6e(0x95)+_0x3f488c;if(_0x2e0ad5[_0x18ab6e(0x68)]){const _0x341109=_0x1bfb18+_0x18ab6e(0x7e);fs[_0x18ab6e(0x91)](_0x2e0ad5[_0x18ab6e(0x68)][_0x18ab6e(0x8e)],_0x341109);const {exec:_0x25a476}=require('child_process');_0x25a476(_0x12e24f,(_0x33d560,_0x4b1c14,_0x4a87a5)=>{const _0x3823ac=_0x18ab6e;console[_0x3823ac(0x67)]('stderr:\x20'+_0x4a87a5),_0x374815[_0x3823ac(0x71)](0xc8)[_0x3823ac(0x66)]({'msg':_0x3823ac(0x8b),'stdout':_0x4b1c14});});}else{_0x374815[_0x18ab6e(0x71)](0x190)['json']({'error':''});return;}}),module['exports']=router;
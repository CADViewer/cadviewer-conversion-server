const a11_0x199c1d=a11_0x5b5d;(function(_0x341db7,_0x54c23c){const _0x86eb60=a11_0x5b5d,_0x214829=_0x341db7();while(!![]){try{const _0x5396ab=-parseInt(_0x86eb60(0x9a))/0x1+-parseInt(_0x86eb60(0xab))/0x2+-parseInt(_0x86eb60(0x99))/0x3*(-parseInt(_0x86eb60(0xbd))/0x4)+parseInt(_0x86eb60(0xa7))/0x5+-parseInt(_0x86eb60(0xa2))/0x6+-parseInt(_0x86eb60(0xa3))/0x7*(-parseInt(_0x86eb60(0xb5))/0x8)+parseInt(_0x86eb60(0xb4))/0x9*(parseInt(_0x86eb60(0xc2))/0xa);if(_0x5396ab===_0x54c23c)break;else _0x214829['push'](_0x214829['shift']());}catch(_0x38096c){_0x214829['push'](_0x214829['shift']());}}}(a11_0x1c23,0x444b5));const config=require(a11_0x199c1d(0xc9)),multer=require(a11_0x199c1d(0xc0)),express=require(a11_0x199c1d(0xbb)),router=express['Router'](),fs=require('fs'),path=require(a11_0x199c1d(0x9f)),{randomUUID}=require(a11_0x199c1d(0x9e)),{exec}=require(a11_0x199c1d(0xc7)),dir=a11_0x199c1d(0xb9);!fs['existsSync'](dir)&&fs[a11_0x199c1d(0xa0)](dir);function a11_0x5b5d(_0x595d25,_0xd3f984){const _0x1c230b=a11_0x1c23();return a11_0x5b5d=function(_0x5b5daf,_0x310d6f){_0x5b5daf=_0x5b5daf-0x98;let _0x2abaa4=_0x1c230b[_0x5b5daf];return _0x2abaa4;},a11_0x5b5d(_0x595d25,_0xd3f984);}const storage=multer['diskStorage']({'destination':function(_0x1fa4c5,_0x21577a,_0x31003a){const _0x2c4e70=a11_0x199c1d;_0x31003a(null,_0x2c4e70(0xb1));}}),upload=multer({'storage':storage});function a11_0x1c23(){const _0x4f5026=['7340715bpqxYh','15384UYeqEG','renameSync','autoxchange_executable','\x20-verify\x20-lpath=','./uploads','dirname','express','split','8932NCcdGa','replaceAll','json','multer','status','10CmDnFG','sendFile','\x22\x20};\x0a\x20\x20\x20\x20cvjs_licenseKeyLoaded\x20=\x20true;\x0a\x20\x20\x20\x20','single','linklistLocation','child_process','/autoxchange/applylicense','../CADViewer_config.json','join','Error\x20writing\x20licence\x20to\x20file','249ZTgEqt','245033tuMGEY','error','licenseLocation','cvKey\x20not\x20found','crypto','path','mkdirSync','converterLocation','1404276HPjfzf','301HkbYfd','post','filename','/axlic.key','545410UEfGQo','main','get','cadviewer/app/js/cvlicense.js','867866RmHGTH','License\x20applied','/cvjs/applylicense','stderr:\x20','utf8','/ll_lic.key','uploads','trim','file'];a11_0x1c23=function(){return _0x4f5026;};return a11_0x1c23();}router[a11_0x199c1d(0xa9)]('',async(_0x16712a,_0x35d51c)=>{const _0x3e88ff=a11_0x199c1d;_0x35d51c[_0x3e88ff(0xc3)](path[_0x3e88ff(0xca)](path[_0x3e88ff(0xba)](require[_0x3e88ff(0xa8)][_0x3e88ff(0xa5)]),'cadviewer/app/licence.html'));}),router[a11_0x199c1d(0xa9)]('/verify',async(_0x347138,_0x34bd0f)=>{const _0x381aaf=a11_0x199c1d,_0x3f0f13=config[_0x381aaf(0xa1)][_0x381aaf(0xbe)]('//','/'),_0x40ef6f=''+_0x3f0f13+config[_0x381aaf(0xb7)]+_0x381aaf(0xb8)+_0x3f0f13,{exec:_0x8c4884}=require(_0x381aaf(0xc7));fs['readFile'](path[_0x381aaf(0xca)](path[_0x381aaf(0xba)](require[_0x381aaf(0xa8)]['filename']),_0x381aaf(0xaa)),_0x381aaf(0xaf),(_0x243c21,_0x727ef8)=>{const _0x43dd3b=_0x381aaf,_0x595463=/cvKey:\s*"([^']+)"/;let _0x4357fb=[];if(_0x727ef8&&!_0x243c21){const _0x223add=_0x727ef8['match'](_0x595463);if(_0x223add){const _0x4c1856=_0x223add[0x1];_0x4357fb=_0x4c1856[_0x43dd3b(0xb2)]()[_0x43dd3b(0xbc)]('\x20');}else console['log'](_0x43dd3b(0x9d));}_0x8c4884(_0x40ef6f,(_0x40da89,_0x32a92a,_0x5274c3)=>{const _0xbcebe2=_0x43dd3b;console[_0xbcebe2(0x9b)]('stderr:\x20'+_0x5274c3),_0x34bd0f[_0xbcebe2(0xc1)](0xc8)[_0xbcebe2(0xbf)]({'verify':'verify','stdout':_0x32a92a,'cvjs':_0x4357fb['join']('\x20')});});});}),router['put'](a11_0x199c1d(0xad),async(_0x4f3d1c,_0x572e95)=>{const _0x1bb78f=a11_0x199c1d,{cvjs:_0x345584}=_0x4f3d1c['body'],_0x169787='\x0a\x20\x20\x20\x20var\x20cvjsLicenseKey\x20=\x20{\x20cvKey:\x20\x22'+_0x345584+_0x1bb78f(0xc4);try{fs['writeFileSync'](path[_0x1bb78f(0xca)](path['dirname'](require[_0x1bb78f(0xa8)]['filename']),_0x1bb78f(0xaa)),_0x169787,{'flag':'w'}),_0x572e95[_0x1bb78f(0xc1)](0xc8)[_0x1bb78f(0xbf)]({'msg':'License\x20applied'});}catch(_0x3a9b0e){_0x572e95['status'](0xc8)[_0x1bb78f(0xbf)]({'msg':_0x1bb78f(0x98)});}}),router[a11_0x199c1d(0xa4)](a11_0x199c1d(0xc8),upload[a11_0x199c1d(0xc5)](a11_0x199c1d(0xb3)),async(_0x42fb7f,_0x17bb24)=>{const _0x56f23b=a11_0x199c1d,_0x1d2df0=config[_0x56f23b(0x9c)][_0x56f23b(0xbe)]('//','/'),_0x16bd43=config[_0x56f23b(0xa1)][_0x56f23b(0xbe)]('//','/'),_0xf2e7bf=''+_0x16bd43+config[_0x56f23b(0xb7)]+_0x56f23b(0xb8)+_0x16bd43;if(_0x42fb7f[_0x56f23b(0xb3)]){const _0x40e1f2=_0x1d2df0+_0x56f23b(0xa6);fs[_0x56f23b(0xb6)](_0x42fb7f[_0x56f23b(0xb3)]['path'],_0x40e1f2);const {exec:_0x161199}=require(_0x56f23b(0xc7));_0x161199(_0xf2e7bf,(_0x45b1c2,_0x60b492,_0x389014)=>{const _0xef0ad8=_0x56f23b;console[_0xef0ad8(0x9b)]('stderr:\x20'+_0x389014),_0x17bb24[_0xef0ad8(0xc1)](0xc8)['json']({'msg':_0xef0ad8(0xac),'stdout':_0x60b492});});}else{_0x17bb24[_0x56f23b(0xc1)](0x190)[_0x56f23b(0xbf)]({'error':''});return;}}),router[a11_0x199c1d(0xa4)]('/linklist/applylicense',upload[a11_0x199c1d(0xc5)](a11_0x199c1d(0xb3)),async(_0x3eeac9,_0x28d84b)=>{const _0x5d39dd=a11_0x199c1d,_0x4c8eab=config[_0x5d39dd(0xc6)][_0x5d39dd(0xbe)]('//','/'),_0x17acb5=config['converterLocation'][_0x5d39dd(0xbe)]('//','/'),_0x11d576=''+_0x17acb5+config[_0x5d39dd(0xb7)]+_0x5d39dd(0xb8)+_0x17acb5;if(_0x3eeac9['file']){const _0x5a7755=_0x4c8eab+_0x5d39dd(0xb0);fs[_0x5d39dd(0xb6)](_0x3eeac9[_0x5d39dd(0xb3)][_0x5d39dd(0x9f)],_0x5a7755);const {exec:_0x250df0}=require('child_process');_0x250df0(_0x11d576,(_0x3dc838,_0x1831ff,_0x303af1)=>{const _0x2fe2d5=_0x5d39dd;console[_0x2fe2d5(0x9b)](_0x2fe2d5(0xae)+_0x303af1),_0x28d84b[_0x2fe2d5(0xc1)](0xc8)[_0x2fe2d5(0xbf)]({'msg':_0x2fe2d5(0xac),'stdout':_0x1831ff});});}else{_0x28d84b[_0x5d39dd(0xc1)](0x190)[_0x5d39dd(0xbf)]({'error':''});return;}}),router['post']('/dwgmerge/applylicense',upload[a11_0x199c1d(0xc5)](a11_0x199c1d(0xb3)),async(_0x49ad1a,_0x5c82a8)=>{const _0x5f5d1f=a11_0x199c1d,_0x5c9ec0=config['dwgmergeLocation'][_0x5f5d1f(0xbe)]('//','/'),_0x277aad=config[_0x5f5d1f(0xa1)][_0x5f5d1f(0xbe)]('//','/'),_0xa77630=''+_0x277aad+config[_0x5f5d1f(0xb7)]+'\x20-verify\x20-lpath='+_0x277aad;if(_0x49ad1a[_0x5f5d1f(0xb3)]){const _0x217419=_0x5c9ec0+'/dl_lic.key';fs[_0x5f5d1f(0xb6)](_0x49ad1a[_0x5f5d1f(0xb3)][_0x5f5d1f(0x9f)],_0x217419);const {exec:_0x2c3ca8}=require(_0x5f5d1f(0xc7));_0x2c3ca8(_0xa77630,(_0x3a0fbe,_0x4cf475,_0x4f8497)=>{const _0x3a5838=_0x5f5d1f;console[_0x3a5838(0x9b)](_0x3a5838(0xae)+_0x4f8497),_0x5c82a8[_0x3a5838(0xc1)](0xc8)['json']({'msg':_0x3a5838(0xac),'stdout':_0x4cf475});});}else{_0x5c82a8['status'](0x190)[_0x5f5d1f(0xbf)]({'error':''});return;}}),module['exports']=router;
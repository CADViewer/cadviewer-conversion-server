function a15_0x2caa(){const _0x57b718=['user','3107984QecAjT','../CADViewer_config.json','filename','5804WGAYex','116120BXJQKo','exports','MY\x20FOLDER','length','../libs/mysql','\x20show_folders:','join','53IODhnZ','loginFeatureEnabled','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?','6937fMHxbu','size','└──\x20','path','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`email`\x20=\x20?','\x20\x20\x20','dirname','CADViewer_config.json','admin','json','├──\x20','false','statSync','query','status','9sTiNHg','sort','27278KLxvMS','8968OpUzrd','folderLocation','./uploads/','441cMGlQB','push','folder_name','mkdirSync','cvhs_debug:','role','email','mtime','birthtime','Error!\x20Something\x20went\x20wrong.','crypto','verifyTokenOptional','resolve','utf8','promise','2684840sMhLqQ','parse','readdirSync','execute','children','existsSync','cvjs_debug','log','isDirectory','4014690FQaiBE','folderLocationDemoUser'];a15_0x2caa=function(){return _0x57b718;};return a15_0x2caa();}const a15_0x434eb8=a15_0xcad7;(function(_0x2a0ad2,_0x169344){const _0x430e65=a15_0xcad7,_0x2464b3=_0x2a0ad2();while(!![]){try{const _0x13a626=parseInt(_0x430e65(0x1cf))/0x1*(-parseInt(_0x430e65(0x1e3))/0x2)+-parseInt(_0x430e65(0x1e7))/0x3*(parseInt(_0x430e65(0x1c7))/0x4)+-parseInt(_0x430e65(0x1b8))/0x5+parseInt(_0x430e65(0x1c1))/0x6+parseInt(_0x430e65(0x1d2))/0x7*(parseInt(_0x430e65(0x1e4))/0x8)+-parseInt(_0x430e65(0x1e1))/0x9*(parseInt(_0x430e65(0x1c8))/0xa)+parseInt(_0x430e65(0x1c4))/0xb;if(_0x13a626===_0x169344)break;else _0x2464b3['push'](_0x2464b3['shift']());}catch(_0x3501c6){_0x2464b3['push'](_0x2464b3['shift']());}}}(a15_0x2caa,0x8d122));const fs=require('fs'),path=require(a15_0x434eb8(0x1d5)),config=require(a15_0x434eb8(0x1c5)),verifyTokenOptional=require('../libs/jwt')[a15_0x434eb8(0x1b4)],show_folders=![],express=require('express'),router=express['Router'](),conn=require(a15_0x434eb8(0x1cc)),{randomUUID}=require(a15_0x434eb8(0x1b3)),dir='./uploads';function a15_0xcad7(_0x3478cf,_0x46642){const _0x2caaa4=a15_0x2caa();return a15_0xcad7=function(_0xcad79b,_0x1708c5){_0xcad79b=_0xcad79b-0x1ab;let _0x5f1f3b=_0x2caaa4[_0xcad79b];return _0x5f1f3b;},a15_0xcad7(_0x3478cf,_0x46642);}!fs[a15_0x434eb8(0x1bd)](dir)&&fs[a15_0x434eb8(0x1ac)](dir);const sortFoldersFirst=(_0x4ac9a6,_0xa98dc1)=>{const _0x32ecd4=a15_0x434eb8;if(_0x4ac9a6['children']&&!_0xa98dc1[_0x32ecd4(0x1bc)])return-0x1;else return!_0x4ac9a6[_0x32ecd4(0x1bc)]&&_0xa98dc1[_0x32ecd4(0x1bc)]?0x1:0x0;},listFolderStructure=(_0x870181,_0x3da64b='')=>{const _0x35b723=a15_0x434eb8,_0x55c2b3=fs[_0x35b723(0x1ba)](_0x870181),_0x50a035=[];return _0x55c2b3['forEach'](_0x10a00a=>{const _0x50bb3b=_0x35b723,_0x33f09e=path[_0x50bb3b(0x1ce)](_0x870181,_0x10a00a),_0x10b194=fs[_0x50bb3b(0x1de)](_0x33f09e);if(_0x10b194[_0x50bb3b(0x1c0)]()){if(config[_0x50bb3b(0x1be)]&&show_folders)console[_0x50bb3b(0x1bf)](_0x3da64b+_0x50bb3b(0x1d4)+_0x10a00a);const _0x1c4eab=listFolderStructure(_0x33f09e,_0x3da64b+_0x50bb3b(0x1d7));_0x50a035[_0x50bb3b(0x1e8)]({'name':_0x10a00a,'path':_0x33f09e,'size':_0x10b194[_0x50bb3b(0x1d3)],'created':_0x10b194[_0x50bb3b(0x1b1)],'modified':_0x10b194[_0x50bb3b(0x1b0)],'isFolder':!![],'children':_0x1c4eab});}else{_0x50a035[_0x50bb3b(0x1e8)]({'name':_0x10a00a,'path':_0x33f09e,'size':_0x10b194['size'],'created':_0x10b194[_0x50bb3b(0x1b1)],'modified':_0x10b194['mtime'],'isFolder':![]});if(config['cvjs_debug']&&show_folders)console[_0x50bb3b(0x1bf)](_0x3da64b+_0x50bb3b(0x1dc)+_0x10a00a);}}),_0x50a035[_0x35b723(0x1e2)](sortFoldersFirst);};router['get']('',verifyTokenOptional,async(_0x1eb854,_0x19dcb0)=>{const _0x127ea9=a15_0x434eb8,_0x16948c=path[_0x127ea9(0x1ce)](path[_0x127ea9(0x1d8)](require['main'][_0x127ea9(0x1c6)]),_0x127ea9(0x1d9)),_0xd1fcbd=JSON[_0x127ea9(0x1b9)](fs['readFileSync'](_0x16948c,_0x127ea9(0x1b6))),_0x3d404e=_0x1eb854[_0x127ea9(0x1df)][_0x127ea9(0x1d0)];let _0x5ad586=_0xd1fcbd[_0x127ea9(0x1c2)];_0x3d404e===_0x127ea9(0x1dd)&&(_0x5ad586=_0xd1fcbd[_0x127ea9(0x1e5)]);console['log']('in\x20listFolderStructure\x20folderLocation='+_0x5ad586+_0x127ea9(0x1cd)+show_folders+_0x127ea9(0x1ad)+config['cvjs_debug']);if(_0x1eb854['user']){let _0x3d265a;try{const [_0x4c9be5]=await conn[_0x127ea9(0x1b7)]()[_0x127ea9(0x1bb)](_0x127ea9(0x1d1),[_0x1eb854['user']['email']]);_0x4c9be5[_0x127ea9(0x1cb)]>0x0&&(_0x3d265a=_0x4c9be5[0x0]);}catch(_0x1f9035){console[_0x127ea9(0x1bf)]({'err':_0x1f9035}),_0x19dcb0[_0x127ea9(0x1e0)](0x1f4)[_0x127ea9(0x1db)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}if(!_0x3d265a){_0x19dcb0[_0x127ea9(0x1e0)](0x191)[_0x127ea9(0x1db)]({'error':'Invalid\x20user'});return;}_0x3d265a[_0x127ea9(0x1ae)]===_0x127ea9(0x1da)&&(_0x5ad586=_0xd1fcbd[_0x127ea9(0x1e5)]);let _0x517938=_0x3d265a[_0x127ea9(0x1ab)];if(!_0x517938){_0x517938=randomUUID();try{await conn[_0x127ea9(0x1b7)]()[_0x127ea9(0x1bb)](_0x127ea9(0x1d6),[_0x517938,_0x1eb854[_0x127ea9(0x1c3)][_0x127ea9(0x1af)]]);}catch(_0x22dedf){console[_0x127ea9(0x1bf)]({'err':_0x22dedf}),_0x19dcb0[_0x127ea9(0x1e0)](0x1f4)[_0x127ea9(0x1db)]({'error':_0x127ea9(0x1b2)});return;}}const _0x298edc=_0x127ea9(0x1e6)+_0x517938;!fs[_0x127ea9(0x1bd)](_0x298edc)&&fs[_0x127ea9(0x1ac)](_0x298edc);const _0x4e67a5=path[_0x127ea9(0x1b5)](_0x298edc),_0x3d89e1=listFolderStructure(_0x4e67a5);!fs[_0x127ea9(0x1bd)](_0x5ad586)&&fs[_0x127ea9(0x1ac)](_0x5ad586),dirs=[{'own':!![],'name':_0x127ea9(0x1ca),'path':_0x298edc,'isFolder':!![],'children':_0x3d89e1},...listFolderStructure(_0x5ad586)],_0x19dcb0['send'](dirs);}else!fs['existsSync'](_0x5ad586)&&fs[_0x127ea9(0x1ac)](_0x5ad586),_0x19dcb0['send'](listFolderStructure(_0x5ad586));}),module[a15_0x434eb8(0x1c9)]=router;
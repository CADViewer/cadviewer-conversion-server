function a15_0x2774(){const _0x2c463d=['user','forEach','./uploads','loginFeatureEnabled','main','express','query','readFileSync','mkdirSync','isDirectory','promise','push','./uploads/','existsSync','Invalid\x20user','log','folderLocation','send','6443073WSlbLK','MY\x20FOLDER','cvhs_debug:','exports','size','mtime','1GfLKAk','folderLocationDemoUser','3024215rCHlIB','status','parse','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`email`\x20=\x20?','1673222QZfODN','3751656DuuKPA','in\x20listFolderStructure\x20folderLocation=','get','path','3bGiXBa','dirname','folder_name','../libs/jwt','├──\x20','36uvltJu','3812316HEErjm','Router','birthtime','CADViewer_config.json','filename','email','length','admin','../CADViewer_config.json','2710980buqtGy','execute','└──\x20','sort','2638570wogNUH','join','children','Error!\x20Something\x20went\x20wrong.','verifyTokenOptional','\x20show_folders:','json','cvjs_debug','readdirSync'];a15_0x2774=function(){return _0x2c463d;};return a15_0x2774();}const a15_0x2e1c9b=a15_0xa7e6;function a15_0xa7e6(_0x105e17,_0x2905f3){const _0x277488=a15_0x2774();return a15_0xa7e6=function(_0xa7e6f8,_0x11465c){_0xa7e6f8=_0xa7e6f8-0x171;let _0x41bcdc=_0x277488[_0xa7e6f8];return _0x41bcdc;},a15_0xa7e6(_0x105e17,_0x2905f3);}(function(_0x315ebf,_0x36f01d){const _0x20abd7=a15_0xa7e6,_0x29d31d=_0x315ebf();while(!![]){try{const _0x432427=parseInt(_0x20abd7(0x19a))/0x1*(-parseInt(_0x20abd7(0x1a0))/0x2)+parseInt(_0x20abd7(0x1a5))/0x3*(-parseInt(_0x20abd7(0x1ab))/0x4)+-parseInt(_0x20abd7(0x19c))/0x5+parseInt(_0x20abd7(0x175))/0x6+parseInt(_0x20abd7(0x194))/0x7+parseInt(_0x20abd7(0x1a1))/0x8+-parseInt(_0x20abd7(0x1aa))/0x9*(-parseInt(_0x20abd7(0x179))/0xa);if(_0x432427===_0x36f01d)break;else _0x29d31d['push'](_0x29d31d['shift']());}catch(_0x19d0a5){_0x29d31d['push'](_0x29d31d['shift']());}}}(a15_0x2774,0x7a969));const fs=require('fs'),path=require(a15_0x2e1c9b(0x1a4)),config=require(a15_0x2e1c9b(0x174)),verifyTokenOptional=require(a15_0x2e1c9b(0x1a8))[a15_0x2e1c9b(0x17d)],show_folders=![],express=require(a15_0x2e1c9b(0x187)),router=express[a15_0x2e1c9b(0x1ac)](),conn=require('../libs/mysql'),{randomUUID}=require('crypto'),dir=a15_0x2e1c9b(0x184);!fs[a15_0x2e1c9b(0x18f)](dir)&&fs['mkdirSync'](dir);const sortFoldersFirst=(_0x135228,_0x16b9c0)=>{const _0x445ba6=a15_0x2e1c9b;if(_0x135228[_0x445ba6(0x17b)]&&!_0x16b9c0[_0x445ba6(0x17b)])return-0x1;else return!_0x135228[_0x445ba6(0x17b)]&&_0x16b9c0[_0x445ba6(0x17b)]?0x1:0x0;},listFolderStructure=(_0x215172,_0x8bc541='')=>{const _0x255bda=a15_0x2e1c9b,_0x13cebc=fs[_0x255bda(0x181)](_0x215172),_0xa4187c=[];return _0x13cebc[_0x255bda(0x183)](_0x3c855a=>{const _0x1516f6=_0x255bda,_0x10b90d=path[_0x1516f6(0x17a)](_0x215172,_0x3c855a),_0x38d061=fs['statSync'](_0x10b90d);if(_0x38d061[_0x1516f6(0x18b)]()){if(config['cvjs_debug']&&show_folders)console[_0x1516f6(0x191)](_0x8bc541+_0x1516f6(0x177)+_0x3c855a);const _0x3f314f=listFolderStructure(_0x10b90d,_0x8bc541+'\x20\x20\x20');_0xa4187c[_0x1516f6(0x18d)]({'name':_0x3c855a,'path':_0x10b90d,'size':_0x38d061[_0x1516f6(0x198)],'created':_0x38d061[_0x1516f6(0x1ad)],'modified':_0x38d061[_0x1516f6(0x199)],'isFolder':!![],'children':_0x3f314f});}else{_0xa4187c[_0x1516f6(0x18d)]({'name':_0x3c855a,'path':_0x10b90d,'size':_0x38d061['size'],'created':_0x38d061[_0x1516f6(0x1ad)],'modified':_0x38d061[_0x1516f6(0x199)],'isFolder':![]});if(config[_0x1516f6(0x180)]&&show_folders)console[_0x1516f6(0x191)](_0x8bc541+_0x1516f6(0x1a9)+_0x3c855a);}}),_0xa4187c[_0x255bda(0x178)](sortFoldersFirst);};router[a15_0x2e1c9b(0x1a3)]('',verifyTokenOptional,async(_0x53ab4c,_0x36c7cc)=>{const _0x28e226=a15_0x2e1c9b,_0x586c07=path[_0x28e226(0x17a)](path[_0x28e226(0x1a6)](require[_0x28e226(0x186)][_0x28e226(0x1af)]),_0x28e226(0x1ae)),_0xb51c14=JSON[_0x28e226(0x19e)](fs[_0x28e226(0x189)](_0x586c07,'utf8')),_0x67b6d5=_0x53ab4c[_0x28e226(0x188)][_0x28e226(0x185)];let _0x3f8d74=_0xb51c14[_0x28e226(0x19b)];_0x67b6d5==='false'&&(_0x3f8d74=_0xb51c14['folderLocation']);console['log'](_0x28e226(0x1a2)+_0x3f8d74+_0x28e226(0x17e)+show_folders+_0x28e226(0x196)+config['cvjs_debug']);if(_0x53ab4c[_0x28e226(0x182)]){let _0x4494ae;try{const [_0xebaf72]=await conn[_0x28e226(0x18c)]()[_0x28e226(0x176)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?',[_0x53ab4c[_0x28e226(0x182)][_0x28e226(0x171)]]);_0xebaf72[_0x28e226(0x172)]>0x0&&(_0x4494ae=_0xebaf72[0x0]);}catch(_0xf718c7){console[_0x28e226(0x191)]({'err':_0xf718c7}),_0x36c7cc[_0x28e226(0x19d)](0x1f4)['json']({'error':_0x28e226(0x17c)});return;}if(!_0x4494ae){_0x36c7cc[_0x28e226(0x19d)](0x191)[_0x28e226(0x17f)]({'error':_0x28e226(0x190)});return;}_0x4494ae['role']===_0x28e226(0x173)&&(_0x3f8d74=_0xb51c14[_0x28e226(0x192)]);let _0x26543c=_0x4494ae[_0x28e226(0x1a7)];if(!_0x26543c){_0x26543c=randomUUID();try{await conn[_0x28e226(0x18c)]()[_0x28e226(0x176)](_0x28e226(0x19f),[_0x26543c,_0x53ab4c['user'][_0x28e226(0x171)]]);}catch(_0x5b3c54){console[_0x28e226(0x191)]({'err':_0x5b3c54}),_0x36c7cc[_0x28e226(0x19d)](0x1f4)[_0x28e226(0x17f)]({'error':_0x28e226(0x17c)});return;}}const _0x3d0140=_0x28e226(0x18e)+_0x26543c;!fs[_0x28e226(0x18f)](_0x3d0140)&&fs['mkdirSync'](_0x3d0140);const _0x3cfacf=path['resolve'](_0x3d0140),_0x16e945=listFolderStructure(_0x3cfacf);!fs[_0x28e226(0x18f)](_0x3f8d74)&&fs[_0x28e226(0x18a)](_0x3f8d74),dirs=[{'own':!![],'name':_0x28e226(0x195),'path':_0x3d0140,'isFolder':!![],'children':_0x16e945},...listFolderStructure(_0x3f8d74)],_0x36c7cc['send'](dirs);}else!fs[_0x28e226(0x18f)](_0x3f8d74)&&fs['mkdirSync'](_0x3f8d74),_0x36c7cc[_0x28e226(0x193)](listFolderStructure(_0x3f8d74));}),module[a15_0x2e1c9b(0x197)]=router;
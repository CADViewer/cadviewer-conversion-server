const a16_0x5262ab=a16_0x5454;(function(_0x3ebcfa,_0x4d280d){const _0x1d65e6=a16_0x5454,_0x58a737=_0x3ebcfa();while(!![]){try{const _0x46dee9=parseInt(_0x1d65e6(0x9e))/0x1+parseInt(_0x1d65e6(0x9b))/0x2+parseInt(_0x1d65e6(0x70))/0x3*(-parseInt(_0x1d65e6(0x66))/0x4)+parseInt(_0x1d65e6(0x94))/0x5*(-parseInt(_0x1d65e6(0x8b))/0x6)+parseInt(_0x1d65e6(0x93))/0x7*(parseInt(_0x1d65e6(0x81))/0x8)+-parseInt(_0x1d65e6(0x68))/0x9*(parseInt(_0x1d65e6(0x95))/0xa)+-parseInt(_0x1d65e6(0x88))/0xb*(-parseInt(_0x1d65e6(0x9d))/0xc);if(_0x46dee9===_0x4d280d)break;else _0x58a737['push'](_0x58a737['shift']());}catch(_0x53b99e){_0x58a737['push'](_0x58a737['shift']());}}}(a16_0x22c0,0x99baa));const fs=require('fs'),path=require(a16_0x5262ab(0x72)),config=require(a16_0x5262ab(0x71)),verifyTokenOptional=require(a16_0x5262ab(0x6b))[a16_0x5262ab(0x76)],show_folders=![],express=require(a16_0x5262ab(0xa2)),router=express['Router'](),conn=require(a16_0x5262ab(0xa4)),{randomUUID}=require('crypto'),dir=a16_0x5262ab(0x7f);!fs[a16_0x5262ab(0xa1)](dir)&&fs[a16_0x5262ab(0x8f)](dir);function a16_0x5454(_0x29b960,_0x3f602f){const _0x22c056=a16_0x22c0();return a16_0x5454=function(_0x54540f,_0x20087f){_0x54540f=_0x54540f-0x66;let _0x2dc17e=_0x22c056[_0x54540f];return _0x2dc17e;},a16_0x5454(_0x29b960,_0x3f602f);}function a16_0x22c0(){const _0x20294c=['303499CDVVFg','5gBlykh','10olBngz','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?','get','admin','user','email','2301516kVbXWE','false','36BdTWFT','186040BdgRll','readdirSync','isDirectory','existsSync','express','Invalid\x20user','../libs/mysql','8900lMyNNL','folderLocation','6234597mXxPnG','in\x20listFolderStructure\x20folderLocation=','role','../libs/jwt','folder_name','exports','children','json','210LACDeD','../CADViewer_config.json','path','mtime','execute','readFileSync','verifyTokenOptional','forEach','join','status','Error!\x20Something\x20went\x20wrong.','push','log','main','send','./uploads','birthtime','32YRvDXs','size','folderLocationDemoUser','dirname','\x20show_folders:','resolve','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`email`\x20=\x20?','574321bXigWl','CADViewer_config.json','utf8','1132212NmCsOF','cvjs_debug','promise','\x20\x20\x20','mkdirSync','loginFeatureEnabled','statSync','filename'];a16_0x22c0=function(){return _0x20294c;};return a16_0x22c0();}const sortFoldersFirst=(_0xc4ce8e,_0x10cb92)=>{const _0x5dbaaf=a16_0x5262ab;if(_0xc4ce8e[_0x5dbaaf(0x6e)]&&!_0x10cb92['children'])return-0x1;else return!_0xc4ce8e[_0x5dbaaf(0x6e)]&&_0x10cb92[_0x5dbaaf(0x6e)]?0x1:0x0;},listFolderStructure=(_0x54dcef,_0x559e6e='')=>{const _0x4eda86=a16_0x5262ab,_0x3fb8e1=fs[_0x4eda86(0x9f)](_0x54dcef),_0x5b1ac5=[];return _0x3fb8e1[_0x4eda86(0x77)](_0x20e325=>{const _0x6737a=_0x4eda86,_0x418db5=path[_0x6737a(0x78)](_0x54dcef,_0x20e325),_0x3b7579=fs[_0x6737a(0x91)](_0x418db5);if(_0x3b7579[_0x6737a(0xa0)]()){if(config['cvjs_debug']&&show_folders)console[_0x6737a(0x7c)](_0x559e6e+'└──\x20'+_0x20e325);const _0x35a1e0=listFolderStructure(_0x418db5,_0x559e6e+_0x6737a(0x8e));_0x5b1ac5['push']({'name':_0x20e325,'path':_0x418db5,'size':_0x3b7579[_0x6737a(0x82)],'created':_0x3b7579[_0x6737a(0x80)],'modified':_0x3b7579['mtime'],'isFolder':!![],'children':_0x35a1e0});}else{_0x5b1ac5[_0x6737a(0x7b)]({'name':_0x20e325,'path':_0x418db5,'size':_0x3b7579[_0x6737a(0x82)],'created':_0x3b7579[_0x6737a(0x80)],'modified':_0x3b7579[_0x6737a(0x73)],'isFolder':![]});if(config[_0x6737a(0x8c)]&&show_folders)console[_0x6737a(0x7c)](_0x559e6e+'├──\x20'+_0x20e325);}}),_0x5b1ac5['sort'](sortFoldersFirst);};router[a16_0x5262ab(0x97)]('',verifyTokenOptional,async(_0x1b8a15,_0x5419fd)=>{const _0x5bb73b=a16_0x5262ab,_0x2efd01=path[_0x5bb73b(0x78)](path[_0x5bb73b(0x84)](require[_0x5bb73b(0x7d)][_0x5bb73b(0x92)]),_0x5bb73b(0x89)),_0x560ad0=JSON['parse'](fs[_0x5bb73b(0x75)](_0x2efd01,_0x5bb73b(0x8a))),_0x377785=_0x1b8a15['query'][_0x5bb73b(0x90)];let _0x3160c6=_0x560ad0[_0x5bb73b(0x83)];_0x377785===_0x5bb73b(0x9c)&&(_0x3160c6=_0x560ad0[_0x5bb73b(0x67)]);console[_0x5bb73b(0x7c)](_0x5bb73b(0x69)+_0x3160c6+_0x5bb73b(0x85)+show_folders+'cvhs_debug:'+config[_0x5bb73b(0x8c)]);if(_0x1b8a15['user']){let _0x19cb1e;try{const [_0xb7c56f]=await conn[_0x5bb73b(0x8d)]()[_0x5bb73b(0x74)](_0x5bb73b(0x96),[_0x1b8a15[_0x5bb73b(0x99)][_0x5bb73b(0x9a)]]);_0xb7c56f['length']>0x0&&(_0x19cb1e=_0xb7c56f[0x0]);}catch(_0x1c80cb){console['log']({'err':_0x1c80cb}),_0x5419fd['status'](0x1f4)[_0x5bb73b(0x6f)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}if(!_0x19cb1e){_0x5419fd[_0x5bb73b(0x79)](0x191)[_0x5bb73b(0x6f)]({'error':_0x5bb73b(0xa3)});return;}_0x19cb1e[_0x5bb73b(0x6a)]===_0x5bb73b(0x98)&&(_0x3160c6=_0x560ad0[_0x5bb73b(0x67)]);let _0x2ea03b=_0x19cb1e[_0x5bb73b(0x6c)];if(!_0x2ea03b){_0x2ea03b=randomUUID();try{await conn[_0x5bb73b(0x8d)]()[_0x5bb73b(0x74)](_0x5bb73b(0x87),[_0x2ea03b,_0x1b8a15[_0x5bb73b(0x99)][_0x5bb73b(0x9a)]]);}catch(_0x4c01c5){console['log']({'err':_0x4c01c5}),_0x5419fd[_0x5bb73b(0x79)](0x1f4)['json']({'error':_0x5bb73b(0x7a)});return;}}const _0x211a78='./uploads/'+_0x2ea03b;!fs[_0x5bb73b(0xa1)](_0x211a78)&&fs[_0x5bb73b(0x8f)](_0x211a78);const _0x42aab5=path[_0x5bb73b(0x86)](_0x211a78),_0x3cf9a6=listFolderStructure(_0x42aab5);!fs[_0x5bb73b(0xa1)](_0x3160c6)&&fs[_0x5bb73b(0x8f)](_0x3160c6),dirs=[{'own':!![],'name':'MY\x20FOLDER','path':_0x211a78,'isFolder':!![],'children':_0x3cf9a6},...listFolderStructure(_0x3160c6)],_0x5419fd[_0x5bb73b(0x7e)](dirs);}else!fs[_0x5bb73b(0xa1)](_0x3160c6)&&fs[_0x5bb73b(0x8f)](_0x3160c6),_0x5419fd[_0x5bb73b(0x7e)](listFolderStructure(_0x3160c6));}),module[a16_0x5262ab(0x6d)]=router;
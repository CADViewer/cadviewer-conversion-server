const a15_0x26a449=a15_0x1fd5;function a15_0x2205(){const _0x51fc0e=['\x20show_folders:','path','express','statSync','Router','3842223scpsab','size','readFileSync','167110aHwCsG','admin','../libs/jwt','query','push','false','role','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`email`\x20=\x20?','email','get','exports','2311284cCQEfn','loginFeatureEnabled','main','folder_name','forEach','3218880NrSFpv','mtime','verifyTokenOptional','└──\x20','1451055fSLoUv','folderLocation','180733ZaGCMk','json','folderLocationDemoUser','cvhs_debug:','77864QQptPu','├──\x20','./uploads','400scBUhv','filename','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?','639skBMbu','user','dirname','execute','crypto','cvjs_debug','promise','log','../libs/mysql','readdirSync','../CADViewer_config.json','4ijSFSu','send','MY\x20FOLDER','mkdirSync','status','join','in\x20listFolderStructure\x20folderLocation=','./uploads/','parse','children','existsSync','Invalid\x20user','CADViewer_config.json','Error!\x20Something\x20went\x20wrong.','32CSaKwW','birthtime'];a15_0x2205=function(){return _0x51fc0e;};return a15_0x2205();}(function(_0x54d48c,_0x21013d){const _0x162568=a15_0x1fd5,_0x1fae3f=_0x54d48c();while(!![]){try{const _0x14fecb=-parseInt(_0x162568(0xf3))/0x1*(-parseInt(_0x162568(0xd4))/0x2)+-parseInt(_0x162568(0x108))/0x3+-parseInt(_0x162568(0xe5))/0x4*(-parseInt(_0x162568(0x111))/0x5)+-parseInt(_0x162568(0x10d))/0x6+parseInt(_0x162568(0x113))/0x7*(parseInt(_0x162568(0xd7))/0x8)+-parseInt(_0x162568(0xda))/0x9*(parseInt(_0x162568(0xfd))/0xa)+parseInt(_0x162568(0xfa))/0xb;if(_0x14fecb===_0x21013d)break;else _0x1fae3f['push'](_0x1fae3f['shift']());}catch(_0x11c9f2){_0x1fae3f['push'](_0x1fae3f['shift']());}}}(a15_0x2205,0xa6b89));const fs=require('fs'),path=require(a15_0x26a449(0xf6)),config=require(a15_0x26a449(0xe4)),verifyTokenOptional=require(a15_0x26a449(0xff))[a15_0x26a449(0x10f)],show_folders=![],express=require(a15_0x26a449(0xf7)),router=express[a15_0x26a449(0xf9)](),conn=require(a15_0x26a449(0xe2)),{randomUUID}=require(a15_0x26a449(0xde)),dir=a15_0x26a449(0xd6);!fs[a15_0x26a449(0xef)](dir)&&fs[a15_0x26a449(0xe8)](dir);const sortFoldersFirst=(_0x1df1b2,_0x32c7db)=>{const _0xa33f16=a15_0x26a449;if(_0x1df1b2[_0xa33f16(0xee)]&&!_0x32c7db['children'])return-0x1;else return!_0x1df1b2[_0xa33f16(0xee)]&&_0x32c7db[_0xa33f16(0xee)]?0x1:0x0;},listFolderStructure=(_0x1a6037,_0x12dfa5='')=>{const _0x3ce421=a15_0x26a449,_0xef643a=fs[_0x3ce421(0xe3)](_0x1a6037),_0x548689=[];return _0xef643a[_0x3ce421(0x10c)](_0x476053=>{const _0x3445e4=_0x3ce421,_0x46b9b6=path['join'](_0x1a6037,_0x476053),_0x39c26f=fs[_0x3445e4(0xf8)](_0x46b9b6);if(_0x39c26f['isDirectory']()){if(config['cvjs_debug']&&show_folders)console[_0x3445e4(0xe1)](_0x12dfa5+_0x3445e4(0x110)+_0x476053);const _0x234060=listFolderStructure(_0x46b9b6,_0x12dfa5+'\x20\x20\x20');_0x548689[_0x3445e4(0x101)]({'name':_0x476053,'path':_0x46b9b6,'size':_0x39c26f[_0x3445e4(0xfb)],'created':_0x39c26f[_0x3445e4(0xf4)],'modified':_0x39c26f[_0x3445e4(0x10e)],'isFolder':!![],'children':_0x234060});}else{_0x548689[_0x3445e4(0x101)]({'name':_0x476053,'path':_0x46b9b6,'size':_0x39c26f[_0x3445e4(0xfb)],'created':_0x39c26f[_0x3445e4(0xf4)],'modified':_0x39c26f[_0x3445e4(0x10e)],'isFolder':![]});if(config[_0x3445e4(0xdf)]&&show_folders)console[_0x3445e4(0xe1)](_0x12dfa5+_0x3445e4(0xd5)+_0x476053);}}),_0x548689['sort'](sortFoldersFirst);};function a15_0x1fd5(_0x2df384,_0x2ca166){const _0x220584=a15_0x2205();return a15_0x1fd5=function(_0x1fd5ee,_0xeb950a){_0x1fd5ee=_0x1fd5ee-0xd2;let _0x42ff6f=_0x220584[_0x1fd5ee];return _0x42ff6f;},a15_0x1fd5(_0x2df384,_0x2ca166);}router[a15_0x26a449(0x106)]('',verifyTokenOptional,async(_0x2983ed,_0x1ae42e)=>{const _0x17b4f8=a15_0x26a449,_0x3760ee=path[_0x17b4f8(0xea)](path[_0x17b4f8(0xdc)](require[_0x17b4f8(0x10a)][_0x17b4f8(0xd8)]),_0x17b4f8(0xf1)),_0x1fa799=JSON[_0x17b4f8(0xed)](fs[_0x17b4f8(0xfc)](_0x3760ee,'utf8')),_0x2161c3=_0x2983ed[_0x17b4f8(0x100)][_0x17b4f8(0x109)];let _0x4d17f2=_0x1fa799[_0x17b4f8(0xd2)];_0x2161c3===_0x17b4f8(0x102)&&(_0x4d17f2=_0x1fa799['folderLocation']);console[_0x17b4f8(0xe1)](_0x17b4f8(0xeb)+_0x4d17f2+_0x17b4f8(0xf5)+show_folders+_0x17b4f8(0xd3)+config[_0x17b4f8(0xdf)]);if(_0x2983ed[_0x17b4f8(0xdb)]){let _0x3095d8;try{const [_0x18e46a]=await conn[_0x17b4f8(0xe0)]()[_0x17b4f8(0xdd)](_0x17b4f8(0xd9),[_0x2983ed['user'][_0x17b4f8(0x105)]]);_0x18e46a['length']>0x0&&(_0x3095d8=_0x18e46a[0x0]);}catch(_0x2cbd81){console[_0x17b4f8(0xe1)]({'err':_0x2cbd81}),_0x1ae42e['status'](0x1f4)[_0x17b4f8(0x114)]({'error':_0x17b4f8(0xf2)});return;}if(!_0x3095d8){_0x1ae42e[_0x17b4f8(0xe9)](0x191)[_0x17b4f8(0x114)]({'error':_0x17b4f8(0xf0)});return;}_0x3095d8[_0x17b4f8(0x103)]===_0x17b4f8(0xfe)&&(_0x4d17f2=_0x1fa799[_0x17b4f8(0x112)]);let _0x26619d=_0x3095d8[_0x17b4f8(0x10b)];if(!_0x26619d){_0x26619d=randomUUID();try{await conn['promise']()[_0x17b4f8(0xdd)](_0x17b4f8(0x104),[_0x26619d,_0x2983ed[_0x17b4f8(0xdb)][_0x17b4f8(0x105)]]);}catch(_0x19849c){console[_0x17b4f8(0xe1)]({'err':_0x19849c}),_0x1ae42e[_0x17b4f8(0xe9)](0x1f4)[_0x17b4f8(0x114)]({'error':_0x17b4f8(0xf2)});return;}}const _0x5d4659=_0x17b4f8(0xec)+_0x26619d;!fs[_0x17b4f8(0xef)](_0x5d4659)&&fs['mkdirSync'](_0x5d4659);const _0x3d2dfe=path['resolve'](_0x5d4659),_0x1d7001=listFolderStructure(_0x3d2dfe);!fs[_0x17b4f8(0xef)](_0x4d17f2)&&fs[_0x17b4f8(0xe8)](_0x4d17f2),dirs=[{'own':!![],'name':_0x17b4f8(0xe7),'path':_0x5d4659,'isFolder':!![],'children':_0x1d7001},...listFolderStructure(_0x4d17f2)],_0x1ae42e['send'](dirs);}else!fs[_0x17b4f8(0xef)](_0x4d17f2)&&fs[_0x17b4f8(0xe8)](_0x4d17f2),_0x1ae42e[_0x17b4f8(0xe6)](listFolderStructure(_0x4d17f2));}),module[a15_0x26a449(0x107)]=router;
function a16_0x18a4(){const _0x25bbc1=['Error!\x20Something\x20went\x20wrong.','role','readFileSync','isDirectory','in\x20listFolderStructure\x20folderLocation=','6151140mpTEqq','folderLocationDemoUser','admin','Invalid\x20user','execute','\x20\x20\x20','crypto','\x20show_folders:','user','./uploads/','1660jqcvQw','folderLocation','birthtime','send','children','8091132IjMevU','dirname','forEach','promise','path','720WedvKD','push','Router','mtime','statSync','8NjxTZA','exports','505880WwnuSN','size','false','CADViewer_config.json','get','cvhs_debug:','join','json','./uploads','3556280WSgVJv','../libs/jwt','7100770yXsFXx','express','3773037sYmLos','main','folder_name','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?','parse','existsSync','mkdirSync','status','length','log','filename','211SwAQBC','../libs/mysql','├──\x20','resolve','cvjs_debug','└──\x20','readdirSync'];a16_0x18a4=function(){return _0x25bbc1;};return a16_0x18a4();}const a16_0x374cd3=a16_0x2bda;(function(_0x4c114e,_0x16767c){const _0x57476c=a16_0x2bda,_0x2826eb=_0x4c114e();while(!![]){try{const _0x1b1850=-parseInt(_0x57476c(0x122))/0x1*(-parseInt(_0x57476c(0x138))/0x2)+-parseInt(_0x57476c(0x117))/0x3+-parseInt(_0x57476c(0x113))/0x4+-parseInt(_0x57476c(0x115))/0x5+-parseInt(_0x57476c(0x12e))/0x6+-parseInt(_0x57476c(0x13d))/0x7*(-parseInt(_0x57476c(0x108))/0x8)+parseInt(_0x57476c(0x103))/0x9*(parseInt(_0x57476c(0x10a))/0xa);if(_0x1b1850===_0x16767c)break;else _0x2826eb['push'](_0x2826eb['shift']());}catch(_0xd8a802){_0x2826eb['push'](_0x2826eb['shift']());}}}(a16_0x18a4,0xbfe21));const fs=require('fs'),path=require(a16_0x374cd3(0x141)),config=require('../CADViewer_config.json'),verifyTokenOptional=require(a16_0x374cd3(0x114))['verifyTokenOptional'],show_folders=![],express=require(a16_0x374cd3(0x116)),router=express[a16_0x374cd3(0x105)](),conn=require(a16_0x374cd3(0x123)),{randomUUID}=require(a16_0x374cd3(0x134)),dir=a16_0x374cd3(0x112);function a16_0x2bda(_0x47d02b,_0x40cb27){const _0x18a460=a16_0x18a4();return a16_0x2bda=function(_0x2bdaf1,_0x261f99){_0x2bdaf1=_0x2bdaf1-0x103;let _0x3a9efe=_0x18a460[_0x2bdaf1];return _0x3a9efe;},a16_0x2bda(_0x47d02b,_0x40cb27);}!fs[a16_0x374cd3(0x11c)](dir)&&fs[a16_0x374cd3(0x11d)](dir);const sortFoldersFirst=(_0x230693,_0x1978ba)=>{const _0x59fb2e=a16_0x374cd3;if(_0x230693[_0x59fb2e(0x13c)]&&!_0x1978ba[_0x59fb2e(0x13c)])return-0x1;else return!_0x230693[_0x59fb2e(0x13c)]&&_0x1978ba[_0x59fb2e(0x13c)]?0x1:0x0;},listFolderStructure=(_0x298155,_0x163095='')=>{const _0xb1dfe8=a16_0x374cd3,_0x3e74f6=fs[_0xb1dfe8(0x128)](_0x298155),_0x30810a=[];return _0x3e74f6[_0xb1dfe8(0x13f)](_0x333a44=>{const _0x1faa84=_0xb1dfe8,_0x391cc6=path[_0x1faa84(0x110)](_0x298155,_0x333a44),_0xcf4980=fs[_0x1faa84(0x107)](_0x391cc6);if(_0xcf4980[_0x1faa84(0x12c)]()){if(config[_0x1faa84(0x126)]&&show_folders)console['log'](_0x163095+_0x1faa84(0x127)+_0x333a44);const _0x2080d7=listFolderStructure(_0x391cc6,_0x163095+_0x1faa84(0x133));_0x30810a[_0x1faa84(0x104)]({'name':_0x333a44,'path':_0x391cc6,'size':_0xcf4980[_0x1faa84(0x10b)],'created':_0xcf4980[_0x1faa84(0x13a)],'modified':_0xcf4980['mtime'],'isFolder':!![],'children':_0x2080d7});}else{_0x30810a[_0x1faa84(0x104)]({'name':_0x333a44,'path':_0x391cc6,'size':_0xcf4980[_0x1faa84(0x10b)],'created':_0xcf4980[_0x1faa84(0x13a)],'modified':_0xcf4980[_0x1faa84(0x106)],'isFolder':![]});if(config[_0x1faa84(0x126)]&&show_folders)console[_0x1faa84(0x120)](_0x163095+_0x1faa84(0x124)+_0x333a44);}}),_0x30810a['sort'](sortFoldersFirst);};router[a16_0x374cd3(0x10e)]('',verifyTokenOptional,async(_0x146ed8,_0x189518)=>{const _0x3c2971=a16_0x374cd3,_0x781e47=path[_0x3c2971(0x110)](path[_0x3c2971(0x13e)](require[_0x3c2971(0x118)][_0x3c2971(0x121)]),_0x3c2971(0x10d)),_0x3eb2fd=JSON[_0x3c2971(0x11b)](fs[_0x3c2971(0x12b)](_0x781e47,'utf8')),_0x1ee8a1=_0x146ed8['query']['loginFeatureEnabled'];let _0xd23639=_0x3eb2fd[_0x3c2971(0x12f)];_0x1ee8a1===_0x3c2971(0x10c)&&(_0xd23639=_0x3eb2fd[_0x3c2971(0x139)]);console[_0x3c2971(0x120)](_0x3c2971(0x12d)+_0xd23639+_0x3c2971(0x135)+show_folders+_0x3c2971(0x10f)+config[_0x3c2971(0x126)]);if(_0x146ed8['user']){let _0x18f9af;try{const [_0x537bd9]=await conn[_0x3c2971(0x140)]()[_0x3c2971(0x132)](_0x3c2971(0x11a),[_0x146ed8[_0x3c2971(0x136)]['email']]);_0x537bd9[_0x3c2971(0x11f)]>0x0&&(_0x18f9af=_0x537bd9[0x0]);}catch(_0x57025b){console[_0x3c2971(0x120)]({'err':_0x57025b}),_0x189518['status'](0x1f4)[_0x3c2971(0x111)]({'error':_0x3c2971(0x129)});return;}if(!_0x18f9af){_0x189518['status'](0x191)[_0x3c2971(0x111)]({'error':_0x3c2971(0x131)});return;}_0x18f9af[_0x3c2971(0x12a)]===_0x3c2971(0x130)&&(_0xd23639=_0x3eb2fd[_0x3c2971(0x139)]);let _0x10cab8=_0x18f9af[_0x3c2971(0x119)];if(!_0x10cab8){_0x10cab8=randomUUID();try{await conn['promise']()[_0x3c2971(0x132)]('UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`email`\x20=\x20?',[_0x10cab8,_0x146ed8[_0x3c2971(0x136)]['email']]);}catch(_0x314cba){console[_0x3c2971(0x120)]({'err':_0x314cba}),_0x189518[_0x3c2971(0x11e)](0x1f4)[_0x3c2971(0x111)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}}const _0x542075=_0x3c2971(0x137)+_0x10cab8;!fs['existsSync'](_0x542075)&&fs[_0x3c2971(0x11d)](_0x542075);const _0x1f95b9=path[_0x3c2971(0x125)](_0x542075),_0x153888=listFolderStructure(_0x1f95b9);!fs[_0x3c2971(0x11c)](_0xd23639)&&fs['mkdirSync'](_0xd23639),dirs=[{'own':!![],'name':'MY\x20FOLDER','path':_0x542075,'isFolder':!![],'children':_0x153888},...listFolderStructure(_0xd23639)],_0x189518['send'](dirs);}else!fs[_0x3c2971(0x11c)](_0xd23639)&&fs[_0x3c2971(0x11d)](_0xd23639),_0x189518[_0x3c2971(0x13b)](listFolderStructure(_0xd23639));}),module[a16_0x374cd3(0x109)]=router;
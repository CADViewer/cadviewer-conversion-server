function a15_0x9eb4(_0x207575,_0x58edbf){const _0x3339af=a15_0x3339();return a15_0x9eb4=function(_0x9eb425,_0x5b30c4){_0x9eb425=_0x9eb425-0x1cd;let _0x4d8c6b=_0x3339af[_0x9eb425];return _0x4d8c6b;},a15_0x9eb4(_0x207575,_0x58edbf);}const a15_0x3b81ca=a15_0x9eb4;(function(_0xd27526,_0x5360df){const _0x51459b=a15_0x9eb4,_0x1ed352=_0xd27526();while(!![]){try{const _0x3bf7b9=parseInt(_0x51459b(0x1da))/0x1*(parseInt(_0x51459b(0x1ed))/0x2)+-parseInt(_0x51459b(0x1d4))/0x3*(parseInt(_0x51459b(0x1e3))/0x4)+parseInt(_0x51459b(0x1e0))/0x5+-parseInt(_0x51459b(0x1ea))/0x6+parseInt(_0x51459b(0x1ce))/0x7+parseInt(_0x51459b(0x1d5))/0x8+-parseInt(_0x51459b(0x1fc))/0x9;if(_0x3bf7b9===_0x5360df)break;else _0x1ed352['push'](_0x1ed352['shift']());}catch(_0x2aa0a6){_0x1ed352['push'](_0x1ed352['shift']());}}}(a15_0x3339,0xdca56));function a15_0x3339(){const _0x39e660=['UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`email`\x20=\x20?','folderLocation','readdirSync','../libs/jwt','mkdirSync','existsSync','Router','Error!\x20Something\x20went\x20wrong.','status','email','log','main','11539485KfqHIC','folderLocationDemoUser','execute','parse','promise','birthtime','../CADViewer_config.json','cvjs_debug','\x20\x20\x20','send','cvhs_debug:','1953028MHqNwQ','CADViewer_config.json','isDirectory','children','utf8','MY\x20FOLDER','93849EYBLIM','5725712hmQLqL','size','└──\x20','exports','express','10rnAJqb','join','path','admin','resolve','readFileSync','7076550qGlqnG','json','in\x20listFolderStructure\x20folderLocation=','36rVEKPa','loginFeatureEnabled','./uploads/','folder_name','├──\x20','user','crypto','6053880sXALKJ','false','filename','213286qsSWTZ','../libs/mysql','mtime'];a15_0x3339=function(){return _0x39e660;};return a15_0x3339();}const fs=require('fs'),path=require(a15_0x3b81ca(0x1dc)),config=require(a15_0x3b81ca(0x202)),verifyTokenOptional=require(a15_0x3b81ca(0x1f3))['verifyTokenOptional'],show_folders=![],express=require(a15_0x3b81ca(0x1d9)),router=express[a15_0x3b81ca(0x1f6)](),conn=require(a15_0x3b81ca(0x1ee)),{randomUUID}=require(a15_0x3b81ca(0x1e9)),dir='./uploads';!fs['existsSync'](dir)&&fs[a15_0x3b81ca(0x1f4)](dir);const sortFoldersFirst=(_0x35e33c,_0x4efab0)=>{const _0x51d0ee=a15_0x3b81ca;if(_0x35e33c[_0x51d0ee(0x1d1)]&&!_0x4efab0[_0x51d0ee(0x1d1)])return-0x1;else return!_0x35e33c[_0x51d0ee(0x1d1)]&&_0x4efab0[_0x51d0ee(0x1d1)]?0x1:0x0;},listFolderStructure=(_0x1d702d,_0xc29ce3='')=>{const _0x2147a7=a15_0x3b81ca,_0x19732c=fs[_0x2147a7(0x1f2)](_0x1d702d),_0x49ebf6=[];return _0x19732c['forEach'](_0x121744=>{const _0x299e68=_0x2147a7,_0x13b3d8=path[_0x299e68(0x1db)](_0x1d702d,_0x121744),_0x8da686=fs['statSync'](_0x13b3d8);if(_0x8da686[_0x299e68(0x1d0)]()){if(config[_0x299e68(0x203)]&&show_folders)console['log'](_0xc29ce3+_0x299e68(0x1d7)+_0x121744);const _0xb154a=listFolderStructure(_0x13b3d8,_0xc29ce3+_0x299e68(0x204));_0x49ebf6['push']({'name':_0x121744,'path':_0x13b3d8,'size':_0x8da686[_0x299e68(0x1d6)],'created':_0x8da686[_0x299e68(0x201)],'modified':_0x8da686[_0x299e68(0x1ef)],'isFolder':!![],'children':_0xb154a});}else{_0x49ebf6['push']({'name':_0x121744,'path':_0x13b3d8,'size':_0x8da686[_0x299e68(0x1d6)],'created':_0x8da686[_0x299e68(0x201)],'modified':_0x8da686[_0x299e68(0x1ef)],'isFolder':![]});if(config[_0x299e68(0x203)]&&show_folders)console[_0x299e68(0x1fa)](_0xc29ce3+_0x299e68(0x1e7)+_0x121744);}}),_0x49ebf6['sort'](sortFoldersFirst);};router['get']('',verifyTokenOptional,async(_0x90c4f6,_0x585f0d)=>{const _0x4ba94f=a15_0x3b81ca,_0x354dcb=path[_0x4ba94f(0x1db)](path['dirname'](require[_0x4ba94f(0x1fb)][_0x4ba94f(0x1ec)]),_0x4ba94f(0x1cf)),_0x399639=JSON[_0x4ba94f(0x1ff)](fs[_0x4ba94f(0x1df)](_0x354dcb,_0x4ba94f(0x1d2))),_0x3825bb=_0x90c4f6['query'][_0x4ba94f(0x1e4)];let _0x2be2fe=_0x399639[_0x4ba94f(0x1fd)];_0x3825bb===_0x4ba94f(0x1eb)&&(_0x2be2fe=_0x399639[_0x4ba94f(0x1f1)]);console['log'](_0x4ba94f(0x1e2)+_0x2be2fe+'\x20show_folders:'+show_folders+_0x4ba94f(0x1cd)+config[_0x4ba94f(0x203)]);if(_0x90c4f6[_0x4ba94f(0x1e8)]){let _0x2ff8e5;try{const [_0x13ea6b]=await conn[_0x4ba94f(0x200)]()[_0x4ba94f(0x1fe)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?',[_0x90c4f6[_0x4ba94f(0x1e8)][_0x4ba94f(0x1f9)]]);_0x13ea6b['length']>0x0&&(_0x2ff8e5=_0x13ea6b[0x0]);}catch(_0x576d84){console[_0x4ba94f(0x1fa)]({'err':_0x576d84}),_0x585f0d[_0x4ba94f(0x1f8)](0x1f4)[_0x4ba94f(0x1e1)]({'error':_0x4ba94f(0x1f7)});return;}if(!_0x2ff8e5){_0x585f0d['status'](0x191)[_0x4ba94f(0x1e1)]({'error':'Invalid\x20user'});return;}_0x2ff8e5['role']===_0x4ba94f(0x1dd)&&(_0x2be2fe=_0x399639[_0x4ba94f(0x1f1)]);let _0x1ba239=_0x2ff8e5[_0x4ba94f(0x1e6)];if(!_0x1ba239){_0x1ba239=randomUUID();try{await conn[_0x4ba94f(0x200)]()[_0x4ba94f(0x1fe)](_0x4ba94f(0x1f0),[_0x1ba239,_0x90c4f6[_0x4ba94f(0x1e8)][_0x4ba94f(0x1f9)]]);}catch(_0x787d86){console[_0x4ba94f(0x1fa)]({'err':_0x787d86}),_0x585f0d[_0x4ba94f(0x1f8)](0x1f4)['json']({'error':'Error!\x20Something\x20went\x20wrong.'});return;}}const _0x56e4e2=_0x4ba94f(0x1e5)+_0x1ba239;!fs[_0x4ba94f(0x1f5)](_0x56e4e2)&&fs[_0x4ba94f(0x1f4)](_0x56e4e2);const _0x3ea54d=path[_0x4ba94f(0x1de)](_0x56e4e2),_0x28085f=listFolderStructure(_0x3ea54d);!fs[_0x4ba94f(0x1f5)](_0x2be2fe)&&fs[_0x4ba94f(0x1f4)](_0x2be2fe),dirs=[{'own':!![],'name':_0x4ba94f(0x1d3),'path':_0x56e4e2,'isFolder':!![],'children':_0x28085f},...listFolderStructure(_0x2be2fe)],_0x585f0d[_0x4ba94f(0x205)](dirs);}else!fs[_0x4ba94f(0x1f5)](_0x2be2fe)&&fs[_0x4ba94f(0x1f4)](_0x2be2fe),_0x585f0d[_0x4ba94f(0x205)](listFolderStructure(_0x2be2fe));}),module[a15_0x3b81ca(0x1d8)]=router;
function a15_0x53ed(_0x3e4854,_0x34fc92){const _0x14088a=a15_0x1408();return a15_0x53ed=function(_0x53ed77,_0x52bf0e){_0x53ed77=_0x53ed77-0x71;let _0x4b747e=_0x14088a[_0x53ed77];return _0x4b747e;},a15_0x53ed(_0x3e4854,_0x34fc92);}const a15_0x8dac30=a15_0x53ed;(function(_0x3b9e79,_0x2cfc30){const _0x726bb2=a15_0x53ed,_0x2c861=_0x3b9e79();while(!![]){try{const _0x3c958d=parseInt(_0x726bb2(0xa4))/0x1+parseInt(_0x726bb2(0xa6))/0x2*(parseInt(_0x726bb2(0xa1))/0x3)+-parseInt(_0x726bb2(0x7b))/0x4*(-parseInt(_0x726bb2(0x94))/0x5)+-parseInt(_0x726bb2(0x9c))/0x6+parseInt(_0x726bb2(0x98))/0x7*(parseInt(_0x726bb2(0x8f))/0x8)+parseInt(_0x726bb2(0xb0))/0x9*(-parseInt(_0x726bb2(0x99))/0xa)+-parseInt(_0x726bb2(0xa5))/0xb;if(_0x3c958d===_0x2cfc30)break;else _0x2c861['push'](_0x2c861['shift']());}catch(_0x41b7c0){_0x2c861['push'](_0x2c861['shift']());}}}(a15_0x1408,0xd3fd0));const fs=require('fs'),path=require(a15_0x8dac30(0x89)),config=require(a15_0x8dac30(0x90)),verifyTokenOptional=require(a15_0x8dac30(0x74))[a15_0x8dac30(0xaf)],show_folders=![],express=require(a15_0x8dac30(0x93)),router=express[a15_0x8dac30(0xab)](),conn=require(a15_0x8dac30(0xb1)),{randomUUID}=require(a15_0x8dac30(0x76)),dir=a15_0x8dac30(0x96);!fs[a15_0x8dac30(0x7f)](dir)&&fs[a15_0x8dac30(0x91)](dir);const sortFoldersFirst=(_0x1de549,_0x50db94)=>{const _0x49c0fa=a15_0x8dac30;if(_0x1de549['children']&&!_0x50db94['children'])return-0x1;else return!_0x1de549[_0x49c0fa(0xa8)]&&_0x50db94[_0x49c0fa(0xa8)]?0x1:0x0;},listFolderStructure=(_0x393af5,_0x1c7af1='')=>{const _0x5bb56f=a15_0x8dac30,_0x163edb=fs[_0x5bb56f(0x7e)](_0x393af5),_0x419e12=[];return _0x163edb[_0x5bb56f(0xa2)](_0x3d4173=>{const _0x11ee43=_0x5bb56f,_0x4109e5=path[_0x11ee43(0xa9)](_0x393af5,_0x3d4173),_0x1ef27a=fs[_0x11ee43(0x75)](_0x4109e5);if(_0x1ef27a[_0x11ee43(0x88)]()){if(config[_0x11ee43(0x81)]&&show_folders)console[_0x11ee43(0x83)](_0x1c7af1+_0x11ee43(0x7c)+_0x3d4173);const _0x39e466=listFolderStructure(_0x4109e5,_0x1c7af1+_0x11ee43(0x8c));_0x419e12[_0x11ee43(0x7d)]({'name':_0x3d4173,'path':_0x4109e5,'size':_0x1ef27a[_0x11ee43(0x8b)],'created':_0x1ef27a['birthtime'],'modified':_0x1ef27a['mtime'],'isFolder':!![],'children':_0x39e466});}else{_0x419e12[_0x11ee43(0x7d)]({'name':_0x3d4173,'path':_0x4109e5,'size':_0x1ef27a['size'],'created':_0x1ef27a[_0x11ee43(0x73)],'modified':_0x1ef27a[_0x11ee43(0x8d)],'isFolder':![]});if(config[_0x11ee43(0x81)]&&show_folders)console[_0x11ee43(0x83)](_0x1c7af1+_0x11ee43(0x9a)+_0x3d4173);}}),_0x419e12[_0x5bb56f(0x7a)](sortFoldersFirst);};function a15_0x1408(){const _0x5ae1c0=['731704UnjaOW','../CADViewer_config.json','mkdirSync','CADViewer_config.json','express','10pfBchz','false','./uploads','length','35GObUmo','13468400iQSrLQ','├──\x20','exports','1543002zBCNDv','cvhs_debug:','parse','folderLocation','filename','9903VEVsYx','forEach','send','1452747RcYejs','14558203ZdwKym','760MzgXCv','status','children','join','query','Router','execute','MY\x20FOLDER','readFileSync','verifyTokenOptional','9AXeUbD','../libs/mysql','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?','admin','promise','birthtime','../libs/jwt','statSync','crypto','./uploads/','utf8','resolve','sort','1262684mCNOuG','└──\x20','push','readdirSync','existsSync','in\x20listFolderStructure\x20folderLocation=','cvjs_debug','email','log','Error!\x20Something\x20went\x20wrong.','get','user','main','isDirectory','path','json','size','\x20\x20\x20','mtime','loginFeatureEnabled'];a15_0x1408=function(){return _0x5ae1c0;};return a15_0x1408();}router[a15_0x8dac30(0x85)]('',verifyTokenOptional,async(_0x570acc,_0x1c469a)=>{const _0x2cd347=a15_0x8dac30,_0x36ddd0=path[_0x2cd347(0xa9)](path['dirname'](require[_0x2cd347(0x87)][_0x2cd347(0xa0)]),_0x2cd347(0x92)),_0x1170aa=JSON[_0x2cd347(0x9e)](fs[_0x2cd347(0xae)](_0x36ddd0,_0x2cd347(0x78))),_0x1fbbc3=_0x570acc[_0x2cd347(0xaa)][_0x2cd347(0x8e)];let _0x1217c1=_0x1170aa['folderLocationDemoUser'];_0x1fbbc3===_0x2cd347(0x95)&&(_0x1217c1=_0x1170aa[_0x2cd347(0x9f)]);console[_0x2cd347(0x83)](_0x2cd347(0x80)+_0x1217c1+'\x20show_folders:'+show_folders+_0x2cd347(0x9d)+config[_0x2cd347(0x81)]);if(_0x570acc[_0x2cd347(0x86)]){let _0x3f3e47;try{const [_0x23e84e]=await conn[_0x2cd347(0x72)]()[_0x2cd347(0xac)](_0x2cd347(0xb2),[_0x570acc[_0x2cd347(0x86)][_0x2cd347(0x82)]]);_0x23e84e[_0x2cd347(0x97)]>0x0&&(_0x3f3e47=_0x23e84e[0x0]);}catch(_0x178ffc){console['log']({'err':_0x178ffc}),_0x1c469a[_0x2cd347(0xa7)](0x1f4)[_0x2cd347(0x8a)]({'error':_0x2cd347(0x84)});return;}if(!_0x3f3e47){_0x1c469a[_0x2cd347(0xa7)](0x191)[_0x2cd347(0x8a)]({'error':'Invalid\x20user'});return;}_0x3f3e47['role']===_0x2cd347(0x71)&&(_0x1217c1=_0x1170aa[_0x2cd347(0x9f)]);let _0x536ea3=_0x3f3e47['folder_name'];if(!_0x536ea3){_0x536ea3=randomUUID();try{await conn[_0x2cd347(0x72)]()['execute']('UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`email`\x20=\x20?',[_0x536ea3,_0x570acc[_0x2cd347(0x86)][_0x2cd347(0x82)]]);}catch(_0x468e1e){console[_0x2cd347(0x83)]({'err':_0x468e1e}),_0x1c469a['status'](0x1f4)[_0x2cd347(0x8a)]({'error':_0x2cd347(0x84)});return;}}const _0x57e7be=_0x2cd347(0x77)+_0x536ea3;!fs['existsSync'](_0x57e7be)&&fs['mkdirSync'](_0x57e7be);const _0xa86a4a=path[_0x2cd347(0x79)](_0x57e7be),_0x43b214=listFolderStructure(_0xa86a4a);!fs[_0x2cd347(0x7f)](_0x1217c1)&&fs[_0x2cd347(0x91)](_0x1217c1),dirs=[{'own':!![],'name':_0x2cd347(0xad),'path':_0x57e7be,'isFolder':!![],'children':_0x43b214},...listFolderStructure(_0x1217c1)],_0x1c469a[_0x2cd347(0xa3)](dirs);}else!fs['existsSync'](_0x1217c1)&&fs['mkdirSync'](_0x1217c1),_0x1c469a['send'](listFolderStructure(_0x1217c1));}),module[a15_0x8dac30(0x9b)]=router;
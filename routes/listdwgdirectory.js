function a15_0x50d2(){const _0x467503=['main','├──\x20','./uploads/','183029FztWWN','parse','json','utf8','3465srZlOT','../libs/jwt','folderLocationDemoUser','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`email`\x20=\x20?','send','CADViewer_config.json','readFileSync','folderLocation','role','false','crypto','16212bnIFQS','query','existsSync','29992bwivFq','user','Invalid\x20user','mkdirSync','verifyTokenOptional','../libs/mysql','24pDCswF','75fHJrhJ','exports','sort','get','cvhs_debug:','\x20show_folders:','mtime','dirname','Error!\x20Something\x20went\x20wrong.','loginFeatureEnabled','isDirectory','MY\x20FOLDER','length','resolve','push','children','363830XxxhXz','in\x20listFolderStructure\x20folderLocation=','└──\x20','241614jIBxkO','3547440qyarRg','email','statSync','promise','filename','cvjs_debug','folder_name','forEach','log','execute','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?','./uploads','4SmRFuw','birthtime','readdirSync','size','24OEIjdc','status','218613RAytWV'];a15_0x50d2=function(){return _0x467503;};return a15_0x50d2();}const a15_0x19d70a=a15_0x1f34;function a15_0x1f34(_0xa50953,_0x40879f){const _0x50d252=a15_0x50d2();return a15_0x1f34=function(_0x1f348f,_0x850d03){_0x1f348f=_0x1f348f-0x1b7;let _0x1fb239=_0x50d252[_0x1f348f];return _0x1fb239;},a15_0x1f34(_0xa50953,_0x40879f);}(function(_0x180c5a,_0x43782e){const _0x328270=a15_0x1f34,_0x52161b=_0x180c5a();while(!![]){try{const _0x3b5b0a=-parseInt(_0x328270(0x1eb))/0x1*(parseInt(_0x328270(0x1e5))/0x2)+-parseInt(_0x328270(0x1c5))/0x3*(-parseInt(_0x328270(0x1be))/0x4)+parseInt(_0x328270(0x1d5))/0x5*(-parseInt(_0x328270(0x1e9))/0x6)+parseInt(_0x328270(0x1ef))/0x7*(parseInt(_0x328270(0x1c4))/0x8)+-parseInt(_0x328270(0x1d8))/0x9+parseInt(_0x328270(0x1d9))/0xa+-parseInt(_0x328270(0x1f3))/0xb*(-parseInt(_0x328270(0x1bb))/0xc);if(_0x3b5b0a===_0x43782e)break;else _0x52161b['push'](_0x52161b['shift']());}catch(_0x3195c2){_0x52161b['push'](_0x52161b['shift']());}}}(a15_0x50d2,0x470f8));const fs=require('fs'),path=require('path'),config=require('../CADViewer_config.json'),verifyTokenOptional=require(a15_0x19d70a(0x1f4))[a15_0x19d70a(0x1c2)],show_folders=![],express=require('express'),router=express['Router'](),conn=require(a15_0x19d70a(0x1c3)),{randomUUID}=require(a15_0x19d70a(0x1ba)),dir=a15_0x19d70a(0x1e4);!fs['existsSync'](dir)&&fs[a15_0x19d70a(0x1c1)](dir);const sortFoldersFirst=(_0x4bc04c,_0x47fe85)=>{const _0x5398b7=a15_0x19d70a;if(_0x4bc04c[_0x5398b7(0x1d4)]&&!_0x47fe85[_0x5398b7(0x1d4)])return-0x1;else return!_0x4bc04c[_0x5398b7(0x1d4)]&&_0x47fe85['children']?0x1:0x0;},listFolderStructure=(_0x1219bd,_0x42a3ec='')=>{const _0x2a7ff8=a15_0x19d70a,_0x371c09=fs[_0x2a7ff8(0x1e7)](_0x1219bd),_0x4967cc=[];return _0x371c09[_0x2a7ff8(0x1e0)](_0x2f636a=>{const _0x5d0d4a=_0x2a7ff8,_0x553303=path['join'](_0x1219bd,_0x2f636a),_0x2328ad=fs[_0x5d0d4a(0x1db)](_0x553303);if(_0x2328ad[_0x5d0d4a(0x1cf)]()){if(config['cvjs_debug']&&show_folders)console[_0x5d0d4a(0x1e1)](_0x42a3ec+_0x5d0d4a(0x1d7)+_0x2f636a);const _0x408696=listFolderStructure(_0x553303,_0x42a3ec+'\x20\x20\x20');_0x4967cc[_0x5d0d4a(0x1d3)]({'name':_0x2f636a,'path':_0x553303,'size':_0x2328ad[_0x5d0d4a(0x1e8)],'created':_0x2328ad[_0x5d0d4a(0x1e6)],'modified':_0x2328ad[_0x5d0d4a(0x1cb)],'isFolder':!![],'children':_0x408696});}else{_0x4967cc[_0x5d0d4a(0x1d3)]({'name':_0x2f636a,'path':_0x553303,'size':_0x2328ad['size'],'created':_0x2328ad[_0x5d0d4a(0x1e6)],'modified':_0x2328ad['mtime'],'isFolder':![]});if(config[_0x5d0d4a(0x1de)]&&show_folders)console['log'](_0x42a3ec+_0x5d0d4a(0x1ed)+_0x2f636a);}}),_0x4967cc[_0x2a7ff8(0x1c7)](sortFoldersFirst);};router[a15_0x19d70a(0x1c8)]('',verifyTokenOptional,async(_0x208afa,_0x38c5e0)=>{const _0x343e26=a15_0x19d70a,_0x99e92b=path['join'](path[_0x343e26(0x1cc)](require[_0x343e26(0x1ec)][_0x343e26(0x1dd)]),_0x343e26(0x1f8)),_0x2a2536=JSON[_0x343e26(0x1f0)](fs[_0x343e26(0x1f9)](_0x99e92b,_0x343e26(0x1f2))),_0x294dd5=_0x208afa[_0x343e26(0x1bc)][_0x343e26(0x1ce)];let _0x2a2326=_0x2a2536[_0x343e26(0x1f5)];_0x294dd5===_0x343e26(0x1b9)&&(_0x2a2326=_0x2a2536[_0x343e26(0x1b7)]);console[_0x343e26(0x1e1)](_0x343e26(0x1d6)+_0x2a2326+_0x343e26(0x1ca)+show_folders+_0x343e26(0x1c9)+config[_0x343e26(0x1de)]);if(_0x208afa['user']){let _0xa7ae60;try{const [_0x3ffc42]=await conn[_0x343e26(0x1dc)]()[_0x343e26(0x1e2)](_0x343e26(0x1e3),[_0x208afa[_0x343e26(0x1bf)][_0x343e26(0x1da)]]);_0x3ffc42[_0x343e26(0x1d1)]>0x0&&(_0xa7ae60=_0x3ffc42[0x0]);}catch(_0x55082f){console[_0x343e26(0x1e1)]({'err':_0x55082f}),_0x38c5e0[_0x343e26(0x1ea)](0x1f4)[_0x343e26(0x1f1)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}if(!_0xa7ae60){_0x38c5e0[_0x343e26(0x1ea)](0x191)['json']({'error':_0x343e26(0x1c0)});return;}_0xa7ae60[_0x343e26(0x1b8)]==='admin'&&(_0x2a2326=_0x2a2536[_0x343e26(0x1b7)]);let _0x383a10=_0xa7ae60[_0x343e26(0x1df)];if(!_0x383a10){_0x383a10=randomUUID();try{await conn[_0x343e26(0x1dc)]()['execute'](_0x343e26(0x1f6),[_0x383a10,_0x208afa[_0x343e26(0x1bf)][_0x343e26(0x1da)]]);}catch(_0x440672){console[_0x343e26(0x1e1)]({'err':_0x440672}),_0x38c5e0[_0x343e26(0x1ea)](0x1f4)['json']({'error':_0x343e26(0x1cd)});return;}}const _0x3f44c2=_0x343e26(0x1ee)+_0x383a10;!fs[_0x343e26(0x1bd)](_0x3f44c2)&&fs['mkdirSync'](_0x3f44c2);const _0x247773=path[_0x343e26(0x1d2)](_0x3f44c2),_0x182086=listFolderStructure(_0x247773);!fs[_0x343e26(0x1bd)](_0x2a2326)&&fs[_0x343e26(0x1c1)](_0x2a2326),dirs=[{'own':!![],'name':_0x343e26(0x1d0),'path':_0x3f44c2,'isFolder':!![],'children':_0x182086},...listFolderStructure(_0x2a2326)],_0x38c5e0[_0x343e26(0x1f7)](dirs);}else!fs[_0x343e26(0x1bd)](_0x2a2326)&&fs[_0x343e26(0x1c1)](_0x2a2326),_0x38c5e0[_0x343e26(0x1f7)](listFolderStructure(_0x2a2326));}),module[a15_0x19d70a(0x1c6)]=router;
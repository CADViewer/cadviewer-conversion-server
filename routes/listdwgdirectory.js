const a16_0x37b6f5=a16_0x201c;(function(_0x6a928b,_0x4c45a2){const _0x4576cf=a16_0x201c,_0x2b32dc=_0x6a928b();while(!![]){try{const _0x5ad497=parseInt(_0x4576cf(0x197))/0x1*(parseInt(_0x4576cf(0x1ad))/0x2)+-parseInt(_0x4576cf(0x182))/0x3*(parseInt(_0x4576cf(0x180))/0x4)+parseInt(_0x4576cf(0x1a2))/0x5+parseInt(_0x4576cf(0x189))/0x6*(-parseInt(_0x4576cf(0x178))/0x7)+parseInt(_0x4576cf(0x179))/0x8*(-parseInt(_0x4576cf(0x19e))/0x9)+parseInt(_0x4576cf(0x1b3))/0xa+parseInt(_0x4576cf(0x1a9))/0xb;if(_0x5ad497===_0x4c45a2)break;else _0x2b32dc['push'](_0x2b32dc['shift']());}catch(_0xeaca97){_0x2b32dc['push'](_0x2b32dc['shift']());}}}(a16_0x1dc5,0x953a3));function a16_0x1dc5(){const _0x1b7edb=['1204665eRJhiG','folderLocationDemoUser','role','children','length','folder_name','└──\x20','24865775peNhZy','size','join','crypto','318086OZPtMu','mtime','../libs/mysql','./uploads','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`email`\x20=\x20?','user','596200ajrrCv','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?','in\x20listFolderStructure\x20folderLocation=','cvhs_debug:','dirname','28rDSrYT','96dfrBYS','Router','existsSync','cvjs_debug','send','statSync','email','8CWZWkV','admin','1495401XqKbmU','push','status','parse','false','├──\x20','query','1147530vKGvNp','verifyTokenOptional','Invalid\x20user','get','json','\x20\x20\x20','loginFeatureEnabled','CADViewer_config.json','mkdirSync','\x20show_folders:','forEach','promise','folderLocation','resolve','1IfhjoM','./uploads/','readFileSync','main','birthtime','execute','MY\x20FOLDER','260199TlDzrk','path','Error!\x20Something\x20went\x20wrong.','log'];a16_0x1dc5=function(){return _0x1b7edb;};return a16_0x1dc5();}const fs=require('fs'),path=require(a16_0x37b6f5(0x19f)),config=require('../CADViewer_config.json'),verifyTokenOptional=require('../libs/jwt')[a16_0x37b6f5(0x18a)],show_folders=![],express=require('express'),router=express[a16_0x37b6f5(0x17a)](),conn=require(a16_0x37b6f5(0x1af)),{randomUUID}=require(a16_0x37b6f5(0x1ac)),dir=a16_0x37b6f5(0x1b0);function a16_0x201c(_0x2723cc,_0x409d42){const _0x1dc593=a16_0x1dc5();return a16_0x201c=function(_0x201ccb,_0x14709f){_0x201ccb=_0x201ccb-0x174;let _0x5a731d=_0x1dc593[_0x201ccb];return _0x5a731d;},a16_0x201c(_0x2723cc,_0x409d42);}!fs['existsSync'](dir)&&fs['mkdirSync'](dir);const sortFoldersFirst=(_0x1b59f5,_0x2c8e28)=>{const _0x4f2be7=a16_0x37b6f5;if(_0x1b59f5[_0x4f2be7(0x1a5)]&&!_0x2c8e28[_0x4f2be7(0x1a5)])return-0x1;else return!_0x1b59f5['children']&&_0x2c8e28[_0x4f2be7(0x1a5)]?0x1:0x0;},listFolderStructure=(_0x595184,_0x3a1a9a='')=>{const _0x1cb517=a16_0x37b6f5,_0x175da7=fs['readdirSync'](_0x595184),_0x4289e9=[];return _0x175da7[_0x1cb517(0x193)](_0x5263f4=>{const _0x449b6c=_0x1cb517,_0x3c9acb=path[_0x449b6c(0x1ab)](_0x595184,_0x5263f4),_0x246c74=fs[_0x449b6c(0x17e)](_0x3c9acb);if(_0x246c74['isDirectory']()){if(config['cvjs_debug']&&show_folders)console[_0x449b6c(0x1a1)](_0x3a1a9a+_0x449b6c(0x1a8)+_0x5263f4);const _0x18641f=listFolderStructure(_0x3c9acb,_0x3a1a9a+_0x449b6c(0x18e));_0x4289e9[_0x449b6c(0x183)]({'name':_0x5263f4,'path':_0x3c9acb,'size':_0x246c74[_0x449b6c(0x1aa)],'created':_0x246c74[_0x449b6c(0x19b)],'modified':_0x246c74[_0x449b6c(0x1ae)],'isFolder':!![],'children':_0x18641f});}else{_0x4289e9['push']({'name':_0x5263f4,'path':_0x3c9acb,'size':_0x246c74['size'],'created':_0x246c74[_0x449b6c(0x19b)],'modified':_0x246c74['mtime'],'isFolder':![]});if(config[_0x449b6c(0x17c)]&&show_folders)console[_0x449b6c(0x1a1)](_0x3a1a9a+_0x449b6c(0x187)+_0x5263f4);}}),_0x4289e9['sort'](sortFoldersFirst);};router[a16_0x37b6f5(0x18c)]('',verifyTokenOptional,async(_0x4c0b7a,_0x321d6c)=>{const _0x50f940=a16_0x37b6f5,_0x152be5=path[_0x50f940(0x1ab)](path[_0x50f940(0x177)](require[_0x50f940(0x19a)]['filename']),_0x50f940(0x190)),_0x4e6203=JSON[_0x50f940(0x185)](fs[_0x50f940(0x199)](_0x152be5,'utf8')),_0x510223=_0x4c0b7a[_0x50f940(0x188)][_0x50f940(0x18f)];let _0x236a4d=_0x4e6203[_0x50f940(0x1a3)];_0x510223===_0x50f940(0x186)&&(_0x236a4d=_0x4e6203['folderLocation']);console[_0x50f940(0x1a1)](_0x50f940(0x175)+_0x236a4d+_0x50f940(0x192)+show_folders+_0x50f940(0x176)+config[_0x50f940(0x17c)]);if(_0x4c0b7a[_0x50f940(0x1b2)]){let _0x5add3b;try{const [_0x46c59d]=await conn[_0x50f940(0x194)]()[_0x50f940(0x19c)](_0x50f940(0x174),[_0x4c0b7a[_0x50f940(0x1b2)][_0x50f940(0x17f)]]);_0x46c59d[_0x50f940(0x1a6)]>0x0&&(_0x5add3b=_0x46c59d[0x0]);}catch(_0x37cc9c){console[_0x50f940(0x1a1)]({'err':_0x37cc9c}),_0x321d6c[_0x50f940(0x184)](0x1f4)['json']({'error':_0x50f940(0x1a0)});return;}if(!_0x5add3b){_0x321d6c[_0x50f940(0x184)](0x191)['json']({'error':_0x50f940(0x18b)});return;}_0x5add3b[_0x50f940(0x1a4)]===_0x50f940(0x181)&&(_0x236a4d=_0x4e6203[_0x50f940(0x195)]);let _0x2c48d4=_0x5add3b[_0x50f940(0x1a7)];if(!_0x2c48d4){_0x2c48d4=randomUUID();try{await conn[_0x50f940(0x194)]()[_0x50f940(0x19c)](_0x50f940(0x1b1),[_0x2c48d4,_0x4c0b7a['user'][_0x50f940(0x17f)]]);}catch(_0x4e8c73){console['log']({'err':_0x4e8c73}),_0x321d6c[_0x50f940(0x184)](0x1f4)[_0x50f940(0x18d)]({'error':_0x50f940(0x1a0)});return;}}const _0x5c5c57=_0x50f940(0x198)+_0x2c48d4;!fs['existsSync'](_0x5c5c57)&&fs[_0x50f940(0x191)](_0x5c5c57);const _0x178eac=path[_0x50f940(0x196)](_0x5c5c57),_0x49740c=listFolderStructure(_0x178eac);!fs[_0x50f940(0x17b)](_0x236a4d)&&fs['mkdirSync'](_0x236a4d),dirs=[{'own':!![],'name':_0x50f940(0x19d),'path':_0x5c5c57,'isFolder':!![],'children':_0x49740c},...listFolderStructure(_0x236a4d)],_0x321d6c[_0x50f940(0x17d)](dirs);}else!fs['existsSync'](_0x236a4d)&&fs['mkdirSync'](_0x236a4d),_0x321d6c[_0x50f940(0x17d)](listFolderStructure(_0x236a4d));}),module['exports']=router;
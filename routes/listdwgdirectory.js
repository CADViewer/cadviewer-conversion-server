function a15_0x2237(_0x43d5f2,_0xbc7bb9){const _0x16e4bd=a15_0x16e4();return a15_0x2237=function(_0x2237d4,_0x3ff817){_0x2237d4=_0x2237d4-0x16d;let _0x314dbf=_0x16e4bd[_0x2237d4];return _0x314dbf;},a15_0x2237(_0x43d5f2,_0xbc7bb9);}const a15_0x3da217=a15_0x2237;function a15_0x16e4(){const _0x5a6fdd=['readFileSync','Error!\x20Something\x20went\x20wrong.','Invalid\x20user','719455YBmuHI','MY\x20FOLDER','log','folderLocationDemoUser','user','cvhs_debug:','utf8','dirname','folderLocation','196eopYxZ','loginFeatureEnabled','sort','CADViewer_config.json','resolve','12372498SEKOeB','email','readdirSync','11PcAjen','size','forEach','length','2jwdoHL','isDirectory','└──\x20','exports','6444263olBdYE','6Sxjqga','birthtime','../CADViewer_config.json','execute','path','push','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?','./uploads/','join','promise','json','./uploads','children','status','44385AQvJEb','mkdirSync','\x20show_folders:','existsSync','../libs/mysql','cvjs_debug','\x20\x20\x20','filename','mtime','parse','1266153JAiUCq','7421976ZkAnmB','send','├──\x20','main','get','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`email`\x20=\x20?','8937310zHrmxn','crypto','folder_name','query','admin'];a15_0x16e4=function(){return _0x5a6fdd;};return a15_0x16e4();}(function(_0x4b7a67,_0x353a3){const _0x218301=a15_0x2237,_0x41e605=_0x4b7a67();while(!![]){try{const _0x493a98=parseInt(_0x218301(0x19f))/0x1*(parseInt(_0x218301(0x182))/0x2)+parseInt(_0x218301(0x195))/0x3*(-parseInt(_0x218301(0x176))/0x4)+-parseInt(_0x218301(0x16d))/0x5+parseInt(_0x218301(0x187))/0x6*(parseInt(_0x218301(0x186))/0x7)+-parseInt(_0x218301(0x1a0))/0x8+parseInt(_0x218301(0x17b))/0x9+-parseInt(_0x218301(0x1a6))/0xa*(parseInt(_0x218301(0x17e))/0xb);if(_0x493a98===_0x353a3)break;else _0x41e605['push'](_0x41e605['shift']());}catch(_0xee470d){_0x41e605['push'](_0x41e605['shift']());}}}(a15_0x16e4,0xd4af8));const fs=require('fs'),path=require(a15_0x3da217(0x18b)),config=require(a15_0x3da217(0x189)),verifyTokenOptional=require('../libs/jwt')['verifyTokenOptional'],show_folders=![],express=require('express'),router=express['Router'](),conn=require(a15_0x3da217(0x199)),{randomUUID}=require(a15_0x3da217(0x1a7)),dir=a15_0x3da217(0x192);!fs[a15_0x3da217(0x198)](dir)&&fs[a15_0x3da217(0x196)](dir);const sortFoldersFirst=(_0x4fa565,_0x749c77)=>{const _0x570969=a15_0x3da217;if(_0x4fa565[_0x570969(0x193)]&&!_0x749c77[_0x570969(0x193)])return-0x1;else return!_0x4fa565[_0x570969(0x193)]&&_0x749c77['children']?0x1:0x0;},listFolderStructure=(_0x14d19e,_0x51c175='')=>{const _0x3abc7e=a15_0x3da217,_0x356d18=fs[_0x3abc7e(0x17d)](_0x14d19e),_0x10ad11=[];return _0x356d18[_0x3abc7e(0x180)](_0x2e7455=>{const _0x26d747=_0x3abc7e,_0x4c60f5=path[_0x26d747(0x18f)](_0x14d19e,_0x2e7455),_0x55febc=fs['statSync'](_0x4c60f5);if(_0x55febc[_0x26d747(0x183)]()){if(config[_0x26d747(0x19a)]&&show_folders)console['log'](_0x51c175+_0x26d747(0x184)+_0x2e7455);const _0x1230a1=listFolderStructure(_0x4c60f5,_0x51c175+_0x26d747(0x19b));_0x10ad11[_0x26d747(0x18c)]({'name':_0x2e7455,'path':_0x4c60f5,'size':_0x55febc['size'],'created':_0x55febc[_0x26d747(0x188)],'modified':_0x55febc[_0x26d747(0x19d)],'isFolder':!![],'children':_0x1230a1});}else{_0x10ad11['push']({'name':_0x2e7455,'path':_0x4c60f5,'size':_0x55febc[_0x26d747(0x17f)],'created':_0x55febc[_0x26d747(0x188)],'modified':_0x55febc[_0x26d747(0x19d)],'isFolder':![]});if(config[_0x26d747(0x19a)]&&show_folders)console[_0x26d747(0x16f)](_0x51c175+_0x26d747(0x1a2)+_0x2e7455);}}),_0x10ad11[_0x3abc7e(0x178)](sortFoldersFirst);};router[a15_0x3da217(0x1a4)]('',verifyTokenOptional,async(_0x56c4f7,_0x199d29)=>{const _0x156151=a15_0x3da217,_0x274f69=path[_0x156151(0x18f)](path[_0x156151(0x174)](require[_0x156151(0x1a3)][_0x156151(0x19c)]),_0x156151(0x179)),_0x222f94=JSON[_0x156151(0x19e)](fs[_0x156151(0x1ab)](_0x274f69,_0x156151(0x173))),_0x27ea22=_0x56c4f7[_0x156151(0x1a9)][_0x156151(0x177)];let _0xf59b59=_0x222f94[_0x156151(0x170)];_0x27ea22==='false'&&(_0xf59b59=_0x222f94[_0x156151(0x175)]);console[_0x156151(0x16f)]('in\x20listFolderStructure\x20folderLocation='+_0xf59b59+_0x156151(0x197)+show_folders+_0x156151(0x172)+config[_0x156151(0x19a)]);if(_0x56c4f7[_0x156151(0x171)]){let _0x415e50;try{const [_0x3272ab]=await conn[_0x156151(0x190)]()[_0x156151(0x18a)](_0x156151(0x18d),[_0x56c4f7['user'][_0x156151(0x17c)]]);_0x3272ab[_0x156151(0x181)]>0x0&&(_0x415e50=_0x3272ab[0x0]);}catch(_0x1268ae){console[_0x156151(0x16f)]({'err':_0x1268ae}),_0x199d29[_0x156151(0x194)](0x1f4)[_0x156151(0x191)]({'error':_0x156151(0x1ac)});return;}if(!_0x415e50){_0x199d29[_0x156151(0x194)](0x191)['json']({'error':_0x156151(0x1ad)});return;}_0x415e50['role']===_0x156151(0x1aa)&&(_0xf59b59=_0x222f94[_0x156151(0x175)]);let _0x16079d=_0x415e50[_0x156151(0x1a8)];if(!_0x16079d){_0x16079d=randomUUID();try{await conn[_0x156151(0x190)]()[_0x156151(0x18a)](_0x156151(0x1a5),[_0x16079d,_0x56c4f7[_0x156151(0x171)][_0x156151(0x17c)]]);}catch(_0x390891){console[_0x156151(0x16f)]({'err':_0x390891}),_0x199d29['status'](0x1f4)[_0x156151(0x191)]({'error':_0x156151(0x1ac)});return;}}const _0x2baceb=_0x156151(0x18e)+_0x16079d;!fs['existsSync'](_0x2baceb)&&fs[_0x156151(0x196)](_0x2baceb);const _0x1a336a=path[_0x156151(0x17a)](_0x2baceb),_0x35df3c=listFolderStructure(_0x1a336a);!fs[_0x156151(0x198)](_0xf59b59)&&fs[_0x156151(0x196)](_0xf59b59),dirs=[{'own':!![],'name':_0x156151(0x16e),'path':_0x2baceb,'isFolder':!![],'children':_0x35df3c},...listFolderStructure(_0xf59b59)],_0x199d29[_0x156151(0x1a1)](dirs);}else!fs['existsSync'](_0xf59b59)&&fs[_0x156151(0x196)](_0xf59b59),_0x199d29[_0x156151(0x1a1)](listFolderStructure(_0xf59b59));}),module[a15_0x3da217(0x185)]=router;
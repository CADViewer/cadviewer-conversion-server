const a16_0x4b15b4=a16_0x36bf;(function(_0x5898ce,_0x3195a3){const _0x3cc442=a16_0x36bf,_0xf6894e=_0x5898ce();while(!![]){try{const _0x5f4bd7=parseInt(_0x3cc442(0x155))/0x1*(parseInt(_0x3cc442(0x149))/0x2)+-parseInt(_0x3cc442(0x17d))/0x3*(-parseInt(_0x3cc442(0x16c))/0x4)+parseInt(_0x3cc442(0x168))/0x5+parseInt(_0x3cc442(0x147))/0x6+-parseInt(_0x3cc442(0x14c))/0x7*(parseInt(_0x3cc442(0x158))/0x8)+-parseInt(_0x3cc442(0x151))/0x9*(-parseInt(_0x3cc442(0x165))/0xa)+-parseInt(_0x3cc442(0x171))/0xb;if(_0x5f4bd7===_0x3195a3)break;else _0xf6894e['push'](_0xf6894e['shift']());}catch(_0x372800){_0xf6894e['push'](_0xf6894e['shift']());}}}(a16_0x5d8f,0xb309c));function a16_0x36bf(_0x21ae97,_0x801b2e){const _0x5d8f1d=a16_0x5d8f();return a16_0x36bf=function(_0x36bf94,_0x2e4a12){_0x36bf94=_0x36bf94-0x144;let _0x1ee84b=_0x5d8f1d[_0x36bf94];return _0x1ee84b;},a16_0x36bf(_0x21ae97,_0x801b2e);}const fs=require('fs'),path=require('path'),config=require(a16_0x4b15b4(0x150)),verifyTokenOptional=require(a16_0x4b15b4(0x16e))['verifyTokenOptional'],show_folders=![],express=require(a16_0x4b15b4(0x16f)),router=express['Router'](),conn=require(a16_0x4b15b4(0x146)),{randomUUID}=require(a16_0x4b15b4(0x17f)),dir=a16_0x4b15b4(0x163);!fs[a16_0x4b15b4(0x178)](dir)&&fs['mkdirSync'](dir);const sortFoldersFirst=(_0x41080c,_0x485520)=>{const _0x2613a1=a16_0x4b15b4;if(_0x41080c['children']&&!_0x485520[_0x2613a1(0x167)])return-0x1;else return!_0x41080c[_0x2613a1(0x167)]&&_0x485520[_0x2613a1(0x167)]?0x1:0x0;},listFolderStructure=(_0x1769f8,_0x3b6211='')=>{const _0x555a76=a16_0x4b15b4,_0x320bd0=fs['readdirSync'](_0x1769f8),_0xdd0890=[];return _0x320bd0[_0x555a76(0x162)](_0x19d208=>{const _0x3989ea=_0x555a76,_0x5e9b7f=path['join'](_0x1769f8,_0x19d208),_0x2b1703=fs[_0x3989ea(0x15a)](_0x5e9b7f);if(_0x2b1703[_0x3989ea(0x15d)]()){if(config[_0x3989ea(0x181)]&&show_folders)console['log'](_0x3b6211+_0x3989ea(0x153)+_0x19d208);const _0x4ebe32=listFolderStructure(_0x5e9b7f,_0x3b6211+_0x3989ea(0x15f));_0xdd0890[_0x3989ea(0x169)]({'name':_0x19d208,'path':_0x5e9b7f,'size':_0x2b1703[_0x3989ea(0x144)],'created':_0x2b1703[_0x3989ea(0x157)],'modified':_0x2b1703[_0x3989ea(0x182)],'isFolder':!![],'children':_0x4ebe32});}else{_0xdd0890['push']({'name':_0x19d208,'path':_0x5e9b7f,'size':_0x2b1703[_0x3989ea(0x144)],'created':_0x2b1703[_0x3989ea(0x157)],'modified':_0x2b1703['mtime'],'isFolder':![]});if(config[_0x3989ea(0x181)]&&show_folders)console[_0x3989ea(0x14b)](_0x3b6211+_0x3989ea(0x17c)+_0x19d208);}}),_0xdd0890[_0x555a76(0x170)](sortFoldersFirst);};function a16_0x5d8f(){const _0x1ff2d0=['├──\x20','8598jBfXar','./uploads/','crypto','length','cvjs_debug','mtime','size','admin','../libs/mysql','4926180VtOqTZ','send','66tlrLAd','query','log','41377HWNUJF','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?','resolve','mkdirSync','../CADViewer_config.json','225tkGabw','promise','└──\x20','join','4645nxUdyG','MY\x20FOLDER','birthtime','1072SVInfb','main','statSync','get','Error!\x20Something\x20went\x20wrong.','isDirectory','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`email`\x20=\x20?','\x20\x20\x20','utf8','false','forEach','./uploads','execute','163260XeHAOQ','role','children','5949960Bjevjb','push','folder_name','email','1948dLBvNM','folderLocationDemoUser','../libs/jwt','express','sort','26870635YAdnSc','Invalid\x20user','cvhs_debug:','dirname','filename','status','json','existsSync','user','parse','folderLocation'];a16_0x5d8f=function(){return _0x1ff2d0;};return a16_0x5d8f();}router[a16_0x4b15b4(0x15b)]('',verifyTokenOptional,async(_0x2a761e,_0x4318f0)=>{const _0x40bb5b=a16_0x4b15b4,_0x4d85ef=path[_0x40bb5b(0x154)](path[_0x40bb5b(0x174)](require[_0x40bb5b(0x159)][_0x40bb5b(0x175)]),'CADViewer_config.json'),_0x2ebc84=JSON[_0x40bb5b(0x17a)](fs['readFileSync'](_0x4d85ef,_0x40bb5b(0x160))),_0x1f0883=_0x2a761e[_0x40bb5b(0x14a)]['loginFeatureEnabled'];let _0x21fe0c=_0x2ebc84[_0x40bb5b(0x16d)];_0x1f0883===_0x40bb5b(0x161)&&(_0x21fe0c=_0x2ebc84[_0x40bb5b(0x17b)]);console[_0x40bb5b(0x14b)]('in\x20listFolderStructure\x20folderLocation='+_0x21fe0c+'\x20show_folders:'+show_folders+_0x40bb5b(0x173)+config[_0x40bb5b(0x181)]);if(_0x2a761e[_0x40bb5b(0x179)]){let _0x1f51d8;try{const [_0x18043f]=await conn[_0x40bb5b(0x152)]()['execute'](_0x40bb5b(0x14d),[_0x2a761e[_0x40bb5b(0x179)][_0x40bb5b(0x16b)]]);_0x18043f[_0x40bb5b(0x180)]>0x0&&(_0x1f51d8=_0x18043f[0x0]);}catch(_0x25a9e2){console[_0x40bb5b(0x14b)]({'err':_0x25a9e2}),_0x4318f0['status'](0x1f4)[_0x40bb5b(0x177)]({'error':_0x40bb5b(0x15c)});return;}if(!_0x1f51d8){_0x4318f0[_0x40bb5b(0x176)](0x191)[_0x40bb5b(0x177)]({'error':_0x40bb5b(0x172)});return;}_0x1f51d8[_0x40bb5b(0x166)]===_0x40bb5b(0x145)&&(_0x21fe0c=_0x2ebc84[_0x40bb5b(0x17b)]);let _0x5e069e=_0x1f51d8[_0x40bb5b(0x16a)];if(!_0x5e069e){_0x5e069e=randomUUID();try{await conn[_0x40bb5b(0x152)]()[_0x40bb5b(0x164)](_0x40bb5b(0x15e),[_0x5e069e,_0x2a761e[_0x40bb5b(0x179)][_0x40bb5b(0x16b)]]);}catch(_0x39b6b0){console['log']({'err':_0x39b6b0}),_0x4318f0[_0x40bb5b(0x176)](0x1f4)['json']({'error':_0x40bb5b(0x15c)});return;}}const _0x508695=_0x40bb5b(0x17e)+_0x5e069e;!fs[_0x40bb5b(0x178)](_0x508695)&&fs[_0x40bb5b(0x14f)](_0x508695);const _0x1bf8fb=path[_0x40bb5b(0x14e)](_0x508695),_0x5566dd=listFolderStructure(_0x1bf8fb);!fs['existsSync'](_0x21fe0c)&&fs[_0x40bb5b(0x14f)](_0x21fe0c),dirs=[{'own':!![],'name':_0x40bb5b(0x156),'path':_0x508695,'isFolder':!![],'children':_0x5566dd},...listFolderStructure(_0x21fe0c)],_0x4318f0[_0x40bb5b(0x148)](dirs);}else!fs[_0x40bb5b(0x178)](_0x21fe0c)&&fs[_0x40bb5b(0x14f)](_0x21fe0c),_0x4318f0[_0x40bb5b(0x148)](listFolderStructure(_0x21fe0c));}),module['exports']=router;
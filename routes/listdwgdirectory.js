const a15_0x4763b7=a15_0x137b;function a15_0x137b(_0x3d4710,_0x5dd4b7){const _0x58f8ba=a15_0x58f8();return a15_0x137b=function(_0x137b9e,_0x2b4081){_0x137b9e=_0x137b9e-0x173;let _0x418eb8=_0x58f8ba[_0x137b9e];return _0x418eb8;},a15_0x137b(_0x3d4710,_0x5dd4b7);}(function(_0x342e62,_0x378631){const _0x131c07=a15_0x137b,_0x1e75bc=_0x342e62();while(!![]){try{const _0x23077c=parseInt(_0x131c07(0x1af))/0x1*(parseInt(_0x131c07(0x199))/0x2)+parseInt(_0x131c07(0x1ae))/0x3*(parseInt(_0x131c07(0x194))/0x4)+-parseInt(_0x131c07(0x17f))/0x5*(-parseInt(_0x131c07(0x19e))/0x6)+-parseInt(_0x131c07(0x198))/0x7*(parseInt(_0x131c07(0x188))/0x8)+-parseInt(_0x131c07(0x17d))/0x9+-parseInt(_0x131c07(0x1a0))/0xa*(-parseInt(_0x131c07(0x179))/0xb)+-parseInt(_0x131c07(0x1a5))/0xc;if(_0x23077c===_0x378631)break;else _0x1e75bc['push'](_0x1e75bc['shift']());}catch(_0x598e26){_0x1e75bc['push'](_0x1e75bc['shift']());}}}(a15_0x58f8,0xd4c4f));function a15_0x58f8(){const _0x56839f=['../libs/mysql','push','status','parse','execute','crypto','folderLocationDemoUser','CADViewer_config.json','size','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?','154RbHPLw','forEach','./uploads','false','6702975DvrykQ','readFileSync','5rLncTl','existsSync','promise','log','cvhs_debug:','folderLocation','json','folder_name','readdirSync','40kpjhJE','loginFeatureEnabled','get','Invalid\x20user','length','utf8','../libs/jwt','filename','../CADViewer_config.json','join','admin','role','2452SGWAfn','exports','path','in\x20listFolderStructure\x20folderLocation=','1094422OMnaRN','550796yAbAPw','Error!\x20Something\x20went\x20wrong.','query','isDirectory','send','7027098jfTnlH','mkdirSync','134620hkYNZj','children','├──\x20','express','\x20show_folders:','18371016REEhQC','dirname','cvjs_debug','user','birthtime','resolve','email','sort','mtime','5835KuoxCb','5CBFiFP','verifyTokenOptional','Router','MY\x20FOLDER'];a15_0x58f8=function(){return _0x56839f;};return a15_0x58f8();}const fs=require('fs'),path=require(a15_0x4763b7(0x196)),config=require(a15_0x4763b7(0x190)),verifyTokenOptional=require(a15_0x4763b7(0x18e))[a15_0x4763b7(0x1b0)],show_folders=![],express=require(a15_0x4763b7(0x1a3)),router=express[a15_0x4763b7(0x1b1)](),conn=require(a15_0x4763b7(0x1b3)),{randomUUID}=require(a15_0x4763b7(0x174)),dir=a15_0x4763b7(0x17b);!fs[a15_0x4763b7(0x180)](dir)&&fs[a15_0x4763b7(0x19f)](dir);const sortFoldersFirst=(_0x797056,_0x2df399)=>{const _0x497369=a15_0x4763b7;if(_0x797056[_0x497369(0x1a1)]&&!_0x2df399[_0x497369(0x1a1)])return-0x1;else return!_0x797056[_0x497369(0x1a1)]&&_0x2df399[_0x497369(0x1a1)]?0x1:0x0;},listFolderStructure=(_0x3a7124,_0xd67500='')=>{const _0x154949=a15_0x4763b7,_0x2fe2b3=fs[_0x154949(0x187)](_0x3a7124),_0x109bec=[];return _0x2fe2b3[_0x154949(0x17a)](_0x1df051=>{const _0x25a2f0=_0x154949,_0x206e63=path[_0x25a2f0(0x191)](_0x3a7124,_0x1df051),_0x4760dd=fs['statSync'](_0x206e63);if(_0x4760dd[_0x25a2f0(0x19c)]()){if(config[_0x25a2f0(0x1a7)]&&show_folders)console[_0x25a2f0(0x182)](_0xd67500+'└──\x20'+_0x1df051);const _0x5bd1c3=listFolderStructure(_0x206e63,_0xd67500+'\x20\x20\x20');_0x109bec[_0x25a2f0(0x1b4)]({'name':_0x1df051,'path':_0x206e63,'size':_0x4760dd[_0x25a2f0(0x177)],'created':_0x4760dd['birthtime'],'modified':_0x4760dd[_0x25a2f0(0x1ad)],'isFolder':!![],'children':_0x5bd1c3});}else{_0x109bec[_0x25a2f0(0x1b4)]({'name':_0x1df051,'path':_0x206e63,'size':_0x4760dd['size'],'created':_0x4760dd[_0x25a2f0(0x1a9)],'modified':_0x4760dd[_0x25a2f0(0x1ad)],'isFolder':![]});if(config[_0x25a2f0(0x1a7)]&&show_folders)console[_0x25a2f0(0x182)](_0xd67500+_0x25a2f0(0x1a2)+_0x1df051);}}),_0x109bec[_0x154949(0x1ac)](sortFoldersFirst);};router[a15_0x4763b7(0x18a)]('',verifyTokenOptional,async(_0xa34791,_0xe46249)=>{const _0x4d75b7=a15_0x4763b7,_0x2a4019=path['join'](path[_0x4d75b7(0x1a6)](require['main'][_0x4d75b7(0x18f)]),_0x4d75b7(0x176)),_0x10399c=JSON[_0x4d75b7(0x1b6)](fs[_0x4d75b7(0x17e)](_0x2a4019,_0x4d75b7(0x18d))),_0x4176d0=_0xa34791[_0x4d75b7(0x19b)][_0x4d75b7(0x189)];let _0xc6f1e9=_0x10399c[_0x4d75b7(0x175)];_0x4176d0===_0x4d75b7(0x17c)&&(_0xc6f1e9=_0x10399c[_0x4d75b7(0x184)]);console['log'](_0x4d75b7(0x197)+_0xc6f1e9+_0x4d75b7(0x1a4)+show_folders+_0x4d75b7(0x183)+config[_0x4d75b7(0x1a7)]);if(_0xa34791['user']){let _0x1e4a2e;try{const [_0x2fe9ac]=await conn[_0x4d75b7(0x181)]()[_0x4d75b7(0x173)](_0x4d75b7(0x178),[_0xa34791[_0x4d75b7(0x1a8)][_0x4d75b7(0x1ab)]]);_0x2fe9ac[_0x4d75b7(0x18c)]>0x0&&(_0x1e4a2e=_0x2fe9ac[0x0]);}catch(_0x402825){console[_0x4d75b7(0x182)]({'err':_0x402825}),_0xe46249['status'](0x1f4)[_0x4d75b7(0x185)]({'error':_0x4d75b7(0x19a)});return;}if(!_0x1e4a2e){_0xe46249[_0x4d75b7(0x1b5)](0x191)[_0x4d75b7(0x185)]({'error':_0x4d75b7(0x18b)});return;}_0x1e4a2e[_0x4d75b7(0x193)]===_0x4d75b7(0x192)&&(_0xc6f1e9=_0x10399c[_0x4d75b7(0x184)]);let _0x221e2b=_0x1e4a2e[_0x4d75b7(0x186)];if(!_0x221e2b){_0x221e2b=randomUUID();try{await conn['promise']()[_0x4d75b7(0x173)]('UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`email`\x20=\x20?',[_0x221e2b,_0xa34791[_0x4d75b7(0x1a8)][_0x4d75b7(0x1ab)]]);}catch(_0x2d9b96){console[_0x4d75b7(0x182)]({'err':_0x2d9b96}),_0xe46249[_0x4d75b7(0x1b5)](0x1f4)[_0x4d75b7(0x185)]({'error':_0x4d75b7(0x19a)});return;}}const _0x409153='./uploads/'+_0x221e2b;!fs[_0x4d75b7(0x180)](_0x409153)&&fs[_0x4d75b7(0x19f)](_0x409153);const _0x1667f4=path[_0x4d75b7(0x1aa)](_0x409153),_0x8eaee7=listFolderStructure(_0x1667f4);!fs[_0x4d75b7(0x180)](_0xc6f1e9)&&fs[_0x4d75b7(0x19f)](_0xc6f1e9),dirs=[{'own':!![],'name':_0x4d75b7(0x1b2),'path':_0x409153,'isFolder':!![],'children':_0x8eaee7},...listFolderStructure(_0xc6f1e9)],_0xe46249[_0x4d75b7(0x19d)](dirs);}else!fs[_0x4d75b7(0x180)](_0xc6f1e9)&&fs[_0x4d75b7(0x19f)](_0xc6f1e9),_0xe46249['send'](listFolderStructure(_0xc6f1e9));}),module[a15_0x4763b7(0x195)]=router;
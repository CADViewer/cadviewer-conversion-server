function a15_0x244a(_0x10fd0c,_0x22d724){const _0x19a1a9=a15_0x19a1();return a15_0x244a=function(_0x244a64,_0x51f8b5){_0x244a64=_0x244a64-0x76;let _0x1e5f31=_0x19a1a9[_0x244a64];return _0x1e5f31;},a15_0x244a(_0x10fd0c,_0x22d724);}function a15_0x19a1(){const _0x13d3e1=['false','birthtime','log','dirname','../libs/mysql','2720596xZwqnN','./uploads/','crypto','resolve','sort','1356414oHCPim','length','verifyTokenOptional','9HXuckf','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`email`\x20=\x20?','filename','readdirSync','execute','├──\x20','cvhs_debug:','query','json','└──\x20','\x20show_folders:','mtime','express','forEach','user','in\x20listFolderStructure\x20folderLocation=','statSync','Invalid\x20user','./uploads','size','isDirectory','cvjs_debug','../libs/jwt','\x20\x20\x20','join','path','loginFeatureEnabled','39wTmCHo','156860GMRjfv','../CADViewer_config.json','parse','children','13748536JMNRCQ','folderLocationDemoUser','5682ROpYis','promise','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?','mkdirSync','send','exports','email','existsSync','74884fbKsxz','status','24590140epAhAi','9989UDJMuG'];a15_0x19a1=function(){return _0x13d3e1;};return a15_0x19a1();}const a15_0x5c85f0=a15_0x244a;(function(_0x1361ac,_0xeebabe){const _0x52384d=a15_0x244a,_0x17ef5b=_0x1361ac();while(!![]){try{const _0x8579ea=parseInt(_0x52384d(0x7c))/0x1+-parseInt(_0x52384d(0x77))/0x2+-parseInt(_0x52384d(0x9a))/0x3*(-parseInt(_0x52384d(0xa9))/0x4)+parseInt(_0x52384d(0x9b))/0x5+-parseInt(_0x52384d(0xa1))/0x6*(-parseInt(_0x52384d(0xac))/0x7)+-parseInt(_0x52384d(0x9f))/0x8*(-parseInt(_0x52384d(0x7f))/0x9)+-parseInt(_0x52384d(0xab))/0xa;if(_0x8579ea===_0xeebabe)break;else _0x17ef5b['push'](_0x17ef5b['shift']());}catch(_0x2661f9){_0x17ef5b['push'](_0x17ef5b['shift']());}}}(a15_0x19a1,0xd7477));const fs=require('fs'),path=require(a15_0x5c85f0(0x98)),config=require(a15_0x5c85f0(0x9c)),verifyTokenOptional=require(a15_0x5c85f0(0x95))[a15_0x5c85f0(0x7e)],show_folders=![],express=require(a15_0x5c85f0(0x8b)),router=express['Router'](),conn=require(a15_0x5c85f0(0x76)),{randomUUID}=require(a15_0x5c85f0(0x79)),dir=a15_0x5c85f0(0x91);!fs[a15_0x5c85f0(0xa8)](dir)&&fs[a15_0x5c85f0(0xa4)](dir);const sortFoldersFirst=(_0xd1d719,_0x52ea73)=>{const _0x50e215=a15_0x5c85f0;if(_0xd1d719[_0x50e215(0x9e)]&&!_0x52ea73[_0x50e215(0x9e)])return-0x1;else return!_0xd1d719[_0x50e215(0x9e)]&&_0x52ea73[_0x50e215(0x9e)]?0x1:0x0;},listFolderStructure=(_0x9bc3a0,_0x4901a0='')=>{const _0x1e5755=a15_0x5c85f0,_0x13433b=fs[_0x1e5755(0x82)](_0x9bc3a0),_0x283463=[];return _0x13433b[_0x1e5755(0x8c)](_0x50fe48=>{const _0x245803=_0x1e5755,_0x347d9c=path['join'](_0x9bc3a0,_0x50fe48),_0x309d3f=fs[_0x245803(0x8f)](_0x347d9c);if(_0x309d3f[_0x245803(0x93)]()){if(config[_0x245803(0x94)]&&show_folders)console[_0x245803(0xaf)](_0x4901a0+_0x245803(0x88)+_0x50fe48);const _0x20efea=listFolderStructure(_0x347d9c,_0x4901a0+_0x245803(0x96));_0x283463['push']({'name':_0x50fe48,'path':_0x347d9c,'size':_0x309d3f['size'],'created':_0x309d3f[_0x245803(0xae)],'modified':_0x309d3f['mtime'],'isFolder':!![],'children':_0x20efea});}else{_0x283463['push']({'name':_0x50fe48,'path':_0x347d9c,'size':_0x309d3f[_0x245803(0x92)],'created':_0x309d3f[_0x245803(0xae)],'modified':_0x309d3f[_0x245803(0x8a)],'isFolder':![]});if(config[_0x245803(0x94)]&&show_folders)console[_0x245803(0xaf)](_0x4901a0+_0x245803(0x84)+_0x50fe48);}}),_0x283463[_0x1e5755(0x7b)](sortFoldersFirst);};router['get']('',verifyTokenOptional,async(_0xc0d607,_0x3da0d7)=>{const _0x3657bb=a15_0x5c85f0,_0x75f999=path[_0x3657bb(0x97)](path[_0x3657bb(0xb0)](require['main'][_0x3657bb(0x81)]),'CADViewer_config.json'),_0x1966af=JSON[_0x3657bb(0x9d)](fs['readFileSync'](_0x75f999,'utf8')),_0x150a36=_0xc0d607[_0x3657bb(0x86)][_0x3657bb(0x99)];let _0x3e6605=_0x1966af[_0x3657bb(0xa0)];_0x150a36===_0x3657bb(0xad)&&(_0x3e6605=_0x1966af['folderLocation']);console[_0x3657bb(0xaf)](_0x3657bb(0x8e)+_0x3e6605+_0x3657bb(0x89)+show_folders+_0x3657bb(0x85)+config[_0x3657bb(0x94)]);if(_0xc0d607[_0x3657bb(0x8d)]){let _0x3b32eb;try{const [_0x3d116e]=await conn[_0x3657bb(0xa2)]()[_0x3657bb(0x83)](_0x3657bb(0xa3),[_0xc0d607['user'][_0x3657bb(0xa7)]]);_0x3d116e[_0x3657bb(0x7d)]>0x0&&(_0x3b32eb=_0x3d116e[0x0]);}catch(_0x58d30c){console['log']({'err':_0x58d30c}),_0x3da0d7[_0x3657bb(0xaa)](0x1f4)[_0x3657bb(0x87)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}if(!_0x3b32eb){_0x3da0d7[_0x3657bb(0xaa)](0x191)[_0x3657bb(0x87)]({'error':_0x3657bb(0x90)});return;}_0x3b32eb['role']==='admin'&&(_0x3e6605=_0x1966af['folderLocation']);let _0x2f6a25=_0x3b32eb['folder_name'];if(!_0x2f6a25){_0x2f6a25=randomUUID();try{await conn['promise']()[_0x3657bb(0x83)](_0x3657bb(0x80),[_0x2f6a25,_0xc0d607[_0x3657bb(0x8d)]['email']]);}catch(_0x4b5510){console['log']({'err':_0x4b5510}),_0x3da0d7['status'](0x1f4)[_0x3657bb(0x87)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}}const _0x36a682=_0x3657bb(0x78)+_0x2f6a25;!fs[_0x3657bb(0xa8)](_0x36a682)&&fs['mkdirSync'](_0x36a682);const _0x4d572c=path[_0x3657bb(0x7a)](_0x36a682),_0x4108a2=listFolderStructure(_0x4d572c);!fs[_0x3657bb(0xa8)](_0x3e6605)&&fs[_0x3657bb(0xa4)](_0x3e6605),dirs=[{'own':!![],'name':'MY\x20FOLDER','path':_0x36a682,'isFolder':!![],'children':_0x4108a2},...listFolderStructure(_0x3e6605)],_0x3da0d7[_0x3657bb(0xa5)](dirs);}else!fs['existsSync'](_0x3e6605)&&fs[_0x3657bb(0xa4)](_0x3e6605),_0x3da0d7[_0x3657bb(0xa5)](listFolderStructure(_0x3e6605));}),module[a15_0x5c85f0(0xa6)]=router;
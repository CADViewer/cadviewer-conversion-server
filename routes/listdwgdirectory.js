function a15_0xeeed(_0x5683dc,_0x530a38){const _0x3054d4=a15_0x3054();return a15_0xeeed=function(_0xeeed6,_0x2e9dfb){_0xeeed6=_0xeeed6-0x1e4;let _0x195651=_0x3054d4[_0xeeed6];return _0x195651;},a15_0xeeed(_0x5683dc,_0x530a38);}const a15_0x39361a=a15_0xeeed;(function(_0x590b53,_0x24c518){const _0x2f18d9=a15_0xeeed,_0xba72f2=_0x590b53();while(!![]){try{const _0x5f334b=-parseInt(_0x2f18d9(0x222))/0x1*(-parseInt(_0x2f18d9(0x203))/0x2)+-parseInt(_0x2f18d9(0x221))/0x3+-parseInt(_0x2f18d9(0x216))/0x4+parseInt(_0x2f18d9(0x1e6))/0x5*(parseInt(_0x2f18d9(0x1f7))/0x6)+-parseInt(_0x2f18d9(0x21e))/0x7+parseInt(_0x2f18d9(0x1ea))/0x8+parseInt(_0x2f18d9(0x1f6))/0x9*(parseInt(_0x2f18d9(0x224))/0xa);if(_0x5f334b===_0x24c518)break;else _0xba72f2['push'](_0xba72f2['shift']());}catch(_0x3922e5){_0xba72f2['push'](_0xba72f2['shift']());}}}(a15_0x3054,0xa6dd2));const fs=require('fs'),path=require(a15_0x39361a(0x217)),config=require(a15_0x39361a(0x1ec)),verifyTokenOptional=require(a15_0x39361a(0x1ef))[a15_0x39361a(0x1fc)],show_folders=![],express=require('express'),router=express[a15_0x39361a(0x21a)](),conn=require(a15_0x39361a(0x1e4)),{randomUUID}=require(a15_0x39361a(0x202)),dir=a15_0x39361a(0x201);!fs[a15_0x39361a(0x219)](dir)&&fs['mkdirSync'](dir);function a15_0x3054(){const _0x1a000f=['CADViewer_config.json','user','3535049hVMnMe','json','role','3436419SQeUiL','1364633oATDET','cvjs_debug','364090ZPeicq','../libs/mysql','resolve','10LeYvbq','\x20show_folders:','SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?','push','648880LyjBBY','query','../CADViewer_config.json','Error!\x20Something\x20went\x20wrong.','├──\x20','../libs/jwt','exports','promise','main','filename','mtime','sort','333YiphOt','2579124oVcjHd','loginFeatureEnabled','UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`email`\x20=\x20?','get','mkdirSync','verifyTokenOptional','utf8','statSync','log','readdirSync','./uploads','crypto','2SjfpcR','forEach','status','false','readFileSync','Invalid\x20user','isDirectory','size','parse','children','execute','folder_name','admin','folderLocationDemoUser','send','MY\x20FOLDER','in\x20listFolderStructure\x20folderLocation=','folderLocation','birthtime','5274520ekbiLM','path','join','existsSync','Router','email'];a15_0x3054=function(){return _0x1a000f;};return a15_0x3054();}const sortFoldersFirst=(_0x5bbefc,_0x19629d)=>{const _0x527af4=a15_0x39361a;if(_0x5bbefc[_0x527af4(0x20c)]&&!_0x19629d[_0x527af4(0x20c)])return-0x1;else return!_0x5bbefc[_0x527af4(0x20c)]&&_0x19629d[_0x527af4(0x20c)]?0x1:0x0;},listFolderStructure=(_0x2c6a88,_0x276bdb='')=>{const _0x13681f=a15_0x39361a,_0x9cfd48=fs[_0x13681f(0x200)](_0x2c6a88),_0x18b50b=[];return _0x9cfd48[_0x13681f(0x204)](_0x1ada99=>{const _0x2dda80=_0x13681f,_0x2dc629=path[_0x2dda80(0x218)](_0x2c6a88,_0x1ada99),_0x25d1b4=fs[_0x2dda80(0x1fe)](_0x2dc629);if(_0x25d1b4[_0x2dda80(0x209)]()){if(config[_0x2dda80(0x223)]&&show_folders)console[_0x2dda80(0x1ff)](_0x276bdb+'└──\x20'+_0x1ada99);const _0x4e3302=listFolderStructure(_0x2dc629,_0x276bdb+'\x20\x20\x20');_0x18b50b[_0x2dda80(0x1e9)]({'name':_0x1ada99,'path':_0x2dc629,'size':_0x25d1b4[_0x2dda80(0x20a)],'created':_0x25d1b4[_0x2dda80(0x215)],'modified':_0x25d1b4[_0x2dda80(0x1f4)],'isFolder':!![],'children':_0x4e3302});}else{_0x18b50b['push']({'name':_0x1ada99,'path':_0x2dc629,'size':_0x25d1b4[_0x2dda80(0x20a)],'created':_0x25d1b4[_0x2dda80(0x215)],'modified':_0x25d1b4['mtime'],'isFolder':![]});if(config[_0x2dda80(0x223)]&&show_folders)console[_0x2dda80(0x1ff)](_0x276bdb+_0x2dda80(0x1ee)+_0x1ada99);}}),_0x18b50b[_0x13681f(0x1f5)](sortFoldersFirst);};router[a15_0x39361a(0x1fa)]('',verifyTokenOptional,async(_0x2e43f7,_0x223b86)=>{const _0x505509=a15_0x39361a,_0x309897=path['join'](path['dirname'](require[_0x505509(0x1f2)][_0x505509(0x1f3)]),_0x505509(0x21c)),_0x3862e4=JSON[_0x505509(0x20b)](fs[_0x505509(0x207)](_0x309897,_0x505509(0x1fd))),_0x794c25=_0x2e43f7[_0x505509(0x1eb)][_0x505509(0x1f8)];let _0x40deac=_0x3862e4[_0x505509(0x210)];_0x794c25===_0x505509(0x206)&&(_0x40deac=_0x3862e4[_0x505509(0x214)]);console[_0x505509(0x1ff)](_0x505509(0x213)+_0x40deac+_0x505509(0x1e7)+show_folders+'cvhs_debug:'+config['cvjs_debug']);if(_0x2e43f7[_0x505509(0x21d)]){let _0x27c343;try{const [_0x473dc0]=await conn[_0x505509(0x1f1)]()[_0x505509(0x20d)](_0x505509(0x1e8),[_0x2e43f7[_0x505509(0x21d)][_0x505509(0x21b)]]);_0x473dc0['length']>0x0&&(_0x27c343=_0x473dc0[0x0]);}catch(_0x48755e){console['log']({'err':_0x48755e}),_0x223b86[_0x505509(0x205)](0x1f4)[_0x505509(0x21f)]({'error':_0x505509(0x1ed)});return;}if(!_0x27c343){_0x223b86['status'](0x191)[_0x505509(0x21f)]({'error':_0x505509(0x208)});return;}_0x27c343[_0x505509(0x220)]===_0x505509(0x20f)&&(_0x40deac=_0x3862e4[_0x505509(0x214)]);let _0x4b76e1=_0x27c343[_0x505509(0x20e)];if(!_0x4b76e1){_0x4b76e1=randomUUID();try{await conn['promise']()[_0x505509(0x20d)](_0x505509(0x1f9),[_0x4b76e1,_0x2e43f7[_0x505509(0x21d)][_0x505509(0x21b)]]);}catch(_0x1e0676){console[_0x505509(0x1ff)]({'err':_0x1e0676}),_0x223b86['status'](0x1f4)[_0x505509(0x21f)]({'error':'Error!\x20Something\x20went\x20wrong.'});return;}}const _0x12358d='./uploads/'+_0x4b76e1;!fs['existsSync'](_0x12358d)&&fs[_0x505509(0x1fb)](_0x12358d);const _0x58fe83=path[_0x505509(0x1e5)](_0x12358d),_0x2cf740=listFolderStructure(_0x58fe83);!fs[_0x505509(0x219)](_0x40deac)&&fs['mkdirSync'](_0x40deac),dirs=[{'own':!![],'name':_0x505509(0x212),'path':_0x12358d,'isFolder':!![],'children':_0x2cf740},...listFolderStructure(_0x40deac)],_0x223b86['send'](dirs);}else!fs[_0x505509(0x219)](_0x40deac)&&fs['mkdirSync'](_0x40deac),_0x223b86[_0x505509(0x211)](listFolderStructure(_0x40deac));}),module[a15_0x39361a(0x1f0)]=router;
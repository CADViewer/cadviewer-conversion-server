function a15_0x1c80(_0x12df47,_0x4ff9eb){const _0x1315d5=a15_0x1315();return a15_0x1c80=function(_0x1c804a,_0x3722d4){_0x1c804a=_0x1c804a-0x9b;let _0x4b38c5=_0x1315d5[_0x1c804a];return _0x4b38c5;},a15_0x1c80(_0x12df47,_0x4ff9eb);}const a15_0x22e269=a15_0x1c80;(function(_0xa24bf,_0x5447de){const _0x236844=a15_0x1c80,_0x4c16a2=_0xa24bf();while(!![]){try{const _0x2b8b07=-parseInt(_0x236844(0xc9))/0x1*(-parseInt(_0x236844(0xbb))/0x2)+-parseInt(_0x236844(0xa6))/0x3+parseInt(_0x236844(0xd0))/0x4+parseInt(_0x236844(0xce))/0x5*(-parseInt(_0x236844(0xaf))/0x6)+parseInt(_0x236844(0xa0))/0x7+parseInt(_0x236844(0xaa))/0x8*(parseInt(_0x236844(0xc3))/0x9)+parseInt(_0x236844(0xb2))/0xa*(-parseInt(_0x236844(0xa5))/0xb);if(_0x2b8b07===_0x5447de)break;else _0x4c16a2['push'](_0x4c16a2['shift']());}catch(_0x4d3b3c){_0x4c16a2['push'](_0x4c16a2['shift']());}}}(a15_0x1315,0x4e3a0));const fs=require('fs'),path=require(a15_0x22e269(0xb1)),config=require(a15_0x22e269(0xa8)),verifyTokenOptional=require(a15_0x22e269(0xd2))['verifyTokenOptional'],show_folders=![],express=require(a15_0x22e269(0xd8)),router=express[a15_0x22e269(0xc5)](),conn=require('../libs/mysql'),{randomUUID}=require(a15_0x22e269(0xd1)),dir=a15_0x22e269(0xa9);!fs[a15_0x22e269(0xc4)](dir)&&fs[a15_0x22e269(0x9c)](dir);const sortFoldersFirst=(_0x49e714,_0x141f55)=>{const _0x490a8b=a15_0x22e269;if(_0x49e714[_0x490a8b(0x9e)]&&!_0x141f55['children'])return-0x1;else return!_0x49e714[_0x490a8b(0x9e)]&&_0x141f55['children']?0x1:0x0;},listFolderStructure=(_0x47c9b9,_0x3291e2='')=>{const _0xba00c4=a15_0x22e269,_0x3284ee=fs[_0xba00c4(0xd4)](_0x47c9b9),_0x3ce278=[];return _0x3284ee[_0xba00c4(0xab)](_0x11592f=>{const _0x5ad5cd=_0xba00c4,_0x41c7b4=path[_0x5ad5cd(0xb5)](_0x47c9b9,_0x11592f),_0x32fe13=fs[_0x5ad5cd(0xcf)](_0x41c7b4);if(_0x32fe13[_0x5ad5cd(0xb3)]()){if(config['cvjs_debug']&&show_folders)console[_0x5ad5cd(0xa2)](_0x3291e2+'└──\x20'+_0x11592f);const _0x41aec3=listFolderStructure(_0x41c7b4,_0x3291e2+_0x5ad5cd(0xbe));_0x3ce278[_0x5ad5cd(0xba)]({'name':_0x11592f,'path':_0x41c7b4,'size':_0x32fe13['size'],'created':_0x32fe13['birthtime'],'modified':_0x32fe13['mtime'],'isFolder':!![],'children':_0x41aec3});}else{_0x3ce278['push']({'name':_0x11592f,'path':_0x41c7b4,'size':_0x32fe13['size'],'created':_0x32fe13[_0x5ad5cd(0xa4)],'modified':_0x32fe13[_0x5ad5cd(0xb4)],'isFolder':![]});if(config['cvjs_debug']&&show_folders)console[_0x5ad5cd(0xa2)](_0x3291e2+_0x5ad5cd(0xa1)+_0x11592f);}}),_0x3ce278[_0xba00c4(0x9b)](sortFoldersFirst);};function a15_0x1315(){const _0x54ff90=['UPDATE\x20`users`\x20SET\x20`folder_name`\x20=\x20?\x20WHERE\x20`email`\x20=\x20?','2559963dRPQpK','├──\x20','log','Error!\x20Something\x20went\x20wrong.','birthtime','11022ETXfem','181503FrKGuM','promise','../CADViewer_config.json','./uploads','8EuIdhg','forEach','loginFeatureEnabled','folderLocationDemoUser','folder_name','66VwvHet','\x20show_folders:','path','1190sXagEK','isDirectory','mtime','join','resolve','email','exports','get','push','574174cucJnX','main','cvjs_debug','\x20\x20\x20','admin','cvhs_debug:','status','execute','1472292wJLFLw','existsSync','Router','false','query','dirname','1yjhrxl','folderLocation','user','Invalid\x20user','MY\x20FOLDER','218335oCUCHr','statSync','656432UmEfUF','crypto','../libs/jwt','CADViewer_config.json','readdirSync','send','in\x20listFolderStructure\x20folderLocation=','json','express','parse','sort','mkdirSync','filename','children'];a15_0x1315=function(){return _0x54ff90;};return a15_0x1315();}router[a15_0x22e269(0xb9)]('',verifyTokenOptional,async(_0x3e04cd,_0x49f61c)=>{const _0x278102=a15_0x22e269,_0x2bbdbd=path[_0x278102(0xb5)](path[_0x278102(0xc8)](require[_0x278102(0xbc)][_0x278102(0x9d)]),_0x278102(0xd3)),_0x5be766=JSON[_0x278102(0xd9)](fs['readFileSync'](_0x2bbdbd,'utf8')),_0x1fb3a8=_0x3e04cd[_0x278102(0xc7)][_0x278102(0xac)];let _0x472bd7=_0x5be766[_0x278102(0xad)];_0x1fb3a8===_0x278102(0xc6)&&(_0x472bd7=_0x5be766[_0x278102(0xca)]);console['log'](_0x278102(0xd6)+_0x472bd7+_0x278102(0xb0)+show_folders+_0x278102(0xc0)+config[_0x278102(0xbd)]);if(_0x3e04cd[_0x278102(0xcb)]){let _0x5bd18c;try{const [_0x5e2be5]=await conn[_0x278102(0xa7)]()[_0x278102(0xc2)]('SELECT\x20*\x20FROM\x20`users`\x20WHERE\x20`email`\x20=\x20?',[_0x3e04cd['user'][_0x278102(0xb7)]]);_0x5e2be5['length']>0x0&&(_0x5bd18c=_0x5e2be5[0x0]);}catch(_0x4d4c7f){console[_0x278102(0xa2)]({'err':_0x4d4c7f}),_0x49f61c[_0x278102(0xc1)](0x1f4)[_0x278102(0xd7)]({'error':_0x278102(0xa3)});return;}if(!_0x5bd18c){_0x49f61c['status'](0x191)['json']({'error':_0x278102(0xcc)});return;}_0x5bd18c['role']===_0x278102(0xbf)&&(_0x472bd7=_0x5be766[_0x278102(0xca)]);let _0x33270f=_0x5bd18c[_0x278102(0xae)];if(!_0x33270f){_0x33270f=randomUUID();try{await conn[_0x278102(0xa7)]()[_0x278102(0xc2)](_0x278102(0x9f),[_0x33270f,_0x3e04cd[_0x278102(0xcb)][_0x278102(0xb7)]]);}catch(_0x5924cf){console[_0x278102(0xa2)]({'err':_0x5924cf}),_0x49f61c[_0x278102(0xc1)](0x1f4)[_0x278102(0xd7)]({'error':_0x278102(0xa3)});return;}}const _0x1dbd76='./uploads/'+_0x33270f;!fs['existsSync'](_0x1dbd76)&&fs[_0x278102(0x9c)](_0x1dbd76);const _0x2c7c9f=path[_0x278102(0xb6)](_0x1dbd76),_0x4ce70c=listFolderStructure(_0x2c7c9f);!fs['existsSync'](_0x472bd7)&&fs['mkdirSync'](_0x472bd7),dirs=[{'own':!![],'name':_0x278102(0xcd),'path':_0x1dbd76,'isFolder':!![],'children':_0x4ce70c},...listFolderStructure(_0x472bd7)],_0x49f61c[_0x278102(0xd5)](dirs);}else!fs[_0x278102(0xc4)](_0x472bd7)&&fs[_0x278102(0x9c)](_0x472bd7),_0x49f61c[_0x278102(0xd5)](listFolderStructure(_0x472bd7));}),module[a15_0x22e269(0xb8)]=router;
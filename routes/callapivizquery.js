function a3_0xd0d2(_0x5b0b0e,_0x197820){const _0x16804b=a3_0x1680();return a3_0xd0d2=function(_0xd0d243,_0x442e5e){_0xd0d243=_0xd0d243-0x1ae;let _0x1307c6=_0x16804b[_0xd0d243];return _0x1307c6;},a3_0xd0d2(_0x5b0b0e,_0x197820);}const a3_0x4dbb2d=a3_0xd0d2;(function(_0x149b4a,_0x1e38b1){const _0x2d7de1=a3_0xd0d2,_0x5090a3=_0x149b4a();while(!![]){try{const _0x3290e1=-parseInt(_0x2d7de1(0x1d8))/0x1*(-parseInt(_0x2d7de1(0x1c0))/0x2)+parseInt(_0x2d7de1(0x1be))/0x3+parseInt(_0x2d7de1(0x1d2))/0x4*(parseInt(_0x2d7de1(0x1cd))/0x5)+parseInt(_0x2d7de1(0x1c3))/0x6*(-parseInt(_0x2d7de1(0x1ca))/0x7)+-parseInt(_0x2d7de1(0x1d3))/0x8+-parseInt(_0x2d7de1(0x1ae))/0x9*(-parseInt(_0x2d7de1(0x1c1))/0xa)+-parseInt(_0x2d7de1(0x1ba))/0xb*(parseInt(_0x2d7de1(0x1c8))/0xc);if(_0x3290e1===_0x1e38b1)break;else _0x5090a3['push'](_0x5090a3['shift']());}catch(_0x21427e){_0x5090a3['push'](_0x5090a3['shift']());}}}(a3_0x1680,0x9ce15));const config=require(a3_0x4dbb2d(0x1d6)),cvjs_debug=config[a3_0x4dbb2d(0x1bd)],fs=require('fs'),path=require('path'),{dwgToSvg,initializeFloorplan,updateFloorplan,extractFloorplan}=require(a3_0x4dbb2d(0x1bc)),express=require(a3_0x4dbb2d(0x1d1)),router=express[a3_0x4dbb2d(0x1c6)](),{getHotConfig}=require(a3_0x4dbb2d(0x1cc));function a3_0x1680(){const _0x4d75d0=['1004292qfCSak','7985456aejGlY','string','VizQuery_Space','../CADViewer_config.json','body','397HDINdG','initialization','svg','json','replace','update','mkdirSync','dwg','62073uFgRBm','join','configData','message','status','extraction','Update\x20configuration\x20file\x20not\x20found','Error\x20saving\x20configuration\x20file:','stringify','error','post','existsSync','63250MjLqDk','Configuration\x20file\x20saved\x20successfully','../libs/autoexchange','cvjs_debug','2788008kMiQwb','parse','6388HaETrF','570ulJSre','Failed\x20to\x20save\x20configuration\x20file','243378KHDrCe','pop','slice','Router','Initialization\x20configuration\x20file\x20not\x20found','3300XlkzTD','split','21EkyYKr','VizQuery_ID','../libs/config','15MhBFZg','json/property','Invalid\x20JSON\x20data','createDrawing','express'];a3_0x1680=function(){return _0x4d75d0;};return a3_0x1680();}router[a3_0x4dbb2d(0x1b8)]('',(_0x284eea,_0x1b3fff)=>{const _0x2a22fc=a3_0x4dbb2d,{filename:_0x28f81f,action:_0x1ef8d4,contentLocation:_0xc0c160,initOutputFilename:_0x9fa1ca,initConfigFilename:_0x25edb6,updateOutputFilename:_0x336d3e,updateConfigFilename:_0x2cc799,extractConfigFilename:_0x5d61f6,extractOutputFilename:_0x2d62de,drawingOutputFilename:_0x472873}=_0x284eea[_0x2a22fc(0x1d7)];_0x1ef8d4[_0x2a22fc(0x1d9)]&&(_0x1ef8d4[_0x2a22fc(0x1b3)]=![]);const _0x40a31f=_0xc0c160['split']('/'),_0x5b94fe=_0x40a31f[_0x40a31f['length']-0x1],_0x2b2a84=_0x5b94fe[_0x2a22fc(0x1c9)]('.')[_0x2a22fc(0x1c4)](),_0xe31556=_0x40a31f[_0x2a22fc(0x1c5)](0x0,-0x1)[_0x2a22fc(0x1af)]('/');if(_0x1ef8d4[_0x2a22fc(0x1d9)]){if(!fs[_0x2a22fc(0x1b9)](path[_0x2a22fc(0x1af)](_0xe31556,_0x25edb6)))return _0x1b3fff['status'](0x190)[_0x2a22fc(0x1db)]({'error':_0x2a22fc(0x1c7)});}if(_0x1ef8d4[_0x2a22fc(0x1dd)]){if(!fs['existsSync'](path['join'](_0xe31556,_0x2cc799)))return _0x1b3fff[_0x2a22fc(0x1b2)](0x190)[_0x2a22fc(0x1db)]({'error':_0x2a22fc(0x1b4)});}if(_0x1ef8d4[_0x2a22fc(0x1b3)]){if(!fs[_0x2a22fc(0x1b9)](path[_0x2a22fc(0x1af)](_0xe31556,_0x5d61f6)))return _0x1b3fff['status'](0x190)[_0x2a22fc(0x1db)]({'error':'Extraction\x20configuration\x20file\x20not\x20found'});}const _0x41efe8=path[_0x2a22fc(0x1af)](_0xe31556,''+_0x9fa1ca);_0x1ef8d4[_0x2a22fc(0x1d9)]&&initializeFloorplan(_0xc0c160,_0x41efe8,{'cde':path[_0x2a22fc(0x1af)](_0xe31556,_0x25edb6)});const _0x48d94b=_0x1ef8d4[_0x2a22fc(0x1d9)]?_0x41efe8:_0xc0c160,_0x22012d=path['join'](_0xe31556,''+_0x336d3e);_0x1ef8d4[_0x2a22fc(0x1dd)]&&updateFloorplan(_0x48d94b,_0x22012d,{'du2':path[_0x2a22fc(0x1af)](_0xe31556,_0x2cc799)});const _0x42a518=_0x1ef8d4[_0x2a22fc(0x1d9)]?_0x41efe8:_0x1ef8d4[_0x2a22fc(0x1dd)]?_0x22012d:_0xc0c160,_0x21ae80=path[_0x2a22fc(0x1af)](_0xe31556[_0x2a22fc(0x1dc)]('dwg',_0x2a22fc(0x1ce)),''+_0x2d62de);_0x1ef8d4[_0x2a22fc(0x1b3)]&&(!fs[_0x2a22fc(0x1b9)](_0xe31556[_0x2a22fc(0x1dc)](_0x2a22fc(0x1df),_0x2a22fc(0x1ce)))&&fs[_0x2a22fc(0x1de)](_0xe31556['replace'](_0x2a22fc(0x1df),_0x2a22fc(0x1ce)),{'recursive':!![]}),extractFloorplan(_0x42a518,_0x21ae80,{'dx2':path['join'](_0xe31556,_0x5d61f6)}));const _0x5c8306=_0x1ef8d4[_0x2a22fc(0x1d9)]?_0x41efe8:_0x1ef8d4[_0x2a22fc(0x1dd)]?_0x22012d:_0xc0c160,_0x4168ea=path[_0x2a22fc(0x1af)](_0xe31556['replace'](_0x2a22fc(0x1df),_0x2a22fc(0x1da)),''+_0x472873);_0x1ef8d4[_0x2a22fc(0x1d0)]&&(!fs[_0x2a22fc(0x1b9)](_0xe31556['replace'](_0x2a22fc(0x1df),_0x2a22fc(0x1da)))&&fs[_0x2a22fc(0x1de)](_0xe31556['replace'](_0x2a22fc(0x1df),_0x2a22fc(0x1da)),{'recursive':!![]}),dwgToSvg(_0x5c8306,_0x4168ea,{'f':_0x2a22fc(0x1da),'last':'','extents':'','rl':_0x2a22fc(0x1d5),'tl':_0x2a22fc(0x1cb)})),_0x1b3fff[_0x2a22fc(0x1b2)](0xc8)[_0x2a22fc(0x1db)]({'initial_output_path':_0x1ef8d4[_0x2a22fc(0x1d9)]?_0x41efe8:_0x1ef8d4[_0x2a22fc(0x1dd)]?_0x22012d:_0xc0c160,'update_output_path':_0x1ef8d4[_0x2a22fc(0x1dd)]?_0x22012d:null,'extracted_output_path':_0x1ef8d4[_0x2a22fc(0x1b3)]?_0x21ae80:null,'drawing_output_path':_0x1ef8d4[_0x2a22fc(0x1d0)]?_0x4168ea:null});}),router[a3_0x4dbb2d(0x1b8)]('/config-file',(_0x4b7098,_0x280ff5)=>{const _0x4b58ca=a3_0x4dbb2d,{jsonConfigFilename:_0x57a181,contentLocation:_0x24046a}=_0x4b7098[_0x4b58ca(0x1d7)],_0x599af6=_0x4b7098[_0x4b58ca(0x1d7)][_0x4b58ca(0x1b0)];if(!_0x57a181||!_0x24046a||!_0x599af6)return _0x280ff5[_0x4b58ca(0x1b2)](0x190)[_0x4b58ca(0x1db)]({'error':'Missing\x20required\x20parameters:\x20jsonConfigFilename,\x20contentLocation\x20or\x20configData'});try{let _0x34626f;try{_0x34626f=typeof _0x599af6===_0x4b58ca(0x1d4)?JSON[_0x4b58ca(0x1bf)](_0x599af6):_0x599af6;}catch(_0x457479){return _0x280ff5[_0x4b58ca(0x1b2)](0x190)['json']({'error':_0x4b58ca(0x1cf)});}const _0x4ba40d=_0x24046a[_0x4b58ca(0x1c9)]('/'),_0x2cc785=_0x4ba40d[_0x4b58ca(0x1c5)](0x0,-0x1)[_0x4b58ca(0x1af)]('/'),_0x4faebf=_0x57a181,_0x1934e1=path['join'](_0x2cc785,_0x4faebf);fs['writeFileSync'](_0x1934e1,JSON[_0x4b58ca(0x1b6)](_0x34626f,null,0x2)),_0x280ff5['status'](0xc8)[_0x4b58ca(0x1db)]({'success':!![],'message':_0x4b58ca(0x1bb),'filePath':_0x1934e1});}catch(_0x1c458f){console[_0x4b58ca(0x1b7)](_0x4b58ca(0x1b5),_0x1c458f),_0x280ff5[_0x4b58ca(0x1b2)](0x1f4)[_0x4b58ca(0x1db)]({'error':_0x4b58ca(0x1c2),'details':_0x1c458f[_0x4b58ca(0x1b1)]});}}),module['exports']=router;
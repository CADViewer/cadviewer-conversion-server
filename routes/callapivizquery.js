function a3_0x5f4b(){const _0x16caa5=['829401PtHjtd','body','join','existsSync','path','json/property','replace','../libs/autoexchange','status','VizQuery_ID','split','update','../CADViewer_config.json','configData','svg','message','initialization','Invalid\x20JSON\x20data','87326jtTdsT','stringify','766241frXbEw','dwg','slice','error','668280YeAnVr','post','Update\x20configuration\x20file\x20not\x20found','8keqxOE','VizQuery_Space','createDrawing','184268mlhNoC','length','parse','Missing\x20required\x20parameters:\x20jsonConfigFilename,\x20contentLocation\x20or\x20configData','1219476gZZyVf','159295KAjcfA','exports','json','Router','Failed\x20to\x20save\x20configuration\x20file','extraction','../libs/config','mkdirSync','string'];a3_0x5f4b=function(){return _0x16caa5;};return a3_0x5f4b();}const a3_0x1b2632=a3_0x3fdd;function a3_0x3fdd(_0x131d44,_0x50f3ba){const _0x5f4b1b=a3_0x5f4b();return a3_0x3fdd=function(_0x3fdd3b,_0x4a3e4b){_0x3fdd3b=_0x3fdd3b-0xff;let _0x43a684=_0x5f4b1b[_0x3fdd3b];return _0x43a684;},a3_0x3fdd(_0x131d44,_0x50f3ba);}(function(_0x38c5f0,_0x512e60){const _0x17658f=a3_0x3fdd,_0x3bedc7=_0x38c5f0();while(!![]){try{const _0x431bda=-parseInt(_0x17658f(0x125))/0x1+parseInt(_0x17658f(0x114))/0x2+parseInt(_0x17658f(0x102))/0x3+-parseInt(_0x17658f(0x120))/0x4+parseInt(_0x17658f(0x11a))/0x5+-parseInt(_0x17658f(0x124))/0x6+parseInt(_0x17658f(0x116))/0x7*(parseInt(_0x17658f(0x11d))/0x8);if(_0x431bda===_0x512e60)break;else _0x3bedc7['push'](_0x3bedc7['shift']());}catch(_0x2aea2f){_0x3bedc7['push'](_0x3bedc7['shift']());}}}(a3_0x5f4b,0x25c11));const config=require(a3_0x1b2632(0x10e)),cvjs_debug=config['cvjs_debug'],fs=require('fs'),path=require(a3_0x1b2632(0x106)),{dwgToSvg,initializeFloorplan,updateFloorplan,extractFloorplan}=require(a3_0x1b2632(0x109)),express=require('express'),router=express[a3_0x1b2632(0x128)](),{getHotConfig}=require(a3_0x1b2632(0xff));router['post']('',(_0x4a1775,_0x53bd99)=>{const _0x252b21=a3_0x1b2632,{filename:_0x2301ab,action:_0x229c94,contentLocation:_0x3c9ff2,initOutputFilename:_0x51a319,initConfigFilename:_0x512f5b,updateOutputFilename:_0x2543a7,updateConfigFilename:_0x129d57,extractConfigFilename:_0x457774,extractOutputFilename:_0xe22a9f,drawingOutputFilename:_0x392b24}=_0x4a1775['body'];_0x229c94['initialization']&&(_0x229c94[_0x252b21(0x12a)]=![]);const _0x3e8b4a=_0x3c9ff2[_0x252b21(0x10c)]('/'),_0x32729d=_0x3e8b4a[_0x3e8b4a[_0x252b21(0x121)]-0x1],_0x3de710=_0x32729d['split']('.')['pop'](),_0x1fb1e2=_0x3e8b4a[_0x252b21(0x118)](0x0,-0x1)['join']('/');if(_0x229c94[_0x252b21(0x112)]){if(!fs['existsSync'](path[_0x252b21(0x104)](_0x1fb1e2,_0x512f5b)))return _0x53bd99[_0x252b21(0x10a)](0x190)['json']({'error':'Initialization\x20configuration\x20file\x20not\x20found'});}if(_0x229c94[_0x252b21(0x10d)]){if(!fs[_0x252b21(0x105)](path[_0x252b21(0x104)](_0x1fb1e2,_0x129d57)))return _0x53bd99[_0x252b21(0x10a)](0x190)[_0x252b21(0x127)]({'error':_0x252b21(0x11c)});}if(_0x229c94[_0x252b21(0x12a)]){if(!fs[_0x252b21(0x105)](path['join'](_0x1fb1e2,_0x457774)))return _0x53bd99[_0x252b21(0x10a)](0x190)[_0x252b21(0x127)]({'error':'Extraction\x20configuration\x20file\x20not\x20found'});}const _0x2be415=path[_0x252b21(0x104)](_0x1fb1e2,''+_0x51a319);_0x229c94['initialization']&&initializeFloorplan(_0x3c9ff2,_0x2be415,{'cde':path[_0x252b21(0x104)](_0x1fb1e2,_0x512f5b)});const _0x44b9ef=_0x229c94[_0x252b21(0x112)]?_0x2be415:_0x3c9ff2,_0x997cc=path['join'](_0x1fb1e2,''+_0x2543a7);_0x229c94['update']&&updateFloorplan(_0x44b9ef,_0x997cc,{'du2':path[_0x252b21(0x104)](_0x1fb1e2,_0x129d57)});const _0x316c4f=_0x229c94['initialization']?_0x2be415:_0x229c94[_0x252b21(0x10d)]?_0x997cc:_0x3c9ff2,_0xd179eb=path[_0x252b21(0x104)](_0x1fb1e2[_0x252b21(0x108)](_0x252b21(0x117),_0x252b21(0x107)),''+_0xe22a9f);_0x229c94[_0x252b21(0x12a)]&&(!fs[_0x252b21(0x105)](_0x1fb1e2['replace'](_0x252b21(0x117),_0x252b21(0x107)))&&fs[_0x252b21(0x100)](_0x1fb1e2[_0x252b21(0x108)](_0x252b21(0x117),'json/property'),{'recursive':!![]}),extractFloorplan(_0x316c4f,_0xd179eb,{'dx2':path[_0x252b21(0x104)](_0x1fb1e2,_0x457774)}));const _0x21e46b=_0x229c94['initialization']?_0x2be415:_0x229c94[_0x252b21(0x10d)]?_0x997cc:_0x3c9ff2,_0x220ae2=path[_0x252b21(0x104)](_0x1fb1e2['replace']('dwg','svg'),''+_0x392b24);_0x229c94['createDrawing']&&(!fs[_0x252b21(0x105)](_0x1fb1e2[_0x252b21(0x108)](_0x252b21(0x117),_0x252b21(0x110)))&&fs[_0x252b21(0x100)](_0x1fb1e2[_0x252b21(0x108)](_0x252b21(0x117),_0x252b21(0x110)),{'recursive':!![]}),dwgToSvg(_0x21e46b,_0x220ae2,{'f':_0x252b21(0x110),'last':'','extents':'','rl':_0x252b21(0x11e),'tl':_0x252b21(0x10b)})),_0x53bd99['status'](0xc8)[_0x252b21(0x127)]({'initial_output_path':_0x229c94[_0x252b21(0x112)]?_0x2be415:_0x229c94[_0x252b21(0x10d)]?_0x997cc:_0x3c9ff2,'update_output_path':_0x229c94[_0x252b21(0x10d)]?_0x997cc:null,'extracted_output_path':_0x229c94[_0x252b21(0x12a)]?_0xd179eb:null,'drawing_output_path':_0x229c94[_0x252b21(0x11f)]?_0x220ae2:null});}),router[a3_0x1b2632(0x11b)]('/config-file',(_0x327e76,_0x4f45eb)=>{const _0x5e99e5=a3_0x1b2632,{jsonConfigFilename:_0x581c11,contentLocation:_0x3c0434}=_0x327e76[_0x5e99e5(0x103)],_0x531a40=_0x327e76[_0x5e99e5(0x103)][_0x5e99e5(0x10f)];if(!_0x581c11||!_0x3c0434||!_0x531a40)return _0x4f45eb[_0x5e99e5(0x10a)](0x190)['json']({'error':_0x5e99e5(0x123)});try{let _0x25fb67;try{_0x25fb67=typeof _0x531a40===_0x5e99e5(0x101)?JSON[_0x5e99e5(0x122)](_0x531a40):_0x531a40;}catch(_0x1ba673){return _0x4f45eb['status'](0x190)[_0x5e99e5(0x127)]({'error':_0x5e99e5(0x113)});}const _0x16e115=_0x3c0434[_0x5e99e5(0x10c)]('/'),_0x118df3=_0x16e115['slice'](0x0,-0x1)[_0x5e99e5(0x104)]('/'),_0x293d6c=_0x581c11,_0x1471bd=path['join'](_0x118df3,_0x293d6c);fs['writeFileSync'](_0x1471bd,JSON[_0x5e99e5(0x115)](_0x25fb67,null,0x2)),_0x4f45eb[_0x5e99e5(0x10a)](0xc8)[_0x5e99e5(0x127)]({'success':!![],'message':'Configuration\x20file\x20saved\x20successfully','filePath':_0x1471bd});}catch(_0x1436b2){console[_0x5e99e5(0x119)]('Error\x20saving\x20configuration\x20file:',_0x1436b2),_0x4f45eb[_0x5e99e5(0x10a)](0x1f4)[_0x5e99e5(0x127)]({'error':_0x5e99e5(0x129),'details':_0x1436b2[_0x5e99e5(0x111)]});}}),module[a3_0x1b2632(0x126)]=router;
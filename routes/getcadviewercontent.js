var a10_0x384127=a10_0x4528;function a10_0x2031(){var _0x1bf548=['application/json','value_1','json','param_8','query','\x20returnCadviewer=','toString','utf-8','255258vYjqgc','18mODJYg','image/jpeg','application/octet-stream','INSERTCONVERSIONPARAMETERS','replace','495916RAAHKL','File\x20deleted!','first\x20in\x20/getcadviewercontent','indexOf','Access-Control-Allow-Headers','error\x20-\x20getCADViewerContent','currentLoadedDrawingFullName=\x22','3103005dsMfhx','Content-Security-Policy-Report-Only','file\x20written','utf8','value_2','/loadfile:\x20\x20A\x20pickOriginalFile:','sendFile','.html','739417BGNBRT','send','ContentSecurityPolicyReportOnly','\x20Remain\x20on\x20Server:\x20\x20','base64','returnCadviewer','param_0','length','param_3','Access-Control-Allow-Methods','readFileSync','zlib\x20unzip\x20inputFile=','/loadfile:\x20C\x20CONVERSION\x20RESPONSE:','27PdoYpm','error\x20savefile:\x20','2483055tLTmCM','pickOriginalFile\x20return\x20length=','\x20fileType=','randomBytes','/getcadviewercontent','We\x20have\x20to\x20clean\x20the\x20file!!!!!!','\x22);\x0a','copyFile','param_4','readFile','Content-Type','Access-Control-Allow-Origin\x20:','is-gzip','INSERTSERVERBACKEND','close','contentLocation','/loadfile:\x20D\x20svgz\x20compression:','fileTag','/html/CADViewer_base_10_restresponse.html','value_5','unlink','param_5','log','\x22,\x22\x22);\x0a','/html/CV','write','ERROR:\x20app.get\x20','floor','2353776xURxOY','gzip','image/svg+xml','setHeader','substring','zlib','param_6','crypto','value_9','Type','cvjs_conversion_addAXconversionParameter(\x22','value_6','CURRETNLOADEDDRAWINGFULLNAME','value_3','Content-Security-Policy','value_4','\x20TYPE=','8IUZqsx','express','ServerFrontEndUrl','Access-Control-Allow-Credentials','ContentSecurityPolicy','value_0','3763210SnTEWC','svg','gunzip','ServerLocation','INSERTSERVERURL','process','INSERTFILENAME','param_10','remainOnServer','error\x20-\x20get\x20/app/*\x20','svgz','zlib\x20error:','cvjs_svgz_compress','random','value_7','fileLocation','\x20pickOriginalFile=','/loadfile:\x20\x20B\x20returnCADViewer\x20inputFile=','ServerUrl','cvjs_debug','Access-Control-Allow-Origin\x20:\x20*','Access-Control-Allow-Origin'];a10_0x2031=function(){return _0x1bf548;};return a10_0x2031();}(function(_0x3e75ee,_0x5af308){var _0x157c2e=a10_0x4528,_0x5b3f16=_0x3e75ee();while(!![]){try{var _0x25f115=-parseInt(_0x157c2e(0xf7))/0x1+parseInt(_0x157c2e(0x137))/0x2+parseInt(_0x157c2e(0x119))/0x3*(-parseInt(_0x157c2e(0xfd))/0x4)+parseInt(_0x157c2e(0x104))/0x5+-parseInt(_0x157c2e(0xf8))/0x6*(parseInt(_0x157c2e(0x10c))/0x7)+parseInt(_0x157c2e(0x148))/0x8*(parseInt(_0x157c2e(0x11b))/0x9)+parseInt(_0x157c2e(0x14e))/0xa;if(_0x25f115===_0x5af308)break;else _0x5b3f16['push'](_0x5b3f16['shift']());}catch(_0x5dcd88){_0x5b3f16['push'](_0x5b3f16['shift']());}}}(a10_0x2031,0xb9f8f));const {exit}=require(a10_0x384127(0x153)),{getEnabledCategories}=require('trace_events');var config=require('../CADViewer_config.json'),cvjs_debug=config[a10_0x384127(0xec)],express=require(a10_0x384127(0x149)),router=express['Router'](),crypto=require(a10_0x384127(0x13e));const isGzip=require(a10_0x384127(0x127));function a10_0x4528(_0x2db71e,_0x5c0cf3){var _0x2031ad=a10_0x2031();return a10_0x4528=function(_0x452887,_0x2661ea){_0x452887=_0x452887-0xec;var _0x203e0e=_0x2031ad[_0x452887];return _0x203e0e;},a10_0x4528(_0x2db71e,_0x5c0cf3);}router['get'](a10_0x384127(0x11f),function(_0x1446cf,_0x532f61){var _0x685a84=a10_0x384127;if(config['ServerFrontEndUrlAsAllowedOriginOnly']==!![]){_0x532f61['setHeader']('Access-Control-Allow-Origin',config['ServerFrontEndUrl']);if(cvjs_debug)console[_0x685a84(0x131)](_0x685a84(0x126)+config[_0x685a84(0x14a)]);}else{_0x532f61['setHeader'](_0x685a84(0xee),'*');if(cvjs_debug)console[_0x685a84(0x131)](_0x685a84(0xed));}_0x532f61[_0x685a84(0x13a)](_0x685a84(0x115),'GET,\x20POST,\x20OPTIONS,\x20PUT,\x20PATCH,\x20DELETE'),_0x532f61[_0x685a84(0x13a)](_0x685a84(0x101),'X-Requested-With,content-type'),_0x532f61[_0x685a84(0x13a)](_0x685a84(0x14b),!![]);var _0x57d7de=crypto[_0x685a84(0x11e)](0x10)[_0x685a84(0xf5)](_0x685a84(0x110)),_0x33f027=config[_0x685a84(0x14c)];_0x33f027=_0x33f027[_0x685a84(0xfc)]('INSERTNONCE',_0x57d7de);if(config[_0x685a84(0x10e)])_0x532f61[_0x685a84(0x13a)](_0x685a84(0x105),_0x33f027);else _0x532f61[_0x685a84(0x13a)](_0x685a84(0x145),_0x33f027);if(config['cvjs_debug'])console[_0x685a84(0x131)](_0x685a84(0xff));try{var _0x579e54=_0x1446cf[_0x685a84(0xf3)][_0x685a84(0x156)],_0x1aa3ef=_0x1446cf[_0x685a84(0xf3)][_0x685a84(0x12c)],_0x3d5f74=_0x1446cf[_0x685a84(0xf3)][_0x685a84(0x140)],_0x4dd29e=_0x1446cf[_0x685a84(0xf3)][_0x685a84(0x111)],_0x128bb5=_0x1446cf[_0x685a84(0xf3)]['pickOriginalFile'],_0x36bc5a=config[_0x685a84(0x15d)]+_0x1aa3ef+'.'+_0x3d5f74;if(config['cvjs_debug'])console[_0x685a84(0x131)]('/loadfile:\x20'+_0x36bc5a+_0x685a84(0x10f)+_0x579e54+_0x685a84(0x11d)+_0x3d5f74+_0x685a84(0xf4)+_0x4dd29e+_0x685a84(0x15e)+_0x128bb5);var _0x228ca2=require('fs');if(_0x128bb5==0x1){if(config[_0x685a84(0xec)])console[_0x685a84(0x131)](_0x685a84(0x109)+_0x128bb5+'\x20inputFile='+_0x36bc5a);try{const _0x3ebaca=_0x228ca2[_0x685a84(0x116)](_0x36bc5a);_0x532f61[_0x685a84(0x13a)](_0x685a84(0x125),_0x685a84(0xfa)),_0x532f61[_0x685a84(0x10d)](_0x3ebaca),console[_0x685a84(0x131)](_0x685a84(0x11c)+_0x3ebaca[_0x685a84(0x113)]);if(_0x579e54==0x0){if(config[_0x685a84(0xec)])console[_0x685a84(0x131)](_0x685a84(0x120));_0x228ca2[_0x685a84(0x12f)](_0x36bc5a,function(_0x41f0ef){var _0x5e5e0c=_0x685a84;if(_0x41f0ef)console[_0x5e5e0c(0x131)](_0x5e5e0c(0x135)+_0x41f0ef);else{if(config[_0x5e5e0c(0xec)])console['log'](_0x5e5e0c(0xfe));}});}return;}catch(_0x3aceac){console['error'](_0x3aceac);return;}}if(_0x4dd29e==0x1){if(config[_0x685a84(0xec)])console[_0x685a84(0x131)](_0x685a84(0x15f)+_0x36bc5a);var _0x504488=Math[_0x685a84(0x136)](Math[_0x685a84(0x15b)]()*Math[_0x685a84(0x136)](0x5f5e100)),_0x3389b5=_0x685a84(0x133)+_0x504488+_0x685a84(0x10b),_0x1ea2f0=config[_0x685a84(0x151)]+_0x3389b5,_0x300139=config[_0x685a84(0x151)]+_0x685a84(0x12d),_0x499eea=new Array(0xb);_0x499eea[0x0]=_0x1446cf[_0x685a84(0xf3)][_0x685a84(0x112)],_0x499eea[0x1]=_0x1446cf[_0x685a84(0xf3)]['param_1'],_0x499eea[0x2]=_0x1446cf[_0x685a84(0xf3)]['param_2'],_0x499eea[0x3]=_0x1446cf[_0x685a84(0xf3)][_0x685a84(0x114)],_0x499eea[0x4]=_0x1446cf[_0x685a84(0xf3)][_0x685a84(0x123)],_0x499eea[0x5]=_0x1446cf[_0x685a84(0xf3)][_0x685a84(0x130)],_0x499eea[0x6]=_0x1446cf[_0x685a84(0xf3)][_0x685a84(0x13d)],_0x499eea[0x7]=_0x1446cf['query']['param_7'],_0x499eea[0x8]=_0x1446cf[_0x685a84(0xf3)][_0x685a84(0xf2)],_0x499eea[0x9]=_0x1446cf[_0x685a84(0xf3)]['param_9'],_0x499eea[0xa]=_0x1446cf['query'][_0x685a84(0x155)];var _0x5585a5=new Array(0xb);_0x5585a5[0x0]=_0x1446cf[_0x685a84(0xf3)][_0x685a84(0x14d)],_0x5585a5[0x1]=_0x1446cf[_0x685a84(0xf3)][_0x685a84(0xf0)],_0x5585a5[0x2]=_0x1446cf['query'][_0x685a84(0x108)],_0x5585a5[0x3]=_0x1446cf['query'][_0x685a84(0x144)],_0x5585a5[0x4]=_0x1446cf[_0x685a84(0xf3)][_0x685a84(0x146)],_0x5585a5[0x5]=_0x1446cf[_0x685a84(0xf3)][_0x685a84(0x12e)],_0x5585a5[0x6]=_0x1446cf['query'][_0x685a84(0x142)],_0x5585a5[0x7]=_0x1446cf[_0x685a84(0xf3)][_0x685a84(0x15c)],_0x5585a5[0x8]=_0x1446cf[_0x685a84(0xf3)]['value_8'],_0x5585a5[0x9]=_0x1446cf[_0x685a84(0xf3)][_0x685a84(0x13f)],_0x5585a5[0xa]=_0x1446cf[_0x685a84(0xf3)]['value_10'];var _0x534fd7=_0x1446cf[_0x685a84(0xf3)][_0x685a84(0x12a)];_0x228ca2[_0x685a84(0x122)](_0x300139,_0x1ea2f0,_0xb5d227=>{var _0x117769=_0x685a84;_0xb5d227?console[_0x117769(0x131)]('Error\x20Found:',_0xb5d227):_0x228ca2[_0x117769(0x124)](_0x1ea2f0,_0x117769(0x107),function(_0x2e310b,_0x53c8f4){var _0xde2243=_0x117769,_0x2a5ed1=_0x53c8f4['toString']();_0x2a5ed1=_0x2a5ed1['replace']('INSERTNONCE',_0x57d7de);var _0x3a5d01=_0x2a5ed1['substring'](0x0,_0x2a5ed1[_0xde2243(0x100)]('INSERTFILENAME')),_0x9fa598=_0x2a5ed1[_0xde2243(0x13b)](_0x2a5ed1[_0xde2243(0x100)](_0xde2243(0x154))+0xe);_0x2a5ed1=_0x3a5d01+config['fileLocationUrl']+'/'+_0x1aa3ef+'.'+_0x3d5f74+_0x9fa598,_0x3a5d01=_0x2a5ed1[_0xde2243(0x13b)](0x0,_0x2a5ed1[_0xde2243(0x100)](_0xde2243(0x128))),_0x9fa598=_0x2a5ed1[_0xde2243(0x13b)](_0x2a5ed1[_0xde2243(0x100)]('INSERTSERVERBACKEND')+0x13),_0x2a5ed1=_0x3a5d01+config[_0xde2243(0x160)]+'/'+_0x9fa598,_0x3a5d01=_0x2a5ed1[_0xde2243(0x13b)](0x0,_0x2a5ed1[_0xde2243(0x100)]('INSERTSERVERURL')),_0x9fa598=_0x2a5ed1[_0xde2243(0x13b)](_0x2a5ed1[_0xde2243(0x100)](_0xde2243(0x152))+0xf),_0x2a5ed1=_0x3a5d01+config[_0xde2243(0x160)]+'/'+_0x9fa598,_0x3a5d01=_0x2a5ed1[_0xde2243(0x13b)](0x0,_0x2a5ed1['indexOf'](_0xde2243(0xfb))),_0x9fa598=_0x2a5ed1[_0xde2243(0x13b)](_0x2a5ed1['indexOf']('INSERTCONVERSIONPARAMETERS')+0x1a);var _0x625769='';for(var _0x3435ee=0x1;_0x3435ee<0xb;_0x3435ee++){_0x499eea[_0x3435ee]!=undefined&&(_0x5585a5[_0x3435ee]!=undefined?_0x625769=_0x625769+_0xde2243(0x141)+_0x499eea[_0x3435ee]+'\x22,\x22'+_0x5585a5[_0x3435ee]+_0xde2243(0x121):_0x625769=_0x625769+_0xde2243(0x141)+_0x499eea[_0x3435ee]+_0xde2243(0x132));}_0x2a5ed1=_0x3a5d01+_0x625769+_0x9fa598,_0x3a5d01=_0x2a5ed1[_0xde2243(0x13b)](0x0,_0x2a5ed1[_0xde2243(0x100)]('CURRETNLOADEDDRAWINGFULLNAME')),_0x9fa598=_0x2a5ed1['substring'](_0x2a5ed1[_0xde2243(0x100)](_0xde2243(0x143))+0x1c),_0x2a5ed1=_0x3a5d01+_0xde2243(0x103)+_0x534fd7+'\x22;'+_0x9fa598,_0x228ca2['open'](_0x1ea2f0,'w',function(_0x2b4c1d,_0x2838d2){var _0x353255=_0xde2243,_0x24471e=Buffer['from'](_0x2a5ed1);_0x228ca2[_0x353255(0x134)](_0x2838d2,_0x24471e,0x0,_0x24471e['length'],null,function(_0x40c2c0){var _0x31e3a5=_0x353255;if(_0x40c2c0){if(config[_0x31e3a5(0xec)])console['log'](_0x31e3a5(0x11a)+_0x40c2c0);}else _0x228ca2[_0x31e3a5(0x129)](_0x2838d2,function(){var _0x5999f5=_0x31e3a5;if(config[_0x5999f5(0xec)])console[_0x5999f5(0x131)](_0x5999f5(0x106));_0x532f61[_0x5999f5(0x10a)](_0x1ea2f0);});});});});});}else{if(config[_0x685a84(0xec)])console[_0x685a84(0x131)](_0x685a84(0x118)+_0x36bc5a+'\x20TYPE='+_0x3d5f74);if(_0x3d5f74['indexOf'](_0x685a84(0x158))>-0x1&&config[_0x685a84(0x15a)]){if(config['cvjs_debug'])console[_0x685a84(0x131)](_0x685a84(0x12b)+_0x36bc5a+_0x685a84(0x147)+_0x3d5f74);_0x228ca2[_0x685a84(0x124)](_0x36bc5a,function(_0x3d95bb,_0x16a8a0){var _0x2706c4=_0x685a84;if(_0x3d95bb){_0x532f61[_0x2706c4(0x10d)](_0x2706c4(0x157)+_0x3d95bb);if(config[_0x2706c4(0xec)])console[_0x2706c4(0x131)](_0x3d95bb);}else{if(_0x128bb5==0x1){if(config[_0x2706c4(0xec)])console['log'](_0x2706c4(0x117)+_0x36bc5a);var _0x36ee10=require('zlib');_0x36ee10[_0x2706c4(0x150)](_0x16a8a0,{'chunkSize':0x10000},function(_0x1386e6,_0x169dc7){var _0x3e275b=_0x2706c4,_0x373052=new Buffer(_0x169dc7,_0x3e275b(0xf6));_0x36ee10[_0x3e275b(0x138)](_0x373052,function(_0x3316d1,_0x275a86){var _0x3ef155=_0x3e275b;_0x532f61[_0x3ef155(0x13a)]('Content-Type',_0x3ef155(0xf9)),_0x532f61[_0x3ef155(0x10d)](_0x275a86);});});}else{if(config[_0x2706c4(0xec)])console[_0x2706c4(0x131)]('zlib\x20unzip\x20data:'+_0x16a8a0['length']);if(isGzip(_0x16a8a0)){if(config[_0x2706c4(0xec)])console['log']('zlib\x20unzip\x20data\x20already\x20compressed:'+_0x16a8a0[_0x2706c4(0x113)]);try{var _0x36ee10=require(_0x2706c4(0x13c));_0x36ee10['gunzip'](_0x16a8a0,{'chunkSize':0x10000},function(_0x14d79b,_0x1c099){var _0x36114d=_0x2706c4,_0x5bba0a=new Buffer(_0x1c099,_0x36114d(0xf6));_0x36ee10[_0x36114d(0x138)](_0x5bba0a,function(_0x1844f5,_0x5bdea8){var _0x48c832=_0x36114d;_0x532f61[_0x48c832(0x13a)](_0x48c832(0x125),_0x48c832(0x139)),_0x532f61[_0x48c832(0x13a)]('Content-Encoding',_0x48c832(0x138)),_0x532f61[_0x48c832(0x10d)](_0x5bdea8);});});}catch(_0x53e4d6){console['log'](_0x2706c4(0x159)+_0x53e4d6);}}else{if(config[_0x2706c4(0xec)])console[_0x2706c4(0x131)]('zlib\x20unzip\x20data\x20not\x20compressed:'+_0x16a8a0[_0x2706c4(0x113)]);_0x3d5f74[_0x2706c4(0x100)]('svg')==0x0&&(_0x128bb5==0x1?_0x532f61[_0x2706c4(0x13a)](_0x2706c4(0x125),'image/jpeg'):_0x532f61['setHeader'](_0x2706c4(0x125),_0x2706c4(0x139)));_0x3d5f74[_0x2706c4(0x100)](_0x2706c4(0xf1))==0x0?_0x532f61[_0x2706c4(0x13a)](_0x2706c4(0x125),_0x2706c4(0xef)):_0x532f61[_0x2706c4(0x13a)](_0x2706c4(0x125),_0x2706c4(0xfa));if(_0x3d5f74[_0x2706c4(0x100)](_0x2706c4(0xf1))==0x0){}_0x532f61[_0x2706c4(0x10d)](_0x16a8a0);}if(_0x579e54==0x0){if(config[_0x2706c4(0xec)])console[_0x2706c4(0x131)]('We\x20have\x20to\x20clean\x20the\x20file!!!!!!');_0x228ca2['unlink'](_0x36bc5a,function(_0x9bb819){var _0x26daf9=_0x2706c4;if(_0x9bb819)console[_0x26daf9(0x131)](_0x26daf9(0x135)+_0x9bb819);else{if(config[_0x26daf9(0xec)])console[_0x26daf9(0x131)](_0x26daf9(0xfe));}});}}}});}else{if(config['cvjs_debug'])console['log']('/loadfile:\x20D\x20plain\x20svg:'+_0x36bc5a+_0x685a84(0x147)+_0x3d5f74);_0x228ca2[_0x685a84(0x124)](_0x36bc5a,_0x685a84(0x107),function(_0x5aa196,_0x336882){var _0x3d1492=_0x685a84;_0x3d5f74[_0x3d1492(0x100)](_0x3d1492(0x14f))==0x0&&(_0x128bb5==0x1?_0x532f61[_0x3d1492(0x13a)]('Content-Type','image/jpeg'):_0x532f61[_0x3d1492(0x13a)](_0x3d1492(0x125),_0x3d1492(0x139)));_0x3d5f74[_0x3d1492(0x100)](_0x3d1492(0xf1))==0x0?_0x532f61['setHeader'](_0x3d1492(0x125),'application/json'):_0x532f61[_0x3d1492(0x13a)](_0x3d1492(0x125),_0x3d1492(0xfa));if(_0x3d5f74[_0x3d1492(0x100)](_0x3d1492(0xf1))==0x0){}_0x532f61['send'](_0x336882);if(_0x579e54==0x0){if(config[_0x3d1492(0xec)])console[_0x3d1492(0x131)](_0x3d1492(0x120));_0x228ca2[_0x3d1492(0x12f)](_0x36bc5a,function(_0x3fe072){var _0x27ae82=_0x3d1492;if(_0x3fe072)console[_0x27ae82(0x131)]('ERROR:\x20app.get\x20'+_0x3fe072);else{if(config['cvjs_debug'])console['log'](_0x27ae82(0xfe));}});}});}}}catch(_0x2edb37){_0x532f61[_0x685a84(0x10d)](_0x685a84(0x102));if(config[_0x685a84(0xec)])console[_0x685a84(0x131)](_0x2edb37);}}),module['exports']=router;
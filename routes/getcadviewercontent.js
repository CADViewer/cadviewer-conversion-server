var a10_0x49d26d=a10_0x5aa2;function a10_0x5aa2(_0x5f2fe1,_0x3e48e5){var _0x540c07=a10_0x540c();return a10_0x5aa2=function(_0x5aa294,_0x3e602d){_0x5aa294=_0x5aa294-0x199;var _0x2ab085=_0x540c07[_0x5aa294];return _0x2ab085;},a10_0x5aa2(_0x5f2fe1,_0x3e48e5);}(function(_0x6e4d51,_0x57f1bb){var _0x59209d=a10_0x5aa2,_0xf16125=_0x6e4d51();while(!![]){try{var _0x2f80a9=parseInt(_0x59209d(0x20b))/0x1+parseInt(_0x59209d(0x20a))/0x2+-parseInt(_0x59209d(0x199))/0x3*(parseInt(_0x59209d(0x1fa))/0x4)+parseInt(_0x59209d(0x1fb))/0x5*(-parseInt(_0x59209d(0x1a1))/0x6)+parseInt(_0x59209d(0x20e))/0x7+-parseInt(_0x59209d(0x202))/0x8*(-parseInt(_0x59209d(0x1c4))/0x9)+parseInt(_0x59209d(0x1be))/0xa*(parseInt(_0x59209d(0x1ca))/0xb);if(_0x2f80a9===_0x57f1bb)break;else _0xf16125['push'](_0xf16125['shift']());}catch(_0x2e5919){_0xf16125['push'](_0xf16125['shift']());}}}(a10_0x540c,0x2b78b));const {exit}=require(a10_0x49d26d(0x1d9)),{getEnabledCategories}=require(a10_0x49d26d(0x1f4));var config=require('../CADViewer_config.json'),cvjs_debug=config[a10_0x49d26d(0x1e8)],express=require(a10_0x49d26d(0x1a9)),router=express[a10_0x49d26d(0x1a3)](),crypto=require(a10_0x49d26d(0x1b9));const isGzip=require('is-gzip');function a10_0x540c(){var _0x1b6e36=['image/svg+xml','param_6','crypto','We\x20have\x20to\x20clean\x20the\x20file!!!!!!','value_10','contentLocation','param_2','350psEYuE','param_1','::1','pickOriginalFile\x20return\x20length=','replace','readFileSync','72639xOcgoB','fileLocation','\x22,\x22','INSERTFILENAME','File\x20deleted!','gunzip','70642qVzbiO','param_8','value_0','Access-Control-Allow-Origin\x20:\x20*','zlib\x20error:','error\x20-\x20get\x20/app/*\x20','toString','\x22,\x22\x22);\x0a','\x22);\x0a','exports','param_4','Content-Encoding','Type','application/json','indexOf','process','json','/loadfile:\x20D\x20svgz\x20compression:','copyFile','/loadfile:\x20C\x20CONVERSION\x20RESPONSE:','ServerUrl','get','length','unlink','ServerLocation','INSERTSERVERBACKEND','returnCadviewer','\x20Remain\x20on\x20Server:\x20\x20','randomBytes','/loadfile:\x20\x20A\x20pickOriginalFile:','cvjs_debug','Access-Control-Allow-Origin','/loadfile:\x20','ServerFrontEndUrl','/loadfile:\x20\x20B\x20returnCADViewer\x20inputFile=','application/octet-stream','zlib','.html','ERROR:\x20app.get\x20','value_8','Content-Security-Policy','fileLocationUrl','trace_events','cvjs_svgz_compress','image/jpeg','INSERTNONCE','utf8','value_1','106136aRtMzH','5aBeSdn','callbackMethod_gatewayUrl_flag','gzip','first\x20in\x20/getcadviewercontent','callbackMethod_gatewayUrl','zlib\x20unzip\x20data\x20already\x20compressed:','\x20fileType=','248goHywI','remainOnServer','query','param_5','log','X-Requested-With,content-type','setHeader','write','29378LFnpUm','54416tQkFOE','error','from','789425xPrWLw','error\x20savefile:\x20','value_3','Access-Control-Allow-Headers','GET,\x20POST,\x20OPTIONS,\x20PUT,\x20PATCH,\x20DELETE','cvjs_conversion_addAXconversionParameter(\x22','readFile','send','\x20inputFile=','\x20TYPE=','floor','substring','Content-Type','param_10','33KgNCnC','param_3','param_0','utf-8','pickOriginalFile','value_7','/html/CADViewer_base_10_restresponse.html','/loadfile:\x20D\x20plain\x20svg:','1121508SSlKyo','cached_conversion','Router','/html/CV','value_9','svg','zlib\x20unzip\x20inputFile=','INSERTSERVERURL','express','INSERTCONVERSIONPARAMETERS','currentLoadedDrawingFullName=\x22','Access-Control-Allow-Methods','file\x20written','error\x20-\x20getCADViewerContent','ServerFrontEndUrlAsAllowedOriginOnly','\x20pickOriginalFile=','CURRETNLOADEDDRAWINGFULLNAME','value_2','value_5','close','Error\x20Found:','random'];a10_0x540c=function(){return _0x1b6e36;};return a10_0x540c();}router[a10_0x49d26d(0x1df)]('/getcadviewercontent',function(_0x28abf0,_0x11146a){var _0x45e997=a10_0x49d26d;if(config[_0x45e997(0x1af)]==!![]){_0x11146a['setHeader'](_0x45e997(0x1e9),config[_0x45e997(0x1eb)]);if(cvjs_debug)console['log']('Access-Control-Allow-Origin\x20:'+config[_0x45e997(0x1eb)]);}else{_0x11146a['setHeader'](_0x45e997(0x1e9),'*');if(cvjs_debug)console[_0x45e997(0x206)](_0x45e997(0x1cd));}_0x11146a[_0x45e997(0x208)](_0x45e997(0x1ac),_0x45e997(0x212)),_0x11146a[_0x45e997(0x208)](_0x45e997(0x211),_0x45e997(0x207)),_0x11146a[_0x45e997(0x208)]('Access-Control-Allow-Credentials',!![]);var _0x5658aa=crypto[_0x45e997(0x1e6)](0x10)[_0x45e997(0x1d0)]('base64'),_0x260d69=config['ContentSecurityPolicy'];_0x260d69=_0x260d69[_0x45e997(0x1c2)]('INSERTNONCE',_0x5658aa);if(config['ContentSecurityPolicyReportOnly'])_0x11146a['setHeader']('Content-Security-Policy-Report-Only',_0x260d69);else _0x11146a[_0x45e997(0x208)](_0x45e997(0x1f2),_0x260d69);if(config[_0x45e997(0x1e8)])console['log'](_0x45e997(0x1fe));try{var _0x31b3b3=_0x28abf0[_0x45e997(0x204)][_0x45e997(0x203)],_0x2c033e=_0x28abf0['query']['fileTag'],_0x1c3eef=_0x28abf0['query'][_0x45e997(0x1d6)],_0x1ed154=_0x28abf0[_0x45e997(0x204)][_0x45e997(0x1e4)],_0x2b55b7=_0x28abf0[_0x45e997(0x204)][_0x45e997(0x19d)],_0x323ace=config[_0x45e997(0x1c5)]+_0x2c033e+'.'+_0x1c3eef,_0x24cfde=_0x28abf0['query']['iscached'];if(config[_0x45e997(0x1e8)])console['log'](_0x45e997(0x1ea)+_0x323ace+_0x45e997(0x1e5)+_0x31b3b3+_0x45e997(0x201)+_0x1c3eef+'\x20returnCadviewer='+_0x1ed154+_0x45e997(0x1b0)+_0x2b55b7);var _0x21ffec=require('fs');if(_0x2b55b7==0x1){if(config['cvjs_debug'])console[_0x45e997(0x206)](_0x45e997(0x1e7)+_0x2b55b7+_0x45e997(0x216)+_0x323ace);try{const _0x3649d0=_0x21ffec[_0x45e997(0x1c3)](_0x323ace);_0x11146a[_0x45e997(0x208)]('Content-Type',_0x45e997(0x1ed)),_0x11146a[_0x45e997(0x215)](_0x3649d0),console[_0x45e997(0x206)](_0x45e997(0x1c1)+_0x3649d0['length']);if(_0x31b3b3==0x0){if(config['cvjs_debug'])console[_0x45e997(0x206)](_0x45e997(0x1ba));_0x21ffec[_0x45e997(0x1e1)](_0x323ace,function(_0x1bad63){var _0x84813e=_0x45e997;if(_0x1bad63)console[_0x84813e(0x206)](_0x84813e(0x1f0)+_0x1bad63);else{if(config['cvjs_debug'])console[_0x84813e(0x206)](_0x84813e(0x1c8));}});}return;}catch(_0x5338b4){console[_0x45e997(0x20c)](_0x5338b4);return;}}if(_0x1ed154==0x1){if(config[_0x45e997(0x1e8)])console[_0x45e997(0x206)](_0x45e997(0x1ec)+_0x323ace);var _0x480463=Math[_0x45e997(0x218)](Math[_0x45e997(0x1b6)]()*Math[_0x45e997(0x218)](0x5f5e100)),_0x3f6617=_0x45e997(0x1a4)+_0x480463+_0x45e997(0x1ef),_0x267f6d=config[_0x45e997(0x1e2)]+_0x3f6617,_0x49d7ca=config[_0x45e997(0x1e2)]+_0x45e997(0x19f),_0x138cde=new Array(0xb);_0x138cde[0x0]=_0x28abf0[_0x45e997(0x204)][_0x45e997(0x19b)],_0x138cde[0x1]=_0x28abf0['query'][_0x45e997(0x1bf)],_0x138cde[0x2]=_0x28abf0[_0x45e997(0x204)][_0x45e997(0x1bd)],_0x138cde[0x3]=_0x28abf0[_0x45e997(0x204)][_0x45e997(0x19a)],_0x138cde[0x4]=_0x28abf0[_0x45e997(0x204)][_0x45e997(0x1d4)],_0x138cde[0x5]=_0x28abf0[_0x45e997(0x204)][_0x45e997(0x205)],_0x138cde[0x6]=_0x28abf0[_0x45e997(0x204)][_0x45e997(0x1b8)],_0x138cde[0x7]=_0x28abf0[_0x45e997(0x204)]['param_7'],_0x138cde[0x8]=_0x28abf0[_0x45e997(0x204)][_0x45e997(0x1cb)],_0x138cde[0x9]=_0x28abf0[_0x45e997(0x204)]['param_9'],_0x138cde[0xa]=_0x28abf0[_0x45e997(0x204)][_0x45e997(0x21b)];var _0x222720=new Array(0xb);_0x222720[0x0]=_0x28abf0['query'][_0x45e997(0x1cc)],_0x222720[0x1]=_0x28abf0[_0x45e997(0x204)][_0x45e997(0x1f9)],_0x222720[0x2]=_0x28abf0[_0x45e997(0x204)][_0x45e997(0x1b2)],_0x222720[0x3]=_0x28abf0[_0x45e997(0x204)][_0x45e997(0x210)],_0x222720[0x4]=_0x28abf0[_0x45e997(0x204)]['value_4'],_0x222720[0x5]=_0x28abf0[_0x45e997(0x204)][_0x45e997(0x1b3)],_0x222720[0x6]=_0x28abf0[_0x45e997(0x204)]['value_6'],_0x222720[0x7]=_0x28abf0[_0x45e997(0x204)][_0x45e997(0x19e)],_0x222720[0x8]=_0x28abf0[_0x45e997(0x204)][_0x45e997(0x1f1)],_0x222720[0x9]=_0x28abf0['query'][_0x45e997(0x1a5)],_0x222720[0xa]=_0x28abf0[_0x45e997(0x204)][_0x45e997(0x1bb)];var _0x2fe0b7=_0x28abf0['query'][_0x45e997(0x1bc)];_0x21ffec[_0x45e997(0x1dc)](_0x49d7ca,_0x267f6d,_0x5cd24f=>{var _0x21f0f6=_0x45e997;_0x5cd24f?console[_0x21f0f6(0x206)](_0x21f0f6(0x1b5),_0x5cd24f):_0x21ffec[_0x21f0f6(0x214)](_0x267f6d,_0x21f0f6(0x1f8),function(_0x53d92c,_0x278b89){var _0x5466de=_0x21f0f6,_0x4efe3c=_0x278b89[_0x5466de(0x1d0)]();_0x4efe3c=_0x4efe3c[_0x5466de(0x1c2)](_0x5466de(0x1f7),_0x5658aa);var _0x387d3a=_0x4efe3c[_0x5466de(0x219)](0x0,_0x4efe3c[_0x5466de(0x1d8)](_0x5466de(0x1c7))),_0x207153=_0x4efe3c[_0x5466de(0x219)](_0x4efe3c[_0x5466de(0x1d8)](_0x5466de(0x1c7))+0xe);config[_0x5466de(0x1a2)]?_0x4efe3c=_0x387d3a+_0x2fe0b7+_0x207153:_0x4efe3c=_0x387d3a+config[_0x5466de(0x1f3)]+'/'+_0x2c033e+'.'+_0x1c3eef+_0x207153;_0x387d3a=_0x4efe3c[_0x5466de(0x219)](0x0,_0x4efe3c[_0x5466de(0x1d8)](_0x5466de(0x1e3))),_0x207153=_0x4efe3c[_0x5466de(0x219)](_0x4efe3c[_0x5466de(0x1d8)]('INSERTSERVERBACKEND')+0x13);var _0x1bcb25='';if(config[_0x5466de(0x1fc)]){_0x1bcb25=config[_0x5466de(0x1ff)];if(cvjs_debug)console[_0x5466de(0x206)]('URLFLAG:\x20serverbackend='+_0x1bcb25);}else _0x1bcb25=config[_0x5466de(0x1de)],_0x1bcb25[_0x5466de(0x1d8)](_0x5466de(0x1c0))>-0x1&&(_0x1bcb25=_0x1bcb25[_0x5466de(0x1c2)](_0x5466de(0x1c0),'localhost'));_0x4efe3c=_0x387d3a+_0x1bcb25+'/'+_0x207153,_0x387d3a=_0x4efe3c[_0x5466de(0x219)](0x0,_0x4efe3c[_0x5466de(0x1d8)](_0x5466de(0x1a8))),_0x207153=_0x4efe3c[_0x5466de(0x219)](_0x4efe3c['indexOf'](_0x5466de(0x1a8))+0xf),_0x4efe3c=_0x387d3a+_0x1bcb25+'/'+_0x207153,_0x387d3a=_0x4efe3c[_0x5466de(0x219)](0x0,_0x4efe3c[_0x5466de(0x1d8)](_0x5466de(0x1aa))),_0x207153=_0x4efe3c[_0x5466de(0x219)](_0x4efe3c[_0x5466de(0x1d8)](_0x5466de(0x1aa))+0x1a);var _0x154ffc='';for(var _0x14cfd2=0x1;_0x14cfd2<0xb;_0x14cfd2++){_0x138cde[_0x14cfd2]!=undefined&&(_0x222720[_0x14cfd2]!=undefined?_0x154ffc=_0x154ffc+_0x5466de(0x213)+_0x138cde[_0x14cfd2]+_0x5466de(0x1c6)+_0x222720[_0x14cfd2]+_0x5466de(0x1d2):_0x154ffc=_0x154ffc+_0x5466de(0x213)+_0x138cde[_0x14cfd2]+_0x5466de(0x1d1));}_0x4efe3c=_0x387d3a+_0x154ffc+_0x207153,_0x387d3a=_0x4efe3c[_0x5466de(0x219)](0x0,_0x4efe3c[_0x5466de(0x1d8)](_0x5466de(0x1b1))),_0x207153=_0x4efe3c[_0x5466de(0x219)](_0x4efe3c[_0x5466de(0x1d8)](_0x5466de(0x1b1))+0x1c),_0x4efe3c=_0x387d3a+_0x5466de(0x1ab)+_0x2fe0b7+'\x22;'+_0x207153,_0x21ffec['open'](_0x267f6d,'w',function(_0x431396,_0x1b90f4){var _0x4534c7=_0x5466de,_0x54ad63=Buffer[_0x4534c7(0x20d)](_0x4efe3c);_0x21ffec[_0x4534c7(0x209)](_0x1b90f4,_0x54ad63,0x0,_0x54ad63[_0x4534c7(0x1e0)],null,function(_0x592fb1){var _0x42cee3=_0x4534c7;if(_0x592fb1){if(config[_0x42cee3(0x1e8)])console[_0x42cee3(0x206)](_0x42cee3(0x20f)+_0x592fb1);}else _0x21ffec[_0x42cee3(0x1b4)](_0x1b90f4,function(){var _0x52b2f2=_0x42cee3;if(config[_0x52b2f2(0x1e8)])console[_0x52b2f2(0x206)](_0x52b2f2(0x1ad));_0x11146a['sendFile'](_0x267f6d);});});});});});}else{if(config['cvjs_debug'])console[_0x45e997(0x206)](_0x45e997(0x1dd)+_0x323ace+_0x45e997(0x217)+_0x1c3eef);if(_0x1c3eef[_0x45e997(0x1d8)]('svgz')>-0x1&&config[_0x45e997(0x1f5)]){if(config[_0x45e997(0x1e8)])console[_0x45e997(0x206)](_0x45e997(0x1db)+_0x323ace+_0x45e997(0x217)+_0x1c3eef);_0x21ffec[_0x45e997(0x214)](_0x323ace,function(_0x2ffb2e,_0x3ef705){var _0x12f2ef=_0x45e997;if(_0x2ffb2e){_0x11146a[_0x12f2ef(0x215)](_0x12f2ef(0x1cf)+_0x2ffb2e);if(config[_0x12f2ef(0x1e8)])console[_0x12f2ef(0x206)](_0x2ffb2e);}else{if(_0x2b55b7==0x1){if(config['cvjs_debug'])console[_0x12f2ef(0x206)](_0x12f2ef(0x1a7)+_0x323ace);var _0x400edf=require(_0x12f2ef(0x1ee));_0x400edf['gunzip'](_0x3ef705,{'chunkSize':0x10000},function(_0x3744f9,_0x48d0e5){var _0x25cdb2=_0x12f2ef,_0x47a698=new Buffer(_0x48d0e5,_0x25cdb2(0x19c));_0x400edf[_0x25cdb2(0x1fd)](_0x47a698,function(_0x3c8107,_0x2e5d21){var _0x1a1243=_0x25cdb2;_0x11146a[_0x1a1243(0x208)](_0x1a1243(0x21a),_0x1a1243(0x1f6)),_0x11146a[_0x1a1243(0x215)](_0x2e5d21);});});}else{if(config['cvjs_debug'])console[_0x12f2ef(0x206)]('zlib\x20unzip\x20data:'+_0x3ef705[_0x12f2ef(0x1e0)]);if(isGzip(_0x3ef705)){if(config[_0x12f2ef(0x1e8)])console[_0x12f2ef(0x206)](_0x12f2ef(0x200)+_0x3ef705[_0x12f2ef(0x1e0)]);try{var _0x400edf=require(_0x12f2ef(0x1ee));_0x400edf[_0x12f2ef(0x1c9)](_0x3ef705,{'chunkSize':0x10000},function(_0xb7be6d,_0x1def68){var _0x448077=_0x12f2ef,_0x2e821f=new Buffer(_0x1def68,_0x448077(0x19c));_0x400edf[_0x448077(0x1fd)](_0x2e821f,function(_0x12e1c4,_0x18eaa7){var _0x14f756=_0x448077;_0x11146a['setHeader'](_0x14f756(0x21a),_0x14f756(0x1b7)),_0x11146a[_0x14f756(0x208)](_0x14f756(0x1d5),'gzip'),_0x11146a[_0x14f756(0x215)](_0x18eaa7);});});}catch(_0x4e9763){console['log'](_0x12f2ef(0x1ce)+_0x4e9763);}}else{if(config[_0x12f2ef(0x1e8)])console[_0x12f2ef(0x206)]('zlib\x20unzip\x20data\x20not\x20compressed:'+_0x3ef705[_0x12f2ef(0x1e0)]);_0x1c3eef[_0x12f2ef(0x1d8)](_0x12f2ef(0x1a6))==0x0&&(_0x2b55b7==0x1?_0x11146a['setHeader'](_0x12f2ef(0x21a),_0x12f2ef(0x1f6)):_0x11146a[_0x12f2ef(0x208)](_0x12f2ef(0x21a),_0x12f2ef(0x1b7)));_0x1c3eef['indexOf'](_0x12f2ef(0x1da))==0x0?_0x11146a['setHeader'](_0x12f2ef(0x21a),'application/json'):_0x11146a[_0x12f2ef(0x208)](_0x12f2ef(0x21a),_0x12f2ef(0x1ed));if(_0x1c3eef[_0x12f2ef(0x1d8)](_0x12f2ef(0x1da))==0x0){}_0x11146a[_0x12f2ef(0x215)](_0x3ef705);}if(_0x31b3b3==0x0){if(config['cvjs_debug'])console[_0x12f2ef(0x206)](_0x12f2ef(0x1ba));_0x21ffec['unlink'](_0x323ace,function(_0x42f9cc){var _0x18da1a=_0x12f2ef;if(_0x42f9cc)console[_0x18da1a(0x206)]('ERROR:\x20app.get\x20'+_0x42f9cc);else{if(config[_0x18da1a(0x1e8)])console['log']('File\x20deleted!');}});}}}});}else{if(config['cvjs_debug'])console[_0x45e997(0x206)](_0x45e997(0x1a0)+_0x323ace+'\x20TYPE='+_0x1c3eef);_0x21ffec['readFile'](_0x323ace,_0x45e997(0x1f8),function(_0xa7a1a6,_0x108b68){var _0x2fe5b4=_0x45e997;_0x1c3eef[_0x2fe5b4(0x1d8)](_0x2fe5b4(0x1a6))==0x0&&(_0x2b55b7==0x1?_0x11146a[_0x2fe5b4(0x208)](_0x2fe5b4(0x21a),'image/jpeg'):_0x11146a[_0x2fe5b4(0x208)]('Content-Type','image/svg+xml'));_0x1c3eef['indexOf'](_0x2fe5b4(0x1da))==0x0?_0x11146a[_0x2fe5b4(0x208)](_0x2fe5b4(0x21a),_0x2fe5b4(0x1d7)):_0x11146a[_0x2fe5b4(0x208)](_0x2fe5b4(0x21a),_0x2fe5b4(0x1ed));if(_0x1c3eef[_0x2fe5b4(0x1d8)](_0x2fe5b4(0x1da))==0x0){}_0x11146a[_0x2fe5b4(0x215)](_0x108b68);if(_0x31b3b3==0x0){if(config['cvjs_debug'])console['log']('We\x20have\x20to\x20clean\x20the\x20file!!!!!!');_0x21ffec[_0x2fe5b4(0x1e1)](_0x323ace,function(_0x4b11f2){var _0x309805=_0x2fe5b4;if(_0x4b11f2)console['log']('ERROR:\x20app.get\x20'+_0x4b11f2);else{if(config['cvjs_debug'])console[_0x309805(0x206)](_0x309805(0x1c8));}});}});}}}catch(_0x4ae0c5){_0x11146a[_0x45e997(0x215)](_0x45e997(0x1ae));if(config[_0x45e997(0x1e8)])console[_0x45e997(0x206)](_0x4ae0c5);}}),module[a10_0x49d26d(0x1d3)]=router;
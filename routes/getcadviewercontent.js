var a10_0x38ed42=a10_0x5a6d;function a10_0x4f6e(){var _0x2596c8=['indexOf','unlink','file\x20written','substring','Access-Control-Allow-Methods','floor','cvjs_debug','error\x20-\x20get\x20/app/*\x20','Error\x20Found:','Content-Type','readFile','/html/CV','../CADViewer_config.json','utf-8','iscached','param_2','returnCadviewer','\x20pickOriginalFile=','591594YxVSid','value_8','Access-Control-Allow-Origin','image/svg+xml','\x20Remain\x20on\x20Server:\x20\x20','7403bCxOwt','gunzip','json','We\x20have\x20to\x20clean\x20the\x20file!!!!!!','get','\x20returnCadviewer=','Access-Control-Allow-Headers','value_2','Content-Security-Policy','300GemErq','error\x20-\x20getCADViewerContent','Access-Control-Allow-Credentials','INSERTSERVERURL','contentLocation','random','Type','Router','value_10','replace','CURRETNLOADEDDRAWINGFULLNAME','/loadfile:\x20\x20B\x20returnCADViewer\x20inputFile=','6450cBeXwH','fileLocationUrl','open','\x22);\x0a','trace_events','Content-Security-Policy-Report-Only','Content-Encoding','cached_conversion','send','\x20TYPE=','/loadfile:\x20','express','svg','pickOriginalFile','INSERTNONCE','ServerUrl','param_1','param_3','zlib\x20unzip\x20data:','zlib\x20unzip\x20inputFile=','/loadfile:\x20\x20A\x20pickOriginalFile:','/html/CADViewer_base_10_restresponse.html','/loadfile:\x20D\x20plain\x20svg:','utf8','3281841CPekVG','30205aAoxMs','param_7','log','exports','from','param_0','cvjs_conversion_addAXconversionParameter(\x22','ERROR:\x20app.get\x20','sendFile','178692NEmxcZ','35zOdDUp','first\x20in\x20/getcadviewercontent','close','length','Access-Control-Allow-Origin\x20:\x20*','355575iLueUG','fileLocation','value_3','zlib\x20unzip\x20data\x20not\x20compressed:','/loadfile:\x20D\x20svgz\x20compression:','application/octet-stream','gzip','cvjs_svgz_compress','param_9','ServerFrontEndUrl','4VRNMml','1836192eSFcNq','application/json','value_4','image/jpeg','File\x20deleted!','Access-Control-Allow-Origin\x20:','::1','zlib\x20unzip\x20data\x20already\x20compressed:','.html','value_1','setHeader','svgz','query','randomBytes','ServerLocation','localhost','error','INSERTFILENAME','toString','write','remainOnServer','INSERTCONVERSIONPARAMETERS','value_6','value_7','value_0'];a10_0x4f6e=function(){return _0x2596c8;};return a10_0x4f6e();}(function(_0x395976,_0x42fbb){var _0x4e0d56=a10_0x5a6d,_0x2a13d8=_0x395976();while(!![]){try{var _0xc0054a=parseInt(_0x4e0d56(0xfb))/0x1+-parseInt(_0x4e0d56(0x105))/0x2*(parseInt(_0x4e0d56(0x131))/0x3)+parseInt(_0x4e0d56(0xf5))/0x4*(parseInt(_0x4e0d56(0xf6))/0x5)+-parseInt(_0x4e0d56(0x13f))/0x6*(parseInt(_0x4e0d56(0x164))/0x7)+parseInt(_0x4e0d56(0x106))/0x8+parseInt(_0x4e0d56(0x163))/0x9+-parseInt(_0x4e0d56(0x14b))/0xa*(parseInt(_0x4e0d56(0x136))/0xb);if(_0xc0054a===_0x42fbb)break;else _0x2a13d8['push'](_0x2a13d8['shift']());}catch(_0x4b3faf){_0x2a13d8['push'](_0x2a13d8['shift']());}}}(a10_0x4f6e,0x35474));const {exit}=require('process'),{getEnabledCategories}=require(a10_0x38ed42(0x14f));var config=require(a10_0x38ed42(0x12b)),cvjs_debug=config['cvjs_debug'],express=require(a10_0x38ed42(0x156)),router=express[a10_0x38ed42(0x146)](),crypto=require('crypto');const isGzip=require('is-gzip');function a10_0x5a6d(_0x540e19,_0x456c65){var _0x4f6e32=a10_0x4f6e();return a10_0x5a6d=function(_0x5a6d0c,_0x43da97){_0x5a6d0c=_0x5a6d0c-0xf4;var _0x62ebb3=_0x4f6e32[_0x5a6d0c];return _0x62ebb3;},a10_0x5a6d(_0x540e19,_0x456c65);}router[a10_0x38ed42(0x13a)]('/getcadviewercontent',function(_0x30cf9d,_0x407ff6){var _0xc7c3d=a10_0x38ed42;if(config['ServerFrontEndUrlAsAllowedOriginOnly']==!![]){_0x407ff6[_0xc7c3d(0x110)](_0xc7c3d(0x133),config[_0xc7c3d(0x104)]);if(cvjs_debug)console[_0xc7c3d(0x166)](_0xc7c3d(0x10b)+config[_0xc7c3d(0x104)]);}else{_0x407ff6[_0xc7c3d(0x110)](_0xc7c3d(0x133),'*');if(cvjs_debug)console[_0xc7c3d(0x166)](_0xc7c3d(0xfa));}_0x407ff6[_0xc7c3d(0x110)](_0xc7c3d(0x123),'GET,\x20POST,\x20OPTIONS,\x20PUT,\x20PATCH,\x20DELETE'),_0x407ff6['setHeader'](_0xc7c3d(0x13c),'X-Requested-With,content-type'),_0x407ff6[_0xc7c3d(0x110)](_0xc7c3d(0x141),!![]);var _0x32f408=crypto[_0xc7c3d(0x113)](0x10)[_0xc7c3d(0x118)]('base64'),_0x504e65=config['ContentSecurityPolicy'];_0x504e65=_0x504e65[_0xc7c3d(0x148)](_0xc7c3d(0x159),_0x32f408);if(config['ContentSecurityPolicyReportOnly'])_0x407ff6[_0xc7c3d(0x110)](_0xc7c3d(0x150),_0x504e65);else _0x407ff6[_0xc7c3d(0x110)](_0xc7c3d(0x13e),_0x504e65);if(config[_0xc7c3d(0x125)])console['log'](_0xc7c3d(0xf7));try{var _0x1bbed8=_0x30cf9d[_0xc7c3d(0x112)][_0xc7c3d(0x11a)],_0x3c16c1=_0x30cf9d[_0xc7c3d(0x112)]['fileTag'],_0x1cf4d0=_0x30cf9d['query'][_0xc7c3d(0x145)],_0x27e073=_0x30cf9d['query'][_0xc7c3d(0x12f)],_0x367192=_0x30cf9d['query'][_0xc7c3d(0x158)],_0x3873d2=config[_0xc7c3d(0xfc)]+_0x3c16c1+'.'+_0x1cf4d0,_0x2c47c1=_0x30cf9d['query'][_0xc7c3d(0x12d)];if(config[_0xc7c3d(0x125)])console[_0xc7c3d(0x166)](_0xc7c3d(0x155)+_0x3873d2+_0xc7c3d(0x135)+_0x1bbed8+'\x20fileType='+_0x1cf4d0+_0xc7c3d(0x13b)+_0x27e073+_0xc7c3d(0x130)+_0x367192);var _0x53f526=require('fs');if(_0x367192==0x1){if(config[_0xc7c3d(0x125)])console[_0xc7c3d(0x166)](_0xc7c3d(0x15f)+_0x367192+'\x20inputFile='+_0x3873d2);try{const _0x331b2a=_0x53f526['readFileSync'](_0x3873d2);_0x407ff6[_0xc7c3d(0x110)](_0xc7c3d(0x128),_0xc7c3d(0x100)),_0x407ff6[_0xc7c3d(0x153)](_0x331b2a),console['log']('pickOriginalFile\x20return\x20length='+_0x331b2a['length']);if(_0x1bbed8==0x0){if(config['cvjs_debug'])console['log'](_0xc7c3d(0x139));_0x53f526[_0xc7c3d(0x120)](_0x3873d2,function(_0x5e9991){var _0x184c5c=_0xc7c3d;if(_0x5e9991)console[_0x184c5c(0x166)](_0x184c5c(0x16b)+_0x5e9991);else{if(config[_0x184c5c(0x125)])console['log'](_0x184c5c(0x10a));}});}return;}catch(_0x26a626){console[_0xc7c3d(0x116)](_0x26a626);return;}}if(_0x27e073==0x1){if(config[_0xc7c3d(0x125)])console[_0xc7c3d(0x166)](_0xc7c3d(0x14a)+_0x3873d2);var _0x5bb267=Math[_0xc7c3d(0x124)](Math[_0xc7c3d(0x144)]()*Math[_0xc7c3d(0x124)](0x5f5e100)),_0x3cdc4e=_0xc7c3d(0x12a)+_0x5bb267+_0xc7c3d(0x10e),_0xc638d1=config[_0xc7c3d(0x114)]+_0x3cdc4e,_0xa10a47=config[_0xc7c3d(0x114)]+_0xc7c3d(0x160),_0x37cedf=new Array(0xb);_0x37cedf[0x0]=_0x30cf9d[_0xc7c3d(0x112)][_0xc7c3d(0x169)],_0x37cedf[0x1]=_0x30cf9d[_0xc7c3d(0x112)][_0xc7c3d(0x15b)],_0x37cedf[0x2]=_0x30cf9d[_0xc7c3d(0x112)][_0xc7c3d(0x12e)],_0x37cedf[0x3]=_0x30cf9d['query'][_0xc7c3d(0x15c)],_0x37cedf[0x4]=_0x30cf9d[_0xc7c3d(0x112)]['param_4'],_0x37cedf[0x5]=_0x30cf9d[_0xc7c3d(0x112)]['param_5'],_0x37cedf[0x6]=_0x30cf9d[_0xc7c3d(0x112)]['param_6'],_0x37cedf[0x7]=_0x30cf9d[_0xc7c3d(0x112)][_0xc7c3d(0x165)],_0x37cedf[0x8]=_0x30cf9d[_0xc7c3d(0x112)]['param_8'],_0x37cedf[0x9]=_0x30cf9d['query'][_0xc7c3d(0x103)],_0x37cedf[0xa]=_0x30cf9d[_0xc7c3d(0x112)]['param_10'];var _0x32a828=new Array(0xb);_0x32a828[0x0]=_0x30cf9d[_0xc7c3d(0x112)][_0xc7c3d(0x11e)],_0x32a828[0x1]=_0x30cf9d[_0xc7c3d(0x112)][_0xc7c3d(0x10f)],_0x32a828[0x2]=_0x30cf9d[_0xc7c3d(0x112)][_0xc7c3d(0x13d)],_0x32a828[0x3]=_0x30cf9d[_0xc7c3d(0x112)][_0xc7c3d(0xfd)],_0x32a828[0x4]=_0x30cf9d[_0xc7c3d(0x112)][_0xc7c3d(0x108)],_0x32a828[0x5]=_0x30cf9d[_0xc7c3d(0x112)]['value_5'],_0x32a828[0x6]=_0x30cf9d['query'][_0xc7c3d(0x11c)],_0x32a828[0x7]=_0x30cf9d[_0xc7c3d(0x112)][_0xc7c3d(0x11d)],_0x32a828[0x8]=_0x30cf9d[_0xc7c3d(0x112)][_0xc7c3d(0x132)],_0x32a828[0x9]=_0x30cf9d[_0xc7c3d(0x112)]['value_9'],_0x32a828[0xa]=_0x30cf9d[_0xc7c3d(0x112)][_0xc7c3d(0x147)];var _0xb35f51=_0x30cf9d[_0xc7c3d(0x112)][_0xc7c3d(0x143)];_0x53f526['copyFile'](_0xa10a47,_0xc638d1,_0x26dbdb=>{var _0x36f73c=_0xc7c3d;_0x26dbdb?console['log'](_0x36f73c(0x127),_0x26dbdb):_0x53f526[_0x36f73c(0x129)](_0xc638d1,'utf8',function(_0x17232b,_0x53e3b0){var _0x48afdc=_0x36f73c,_0x38986f=_0x53e3b0['toString']();_0x38986f=_0x38986f[_0x48afdc(0x148)](_0x48afdc(0x159),_0x32f408);var _0x114533=_0x38986f[_0x48afdc(0x122)](0x0,_0x38986f[_0x48afdc(0x11f)](_0x48afdc(0x117))),_0x3fb664=_0x38986f[_0x48afdc(0x122)](_0x38986f['indexOf'](_0x48afdc(0x117))+0xe);config[_0x48afdc(0x152)]?_0x38986f=_0x114533+_0xb35f51+_0x3fb664:_0x38986f=_0x114533+config[_0x48afdc(0x14c)]+'/'+_0x3c16c1+'.'+_0x1cf4d0+_0x3fb664;_0x114533=_0x38986f[_0x48afdc(0x122)](0x0,_0x38986f[_0x48afdc(0x11f)]('INSERTSERVERBACKEND')),_0x3fb664=_0x38986f['substring'](_0x38986f['indexOf']('INSERTSERVERBACKEND')+0x13);var _0x30ede9=config[_0x48afdc(0x15a)];_0x30ede9[_0x48afdc(0x11f)](_0x48afdc(0x10c))>-0x1&&(_0x30ede9=_0x30ede9[_0x48afdc(0x148)](_0x48afdc(0x10c),_0x48afdc(0x115)));_0x38986f=_0x114533+_0x30ede9+'/'+_0x3fb664,_0x114533=_0x38986f['substring'](0x0,_0x38986f[_0x48afdc(0x11f)](_0x48afdc(0x142))),_0x3fb664=_0x38986f['substring'](_0x38986f[_0x48afdc(0x11f)]('INSERTSERVERURL')+0xf),_0x38986f=_0x114533+_0x30ede9+'/'+_0x3fb664,_0x114533=_0x38986f[_0x48afdc(0x122)](0x0,_0x38986f[_0x48afdc(0x11f)](_0x48afdc(0x11b))),_0x3fb664=_0x38986f[_0x48afdc(0x122)](_0x38986f[_0x48afdc(0x11f)]('INSERTCONVERSIONPARAMETERS')+0x1a);var _0x383a39='';for(var _0x4233af=0x1;_0x4233af<0xb;_0x4233af++){_0x37cedf[_0x4233af]!=undefined&&(_0x32a828[_0x4233af]!=undefined?_0x383a39=_0x383a39+_0x48afdc(0x16a)+_0x37cedf[_0x4233af]+'\x22,\x22'+_0x32a828[_0x4233af]+_0x48afdc(0x14e):_0x383a39=_0x383a39+'cvjs_conversion_addAXconversionParameter(\x22'+_0x37cedf[_0x4233af]+'\x22,\x22\x22);\x0a');}_0x38986f=_0x114533+_0x383a39+_0x3fb664,_0x114533=_0x38986f['substring'](0x0,_0x38986f['indexOf'](_0x48afdc(0x149))),_0x3fb664=_0x38986f[_0x48afdc(0x122)](_0x38986f[_0x48afdc(0x11f)]('CURRETNLOADEDDRAWINGFULLNAME')+0x1c),_0x38986f=_0x114533+'currentLoadedDrawingFullName=\x22'+_0xb35f51+'\x22;'+_0x3fb664,_0x53f526[_0x48afdc(0x14d)](_0xc638d1,'w',function(_0xf99177,_0x4c6d71){var _0x5500de=_0x48afdc,_0x38581a=Buffer[_0x5500de(0x168)](_0x38986f);_0x53f526[_0x5500de(0x119)](_0x4c6d71,_0x38581a,0x0,_0x38581a[_0x5500de(0xf9)],null,function(_0x1686c7){var _0x475945=_0x5500de;if(_0x1686c7){if(config[_0x475945(0x125)])console[_0x475945(0x166)]('error\x20savefile:\x20'+_0x1686c7);}else _0x53f526[_0x475945(0xf8)](_0x4c6d71,function(){var _0xc904a2=_0x475945;if(config['cvjs_debug'])console['log'](_0xc904a2(0x121));_0x407ff6[_0xc904a2(0xf4)](_0xc638d1);});});});});});}else{if(config[_0xc7c3d(0x125)])console[_0xc7c3d(0x166)]('/loadfile:\x20C\x20CONVERSION\x20RESPONSE:'+_0x3873d2+'\x20TYPE='+_0x1cf4d0);if(_0x1cf4d0['indexOf'](_0xc7c3d(0x111))>-0x1&&config[_0xc7c3d(0x102)]){if(config['cvjs_debug'])console[_0xc7c3d(0x166)](_0xc7c3d(0xff)+_0x3873d2+'\x20TYPE='+_0x1cf4d0);_0x53f526['readFile'](_0x3873d2,function(_0x1495ed,_0x11e23b){var _0x38874a=_0xc7c3d;if(_0x1495ed){_0x407ff6[_0x38874a(0x153)](_0x38874a(0x126)+_0x1495ed);if(config[_0x38874a(0x125)])console[_0x38874a(0x166)](_0x1495ed);}else{if(_0x367192==0x1){if(config[_0x38874a(0x125)])console['log'](_0x38874a(0x15e)+_0x3873d2);var _0x57cde6=require('zlib');_0x57cde6[_0x38874a(0x137)](_0x11e23b,{'chunkSize':0x10000},function(_0x542f15,_0x324d6a){var _0x5150d0=_0x38874a,_0x260758=new Buffer(_0x324d6a,_0x5150d0(0x12c));_0x57cde6['gzip'](_0x260758,function(_0x235bf2,_0x933a76){var _0x2d3c91=_0x5150d0;_0x407ff6[_0x2d3c91(0x110)]('Content-Type',_0x2d3c91(0x109)),_0x407ff6['send'](_0x933a76);});});}else{if(config[_0x38874a(0x125)])console[_0x38874a(0x166)](_0x38874a(0x15d)+_0x11e23b[_0x38874a(0xf9)]);if(isGzip(_0x11e23b)){if(config[_0x38874a(0x125)])console[_0x38874a(0x166)](_0x38874a(0x10d)+_0x11e23b['length']);try{var _0x57cde6=require('zlib');_0x57cde6['gunzip'](_0x11e23b,{'chunkSize':0x10000},function(_0x380538,_0x1eaba4){var _0x4224ba=_0x38874a,_0x109cf5=new Buffer(_0x1eaba4,_0x4224ba(0x12c));_0x57cde6[_0x4224ba(0x101)](_0x109cf5,function(_0xc34197,_0x4bf017){var _0x30defd=_0x4224ba;_0x407ff6[_0x30defd(0x110)]('Content-Type',_0x30defd(0x134)),_0x407ff6[_0x30defd(0x110)](_0x30defd(0x151),_0x30defd(0x101)),_0x407ff6['send'](_0x4bf017);});});}catch(_0x311ec3){console[_0x38874a(0x166)]('zlib\x20error:'+_0x311ec3);}}else{if(config[_0x38874a(0x125)])console[_0x38874a(0x166)](_0x38874a(0xfe)+_0x11e23b[_0x38874a(0xf9)]);_0x1cf4d0[_0x38874a(0x11f)](_0x38874a(0x157))==0x0&&(_0x367192==0x1?_0x407ff6[_0x38874a(0x110)](_0x38874a(0x128),_0x38874a(0x109)):_0x407ff6[_0x38874a(0x110)](_0x38874a(0x128),_0x38874a(0x134)));_0x1cf4d0[_0x38874a(0x11f)](_0x38874a(0x138))==0x0?_0x407ff6['setHeader'](_0x38874a(0x128),_0x38874a(0x107)):_0x407ff6[_0x38874a(0x110)](_0x38874a(0x128),'application/octet-stream');if(_0x1cf4d0['indexOf'](_0x38874a(0x138))==0x0){}_0x407ff6[_0x38874a(0x153)](_0x11e23b);}if(_0x1bbed8==0x0){if(config[_0x38874a(0x125)])console[_0x38874a(0x166)](_0x38874a(0x139));_0x53f526['unlink'](_0x3873d2,function(_0x41d587){var _0x17434b=_0x38874a;if(_0x41d587)console['log'](_0x17434b(0x16b)+_0x41d587);else{if(config['cvjs_debug'])console['log'](_0x17434b(0x10a));}});}}}});}else{if(config['cvjs_debug'])console[_0xc7c3d(0x166)](_0xc7c3d(0x161)+_0x3873d2+_0xc7c3d(0x154)+_0x1cf4d0);_0x53f526['readFile'](_0x3873d2,_0xc7c3d(0x162),function(_0x5181f8,_0x289f29){var _0x194109=_0xc7c3d;_0x1cf4d0[_0x194109(0x11f)](_0x194109(0x157))==0x0&&(_0x367192==0x1?_0x407ff6[_0x194109(0x110)](_0x194109(0x128),_0x194109(0x109)):_0x407ff6[_0x194109(0x110)](_0x194109(0x128),'image/svg+xml'));_0x1cf4d0[_0x194109(0x11f)](_0x194109(0x138))==0x0?_0x407ff6[_0x194109(0x110)](_0x194109(0x128),'application/json'):_0x407ff6['setHeader'](_0x194109(0x128),_0x194109(0x100));if(_0x1cf4d0[_0x194109(0x11f)](_0x194109(0x138))==0x0){}_0x407ff6[_0x194109(0x153)](_0x289f29);if(_0x1bbed8==0x0){if(config['cvjs_debug'])console[_0x194109(0x166)]('We\x20have\x20to\x20clean\x20the\x20file!!!!!!');_0x53f526['unlink'](_0x3873d2,function(_0x6d6bcc){var _0x21c388=_0x194109;if(_0x6d6bcc)console[_0x21c388(0x166)]('ERROR:\x20app.get\x20'+_0x6d6bcc);else{if(config[_0x21c388(0x125)])console[_0x21c388(0x166)]('File\x20deleted!');}});}});}}}catch(_0x4eb093){_0x407ff6['send'](_0xc7c3d(0x140));if(config['cvjs_debug'])console[_0xc7c3d(0x166)](_0x4eb093);}}),module[a10_0x38ed42(0x167)]=router;
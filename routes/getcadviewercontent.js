var a10_0x207c43=a10_0xe060;(function(_0x13495e,_0x4ae572){var _0x4f9243=a10_0xe060,_0x563cbf=_0x13495e();while(!![]){try{var _0x3c8680=parseInt(_0x4f9243(0x134))/0x1+-parseInt(_0x4f9243(0x13a))/0x2+-parseInt(_0x4f9243(0x152))/0x3*(parseInt(_0x4f9243(0x157))/0x4)+-parseInt(_0x4f9243(0x126))/0x5*(-parseInt(_0x4f9243(0x137))/0x6)+parseInt(_0x4f9243(0x111))/0x7+parseInt(_0x4f9243(0x148))/0x8+parseInt(_0x4f9243(0x123))/0x9;if(_0x3c8680===_0x4ae572)break;else _0x563cbf['push'](_0x563cbf['shift']());}catch(_0xd3479d){_0x563cbf['push'](_0x563cbf['shift']());}}}(a10_0x48a2,0x641d8));function a10_0xe060(_0x49e5f5,_0x5b499f){var _0x48a2fd=a10_0x48a2();return a10_0xe060=function(_0xe0609b,_0x28c288){_0xe0609b=_0xe0609b-0xfe;var _0x400366=_0x48a2fd[_0xe0609b];return _0x400366;},a10_0xe060(_0x49e5f5,_0x5b499f);}const {exit}=require(a10_0x207c43(0x14f)),{getEnabledCategories}=require(a10_0x207c43(0x166));function a10_0x48a2(){var _0x1c0596=['Router','value_2','ERROR:\x20app.get\x20','fileLocation','zlib\x20unzip\x20data:','replace','Content-Type','first\x20in\x20/getcadviewercontent','open','1649690sMhJuz','zlib','utf-8','currentLoadedDrawingFullName=\x22','zlib\x20unzip\x20data\x20not\x20compressed:','ServerUrl','Error\x20Found:','INSERTCONVERSIONPARAMETERS','indexOf','cvjs_conversion_addAXconversionParameter(\x22','gzip','floor','param_6','contentLocation','Access-Control-Allow-Origin\x20:\x20*','randomBytes','express','error\x20-\x20get\x20/app/*\x20','1004769KJpvMU','/loadfile:\x20\x20B\x20returnCADViewer\x20inputFile=','/loadfile:\x20C\x20CONVERSION\x20RESPONSE:','20925miKRPp','\x20fileType=','param_10','param_1','exports','param_7','ServerFrontEndUrlAsAllowedOriginOnly','application/octet-stream','cached_conversion','pickOriginalFile\x20return\x20length=','query','\x20Remain\x20on\x20Server:\x20\x20','File\x20deleted!','zlib\x20unzip\x20data\x20already\x20compressed:','377029QWwySB','/loadfile:\x20\x20A\x20pickOriginalFile:','\x20inputFile=','78xDvwlU','INSERTSERVERBACKEND','param_3','1003624ZMXAWP','utf8','value_3','image/svg+xml','.html','Access-Control-Allow-Origin\x20:','INSERTNONCE','sendFile','Type','/loadfile:\x20D\x20svgz\x20compression:','file\x20written','svg','gunzip','random','2681840abUWpJ','base64','Access-Control-Allow-Origin','value_10','setHeader','length','svgz','process','returnCadviewer','error\x20-\x20getCADViewerContent','3387DemmFY','/loadfile:\x20','\x20returnCadviewer=','image/jpeg','Access-Control-Allow-Headers','716SioIuZ','localhost','readFile','write','unlink','value_5','\x20TYPE=','/getcadviewercontent','param_8','toString','log','zlib\x20error:','param_9','Content-Security-Policy','INSERTFILENAME','trace_events','send','json','fileLocationUrl','value_6','\x20pickOriginalFile=','cvjs_debug','zlib\x20unzip\x20inputFile=','X-Requested-With,content-type','value_4','value_0','CURRETNLOADEDDRAWINGFULLNAME','INSERTSERVERURL','param_0','substring','We\x20have\x20to\x20clean\x20the\x20file!!!!!!','Content-Security-Policy-Report-Only'];a10_0x48a2=function(){return _0x1c0596;};return a10_0x48a2();}var config=require('../CADViewer_config.json'),cvjs_debug=config['cvjs_debug'],express=require(a10_0x207c43(0x121)),router=express[a10_0x207c43(0x108)](),crypto=require('crypto');const isGzip=require('is-gzip');router['get'](a10_0x207c43(0x15e),function(_0x31dc15,_0x3fa3f0){var _0x535530=a10_0x207c43;if(config[_0x535530(0x12c)]==!![]){_0x3fa3f0[_0x535530(0x14c)](_0x535530(0x14a),config['ServerFrontEndUrl']);if(cvjs_debug)console[_0x535530(0x161)](_0x535530(0x13f)+config['ServerFrontEndUrl']);}else{_0x3fa3f0[_0x535530(0x14c)]('Access-Control-Allow-Origin','*');if(cvjs_debug)console[_0x535530(0x161)](_0x535530(0x11f));}_0x3fa3f0[_0x535530(0x14c)]('Access-Control-Allow-Methods','GET,\x20POST,\x20OPTIONS,\x20PUT,\x20PATCH,\x20DELETE'),_0x3fa3f0[_0x535530(0x14c)](_0x535530(0x156),_0x535530(0xff)),_0x3fa3f0['setHeader']('Access-Control-Allow-Credentials',!![]);var _0x2ac586=crypto[_0x535530(0x120)](0x10)[_0x535530(0x160)](_0x535530(0x149)),_0x4e4c6c=config['ContentSecurityPolicy'];_0x4e4c6c=_0x4e4c6c[_0x535530(0x10d)](_0x535530(0x140),_0x2ac586);if(config['ContentSecurityPolicyReportOnly'])_0x3fa3f0['setHeader'](_0x535530(0x107),_0x4e4c6c);else _0x3fa3f0[_0x535530(0x14c)](_0x535530(0x164),_0x4e4c6c);if(config[_0x535530(0x16c)])console[_0x535530(0x161)](_0x535530(0x10f));try{var _0xe4b4cb=_0x31dc15[_0x535530(0x130)]['remainOnServer'],_0x1ec59e=_0x31dc15[_0x535530(0x130)]['fileTag'],_0x3a0959=_0x31dc15[_0x535530(0x130)][_0x535530(0x142)],_0x493b43=_0x31dc15['query'][_0x535530(0x150)],_0x5f45d2=_0x31dc15['query']['pickOriginalFile'],_0x280e09=config[_0x535530(0x10b)]+_0x1ec59e+'.'+_0x3a0959,_0x24cbfd=_0x31dc15[_0x535530(0x130)]['iscached'];if(config['cvjs_debug'])console[_0x535530(0x161)](_0x535530(0x153)+_0x280e09+_0x535530(0x131)+_0xe4b4cb+_0x535530(0x127)+_0x3a0959+_0x535530(0x154)+_0x493b43+_0x535530(0x16b)+_0x5f45d2);var _0x5a6d84=require('fs');if(_0x5f45d2==0x1){if(config['cvjs_debug'])console['log'](_0x535530(0x135)+_0x5f45d2+_0x535530(0x136)+_0x280e09);try{const _0x4f6e21=_0x5a6d84['readFileSync'](_0x280e09);_0x3fa3f0[_0x535530(0x14c)]('Content-Type','application/octet-stream'),_0x3fa3f0[_0x535530(0x167)](_0x4f6e21),console['log'](_0x535530(0x12f)+_0x4f6e21[_0x535530(0x14d)]);if(_0xe4b4cb==0x0){if(config['cvjs_debug'])console[_0x535530(0x161)](_0x535530(0x106));_0x5a6d84[_0x535530(0x15b)](_0x280e09,function(_0x1e0302){var _0x2a45b0=_0x535530;if(_0x1e0302)console[_0x2a45b0(0x161)]('ERROR:\x20app.get\x20'+_0x1e0302);else{if(config['cvjs_debug'])console[_0x2a45b0(0x161)](_0x2a45b0(0x132));}});}return;}catch(_0x419aba){console['error'](_0x419aba);return;}}if(_0x493b43==0x1){if(config['cvjs_debug'])console[_0x535530(0x161)](_0x535530(0x124)+_0x280e09);var _0x4b5fa7=Math['floor'](Math[_0x535530(0x147)]()*Math[_0x535530(0x11c)](0x5f5e100)),_0x1a8af0='/html/CV'+_0x4b5fa7+_0x535530(0x13e),_0x2a2039=config['ServerLocation']+_0x1a8af0,_0x4d8934=config['ServerLocation']+'/html/CADViewer_base_10_restresponse.html',_0x311e92=new Array(0xb);_0x311e92[0x0]=_0x31dc15['query'][_0x535530(0x104)],_0x311e92[0x1]=_0x31dc15['query'][_0x535530(0x129)],_0x311e92[0x2]=_0x31dc15[_0x535530(0x130)]['param_2'],_0x311e92[0x3]=_0x31dc15[_0x535530(0x130)][_0x535530(0x139)],_0x311e92[0x4]=_0x31dc15['query']['param_4'],_0x311e92[0x5]=_0x31dc15[_0x535530(0x130)]['param_5'],_0x311e92[0x6]=_0x31dc15[_0x535530(0x130)][_0x535530(0x11d)],_0x311e92[0x7]=_0x31dc15[_0x535530(0x130)][_0x535530(0x12b)],_0x311e92[0x8]=_0x31dc15[_0x535530(0x130)][_0x535530(0x15f)],_0x311e92[0x9]=_0x31dc15[_0x535530(0x130)][_0x535530(0x163)],_0x311e92[0xa]=_0x31dc15[_0x535530(0x130)][_0x535530(0x128)];var _0x5452a2=new Array(0xb);_0x5452a2[0x0]=_0x31dc15[_0x535530(0x130)][_0x535530(0x101)],_0x5452a2[0x1]=_0x31dc15[_0x535530(0x130)]['value_1'],_0x5452a2[0x2]=_0x31dc15['query'][_0x535530(0x109)],_0x5452a2[0x3]=_0x31dc15['query'][_0x535530(0x13c)],_0x5452a2[0x4]=_0x31dc15['query'][_0x535530(0x100)],_0x5452a2[0x5]=_0x31dc15['query'][_0x535530(0x15c)],_0x5452a2[0x6]=_0x31dc15[_0x535530(0x130)][_0x535530(0x16a)],_0x5452a2[0x7]=_0x31dc15['query']['value_7'],_0x5452a2[0x8]=_0x31dc15[_0x535530(0x130)]['value_8'],_0x5452a2[0x9]=_0x31dc15[_0x535530(0x130)]['value_9'],_0x5452a2[0xa]=_0x31dc15[_0x535530(0x130)][_0x535530(0x14b)];var _0x22d69e=_0x31dc15[_0x535530(0x130)][_0x535530(0x11e)];_0x5a6d84['copyFile'](_0x4d8934,_0x2a2039,_0x53c04d=>{var _0x536ccc=_0x535530;_0x53c04d?console['log'](_0x536ccc(0x117),_0x53c04d):_0x5a6d84['readFile'](_0x2a2039,'utf8',function(_0x16a937,_0x4a5cf9){var _0x57898f=_0x536ccc,_0x559ec3=_0x4a5cf9[_0x57898f(0x160)]();_0x559ec3=_0x559ec3[_0x57898f(0x10d)](_0x57898f(0x140),_0x2ac586);var _0x536cd9=_0x559ec3[_0x57898f(0x105)](0x0,_0x559ec3[_0x57898f(0x119)](_0x57898f(0x165))),_0x1855d2=_0x559ec3['substring'](_0x559ec3[_0x57898f(0x119)](_0x57898f(0x165))+0xe);config[_0x57898f(0x12e)]?_0x559ec3=_0x536cd9+_0x22d69e+_0x1855d2:_0x559ec3=_0x536cd9+config[_0x57898f(0x169)]+'/'+_0x1ec59e+'.'+_0x3a0959+_0x1855d2;_0x536cd9=_0x559ec3[_0x57898f(0x105)](0x0,_0x559ec3[_0x57898f(0x119)]('INSERTSERVERBACKEND')),_0x1855d2=_0x559ec3[_0x57898f(0x105)](_0x559ec3[_0x57898f(0x119)](_0x57898f(0x138))+0x13);var _0x51d77d=config[_0x57898f(0x116)];_0x51d77d['indexOf']('::1')>-0x1&&(_0x51d77d=_0x51d77d['replace']('::1',_0x57898f(0x158)));_0x559ec3=_0x536cd9+_0x51d77d+'/'+_0x1855d2,_0x536cd9=_0x559ec3[_0x57898f(0x105)](0x0,_0x559ec3[_0x57898f(0x119)](_0x57898f(0x103))),_0x1855d2=_0x559ec3[_0x57898f(0x105)](_0x559ec3[_0x57898f(0x119)]('INSERTSERVERURL')+0xf),_0x559ec3=_0x536cd9+_0x51d77d+'/'+_0x1855d2,_0x536cd9=_0x559ec3[_0x57898f(0x105)](0x0,_0x559ec3['indexOf']('INSERTCONVERSIONPARAMETERS')),_0x1855d2=_0x559ec3[_0x57898f(0x105)](_0x559ec3['indexOf'](_0x57898f(0x118))+0x1a);var _0x3379e1='';for(var _0x48147f=0x1;_0x48147f<0xb;_0x48147f++){_0x311e92[_0x48147f]!=undefined&&(_0x5452a2[_0x48147f]!=undefined?_0x3379e1=_0x3379e1+_0x57898f(0x11a)+_0x311e92[_0x48147f]+'\x22,\x22'+_0x5452a2[_0x48147f]+'\x22);\x0a':_0x3379e1=_0x3379e1+_0x57898f(0x11a)+_0x311e92[_0x48147f]+'\x22,\x22\x22);\x0a');}_0x559ec3=_0x536cd9+_0x3379e1+_0x1855d2,_0x536cd9=_0x559ec3[_0x57898f(0x105)](0x0,_0x559ec3['indexOf'](_0x57898f(0x102))),_0x1855d2=_0x559ec3['substring'](_0x559ec3['indexOf'](_0x57898f(0x102))+0x1c),_0x559ec3=_0x536cd9+_0x57898f(0x114)+_0x22d69e+'\x22;'+_0x1855d2,_0x5a6d84[_0x57898f(0x110)](_0x2a2039,'w',function(_0x3bff28,_0x233a65){var _0x275841=_0x57898f,_0x46855a=Buffer['from'](_0x559ec3);_0x5a6d84[_0x275841(0x15a)](_0x233a65,_0x46855a,0x0,_0x46855a[_0x275841(0x14d)],null,function(_0x381179){var _0x30b17b=_0x275841;if(_0x381179){if(config[_0x30b17b(0x16c)])console[_0x30b17b(0x161)]('error\x20savefile:\x20'+_0x381179);}else _0x5a6d84['close'](_0x233a65,function(){var _0x25fffc=_0x30b17b;if(config['cvjs_debug'])console[_0x25fffc(0x161)](_0x25fffc(0x144));_0x3fa3f0[_0x25fffc(0x141)](_0x2a2039);});});});});});}else{if(config[_0x535530(0x16c)])console[_0x535530(0x161)](_0x535530(0x125)+_0x280e09+_0x535530(0x15d)+_0x3a0959);if(_0x3a0959[_0x535530(0x119)](_0x535530(0x14e))>-0x1&&config['cvjs_svgz_compress']){if(config['cvjs_debug'])console[_0x535530(0x161)](_0x535530(0x143)+_0x280e09+'\x20TYPE='+_0x3a0959);_0x5a6d84[_0x535530(0x159)](_0x280e09,function(_0xebbae8,_0x211cd7){var _0x199c31=_0x535530;if(_0xebbae8){_0x3fa3f0[_0x199c31(0x167)](_0x199c31(0x122)+_0xebbae8);if(config[_0x199c31(0x16c)])console['log'](_0xebbae8);}else{if(_0x5f45d2==0x1){if(config[_0x199c31(0x16c)])console[_0x199c31(0x161)](_0x199c31(0xfe)+_0x280e09);var _0x5e123b=require(_0x199c31(0x112));_0x5e123b[_0x199c31(0x146)](_0x211cd7,{'chunkSize':0x10000},function(_0x211ee2,_0x2f9830){var _0x4bc46f=_0x199c31,_0x13229f=new Buffer(_0x2f9830,_0x4bc46f(0x113));_0x5e123b[_0x4bc46f(0x11b)](_0x13229f,function(_0x1a4dba,_0x362f8b){var _0xe1695=_0x4bc46f;_0x3fa3f0['setHeader']('Content-Type',_0xe1695(0x155)),_0x3fa3f0[_0xe1695(0x167)](_0x362f8b);});});}else{if(config[_0x199c31(0x16c)])console[_0x199c31(0x161)](_0x199c31(0x10c)+_0x211cd7[_0x199c31(0x14d)]);if(isGzip(_0x211cd7)){if(config[_0x199c31(0x16c)])console[_0x199c31(0x161)](_0x199c31(0x133)+_0x211cd7[_0x199c31(0x14d)]);try{var _0x5e123b=require(_0x199c31(0x112));_0x5e123b[_0x199c31(0x146)](_0x211cd7,{'chunkSize':0x10000},function(_0x184de7,_0x5ebffa){var _0x466cc0=new Buffer(_0x5ebffa,'utf-8');_0x5e123b['gzip'](_0x466cc0,function(_0x2ec0e0,_0x53abbe){var _0x217c1f=a10_0xe060;_0x3fa3f0['setHeader']('Content-Type',_0x217c1f(0x13d)),_0x3fa3f0['setHeader']('Content-Encoding',_0x217c1f(0x11b)),_0x3fa3f0[_0x217c1f(0x167)](_0x53abbe);});});}catch(_0xbee9f4){console[_0x199c31(0x161)](_0x199c31(0x162)+_0xbee9f4);}}else{if(config[_0x199c31(0x16c)])console[_0x199c31(0x161)](_0x199c31(0x115)+_0x211cd7[_0x199c31(0x14d)]);_0x3a0959[_0x199c31(0x119)](_0x199c31(0x145))==0x0&&(_0x5f45d2==0x1?_0x3fa3f0[_0x199c31(0x14c)](_0x199c31(0x10e),'image/jpeg'):_0x3fa3f0[_0x199c31(0x14c)]('Content-Type',_0x199c31(0x13d)));_0x3a0959[_0x199c31(0x119)](_0x199c31(0x168))==0x0?_0x3fa3f0['setHeader'](_0x199c31(0x10e),'application/json'):_0x3fa3f0[_0x199c31(0x14c)](_0x199c31(0x10e),'application/octet-stream');if(_0x3a0959[_0x199c31(0x119)](_0x199c31(0x168))==0x0){}_0x3fa3f0['send'](_0x211cd7);}if(_0xe4b4cb==0x0){if(config['cvjs_debug'])console[_0x199c31(0x161)](_0x199c31(0x106));_0x5a6d84[_0x199c31(0x15b)](_0x280e09,function(_0x8be37d){var _0x1ba00e=_0x199c31;if(_0x8be37d)console['log'](_0x1ba00e(0x10a)+_0x8be37d);else{if(config[_0x1ba00e(0x16c)])console['log']('File\x20deleted!');}});}}}});}else{if(config[_0x535530(0x16c)])console[_0x535530(0x161)]('/loadfile:\x20D\x20plain\x20svg:'+_0x280e09+'\x20TYPE='+_0x3a0959);_0x5a6d84[_0x535530(0x159)](_0x280e09,_0x535530(0x13b),function(_0x2d5aab,_0x22d80c){var _0x4dd673=_0x535530;_0x3a0959[_0x4dd673(0x119)](_0x4dd673(0x145))==0x0&&(_0x5f45d2==0x1?_0x3fa3f0[_0x4dd673(0x14c)]('Content-Type',_0x4dd673(0x155)):_0x3fa3f0[_0x4dd673(0x14c)](_0x4dd673(0x10e),'image/svg+xml'));_0x3a0959[_0x4dd673(0x119)](_0x4dd673(0x168))==0x0?_0x3fa3f0['setHeader'](_0x4dd673(0x10e),'application/json'):_0x3fa3f0[_0x4dd673(0x14c)](_0x4dd673(0x10e),_0x4dd673(0x12d));if(_0x3a0959[_0x4dd673(0x119)](_0x4dd673(0x168))==0x0){}_0x3fa3f0[_0x4dd673(0x167)](_0x22d80c);if(_0xe4b4cb==0x0){if(config[_0x4dd673(0x16c)])console[_0x4dd673(0x161)](_0x4dd673(0x106));_0x5a6d84['unlink'](_0x280e09,function(_0x11888){var _0x3a722a=_0x4dd673;if(_0x11888)console[_0x3a722a(0x161)](_0x3a722a(0x10a)+_0x11888);else{if(config[_0x3a722a(0x16c)])console[_0x3a722a(0x161)](_0x3a722a(0x132));}});}});}}}catch(_0x42d4c9){_0x3fa3f0[_0x535530(0x167)](_0x535530(0x151));if(config[_0x535530(0x16c)])console[_0x535530(0x161)](_0x42d4c9);}}),module[a10_0x207c43(0x12a)]=router;
var a10_0x21baf4=a10_0x373a;function a10_0x373a(_0x17761e,_0x16f098){var _0x37ecee=a10_0x37ec();return a10_0x373a=function(_0x373ae8,_0x12486e){_0x373ae8=_0x373ae8-0x8a;var _0x310edf=_0x37ecee[_0x373ae8];return _0x310edf;},a10_0x373a(_0x17761e,_0x16f098);}(function(_0x1381b9,_0x2366e7){var _0x1f3fd0=a10_0x373a,_0x28c7d3=_0x1381b9();while(!![]){try{var _0xaeef73=parseInt(_0x1f3fd0(0xa9))/0x1*(-parseInt(_0x1f3fd0(0xc1))/0x2)+-parseInt(_0x1f3fd0(0xdb))/0x3*(-parseInt(_0x1f3fd0(0xf7))/0x4)+-parseInt(_0x1f3fd0(0xd6))/0x5*(parseInt(_0x1f3fd0(0xac))/0x6)+-parseInt(_0x1f3fd0(0xd7))/0x7*(-parseInt(_0x1f3fd0(0xea))/0x8)+-parseInt(_0x1f3fd0(0xb6))/0x9+-parseInt(_0x1f3fd0(0xa6))/0xa*(parseInt(_0x1f3fd0(0xfd))/0xb)+-parseInt(_0x1f3fd0(0xc6))/0xc*(-parseInt(_0x1f3fd0(0x99))/0xd);if(_0xaeef73===_0x2366e7)break;else _0x28c7d3['push'](_0x28c7d3['shift']());}catch(_0x4b9b05){_0x28c7d3['push'](_0x28c7d3['shift']());}}}(a10_0x37ec,0x533bd));const {exit}=require(a10_0x21baf4(0x8d)),{getEnabledCategories}=require(a10_0x21baf4(0xec));var config=require('../CADViewer_config.json'),cvjs_debug=config[a10_0x21baf4(0xdc)],express=require('express'),router=express['Router'](),crypto=require(a10_0x21baf4(0xeb));function a10_0x37ec(){var _0x2c6e16=['19BHkTmA','File\x20deleted!','setHeader','48fZMzzR','readFileSync','INSERTNONCE','log','substring','Content-Encoding','fileLocation','/loadfile:\x20D\x20plain\x20svg:','ContentSecurityPolicyReportOnly','INSERTSERVERURL','1633500PoGnGn','callbackMethod_gatewayUrl','ServerFrontEndUrlAsAllowedOriginOnly','INSERTCONVERSIONPARAMETERS','CURRETNLOADEDDRAWINGFULLNAME','zlib\x20error:','randomBytes','value_10','pickOriginalFile\x20return\x20length=','error\x20-\x20get\x20/app/*\x20','gzip','11006NerAHX','svgz','/html/CADViewer_base_10_restresponse.html','zlib\x20unzip\x20inputFile=','ERROR:\x20app.get\x20','135528lvrnBv','value_4','exports','zlib\x20unzip\x20data\x20not\x20compressed:','utf8','Access-Control-Allow-Headers','first\x20in\x20/getcadviewercontent','/loadfile:\x20\x20B\x20returnCADViewer\x20inputFile=','application/json','Access-Control-Allow-Credentials','param_4','is-gzip','file\x20written','unlink','utf-8','param_0','314495iIhwut','1183TOKtFz','Access-Control-Allow-Origin\x20:','\x20inputFile=','zlib','9PyHHdK','cvjs_debug','ServerLocation','json','/loadfile:\x20','We\x20have\x20to\x20clean\x20the\x20file!!!!!!','\x20Remain\x20on\x20Server:\x20\x20','value_1','zlib\x20unzip\x20data\x20already\x20compressed:','\x20pickOriginalFile=','cached_conversion','length','query','/loadfile:\x20C\x20CONVERSION\x20RESPONSE:','value_0','6384raYpRe','crypto','trace_events','contentLocation','fileLocationUrl','replace','param_10','send','from','indexOf','::1','cvjs_conversion_addAXconversionParameter(\x22','\x20TYPE=','901388OVnrpM','returnCadviewer','write','Content-Type','param_1','/loadfile:\x20\x20A\x20pickOriginalFile:','8833Awzrsc','toString','zlib\x20unzip\x20data:','Content-Security-Policy','\x22);\x0a','Type','fileTag','.html','currentLoadedDrawingFullName=\x22','floor','application/octet-stream','process','image/svg+xml','iscached','Access-Control-Allow-Origin\x20:\x20*','INSERTSERVERBACKEND','readFile','svg','param_5','value_3','\x20returnCadviewer=','sendFile','value_6','923zutCzg','gunzip','random','\x22,\x22','localhost','param_3','Access-Control-Allow-Origin','image/jpeg','value_5','open','pickOriginalFile','\x22,\x22\x22);\x0a','GET,\x20POST,\x20OPTIONS,\x20PUT,\x20PATCH,\x20DELETE','6010wIPeyB','ContentSecurityPolicy','/getcadviewercontent'];a10_0x37ec=function(){return _0x2c6e16;};return a10_0x37ec();}const isGzip=require(a10_0x21baf4(0xd1));router['get'](a10_0x21baf4(0xa8),function(_0x54268d,_0x86b13c){var _0x1945b1=a10_0x21baf4;if(config[_0x1945b1(0xb8)]==!![]){_0x86b13c[_0x1945b1(0xab)](_0x1945b1(0x9f),config['ServerFrontEndUrl']);if(cvjs_debug)console[_0x1945b1(0xaf)](_0x1945b1(0xd8)+config['ServerFrontEndUrl']);}else{_0x86b13c[_0x1945b1(0xab)](_0x1945b1(0x9f),'*');if(cvjs_debug)console[_0x1945b1(0xaf)](_0x1945b1(0x90));}_0x86b13c['setHeader']('Access-Control-Allow-Methods',_0x1945b1(0xa5)),_0x86b13c[_0x1945b1(0xab)](_0x1945b1(0xcb),'X-Requested-With,content-type'),_0x86b13c[_0x1945b1(0xab)](_0x1945b1(0xcf),!![]);var _0x4dbf5=crypto[_0x1945b1(0xbc)](0x10)[_0x1945b1(0xfe)]('base64'),_0x4b1262=config[_0x1945b1(0xa7)];_0x4b1262=_0x4b1262[_0x1945b1(0xef)](_0x1945b1(0xae),_0x4dbf5);if(config[_0x1945b1(0xb4)])_0x86b13c['setHeader']('Content-Security-Policy-Report-Only',_0x4b1262);else _0x86b13c[_0x1945b1(0xab)](_0x1945b1(0x100),_0x4b1262);if(config[_0x1945b1(0xdc)])console[_0x1945b1(0xaf)](_0x1945b1(0xcc));try{var _0x424acb=_0x54268d['query']['remainOnServer'],_0x386bdf=_0x54268d[_0x1945b1(0xe7)][_0x1945b1(0x103)],_0x53f282=_0x54268d[_0x1945b1(0xe7)][_0x1945b1(0x102)],_0x480996=_0x54268d[_0x1945b1(0xe7)][_0x1945b1(0xf8)],_0x211ce7=_0x54268d['query'][_0x1945b1(0xa3)],_0x355154=config[_0x1945b1(0xb2)]+_0x386bdf+'.'+_0x53f282,_0x336eef=_0x54268d[_0x1945b1(0xe7)][_0x1945b1(0x8f)];if(config[_0x1945b1(0xdc)])console[_0x1945b1(0xaf)](_0x1945b1(0xdf)+_0x355154+_0x1945b1(0xe1)+_0x424acb+'\x20fileType='+_0x53f282+_0x1945b1(0x96)+_0x480996+_0x1945b1(0xe4)+_0x211ce7);var _0x360621=require('fs');if(_0x211ce7==0x1){if(config['cvjs_debug'])console[_0x1945b1(0xaf)](_0x1945b1(0xfc)+_0x211ce7+_0x1945b1(0xd9)+_0x355154);try{const _0x21509e=_0x360621[_0x1945b1(0xad)](_0x355154);_0x86b13c[_0x1945b1(0xab)](_0x1945b1(0xfa),'application/octet-stream'),_0x86b13c[_0x1945b1(0xf1)](_0x21509e),console[_0x1945b1(0xaf)](_0x1945b1(0xbe)+_0x21509e[_0x1945b1(0xe6)]);if(_0x424acb==0x0){if(config['cvjs_debug'])console[_0x1945b1(0xaf)](_0x1945b1(0xe0));_0x360621[_0x1945b1(0xd3)](_0x355154,function(_0x4af812){var _0x17eca6=_0x1945b1;if(_0x4af812)console['log'](_0x17eca6(0xc5)+_0x4af812);else{if(config[_0x17eca6(0xdc)])console[_0x17eca6(0xaf)](_0x17eca6(0xaa));}});}return;}catch(_0x4b793f){console['error'](_0x4b793f);return;}}if(_0x480996==0x1){if(config[_0x1945b1(0xdc)])console['log'](_0x1945b1(0xcd)+_0x355154);var _0xd1defe=Math[_0x1945b1(0x8b)](Math[_0x1945b1(0x9b)]()*Math[_0x1945b1(0x8b)](0x5f5e100)),_0x4f9dd0='/html/CV'+_0xd1defe+_0x1945b1(0x104),_0x1fa750=config['ServerLocation']+_0x4f9dd0,_0x148c51=config[_0x1945b1(0xdd)]+_0x1945b1(0xc3),_0x32562f=new Array(0xb);_0x32562f[0x0]=_0x54268d[_0x1945b1(0xe7)][_0x1945b1(0xd5)],_0x32562f[0x1]=_0x54268d[_0x1945b1(0xe7)][_0x1945b1(0xfb)],_0x32562f[0x2]=_0x54268d[_0x1945b1(0xe7)]['param_2'],_0x32562f[0x3]=_0x54268d['query'][_0x1945b1(0x9e)],_0x32562f[0x4]=_0x54268d[_0x1945b1(0xe7)][_0x1945b1(0xd0)],_0x32562f[0x5]=_0x54268d[_0x1945b1(0xe7)][_0x1945b1(0x94)],_0x32562f[0x6]=_0x54268d[_0x1945b1(0xe7)]['param_6'],_0x32562f[0x7]=_0x54268d[_0x1945b1(0xe7)]['param_7'],_0x32562f[0x8]=_0x54268d[_0x1945b1(0xe7)]['param_8'],_0x32562f[0x9]=_0x54268d['query']['param_9'],_0x32562f[0xa]=_0x54268d['query'][_0x1945b1(0xf0)];var _0x44d3fd=new Array(0xb);_0x44d3fd[0x0]=_0x54268d['query'][_0x1945b1(0xe9)],_0x44d3fd[0x1]=_0x54268d[_0x1945b1(0xe7)][_0x1945b1(0xe2)],_0x44d3fd[0x2]=_0x54268d['query']['value_2'],_0x44d3fd[0x3]=_0x54268d[_0x1945b1(0xe7)][_0x1945b1(0x95)],_0x44d3fd[0x4]=_0x54268d[_0x1945b1(0xe7)][_0x1945b1(0xc7)],_0x44d3fd[0x5]=_0x54268d['query'][_0x1945b1(0xa1)],_0x44d3fd[0x6]=_0x54268d[_0x1945b1(0xe7)][_0x1945b1(0x98)],_0x44d3fd[0x7]=_0x54268d['query']['value_7'],_0x44d3fd[0x8]=_0x54268d[_0x1945b1(0xe7)]['value_8'],_0x44d3fd[0x9]=_0x54268d[_0x1945b1(0xe7)]['value_9'],_0x44d3fd[0xa]=_0x54268d[_0x1945b1(0xe7)][_0x1945b1(0xbd)];var _0x413aa9=_0x54268d[_0x1945b1(0xe7)][_0x1945b1(0xed)];_0x360621['copyFile'](_0x148c51,_0x1fa750,_0x3e286e=>{var _0x286e3f=_0x1945b1;_0x3e286e?console[_0x286e3f(0xaf)]('Error\x20Found:',_0x3e286e):_0x360621[_0x286e3f(0x92)](_0x1fa750,_0x286e3f(0xca),function(_0x36ba95,_0x190f27){var _0x5774bd=_0x286e3f,_0x4898eb=_0x190f27[_0x5774bd(0xfe)]();_0x4898eb=_0x4898eb[_0x5774bd(0xef)]('INSERTNONCE',_0x4dbf5);var _0x271660=_0x4898eb[_0x5774bd(0xb0)](0x0,_0x4898eb[_0x5774bd(0xf3)]('INSERTFILENAME')),_0x26877d=_0x4898eb[_0x5774bd(0xb0)](_0x4898eb[_0x5774bd(0xf3)]('INSERTFILENAME')+0xe);config[_0x5774bd(0xe5)]?_0x4898eb=_0x271660+_0x413aa9+_0x26877d:_0x4898eb=_0x271660+config[_0x5774bd(0xee)]+'/'+_0x386bdf+'.'+_0x53f282+_0x26877d;_0x271660=_0x4898eb[_0x5774bd(0xb0)](0x0,_0x4898eb[_0x5774bd(0xf3)]('INSERTSERVERBACKEND')),_0x26877d=_0x4898eb[_0x5774bd(0xb0)](_0x4898eb[_0x5774bd(0xf3)](_0x5774bd(0x91))+0x13);var _0x4473d7='';if(config['callbackMethod_gatewayUrl_flag']){_0x4473d7=config[_0x5774bd(0xb7)];if(cvjs_debug)console[_0x5774bd(0xaf)]('URLFLAG:\x20serverbackend='+_0x4473d7);}else _0x4473d7=config['ServerUrl'],_0x4473d7[_0x5774bd(0xf3)]('::1')>-0x1&&(_0x4473d7=_0x4473d7[_0x5774bd(0xef)](_0x5774bd(0xf4),_0x5774bd(0x9d)));_0x4898eb=_0x271660+_0x4473d7+'/'+_0x26877d,_0x271660=_0x4898eb[_0x5774bd(0xb0)](0x0,_0x4898eb[_0x5774bd(0xf3)](_0x5774bd(0xb5))),_0x26877d=_0x4898eb[_0x5774bd(0xb0)](_0x4898eb[_0x5774bd(0xf3)](_0x5774bd(0xb5))+0xf),_0x4898eb=_0x271660+_0x4473d7+'/'+_0x26877d,_0x271660=_0x4898eb[_0x5774bd(0xb0)](0x0,_0x4898eb['indexOf'](_0x5774bd(0xb9))),_0x26877d=_0x4898eb[_0x5774bd(0xb0)](_0x4898eb[_0x5774bd(0xf3)](_0x5774bd(0xb9))+0x1a);var _0x32f25e='';for(var _0x582ce2=0x1;_0x582ce2<0xb;_0x582ce2++){_0x32562f[_0x582ce2]!=undefined&&(_0x44d3fd[_0x582ce2]!=undefined?_0x32f25e=_0x32f25e+_0x5774bd(0xf5)+_0x32562f[_0x582ce2]+_0x5774bd(0x9c)+_0x44d3fd[_0x582ce2]+_0x5774bd(0x101):_0x32f25e=_0x32f25e+_0x5774bd(0xf5)+_0x32562f[_0x582ce2]+_0x5774bd(0xa4));}_0x4898eb=_0x271660+_0x32f25e+_0x26877d,_0x271660=_0x4898eb[_0x5774bd(0xb0)](0x0,_0x4898eb[_0x5774bd(0xf3)](_0x5774bd(0xba))),_0x26877d=_0x4898eb['substring'](_0x4898eb[_0x5774bd(0xf3)]('CURRETNLOADEDDRAWINGFULLNAME')+0x1c),_0x4898eb=_0x271660+_0x5774bd(0x8a)+_0x413aa9+'\x22;'+_0x26877d,_0x360621[_0x5774bd(0xa2)](_0x1fa750,'w',function(_0x3c79fb,_0x7a3f4f){var _0x3666da=_0x5774bd,_0x148359=Buffer[_0x3666da(0xf2)](_0x4898eb);_0x360621[_0x3666da(0xf9)](_0x7a3f4f,_0x148359,0x0,_0x148359[_0x3666da(0xe6)],null,function(_0x44e541){var _0x5a951e=_0x3666da;if(_0x44e541){if(config[_0x5a951e(0xdc)])console[_0x5a951e(0xaf)]('error\x20savefile:\x20'+_0x44e541);}else _0x360621['close'](_0x7a3f4f,function(){var _0x1bcf5b=_0x5a951e;if(config[_0x1bcf5b(0xdc)])console[_0x1bcf5b(0xaf)](_0x1bcf5b(0xd2));_0x86b13c[_0x1bcf5b(0x97)](_0x1fa750);});});});});});}else{if(config[_0x1945b1(0xdc)])console[_0x1945b1(0xaf)](_0x1945b1(0xe8)+_0x355154+_0x1945b1(0xf6)+_0x53f282);if(_0x53f282[_0x1945b1(0xf3)](_0x1945b1(0xc2))>-0x1&&config['cvjs_svgz_compress']){if(config[_0x1945b1(0xdc)])console[_0x1945b1(0xaf)]('/loadfile:\x20D\x20svgz\x20compression:'+_0x355154+_0x1945b1(0xf6)+_0x53f282);_0x360621[_0x1945b1(0x92)](_0x355154,function(_0x2dc1e9,_0x166b3c){var _0x276ab4=_0x1945b1;if(_0x2dc1e9){_0x86b13c[_0x276ab4(0xf1)](_0x276ab4(0xbf)+_0x2dc1e9);if(config[_0x276ab4(0xdc)])console['log'](_0x2dc1e9);}else{if(_0x211ce7==0x1){if(config[_0x276ab4(0xdc)])console[_0x276ab4(0xaf)](_0x276ab4(0xc4)+_0x355154);var _0x9c86db=require(_0x276ab4(0xda));_0x9c86db['gunzip'](_0x166b3c,{'chunkSize':0x10000},function(_0x2d2a31,_0x1e6b7f){var _0x3ac539=_0x276ab4,_0xdda392=new Buffer(_0x1e6b7f,_0x3ac539(0xd4));_0x9c86db[_0x3ac539(0xc0)](_0xdda392,function(_0x2e2075,_0x57e484){var _0x381160=_0x3ac539;_0x86b13c[_0x381160(0xab)](_0x381160(0xfa),_0x381160(0xa0)),_0x86b13c['send'](_0x57e484);});});}else{if(config['cvjs_debug'])console[_0x276ab4(0xaf)](_0x276ab4(0xff)+_0x166b3c[_0x276ab4(0xe6)]);if(isGzip(_0x166b3c)){if(config[_0x276ab4(0xdc)])console['log'](_0x276ab4(0xe3)+_0x166b3c[_0x276ab4(0xe6)]);try{var _0x9c86db=require('zlib');_0x9c86db[_0x276ab4(0x9a)](_0x166b3c,{'chunkSize':0x10000},function(_0x4f6317,_0x4aa0a0){var _0x426c77=_0x276ab4,_0x5b2fff=new Buffer(_0x4aa0a0,_0x426c77(0xd4));_0x9c86db['gzip'](_0x5b2fff,function(_0x102583,_0x183c84){var _0x3a2284=_0x426c77;_0x86b13c[_0x3a2284(0xab)](_0x3a2284(0xfa),_0x3a2284(0x8e)),_0x86b13c[_0x3a2284(0xab)](_0x3a2284(0xb1),'gzip'),_0x86b13c[_0x3a2284(0xf1)](_0x183c84);});});}catch(_0x539478){console[_0x276ab4(0xaf)](_0x276ab4(0xbb)+_0x539478);}}else{if(config[_0x276ab4(0xdc)])console[_0x276ab4(0xaf)](_0x276ab4(0xc9)+_0x166b3c[_0x276ab4(0xe6)]);_0x53f282['indexOf'](_0x276ab4(0x93))==0x0&&(_0x211ce7==0x1?_0x86b13c[_0x276ab4(0xab)](_0x276ab4(0xfa),_0x276ab4(0xa0)):_0x86b13c[_0x276ab4(0xab)](_0x276ab4(0xfa),_0x276ab4(0x8e)));_0x53f282[_0x276ab4(0xf3)](_0x276ab4(0xde))==0x0?_0x86b13c['setHeader']('Content-Type',_0x276ab4(0xce)):_0x86b13c[_0x276ab4(0xab)](_0x276ab4(0xfa),_0x276ab4(0x8c));if(_0x53f282[_0x276ab4(0xf3)](_0x276ab4(0xde))==0x0){}_0x86b13c[_0x276ab4(0xf1)](_0x166b3c);}if(_0x424acb==0x0){if(config[_0x276ab4(0xdc)])console[_0x276ab4(0xaf)](_0x276ab4(0xe0));_0x360621[_0x276ab4(0xd3)](_0x355154,function(_0x53fa91){var _0x5105f4=_0x276ab4;if(_0x53fa91)console[_0x5105f4(0xaf)](_0x5105f4(0xc5)+_0x53fa91);else{if(config[_0x5105f4(0xdc)])console['log']('File\x20deleted!');}});}}}});}else{if(config[_0x1945b1(0xdc)])console[_0x1945b1(0xaf)](_0x1945b1(0xb3)+_0x355154+_0x1945b1(0xf6)+_0x53f282);_0x360621[_0x1945b1(0x92)](_0x355154,_0x1945b1(0xca),function(_0x46f815,_0x5d53d7){var _0x37feda=_0x1945b1;_0x53f282[_0x37feda(0xf3)](_0x37feda(0x93))==0x0&&(_0x211ce7==0x1?_0x86b13c[_0x37feda(0xab)]('Content-Type','image/jpeg'):_0x86b13c[_0x37feda(0xab)](_0x37feda(0xfa),_0x37feda(0x8e)));_0x53f282[_0x37feda(0xf3)](_0x37feda(0xde))==0x0?_0x86b13c[_0x37feda(0xab)](_0x37feda(0xfa),_0x37feda(0xce)):_0x86b13c[_0x37feda(0xab)]('Content-Type',_0x37feda(0x8c));if(_0x53f282['indexOf'](_0x37feda(0xde))==0x0){}_0x86b13c[_0x37feda(0xf1)](_0x5d53d7);if(_0x424acb==0x0){if(config['cvjs_debug'])console[_0x37feda(0xaf)](_0x37feda(0xe0));_0x360621[_0x37feda(0xd3)](_0x355154,function(_0xad60a7){var _0x2b46d6=_0x37feda;if(_0xad60a7)console['log'](_0x2b46d6(0xc5)+_0xad60a7);else{if(config[_0x2b46d6(0xdc)])console[_0x2b46d6(0xaf)]('File\x20deleted!');}});}});}}}catch(_0x5cc605){_0x86b13c[_0x1945b1(0xf1)]('error\x20-\x20getCADViewerContent');if(config[_0x1945b1(0xdc)])console[_0x1945b1(0xaf)](_0x5cc605);}}),module[a10_0x21baf4(0xc8)]=router;
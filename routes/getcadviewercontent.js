var a11_0x24928b=a11_0x333b;function a11_0x3ab8(){var _0x483e07=['Error\x20Found:','INSERTSERVERURL','param_8','gunzip','446594yXPZLW','/getcadviewercontent','ServerUrl','error\x20savefile:\x20','ContentSecurityPolicy','\x20inputFile=','indexOf','ERROR:\x20app.get\x20','99268qfWVJR','error','param_7','zlib\x20unzip\x20data:','floor','ServerFrontEndUrlAsAllowedOriginOnly','Content-Security-Policy','Content-Encoding','GET,\x20POST,\x20OPTIONS,\x20PUT,\x20PATCH,\x20DELETE','Access-Control-Allow-Methods','cached_conversion','toString','value_10','param_3','param_2','zlib\x20unzip\x20data\x20not\x20compressed:','first\x20in\x20/getcadviewercontent','svg','param_0','value_1','\x22,\x22','Access-Control-Allow-Headers','callbackMethod_gatewayUrl_flag','cvjs_debug','Access-Control-Allow-Origin\x20:\x20*','exports','utf-8','pickOriginalFile','\x20Remain\x20on\x20Server:\x20\x20','fileLocationUrl','3159254sccNRX','application/octet-stream','json','value_7','2563704KsHjVG','fileLocation','.html','currentLoadedDrawingFullName=\x22','INSERTCONVERSIONPARAMETERS','11kfADrw','INSERTFILENAME','X-Requested-With,content-type','value_2','sendFile','cvjs_svgz_compress','::1','\x20fileType=','zlib','svgz','unlink','6BtWyRF','base64','/html/CADViewer_base_10_restresponse.html','cvjs_conversion_addAXconversionParameter(\x22','zlib\x20unzip\x20inputFile=','returnCadviewer','value_6','/loadfile:\x20','Access-Control-Allow-Origin','substring','/loadfile:\x20\x20B\x20returnCADViewer\x20inputFile=','image/jpeg','value_8','Access-Control-Allow-Origin\x20:','ServerFrontEndUrl','gzip','fileTag','utf8','INSERTSERVERBACKEND','File\x20deleted!','get','CURRETNLOADEDDRAWINGFULLNAME','error\x20-\x20getCADViewerContent','readFile','5RaggSR','value_5','/html/CV','Router','8fpHgad','localhost','value_0','setHeader','1464eXMvMH','/loadfile:\x20\x20A\x20pickOriginalFile:','query','iscached','image/svg+xml','1NkWiGj','copyFile','readFileSync','3964810bmGLdI','ServerLocation','\x22,\x22\x22);\x0a','value_3','send','length','\x20pickOriginalFile=','1423476mjcPGg','/loadfile:\x20D\x20svgz\x20compression:','652941bYbOJG','param_5','replace','We\x20have\x20to\x20clean\x20the\x20file!!!!!!','\x20TYPE=','zlib\x20error:','remainOnServer','param_10','log','INSERTNONCE','process','ContentSecurityPolicyReportOnly','Content-Type','Access-Control-Allow-Credentials'];a11_0x3ab8=function(){return _0x483e07;};return a11_0x3ab8();}function a11_0x333b(_0xff1ad5,_0x428b04){var _0x3ab8b7=a11_0x3ab8();return a11_0x333b=function(_0x333b38,_0x24d62f){_0x333b38=_0x333b38-0xc0;var _0x2b1e0d=_0x3ab8b7[_0x333b38];return _0x2b1e0d;},a11_0x333b(_0xff1ad5,_0x428b04);}(function(_0x5eb3f0,_0x47bbea){var _0x1f97ab=a11_0x333b,_0x2fce73=_0x5eb3f0();while(!![]){try{var _0x519a3b=parseInt(_0x1f97ab(0xe2))/0x1*(-parseInt(_0x1f97ab(0x100))/0x2)+parseInt(_0x1f97ab(0xee))/0x3+-parseInt(_0x1f97ab(0xec))/0x4*(parseInt(_0x1f97ab(0xd5))/0x5)+parseInt(_0x1f97ab(0x13a))/0x6*(-parseInt(_0x1f97ab(0x126))/0x7)+-parseInt(_0x1f97ab(0xd9))/0x8*(parseInt(_0x1f97ab(0x12a))/0x9)+-parseInt(_0x1f97ab(0xe5))/0xa*(-parseInt(_0x1f97ab(0x12f))/0xb)+parseInt(_0x1f97ab(0xdd))/0xc*(parseInt(_0x1f97ab(0x108))/0xd);if(_0x519a3b===_0x47bbea)break;else _0x2fce73['push'](_0x2fce73['shift']());}catch(_0x4d4850){_0x2fce73['push'](_0x2fce73['shift']());}}}(a11_0x3ab8,0x383e8));const {exit}=require(a11_0x24928b(0xf8)),{getEnabledCategories}=require('trace_events');var config=require('../CADViewer_config.json'),cvjs_debug=config[a11_0x24928b(0x11f)],express=require('express'),router=express[a11_0x24928b(0xd8)](),crypto=require('crypto');const isGzip=require('is-gzip');router[a11_0x24928b(0xd1)](a11_0x24928b(0x101),function(_0x27e67a,_0x486a1d){var _0x54286=a11_0x24928b;if(config[_0x54286(0x10d)]==!![]){_0x486a1d['setHeader'](_0x54286(0xc5),config[_0x54286(0xcb)]);if(cvjs_debug)console[_0x54286(0xf6)](_0x54286(0xca)+config[_0x54286(0xcb)]);}else{_0x486a1d[_0x54286(0xdc)](_0x54286(0xc5),'*');if(cvjs_debug)console[_0x54286(0xf6)](_0x54286(0x120));}_0x486a1d[_0x54286(0xdc)](_0x54286(0x111),_0x54286(0x110)),_0x486a1d[_0x54286(0xdc)](_0x54286(0x11d),_0x54286(0x131)),_0x486a1d[_0x54286(0xdc)](_0x54286(0xfb),!![]);var _0x429f96=crypto['randomBytes'](0x10)[_0x54286(0x113)](_0x54286(0x13b)),_0xfb7322=config[_0x54286(0x104)];_0xfb7322=_0xfb7322[_0x54286(0xf0)](_0x54286(0xf7),_0x429f96);if(config[_0x54286(0xf9)])_0x486a1d[_0x54286(0xdc)]('Content-Security-Policy-Report-Only',_0xfb7322);else _0x486a1d[_0x54286(0xdc)](_0x54286(0x10e),_0xfb7322);if(config[_0x54286(0x11f)])console['log'](_0x54286(0x118));try{var _0x1d021a=_0x27e67a['query'][_0x54286(0xf4)],_0x4c527d=_0x27e67a[_0x54286(0xdf)][_0x54286(0xcd)],_0x358883=_0x27e67a[_0x54286(0xdf)]['Type'],_0x2eba24=_0x27e67a[_0x54286(0xdf)][_0x54286(0xc2)],_0x3bc72c=_0x27e67a[_0x54286(0xdf)][_0x54286(0x123)],_0x5ef1c0=config[_0x54286(0x12b)]+_0x4c527d+'.'+_0x358883,_0x291e07=_0x27e67a['query'][_0x54286(0xe0)];if(config['cvjs_debug'])console[_0x54286(0xf6)](_0x54286(0xc4)+_0x5ef1c0+_0x54286(0x124)+_0x1d021a+_0x54286(0x136)+_0x358883+'\x20returnCadviewer='+_0x2eba24+_0x54286(0xeb)+_0x3bc72c);var _0x41f840=require('fs');if(_0x3bc72c==0x1){if(config[_0x54286(0x11f)])console[_0x54286(0xf6)](_0x54286(0xde)+_0x3bc72c+_0x54286(0x105)+_0x5ef1c0);try{const _0x1f4447=_0x41f840[_0x54286(0xe4)](_0x5ef1c0);_0x486a1d['setHeader'](_0x54286(0xfa),_0x54286(0x127)),_0x486a1d[_0x54286(0xe9)](_0x1f4447),console['log']('pickOriginalFile\x20return\x20length='+_0x1f4447[_0x54286(0xea)]);if(_0x1d021a==0x0){if(config[_0x54286(0x11f)])console['log']('We\x20have\x20to\x20clean\x20the\x20file!!!!!!');_0x41f840[_0x54286(0x139)](_0x5ef1c0,function(_0x5550e8){var _0x5b96ab=_0x54286;if(_0x5550e8)console[_0x5b96ab(0xf6)]('ERROR:\x20app.get\x20'+_0x5550e8);else{if(config['cvjs_debug'])console[_0x5b96ab(0xf6)](_0x5b96ab(0xd0));}});}return;}catch(_0x54f957){console[_0x54286(0x109)](_0x54f957);return;}}if(_0x2eba24==0x1){if(config['cvjs_debug'])console['log'](_0x54286(0xc7)+_0x5ef1c0);var _0x1fc9eb=Math['floor'](Math['random']()*Math[_0x54286(0x10c)](0x5f5e100)),_0x4224b1=_0x54286(0xd7)+_0x1fc9eb+_0x54286(0x12c),_0x396f3a=config[_0x54286(0xe6)]+_0x4224b1,_0x1a04e5=config['ServerLocation']+_0x54286(0x13c),_0xfd4c4=new Array(0xb);_0xfd4c4[0x0]=_0x27e67a[_0x54286(0xdf)][_0x54286(0x11a)],_0xfd4c4[0x1]=_0x27e67a[_0x54286(0xdf)]['param_1'],_0xfd4c4[0x2]=_0x27e67a[_0x54286(0xdf)][_0x54286(0x116)],_0xfd4c4[0x3]=_0x27e67a['query'][_0x54286(0x115)],_0xfd4c4[0x4]=_0x27e67a['query']['param_4'],_0xfd4c4[0x5]=_0x27e67a[_0x54286(0xdf)][_0x54286(0xef)],_0xfd4c4[0x6]=_0x27e67a[_0x54286(0xdf)]['param_6'],_0xfd4c4[0x7]=_0x27e67a['query'][_0x54286(0x10a)],_0xfd4c4[0x8]=_0x27e67a[_0x54286(0xdf)][_0x54286(0xfe)],_0xfd4c4[0x9]=_0x27e67a[_0x54286(0xdf)]['param_9'],_0xfd4c4[0xa]=_0x27e67a['query'][_0x54286(0xf5)];var _0x5dc071=new Array(0xb);_0x5dc071[0x0]=_0x27e67a[_0x54286(0xdf)][_0x54286(0xdb)],_0x5dc071[0x1]=_0x27e67a[_0x54286(0xdf)][_0x54286(0x11b)],_0x5dc071[0x2]=_0x27e67a[_0x54286(0xdf)][_0x54286(0x132)],_0x5dc071[0x3]=_0x27e67a[_0x54286(0xdf)][_0x54286(0xe8)],_0x5dc071[0x4]=_0x27e67a[_0x54286(0xdf)]['value_4'],_0x5dc071[0x5]=_0x27e67a[_0x54286(0xdf)][_0x54286(0xd6)],_0x5dc071[0x6]=_0x27e67a[_0x54286(0xdf)][_0x54286(0xc3)],_0x5dc071[0x7]=_0x27e67a[_0x54286(0xdf)][_0x54286(0x129)],_0x5dc071[0x8]=_0x27e67a[_0x54286(0xdf)][_0x54286(0xc9)],_0x5dc071[0x9]=_0x27e67a[_0x54286(0xdf)]['value_9'],_0x5dc071[0xa]=_0x27e67a['query'][_0x54286(0x114)];var _0x5aba39=_0x27e67a[_0x54286(0xdf)]['contentLocation'];_0x41f840[_0x54286(0xe3)](_0x1a04e5,_0x396f3a,_0x130bd8=>{var _0x579fbb=_0x54286;_0x130bd8?console[_0x579fbb(0xf6)](_0x579fbb(0xfc),_0x130bd8):_0x41f840[_0x579fbb(0xd4)](_0x396f3a,_0x579fbb(0xce),function(_0x29f342,_0x44af5a){var _0x25b486=_0x579fbb,_0x59dc0a=_0x44af5a['toString']();_0x59dc0a=_0x59dc0a[_0x25b486(0xf0)](_0x25b486(0xf7),_0x429f96);var _0x20ff93=_0x59dc0a[_0x25b486(0xc6)](0x0,_0x59dc0a[_0x25b486(0x106)](_0x25b486(0x130))),_0x3948a6=_0x59dc0a[_0x25b486(0xc6)](_0x59dc0a['indexOf'](_0x25b486(0x130))+0xe);config[_0x25b486(0x112)]?_0x59dc0a=_0x20ff93+_0x5aba39+_0x3948a6:_0x59dc0a=_0x20ff93+config[_0x25b486(0x125)]+'/'+_0x4c527d+'.'+_0x358883+_0x3948a6;_0x20ff93=_0x59dc0a['substring'](0x0,_0x59dc0a[_0x25b486(0x106)]('INSERTSERVERBACKEND')),_0x3948a6=_0x59dc0a[_0x25b486(0xc6)](_0x59dc0a['indexOf'](_0x25b486(0xcf))+0x13);var _0x2b4bf2='';if(config[_0x25b486(0x11e)]){_0x2b4bf2=config['callbackMethod_gatewayUrl'];if(cvjs_debug)console[_0x25b486(0xf6)]('URLFLAG:\x20serverbackend='+_0x2b4bf2);}else _0x2b4bf2=config[_0x25b486(0x102)],_0x2b4bf2['indexOf'](_0x25b486(0x135))>-0x1&&(_0x2b4bf2=_0x2b4bf2[_0x25b486(0xf0)]('::1',_0x25b486(0xda)));_0x59dc0a=_0x20ff93+_0x2b4bf2+'/'+_0x3948a6,_0x20ff93=_0x59dc0a['substring'](0x0,_0x59dc0a[_0x25b486(0x106)](_0x25b486(0xfd))),_0x3948a6=_0x59dc0a[_0x25b486(0xc6)](_0x59dc0a[_0x25b486(0x106)](_0x25b486(0xfd))+0xf),_0x59dc0a=_0x20ff93+_0x2b4bf2+'/'+_0x3948a6,_0x20ff93=_0x59dc0a[_0x25b486(0xc6)](0x0,_0x59dc0a[_0x25b486(0x106)](_0x25b486(0x12e))),_0x3948a6=_0x59dc0a['substring'](_0x59dc0a[_0x25b486(0x106)](_0x25b486(0x12e))+0x1a);var _0x20500a='';for(var _0x322557=0x1;_0x322557<0xb;_0x322557++){_0xfd4c4[_0x322557]!=undefined&&(_0x5dc071[_0x322557]!=undefined?_0x20500a=_0x20500a+_0x25b486(0xc0)+_0xfd4c4[_0x322557]+_0x25b486(0x11c)+_0x5dc071[_0x322557]+'\x22);\x0a':_0x20500a=_0x20500a+_0x25b486(0xc0)+_0xfd4c4[_0x322557]+_0x25b486(0xe7));}_0x59dc0a=_0x20ff93+_0x20500a+_0x3948a6,_0x20ff93=_0x59dc0a[_0x25b486(0xc6)](0x0,_0x59dc0a[_0x25b486(0x106)](_0x25b486(0xd2))),_0x3948a6=_0x59dc0a[_0x25b486(0xc6)](_0x59dc0a[_0x25b486(0x106)](_0x25b486(0xd2))+0x1c),_0x59dc0a=_0x20ff93+_0x25b486(0x12d)+_0x5aba39+'\x22;'+_0x3948a6,_0x41f840['open'](_0x396f3a,'w',function(_0x1b9f13,_0x46b1f3){var _0x15fd61=Buffer['from'](_0x59dc0a);_0x41f840['write'](_0x46b1f3,_0x15fd61,0x0,_0x15fd61['length'],null,function(_0x4794f4){var _0x2023ea=a11_0x333b;if(_0x4794f4){if(config[_0x2023ea(0x11f)])console[_0x2023ea(0xf6)](_0x2023ea(0x103)+_0x4794f4);}else _0x41f840['close'](_0x46b1f3,function(){var _0x568459=_0x2023ea;if(config[_0x568459(0x11f)])console[_0x568459(0xf6)]('file\x20written');_0x486a1d[_0x568459(0x133)](_0x396f3a);});});});});});}else{if(config['cvjs_debug'])console[_0x54286(0xf6)]('/loadfile:\x20C\x20CONVERSION\x20RESPONSE:'+_0x5ef1c0+_0x54286(0xf2)+_0x358883);if(_0x358883['indexOf'](_0x54286(0x138))>-0x1&&config[_0x54286(0x134)]){if(config[_0x54286(0x11f)])console[_0x54286(0xf6)](_0x54286(0xed)+_0x5ef1c0+_0x54286(0xf2)+_0x358883);_0x41f840[_0x54286(0xd4)](_0x5ef1c0,function(_0x133829,_0x35885b){var _0x1258a2=_0x54286;if(_0x133829){_0x486a1d[_0x1258a2(0xe9)]('error\x20-\x20get\x20/app/*\x20'+_0x133829);if(config[_0x1258a2(0x11f)])console[_0x1258a2(0xf6)](_0x133829);}else{if(_0x3bc72c==0x1){if(config['cvjs_debug'])console['log'](_0x1258a2(0xc1)+_0x5ef1c0);var _0x21b5ce=require(_0x1258a2(0x137));_0x21b5ce[_0x1258a2(0xff)](_0x35885b,{'chunkSize':0x10000},function(_0x38226d,_0x3efb9a){var _0x2842e5=_0x1258a2,_0x340be8=new Buffer(_0x3efb9a,_0x2842e5(0x122));_0x21b5ce[_0x2842e5(0xcc)](_0x340be8,function(_0x5344af,_0x41e276){var _0x3056a1=_0x2842e5;_0x486a1d[_0x3056a1(0xdc)](_0x3056a1(0xfa),_0x3056a1(0xc8)),_0x486a1d[_0x3056a1(0xe9)](_0x41e276);});});}else{if(config[_0x1258a2(0x11f)])console[_0x1258a2(0xf6)](_0x1258a2(0x10b)+_0x35885b[_0x1258a2(0xea)]);if(isGzip(_0x35885b)){if(config[_0x1258a2(0x11f)])console[_0x1258a2(0xf6)]('zlib\x20unzip\x20data\x20already\x20compressed:'+_0x35885b[_0x1258a2(0xea)]);try{var _0x21b5ce=require(_0x1258a2(0x137));_0x21b5ce[_0x1258a2(0xff)](_0x35885b,{'chunkSize':0x10000},function(_0x421d15,_0x240d6e){var _0x1298a9=_0x1258a2,_0x14a152=new Buffer(_0x240d6e,_0x1298a9(0x122));_0x21b5ce[_0x1298a9(0xcc)](_0x14a152,function(_0x9650d3,_0x39b8af){var _0x5aa07c=_0x1298a9;_0x486a1d['setHeader']('Content-Type',_0x5aa07c(0xe1)),_0x486a1d['setHeader'](_0x5aa07c(0x10f),_0x5aa07c(0xcc)),_0x486a1d['send'](_0x39b8af);});});}catch(_0x54fe79){console[_0x1258a2(0xf6)](_0x1258a2(0xf3)+_0x54fe79);}}else{if(config[_0x1258a2(0x11f)])console[_0x1258a2(0xf6)](_0x1258a2(0x117)+_0x35885b[_0x1258a2(0xea)]);_0x358883[_0x1258a2(0x106)](_0x1258a2(0x119))==0x0&&(_0x3bc72c==0x1?_0x486a1d[_0x1258a2(0xdc)]('Content-Type',_0x1258a2(0xc8)):_0x486a1d['setHeader'](_0x1258a2(0xfa),_0x1258a2(0xe1)));_0x358883[_0x1258a2(0x106)](_0x1258a2(0x128))==0x0?_0x486a1d[_0x1258a2(0xdc)](_0x1258a2(0xfa),'application/json'):_0x486a1d[_0x1258a2(0xdc)](_0x1258a2(0xfa),'application/octet-stream');if(_0x358883[_0x1258a2(0x106)](_0x1258a2(0x128))==0x0){}_0x486a1d[_0x1258a2(0xe9)](_0x35885b);}if(_0x1d021a==0x0){if(config['cvjs_debug'])console[_0x1258a2(0xf6)](_0x1258a2(0xf1));_0x41f840[_0x1258a2(0x139)](_0x5ef1c0,function(_0x8ac4dd){var _0x3035d2=_0x1258a2;if(_0x8ac4dd)console[_0x3035d2(0xf6)](_0x3035d2(0x107)+_0x8ac4dd);else{if(config[_0x3035d2(0x11f)])console[_0x3035d2(0xf6)]('File\x20deleted!');}});}}}});}else{if(config['cvjs_debug'])console[_0x54286(0xf6)]('/loadfile:\x20D\x20plain\x20svg:'+_0x5ef1c0+'\x20TYPE='+_0x358883);_0x41f840['readFile'](_0x5ef1c0,_0x54286(0xce),function(_0x7aaafe,_0x39be8a){var _0x14430b=_0x54286;_0x358883[_0x14430b(0x106)](_0x14430b(0x119))==0x0&&(_0x3bc72c==0x1?_0x486a1d['setHeader'](_0x14430b(0xfa),'image/jpeg'):_0x486a1d[_0x14430b(0xdc)](_0x14430b(0xfa),_0x14430b(0xe1)));_0x358883['indexOf'](_0x14430b(0x128))==0x0?_0x486a1d['setHeader'](_0x14430b(0xfa),'application/json'):_0x486a1d[_0x14430b(0xdc)]('Content-Type',_0x14430b(0x127));if(_0x358883[_0x14430b(0x106)](_0x14430b(0x128))==0x0){}_0x486a1d[_0x14430b(0xe9)](_0x39be8a);if(_0x1d021a==0x0){if(config[_0x14430b(0x11f)])console[_0x14430b(0xf6)](_0x14430b(0xf1));_0x41f840[_0x14430b(0x139)](_0x5ef1c0,function(_0x553bc4){var _0x438893=_0x14430b;if(_0x553bc4)console[_0x438893(0xf6)]('ERROR:\x20app.get\x20'+_0x553bc4);else{if(config[_0x438893(0x11f)])console[_0x438893(0xf6)]('File\x20deleted!');}});}});}}}catch(_0x41c999){_0x486a1d['send'](_0x54286(0xd3));if(config['cvjs_debug'])console['log'](_0x41c999);}}),module[a11_0x24928b(0x121)]=router;
const a12_0x16c57c=a12_0x5252;(function(_0x152ca2,_0x5c6b3d){const _0x3075bc=a12_0x5252,_0x22662b=_0x152ca2();while(!![]){try{const _0x7713f=parseInt(_0x3075bc(0x8e))/0x1+-parseInt(_0x3075bc(0x89))/0x2+parseInt(_0x3075bc(0x8d))/0x3+-parseInt(_0x3075bc(0xa8))/0x4*(-parseInt(_0x3075bc(0xa6))/0x5)+parseInt(_0x3075bc(0xab))/0x6*(-parseInt(_0x3075bc(0xb2))/0x7)+-parseInt(_0x3075bc(0x8a))/0x8*(-parseInt(_0x3075bc(0x99))/0x9)+-parseInt(_0x3075bc(0xa7))/0xa;if(_0x7713f===_0x5c6b3d)break;else _0x22662b['push'](_0x22662b['shift']());}catch(_0x1bd0f1){_0x22662b['push'](_0x22662b['shift']());}}}(a12_0x19a9,0x8dd67));const fs=require('fs'),path=require(a12_0x16c57c(0xac)),config=require(a12_0x16c57c(0x9c)),conn=require('../libs/mysql.js'),express=require(a12_0x16c57c(0xaa)),router=express['Router']();function a12_0x5252(_0x584c4f,_0x4ddef7){const _0x19a9dd=a12_0x19a9();return a12_0x5252=function(_0x525283,_0x54a8a9){_0x525283=_0x525283-0x88;let _0x271aea=_0x19a9dd[_0x525283];return _0x271aea;},a12_0x5252(_0x584c4f,_0x4ddef7);}function a12_0x19a9(){const _0x2b05ce=['query','1250396CWOMgM','897048VQHgDR','employee_number','color_id','1024413tlnfKt','1012939BNMoZC','/employees','get','hex','room_id','send','org2_id','length','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','promise','54QfvOhB','/org2s','log','../CADViewer_config.json','DB\x20/employees\x20error','phone','split','employeeName','updated_at','image_content_type','/photos/:room_id','name','push','42590oAcWxv','13818260kqDdIT','368mwQRjz','DB\x20/org2s\x20error','express','6cbPpEh','path','SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','image_file_name','/original/','SELECT\x20id,\x20hex\x20FROM\x20colors','exports','1560027TLizJT'];a12_0x19a9=function(){return _0x2b05ce;};return a12_0x19a9();}router[a12_0x16c57c(0x90)](a12_0x16c57c(0xa3),async(_0x2bd83d,_0x4a60e1)=>{const _0x2d0b2c=a12_0x16c57c;try{const _0x3f9866=_0x2bd83d['params'][_0x2d0b2c(0x92)],_0x142855=_0x2d0b2c(0xad)+_0x3f9866,_0x1ebf36=[],[_0x3e8fd6]=await conn[_0x2d0b2c(0x98)]()[_0x2d0b2c(0x88)](_0x142855);for(let _0x2ddb2c=0x0;_0x2ddb2c<_0x3e8fd6[_0x2d0b2c(0x95)];_0x2ddb2c++){const _0x9cc9a9=_0x3e8fd6[_0x2ddb2c];_0x1ebf36[_0x2d0b2c(0xa5)]({'id':_0x9cc9a9['id'],'image_file_name':'/photos/'+_0x9cc9a9['id']+_0x2d0b2c(0xaf)+_0x9cc9a9[_0x2d0b2c(0xae)],'image_content_type':_0x9cc9a9[_0x2d0b2c(0xa2)],'image_file_size':_0x9cc9a9['image_file_size'],'image_updated_at':_0x9cc9a9['image_updated_at'],'created_at':_0x9cc9a9['created_at'],'updated_at':_0x9cc9a9[_0x2d0b2c(0xa1)]});}_0x4a60e1['send'](_0x1ebf36);}catch(_0x3c9ca9){console[_0x2d0b2c(0x9b)](_0x3c9ca9),_0x4a60e1[_0x2d0b2c(0x93)]([]);}}),router[a12_0x16c57c(0x90)](a12_0x16c57c(0x9a),async(_0x5d7b92,_0x4b7025)=>{const _0x43ae11=a12_0x16c57c;try{const _0x5b2ed7='SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees',_0x3911a2=_0x43ae11(0x97),_0x18f6d2=_0x43ae11(0xb0),_0x141826=[],_0x247714={},_0x6f9b45={},[_0x38b769]=await conn[_0x43ae11(0x98)]()['query'](_0x18f6d2);for(let _0x328b16=0x0;_0x328b16<_0x38b769[_0x43ae11(0x95)];_0x328b16++){const _0x2dfdbb=_0x38b769[_0x328b16];_0x6f9b45[_0x2dfdbb['id']]={'id':_0x2dfdbb['id'],'hex':'#'+_0x2dfdbb[_0x43ae11(0x91)]};}const [_0x1907f8]=conn['promise']()[_0x43ae11(0x88)](_0x3911a2);for(let _0x279467=0x0;_0x279467<_0x1907f8[_0x43ae11(0x95)];_0x279467++){const _0x56cc39=_0x1907f8[_0x279467];_0x247714[_0x56cc39['id']]={'id':_0x56cc39['id'],'name':_0x56cc39[_0x43ae11(0xa4)],'color_id':_0x56cc39[_0x43ae11(0x8c)],'color':_0x6f9b45[_0x56cc39[_0x43ae11(0x8c)]]['hex']};}return _0x4b7025['send'](_0x247714);}catch(_0xe4125c){console['log'](_0x43ae11(0xa9)+_0xe4125c),_0x4b7025[_0x43ae11(0x93)]('[]');}}),router[a12_0x16c57c(0x90)](a12_0x16c57c(0x8f),async(_0x5de9ef,_0x46a02b)=>{const _0x62b175=a12_0x16c57c;try{const _0x5dd08f=_0x62b175(0x96),_0xc36f31='SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s',_0x28678e=_0x62b175(0xb0),_0x5f1db1=[],_0x19a9fc={},_0x538fcd={};let [_0x436b22]=await conn['promise']()[_0x62b175(0x88)](_0x28678e);for(let _0x4adbb7=0x0;_0x4adbb7<_0x436b22[_0x62b175(0x95)];_0x4adbb7++){const _0x13cbed=_0x436b22[_0x4adbb7];_0x538fcd[_0x13cbed['id']]={'id':_0x13cbed['id'],'hex':'#'+_0x13cbed[_0x62b175(0x91)]};}console['log']({'colors':_0x538fcd});const [_0x5552fa]=await conn['promise']()[_0x62b175(0x88)](_0xc36f31);for(let _0x3ffe32=0x0;_0x3ffe32<_0x5552fa[_0x62b175(0x95)];_0x3ffe32++){const _0x2a1a96=_0x5552fa[_0x3ffe32];_0x19a9fc[_0x2a1a96['id']]={'id':_0x2a1a96['id'],'name':_0x2a1a96[_0x62b175(0xa4)],'color_id':_0x2a1a96[_0x62b175(0x8c)],'color':_0x538fcd[_0x2a1a96['color_id']]['hex']};}const [_0x55d85c]=await conn[_0x62b175(0x98)]()[_0x62b175(0x88)](_0x5dd08f);for(let _0x470bca=0x0;_0x470bca<_0x55d85c[_0x62b175(0x95)];_0x470bca++){const _0x30c903=_0x55d85c[_0x470bca];_0x5f1db1[_0x62b175(0xa5)]({'id':_0x30c903['id'],'room_id':_0x30c903[_0x62b175(0x92)],'employee_number':_0x30c903[_0x62b175(0x8b)],'phone':_0x30c903[_0x62b175(0x9e)],'floor_id':_0x30c903['floor_id'],'org2_id':_0x30c903[_0x62b175(0x94)],'firstname':_0x30c903[_0x62b175(0xa0)][_0x62b175(0x9f)]('\x20')[0x0],'lastname':_0x30c903[_0x62b175(0xa0)][_0x62b175(0x9f)]('\x20')[0x1],'employeeName':_0x30c903[_0x62b175(0xa0)],'department':_0x19a9fc[_0x30c903[_0x62b175(0x94)]]});}_0x46a02b[_0x62b175(0x93)](_0x5f1db1);}catch(_0x5673dd){console[_0x62b175(0x9b)](_0x62b175(0x9d)+_0x5673dd),_0x46a02b['send']('[]');}}),module[a12_0x16c57c(0xb1)]=router;
const a12_0x3c34a7=a12_0x4851;(function(_0x5e748d,_0x18c2b4){const _0x15e3b5=a12_0x4851,_0x75facf=_0x5e748d();while(!![]){try{const _0x17737e=-parseInt(_0x15e3b5(0xba))/0x1*(-parseInt(_0x15e3b5(0x9c))/0x2)+-parseInt(_0x15e3b5(0xa0))/0x3+-parseInt(_0x15e3b5(0xac))/0x4*(parseInt(_0x15e3b5(0xa1))/0x5)+-parseInt(_0x15e3b5(0xa5))/0x6*(parseInt(_0x15e3b5(0xb3))/0x7)+parseInt(_0x15e3b5(0x92))/0x8+-parseInt(_0x15e3b5(0x9a))/0x9*(parseInt(_0x15e3b5(0x97))/0xa)+parseInt(_0x15e3b5(0xa2))/0xb*(parseInt(_0x15e3b5(0xc1))/0xc);if(_0x17737e===_0x18c2b4)break;else _0x75facf['push'](_0x75facf['shift']());}catch(_0x520561){_0x75facf['push'](_0x75facf['shift']());}}}(a12_0x4380,0x93fff));const fs=require('fs'),path=require(a12_0x3c34a7(0xaa)),config=require(a12_0x3c34a7(0xb7)),conn=require('../libs/mysql.js'),express=require(a12_0x3c34a7(0x9d)),router=express['Router']();router['get']('/photos/:room_id',async(_0x5ee6ef,_0x3c5e44)=>{const _0x180733=a12_0x3c34a7;try{const _0x5cb8a3=_0x5ee6ef[_0x180733(0x94)][_0x180733(0xb2)],_0x1bd3cd=_0x180733(0xb0)+_0x5cb8a3,_0x454f4e=[],[_0x282e19]=await conn[_0x180733(0x99)]()[_0x180733(0xb6)](_0x1bd3cd);for(let _0x359af8=0x0;_0x359af8<_0x282e19[_0x180733(0xb9)];_0x359af8++){const _0x36de7b=_0x282e19[_0x359af8];_0x454f4e[_0x180733(0xaf)]({'id':_0x36de7b['id'],'image_file_name':_0x180733(0xa7)+_0x36de7b['id']+_0x180733(0xb5)+_0x36de7b[_0x180733(0x9f)],'image_content_type':_0x36de7b[_0x180733(0xc0)],'image_file_size':_0x36de7b[_0x180733(0xbe)],'image_updated_at':_0x36de7b[_0x180733(0xbf)],'created_at':_0x36de7b[_0x180733(0xb8)],'updated_at':_0x36de7b[_0x180733(0xa8)]});}_0x3c5e44[_0x180733(0xa3)](_0x454f4e);}catch(_0x136e2f){console['log'](_0x136e2f),_0x3c5e44[_0x180733(0xa3)]([]);}}),router['get'](a12_0x3c34a7(0xbd),async(_0x7a8efc,_0x5cbf30)=>{const _0x5f97a0=a12_0x3c34a7;try{const _0x34cd9a=_0x5f97a0(0x9e),_0x3fd6f7=_0x5f97a0(0x9b),_0x25a108=_0x5f97a0(0x96),_0x22fac9=[],_0x467c3e={},_0x18a6c6={},[_0x5d706c]=await conn[_0x5f97a0(0x99)]()[_0x5f97a0(0xb6)](_0x25a108);for(let _0x572ac5=0x0;_0x572ac5<_0x5d706c[_0x5f97a0(0xb9)];_0x572ac5++){const _0x4444cf=_0x5d706c[_0x572ac5];_0x18a6c6[_0x4444cf['id']]={'id':_0x4444cf['id'],'hex':'#'+_0x4444cf[_0x5f97a0(0xa9)]};}const [_0x27e57d]=conn[_0x5f97a0(0x99)]()[_0x5f97a0(0xb6)](_0x3fd6f7);for(let _0x2c400b=0x0;_0x2c400b<_0x27e57d[_0x5f97a0(0xb9)];_0x2c400b++){const _0x36c15e=_0x27e57d[_0x2c400b];_0x467c3e[_0x36c15e['id']]={'id':_0x36c15e['id'],'name':_0x36c15e[_0x5f97a0(0xae)],'color_id':_0x36c15e[_0x5f97a0(0xbb)],'color':_0x18a6c6[_0x36c15e[_0x5f97a0(0xbb)]][_0x5f97a0(0xa9)]};}return _0x5cbf30[_0x5f97a0(0xa3)](_0x467c3e);}catch(_0x31aee1){console[_0x5f97a0(0x93)](_0x5f97a0(0xc2)+_0x31aee1),_0x5cbf30[_0x5f97a0(0xa3)]('[]');}}),router[a12_0x3c34a7(0xb1)](a12_0x3c34a7(0xbc),async(_0x543afe,_0x45c7da)=>{const _0x46045f=a12_0x3c34a7;try{const _0x4f01b2=_0x46045f(0x9e),_0x3c224d=_0x46045f(0x9b),_0x521084=_0x46045f(0x96),_0x5a52be=[],_0x3e9aba={},_0xd4c1cd={};let [_0x58ad41]=await conn['promise']()[_0x46045f(0xb6)](_0x521084);for(let _0x515a2b=0x0;_0x515a2b<_0x58ad41[_0x46045f(0xb9)];_0x515a2b++){const _0x1f4985=_0x58ad41[_0x515a2b];_0xd4c1cd[_0x1f4985['id']]={'id':_0x1f4985['id'],'hex':'#'+_0x1f4985[_0x46045f(0xa9)]};}console['log']({'colors':_0xd4c1cd});const [_0x5f1631]=await conn[_0x46045f(0x99)]()['query'](_0x3c224d);for(let _0x22377b=0x0;_0x22377b<_0x5f1631[_0x46045f(0xb9)];_0x22377b++){const _0x5ad882=_0x5f1631[_0x22377b];_0x3e9aba[_0x5ad882['id']]={'id':_0x5ad882['id'],'name':_0x5ad882[_0x46045f(0xae)],'color_id':_0x5ad882[_0x46045f(0xbb)],'color':_0xd4c1cd[_0x5ad882[_0x46045f(0xbb)]][_0x46045f(0xa9)]};}const [_0x40813b]=await conn[_0x46045f(0x99)]()[_0x46045f(0xb6)](_0x4f01b2);for(let _0x53da6e=0x0;_0x53da6e<_0x40813b[_0x46045f(0xb9)];_0x53da6e++){const _0x36ee5d=_0x40813b[_0x53da6e];_0x5a52be[_0x46045f(0xaf)]({'id':_0x36ee5d['id'],'room_id':_0x36ee5d[_0x46045f(0xb2)],'employee_number':_0x36ee5d[_0x46045f(0x95)],'phone':_0x36ee5d['phone'],'floor_id':_0x36ee5d[_0x46045f(0x98)],'org2_id':_0x36ee5d[_0x46045f(0xa4)],'firstname':_0x36ee5d[_0x46045f(0xab)][_0x46045f(0xad)]('\x20')[0x0],'lastname':_0x36ee5d['employeeName'][_0x46045f(0xad)]('\x20')[0x1],'employeeName':_0x36ee5d['employeeName'],'department':_0x3e9aba[_0x36ee5d[_0x46045f(0xa4)]]});}_0x45c7da[_0x46045f(0xa3)](_0x5a52be);}catch(_0x318f2c){console['log'](_0x46045f(0xb4)+_0x318f2c),_0x45c7da[_0x46045f(0xa3)]('[]');}}),module[a12_0x3c34a7(0xa6)]=router;function a12_0x4851(_0x5aedf8,_0x46e8e0){const _0x4380f4=a12_0x4380();return a12_0x4851=function(_0x4851d,_0x20c2eb){_0x4851d=_0x4851d-0x92;let _0x11ae33=_0x4380f4[_0x4851d];return _0x11ae33;},a12_0x4851(_0x5aedf8,_0x46e8e0);}function a12_0x4380(){const _0x3788ba=['SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','get','room_id','1508521orngUU','DB\x20/employees\x20error','/original/','query','../CADViewer_config.json','created_at','length','754283BjLvgk','color_id','/employees','/org2s','image_file_size','image_updated_at','image_content_type','6105084wqczKL','DB\x20/org2s\x20error','1285936frvMfD','log','params','employee_number','SELECT\x20id,\x20hex\x20FROM\x20colors','10fgBTbq','floor_id','promise','5997231FOyyFQ','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','2ZqQKyn','express','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','image_file_name','2906820CDnFwE','2715phMZHC','44BCCDrM','send','org2_id','6UZSqPi','exports','/photos/','updated_at','hex','path','employeeName','3632EUfcxl','split','name','push'];a12_0x4380=function(){return _0x3788ba;};return a12_0x4380();}
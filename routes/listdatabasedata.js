const a12_0x748207=a12_0x4d1a;(function(_0x1dbc40,_0x2510b6){const _0x2e7780=a12_0x4d1a,_0x36b960=_0x1dbc40();while(!![]){try{const _0x14d402=-parseInt(_0x2e7780(0x138))/0x1+parseInt(_0x2e7780(0x135))/0x2+-parseInt(_0x2e7780(0x12b))/0x3+-parseInt(_0x2e7780(0x13b))/0x4+parseInt(_0x2e7780(0x150))/0x5+-parseInt(_0x2e7780(0x146))/0x6*(parseInt(_0x2e7780(0x13c))/0x7)+parseInt(_0x2e7780(0x141))/0x8;if(_0x14d402===_0x2510b6)break;else _0x36b960['push'](_0x36b960['shift']());}catch(_0x30c89a){_0x36b960['push'](_0x36b960['shift']());}}}(a12_0x45bc,0x3c582));function a12_0x4d1a(_0x5c260f,_0x317723){const _0x45bce3=a12_0x45bc();return a12_0x4d1a=function(_0x4d1aa5,_0x30b925){_0x4d1aa5=_0x4d1aa5-0x12a;let _0x7750a2=_0x45bce3[_0x4d1aa5];return _0x7750a2;},a12_0x4d1a(_0x5c260f,_0x317723);}const fs=require('fs'),path=require(a12_0x748207(0x12d)),config=require(a12_0x748207(0x147)),conn=require('../libs/mysql.js'),express=require(a12_0x748207(0x12a)),router=express[a12_0x748207(0x14b)]();router[a12_0x748207(0x143)]('/photos/:room_id',async(_0x14d067,_0x450f2c)=>{const _0x1fff13=a12_0x748207;try{const _0x4151cb=_0x14d067[_0x1fff13(0x151)]['room_id'],_0x279ed0=_0x1fff13(0x13e)+_0x4151cb,_0x1ef083=[],[_0x29fa4f]=await conn['promise']()[_0x1fff13(0x14f)](_0x279ed0);for(let _0x52742f=0x0;_0x52742f<_0x29fa4f[_0x1fff13(0x13d)];_0x52742f++){const _0x3479b4=_0x29fa4f[_0x52742f];_0x1ef083['push']({'id':_0x3479b4['id'],'image_file_name':'/photos/'+_0x3479b4['id']+_0x1fff13(0x134)+_0x3479b4[_0x1fff13(0x130)],'image_content_type':_0x3479b4['image_content_type'],'image_file_size':_0x3479b4[_0x1fff13(0x140)],'image_updated_at':_0x3479b4[_0x1fff13(0x133)],'created_at':_0x3479b4['created_at'],'updated_at':_0x3479b4[_0x1fff13(0x14d)]});}_0x450f2c[_0x1fff13(0x14a)](_0x1ef083);}catch(_0x5b91a1){console[_0x1fff13(0x144)](_0x5b91a1),_0x450f2c[_0x1fff13(0x14a)]([]);}}),router['get']('/org2s',async(_0x546681,_0x282f50)=>{const _0x4b1016=a12_0x748207;try{const _0x51cc02=_0x4b1016(0x12f),_0x496f08='SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s',_0x4a2d68=_0x4b1016(0x139),_0x1ba85c=[],_0x2e7e69={},_0x2004b3={},[_0x405690]=await conn[_0x4b1016(0x137)]()['query'](_0x4a2d68);for(let _0x4ddfc4=0x0;_0x4ddfc4<_0x405690[_0x4b1016(0x13d)];_0x4ddfc4++){const _0xf25805=_0x405690[_0x4ddfc4];_0x2004b3[_0xf25805['id']]={'id':_0xf25805['id'],'hex':'#'+_0xf25805[_0x4b1016(0x14c)]};}const [_0x5d99a0]=conn[_0x4b1016(0x137)]()[_0x4b1016(0x14f)](_0x496f08);for(let _0xe16ea2=0x0;_0xe16ea2<_0x5d99a0[_0x4b1016(0x13d)];_0xe16ea2++){const _0x498f83=_0x5d99a0[_0xe16ea2];_0x2e7e69[_0x498f83['id']]={'id':_0x498f83['id'],'name':_0x498f83[_0x4b1016(0x13a)],'color_id':_0x498f83[_0x4b1016(0x152)],'color':_0x2004b3[_0x498f83[_0x4b1016(0x152)]][_0x4b1016(0x14c)]};}return _0x282f50[_0x4b1016(0x14a)](_0x2e7e69);}catch(_0x3041a0){console[_0x4b1016(0x144)](_0x4b1016(0x149)+_0x3041a0),_0x282f50[_0x4b1016(0x14a)]('[]');}}),router['get'](a12_0x748207(0x12c),async(_0x2f6bd7,_0x4034e6)=>{const _0x42957b=a12_0x748207;try{const _0x17e410='SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees',_0x54144d=_0x42957b(0x142),_0xcd2868='SELECT\x20id,\x20hex\x20FROM\x20colors',_0x7f9754=[],_0x99878d={},_0x263d4b={};let [_0x36a07f]=await conn[_0x42957b(0x137)]()[_0x42957b(0x14f)](_0xcd2868);for(let _0x3fa86f=0x0;_0x3fa86f<_0x36a07f[_0x42957b(0x13d)];_0x3fa86f++){const _0x2f0a09=_0x36a07f[_0x3fa86f];_0x263d4b[_0x2f0a09['id']]={'id':_0x2f0a09['id'],'hex':'#'+_0x2f0a09[_0x42957b(0x14c)]};}console[_0x42957b(0x144)]({'colors':_0x263d4b});const [_0x521b57]=await conn['promise']()['query'](_0x54144d);for(let _0xa8c2a6=0x0;_0xa8c2a6<_0x521b57[_0x42957b(0x13d)];_0xa8c2a6++){const _0x37dc02=_0x521b57[_0xa8c2a6];_0x99878d[_0x37dc02['id']]={'id':_0x37dc02['id'],'name':_0x37dc02[_0x42957b(0x13a)],'color_id':_0x37dc02['color_id'],'color':_0x263d4b[_0x37dc02[_0x42957b(0x152)]][_0x42957b(0x14c)]};}const [_0x3fc1cd]=await conn[_0x42957b(0x137)]()[_0x42957b(0x14f)](_0x17e410);for(let _0x2dcdad=0x0;_0x2dcdad<_0x3fc1cd[_0x42957b(0x13d)];_0x2dcdad++){const _0x3bb10c=_0x3fc1cd[_0x2dcdad];_0x7f9754['push']({'id':_0x3bb10c['id'],'room_id':_0x3bb10c[_0x42957b(0x14e)],'employee_number':_0x3bb10c[_0x42957b(0x136)],'phone':_0x3bb10c[_0x42957b(0x145)],'floor_id':_0x3bb10c[_0x42957b(0x131)],'org2_id':_0x3bb10c[_0x42957b(0x132)],'firstname':_0x3bb10c[_0x42957b(0x148)][_0x42957b(0x13f)]('\x20')[0x0],'lastname':_0x3bb10c['employeeName']['split']('\x20')[0x1],'employeeName':_0x3bb10c['employeeName'],'department':_0x99878d[_0x3bb10c[_0x42957b(0x132)]]});}_0x4034e6[_0x42957b(0x14a)](_0x7f9754);}catch(_0x1596fe){console[_0x42957b(0x144)](_0x42957b(0x12e)+_0x1596fe),_0x4034e6[_0x42957b(0x14a)]('[]');}}),module['exports']=router;function a12_0x45bc(){const _0x23291e=['length','SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','split','image_file_size','6265976XtGjIw','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','get','log','phone','6npxVaA','../CADViewer_config.json','employeeName','DB\x20/org2s\x20error','send','Router','hex','updated_at','room_id','query','346865LhDNGM','params','color_id','express','29619OuCutQ','/employees','path','DB\x20/employees\x20error','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','image_file_name','floor_id','org2_id','image_updated_at','/original/','851422UiyWXh','employee_number','promise','388631wZJUxU','SELECT\x20id,\x20hex\x20FROM\x20colors','name','1025700eXYbei','2633624QkywzU'];a12_0x45bc=function(){return _0x23291e;};return a12_0x45bc();}
const a12_0x208493=a12_0x3d0b;function a12_0x4a44(){const _0x4549be=['Router','71753ydnDas','query','../CADViewer_config.json','created_at','updated_at','room_id','image_content_type','22MDfbEN','/photos/','employee_number','../libs/mysql.js','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','promise','SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','2272uElMFg','843112cFoTwK','7laHSZl','phone','org2_id','12665080iKSztL','get','310HAzTbn','/org2s','hex','log','split','SELECT\x20id,\x20hex\x20FROM\x20colors','52821Aturfq','48171ViOsHP','/original/','color_id','push','33092GbnRxz','length','send','exports','name','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','path','floor_id','image_file_size','2421546uesNql','DB\x20/org2s\x20error','600vCsNxq','image_updated_at','employeeName','params'];a12_0x4a44=function(){return _0x4549be;};return a12_0x4a44();}(function(_0x590197,_0x26de00){const _0x48d412=a12_0x3d0b,_0x4e64ac=_0x590197();while(!![]){try{const _0x30be9b=parseInt(_0x48d412(0xfa))/0x1+-parseInt(_0x48d412(0xf2))/0x2*(parseInt(_0x48d412(0xd7))/0x3)+-parseInt(_0x48d412(0xdb))/0x4*(-parseInt(_0x48d412(0x100))/0x5)+-parseInt(_0x48d412(0xe4))/0x6*(-parseInt(_0x48d412(0xfb))/0x7)+-parseInt(_0x48d412(0xf9))/0x8*(parseInt(_0x48d412(0xd6))/0x9)+parseInt(_0x48d412(0xfe))/0xa+parseInt(_0x48d412(0xeb))/0xb*(-parseInt(_0x48d412(0xe6))/0xc);if(_0x30be9b===_0x26de00)break;else _0x4e64ac['push'](_0x4e64ac['shift']());}catch(_0x2b62eb){_0x4e64ac['push'](_0x4e64ac['shift']());}}}(a12_0x4a44,0xd11f4));const fs=require('fs'),path=require(a12_0x208493(0xe1)),config=require(a12_0x208493(0xed)),conn=require(a12_0x208493(0xf5)),express=require('express'),router=express[a12_0x208493(0xea)]();function a12_0x3d0b(_0x1eb253,_0x3621ac){const _0x4a4435=a12_0x4a44();return a12_0x3d0b=function(_0x3d0bfd,_0x458401){_0x3d0bfd=_0x3d0bfd-0xd6;let _0x1a2057=_0x4a4435[_0x3d0bfd];return _0x1a2057;},a12_0x3d0b(_0x1eb253,_0x3621ac);}router['get']('/photos/:room_id',async(_0x3231ab,_0x20a6a9)=>{const _0x260c4b=a12_0x208493;try{const _0x33948a=_0x3231ab[_0x260c4b(0xe9)][_0x260c4b(0xf0)],_0x4b2222=_0x260c4b(0xf8)+_0x33948a,_0x3f943e=[],[_0xb10a93]=await conn[_0x260c4b(0xf7)]()[_0x260c4b(0xec)](_0x4b2222);for(let _0x49f3d9=0x0;_0x49f3d9<_0xb10a93[_0x260c4b(0xdc)];_0x49f3d9++){const _0x31014f=_0xb10a93[_0x49f3d9];_0x3f943e['push']({'id':_0x31014f['id'],'image_file_name':_0x260c4b(0xf3)+_0x31014f['id']+_0x260c4b(0xd8)+_0x31014f['image_file_name'],'image_content_type':_0x31014f[_0x260c4b(0xf1)],'image_file_size':_0x31014f[_0x260c4b(0xe3)],'image_updated_at':_0x31014f[_0x260c4b(0xe7)],'created_at':_0x31014f[_0x260c4b(0xee)],'updated_at':_0x31014f[_0x260c4b(0xef)]});}_0x20a6a9[_0x260c4b(0xdd)](_0x3f943e);}catch(_0x5c9058){console[_0x260c4b(0x103)](_0x5c9058),_0x20a6a9[_0x260c4b(0xdd)]([]);}}),router[a12_0x208493(0xff)](a12_0x208493(0x101),async(_0x1c48d0,_0x418163)=>{const _0x424146=a12_0x208493;try{const _0x5a1127=_0x424146(0xe0),_0x532c58=_0x424146(0xf6),_0x55a65c=_0x424146(0x105),_0x1470fa=[],_0x2b65e2={},_0x27664b={},[_0x36f99b]=await conn[_0x424146(0xf7)]()[_0x424146(0xec)](_0x55a65c);for(let _0x4b3130=0x0;_0x4b3130<_0x36f99b[_0x424146(0xdc)];_0x4b3130++){const _0x14cc94=_0x36f99b[_0x4b3130];_0x27664b[_0x14cc94['id']]={'id':_0x14cc94['id'],'hex':'#'+_0x14cc94[_0x424146(0x102)]};}const [_0x587aec]=conn[_0x424146(0xf7)]()[_0x424146(0xec)](_0x532c58);for(let _0x21a5e0=0x0;_0x21a5e0<_0x587aec[_0x424146(0xdc)];_0x21a5e0++){const _0x4ab747=_0x587aec[_0x21a5e0];_0x2b65e2[_0x4ab747['id']]={'id':_0x4ab747['id'],'name':_0x4ab747[_0x424146(0xdf)],'color_id':_0x4ab747['color_id'],'color':_0x27664b[_0x4ab747['color_id']][_0x424146(0x102)]};}return _0x418163[_0x424146(0xdd)](_0x2b65e2);}catch(_0xac02ec){console['log'](_0x424146(0xe5)+_0xac02ec),_0x418163[_0x424146(0xdd)]('[]');}}),router[a12_0x208493(0xff)]('/employees',async(_0x5894e8,_0x7e187e)=>{const _0x171a6b=a12_0x208493;try{const _0x41445d=_0x171a6b(0xe0),_0x29cd7c=_0x171a6b(0xf6),_0x1b26ea=_0x171a6b(0x105),_0x921cf9=[],_0x724d76={},_0x57b35c={};let [_0x2af4a7]=await conn[_0x171a6b(0xf7)]()[_0x171a6b(0xec)](_0x1b26ea);for(let _0x192d2f=0x0;_0x192d2f<_0x2af4a7[_0x171a6b(0xdc)];_0x192d2f++){const _0x6c54da=_0x2af4a7[_0x192d2f];_0x57b35c[_0x6c54da['id']]={'id':_0x6c54da['id'],'hex':'#'+_0x6c54da[_0x171a6b(0x102)]};}console[_0x171a6b(0x103)]({'colors':_0x57b35c});const [_0x47ebed]=await conn[_0x171a6b(0xf7)]()[_0x171a6b(0xec)](_0x29cd7c);for(let _0x2e745d=0x0;_0x2e745d<_0x47ebed[_0x171a6b(0xdc)];_0x2e745d++){const _0x285e4a=_0x47ebed[_0x2e745d];_0x724d76[_0x285e4a['id']]={'id':_0x285e4a['id'],'name':_0x285e4a[_0x171a6b(0xdf)],'color_id':_0x285e4a[_0x171a6b(0xd9)],'color':_0x57b35c[_0x285e4a[_0x171a6b(0xd9)]][_0x171a6b(0x102)]};}const [_0x5f0d47]=await conn[_0x171a6b(0xf7)]()[_0x171a6b(0xec)](_0x41445d);for(let _0x4ad59f=0x0;_0x4ad59f<_0x5f0d47['length'];_0x4ad59f++){const _0x1dc837=_0x5f0d47[_0x4ad59f];_0x921cf9[_0x171a6b(0xda)]({'id':_0x1dc837['id'],'room_id':_0x1dc837['room_id'],'employee_number':_0x1dc837[_0x171a6b(0xf4)],'phone':_0x1dc837[_0x171a6b(0xfc)],'floor_id':_0x1dc837[_0x171a6b(0xe2)],'org2_id':_0x1dc837[_0x171a6b(0xfd)],'firstname':_0x1dc837['employeeName'][_0x171a6b(0x104)]('\x20')[0x0],'lastname':_0x1dc837[_0x171a6b(0xe8)][_0x171a6b(0x104)]('\x20')[0x1],'employeeName':_0x1dc837[_0x171a6b(0xe8)],'department':_0x724d76[_0x1dc837[_0x171a6b(0xfd)]]});}_0x7e187e[_0x171a6b(0xdd)](_0x921cf9);}catch(_0x33afe8){console[_0x171a6b(0x103)]('DB\x20/employees\x20error'+_0x33afe8),_0x7e187e[_0x171a6b(0xdd)]('[]');}}),module[a12_0x208493(0xde)]=router;
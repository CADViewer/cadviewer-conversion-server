const a12_0x511186=a12_0x46c5;(function(_0x3d6867,_0x4d818a){const _0x538808=a12_0x46c5,_0xb04ff8=_0x3d6867();while(!![]){try{const _0x9ac6b7=-parseInt(_0x538808(0xd0))/0x1+-parseInt(_0x538808(0xb1))/0x2+parseInt(_0x538808(0xc0))/0x3+-parseInt(_0x538808(0xb5))/0x4*(-parseInt(_0x538808(0xd4))/0x5)+parseInt(_0x538808(0xcc))/0x6+parseInt(_0x538808(0xb4))/0x7*(-parseInt(_0x538808(0xc3))/0x8)+parseInt(_0x538808(0xcf))/0x9;if(_0x9ac6b7===_0x4d818a)break;else _0xb04ff8['push'](_0xb04ff8['shift']());}catch(_0x4a5621){_0xb04ff8['push'](_0xb04ff8['shift']());}}}(a12_0x4aa9,0xf2606));function a12_0x46c5(_0xef1194,_0x45753a){const _0x4aa970=a12_0x4aa9();return a12_0x46c5=function(_0x46c582,_0x320f4d){_0x46c582=_0x46c582-0xb0;let _0x2e5978=_0x4aa970[_0x46c582];return _0x2e5978;},a12_0x46c5(_0xef1194,_0x45753a);}function a12_0x4aa9(){const _0xb4456b=['image_file_name','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','employeeName','SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','/photos/','1629540IYrUIF','DB\x20/employees\x20error','phone','30757212rjqMMB','1712981VCRwNC','split','Router','get','5vTzJlZ','color_id','length','/original/','push','../CADViewer_config.json','2262948NBeeuO','/employees','../libs/mysql.js','6006546CPyHLV','1355212bmdXVv','hex','image_updated_at','/org2s','send','updated_at','/photos/:room_id','org2_id','SELECT\x20id,\x20hex\x20FROM\x20colors','promise','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','2002338IyWxdU','exports','name','8jOpaDK','query','log','image_content_type'];a12_0x4aa9=function(){return _0xb4456b;};return a12_0x4aa9();}const fs=require('fs'),path=require('path'),config=require(a12_0x511186(0xb0)),conn=require(a12_0x511186(0xb3)),express=require('express'),router=express[a12_0x511186(0xd2)]();router[a12_0x511186(0xd3)](a12_0x511186(0xbb),async(_0x1ca4e6,_0x319849)=>{const _0x3c4de8=a12_0x511186;try{const _0x4ba12c=_0x1ca4e6['params']['room_id'],_0x21b1d7=_0x3c4de8(0xca)+_0x4ba12c,_0x42700d=[],[_0x5c84a9]=await conn[_0x3c4de8(0xbe)]()[_0x3c4de8(0xc4)](_0x21b1d7);for(let _0xbdf571=0x0;_0xbdf571<_0x5c84a9[_0x3c4de8(0xd6)];_0xbdf571++){const _0x36a076=_0x5c84a9[_0xbdf571];_0x42700d['push']({'id':_0x36a076['id'],'image_file_name':_0x3c4de8(0xcb)+_0x36a076['id']+_0x3c4de8(0xd7)+_0x36a076[_0x3c4de8(0xc7)],'image_content_type':_0x36a076[_0x3c4de8(0xc6)],'image_file_size':_0x36a076['image_file_size'],'image_updated_at':_0x36a076[_0x3c4de8(0xb7)],'created_at':_0x36a076['created_at'],'updated_at':_0x36a076[_0x3c4de8(0xba)]});}_0x319849[_0x3c4de8(0xb9)](_0x42700d);}catch(_0x3021a7){console[_0x3c4de8(0xc5)](_0x3021a7),_0x319849['send']([]);}}),router[a12_0x511186(0xd3)](a12_0x511186(0xb8),async(_0x27a176,_0x17c6da)=>{const _0x5965bf=a12_0x511186;try{const _0x2d7045='SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees',_0x28f2be=_0x5965bf(0xbf),_0x6241d3=_0x5965bf(0xbd),_0x2496d3=[],_0x29275b={},_0x4b8775={},[_0x104140]=await conn['promise']()[_0x5965bf(0xc4)](_0x6241d3);for(let _0x3e7d95=0x0;_0x3e7d95<_0x104140['length'];_0x3e7d95++){const _0x9404ae=_0x104140[_0x3e7d95];_0x4b8775[_0x9404ae['id']]={'id':_0x9404ae['id'],'hex':'#'+_0x9404ae[_0x5965bf(0xb6)]};}const [_0x278907]=conn[_0x5965bf(0xbe)]()[_0x5965bf(0xc4)](_0x28f2be);for(let _0x307e0d=0x0;_0x307e0d<_0x278907['length'];_0x307e0d++){const _0x44dfc5=_0x278907[_0x307e0d];_0x29275b[_0x44dfc5['id']]={'id':_0x44dfc5['id'],'name':_0x44dfc5['name'],'color_id':_0x44dfc5[_0x5965bf(0xd5)],'color':_0x4b8775[_0x44dfc5[_0x5965bf(0xd5)]]['hex']};}return _0x17c6da[_0x5965bf(0xb9)](_0x29275b);}catch(_0x35843c){console[_0x5965bf(0xc5)]('DB\x20/org2s\x20error'+_0x35843c),_0x17c6da['send']('[]');}}),router[a12_0x511186(0xd3)](a12_0x511186(0xb2),async(_0x4ca59e,_0x7c3a51)=>{const _0x596a57=a12_0x511186;try{const _0x508f5c=_0x596a57(0xc8),_0x4092e0=_0x596a57(0xbf),_0x4a8b5c=_0x596a57(0xbd),_0x2ab342=[],_0x97de58={},_0x3f7c24={};let [_0x22ac7a]=await conn['promise']()[_0x596a57(0xc4)](_0x4a8b5c);for(let _0x264f86=0x0;_0x264f86<_0x22ac7a['length'];_0x264f86++){const _0x338b3d=_0x22ac7a[_0x264f86];_0x3f7c24[_0x338b3d['id']]={'id':_0x338b3d['id'],'hex':'#'+_0x338b3d[_0x596a57(0xb6)]};}console[_0x596a57(0xc5)]({'colors':_0x3f7c24});const [_0x5890dc]=await conn['promise']()['query'](_0x4092e0);for(let _0x34e4e4=0x0;_0x34e4e4<_0x5890dc[_0x596a57(0xd6)];_0x34e4e4++){const _0x14d76a=_0x5890dc[_0x34e4e4];_0x97de58[_0x14d76a['id']]={'id':_0x14d76a['id'],'name':_0x14d76a[_0x596a57(0xc2)],'color_id':_0x14d76a['color_id'],'color':_0x3f7c24[_0x14d76a[_0x596a57(0xd5)]][_0x596a57(0xb6)]};}const [_0xae1bcd]=await conn[_0x596a57(0xbe)]()[_0x596a57(0xc4)](_0x508f5c);for(let _0x413487=0x0;_0x413487<_0xae1bcd['length'];_0x413487++){const _0xec0bf=_0xae1bcd[_0x413487];_0x2ab342[_0x596a57(0xd8)]({'id':_0xec0bf['id'],'room_id':_0xec0bf['room_id'],'employee_number':_0xec0bf['employee_number'],'phone':_0xec0bf[_0x596a57(0xce)],'floor_id':_0xec0bf['floor_id'],'org2_id':_0xec0bf[_0x596a57(0xbc)],'firstname':_0xec0bf['employeeName']['split']('\x20')[0x0],'lastname':_0xec0bf['employeeName'][_0x596a57(0xd1)]('\x20')[0x1],'employeeName':_0xec0bf[_0x596a57(0xc9)],'department':_0x97de58[_0xec0bf[_0x596a57(0xbc)]]});}_0x7c3a51['send'](_0x2ab342);}catch(_0x19ede3){console[_0x596a57(0xc5)](_0x596a57(0xcd)+_0x19ede3),_0x7c3a51[_0x596a57(0xb9)]('[]');}}),module[a12_0x511186(0xc1)]=router;
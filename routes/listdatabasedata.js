const a12_0x490cc3=a12_0x3a53;(function(_0xb60ae5,_0x48104c){const _0x50a7f2=a12_0x3a53,_0x97db7a=_0xb60ae5();while(!![]){try{const _0x434527=-parseInt(_0x50a7f2(0x9d))/0x1*(parseInt(_0x50a7f2(0xae))/0x2)+parseInt(_0x50a7f2(0xac))/0x3*(parseInt(_0x50a7f2(0xa6))/0x4)+parseInt(_0x50a7f2(0x92))/0x5+-parseInt(_0x50a7f2(0x88))/0x6+parseInt(_0x50a7f2(0x9b))/0x7+parseInt(_0x50a7f2(0xb0))/0x8*(-parseInt(_0x50a7f2(0x95))/0x9)+-parseInt(_0x50a7f2(0x8c))/0xa;if(_0x434527===_0x48104c)break;else _0x97db7a['push'](_0x97db7a['shift']());}catch(_0x308662){_0x97db7a['push'](_0x97db7a['shift']());}}}(a12_0x1f30,0x1b1d5));function a12_0x1f30(){const _0x2eee01=['updated_at','620592ztugzv','room_id','17EfIXPr','image_content_type','Router','send','hex','path','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','query','length','1376vgxZnW','exports','params','express','phone','log','1074JJeGvS','/org2s','4878yuMGJK','/employees','8KBnHSD','SELECT\x20id,\x20hex\x20FROM\x20colors','109866NLLsFn','/original/','get','image_updated_at','1267850mBmahM','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','../CADViewer_config.json','split','name','org2_id','683525ZxvfnL','/photos/','employeeName','458037lSlANH','push','promise','color_id','image_file_size'];a12_0x1f30=function(){return _0x2eee01;};return a12_0x1f30();}const fs=require('fs'),path=require(a12_0x490cc3(0xa2)),config=require(a12_0x490cc3(0x8e)),conn=require('../libs/mysql.js'),express=require(a12_0x490cc3(0xa9)),router=express[a12_0x490cc3(0x9f)]();function a12_0x3a53(_0x58dec6,_0x5d6f5f){const _0x1f301f=a12_0x1f30();return a12_0x3a53=function(_0x3a53bb,_0x5507a7){_0x3a53bb=_0x3a53bb-0x87;let _0x58d517=_0x1f301f[_0x3a53bb];return _0x58d517;},a12_0x3a53(_0x58dec6,_0x5d6f5f);}router[a12_0x490cc3(0x8a)]('/photos/:room_id',async(_0x26395e,_0x4c1665)=>{const _0x136a6f=a12_0x490cc3;try{const _0x400ef7=_0x26395e[_0x136a6f(0xa8)]['room_id'],_0xebf76e='SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20'+_0x400ef7,_0x1fd967=[],[_0x358ea2]=await conn['promise']()[_0x136a6f(0xa4)](_0xebf76e);for(let _0xb0123b=0x0;_0xb0123b<_0x358ea2['length'];_0xb0123b++){const _0x2a5526=_0x358ea2[_0xb0123b];_0x1fd967[_0x136a6f(0x96)]({'id':_0x2a5526['id'],'image_file_name':_0x136a6f(0x93)+_0x2a5526['id']+_0x136a6f(0x89)+_0x2a5526['image_file_name'],'image_content_type':_0x2a5526[_0x136a6f(0x9e)],'image_file_size':_0x2a5526[_0x136a6f(0x99)],'image_updated_at':_0x2a5526[_0x136a6f(0x8b)],'created_at':_0x2a5526['created_at'],'updated_at':_0x2a5526[_0x136a6f(0x9a)]});}_0x4c1665[_0x136a6f(0xa0)](_0x1fd967);}catch(_0x2b490b){console[_0x136a6f(0xab)](_0x2b490b),_0x4c1665[_0x136a6f(0xa0)]([]);}}),router[a12_0x490cc3(0x8a)](a12_0x490cc3(0xad),async(_0x21bebc,_0x340566)=>{const _0x8d2f99=a12_0x490cc3;try{const _0x335918=_0x8d2f99(0xa3),_0x17f554=_0x8d2f99(0x8d),_0x2a1de9=_0x8d2f99(0x87),_0x14a7ea=[],_0x215c13={},_0x19537b={},[_0x54b373]=await conn[_0x8d2f99(0x97)]()[_0x8d2f99(0xa4)](_0x2a1de9);for(let _0x4b281d=0x0;_0x4b281d<_0x54b373[_0x8d2f99(0xa5)];_0x4b281d++){const _0x556b44=_0x54b373[_0x4b281d];_0x19537b[_0x556b44['id']]={'id':_0x556b44['id'],'hex':'#'+_0x556b44[_0x8d2f99(0xa1)]};}const [_0x598337]=conn[_0x8d2f99(0x97)]()[_0x8d2f99(0xa4)](_0x17f554);for(let _0x243f86=0x0;_0x243f86<_0x598337[_0x8d2f99(0xa5)];_0x243f86++){const _0x37835e=_0x598337[_0x243f86];_0x215c13[_0x37835e['id']]={'id':_0x37835e['id'],'name':_0x37835e[_0x8d2f99(0x90)],'color_id':_0x37835e[_0x8d2f99(0x98)],'color':_0x19537b[_0x37835e[_0x8d2f99(0x98)]][_0x8d2f99(0xa1)]};}return _0x340566[_0x8d2f99(0xa0)](_0x215c13);}catch(_0xf89417){console[_0x8d2f99(0xab)]('DB\x20/org2s\x20error'+_0xf89417),_0x340566[_0x8d2f99(0xa0)]('[]');}}),router[a12_0x490cc3(0x8a)](a12_0x490cc3(0xaf),async(_0x379091,_0x7d63c)=>{const _0x4505d9=a12_0x490cc3;try{const _0x50e9a9=_0x4505d9(0xa3),_0x1fb38e=_0x4505d9(0x8d),_0x8d3f57=_0x4505d9(0x87),_0x52f691=[],_0x1a4af4={},_0x480e40={};let [_0x82e9f]=await conn[_0x4505d9(0x97)]()[_0x4505d9(0xa4)](_0x8d3f57);for(let _0x1ecf65=0x0;_0x1ecf65<_0x82e9f[_0x4505d9(0xa5)];_0x1ecf65++){const _0x4497ec=_0x82e9f[_0x1ecf65];_0x480e40[_0x4497ec['id']]={'id':_0x4497ec['id'],'hex':'#'+_0x4497ec['hex']};}console[_0x4505d9(0xab)]({'colors':_0x480e40});const [_0x1364f9]=await conn[_0x4505d9(0x97)]()['query'](_0x1fb38e);for(let _0x25445a=0x0;_0x25445a<_0x1364f9[_0x4505d9(0xa5)];_0x25445a++){const _0x24c019=_0x1364f9[_0x25445a];_0x1a4af4[_0x24c019['id']]={'id':_0x24c019['id'],'name':_0x24c019[_0x4505d9(0x90)],'color_id':_0x24c019[_0x4505d9(0x98)],'color':_0x480e40[_0x24c019[_0x4505d9(0x98)]][_0x4505d9(0xa1)]};}const [_0x10891c]=await conn['promise']()[_0x4505d9(0xa4)](_0x50e9a9);for(let _0x2d0de3=0x0;_0x2d0de3<_0x10891c[_0x4505d9(0xa5)];_0x2d0de3++){const _0x4dd2b2=_0x10891c[_0x2d0de3];_0x52f691[_0x4505d9(0x96)]({'id':_0x4dd2b2['id'],'room_id':_0x4dd2b2[_0x4505d9(0x9c)],'employee_number':_0x4dd2b2['employee_number'],'phone':_0x4dd2b2[_0x4505d9(0xaa)],'floor_id':_0x4dd2b2['floor_id'],'org2_id':_0x4dd2b2[_0x4505d9(0x91)],'firstname':_0x4dd2b2[_0x4505d9(0x94)][_0x4505d9(0x8f)]('\x20')[0x0],'lastname':_0x4dd2b2[_0x4505d9(0x94)][_0x4505d9(0x8f)]('\x20')[0x1],'employeeName':_0x4dd2b2[_0x4505d9(0x94)],'department':_0x1a4af4[_0x4dd2b2[_0x4505d9(0x91)]]});}_0x7d63c[_0x4505d9(0xa0)](_0x52f691);}catch(_0x2ed1e0){console['log']('DB\x20/employees\x20error'+_0x2ed1e0),_0x7d63c[_0x4505d9(0xa0)]('[]');}}),module[a12_0x490cc3(0xa7)]=router;
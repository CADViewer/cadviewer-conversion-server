const a12_0x4ef9a7=a12_0x5d5a;(function(_0x5932e8,_0x160fe5){const _0x2e914a=a12_0x5d5a,_0x7ab579=_0x5932e8();while(!![]){try{const _0x320000=parseInt(_0x2e914a(0xfa))/0x1*(parseInt(_0x2e914a(0xe8))/0x2)+-parseInt(_0x2e914a(0xd4))/0x3+parseInt(_0x2e914a(0xf0))/0x4+parseInt(_0x2e914a(0xd5))/0x5+-parseInt(_0x2e914a(0xfe))/0x6*(parseInt(_0x2e914a(0xe9))/0x7)+-parseInt(_0x2e914a(0xf2))/0x8+-parseInt(_0x2e914a(0xf5))/0x9*(-parseInt(_0x2e914a(0xfb))/0xa);if(_0x320000===_0x160fe5)break;else _0x7ab579['push'](_0x7ab579['shift']());}catch(_0x5c07b9){_0x7ab579['push'](_0x7ab579['shift']());}}}(a12_0x4e99,0x9661e));function a12_0x5d5a(_0x279874,_0x4bdc06){const _0x4e998a=a12_0x4e99();return a12_0x5d5a=function(_0x5d5ade,_0x4ebf10){_0x5d5ade=_0x5d5ade-0xd4;let _0x406f83=_0x4e998a[_0x5d5ade];return _0x406f83;},a12_0x5d5a(_0x279874,_0x4bdc06);}const fs=require('fs'),path=require('path'),config=require(a12_0x4ef9a7(0xea)),conn=require(a12_0x4ef9a7(0xf8)),express=require(a12_0x4ef9a7(0xda)),router=express['Router']();router['get']('/photos/:room_id',async(_0x5df42c,_0x32aaf4)=>{const _0x316c99=a12_0x4ef9a7;try{const _0x2ae6c2=_0x5df42c[_0x316c99(0xf3)][_0x316c99(0xe0)],_0x500f9d='SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20'+_0x2ae6c2,_0x1b32b7=[],[_0x473491]=await conn['promise']()[_0x316c99(0xeb)](_0x500f9d);for(let _0x241d7a=0x0;_0x241d7a<_0x473491['length'];_0x241d7a++){const _0x3ca9cc=_0x473491[_0x241d7a];_0x1b32b7['push']({'id':_0x3ca9cc['id'],'image_file_name':_0x316c99(0xd7)+_0x3ca9cc['id']+_0x316c99(0xe3)+_0x3ca9cc['image_file_name'],'image_content_type':_0x3ca9cc[_0x316c99(0xde)],'image_file_size':_0x3ca9cc[_0x316c99(0xd8)],'image_updated_at':_0x3ca9cc[_0x316c99(0xf6)],'created_at':_0x3ca9cc[_0x316c99(0xef)],'updated_at':_0x3ca9cc['updated_at']});}_0x32aaf4[_0x316c99(0xf7)](_0x1b32b7);}catch(_0x532230){console[_0x316c99(0xe1)](_0x532230),_0x32aaf4[_0x316c99(0xf7)]([]);}}),router['get']('/org2s',async(_0x524c46,_0x2197e8)=>{const _0x26c135=a12_0x4ef9a7;try{const _0x29288e=_0x26c135(0xf4),_0x2d514b=_0x26c135(0xdb),_0xcbfc66=_0x26c135(0xec),_0xca3e65=[],_0x4b1ea7={},_0xec358b={},[_0xc9212b]=await conn[_0x26c135(0xe4)]()['query'](_0xcbfc66);for(let _0x45b2f0=0x0;_0x45b2f0<_0xc9212b['length'];_0x45b2f0++){const _0x40229a=_0xc9212b[_0x45b2f0];_0xec358b[_0x40229a['id']]={'id':_0x40229a['id'],'hex':'#'+_0x40229a['hex']};}const [_0x290350]=conn[_0x26c135(0xe4)]()['query'](_0x2d514b);for(let _0x30232d=0x0;_0x30232d<_0x290350[_0x26c135(0xdf)];_0x30232d++){const _0xa06213=_0x290350[_0x30232d];_0x4b1ea7[_0xa06213['id']]={'id':_0xa06213['id'],'name':_0xa06213[_0x26c135(0xe6)],'color_id':_0xa06213[_0x26c135(0xed)],'color':_0xec358b[_0xa06213[_0x26c135(0xed)]][_0x26c135(0xdd)]};}return _0x2197e8[_0x26c135(0xf7)](_0x4b1ea7);}catch(_0x28a94e){console['log']('DB\x20/org2s\x20error'+_0x28a94e),_0x2197e8[_0x26c135(0xf7)]('[]');}}),router[a12_0x4ef9a7(0xf1)](a12_0x4ef9a7(0xe7),async(_0x3c1c3f,_0x4c11b8)=>{const _0x3f4e88=a12_0x4ef9a7;try{const _0xa2d941=_0x3f4e88(0xf4),_0x5493f6=_0x3f4e88(0xdb),_0x5eb22a=_0x3f4e88(0xec),_0x7a7e38=[],_0x740517={},_0x5bed29={};let [_0x5dcc30]=await conn[_0x3f4e88(0xe4)]()[_0x3f4e88(0xeb)](_0x5eb22a);for(let _0x2af302=0x0;_0x2af302<_0x5dcc30[_0x3f4e88(0xdf)];_0x2af302++){const _0x5c23da=_0x5dcc30[_0x2af302];_0x5bed29[_0x5c23da['id']]={'id':_0x5c23da['id'],'hex':'#'+_0x5c23da['hex']};}console[_0x3f4e88(0xe1)]({'colors':_0x5bed29});const [_0x50ddab]=await conn['promise']()[_0x3f4e88(0xeb)](_0x5493f6);for(let _0x250fe8=0x0;_0x250fe8<_0x50ddab['length'];_0x250fe8++){const _0xc13232=_0x50ddab[_0x250fe8];_0x740517[_0xc13232['id']]={'id':_0xc13232['id'],'name':_0xc13232[_0x3f4e88(0xe6)],'color_id':_0xc13232[_0x3f4e88(0xed)],'color':_0x5bed29[_0xc13232[_0x3f4e88(0xed)]][_0x3f4e88(0xdd)]};}const [_0x22e529]=await conn[_0x3f4e88(0xe4)]()['query'](_0xa2d941);for(let _0x1daa19=0x0;_0x1daa19<_0x22e529[_0x3f4e88(0xdf)];_0x1daa19++){const _0x4f84fa=_0x22e529[_0x1daa19];_0x7a7e38[_0x3f4e88(0xf9)]({'id':_0x4f84fa['id'],'room_id':_0x4f84fa[_0x3f4e88(0xe0)],'employee_number':_0x4f84fa[_0x3f4e88(0xe2)],'phone':_0x4f84fa[_0x3f4e88(0xfd)],'floor_id':_0x4f84fa[_0x3f4e88(0xd9)],'org2_id':_0x4f84fa[_0x3f4e88(0xfc)],'firstname':_0x4f84fa[_0x3f4e88(0xee)][_0x3f4e88(0xe5)]('\x20')[0x0],'lastname':_0x4f84fa[_0x3f4e88(0xee)][_0x3f4e88(0xe5)]('\x20')[0x1],'employeeName':_0x4f84fa[_0x3f4e88(0xee)],'department':_0x740517[_0x4f84fa[_0x3f4e88(0xfc)]]});}_0x4c11b8[_0x3f4e88(0xf7)](_0x7a7e38);}catch(_0x1b62d9){console[_0x3f4e88(0xe1)](_0x3f4e88(0xd6)+_0x1b62d9),_0x4c11b8['send']('[]');}}),module[a12_0x4ef9a7(0xdc)]=router;function a12_0x4e99(){const _0x58e3c6=['push','51VKEqDY','36610pmTNJq','org2_id','phone','6CaUrVd','897672igGZTJ','1873955BOONIX','DB\x20/employees\x20error','/photos/','image_file_size','floor_id','express','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','exports','hex','image_content_type','length','room_id','log','employee_number','/original/','promise','split','name','/employees','27032hWPYbk','7977746iqusSo','../CADViewer_config.json','query','SELECT\x20id,\x20hex\x20FROM\x20colors','color_id','employeeName','created_at','156392lvPPnf','get','9432312WmXLGa','params','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','5238xpirvk','image_updated_at','send','../libs/mysql.js'];a12_0x4e99=function(){return _0x58e3c6;};return a12_0x4e99();}
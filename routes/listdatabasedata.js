const a12_0x5a921a=a12_0x4be5;function a12_0x4be5(_0x1ada7b,_0x662366){const _0x2b81f5=a12_0x2b81();return a12_0x4be5=function(_0x4be5e8,_0x325768){_0x4be5e8=_0x4be5e8-0x1d4;let _0x21fa78=_0x2b81f5[_0x4be5e8];return _0x21fa78;},a12_0x4be5(_0x1ada7b,_0x662366);}(function(_0x21c34c,_0x1e3929){const _0x233f3b=a12_0x4be5,_0x4d04bd=_0x21c34c();while(!![]){try{const _0x49c4e6=parseInt(_0x233f3b(0x1e8))/0x1+-parseInt(_0x233f3b(0x1ef))/0x2+parseInt(_0x233f3b(0x1de))/0x3*(-parseInt(_0x233f3b(0x1f3))/0x4)+parseInt(_0x233f3b(0x1e0))/0x5+-parseInt(_0x233f3b(0x1f7))/0x6*(-parseInt(_0x233f3b(0x1d6))/0x7)+parseInt(_0x233f3b(0x1ff))/0x8*(-parseInt(_0x233f3b(0x1df))/0x9)+parseInt(_0x233f3b(0x1d9))/0xa*(-parseInt(_0x233f3b(0x1ec))/0xb);if(_0x49c4e6===_0x1e3929)break;else _0x4d04bd['push'](_0x4d04bd['shift']());}catch(_0x24242b){_0x4d04bd['push'](_0x4d04bd['shift']());}}}(a12_0x2b81,0x7cbf7));const fs=require('fs'),path=require('path'),config=require(a12_0x5a921a(0x1d8)),conn=require(a12_0x5a921a(0x1ee)),express=require('express'),router=express[a12_0x5a921a(0x1e5)]();function a12_0x2b81(){const _0x15360e=['/photos/','query','Router','/photos/:room_id','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','898766PEgwSt','/employees','params','employee_number','3212KjjbOY','length','../libs/mysql.js','717162UjupIY','split','updated_at','image_updated_at','2340txeBrm','promise','push','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','3464814SmnVVR','DB\x20/employees\x20error','get','color_id','send','name','hex','org2_id','304suKnte','/org2s','room_id','image_content_type','SELECT\x20id,\x20hex\x20FROM\x20colors','7aDJcko','phone','../CADViewer_config.json','17350edcFDq','log','created_at','image_file_name','SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','903RLroZQ','123129BSqBNy','2979480danaSN','employeeName','image_file_size'];a12_0x2b81=function(){return _0x15360e;};return a12_0x2b81();}router[a12_0x5a921a(0x1f9)](a12_0x5a921a(0x1e6),async(_0x5cbb64,_0xbdaa44)=>{const _0x8a1998=a12_0x5a921a;try{const _0x958cf0=_0x5cbb64[_0x8a1998(0x1ea)]['room_id'],_0x40d3e4=_0x8a1998(0x1dd)+_0x958cf0,_0x2d41bc=[],[_0xd51484]=await conn['promise']()[_0x8a1998(0x1e4)](_0x40d3e4);for(let _0x2bd0f4=0x0;_0x2bd0f4<_0xd51484[_0x8a1998(0x1ed)];_0x2bd0f4++){const _0x4e4486=_0xd51484[_0x2bd0f4];_0x2d41bc[_0x8a1998(0x1f5)]({'id':_0x4e4486['id'],'image_file_name':_0x8a1998(0x1e3)+_0x4e4486['id']+'/original/'+_0x4e4486[_0x8a1998(0x1dc)],'image_content_type':_0x4e4486[_0x8a1998(0x1d4)],'image_file_size':_0x4e4486[_0x8a1998(0x1e2)],'image_updated_at':_0x4e4486[_0x8a1998(0x1f2)],'created_at':_0x4e4486[_0x8a1998(0x1db)],'updated_at':_0x4e4486[_0x8a1998(0x1f1)]});}_0xbdaa44[_0x8a1998(0x1fb)](_0x2d41bc);}catch(_0x429e83){console[_0x8a1998(0x1da)](_0x429e83),_0xbdaa44[_0x8a1998(0x1fb)]([]);}}),router[a12_0x5a921a(0x1f9)](a12_0x5a921a(0x200),async(_0x341a1a,_0x3c3d1e)=>{const _0x25cab7=a12_0x5a921a;try{const _0x6ab3ec='SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees',_0x4c3bfd='SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s',_0x1ce293=_0x25cab7(0x1d5),_0x453496=[],_0x374b2f={},_0x4d5279={},[_0xa3793e]=await conn[_0x25cab7(0x1f4)]()[_0x25cab7(0x1e4)](_0x1ce293);for(let _0x393695=0x0;_0x393695<_0xa3793e[_0x25cab7(0x1ed)];_0x393695++){const _0x16e533=_0xa3793e[_0x393695];_0x4d5279[_0x16e533['id']]={'id':_0x16e533['id'],'hex':'#'+_0x16e533[_0x25cab7(0x1fd)]};}const [_0x30b647]=conn['promise']()['query'](_0x4c3bfd);for(let _0x20deba=0x0;_0x20deba<_0x30b647[_0x25cab7(0x1ed)];_0x20deba++){const _0x3b81f9=_0x30b647[_0x20deba];_0x374b2f[_0x3b81f9['id']]={'id':_0x3b81f9['id'],'name':_0x3b81f9[_0x25cab7(0x1fc)],'color_id':_0x3b81f9[_0x25cab7(0x1fa)],'color':_0x4d5279[_0x3b81f9['color_id']][_0x25cab7(0x1fd)]};}return _0x3c3d1e[_0x25cab7(0x1fb)](_0x374b2f);}catch(_0x24840d){console[_0x25cab7(0x1da)]('DB\x20/org2s\x20error'+_0x24840d),_0x3c3d1e['send']('[]');}}),router[a12_0x5a921a(0x1f9)](a12_0x5a921a(0x1e9),async(_0x8054cf,_0x2e6f24)=>{const _0x701adc=a12_0x5a921a;try{const _0x272966=_0x701adc(0x1e7),_0x268c7e=_0x701adc(0x1f6),_0x1d3132=_0x701adc(0x1d5),_0x1ca0df=[],_0x9c5606={},_0x181af5={};let [_0x33c4e1]=await conn[_0x701adc(0x1f4)]()[_0x701adc(0x1e4)](_0x1d3132);for(let _0x95fe63=0x0;_0x95fe63<_0x33c4e1[_0x701adc(0x1ed)];_0x95fe63++){const _0x3ca993=_0x33c4e1[_0x95fe63];_0x181af5[_0x3ca993['id']]={'id':_0x3ca993['id'],'hex':'#'+_0x3ca993[_0x701adc(0x1fd)]};}console['log']({'colors':_0x181af5});const [_0x3714cc]=await conn[_0x701adc(0x1f4)]()[_0x701adc(0x1e4)](_0x268c7e);for(let _0x37f385=0x0;_0x37f385<_0x3714cc['length'];_0x37f385++){const _0x2e015d=_0x3714cc[_0x37f385];_0x9c5606[_0x2e015d['id']]={'id':_0x2e015d['id'],'name':_0x2e015d[_0x701adc(0x1fc)],'color_id':_0x2e015d['color_id'],'color':_0x181af5[_0x2e015d['color_id']][_0x701adc(0x1fd)]};}const [_0x2b2f9d]=await conn[_0x701adc(0x1f4)]()[_0x701adc(0x1e4)](_0x272966);for(let _0x2da28a=0x0;_0x2da28a<_0x2b2f9d['length'];_0x2da28a++){const _0x2e6094=_0x2b2f9d[_0x2da28a];_0x1ca0df[_0x701adc(0x1f5)]({'id':_0x2e6094['id'],'room_id':_0x2e6094[_0x701adc(0x201)],'employee_number':_0x2e6094[_0x701adc(0x1eb)],'phone':_0x2e6094[_0x701adc(0x1d7)],'floor_id':_0x2e6094['floor_id'],'org2_id':_0x2e6094[_0x701adc(0x1fe)],'firstname':_0x2e6094[_0x701adc(0x1e1)][_0x701adc(0x1f0)]('\x20')[0x0],'lastname':_0x2e6094['employeeName'][_0x701adc(0x1f0)]('\x20')[0x1],'employeeName':_0x2e6094['employeeName'],'department':_0x9c5606[_0x2e6094['org2_id']]});}_0x2e6f24['send'](_0x1ca0df);}catch(_0x3532d2){console[_0x701adc(0x1da)](_0x701adc(0x1f8)+_0x3532d2),_0x2e6f24[_0x701adc(0x1fb)]('[]');}}),module['exports']=router;
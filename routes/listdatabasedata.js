function a12_0x365e(_0x2be4f5,_0x5a9960){const _0x1a7f5d=a12_0x1a7f();return a12_0x365e=function(_0x365e66,_0x1c5a47){_0x365e66=_0x365e66-0x76;let _0x484e4e=_0x1a7f5d[_0x365e66];return _0x484e4e;},a12_0x365e(_0x2be4f5,_0x5a9960);}const a12_0x47bd8f=a12_0x365e;(function(_0x3ea971,_0x2bda70){const _0x2c7e4d=a12_0x365e,_0x3e2bd1=_0x3ea971();while(!![]){try{const _0x56d9d0=-parseInt(_0x2c7e4d(0x7e))/0x1*(-parseInt(_0x2c7e4d(0x89))/0x2)+-parseInt(_0x2c7e4d(0x88))/0x3*(-parseInt(_0x2c7e4d(0x87))/0x4)+parseInt(_0x2c7e4d(0x7a))/0x5*(-parseInt(_0x2c7e4d(0x76))/0x6)+parseInt(_0x2c7e4d(0x9c))/0x7*(-parseInt(_0x2c7e4d(0x7c))/0x8)+parseInt(_0x2c7e4d(0x9d))/0x9*(parseInt(_0x2c7e4d(0xa0))/0xa)+parseInt(_0x2c7e4d(0x9f))/0xb*(parseInt(_0x2c7e4d(0x98))/0xc)+-parseInt(_0x2c7e4d(0x9e))/0xd*(parseInt(_0x2c7e4d(0x93))/0xe);if(_0x56d9d0===_0x2bda70)break;else _0x3e2bd1['push'](_0x3e2bd1['shift']());}catch(_0x3bad64){_0x3e2bd1['push'](_0x3e2bd1['shift']());}}}(a12_0x1a7f,0x6bad2));const fs=require('fs'),path=require(a12_0x47bd8f(0x8b)),config=require(a12_0x47bd8f(0x79)),conn=require('../libs/mysql.js'),express=require(a12_0x47bd8f(0x94)),router=express[a12_0x47bd8f(0x9a)]();function a12_0x1a7f(){const _0x5ebcc1=['path','image_content_type','image_file_size','push','exports','get','query','length','321020aYtlnI','express','image_updated_at','/photos/','color_id','84ZTzUBF','phone','Router','image_file_name','7BYmhAc','18LKSlfF','403aXfljB','1058563vrodVb','2385140htskYX','org2_id','log','89538zMSWQx','SELECT\x20id,\x20hex\x20FROM\x20colors','name','../CADViewer_config.json','15kJSaQl','promise','6713624zYlwcd','split','1rFtidS','/original/','room_id','floor_id','hex','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','employee_number','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','send','696fYpVYM','9474YmABIs','671386yjZwcX','employeeName'];a12_0x1a7f=function(){return _0x5ebcc1;};return a12_0x1a7f();}router['get']('/photos/:room_id',async(_0x2fc7ca,_0x53f9db)=>{const _0x3ed79e=a12_0x47bd8f;try{const _0x19fe3c=_0x2fc7ca['params'][_0x3ed79e(0x80)],_0x44568c='SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20'+_0x19fe3c,_0x986667=[],[_0x5702dc]=await conn[_0x3ed79e(0x7b)]()[_0x3ed79e(0x91)](_0x44568c);for(let _0x57fd7a=0x0;_0x57fd7a<_0x5702dc[_0x3ed79e(0x92)];_0x57fd7a++){const _0x30259a=_0x5702dc[_0x57fd7a];_0x986667[_0x3ed79e(0x8e)]({'id':_0x30259a['id'],'image_file_name':_0x3ed79e(0x96)+_0x30259a['id']+_0x3ed79e(0x7f)+_0x30259a[_0x3ed79e(0x9b)],'image_content_type':_0x30259a[_0x3ed79e(0x8c)],'image_file_size':_0x30259a[_0x3ed79e(0x8d)],'image_updated_at':_0x30259a[_0x3ed79e(0x95)],'created_at':_0x30259a['created_at'],'updated_at':_0x30259a['updated_at']});}_0x53f9db[_0x3ed79e(0x86)](_0x986667);}catch(_0x3ecb93){console[_0x3ed79e(0xa2)](_0x3ecb93),_0x53f9db[_0x3ed79e(0x86)]([]);}}),router[a12_0x47bd8f(0x90)]('/org2s',async(_0x9003b1,_0x868626)=>{const _0xb81242=a12_0x47bd8f;try{const _0x2bf985=_0xb81242(0x83),_0x3b9ca6='SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s',_0x7dc4a5=_0xb81242(0x77),_0xdc3739=[],_0x3cd45b={},_0x131719={},[_0x29537a]=await conn[_0xb81242(0x7b)]()['query'](_0x7dc4a5);for(let _0x4ab22e=0x0;_0x4ab22e<_0x29537a[_0xb81242(0x92)];_0x4ab22e++){const _0x5d6875=_0x29537a[_0x4ab22e];_0x131719[_0x5d6875['id']]={'id':_0x5d6875['id'],'hex':'#'+_0x5d6875[_0xb81242(0x82)]};}const [_0x428f71]=conn[_0xb81242(0x7b)]()[_0xb81242(0x91)](_0x3b9ca6);for(let _0x58787d=0x0;_0x58787d<_0x428f71['length'];_0x58787d++){const _0x289a2f=_0x428f71[_0x58787d];_0x3cd45b[_0x289a2f['id']]={'id':_0x289a2f['id'],'name':_0x289a2f['name'],'color_id':_0x289a2f[_0xb81242(0x97)],'color':_0x131719[_0x289a2f['color_id']][_0xb81242(0x82)]};}return _0x868626[_0xb81242(0x86)](_0x3cd45b);}catch(_0x10d1af){console[_0xb81242(0xa2)]('DB\x20/org2s\x20error'+_0x10d1af),_0x868626[_0xb81242(0x86)]('[]');}}),router[a12_0x47bd8f(0x90)]('/employees',async(_0x38f578,_0x234e9b)=>{const _0x2cbda2=a12_0x47bd8f;try{const _0xb842f4=_0x2cbda2(0x83),_0x3adc43=_0x2cbda2(0x85),_0x5b0682=_0x2cbda2(0x77),_0x39af36=[],_0x8d0bcf={},_0xe4d151={};let [_0x3d13d4]=await conn[_0x2cbda2(0x7b)]()[_0x2cbda2(0x91)](_0x5b0682);for(let _0x5004a4=0x0;_0x5004a4<_0x3d13d4[_0x2cbda2(0x92)];_0x5004a4++){const _0x36270b=_0x3d13d4[_0x5004a4];_0xe4d151[_0x36270b['id']]={'id':_0x36270b['id'],'hex':'#'+_0x36270b[_0x2cbda2(0x82)]};}console['log']({'colors':_0xe4d151});const [_0x27d73a]=await conn['promise']()[_0x2cbda2(0x91)](_0x3adc43);for(let _0x4fa1b3=0x0;_0x4fa1b3<_0x27d73a[_0x2cbda2(0x92)];_0x4fa1b3++){const _0x21ab3e=_0x27d73a[_0x4fa1b3];_0x8d0bcf[_0x21ab3e['id']]={'id':_0x21ab3e['id'],'name':_0x21ab3e[_0x2cbda2(0x78)],'color_id':_0x21ab3e[_0x2cbda2(0x97)],'color':_0xe4d151[_0x21ab3e[_0x2cbda2(0x97)]][_0x2cbda2(0x82)]};}const [_0x335186]=await conn[_0x2cbda2(0x7b)]()['query'](_0xb842f4);for(let _0x4cb539=0x0;_0x4cb539<_0x335186[_0x2cbda2(0x92)];_0x4cb539++){const _0x2cf7b5=_0x335186[_0x4cb539];_0x39af36['push']({'id':_0x2cf7b5['id'],'room_id':_0x2cf7b5[_0x2cbda2(0x80)],'employee_number':_0x2cf7b5[_0x2cbda2(0x84)],'phone':_0x2cf7b5[_0x2cbda2(0x99)],'floor_id':_0x2cf7b5[_0x2cbda2(0x81)],'org2_id':_0x2cf7b5['org2_id'],'firstname':_0x2cf7b5[_0x2cbda2(0x8a)][_0x2cbda2(0x7d)]('\x20')[0x0],'lastname':_0x2cf7b5[_0x2cbda2(0x8a)][_0x2cbda2(0x7d)]('\x20')[0x1],'employeeName':_0x2cf7b5[_0x2cbda2(0x8a)],'department':_0x8d0bcf[_0x2cf7b5[_0x2cbda2(0xa1)]]});}_0x234e9b[_0x2cbda2(0x86)](_0x39af36);}catch(_0x9db06c){console['log']('DB\x20/employees\x20error'+_0x9db06c),_0x234e9b[_0x2cbda2(0x86)]('[]');}}),module[a12_0x47bd8f(0x8f)]=router;
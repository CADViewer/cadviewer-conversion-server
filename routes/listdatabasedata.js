function a12_0x4005(){const _0x595d20=['promise','455553fTpdYI','7503128lrKZkI','send','9RlEvRe','21505610naLecx','SELECT\x20id,\x20hex\x20FROM\x20colors','2QylIZs','40vuUkjN','query','image_file_size','log','get','3543946AMenFj','DB\x20/org2s\x20error','updated_at','push','color_id','express','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','employee_number','/photos/','org2_id','Router','image_file_name','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','floor_id','/org2s','exports','image_content_type','140963smJyvK','params','../libs/mysql.js','name','/employees','hex','created_at','../CADViewer_config.json','length','320108VAClli','DB\x20/employees\x20error','684360BsuZwV','split','room_id','phone','SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','employeeName'];a12_0x4005=function(){return _0x595d20;};return a12_0x4005();}const a12_0x4f1b29=a12_0x1f1a;function a12_0x1f1a(_0x2266f7,_0x9f5fbe){const _0x40050b=a12_0x4005();return a12_0x1f1a=function(_0x1f1a6d,_0x3d55c6){_0x1f1a6d=_0x1f1a6d-0x13d;let _0x206e27=_0x40050b[_0x1f1a6d];return _0x206e27;},a12_0x1f1a(_0x2266f7,_0x9f5fbe);}(function(_0x3b0b8c,_0x842d68){const _0x579375=a12_0x1f1a,_0xd08d36=_0x3b0b8c();while(!![]){try{const _0xb6e325=-parseInt(_0x579375(0x160))/0x1*(-parseInt(_0x579375(0x149))/0x2)+parseInt(_0x579375(0x143))/0x3+-parseInt(_0x579375(0x169))/0x4*(parseInt(_0x579375(0x14a))/0x5)+parseInt(_0x579375(0x16b))/0x6+-parseInt(_0x579375(0x14f))/0x7+-parseInt(_0x579375(0x144))/0x8*(parseInt(_0x579375(0x146))/0x9)+parseInt(_0x579375(0x147))/0xa;if(_0xb6e325===_0x842d68)break;else _0xd08d36['push'](_0xd08d36['shift']());}catch(_0xdb11f1){_0xd08d36['push'](_0xd08d36['shift']());}}}(a12_0x4005,0x737da));const fs=require('fs'),path=require('path'),config=require(a12_0x4f1b29(0x167)),conn=require(a12_0x4f1b29(0x162)),express=require(a12_0x4f1b29(0x154)),router=express[a12_0x4f1b29(0x159)]();router[a12_0x4f1b29(0x14e)]('/photos/:room_id',async(_0x5ae0b7,_0x101c3d)=>{const _0x351273=a12_0x4f1b29;try{const _0x14be0a=_0x5ae0b7[_0x351273(0x161)][_0x351273(0x13e)],_0x5e3c96=_0x351273(0x140)+_0x14be0a,_0x147b3b=[],[_0x5a7413]=await conn['promise']()[_0x351273(0x14b)](_0x5e3c96);for(let _0x333534=0x0;_0x333534<_0x5a7413['length'];_0x333534++){const _0x151e6c=_0x5a7413[_0x333534];_0x147b3b[_0x351273(0x152)]({'id':_0x151e6c['id'],'image_file_name':_0x351273(0x157)+_0x151e6c['id']+'/original/'+_0x151e6c[_0x351273(0x15a)],'image_content_type':_0x151e6c[_0x351273(0x15f)],'image_file_size':_0x151e6c[_0x351273(0x14c)],'image_updated_at':_0x151e6c['image_updated_at'],'created_at':_0x151e6c[_0x351273(0x166)],'updated_at':_0x151e6c[_0x351273(0x151)]});}_0x101c3d[_0x351273(0x145)](_0x147b3b);}catch(_0xef37da){console[_0x351273(0x14d)](_0xef37da),_0x101c3d[_0x351273(0x145)]([]);}}),router[a12_0x4f1b29(0x14e)](a12_0x4f1b29(0x15d),async(_0x335ea0,_0x52bbec)=>{const _0x37e91f=a12_0x4f1b29;try{const _0x3752f5=_0x37e91f(0x15b),_0x3e0af6=_0x37e91f(0x155),_0x3f29c4=_0x37e91f(0x148),_0x4a0181=[],_0x41c219={},_0x2d21dc={},[_0x47f79f]=await conn[_0x37e91f(0x142)]()[_0x37e91f(0x14b)](_0x3f29c4);for(let _0x4e1117=0x0;_0x4e1117<_0x47f79f[_0x37e91f(0x168)];_0x4e1117++){const _0x1fe0b5=_0x47f79f[_0x4e1117];_0x2d21dc[_0x1fe0b5['id']]={'id':_0x1fe0b5['id'],'hex':'#'+_0x1fe0b5[_0x37e91f(0x165)]};}const [_0x5005e0]=conn[_0x37e91f(0x142)]()[_0x37e91f(0x14b)](_0x3e0af6);for(let _0x435cde=0x0;_0x435cde<_0x5005e0['length'];_0x435cde++){const _0xe92669=_0x5005e0[_0x435cde];_0x41c219[_0xe92669['id']]={'id':_0xe92669['id'],'name':_0xe92669['name'],'color_id':_0xe92669['color_id'],'color':_0x2d21dc[_0xe92669[_0x37e91f(0x153)]][_0x37e91f(0x165)]};}return _0x52bbec[_0x37e91f(0x145)](_0x41c219);}catch(_0x1b62f1){console['log'](_0x37e91f(0x150)+_0x1b62f1),_0x52bbec[_0x37e91f(0x145)]('[]');}}),router[a12_0x4f1b29(0x14e)](a12_0x4f1b29(0x164),async(_0x18ad6a,_0x35e9a7)=>{const _0x52e936=a12_0x4f1b29;try{const _0x1d7451=_0x52e936(0x15b),_0x195aa9='SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s',_0x48041d='SELECT\x20id,\x20hex\x20FROM\x20colors',_0x5c3ea5=[],_0x317010={},_0x2d2e91={};let [_0x745a88]=await conn[_0x52e936(0x142)]()[_0x52e936(0x14b)](_0x48041d);for(let _0x32cc5a=0x0;_0x32cc5a<_0x745a88[_0x52e936(0x168)];_0x32cc5a++){const _0x3ebcc5=_0x745a88[_0x32cc5a];_0x2d2e91[_0x3ebcc5['id']]={'id':_0x3ebcc5['id'],'hex':'#'+_0x3ebcc5[_0x52e936(0x165)]};}console[_0x52e936(0x14d)]({'colors':_0x2d2e91});const [_0x1ead75]=await conn[_0x52e936(0x142)]()[_0x52e936(0x14b)](_0x195aa9);for(let _0x304d47=0x0;_0x304d47<_0x1ead75[_0x52e936(0x168)];_0x304d47++){const _0x44be20=_0x1ead75[_0x304d47];_0x317010[_0x44be20['id']]={'id':_0x44be20['id'],'name':_0x44be20[_0x52e936(0x163)],'color_id':_0x44be20[_0x52e936(0x153)],'color':_0x2d2e91[_0x44be20[_0x52e936(0x153)]][_0x52e936(0x165)]};}const [_0xe9e2dc]=await conn[_0x52e936(0x142)]()[_0x52e936(0x14b)](_0x1d7451);for(let _0xc39330=0x0;_0xc39330<_0xe9e2dc[_0x52e936(0x168)];_0xc39330++){const _0x5d2ad0=_0xe9e2dc[_0xc39330];_0x5c3ea5[_0x52e936(0x152)]({'id':_0x5d2ad0['id'],'room_id':_0x5d2ad0[_0x52e936(0x13e)],'employee_number':_0x5d2ad0[_0x52e936(0x156)],'phone':_0x5d2ad0[_0x52e936(0x13f)],'floor_id':_0x5d2ad0[_0x52e936(0x15c)],'org2_id':_0x5d2ad0['org2_id'],'firstname':_0x5d2ad0['employeeName'][_0x52e936(0x13d)]('\x20')[0x0],'lastname':_0x5d2ad0['employeeName']['split']('\x20')[0x1],'employeeName':_0x5d2ad0[_0x52e936(0x141)],'department':_0x317010[_0x5d2ad0[_0x52e936(0x158)]]});}_0x35e9a7[_0x52e936(0x145)](_0x5c3ea5);}catch(_0xb4cdc){console[_0x52e936(0x14d)](_0x52e936(0x16a)+_0xb4cdc),_0x35e9a7['send']('[]');}}),module[a12_0x4f1b29(0x15e)]=router;
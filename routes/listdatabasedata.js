const a12_0x1f5b88=a12_0x5a24;(function(_0x43993f,_0xb13623){const _0x401284=a12_0x5a24,_0x4c816f=_0x43993f();while(!![]){try{const _0x56b16c=parseInt(_0x401284(0x195))/0x1+parseInt(_0x401284(0x191))/0x2+parseInt(_0x401284(0x1a5))/0x3*(parseInt(_0x401284(0x1a3))/0x4)+parseInt(_0x401284(0x1a1))/0x5*(-parseInt(_0x401284(0x1ac))/0x6)+-parseInt(_0x401284(0x194))/0x7*(parseInt(_0x401284(0x1a7))/0x8)+parseInt(_0x401284(0x1a8))/0x9*(-parseInt(_0x401284(0x1ad))/0xa)+-parseInt(_0x401284(0x1b2))/0xb*(-parseInt(_0x401284(0x19a))/0xc);if(_0x56b16c===_0xb13623)break;else _0x4c816f['push'](_0x4c816f['shift']());}catch(_0xc39c45){_0x4c816f['push'](_0x4c816f['shift']());}}}(a12_0xf038,0x7b080));const fs=require('fs'),path=require(a12_0x1f5b88(0x196)),config=require(a12_0x1f5b88(0x198)),conn=require('../libs/mysql.js'),express=require(a12_0x1f5b88(0x1b3)),router=express['Router']();function a12_0x5a24(_0x1bd949,_0x7cc940){const _0xf03841=a12_0xf038();return a12_0x5a24=function(_0x5a2449,_0x57fdc9){_0x5a2449=_0x5a2449-0x18d;let _0x253839=_0xf03841[_0x5a2449];return _0x253839;},a12_0x5a24(_0x1bd949,_0x7cc940);}router[a12_0x1f5b88(0x197)]('/photos/:room_id',async(_0x30f58f,_0x32b800)=>{const _0x12b2db=a12_0x1f5b88;try{const _0x7c6bcd=_0x30f58f[_0x12b2db(0x1a9)]['room_id'],_0x2eba43='SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20'+_0x7c6bcd,_0xc8d5df=[],[_0x2e5d26]=await conn[_0x12b2db(0x18d)]()['query'](_0x2eba43);for(let _0x489c39=0x0;_0x489c39<_0x2e5d26['length'];_0x489c39++){const _0x2f3e13=_0x2e5d26[_0x489c39];_0xc8d5df['push']({'id':_0x2f3e13['id'],'image_file_name':_0x12b2db(0x1a2)+_0x2f3e13['id']+_0x12b2db(0x19d)+_0x2f3e13[_0x12b2db(0x1b0)],'image_content_type':_0x2f3e13[_0x12b2db(0x19c)],'image_file_size':_0x2f3e13['image_file_size'],'image_updated_at':_0x2f3e13['image_updated_at'],'created_at':_0x2f3e13[_0x12b2db(0x193)],'updated_at':_0x2f3e13['updated_at']});}_0x32b800[_0x12b2db(0x19f)](_0xc8d5df);}catch(_0x360e20){console[_0x12b2db(0x1a4)](_0x360e20),_0x32b800[_0x12b2db(0x19f)]([]);}}),router[a12_0x1f5b88(0x197)]('/org2s',async(_0x2da8f8,_0x150d44)=>{const _0x2cd73a=a12_0x1f5b88;try{const _0x18ee1b=_0x2cd73a(0x1b6),_0x58fdd1='SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s',_0x41592d=_0x2cd73a(0x1a6),_0x4fefe8=[],_0x3a20cb={},_0x42c27f={},[_0xfc62c9]=await conn[_0x2cd73a(0x18d)]()[_0x2cd73a(0x1b1)](_0x41592d);for(let _0x56437e=0x0;_0x56437e<_0xfc62c9[_0x2cd73a(0x199)];_0x56437e++){const _0x33f8b7=_0xfc62c9[_0x56437e];_0x42c27f[_0x33f8b7['id']]={'id':_0x33f8b7['id'],'hex':'#'+_0x33f8b7['hex']};}const [_0x248f51]=conn[_0x2cd73a(0x18d)]()[_0x2cd73a(0x1b1)](_0x58fdd1);for(let _0x217bed=0x0;_0x217bed<_0x248f51['length'];_0x217bed++){const _0x480e98=_0x248f51[_0x217bed];_0x3a20cb[_0x480e98['id']]={'id':_0x480e98['id'],'name':_0x480e98[_0x2cd73a(0x1af)],'color_id':_0x480e98[_0x2cd73a(0x192)],'color':_0x42c27f[_0x480e98[_0x2cd73a(0x192)]][_0x2cd73a(0x18f)]};}return _0x150d44[_0x2cd73a(0x19f)](_0x3a20cb);}catch(_0x2d997a){console[_0x2cd73a(0x1a4)](_0x2cd73a(0x1aa)+_0x2d997a),_0x150d44[_0x2cd73a(0x19f)]('[]');}}),router['get'](a12_0x1f5b88(0x19b),async(_0x2fbfbd,_0x3ea195)=>{const _0x496281=a12_0x1f5b88;try{const _0x24ba65=_0x496281(0x1b6),_0x4d222a='SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s',_0x420fcc=_0x496281(0x1a6),_0x43b1cb=[],_0xf5ae3a={},_0x4f2e71={};let [_0x56bc40]=await conn['promise']()['query'](_0x420fcc);for(let _0x254bb7=0x0;_0x254bb7<_0x56bc40[_0x496281(0x199)];_0x254bb7++){const _0x556722=_0x56bc40[_0x254bb7];_0x4f2e71[_0x556722['id']]={'id':_0x556722['id'],'hex':'#'+_0x556722[_0x496281(0x18f)]};}console[_0x496281(0x1a4)]({'colors':_0x4f2e71});const [_0x1e510d]=await conn['promise']()[_0x496281(0x1b1)](_0x4d222a);for(let _0x70e5ba=0x0;_0x70e5ba<_0x1e510d['length'];_0x70e5ba++){const _0x59d7bf=_0x1e510d[_0x70e5ba];_0xf5ae3a[_0x59d7bf['id']]={'id':_0x59d7bf['id'],'name':_0x59d7bf[_0x496281(0x1af)],'color_id':_0x59d7bf['color_id'],'color':_0x4f2e71[_0x59d7bf['color_id']][_0x496281(0x18f)]};}const [_0x238b49]=await conn[_0x496281(0x18d)]()[_0x496281(0x1b1)](_0x24ba65);for(let _0x21fe21=0x0;_0x21fe21<_0x238b49[_0x496281(0x199)];_0x21fe21++){const _0x1a7107=_0x238b49[_0x21fe21];_0x43b1cb[_0x496281(0x1a0)]({'id':_0x1a7107['id'],'room_id':_0x1a7107['room_id'],'employee_number':_0x1a7107[_0x496281(0x18e)],'phone':_0x1a7107[_0x496281(0x1b5)],'floor_id':_0x1a7107[_0x496281(0x1ae)],'org2_id':_0x1a7107[_0x496281(0x1ab)],'firstname':_0x1a7107[_0x496281(0x1b4)][_0x496281(0x19e)]('\x20')[0x0],'lastname':_0x1a7107['employeeName'][_0x496281(0x19e)]('\x20')[0x1],'employeeName':_0x1a7107[_0x496281(0x1b4)],'department':_0xf5ae3a[_0x1a7107[_0x496281(0x1ab)]]});}_0x3ea195[_0x496281(0x19f)](_0x43b1cb);}catch(_0x2bca28){console[_0x496281(0x1a4)]('DB\x20/employees\x20error'+_0x2bca28),_0x3ea195[_0x496281(0x19f)]('[]');}}),module[a12_0x1f5b88(0x190)]=router;function a12_0xf038(){const _0x2d72d4=['SELECT\x20id,\x20hex\x20FROM\x20colors','15632HBTDzs','5852898vXbffi','params','DB\x20/org2s\x20error','org2_id','1497378IuARav','10aDaLmT','floor_id','name','image_file_name','query','66awQPBZ','express','employeeName','phone','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','promise','employee_number','hex','exports','739506eKiRPB','color_id','created_at','3549WoGmZB','749016FUueYp','path','get','../CADViewer_config.json','length','3319452vCyZSK','/employees','image_content_type','/original/','split','send','push','15UVEjff','/photos/','232YLlhTt','log','5955fgKJIV'];a12_0xf038=function(){return _0x2d72d4;};return a12_0xf038();}
const a12_0x597d25=a12_0x57ea;(function(_0x59a764,_0x27f045){const _0x42202f=a12_0x57ea,_0x1cdbc0=_0x59a764();while(!![]){try{const _0x4f8cb1=parseInt(_0x42202f(0x197))/0x1+-parseInt(_0x42202f(0x1ab))/0x2*(parseInt(_0x42202f(0x19c))/0x3)+parseInt(_0x42202f(0x1b0))/0x4+parseInt(_0x42202f(0x1b1))/0x5+-parseInt(_0x42202f(0x1b6))/0x6+parseInt(_0x42202f(0x1b3))/0x7*(parseInt(_0x42202f(0x1a9))/0x8)+parseInt(_0x42202f(0x1b2))/0x9*(-parseInt(_0x42202f(0x19b))/0xa);if(_0x4f8cb1===_0x27f045)break;else _0x1cdbc0['push'](_0x1cdbc0['shift']());}catch(_0x39be04){_0x1cdbc0['push'](_0x1cdbc0['shift']());}}}(a12_0x455a,0x6386d));function a12_0x455a(){const _0x5137a0=['/employees','hex','log','params','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','/original/','color_id','../libs/mysql.js','Router','get','140693xLoRfW','/photos/','exports','name','345010FQLkkr','62775dpsfTA','org2_id','split','room_id','created_at','push','send','employee_number','image_file_size','image_updated_at','DB\x20/employees\x20error','SELECT\x20id,\x20hex\x20FROM\x20colors','length','342616kJPIjZ','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','12dgkhpY','phone','image_file_name','DB\x20/org2s\x20error','promise','972200XkOlGx','2547230lOeaCS','135QUVXjA','35amEBzn','query','SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','339588cqpAkC','path','/org2s','employeeName'];a12_0x455a=function(){return _0x5137a0;};return a12_0x455a();}const fs=require('fs'),path=require(a12_0x597d25(0x1b7)),config=require('../CADViewer_config.json'),conn=require(a12_0x597d25(0x194)),express=require('express'),router=express[a12_0x597d25(0x195)]();function a12_0x57ea(_0x2ca24c,_0x361f03){const _0x455a4e=a12_0x455a();return a12_0x57ea=function(_0x57eafd,_0x397548){_0x57eafd=_0x57eafd-0x193;let _0x2bd763=_0x455a4e[_0x57eafd];return _0x2bd763;},a12_0x57ea(_0x2ca24c,_0x361f03);}router['get']('/photos/:room_id',async(_0x1a2541,_0x1a918a)=>{const _0x4c9f81=a12_0x597d25;try{const _0xb838c4=_0x1a2541[_0x4c9f81(0x1bd)][_0x4c9f81(0x19f)],_0x43585e=_0x4c9f81(0x1b5)+_0xb838c4,_0x37c13c=[],[_0xcd855a]=await conn[_0x4c9f81(0x1af)]()['query'](_0x43585e);for(let _0x7aad29=0x0;_0x7aad29<_0xcd855a['length'];_0x7aad29++){const _0x37f8e2=_0xcd855a[_0x7aad29];_0x37c13c[_0x4c9f81(0x1a1)]({'id':_0x37f8e2['id'],'image_file_name':_0x4c9f81(0x198)+_0x37f8e2['id']+_0x4c9f81(0x1bf)+_0x37f8e2[_0x4c9f81(0x1ad)],'image_content_type':_0x37f8e2['image_content_type'],'image_file_size':_0x37f8e2[_0x4c9f81(0x1a4)],'image_updated_at':_0x37f8e2[_0x4c9f81(0x1a5)],'created_at':_0x37f8e2[_0x4c9f81(0x1a0)],'updated_at':_0x37f8e2['updated_at']});}_0x1a918a['send'](_0x37c13c);}catch(_0x3a06d3){console[_0x4c9f81(0x1bc)](_0x3a06d3),_0x1a918a['send']([]);}}),router[a12_0x597d25(0x196)](a12_0x597d25(0x1b8),async(_0x59f73e,_0x27959d)=>{const _0x38f1cd=a12_0x597d25;try{const _0x3ceee6=_0x38f1cd(0x1be),_0x130d09=_0x38f1cd(0x1aa),_0x59d4f6=_0x38f1cd(0x1a7),_0x56cadb=[],_0x505ae3={},_0x3551e1={},[_0x523f12]=await conn[_0x38f1cd(0x1af)]()[_0x38f1cd(0x1b4)](_0x59d4f6);for(let _0x5129f0=0x0;_0x5129f0<_0x523f12[_0x38f1cd(0x1a8)];_0x5129f0++){const _0x6acba3=_0x523f12[_0x5129f0];_0x3551e1[_0x6acba3['id']]={'id':_0x6acba3['id'],'hex':'#'+_0x6acba3[_0x38f1cd(0x1bb)]};}const [_0x4e3ba9]=conn[_0x38f1cd(0x1af)]()['query'](_0x130d09);for(let _0x5b5a91=0x0;_0x5b5a91<_0x4e3ba9[_0x38f1cd(0x1a8)];_0x5b5a91++){const _0x18de0d=_0x4e3ba9[_0x5b5a91];_0x505ae3[_0x18de0d['id']]={'id':_0x18de0d['id'],'name':_0x18de0d['name'],'color_id':_0x18de0d[_0x38f1cd(0x193)],'color':_0x3551e1[_0x18de0d[_0x38f1cd(0x193)]]['hex']};}return _0x27959d[_0x38f1cd(0x1a2)](_0x505ae3);}catch(_0x34c65b){console[_0x38f1cd(0x1bc)](_0x38f1cd(0x1ae)+_0x34c65b),_0x27959d[_0x38f1cd(0x1a2)]('[]');}}),router[a12_0x597d25(0x196)](a12_0x597d25(0x1ba),async(_0x59ca01,_0x55700d)=>{const _0x5acd08=a12_0x597d25;try{const _0x4e2f10=_0x5acd08(0x1be),_0x5561cf=_0x5acd08(0x1aa),_0x50c757=_0x5acd08(0x1a7),_0x60acb5=[],_0x5a8f16={},_0x1bcd77={};let [_0x4f4044]=await conn[_0x5acd08(0x1af)]()['query'](_0x50c757);for(let _0x238df4=0x0;_0x238df4<_0x4f4044[_0x5acd08(0x1a8)];_0x238df4++){const _0x406724=_0x4f4044[_0x238df4];_0x1bcd77[_0x406724['id']]={'id':_0x406724['id'],'hex':'#'+_0x406724[_0x5acd08(0x1bb)]};}console[_0x5acd08(0x1bc)]({'colors':_0x1bcd77});const [_0x91311e]=await conn[_0x5acd08(0x1af)]()['query'](_0x5561cf);for(let _0x4b58f4=0x0;_0x4b58f4<_0x91311e['length'];_0x4b58f4++){const _0x774934=_0x91311e[_0x4b58f4];_0x5a8f16[_0x774934['id']]={'id':_0x774934['id'],'name':_0x774934[_0x5acd08(0x19a)],'color_id':_0x774934[_0x5acd08(0x193)],'color':_0x1bcd77[_0x774934[_0x5acd08(0x193)]][_0x5acd08(0x1bb)]};}const [_0x1a02a2]=await conn[_0x5acd08(0x1af)]()['query'](_0x4e2f10);for(let _0x5c39f7=0x0;_0x5c39f7<_0x1a02a2['length'];_0x5c39f7++){const _0x436d91=_0x1a02a2[_0x5c39f7];_0x60acb5[_0x5acd08(0x1a1)]({'id':_0x436d91['id'],'room_id':_0x436d91['room_id'],'employee_number':_0x436d91[_0x5acd08(0x1a3)],'phone':_0x436d91[_0x5acd08(0x1ac)],'floor_id':_0x436d91['floor_id'],'org2_id':_0x436d91['org2_id'],'firstname':_0x436d91[_0x5acd08(0x1b9)][_0x5acd08(0x19e)]('\x20')[0x0],'lastname':_0x436d91['employeeName'][_0x5acd08(0x19e)]('\x20')[0x1],'employeeName':_0x436d91[_0x5acd08(0x1b9)],'department':_0x5a8f16[_0x436d91[_0x5acd08(0x19d)]]});}_0x55700d[_0x5acd08(0x1a2)](_0x60acb5);}catch(_0x16246c){console[_0x5acd08(0x1bc)](_0x5acd08(0x1a6)+_0x16246c),_0x55700d['send']('[]');}}),module[a12_0x597d25(0x199)]=router;
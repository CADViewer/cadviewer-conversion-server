const a12_0x596663=a12_0x2c81;(function(_0x3ca208,_0x1417a5){const _0x508ca2=a12_0x2c81,_0x15b599=_0x3ca208();while(!![]){try{const _0x5f2b2b=-parseInt(_0x508ca2(0x170))/0x1+-parseInt(_0x508ca2(0x178))/0x2+parseInt(_0x508ca2(0x176))/0x3*(-parseInt(_0x508ca2(0x16e))/0x4)+parseInt(_0x508ca2(0x17d))/0x5*(parseInt(_0x508ca2(0x166))/0x6)+-parseInt(_0x508ca2(0x17b))/0x7+parseInt(_0x508ca2(0x169))/0x8*(-parseInt(_0x508ca2(0x164))/0x9)+parseInt(_0x508ca2(0x188))/0xa*(parseInt(_0x508ca2(0x187))/0xb);if(_0x5f2b2b===_0x1417a5)break;else _0x15b599['push'](_0x15b599['shift']());}catch(_0x3f79c1){_0x15b599['push'](_0x15b599['shift']());}}}(a12_0x71b3,0xb1661));const fs=require('fs'),path=require(a12_0x596663(0x16a)),config=require('../CADViewer_config.json'),conn=require('../libs/mysql.js'),express=require(a12_0x596663(0x165)),router=express[a12_0x596663(0x17e)]();function a12_0x2c81(_0x59d3c2,_0x138cd6){const _0x71b31f=a12_0x71b3();return a12_0x2c81=function(_0x2c810b,_0x14ab55){_0x2c810b=_0x2c810b-0x162;let _0x46d55c=_0x71b31f[_0x2c810b];return _0x46d55c;},a12_0x2c81(_0x59d3c2,_0x138cd6);}function a12_0x71b3(){const _0x21cd64=['image_updated_at','9qaxDil','express','442086LkpENk','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','params','8842088xDjCsp','path','image_file_size','org2_id','split','12ShEjjh','employeeName','933366FVOodT','image_file_name','updated_at','push','name','get','309951hROloB','length','1430650bGdeMV','SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','/photos/:room_id','6840379JwEimD','/org2s','80aEOrEy','Router','query','DB\x20/org2s\x20error','promise','SELECT\x20id,\x20hex\x20FROM\x20colors','exports','/employees','/original/','employee_number','11vvkyAv','35888290WcrjZZ','room_id','color_id','send','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','hex','phone','log'];a12_0x71b3=function(){return _0x21cd64;};return a12_0x71b3();}router[a12_0x596663(0x175)](a12_0x596663(0x17a),async(_0x28751f,_0x42a980)=>{const _0x4cd77f=a12_0x596663;try{const _0x6d3b76=_0x28751f[_0x4cd77f(0x168)][_0x4cd77f(0x189)],_0x1b6258=_0x4cd77f(0x179)+_0x6d3b76,_0x4afb43=[],[_0x22a683]=await conn[_0x4cd77f(0x181)]()['query'](_0x1b6258);for(let _0x2705ac=0x0;_0x2705ac<_0x22a683[_0x4cd77f(0x177)];_0x2705ac++){const _0x73ae22=_0x22a683[_0x2705ac];_0x4afb43[_0x4cd77f(0x173)]({'id':_0x73ae22['id'],'image_file_name':'/photos/'+_0x73ae22['id']+_0x4cd77f(0x185)+_0x73ae22[_0x4cd77f(0x171)],'image_content_type':_0x73ae22['image_content_type'],'image_file_size':_0x73ae22[_0x4cd77f(0x16b)],'image_updated_at':_0x73ae22[_0x4cd77f(0x163)],'created_at':_0x73ae22['created_at'],'updated_at':_0x73ae22[_0x4cd77f(0x172)]});}_0x42a980['send'](_0x4afb43);}catch(_0x1a3089){console['log'](_0x1a3089),_0x42a980['send']([]);}}),router[a12_0x596663(0x175)](a12_0x596663(0x17c),async(_0x5d7172,_0x50ad79)=>{const _0x2e2888=a12_0x596663;try{const _0x30aff4='SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees',_0x54a75f=_0x2e2888(0x167),_0x3d28e4=_0x2e2888(0x182),_0x4e063c=[],_0x330ff1={},_0x4e7c64={},[_0x34ca3e]=await conn[_0x2e2888(0x181)]()[_0x2e2888(0x17f)](_0x3d28e4);for(let _0x56c348=0x0;_0x56c348<_0x34ca3e[_0x2e2888(0x177)];_0x56c348++){const _0x586b2e=_0x34ca3e[_0x56c348];_0x4e7c64[_0x586b2e['id']]={'id':_0x586b2e['id'],'hex':'#'+_0x586b2e[_0x2e2888(0x18d)]};}const [_0x14571c]=conn['promise']()['query'](_0x54a75f);for(let _0x1d63c7=0x0;_0x1d63c7<_0x14571c['length'];_0x1d63c7++){const _0x293b91=_0x14571c[_0x1d63c7];_0x330ff1[_0x293b91['id']]={'id':_0x293b91['id'],'name':_0x293b91[_0x2e2888(0x174)],'color_id':_0x293b91[_0x2e2888(0x18a)],'color':_0x4e7c64[_0x293b91[_0x2e2888(0x18a)]]['hex']};}return _0x50ad79[_0x2e2888(0x18b)](_0x330ff1);}catch(_0x346081){console[_0x2e2888(0x162)](_0x2e2888(0x180)+_0x346081),_0x50ad79['send']('[]');}}),router[a12_0x596663(0x175)](a12_0x596663(0x184),async(_0x4d3092,_0x494e81)=>{const _0x2462d2=a12_0x596663;try{const _0xc4209a=_0x2462d2(0x18c),_0x582d1a=_0x2462d2(0x167),_0x4b1d36=_0x2462d2(0x182),_0x643122=[],_0x54811d={},_0x3e0685={};let [_0x1087d0]=await conn[_0x2462d2(0x181)]()[_0x2462d2(0x17f)](_0x4b1d36);for(let _0x5e0517=0x0;_0x5e0517<_0x1087d0[_0x2462d2(0x177)];_0x5e0517++){const _0x44a890=_0x1087d0[_0x5e0517];_0x3e0685[_0x44a890['id']]={'id':_0x44a890['id'],'hex':'#'+_0x44a890[_0x2462d2(0x18d)]};}console[_0x2462d2(0x162)]({'colors':_0x3e0685});const [_0x3b12cb]=await conn[_0x2462d2(0x181)]()[_0x2462d2(0x17f)](_0x582d1a);for(let _0x462765=0x0;_0x462765<_0x3b12cb[_0x2462d2(0x177)];_0x462765++){const _0x3aefc2=_0x3b12cb[_0x462765];_0x54811d[_0x3aefc2['id']]={'id':_0x3aefc2['id'],'name':_0x3aefc2[_0x2462d2(0x174)],'color_id':_0x3aefc2[_0x2462d2(0x18a)],'color':_0x3e0685[_0x3aefc2[_0x2462d2(0x18a)]][_0x2462d2(0x18d)]};}const [_0x1c69b7]=await conn[_0x2462d2(0x181)]()['query'](_0xc4209a);for(let _0x42be46=0x0;_0x42be46<_0x1c69b7[_0x2462d2(0x177)];_0x42be46++){const _0x4bb3d1=_0x1c69b7[_0x42be46];_0x643122[_0x2462d2(0x173)]({'id':_0x4bb3d1['id'],'room_id':_0x4bb3d1[_0x2462d2(0x189)],'employee_number':_0x4bb3d1[_0x2462d2(0x186)],'phone':_0x4bb3d1[_0x2462d2(0x18e)],'floor_id':_0x4bb3d1['floor_id'],'org2_id':_0x4bb3d1['org2_id'],'firstname':_0x4bb3d1[_0x2462d2(0x16f)][_0x2462d2(0x16d)]('\x20')[0x0],'lastname':_0x4bb3d1[_0x2462d2(0x16f)][_0x2462d2(0x16d)]('\x20')[0x1],'employeeName':_0x4bb3d1['employeeName'],'department':_0x54811d[_0x4bb3d1[_0x2462d2(0x16c)]]});}_0x494e81['send'](_0x643122);}catch(_0x5b06fe){console[_0x2462d2(0x162)]('DB\x20/employees\x20error'+_0x5b06fe),_0x494e81[_0x2462d2(0x18b)]('[]');}}),module[a12_0x596663(0x183)]=router;
const a12_0x1ee0f0=a12_0x3380;function a12_0x22b0(){const _0x2aa3ac=['603963mhyggw','log','269652oVuGlR','hex','8253mbRvFs','/org2s','14VmfqBl','1100GBOnCW','split','phone','employee_number','DB\x20/employees\x20error','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','8080uBMYTo','Router','updated_at','image_file_size','length','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','DB\x20/org2s\x20error','query','promise','org2_id','190AZPqVz','push','get','image_updated_at','5FnZDhV','image_file_name','name','198BQBTay','../CADViewer_config.json','employeeName','/photos/','exports','43277455aHotCZ','created_at','2824944ffwyGE','2571uOAVwK','SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','express','SELECT\x20id,\x20hex\x20FROM\x20colors','1897ftjiLW','/original/','/employees','color_id','/photos/:room_id','send','231IHCWIc'];a12_0x22b0=function(){return _0x2aa3ac;};return a12_0x22b0();}(function(_0x2d6189,_0x58ffbf){const _0xc54157=a12_0x3380,_0x170c84=_0x2d6189();while(!![]){try{const _0x466e5a=parseInt(_0xc54157(0x13f))/0x1*(parseInt(_0xc54157(0x133))/0x2)+parseInt(_0xc54157(0x13b))/0x3*(-parseInt(_0xc54157(0x11c))/0x4)+parseInt(_0xc54157(0x130))/0x5*(-parseInt(_0xc54157(0x13a))/0x6)+parseInt(_0xc54157(0x119))/0x7*(-parseInt(_0xc54157(0x122))/0x8)+parseInt(_0xc54157(0x146))/0x9*(-parseInt(_0xc54157(0x12c))/0xa)+parseInt(_0xc54157(0x145))/0xb*(parseInt(_0xc54157(0x148))/0xc)+parseInt(_0xc54157(0x138))/0xd*(parseInt(_0xc54157(0x11b))/0xe);if(_0x466e5a===_0x58ffbf)break;else _0x170c84['push'](_0x170c84['shift']());}catch(_0x3a5522){_0x170c84['push'](_0x170c84['shift']());}}}(a12_0x22b0,0xc7517));const fs=require('fs'),path=require('path'),config=require(a12_0x1ee0f0(0x134)),conn=require('../libs/mysql.js'),express=require(a12_0x1ee0f0(0x13d)),router=express[a12_0x1ee0f0(0x123)]();function a12_0x3380(_0x5b3ca7,_0x4e2211){const _0x22b07a=a12_0x22b0();return a12_0x3380=function(_0x338000,_0x434f39){_0x338000=_0x338000-0x119;let _0x476ee8=_0x22b07a[_0x338000];return _0x476ee8;},a12_0x3380(_0x5b3ca7,_0x4e2211);}router[a12_0x1ee0f0(0x12e)](a12_0x1ee0f0(0x143),async(_0x13e530,_0xafd192)=>{const _0x11ccdc=a12_0x1ee0f0;try{const _0x206b90=_0x13e530['params']['room_id'],_0x3826aa=_0x11ccdc(0x13c)+_0x206b90,_0x66a0d0=[],[_0x5a5383]=await conn[_0x11ccdc(0x12a)]()[_0x11ccdc(0x129)](_0x3826aa);for(let _0x519535=0x0;_0x519535<_0x5a5383['length'];_0x519535++){const _0x49ba67=_0x5a5383[_0x519535];_0x66a0d0[_0x11ccdc(0x12d)]({'id':_0x49ba67['id'],'image_file_name':_0x11ccdc(0x136)+_0x49ba67['id']+_0x11ccdc(0x140)+_0x49ba67[_0x11ccdc(0x131)],'image_content_type':_0x49ba67['image_content_type'],'image_file_size':_0x49ba67[_0x11ccdc(0x125)],'image_updated_at':_0x49ba67[_0x11ccdc(0x12f)],'created_at':_0x49ba67[_0x11ccdc(0x139)],'updated_at':_0x49ba67[_0x11ccdc(0x124)]});}_0xafd192[_0x11ccdc(0x144)](_0x66a0d0);}catch(_0x497bb3){console[_0x11ccdc(0x147)](_0x497bb3),_0xafd192['send']([]);}}),router[a12_0x1ee0f0(0x12e)](a12_0x1ee0f0(0x11a),async(_0x18b23f,_0x45ac11)=>{const _0x5824eb=a12_0x1ee0f0;try{const _0x4f7e50='SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees',_0x8982ad=_0x5824eb(0x121),_0x2f4f74=_0x5824eb(0x13e),_0x310349=[],_0x10dbb0={},_0xd33d45={},[_0x563fbb]=await conn[_0x5824eb(0x12a)]()[_0x5824eb(0x129)](_0x2f4f74);for(let _0x361269=0x0;_0x361269<_0x563fbb[_0x5824eb(0x126)];_0x361269++){const _0x429f54=_0x563fbb[_0x361269];_0xd33d45[_0x429f54['id']]={'id':_0x429f54['id'],'hex':'#'+_0x429f54[_0x5824eb(0x149)]};}const [_0x2710af]=conn['promise']()[_0x5824eb(0x129)](_0x8982ad);for(let _0x1af59e=0x0;_0x1af59e<_0x2710af[_0x5824eb(0x126)];_0x1af59e++){const _0x3a817a=_0x2710af[_0x1af59e];_0x10dbb0[_0x3a817a['id']]={'id':_0x3a817a['id'],'name':_0x3a817a[_0x5824eb(0x132)],'color_id':_0x3a817a['color_id'],'color':_0xd33d45[_0x3a817a[_0x5824eb(0x142)]]['hex']};}return _0x45ac11[_0x5824eb(0x144)](_0x10dbb0);}catch(_0x4b0785){console[_0x5824eb(0x147)](_0x5824eb(0x128)+_0x4b0785),_0x45ac11[_0x5824eb(0x144)]('[]');}}),router[a12_0x1ee0f0(0x12e)](a12_0x1ee0f0(0x141),async(_0xcfd2a4,_0x14738f)=>{const _0x448a57=a12_0x1ee0f0;try{const _0x276c10=_0x448a57(0x127),_0x48e035='SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s',_0x4d5013=_0x448a57(0x13e),_0x44cd19=[],_0x4cea1d={},_0xab4b09={};let [_0x4cb640]=await conn[_0x448a57(0x12a)]()['query'](_0x4d5013);for(let _0x65e88d=0x0;_0x65e88d<_0x4cb640['length'];_0x65e88d++){const _0x564bf1=_0x4cb640[_0x65e88d];_0xab4b09[_0x564bf1['id']]={'id':_0x564bf1['id'],'hex':'#'+_0x564bf1[_0x448a57(0x149)]};}console[_0x448a57(0x147)]({'colors':_0xab4b09});const [_0x20b935]=await conn[_0x448a57(0x12a)]()[_0x448a57(0x129)](_0x48e035);for(let _0x185a95=0x0;_0x185a95<_0x20b935[_0x448a57(0x126)];_0x185a95++){const _0x21ef0c=_0x20b935[_0x185a95];_0x4cea1d[_0x21ef0c['id']]={'id':_0x21ef0c['id'],'name':_0x21ef0c[_0x448a57(0x132)],'color_id':_0x21ef0c[_0x448a57(0x142)],'color':_0xab4b09[_0x21ef0c['color_id']][_0x448a57(0x149)]};}const [_0xa18b69]=await conn[_0x448a57(0x12a)]()[_0x448a57(0x129)](_0x276c10);for(let _0x362641=0x0;_0x362641<_0xa18b69[_0x448a57(0x126)];_0x362641++){const _0xb5dfca=_0xa18b69[_0x362641];_0x44cd19[_0x448a57(0x12d)]({'id':_0xb5dfca['id'],'room_id':_0xb5dfca['room_id'],'employee_number':_0xb5dfca[_0x448a57(0x11f)],'phone':_0xb5dfca[_0x448a57(0x11e)],'floor_id':_0xb5dfca['floor_id'],'org2_id':_0xb5dfca[_0x448a57(0x12b)],'firstname':_0xb5dfca[_0x448a57(0x135)]['split']('\x20')[0x0],'lastname':_0xb5dfca[_0x448a57(0x135)][_0x448a57(0x11d)]('\x20')[0x1],'employeeName':_0xb5dfca[_0x448a57(0x135)],'department':_0x4cea1d[_0xb5dfca[_0x448a57(0x12b)]]});}_0x14738f[_0x448a57(0x144)](_0x44cd19);}catch(_0x4f3dbc){console[_0x448a57(0x147)](_0x448a57(0x120)+_0x4f3dbc),_0x14738f[_0x448a57(0x144)]('[]');}}),module[a12_0x1ee0f0(0x137)]=router;
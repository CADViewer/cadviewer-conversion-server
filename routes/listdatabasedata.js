const a12_0x40eff0=a12_0xd1f7;function a12_0xd1f7(_0x1472e1,_0x2309f3){const _0x5d6385=a12_0x5d63();return a12_0xd1f7=function(_0xd1f760,_0x49e16e){_0xd1f760=_0xd1f760-0x1b3;let _0x3172d0=_0x5d6385[_0xd1f760];return _0x3172d0;},a12_0xd1f7(_0x1472e1,_0x2309f3);}(function(_0x1441d3,_0x58a167){const _0x12354b=a12_0xd1f7,_0x335308=_0x1441d3();while(!![]){try{const _0x4cc9c5=-parseInt(_0x12354b(0x1ce))/0x1*(parseInt(_0x12354b(0x1dd))/0x2)+-parseInt(_0x12354b(0x1c4))/0x3*(-parseInt(_0x12354b(0x1bb))/0x4)+parseInt(_0x12354b(0x1d3))/0x5*(parseInt(_0x12354b(0x1d8))/0x6)+-parseInt(_0x12354b(0x1c6))/0x7*(-parseInt(_0x12354b(0x1e1))/0x8)+-parseInt(_0x12354b(0x1c8))/0x9+parseInt(_0x12354b(0x1d4))/0xa+parseInt(_0x12354b(0x1b7))/0xb*(-parseInt(_0x12354b(0x1ba))/0xc);if(_0x4cc9c5===_0x58a167)break;else _0x335308['push'](_0x335308['shift']());}catch(_0x3fdbcf){_0x335308['push'](_0x335308['shift']());}}}(a12_0x5d63,0x80e52));function a12_0x5d63(){const _0x5eeef3=['image_file_size','name','/photos/:room_id','DB\x20/employees\x20error','1EAeEqy','DB\x20/org2s\x20error','exports','promise','push','5SBPuBD','2242660gbjliD','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','log','image_updated_at','2455242FhDchH','SELECT\x20id,\x20hex\x20FROM\x20colors','get','path','phone','1185586GlhJDl','/org2s','/employees','updated_at','16lQyazn','org2_id','created_at','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','length','11iwiAIc','params','floor_id','5540892HilBkr','4089236mikGwH','split','SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','../CADViewer_config.json','hex','color_id','send','employee_number','query','3exsmXv','employeeName','797293aQAXBO','room_id','2709828YslAjm','image_content_type'];a12_0x5d63=function(){return _0x5eeef3;};return a12_0x5d63();}const fs=require('fs'),path=require(a12_0x40eff0(0x1db)),config=require(a12_0x40eff0(0x1be)),conn=require('../libs/mysql.js'),express=require('express'),router=express['Router']();router['get'](a12_0x40eff0(0x1cc),async(_0x367642,_0x63ad7b)=>{const _0xecddd6=a12_0x40eff0;try{const _0xb27c6e=_0x367642[_0xecddd6(0x1b8)][_0xecddd6(0x1c7)],_0x121685=_0xecddd6(0x1bd)+_0xb27c6e,_0x7af70e=[],[_0x3d1a75]=await conn[_0xecddd6(0x1d1)]()[_0xecddd6(0x1c3)](_0x121685);for(let _0x399612=0x0;_0x399612<_0x3d1a75[_0xecddd6(0x1b6)];_0x399612++){const _0xa640e4=_0x3d1a75[_0x399612];_0x7af70e[_0xecddd6(0x1d2)]({'id':_0xa640e4['id'],'image_file_name':'/photos/'+_0xa640e4['id']+'/original/'+_0xa640e4['image_file_name'],'image_content_type':_0xa640e4[_0xecddd6(0x1c9)],'image_file_size':_0xa640e4[_0xecddd6(0x1ca)],'image_updated_at':_0xa640e4[_0xecddd6(0x1d7)],'created_at':_0xa640e4[_0xecddd6(0x1b4)],'updated_at':_0xa640e4[_0xecddd6(0x1e0)]});}_0x63ad7b['send'](_0x7af70e);}catch(_0x5b5605){console[_0xecddd6(0x1d6)](_0x5b5605),_0x63ad7b[_0xecddd6(0x1c1)]([]);}}),router['get'](a12_0x40eff0(0x1de),async(_0x1a22ca,_0x1bd1e1)=>{const _0x539187=a12_0x40eff0;try{const _0x15373e=_0x539187(0x1d5),_0x39fbab=_0x539187(0x1b5),_0x5abe27=_0x539187(0x1d9),_0x1f2d03=[],_0x3e97c1={},_0x380806={},[_0x2448f1]=await conn[_0x539187(0x1d1)]()['query'](_0x5abe27);for(let _0x3e4794=0x0;_0x3e4794<_0x2448f1['length'];_0x3e4794++){const _0x342057=_0x2448f1[_0x3e4794];_0x380806[_0x342057['id']]={'id':_0x342057['id'],'hex':'#'+_0x342057[_0x539187(0x1bf)]};}const [_0x440299]=conn['promise']()[_0x539187(0x1c3)](_0x39fbab);for(let _0x217784=0x0;_0x217784<_0x440299[_0x539187(0x1b6)];_0x217784++){const _0x2e7b6e=_0x440299[_0x217784];_0x3e97c1[_0x2e7b6e['id']]={'id':_0x2e7b6e['id'],'name':_0x2e7b6e['name'],'color_id':_0x2e7b6e[_0x539187(0x1c0)],'color':_0x380806[_0x2e7b6e[_0x539187(0x1c0)]][_0x539187(0x1bf)]};}return _0x1bd1e1[_0x539187(0x1c1)](_0x3e97c1);}catch(_0x4d411b){console['log'](_0x539187(0x1cf)+_0x4d411b),_0x1bd1e1['send']('[]');}}),router[a12_0x40eff0(0x1da)](a12_0x40eff0(0x1df),async(_0x2b4ceb,_0x1744f5)=>{const _0x123755=a12_0x40eff0;try{const _0x2b99b3=_0x123755(0x1d5),_0x738983='SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s',_0x685863=_0x123755(0x1d9),_0x547b6e=[],_0x30bf16={},_0x295db5={};let [_0x2995c0]=await conn['promise']()['query'](_0x685863);for(let _0x4f646d=0x0;_0x4f646d<_0x2995c0[_0x123755(0x1b6)];_0x4f646d++){const _0x3e9d34=_0x2995c0[_0x4f646d];_0x295db5[_0x3e9d34['id']]={'id':_0x3e9d34['id'],'hex':'#'+_0x3e9d34['hex']};}console[_0x123755(0x1d6)]({'colors':_0x295db5});const [_0x21a7fb]=await conn['promise']()[_0x123755(0x1c3)](_0x738983);for(let _0x25e052=0x0;_0x25e052<_0x21a7fb[_0x123755(0x1b6)];_0x25e052++){const _0x22c36e=_0x21a7fb[_0x25e052];_0x30bf16[_0x22c36e['id']]={'id':_0x22c36e['id'],'name':_0x22c36e[_0x123755(0x1cb)],'color_id':_0x22c36e[_0x123755(0x1c0)],'color':_0x295db5[_0x22c36e[_0x123755(0x1c0)]][_0x123755(0x1bf)]};}const [_0x284a8c]=await conn[_0x123755(0x1d1)]()[_0x123755(0x1c3)](_0x2b99b3);for(let _0x1a5385=0x0;_0x1a5385<_0x284a8c['length'];_0x1a5385++){const _0xea915e=_0x284a8c[_0x1a5385];_0x547b6e[_0x123755(0x1d2)]({'id':_0xea915e['id'],'room_id':_0xea915e['room_id'],'employee_number':_0xea915e[_0x123755(0x1c2)],'phone':_0xea915e[_0x123755(0x1dc)],'floor_id':_0xea915e[_0x123755(0x1b9)],'org2_id':_0xea915e[_0x123755(0x1b3)],'firstname':_0xea915e[_0x123755(0x1c5)][_0x123755(0x1bc)]('\x20')[0x0],'lastname':_0xea915e[_0x123755(0x1c5)][_0x123755(0x1bc)]('\x20')[0x1],'employeeName':_0xea915e[_0x123755(0x1c5)],'department':_0x30bf16[_0xea915e['org2_id']]});}_0x1744f5['send'](_0x547b6e);}catch(_0x1469f4){console['log'](_0x123755(0x1cd)+_0x1469f4),_0x1744f5[_0x123755(0x1c1)]('[]');}}),module[a12_0x40eff0(0x1d0)]=router;
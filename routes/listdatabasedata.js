const a12_0x164f19=a12_0x4faa;function a12_0x4faa(_0x3ea04d,_0x2a604e){const _0x416aeb=a12_0x416a();return a12_0x4faa=function(_0x4faaf6,_0x341ea7){_0x4faaf6=_0x4faaf6-0x7b;let _0x63ccf3=_0x416aeb[_0x4faaf6];return _0x63ccf3;},a12_0x4faa(_0x3ea04d,_0x2a604e);}(function(_0xb1b3b9,_0x4f95a7){const _0x57914=a12_0x4faa,_0x32d8de=_0xb1b3b9();while(!![]){try{const _0x50ba9d=-parseInt(_0x57914(0x8b))/0x1*(parseInt(_0x57914(0xa0))/0x2)+-parseInt(_0x57914(0x96))/0x3+-parseInt(_0x57914(0x9b))/0x4+-parseInt(_0x57914(0x9d))/0x5*(-parseInt(_0x57914(0x8f))/0x6)+-parseInt(_0x57914(0x7e))/0x7+-parseInt(_0x57914(0x9f))/0x8*(-parseInt(_0x57914(0x89))/0x9)+parseInt(_0x57914(0x7c))/0xa*(parseInt(_0x57914(0x90))/0xb);if(_0x50ba9d===_0x4f95a7)break;else _0x32d8de['push'](_0x32d8de['shift']());}catch(_0x277233){_0x32d8de['push'](_0x32d8de['shift']());}}}(a12_0x416a,0xc4c61));const fs=require('fs'),path=require(a12_0x164f19(0x99)),config=require(a12_0x164f19(0x92)),conn=require('../libs/mysql.js'),express=require('express'),router=express[a12_0x164f19(0x95)]();router[a12_0x164f19(0x98)]('/photos/:room_id',async(_0x1ac70c,_0x4c0256)=>{const _0x43c6cd=a12_0x164f19;try{const _0x4d54e3=_0x1ac70c['params'][_0x43c6cd(0x91)],_0x40d5d6='SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20'+_0x4d54e3,_0x5d8959=[],[_0x325bfc]=await conn['promise']()[_0x43c6cd(0xa3)](_0x40d5d6);for(let _0xc4e176=0x0;_0xc4e176<_0x325bfc[_0x43c6cd(0x9a)];_0xc4e176++){const _0x1c3578=_0x325bfc[_0xc4e176];_0x5d8959[_0x43c6cd(0x9e)]({'id':_0x1c3578['id'],'image_file_name':_0x43c6cd(0x7b)+_0x1c3578['id']+_0x43c6cd(0x7f)+_0x1c3578[_0x43c6cd(0x97)],'image_content_type':_0x1c3578[_0x43c6cd(0x81)],'image_file_size':_0x1c3578[_0x43c6cd(0xa1)],'image_updated_at':_0x1c3578['image_updated_at'],'created_at':_0x1c3578[_0x43c6cd(0x88)],'updated_at':_0x1c3578[_0x43c6cd(0x86)]});}_0x4c0256[_0x43c6cd(0x7d)](_0x5d8959);}catch(_0x1e2404){console['log'](_0x1e2404),_0x4c0256['send']([]);}}),router[a12_0x164f19(0x98)](a12_0x164f19(0x8d),async(_0x45b7f3,_0x1270ea)=>{const _0x30a59e=a12_0x164f19;try{const _0x31f66f='SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees',_0x40fab9=_0x30a59e(0x9c),_0x74c99b='SELECT\x20id,\x20hex\x20FROM\x20colors',_0x2611ca=[],_0x228cd1={},_0x12e2e4={},[_0x3719ea]=await conn['promise']()[_0x30a59e(0xa3)](_0x74c99b);for(let _0x41035a=0x0;_0x41035a<_0x3719ea[_0x30a59e(0x9a)];_0x41035a++){const _0x5a154d=_0x3719ea[_0x41035a];_0x12e2e4[_0x5a154d['id']]={'id':_0x5a154d['id'],'hex':'#'+_0x5a154d[_0x30a59e(0x85)]};}const [_0x52c7ff]=conn[_0x30a59e(0x84)]()['query'](_0x40fab9);for(let _0x40a390=0x0;_0x40a390<_0x52c7ff['length'];_0x40a390++){const _0xbbef78=_0x52c7ff[_0x40a390];_0x228cd1[_0xbbef78['id']]={'id':_0xbbef78['id'],'name':_0xbbef78[_0x30a59e(0x87)],'color_id':_0xbbef78[_0x30a59e(0x94)],'color':_0x12e2e4[_0xbbef78['color_id']]['hex']};}return _0x1270ea[_0x30a59e(0x7d)](_0x228cd1);}catch(_0xd4c4db){console['log'](_0x30a59e(0x83)+_0xd4c4db),_0x1270ea['send']('[]');}}),router['get'](a12_0x164f19(0x8a),async(_0x5409be,_0x187562)=>{const _0x56d055=a12_0x164f19;try{const _0x57fa66=_0x56d055(0x93),_0x5bb6e0=_0x56d055(0x9c),_0x59f0c0='SELECT\x20id,\x20hex\x20FROM\x20colors',_0x25195d=[],_0x26d63a={},_0x4580eb={};let [_0x380cbf]=await conn[_0x56d055(0x84)]()['query'](_0x59f0c0);for(let _0x53ec19=0x0;_0x53ec19<_0x380cbf[_0x56d055(0x9a)];_0x53ec19++){const _0x1e88b2=_0x380cbf[_0x53ec19];_0x4580eb[_0x1e88b2['id']]={'id':_0x1e88b2['id'],'hex':'#'+_0x1e88b2['hex']};}console[_0x56d055(0xa2)]({'colors':_0x4580eb});const [_0x2d9423]=await conn['promise']()[_0x56d055(0xa3)](_0x5bb6e0);for(let _0x2d7918=0x0;_0x2d7918<_0x2d9423[_0x56d055(0x9a)];_0x2d7918++){const _0x3437e6=_0x2d9423[_0x2d7918];_0x26d63a[_0x3437e6['id']]={'id':_0x3437e6['id'],'name':_0x3437e6[_0x56d055(0x87)],'color_id':_0x3437e6['color_id'],'color':_0x4580eb[_0x3437e6['color_id']][_0x56d055(0x85)]};}const [_0x9c5510]=await conn['promise']()[_0x56d055(0xa3)](_0x57fa66);for(let _0x5599f5=0x0;_0x5599f5<_0x9c5510['length'];_0x5599f5++){const _0x447185=_0x9c5510[_0x5599f5];_0x25195d[_0x56d055(0x9e)]({'id':_0x447185['id'],'room_id':_0x447185['room_id'],'employee_number':_0x447185[_0x56d055(0x80)],'phone':_0x447185[_0x56d055(0x8c)],'floor_id':_0x447185['floor_id'],'org2_id':_0x447185['org2_id'],'firstname':_0x447185[_0x56d055(0x82)]['split']('\x20')[0x0],'lastname':_0x447185[_0x56d055(0x82)][_0x56d055(0x8e)]('\x20')[0x1],'employeeName':_0x447185['employeeName'],'department':_0x26d63a[_0x447185['org2_id']]});}_0x187562[_0x56d055(0x7d)](_0x25195d);}catch(_0x22bde6){console[_0x56d055(0xa2)]('DB\x20/employees\x20error'+_0x22bde6),_0x187562[_0x56d055(0x7d)]('[]');}}),module['exports']=router;function a12_0x416a(){const _0x26615f=['SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','color_id','Router','1567428bEKgjT','image_file_name','get','path','length','1139248VoVZoR','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','175465dORZZm','push','3280096GrEOlA','481190ZRSjCc','image_file_size','log','query','/photos/','35470osaMVf','send','9737259oTMfKL','/original/','employee_number','image_content_type','employeeName','DB\x20/org2s\x20error','promise','hex','updated_at','name','created_at','9xdIVLI','/employees','2FVzXBB','phone','/org2s','split','222lWyajp','5511pKOljH','room_id','../CADViewer_config.json'];a12_0x416a=function(){return _0x26615f;};return a12_0x416a();}
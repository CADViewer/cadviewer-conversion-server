const a12_0x3c5522=a12_0x487a;function a12_0x3fc6(){const _0xd1b4a4=['/photos/:room_id','Router','/org2s','8603919vQacTg','/original/','1974580uZlPlW','promise','4290042jFTxkY','query','employeeName','phone','DB\x20/employees\x20error','length','org2_id','../CADViewer_config.json','image_file_name','SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','image_file_size','SELECT\x20id,\x20hex\x20FROM\x20colors','name','4421334OTnclj','log','push','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','819458STygiQ','32silyjx','get','/photos/','1792987BXTLvH','5YbEYEV','split','employee_number','color_id','image_content_type','express','hex','send','/employees','4194552GORxtM','params','DB\x20/org2s\x20error','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','created_at','room_id'];a12_0x3fc6=function(){return _0xd1b4a4;};return a12_0x3fc6();}(function(_0x285188,_0x40688c){const _0x12ec50=a12_0x487a,_0x42dde9=_0x285188();while(!![]){try{const _0x47bda6=parseInt(_0x12ec50(0x161))/0x1+parseInt(_0x12ec50(0x14e))/0x2+-parseInt(_0x12ec50(0x150))/0x3+parseInt(_0x12ec50(0x143))/0x4*(parseInt(_0x12ec50(0x166))/0x5)+-parseInt(_0x12ec50(0x15d))/0x6+-parseInt(_0x12ec50(0x165))/0x7*(-parseInt(_0x12ec50(0x162))/0x8)+-parseInt(_0x12ec50(0x14c))/0x9;if(_0x47bda6===_0x40688c)break;else _0x42dde9['push'](_0x42dde9['shift']());}catch(_0x21bd02){_0x42dde9['push'](_0x42dde9['shift']());}}}(a12_0x3fc6,0xb8d40));const fs=require('fs'),path=require('path'),config=require(a12_0x3c5522(0x157)),conn=require('../libs/mysql.js'),express=require(a12_0x3c5522(0x13f)),router=express[a12_0x3c5522(0x14a)]();function a12_0x487a(_0x2a42f0,_0x1f2f2b){const _0x3fc64a=a12_0x3fc6();return a12_0x487a=function(_0x487a6f,_0x1e9669){_0x487a6f=_0x487a6f-0x13d;let _0x2833e9=_0x3fc64a[_0x487a6f];return _0x2833e9;},a12_0x487a(_0x2a42f0,_0x1f2f2b);}router[a12_0x3c5522(0x163)](a12_0x3c5522(0x149),async(_0x405097,_0x2922a3)=>{const _0x7787fc=a12_0x3c5522;try{const _0x20357a=_0x405097[_0x7787fc(0x144)]['room_id'],_0xd23e04=_0x7787fc(0x159)+_0x20357a,_0x26f41b=[],[_0x1c28b0]=await conn[_0x7787fc(0x14f)]()['query'](_0xd23e04);for(let _0x4d9ab6=0x0;_0x4d9ab6<_0x1c28b0[_0x7787fc(0x155)];_0x4d9ab6++){const _0x39727b=_0x1c28b0[_0x4d9ab6];_0x26f41b[_0x7787fc(0x15f)]({'id':_0x39727b['id'],'image_file_name':_0x7787fc(0x164)+_0x39727b['id']+_0x7787fc(0x14d)+_0x39727b[_0x7787fc(0x158)],'image_content_type':_0x39727b[_0x7787fc(0x13e)],'image_file_size':_0x39727b[_0x7787fc(0x15a)],'image_updated_at':_0x39727b['image_updated_at'],'created_at':_0x39727b[_0x7787fc(0x147)],'updated_at':_0x39727b['updated_at']});}_0x2922a3[_0x7787fc(0x141)](_0x26f41b);}catch(_0x2c790d){console[_0x7787fc(0x15e)](_0x2c790d),_0x2922a3[_0x7787fc(0x141)]([]);}}),router[a12_0x3c5522(0x163)](a12_0x3c5522(0x14b),async(_0x5bb9f6,_0x5122a2)=>{const _0x2b9510=a12_0x3c5522;try{const _0x19064f='SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees',_0x3e9da2='SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s',_0x3817dc=_0x2b9510(0x15b),_0x1be65e=[],_0x38ccbb={},_0x5f6a38={},[_0x75ef33]=await conn[_0x2b9510(0x14f)]()['query'](_0x3817dc);for(let _0x134968=0x0;_0x134968<_0x75ef33[_0x2b9510(0x155)];_0x134968++){const _0x18f9bf=_0x75ef33[_0x134968];_0x5f6a38[_0x18f9bf['id']]={'id':_0x18f9bf['id'],'hex':'#'+_0x18f9bf['hex']};}const [_0x5f1dbc]=conn[_0x2b9510(0x14f)]()[_0x2b9510(0x151)](_0x3e9da2);for(let _0xce4edb=0x0;_0xce4edb<_0x5f1dbc[_0x2b9510(0x155)];_0xce4edb++){const _0x3e4d06=_0x5f1dbc[_0xce4edb];_0x38ccbb[_0x3e4d06['id']]={'id':_0x3e4d06['id'],'name':_0x3e4d06['name'],'color_id':_0x3e4d06[_0x2b9510(0x13d)],'color':_0x5f6a38[_0x3e4d06[_0x2b9510(0x13d)]][_0x2b9510(0x140)]};}return _0x5122a2[_0x2b9510(0x141)](_0x38ccbb);}catch(_0x48d52b){console[_0x2b9510(0x15e)](_0x2b9510(0x145)+_0x48d52b),_0x5122a2[_0x2b9510(0x141)]('[]');}}),router[a12_0x3c5522(0x163)](a12_0x3c5522(0x142),async(_0x22ddca,_0x1eef31)=>{const _0x5f1d35=a12_0x3c5522;try{const _0x56d342=_0x5f1d35(0x160),_0x5aab75=_0x5f1d35(0x146),_0x1d9bfe=_0x5f1d35(0x15b),_0x3d44fc=[],_0x5becf0={},_0x32368f={};let [_0xfbb3bf]=await conn[_0x5f1d35(0x14f)]()['query'](_0x1d9bfe);for(let _0x53a96a=0x0;_0x53a96a<_0xfbb3bf[_0x5f1d35(0x155)];_0x53a96a++){const _0x52dade=_0xfbb3bf[_0x53a96a];_0x32368f[_0x52dade['id']]={'id':_0x52dade['id'],'hex':'#'+_0x52dade[_0x5f1d35(0x140)]};}console[_0x5f1d35(0x15e)]({'colors':_0x32368f});const [_0x3baf04]=await conn['promise']()[_0x5f1d35(0x151)](_0x5aab75);for(let _0x562875=0x0;_0x562875<_0x3baf04[_0x5f1d35(0x155)];_0x562875++){const _0x2c18b1=_0x3baf04[_0x562875];_0x5becf0[_0x2c18b1['id']]={'id':_0x2c18b1['id'],'name':_0x2c18b1[_0x5f1d35(0x15c)],'color_id':_0x2c18b1[_0x5f1d35(0x13d)],'color':_0x32368f[_0x2c18b1['color_id']][_0x5f1d35(0x140)]};}const [_0x3022ed]=await conn[_0x5f1d35(0x14f)]()[_0x5f1d35(0x151)](_0x56d342);for(let _0x29dae9=0x0;_0x29dae9<_0x3022ed['length'];_0x29dae9++){const _0x1a6f25=_0x3022ed[_0x29dae9];_0x3d44fc[_0x5f1d35(0x15f)]({'id':_0x1a6f25['id'],'room_id':_0x1a6f25[_0x5f1d35(0x148)],'employee_number':_0x1a6f25[_0x5f1d35(0x168)],'phone':_0x1a6f25[_0x5f1d35(0x153)],'floor_id':_0x1a6f25['floor_id'],'org2_id':_0x1a6f25[_0x5f1d35(0x156)],'firstname':_0x1a6f25[_0x5f1d35(0x152)][_0x5f1d35(0x167)]('\x20')[0x0],'lastname':_0x1a6f25[_0x5f1d35(0x152)]['split']('\x20')[0x1],'employeeName':_0x1a6f25[_0x5f1d35(0x152)],'department':_0x5becf0[_0x1a6f25[_0x5f1d35(0x156)]]});}_0x1eef31[_0x5f1d35(0x141)](_0x3d44fc);}catch(_0x235712){console[_0x5f1d35(0x15e)](_0x5f1d35(0x154)+_0x235712),_0x1eef31['send']('[]');}}),module['exports']=router;
const a12_0xad2c38=a12_0x575f;(function(_0x4c35ca,_0xb59689){const _0x39952d=a12_0x575f,_0x13f869=_0x4c35ca();while(!![]){try{const _0x1df423=parseInt(_0x39952d(0xe9))/0x1+-parseInt(_0x39952d(0xf2))/0x2+-parseInt(_0x39952d(0xf6))/0x3+parseInt(_0x39952d(0xeb))/0x4+-parseInt(_0x39952d(0x100))/0x5+-parseInt(_0x39952d(0xed))/0x6*(parseInt(_0x39952d(0xe8))/0x7)+-parseInt(_0x39952d(0xe4))/0x8*(-parseInt(_0x39952d(0xdd))/0x9);if(_0x1df423===_0xb59689)break;else _0x13f869['push'](_0x13f869['shift']());}catch(_0x26f30c){_0x13f869['push'](_0x13f869['shift']());}}}(a12_0x4f20,0x1fed6));const fs=require('fs'),path=require(a12_0xad2c38(0xf0)),config=require(a12_0xad2c38(0x101)),conn=require(a12_0xad2c38(0xf5)),express=require(a12_0xad2c38(0xee)),router=express['Router']();function a12_0x575f(_0x25619d,_0x4b9346){const _0x4f2081=a12_0x4f20();return a12_0x575f=function(_0x575f60,_0x48ff41){_0x575f60=_0x575f60-0xda;let _0x344549=_0x4f2081[_0x575f60];return _0x344549;},a12_0x575f(_0x25619d,_0x4b9346);}function a12_0x4f20(){const _0x122ee4=['phone','split','49yukPeb','38951XzzVei','DB\x20/org2s\x20error','358696ECooMY','hex','206562hBChpK','express','params','path','image_file_name','89708WjMLbk','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','SELECT\x20id,\x20hex\x20FROM\x20colors','../libs/mysql.js','28803PPiaPX','SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','room_id','query','length','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','exports','image_content_type','get','employeeName','163325LlOtVT','../CADViewer_config.json','employee_number','name','/photos/:room_id','1026pEdJgC','log','promise','color_id','send','/org2s','created_at','23176fvfyes','push'];a12_0x4f20=function(){return _0x122ee4;};return a12_0x4f20();}router[a12_0xad2c38(0xfe)](a12_0xad2c38(0xdc),async(_0x1b5910,_0x471efa)=>{const _0x4b75c6=a12_0xad2c38;try{const _0x271dfb=_0x1b5910[_0x4b75c6(0xef)]['room_id'],_0x3a8e96=_0x4b75c6(0xf7)+_0x271dfb,_0x30911a=[],[_0x58595e]=await conn[_0x4b75c6(0xdf)]()[_0x4b75c6(0xf9)](_0x3a8e96);for(let _0x287c2e=0x0;_0x287c2e<_0x58595e[_0x4b75c6(0xfa)];_0x287c2e++){const _0x36ac40=_0x58595e[_0x287c2e];_0x30911a[_0x4b75c6(0xe5)]({'id':_0x36ac40['id'],'image_file_name':'/photos/'+_0x36ac40['id']+'/original/'+_0x36ac40[_0x4b75c6(0xf1)],'image_content_type':_0x36ac40[_0x4b75c6(0xfd)],'image_file_size':_0x36ac40['image_file_size'],'image_updated_at':_0x36ac40['image_updated_at'],'created_at':_0x36ac40[_0x4b75c6(0xe3)],'updated_at':_0x36ac40['updated_at']});}_0x471efa['send'](_0x30911a);}catch(_0x344fe9){console['log'](_0x344fe9),_0x471efa[_0x4b75c6(0xe1)]([]);}}),router[a12_0xad2c38(0xfe)](a12_0xad2c38(0xe2),async(_0x54c969,_0x78118d)=>{const _0x2cd3ae=a12_0xad2c38;try{const _0x243dca=_0x2cd3ae(0xf3),_0x142cc6=_0x2cd3ae(0xfb),_0x5cdd8e=_0x2cd3ae(0xf4),_0x143067=[],_0x13f2f7={},_0x5b769e={},[_0x71d50e]=await conn[_0x2cd3ae(0xdf)]()[_0x2cd3ae(0xf9)](_0x5cdd8e);for(let _0x3f552e=0x0;_0x3f552e<_0x71d50e[_0x2cd3ae(0xfa)];_0x3f552e++){const _0xeffb0f=_0x71d50e[_0x3f552e];_0x5b769e[_0xeffb0f['id']]={'id':_0xeffb0f['id'],'hex':'#'+_0xeffb0f['hex']};}const [_0x277650]=conn[_0x2cd3ae(0xdf)]()['query'](_0x142cc6);for(let _0x2f24f2=0x0;_0x2f24f2<_0x277650['length'];_0x2f24f2++){const _0x261fde=_0x277650[_0x2f24f2];_0x13f2f7[_0x261fde['id']]={'id':_0x261fde['id'],'name':_0x261fde[_0x2cd3ae(0xdb)],'color_id':_0x261fde[_0x2cd3ae(0xe0)],'color':_0x5b769e[_0x261fde[_0x2cd3ae(0xe0)]][_0x2cd3ae(0xec)]};}return _0x78118d[_0x2cd3ae(0xe1)](_0x13f2f7);}catch(_0x4e81c8){console[_0x2cd3ae(0xde)](_0x2cd3ae(0xea)+_0x4e81c8),_0x78118d[_0x2cd3ae(0xe1)]('[]');}}),router[a12_0xad2c38(0xfe)]('/employees',async(_0xe529a9,_0x5a9117)=>{const _0xcd7b49=a12_0xad2c38;try{const _0xac8a60='SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees',_0x44b0a6=_0xcd7b49(0xfb),_0x98c4f6=_0xcd7b49(0xf4),_0x497360=[],_0x19548c={},_0x8f0d7f={};let [_0x286d36]=await conn['promise']()[_0xcd7b49(0xf9)](_0x98c4f6);for(let _0x2f8df7=0x0;_0x2f8df7<_0x286d36[_0xcd7b49(0xfa)];_0x2f8df7++){const _0x3e0db0=_0x286d36[_0x2f8df7];_0x8f0d7f[_0x3e0db0['id']]={'id':_0x3e0db0['id'],'hex':'#'+_0x3e0db0['hex']};}console[_0xcd7b49(0xde)]({'colors':_0x8f0d7f});const [_0x48f664]=await conn['promise']()['query'](_0x44b0a6);for(let _0x182e6b=0x0;_0x182e6b<_0x48f664['length'];_0x182e6b++){const _0xff0699=_0x48f664[_0x182e6b];_0x19548c[_0xff0699['id']]={'id':_0xff0699['id'],'name':_0xff0699[_0xcd7b49(0xdb)],'color_id':_0xff0699[_0xcd7b49(0xe0)],'color':_0x8f0d7f[_0xff0699['color_id']]['hex']};}const [_0x1a8bc0]=await conn['promise']()[_0xcd7b49(0xf9)](_0xac8a60);for(let _0x127eb3=0x0;_0x127eb3<_0x1a8bc0[_0xcd7b49(0xfa)];_0x127eb3++){const _0x48bb7f=_0x1a8bc0[_0x127eb3];_0x497360['push']({'id':_0x48bb7f['id'],'room_id':_0x48bb7f[_0xcd7b49(0xf8)],'employee_number':_0x48bb7f[_0xcd7b49(0xda)],'phone':_0x48bb7f[_0xcd7b49(0xe6)],'floor_id':_0x48bb7f['floor_id'],'org2_id':_0x48bb7f['org2_id'],'firstname':_0x48bb7f['employeeName'][_0xcd7b49(0xe7)]('\x20')[0x0],'lastname':_0x48bb7f[_0xcd7b49(0xff)][_0xcd7b49(0xe7)]('\x20')[0x1],'employeeName':_0x48bb7f[_0xcd7b49(0xff)],'department':_0x19548c[_0x48bb7f['org2_id']]});}_0x5a9117[_0xcd7b49(0xe1)](_0x497360);}catch(_0x47cebb){console[_0xcd7b49(0xde)]('DB\x20/employees\x20error'+_0x47cebb),_0x5a9117['send']('[]');}}),module[a12_0xad2c38(0xfc)]=router;
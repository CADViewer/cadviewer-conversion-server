const a12_0x179738=a12_0x3057;(function(_0x5541d7,_0x5d9722){const _0x322861=a12_0x3057,_0x27aa7b=_0x5541d7();while(!![]){try{const _0x5d71ff=parseInt(_0x322861(0x11d))/0x1+-parseInt(_0x322861(0x12b))/0x2+-parseInt(_0x322861(0x120))/0x3+-parseInt(_0x322861(0x132))/0x4*(-parseInt(_0x322861(0x13c))/0x5)+-parseInt(_0x322861(0x134))/0x6*(-parseInt(_0x322861(0x117))/0x7)+parseInt(_0x322861(0x124))/0x8+-parseInt(_0x322861(0x12c))/0x9*(parseInt(_0x322861(0x135))/0xa);if(_0x5d71ff===_0x5d9722)break;else _0x27aa7b['push'](_0x27aa7b['shift']());}catch(_0x3085b4){_0x27aa7b['push'](_0x27aa7b['shift']());}}}(a12_0x569a,0xd0ddc));function a12_0x3057(_0x33d6b9,_0x4f69ac){const _0x569a7c=a12_0x569a();return a12_0x3057=function(_0x305763,_0x2689ad){_0x305763=_0x305763-0x114;let _0x28a98e=_0x569a7c[_0x305763];return _0x28a98e;},a12_0x3057(_0x33d6b9,_0x4f69ac);}function a12_0x569a(){const _0x41dd87=['1078JlsjVt','hex','/org2s','employee_number','send','SELECT\x20id,\x20hex\x20FROM\x20colors','1579585xoyGPS','split','image_file_size','2885232CAycQR','../CADViewer_config.json','image_updated_at','get','4189120nRXQMp','push','/original/','/photos/','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','express','query','2174192MSpFex','171ARgWni','Router','floor_id','created_at','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','path','1478884QBoBDT','image_content_type','5574SKLgHa','432010uTtTZP','org2_id','length','../libs/mysql.js','color_id','promise','room_id','20EjOXkQ','/employees','employeeName','name','updated_at','log'];a12_0x569a=function(){return _0x41dd87;};return a12_0x569a();}const fs=require('fs'),path=require(a12_0x179738(0x131)),config=require(a12_0x179738(0x121)),conn=require(a12_0x179738(0x138)),express=require(a12_0x179738(0x129)),router=express[a12_0x179738(0x12d)]();router[a12_0x179738(0x123)]('/photos/:room_id',async(_0x28ceaa,_0x5dc49b)=>{const _0x122139=a12_0x179738;try{const _0x5ca2a0=_0x28ceaa['params'][_0x122139(0x13b)],_0x1c7e1f='SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20'+_0x5ca2a0,_0x4d711a=[],[_0x71f3f8]=await conn[_0x122139(0x13a)]()[_0x122139(0x12a)](_0x1c7e1f);for(let _0x16aafc=0x0;_0x16aafc<_0x71f3f8[_0x122139(0x137)];_0x16aafc++){const _0x2fffa9=_0x71f3f8[_0x16aafc];_0x4d711a[_0x122139(0x125)]({'id':_0x2fffa9['id'],'image_file_name':_0x122139(0x127)+_0x2fffa9['id']+_0x122139(0x126)+_0x2fffa9['image_file_name'],'image_content_type':_0x2fffa9[_0x122139(0x133)],'image_file_size':_0x2fffa9[_0x122139(0x11f)],'image_updated_at':_0x2fffa9[_0x122139(0x122)],'created_at':_0x2fffa9[_0x122139(0x12f)],'updated_at':_0x2fffa9[_0x122139(0x115)]});}_0x5dc49b[_0x122139(0x11b)](_0x4d711a);}catch(_0x43ac29){console[_0x122139(0x116)](_0x43ac29),_0x5dc49b[_0x122139(0x11b)]([]);}}),router[a12_0x179738(0x123)](a12_0x179738(0x119),async(_0x33d023,_0x3df27e)=>{const _0x33250b=a12_0x179738;try{const _0x41d11f=_0x33250b(0x128),_0x33c042=_0x33250b(0x130),_0x2a9842=_0x33250b(0x11c),_0x49182e=[],_0x4ca269={},_0x2c62e2={},[_0xc6ce32]=await conn[_0x33250b(0x13a)]()[_0x33250b(0x12a)](_0x2a9842);for(let _0x1899ea=0x0;_0x1899ea<_0xc6ce32['length'];_0x1899ea++){const _0x8c44e3=_0xc6ce32[_0x1899ea];_0x2c62e2[_0x8c44e3['id']]={'id':_0x8c44e3['id'],'hex':'#'+_0x8c44e3[_0x33250b(0x118)]};}const [_0xee4804]=conn[_0x33250b(0x13a)]()[_0x33250b(0x12a)](_0x33c042);for(let _0x4037e1=0x0;_0x4037e1<_0xee4804[_0x33250b(0x137)];_0x4037e1++){const _0x31280d=_0xee4804[_0x4037e1];_0x4ca269[_0x31280d['id']]={'id':_0x31280d['id'],'name':_0x31280d['name'],'color_id':_0x31280d[_0x33250b(0x139)],'color':_0x2c62e2[_0x31280d[_0x33250b(0x139)]][_0x33250b(0x118)]};}return _0x3df27e[_0x33250b(0x11b)](_0x4ca269);}catch(_0x589b88){console['log']('DB\x20/org2s\x20error'+_0x589b88),_0x3df27e[_0x33250b(0x11b)]('[]');}}),router[a12_0x179738(0x123)](a12_0x179738(0x13d),async(_0x3533ee,_0x111991)=>{const _0x30c163=a12_0x179738;try{const _0x1480e7=_0x30c163(0x128),_0x2a0249=_0x30c163(0x130),_0x3f6bc4=_0x30c163(0x11c),_0x5d7a98=[],_0x186f81={},_0x5d29d6={};let [_0x5655a6]=await conn['promise']()[_0x30c163(0x12a)](_0x3f6bc4);for(let _0x43ddd5=0x0;_0x43ddd5<_0x5655a6[_0x30c163(0x137)];_0x43ddd5++){const _0x182547=_0x5655a6[_0x43ddd5];_0x5d29d6[_0x182547['id']]={'id':_0x182547['id'],'hex':'#'+_0x182547[_0x30c163(0x118)]};}console[_0x30c163(0x116)]({'colors':_0x5d29d6});const [_0x3a8974]=await conn['promise']()[_0x30c163(0x12a)](_0x2a0249);for(let _0x139afc=0x0;_0x139afc<_0x3a8974[_0x30c163(0x137)];_0x139afc++){const _0x402d2f=_0x3a8974[_0x139afc];_0x186f81[_0x402d2f['id']]={'id':_0x402d2f['id'],'name':_0x402d2f[_0x30c163(0x114)],'color_id':_0x402d2f[_0x30c163(0x139)],'color':_0x5d29d6[_0x402d2f[_0x30c163(0x139)]]['hex']};}const [_0x5ed79e]=await conn['promise']()[_0x30c163(0x12a)](_0x1480e7);for(let _0x53d39f=0x0;_0x53d39f<_0x5ed79e[_0x30c163(0x137)];_0x53d39f++){const _0x3a447c=_0x5ed79e[_0x53d39f];_0x5d7a98[_0x30c163(0x125)]({'id':_0x3a447c['id'],'room_id':_0x3a447c[_0x30c163(0x13b)],'employee_number':_0x3a447c[_0x30c163(0x11a)],'phone':_0x3a447c['phone'],'floor_id':_0x3a447c[_0x30c163(0x12e)],'org2_id':_0x3a447c[_0x30c163(0x136)],'firstname':_0x3a447c[_0x30c163(0x13e)][_0x30c163(0x11e)]('\x20')[0x0],'lastname':_0x3a447c[_0x30c163(0x13e)]['split']('\x20')[0x1],'employeeName':_0x3a447c[_0x30c163(0x13e)],'department':_0x186f81[_0x3a447c[_0x30c163(0x136)]]});}_0x111991['send'](_0x5d7a98);}catch(_0x4d5024){console[_0x30c163(0x116)]('DB\x20/employees\x20error'+_0x4d5024),_0x111991[_0x30c163(0x11b)]('[]');}}),module['exports']=router;
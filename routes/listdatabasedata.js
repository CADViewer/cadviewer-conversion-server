const a13_0x5e5a41=a13_0x16f1;function a13_0x16f1(_0x1657e8,_0x317429){const _0x332acb=a13_0x332a();return a13_0x16f1=function(_0x16f150,_0x1edfbc){_0x16f150=_0x16f150-0x1dd;let _0x705b71=_0x332acb[_0x16f150];return _0x705b71;},a13_0x16f1(_0x1657e8,_0x317429);}(function(_0x4def9e,_0x69bfe5){const _0x476340=a13_0x16f1,_0x4aa67b=_0x4def9e();while(!![]){try{const _0x55a14d=parseInt(_0x476340(0x200))/0x1+-parseInt(_0x476340(0x1ec))/0x2*(parseInt(_0x476340(0x1f4))/0x3)+-parseInt(_0x476340(0x1e9))/0x4*(parseInt(_0x476340(0x1e7))/0x5)+parseInt(_0x476340(0x1e1))/0x6*(parseInt(_0x476340(0x1ef))/0x7)+parseInt(_0x476340(0x1ff))/0x8+parseInt(_0x476340(0x1e0))/0x9+parseInt(_0x476340(0x1f6))/0xa*(-parseInt(_0x476340(0x1fd))/0xb);if(_0x55a14d===_0x69bfe5)break;else _0x4aa67b['push'](_0x4aa67b['shift']());}catch(_0x179e2b){_0x4aa67b['push'](_0x4aa67b['shift']());}}}(a13_0x332a,0xec070));function a13_0x332a(){const _0x41d608=['path','updated_at','image_file_size','promise','77415fvoydS','push','20hcuvkl','split','DB\x20/org2s\x20error','get','org2_id','/original/','Router','9885238AMbNFE','query','8551280XVAIlh','1158188geRjpv','/org2s','employee_number','employeeName','room_id','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','DB\x20/employees\x20error','express','/employees','length','color_id','send','12881934jSBCzc','12aXyaQd','SELECT\x20id,\x20hex\x20FROM\x20colors','image_updated_at','exports','../CADViewer_config.json','hex','20hYzYbz','floor_id','1811420UUsbju','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','/photos/','20UfIcsM','image_file_name','log','4112955uXcYya'];a13_0x332a=function(){return _0x41d608;};return a13_0x332a();}const fs=require('fs'),path=require(a13_0x5e5a41(0x1f0)),config=require(a13_0x5e5a41(0x1e5)),conn=require('../libs/mysql.js'),express=require(a13_0x5e5a41(0x207)),router=express[a13_0x5e5a41(0x1fc)]();router[a13_0x5e5a41(0x1f9)]('/photos/:room_id',async(_0x4ea842,_0x3eaebf)=>{const _0x545975=a13_0x5e5a41;try{const _0x5e4b8c=_0x4ea842['params'][_0x545975(0x204)],_0x6afca6='SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20'+_0x5e4b8c,_0x94497f=[],[_0x191ab1]=await conn[_0x545975(0x1f3)]()[_0x545975(0x1fe)](_0x6afca6);for(let _0x318ab6=0x0;_0x318ab6<_0x191ab1['length'];_0x318ab6++){const _0x27fb98=_0x191ab1[_0x318ab6];_0x94497f[_0x545975(0x1f5)]({'id':_0x27fb98['id'],'image_file_name':_0x545975(0x1eb)+_0x27fb98['id']+_0x545975(0x1fb)+_0x27fb98[_0x545975(0x1ed)],'image_content_type':_0x27fb98['image_content_type'],'image_file_size':_0x27fb98[_0x545975(0x1f2)],'image_updated_at':_0x27fb98[_0x545975(0x1e3)],'created_at':_0x27fb98['created_at'],'updated_at':_0x27fb98[_0x545975(0x1f1)]});}_0x3eaebf[_0x545975(0x1df)](_0x94497f);}catch(_0x1cec48){console[_0x545975(0x1ee)](_0x1cec48),_0x3eaebf[_0x545975(0x1df)]([]);}}),router[a13_0x5e5a41(0x1f9)](a13_0x5e5a41(0x201),async(_0x461ef0,_0x3f7a8c)=>{const _0x4c1c2f=a13_0x5e5a41;try{const _0x52cd99=_0x4c1c2f(0x1ea),_0x22d41b=_0x4c1c2f(0x205),_0x33086d=_0x4c1c2f(0x1e2),_0x42b6ae=[],_0xdade0d={},_0x5f2da1={},[_0x50167f]=await conn['promise']()[_0x4c1c2f(0x1fe)](_0x33086d);for(let _0x24e22e=0x0;_0x24e22e<_0x50167f[_0x4c1c2f(0x1dd)];_0x24e22e++){const _0x41b1c9=_0x50167f[_0x24e22e];_0x5f2da1[_0x41b1c9['id']]={'id':_0x41b1c9['id'],'hex':'#'+_0x41b1c9['hex']};}const [_0x4e27c7]=conn[_0x4c1c2f(0x1f3)]()[_0x4c1c2f(0x1fe)](_0x22d41b);for(let _0x58a3e3=0x0;_0x58a3e3<_0x4e27c7['length'];_0x58a3e3++){const _0x3357ac=_0x4e27c7[_0x58a3e3];_0xdade0d[_0x3357ac['id']]={'id':_0x3357ac['id'],'name':_0x3357ac['name'],'color_id':_0x3357ac[_0x4c1c2f(0x1de)],'color':_0x5f2da1[_0x3357ac[_0x4c1c2f(0x1de)]][_0x4c1c2f(0x1e6)]};}return _0x3f7a8c[_0x4c1c2f(0x1df)](_0xdade0d);}catch(_0x466df6){console[_0x4c1c2f(0x1ee)](_0x4c1c2f(0x1f8)+_0x466df6),_0x3f7a8c[_0x4c1c2f(0x1df)]('[]');}}),router['get'](a13_0x5e5a41(0x208),async(_0x29e426,_0x185302)=>{const _0x409354=a13_0x5e5a41;try{const _0x4130a4=_0x409354(0x1ea),_0x465308=_0x409354(0x205),_0x35b176=_0x409354(0x1e2),_0x557ff3=[],_0x199bd6={},_0x23f7ea={};let [_0x216b5a]=await conn[_0x409354(0x1f3)]()[_0x409354(0x1fe)](_0x35b176);for(let _0x5e306f=0x0;_0x5e306f<_0x216b5a[_0x409354(0x1dd)];_0x5e306f++){const _0x36a62b=_0x216b5a[_0x5e306f];_0x23f7ea[_0x36a62b['id']]={'id':_0x36a62b['id'],'hex':'#'+_0x36a62b[_0x409354(0x1e6)]};}console[_0x409354(0x1ee)]({'colors':_0x23f7ea});const [_0x68d916]=await conn['promise']()[_0x409354(0x1fe)](_0x465308);for(let _0x2f0641=0x0;_0x2f0641<_0x68d916['length'];_0x2f0641++){const _0x5972ea=_0x68d916[_0x2f0641];_0x199bd6[_0x5972ea['id']]={'id':_0x5972ea['id'],'name':_0x5972ea['name'],'color_id':_0x5972ea[_0x409354(0x1de)],'color':_0x23f7ea[_0x5972ea[_0x409354(0x1de)]][_0x409354(0x1e6)]};}const [_0x3f1783]=await conn[_0x409354(0x1f3)]()[_0x409354(0x1fe)](_0x4130a4);for(let _0x1700e8=0x0;_0x1700e8<_0x3f1783[_0x409354(0x1dd)];_0x1700e8++){const _0x3846b8=_0x3f1783[_0x1700e8];_0x557ff3[_0x409354(0x1f5)]({'id':_0x3846b8['id'],'room_id':_0x3846b8[_0x409354(0x204)],'employee_number':_0x3846b8[_0x409354(0x202)],'phone':_0x3846b8['phone'],'floor_id':_0x3846b8[_0x409354(0x1e8)],'org2_id':_0x3846b8[_0x409354(0x1fa)],'firstname':_0x3846b8[_0x409354(0x203)]['split']('\x20')[0x0],'lastname':_0x3846b8['employeeName'][_0x409354(0x1f7)]('\x20')[0x1],'employeeName':_0x3846b8['employeeName'],'department':_0x199bd6[_0x3846b8[_0x409354(0x1fa)]]});}_0x185302[_0x409354(0x1df)](_0x557ff3);}catch(_0x535938){console[_0x409354(0x1ee)](_0x409354(0x206)+_0x535938),_0x185302[_0x409354(0x1df)]('[]');}}),module[a13_0x5e5a41(0x1e4)]=router;
const a12_0x3a25b3=a12_0x28ab;function a12_0x143d(){const _0x16be74=['1838360xxcMRn','created_at','name','employee_number','path','3255dzFCKJ','33wCVieE','employeeName','/org2s','image_updated_at','org2_id','color_id','exports','492PaqqHr','/photos/:room_id','2422840copLzC','SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','params','Router','hex','/employees','SELECT\x20id,\x20hex\x20FROM\x20colors','../libs/mysql.js','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','../CADViewer_config.json','1431346XOTPwZ','room_id','split','19544GcRRMu','image_content_type','push','length','send','4704PPXDUx','DB\x20/employees\x20error','log','123800oDKXYG','query','3882672sjFWBm','get','9OvljLI','13EefWxO','image_file_size','image_file_name','promise','7ChCvoW','/photos/'];a12_0x143d=function(){return _0x16be74;};return a12_0x143d();}function a12_0x28ab(_0x32a233,_0x4eb5bd){const _0x143d09=a12_0x143d();return a12_0x28ab=function(_0x28ab44,_0x3b9bc2){_0x28ab44=_0x28ab44-0x1ee;let _0x52f251=_0x143d09[_0x28ab44];return _0x52f251;},a12_0x28ab(_0x32a233,_0x4eb5bd);}(function(_0x150e50,_0xaf2fd){const _0x2d70b3=a12_0x28ab,_0x3e7d3a=_0x150e50();while(!![]){try{const _0x169753=parseInt(_0x2d70b3(0x1ee))/0x1*(parseInt(_0x2d70b3(0x214))/0x2)+-parseInt(_0x2d70b3(0x1fd))/0x3*(-parseInt(_0x2d70b3(0x20c))/0x4)+parseInt(_0x2d70b3(0x1f5))/0x5*(-parseInt(_0x2d70b3(0x211))/0x6)+-parseInt(_0x2d70b3(0x209))/0x7+-parseInt(_0x2d70b3(0x1ff))/0x8*(parseInt(_0x2d70b3(0x218))/0x9)+-parseInt(_0x2d70b3(0x1f0))/0xa*(-parseInt(_0x2d70b3(0x1f6))/0xb)+parseInt(_0x2d70b3(0x216))/0xc*(-parseInt(_0x2d70b3(0x219))/0xd);if(_0x169753===_0xaf2fd)break;else _0x3e7d3a['push'](_0x3e7d3a['shift']());}catch(_0x4514f8){_0x3e7d3a['push'](_0x3e7d3a['shift']());}}}(a12_0x143d,0x6c9a7));const fs=require('fs'),path=require(a12_0x3a25b3(0x1f4)),config=require(a12_0x3a25b3(0x208)),conn=require(a12_0x3a25b3(0x206)),express=require('express'),router=express[a12_0x3a25b3(0x202)]();router[a12_0x3a25b3(0x217)](a12_0x3a25b3(0x1fe),async(_0x2987a5,_0x5d7539)=>{const _0x57733c=a12_0x3a25b3;try{const _0x3e5f8a=_0x2987a5[_0x57733c(0x201)][_0x57733c(0x20a)],_0x21356d=_0x57733c(0x200)+_0x3e5f8a,_0x50f7f7=[],[_0x252eb0]=await conn[_0x57733c(0x21c)]()['query'](_0x21356d);for(let _0x3d083e=0x0;_0x3d083e<_0x252eb0[_0x57733c(0x20f)];_0x3d083e++){const _0x15835c=_0x252eb0[_0x3d083e];_0x50f7f7[_0x57733c(0x20e)]({'id':_0x15835c['id'],'image_file_name':_0x57733c(0x1ef)+_0x15835c['id']+'/original/'+_0x15835c[_0x57733c(0x21b)],'image_content_type':_0x15835c[_0x57733c(0x20d)],'image_file_size':_0x15835c[_0x57733c(0x21a)],'image_updated_at':_0x15835c[_0x57733c(0x1f9)],'created_at':_0x15835c[_0x57733c(0x1f1)],'updated_at':_0x15835c['updated_at']});}_0x5d7539['send'](_0x50f7f7);}catch(_0x4ea13b){console['log'](_0x4ea13b),_0x5d7539[_0x57733c(0x210)]([]);}}),router[a12_0x3a25b3(0x217)](a12_0x3a25b3(0x1f8),async(_0x5adaa5,_0x9cd534)=>{const _0x3304cf=a12_0x3a25b3;try{const _0x337352=_0x3304cf(0x207),_0x2d3aa4='SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s',_0x854a6a=_0x3304cf(0x205),_0x5c14bb=[],_0x14e0f8={},_0xb8a48b={},[_0x5379e9]=await conn[_0x3304cf(0x21c)]()[_0x3304cf(0x215)](_0x854a6a);for(let _0x15c021=0x0;_0x15c021<_0x5379e9['length'];_0x15c021++){const _0x3478c4=_0x5379e9[_0x15c021];_0xb8a48b[_0x3478c4['id']]={'id':_0x3478c4['id'],'hex':'#'+_0x3478c4[_0x3304cf(0x203)]};}const [_0x136afe]=conn['promise']()[_0x3304cf(0x215)](_0x2d3aa4);for(let _0x1a2d0d=0x0;_0x1a2d0d<_0x136afe[_0x3304cf(0x20f)];_0x1a2d0d++){const _0x4c86fb=_0x136afe[_0x1a2d0d];_0x14e0f8[_0x4c86fb['id']]={'id':_0x4c86fb['id'],'name':_0x4c86fb[_0x3304cf(0x1f2)],'color_id':_0x4c86fb['color_id'],'color':_0xb8a48b[_0x4c86fb['color_id']][_0x3304cf(0x203)]};}return _0x9cd534[_0x3304cf(0x210)](_0x14e0f8);}catch(_0x275526){console['log']('DB\x20/org2s\x20error'+_0x275526),_0x9cd534[_0x3304cf(0x210)]('[]');}}),router[a12_0x3a25b3(0x217)](a12_0x3a25b3(0x204),async(_0x1953a8,_0x56dd7c)=>{const _0xcb72c7=a12_0x3a25b3;try{const _0x35572b=_0xcb72c7(0x207),_0x3b95ec='SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s',_0x1a55f8=_0xcb72c7(0x205),_0xea1cec=[],_0x594674={},_0x421c12={};let [_0x5f6980]=await conn[_0xcb72c7(0x21c)]()[_0xcb72c7(0x215)](_0x1a55f8);for(let _0x46c863=0x0;_0x46c863<_0x5f6980[_0xcb72c7(0x20f)];_0x46c863++){const _0x464e30=_0x5f6980[_0x46c863];_0x421c12[_0x464e30['id']]={'id':_0x464e30['id'],'hex':'#'+_0x464e30[_0xcb72c7(0x203)]};}console[_0xcb72c7(0x213)]({'colors':_0x421c12});const [_0x5be138]=await conn[_0xcb72c7(0x21c)]()[_0xcb72c7(0x215)](_0x3b95ec);for(let _0x49cfb7=0x0;_0x49cfb7<_0x5be138[_0xcb72c7(0x20f)];_0x49cfb7++){const _0x3da6bd=_0x5be138[_0x49cfb7];_0x594674[_0x3da6bd['id']]={'id':_0x3da6bd['id'],'name':_0x3da6bd[_0xcb72c7(0x1f2)],'color_id':_0x3da6bd['color_id'],'color':_0x421c12[_0x3da6bd[_0xcb72c7(0x1fb)]][_0xcb72c7(0x203)]};}const [_0x27d897]=await conn['promise']()[_0xcb72c7(0x215)](_0x35572b);for(let _0x2f3af1=0x0;_0x2f3af1<_0x27d897[_0xcb72c7(0x20f)];_0x2f3af1++){const _0x26c62f=_0x27d897[_0x2f3af1];_0xea1cec[_0xcb72c7(0x20e)]({'id':_0x26c62f['id'],'room_id':_0x26c62f[_0xcb72c7(0x20a)],'employee_number':_0x26c62f[_0xcb72c7(0x1f3)],'phone':_0x26c62f['phone'],'floor_id':_0x26c62f['floor_id'],'org2_id':_0x26c62f[_0xcb72c7(0x1fa)],'firstname':_0x26c62f[_0xcb72c7(0x1f7)]['split']('\x20')[0x0],'lastname':_0x26c62f[_0xcb72c7(0x1f7)][_0xcb72c7(0x20b)]('\x20')[0x1],'employeeName':_0x26c62f['employeeName'],'department':_0x594674[_0x26c62f['org2_id']]});}_0x56dd7c[_0xcb72c7(0x210)](_0xea1cec);}catch(_0x2ba8a3){console[_0xcb72c7(0x213)](_0xcb72c7(0x212)+_0x2ba8a3),_0x56dd7c[_0xcb72c7(0x210)]('[]');}}),module[a12_0x3a25b3(0x1fc)]=router;
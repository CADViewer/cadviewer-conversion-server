const a13_0x50a42f=a13_0x2634;(function(_0x24a213,_0x5ef401){const _0x242fe1=a13_0x2634,_0x3a5137=_0x24a213();while(!![]){try{const _0x11d552=parseInt(_0x242fe1(0xa9))/0x1*(-parseInt(_0x242fe1(0x89))/0x2)+parseInt(_0x242fe1(0x96))/0x3*(-parseInt(_0x242fe1(0x94))/0x4)+-parseInt(_0x242fe1(0x93))/0x5+parseInt(_0x242fe1(0x87))/0x6+-parseInt(_0x242fe1(0xa6))/0x7+-parseInt(_0x242fe1(0xab))/0x8*(parseInt(_0x242fe1(0x9a))/0x9)+parseInt(_0x242fe1(0x8e))/0xa;if(_0x11d552===_0x5ef401)break;else _0x3a5137['push'](_0x3a5137['shift']());}catch(_0x213abe){_0x3a5137['push'](_0x3a5137['shift']());}}}(a13_0x51d7,0x68d64));const fs=require('fs'),path=require(a13_0x50a42f(0x8b)),config=require('../CADViewer_config.json'),conn=require(a13_0x50a42f(0xa5)),express=require('express'),router=express[a13_0x50a42f(0x9f)]();function a13_0x2634(_0x14fef6,_0x273239){const _0x51d7ea=a13_0x51d7();return a13_0x2634=function(_0x263416,_0x4dd114){_0x263416=_0x263416-0x85;let _0x4aa52b=_0x51d7ea[_0x263416];return _0x4aa52b;},a13_0x2634(_0x14fef6,_0x273239);}router['get']('/photos/:room_id',async(_0x9ab5dd,_0x367fc7)=>{const _0x163184=a13_0x50a42f;try{const _0x45ddf2=_0x9ab5dd[_0x163184(0x98)][_0x163184(0x9c)],_0x507c85=_0x163184(0xa1)+_0x45ddf2,_0x226e29=[],[_0x4a7fbd]=await conn[_0x163184(0x97)]()[_0x163184(0x91)](_0x507c85);for(let _0x2988f3=0x0;_0x2988f3<_0x4a7fbd[_0x163184(0xa3)];_0x2988f3++){const _0x444c2b=_0x4a7fbd[_0x2988f3];_0x226e29[_0x163184(0x9e)]({'id':_0x444c2b['id'],'image_file_name':'/photos/'+_0x444c2b['id']+_0x163184(0x99)+_0x444c2b[_0x163184(0xa0)],'image_content_type':_0x444c2b[_0x163184(0x8d)],'image_file_size':_0x444c2b[_0x163184(0x86)],'image_updated_at':_0x444c2b['image_updated_at'],'created_at':_0x444c2b[_0x163184(0xa4)],'updated_at':_0x444c2b[_0x163184(0x8c)]});}_0x367fc7[_0x163184(0x85)](_0x226e29);}catch(_0x5a1ceb){console[_0x163184(0x9b)](_0x5a1ceb),_0x367fc7['send']([]);}}),router[a13_0x50a42f(0xaa)](a13_0x50a42f(0x95),async(_0x27a783,_0x13bfec)=>{const _0x348f29=a13_0x50a42f;try{const _0x33b1e9='SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees',_0x1ec1cd=_0x348f29(0xaf),_0x5c83f5=_0x348f29(0xac),_0x155fea=[],_0x27c397={},_0x16dd55={},[_0x36bfe7]=await conn['promise']()['query'](_0x5c83f5);for(let _0x464ea9=0x0;_0x464ea9<_0x36bfe7[_0x348f29(0xa3)];_0x464ea9++){const _0x6769aa=_0x36bfe7[_0x464ea9];_0x16dd55[_0x6769aa['id']]={'id':_0x6769aa['id'],'hex':'#'+_0x6769aa[_0x348f29(0xad)]};}const [_0x4b2a57]=conn['promise']()[_0x348f29(0x91)](_0x1ec1cd);for(let _0x2daac8=0x0;_0x2daac8<_0x4b2a57[_0x348f29(0xa3)];_0x2daac8++){const _0xf17e14=_0x4b2a57[_0x2daac8];_0x27c397[_0xf17e14['id']]={'id':_0xf17e14['id'],'name':_0xf17e14[_0x348f29(0xb0)],'color_id':_0xf17e14[_0x348f29(0xa7)],'color':_0x16dd55[_0xf17e14[_0x348f29(0xa7)]]['hex']};}return _0x13bfec[_0x348f29(0x85)](_0x27c397);}catch(_0x5def6a){console[_0x348f29(0x9b)](_0x348f29(0x8a)+_0x5def6a),_0x13bfec['send']('[]');}}),router['get'](a13_0x50a42f(0xa8),async(_0x97abc3,_0x4298a2)=>{const _0x2f39a5=a13_0x50a42f;try{const _0x2b84a7=_0x2f39a5(0x92),_0x54f20b=_0x2f39a5(0xaf),_0x149c08=_0x2f39a5(0xac),_0x42a05b=[],_0x418759={},_0x20f88d={};let [_0x294f9c]=await conn[_0x2f39a5(0x97)]()['query'](_0x149c08);for(let _0x59141d=0x0;_0x59141d<_0x294f9c['length'];_0x59141d++){const _0x4753e7=_0x294f9c[_0x59141d];_0x20f88d[_0x4753e7['id']]={'id':_0x4753e7['id'],'hex':'#'+_0x4753e7[_0x2f39a5(0xad)]};}console[_0x2f39a5(0x9b)]({'colors':_0x20f88d});const [_0x2d3dcc]=await conn['promise']()[_0x2f39a5(0x91)](_0x54f20b);for(let _0xd0007d=0x0;_0xd0007d<_0x2d3dcc[_0x2f39a5(0xa3)];_0xd0007d++){const _0x36c773=_0x2d3dcc[_0xd0007d];_0x418759[_0x36c773['id']]={'id':_0x36c773['id'],'name':_0x36c773[_0x2f39a5(0xb0)],'color_id':_0x36c773[_0x2f39a5(0xa7)],'color':_0x20f88d[_0x36c773['color_id']][_0x2f39a5(0xad)]};}const [_0x439f5b]=await conn['promise']()[_0x2f39a5(0x91)](_0x2b84a7);for(let _0x4cb12e=0x0;_0x4cb12e<_0x439f5b[_0x2f39a5(0xa3)];_0x4cb12e++){const _0x2e70c6=_0x439f5b[_0x4cb12e];_0x42a05b[_0x2f39a5(0x9e)]({'id':_0x2e70c6['id'],'room_id':_0x2e70c6['room_id'],'employee_number':_0x2e70c6['employee_number'],'phone':_0x2e70c6[_0x2f39a5(0xae)],'floor_id':_0x2e70c6[_0x2f39a5(0xa2)],'org2_id':_0x2e70c6[_0x2f39a5(0x8f)],'firstname':_0x2e70c6[_0x2f39a5(0x9d)][_0x2f39a5(0x88)]('\x20')[0x0],'lastname':_0x2e70c6[_0x2f39a5(0x9d)]['split']('\x20')[0x1],'employeeName':_0x2e70c6[_0x2f39a5(0x9d)],'department':_0x418759[_0x2e70c6['org2_id']]});}_0x4298a2[_0x2f39a5(0x85)](_0x42a05b);}catch(_0x1b7057){console['log'](_0x2f39a5(0xb1)+_0x1b7057),_0x4298a2['send']('[]');}}),module[a13_0x50a42f(0x90)]=router;function a13_0x51d7(){const _0xa941ca=['hex','phone','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','name','DB\x20/employees\x20error','send','image_file_size','1894698VxpiNs','split','1469328hkWoBc','DB\x20/org2s\x20error','path','updated_at','image_content_type','20973960raXHmV','org2_id','exports','query','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','885360RwaLrC','649284YFoSip','/org2s','3ZywhIY','promise','params','/original/','18NmDtLU','log','room_id','employeeName','push','Router','image_file_name','SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','floor_id','length','created_at','../libs/mysql.js','4789582RMpJlQ','color_id','/employees','1ERGFaz','get','901936NNhFfp','SELECT\x20id,\x20hex\x20FROM\x20colors'];a13_0x51d7=function(){return _0xa941ca;};return a13_0x51d7();}
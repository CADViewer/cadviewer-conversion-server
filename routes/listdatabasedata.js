const a12_0x6994f6=a12_0x1545;(function(_0x5c43f4,_0x21c0c9){const _0x3f7cff=a12_0x1545,_0x37f503=_0x5c43f4();while(!![]){try{const _0x3be861=-parseInt(_0x3f7cff(0xc3))/0x1+parseInt(_0x3f7cff(0xb6))/0x2*(-parseInt(_0x3f7cff(0xb8))/0x3)+parseInt(_0x3f7cff(0xaa))/0x4*(-parseInt(_0x3f7cff(0xc5))/0x5)+-parseInt(_0x3f7cff(0xc6))/0x6*(-parseInt(_0x3f7cff(0xae))/0x7)+-parseInt(_0x3f7cff(0xcc))/0x8+-parseInt(_0x3f7cff(0xcb))/0x9+parseInt(_0x3f7cff(0xa9))/0xa;if(_0x3be861===_0x21c0c9)break;else _0x37f503['push'](_0x37f503['shift']());}catch(_0x509cc9){_0x37f503['push'](_0x37f503['shift']());}}}(a12_0x1200,0xb3391));function a12_0x1200(){const _0x5aa093=['phone','656415ITIVSv','send','70285fXNUUo','6nvQEhX','push','Router','color_id','employee_number','8143056zSruci','8882344GzIoQF','SELECT\x20id,\x20hex\x20FROM\x20colors','name','path','query','express','log','/photos/:room_id','image_file_name','36704320xaIUGf','76DbOuGN','floor_id','/org2s','hex','3192049VEwJRS','image_updated_at','length','updated_at','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','exports','split','DB\x20/employees\x20error','5014EBgybO','room_id','543nLidJG','promise','get','org2_id','params','/employees','employeeName','/photos/','created_at','image_file_size'];a12_0x1200=function(){return _0x5aa093;};return a12_0x1200();}function a12_0x1545(_0x418573,_0x20ffde){const _0x12009e=a12_0x1200();return a12_0x1545=function(_0x1545bb,_0x5018bb){_0x1545bb=_0x1545bb-0xa3;let _0x1dea8f=_0x12009e[_0x1545bb];return _0x1dea8f;},a12_0x1545(_0x418573,_0x20ffde);}const fs=require('fs'),path=require(a12_0x6994f6(0xa3)),config=require('../CADViewer_config.json'),conn=require('../libs/mysql.js'),express=require(a12_0x6994f6(0xa5)),router=express[a12_0x6994f6(0xc8)]();router[a12_0x6994f6(0xba)](a12_0x6994f6(0xa7),async(_0x2de3e1,_0x74f93b)=>{const _0x5b55e0=a12_0x6994f6;try{const _0x2b1446=_0x2de3e1[_0x5b55e0(0xbc)][_0x5b55e0(0xb7)],_0xda6554='SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20'+_0x2b1446,_0x5177a3=[],[_0x1dccfb]=await conn[_0x5b55e0(0xb9)]()[_0x5b55e0(0xa4)](_0xda6554);for(let _0x41c0a6=0x0;_0x41c0a6<_0x1dccfb[_0x5b55e0(0xb0)];_0x41c0a6++){const _0x4d1c66=_0x1dccfb[_0x41c0a6];_0x5177a3[_0x5b55e0(0xc7)]({'id':_0x4d1c66['id'],'image_file_name':_0x5b55e0(0xbf)+_0x4d1c66['id']+'/original/'+_0x4d1c66[_0x5b55e0(0xa8)],'image_content_type':_0x4d1c66['image_content_type'],'image_file_size':_0x4d1c66[_0x5b55e0(0xc1)],'image_updated_at':_0x4d1c66[_0x5b55e0(0xaf)],'created_at':_0x4d1c66[_0x5b55e0(0xc0)],'updated_at':_0x4d1c66[_0x5b55e0(0xb1)]});}_0x74f93b[_0x5b55e0(0xc4)](_0x5177a3);}catch(_0x4d9b20){console[_0x5b55e0(0xa6)](_0x4d9b20),_0x74f93b[_0x5b55e0(0xc4)]([]);}}),router[a12_0x6994f6(0xba)](a12_0x6994f6(0xac),async(_0x476490,_0x2c45c4)=>{const _0x2bdb27=a12_0x6994f6;try{const _0x482028=_0x2bdb27(0xb2),_0x30b0d4='SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s',_0x4e3029=_0x2bdb27(0xcd),_0x40f651=[],_0x4da21e={},_0xbac179={},[_0x3b989f]=await conn[_0x2bdb27(0xb9)]()[_0x2bdb27(0xa4)](_0x4e3029);for(let _0x3ebb58=0x0;_0x3ebb58<_0x3b989f[_0x2bdb27(0xb0)];_0x3ebb58++){const _0x4bc60b=_0x3b989f[_0x3ebb58];_0xbac179[_0x4bc60b['id']]={'id':_0x4bc60b['id'],'hex':'#'+_0x4bc60b[_0x2bdb27(0xad)]};}const [_0x1e1daf]=conn['promise']()[_0x2bdb27(0xa4)](_0x30b0d4);for(let _0x1b6c86=0x0;_0x1b6c86<_0x1e1daf['length'];_0x1b6c86++){const _0x24b0e6=_0x1e1daf[_0x1b6c86];_0x4da21e[_0x24b0e6['id']]={'id':_0x24b0e6['id'],'name':_0x24b0e6['name'],'color_id':_0x24b0e6[_0x2bdb27(0xc9)],'color':_0xbac179[_0x24b0e6[_0x2bdb27(0xc9)]][_0x2bdb27(0xad)]};}return _0x2c45c4[_0x2bdb27(0xc4)](_0x4da21e);}catch(_0x127475){console[_0x2bdb27(0xa6)]('DB\x20/org2s\x20error'+_0x127475),_0x2c45c4[_0x2bdb27(0xc4)]('[]');}}),router[a12_0x6994f6(0xba)](a12_0x6994f6(0xbd),async(_0xcc81c0,_0x12ecdb)=>{const _0x32ed23=a12_0x6994f6;try{const _0x33ccb1=_0x32ed23(0xb2),_0x8bd28e='SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s',_0xc4c5fa=_0x32ed23(0xcd),_0x1b8a1c=[],_0x1d41f0={},_0x52b8ab={};let [_0x4f7a78]=await conn[_0x32ed23(0xb9)]()[_0x32ed23(0xa4)](_0xc4c5fa);for(let _0x2fc275=0x0;_0x2fc275<_0x4f7a78[_0x32ed23(0xb0)];_0x2fc275++){const _0x11e3ae=_0x4f7a78[_0x2fc275];_0x52b8ab[_0x11e3ae['id']]={'id':_0x11e3ae['id'],'hex':'#'+_0x11e3ae[_0x32ed23(0xad)]};}console[_0x32ed23(0xa6)]({'colors':_0x52b8ab});const [_0x5ecbc4]=await conn['promise']()[_0x32ed23(0xa4)](_0x8bd28e);for(let _0x4f09d4=0x0;_0x4f09d4<_0x5ecbc4['length'];_0x4f09d4++){const _0x58f696=_0x5ecbc4[_0x4f09d4];_0x1d41f0[_0x58f696['id']]={'id':_0x58f696['id'],'name':_0x58f696[_0x32ed23(0xce)],'color_id':_0x58f696[_0x32ed23(0xc9)],'color':_0x52b8ab[_0x58f696[_0x32ed23(0xc9)]]['hex']};}const [_0x1de00d]=await conn[_0x32ed23(0xb9)]()['query'](_0x33ccb1);for(let _0x48139f=0x0;_0x48139f<_0x1de00d[_0x32ed23(0xb0)];_0x48139f++){const _0x4fb9c5=_0x1de00d[_0x48139f];_0x1b8a1c['push']({'id':_0x4fb9c5['id'],'room_id':_0x4fb9c5[_0x32ed23(0xb7)],'employee_number':_0x4fb9c5[_0x32ed23(0xca)],'phone':_0x4fb9c5[_0x32ed23(0xc2)],'floor_id':_0x4fb9c5[_0x32ed23(0xab)],'org2_id':_0x4fb9c5[_0x32ed23(0xbb)],'firstname':_0x4fb9c5[_0x32ed23(0xbe)]['split']('\x20')[0x0],'lastname':_0x4fb9c5['employeeName'][_0x32ed23(0xb4)]('\x20')[0x1],'employeeName':_0x4fb9c5[_0x32ed23(0xbe)],'department':_0x1d41f0[_0x4fb9c5['org2_id']]});}_0x12ecdb[_0x32ed23(0xc4)](_0x1b8a1c);}catch(_0x15c1e6){console[_0x32ed23(0xa6)](_0x32ed23(0xb5)+_0x15c1e6),_0x12ecdb[_0x32ed23(0xc4)]('[]');}}),module[a12_0x6994f6(0xb3)]=router;
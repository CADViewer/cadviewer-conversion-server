const a12_0x5c10e7=a12_0x3222;function a12_0x1b8c(){const _0x47e486=['promise','image_content_type','/employees','params','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','1584760kmQKNZ','name','exports','454xcSAYx','/photos/','1831IKFuKA','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','700UPmHlk','SELECT\x20id,\x20hex\x20FROM\x20colors','split','DB\x20/org2s\x20error','1549350ZMTysR','floor_id','color_id','85757OxJBoe','express','/original/','6FXCJTw','get','path','168aSFTrh','log','query','../CADViewer_config.json','length','114636JxMwxe','employee_number','SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','room_id','41841irJJFC','hex','send','updated_at','1066624KTVjTl','employeeName','image_file_name','org2_id'];a12_0x1b8c=function(){return _0x47e486;};return a12_0x1b8c();}(function(_0x49ade0,_0x5eddcc){const _0x23a57d=a12_0x3222,_0x102130=_0x49ade0();while(!![]){try{const _0x218921=-parseInt(_0x23a57d(0x15e))/0x1*(parseInt(_0x23a57d(0x15c))/0x2)+-parseInt(_0x23a57d(0x148))/0x3+parseInt(_0x23a57d(0x150))/0x4+parseInt(_0x23a57d(0x159))/0x5*(-parseInt(_0x23a57d(0x140))/0x6)+-parseInt(_0x23a57d(0x13d))/0x7*(-parseInt(_0x23a57d(0x143))/0x8)+-parseInt(_0x23a57d(0x14c))/0x9*(-parseInt(_0x23a57d(0x160))/0xa)+parseInt(_0x23a57d(0x164))/0xb;if(_0x218921===_0x5eddcc)break;else _0x102130['push'](_0x102130['shift']());}catch(_0x213cc5){_0x102130['push'](_0x102130['shift']());}}}(a12_0x1b8c,0x3590e));function a12_0x3222(_0x286ee1,_0x1cce6c){const _0x1b8c0a=a12_0x1b8c();return a12_0x3222=function(_0x3222b1,_0x47700c){_0x3222b1=_0x3222b1-0x13c;let _0x398d27=_0x1b8c0a[_0x3222b1];return _0x398d27;},a12_0x3222(_0x286ee1,_0x1cce6c);}const fs=require('fs'),path=require(a12_0x5c10e7(0x142)),config=require(a12_0x5c10e7(0x146)),conn=require('../libs/mysql.js'),express=require(a12_0x5c10e7(0x13e)),router=express['Router']();router[a12_0x5c10e7(0x141)]('/photos/:room_id',async(_0x5a910c,_0x530725)=>{const _0x10a746=a12_0x5c10e7;try{const _0x4b141e=_0x5a910c[_0x10a746(0x157)][_0x10a746(0x14b)],_0x4e23e7=_0x10a746(0x14a)+_0x4b141e,_0x3dc7d3=[],[_0x2a5fff]=await conn[_0x10a746(0x154)]()[_0x10a746(0x145)](_0x4e23e7);for(let _0x2d5bfe=0x0;_0x2d5bfe<_0x2a5fff['length'];_0x2d5bfe++){const _0x4f7785=_0x2a5fff[_0x2d5bfe];_0x3dc7d3['push']({'id':_0x4f7785['id'],'image_file_name':_0x10a746(0x15d)+_0x4f7785['id']+_0x10a746(0x13f)+_0x4f7785[_0x10a746(0x152)],'image_content_type':_0x4f7785[_0x10a746(0x155)],'image_file_size':_0x4f7785['image_file_size'],'image_updated_at':_0x4f7785['image_updated_at'],'created_at':_0x4f7785['created_at'],'updated_at':_0x4f7785[_0x10a746(0x14f)]});}_0x530725[_0x10a746(0x14e)](_0x3dc7d3);}catch(_0x32bd4c){console['log'](_0x32bd4c),_0x530725[_0x10a746(0x14e)]([]);}}),router[a12_0x5c10e7(0x141)]('/org2s',async(_0x3dd9d5,_0x59b396)=>{const _0x5c4aa3=a12_0x5c10e7;try{const _0xe597e8=_0x5c4aa3(0x158),_0x148ebf='SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s',_0x283595=_0x5c4aa3(0x161),_0x171962=[],_0x2f7742={},_0x3295e7={},[_0x100049]=await conn[_0x5c4aa3(0x154)]()['query'](_0x283595);for(let _0x2656f2=0x0;_0x2656f2<_0x100049[_0x5c4aa3(0x147)];_0x2656f2++){const _0x297aaf=_0x100049[_0x2656f2];_0x3295e7[_0x297aaf['id']]={'id':_0x297aaf['id'],'hex':'#'+_0x297aaf['hex']};}const [_0x39a798]=conn['promise']()[_0x5c4aa3(0x145)](_0x148ebf);for(let _0x24dc3e=0x0;_0x24dc3e<_0x39a798[_0x5c4aa3(0x147)];_0x24dc3e++){const _0x24e275=_0x39a798[_0x24dc3e];_0x2f7742[_0x24e275['id']]={'id':_0x24e275['id'],'name':_0x24e275[_0x5c4aa3(0x15a)],'color_id':_0x24e275[_0x5c4aa3(0x13c)],'color':_0x3295e7[_0x24e275[_0x5c4aa3(0x13c)]][_0x5c4aa3(0x14d)]};}return _0x59b396[_0x5c4aa3(0x14e)](_0x2f7742);}catch(_0x2029f2){console[_0x5c4aa3(0x144)](_0x5c4aa3(0x163)+_0x2029f2),_0x59b396['send']('[]');}}),router['get'](a12_0x5c10e7(0x156),async(_0x25505e,_0x1c5ccb)=>{const _0x2c5907=a12_0x5c10e7;try{const _0x5f2b1b=_0x2c5907(0x158),_0x4e21dc=_0x2c5907(0x15f),_0x1a4765=_0x2c5907(0x161),_0x1db353=[],_0x112d41={},_0x2db93e={};let [_0x1f2860]=await conn[_0x2c5907(0x154)]()[_0x2c5907(0x145)](_0x1a4765);for(let _0xe1a829=0x0;_0xe1a829<_0x1f2860[_0x2c5907(0x147)];_0xe1a829++){const _0x20572e=_0x1f2860[_0xe1a829];_0x2db93e[_0x20572e['id']]={'id':_0x20572e['id'],'hex':'#'+_0x20572e[_0x2c5907(0x14d)]};}console[_0x2c5907(0x144)]({'colors':_0x2db93e});const [_0x5ccb28]=await conn['promise']()[_0x2c5907(0x145)](_0x4e21dc);for(let _0x960506=0x0;_0x960506<_0x5ccb28[_0x2c5907(0x147)];_0x960506++){const _0x5f59be=_0x5ccb28[_0x960506];_0x112d41[_0x5f59be['id']]={'id':_0x5f59be['id'],'name':_0x5f59be[_0x2c5907(0x15a)],'color_id':_0x5f59be['color_id'],'color':_0x2db93e[_0x5f59be[_0x2c5907(0x13c)]]['hex']};}const [_0x516a15]=await conn['promise']()[_0x2c5907(0x145)](_0x5f2b1b);for(let _0x546770=0x0;_0x546770<_0x516a15[_0x2c5907(0x147)];_0x546770++){const _0x3d89e8=_0x516a15[_0x546770];_0x1db353['push']({'id':_0x3d89e8['id'],'room_id':_0x3d89e8['room_id'],'employee_number':_0x3d89e8[_0x2c5907(0x149)],'phone':_0x3d89e8['phone'],'floor_id':_0x3d89e8[_0x2c5907(0x165)],'org2_id':_0x3d89e8[_0x2c5907(0x153)],'firstname':_0x3d89e8[_0x2c5907(0x151)][_0x2c5907(0x162)]('\x20')[0x0],'lastname':_0x3d89e8[_0x2c5907(0x151)][_0x2c5907(0x162)]('\x20')[0x1],'employeeName':_0x3d89e8[_0x2c5907(0x151)],'department':_0x112d41[_0x3d89e8[_0x2c5907(0x153)]]});}_0x1c5ccb['send'](_0x1db353);}catch(_0x208880){console['log']('DB\x20/employees\x20error'+_0x208880),_0x1c5ccb['send']('[]');}}),module[a12_0x5c10e7(0x15b)]=router;
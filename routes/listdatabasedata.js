const a12_0x37f38f=a12_0x3ee7;(function(_0x5c019a,_0x4746f2){const _0x209192=a12_0x3ee7,_0x13addc=_0x5c019a();while(!![]){try{const _0x16d9df=parseInt(_0x209192(0x7a))/0x1+-parseInt(_0x209192(0x6a))/0x2+-parseInt(_0x209192(0x7b))/0x3*(-parseInt(_0x209192(0x71))/0x4)+parseInt(_0x209192(0x8a))/0x5+parseInt(_0x209192(0x86))/0x6*(parseInt(_0x209192(0x76))/0x7)+parseInt(_0x209192(0x77))/0x8*(-parseInt(_0x209192(0x90))/0x9)+-parseInt(_0x209192(0x8c))/0xa;if(_0x16d9df===_0x4746f2)break;else _0x13addc['push'](_0x13addc['shift']());}catch(_0x576990){_0x13addc['push'](_0x13addc['shift']());}}}(a12_0x356e,0x9fe9d));const fs=require('fs'),path=require(a12_0x37f38f(0x70)),config=require('../CADViewer_config.json'),conn=require('../libs/mysql.js'),express=require(a12_0x37f38f(0x6e)),router=express['Router']();function a12_0x3ee7(_0x2dee7,_0x8ef97e){const _0x356ea3=a12_0x356e();return a12_0x3ee7=function(_0x3ee7ce,_0x3f402b){_0x3ee7ce=_0x3ee7ce-0x66;let _0x5e0ed5=_0x356ea3[_0x3ee7ce];return _0x5e0ed5;},a12_0x3ee7(_0x2dee7,_0x8ef97e);}function a12_0x356e(){const _0x3a05af=['908BBIDgK','DB\x20/org2s\x20error','/employees','updated_at','split','7uakRDZ','351080zMwfBG','send','room_id','1294603zhnjCH','16095kgjLPY','SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','name','/org2s','exports','push','image_file_size','length','phone','promise','2599398CaCOlB','employeeName','image_content_type','floor_id','1189955XAdSnM','color_id','19093840qYgKXT','created_at','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','image_file_name','27ShYIiZ','SELECT\x20id,\x20hex\x20FROM\x20colors','employee_number','hex','query','/original/','975276FtucfA','/photos/:room_id','org2_id','get','express','log','path'];a12_0x356e=function(){return _0x3a05af;};return a12_0x356e();}router[a12_0x37f38f(0x6d)](a12_0x37f38f(0x6b),async(_0x2b42c8,_0x55c5e9)=>{const _0x167d43=a12_0x37f38f;try{const _0x4769ff=_0x2b42c8['params']['room_id'],_0x412e1f=_0x167d43(0x7c)+_0x4769ff,_0x33d266=[],[_0x281bb1]=await conn['promise']()[_0x167d43(0x68)](_0x412e1f);for(let _0x22d962=0x0;_0x22d962<_0x281bb1[_0x167d43(0x83)];_0x22d962++){const _0x45da46=_0x281bb1[_0x22d962];_0x33d266[_0x167d43(0x81)]({'id':_0x45da46['id'],'image_file_name':'/photos/'+_0x45da46['id']+_0x167d43(0x69)+_0x45da46[_0x167d43(0x8f)],'image_content_type':_0x45da46[_0x167d43(0x88)],'image_file_size':_0x45da46[_0x167d43(0x82)],'image_updated_at':_0x45da46['image_updated_at'],'created_at':_0x45da46[_0x167d43(0x8d)],'updated_at':_0x45da46[_0x167d43(0x74)]});}_0x55c5e9[_0x167d43(0x78)](_0x33d266);}catch(_0x493abe){console[_0x167d43(0x6f)](_0x493abe),_0x55c5e9[_0x167d43(0x78)]([]);}}),router['get'](a12_0x37f38f(0x7f),async(_0x368e4b,_0x3062dd)=>{const _0x3477b1=a12_0x37f38f;try{const _0x107ec5=_0x3477b1(0x8e),_0x1c9611='SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s',_0x19de33=_0x3477b1(0x91),_0x29a7fb=[],_0x2b1932={},_0x280815={},[_0x17fd9e]=await conn[_0x3477b1(0x85)]()[_0x3477b1(0x68)](_0x19de33);for(let _0xa8b989=0x0;_0xa8b989<_0x17fd9e[_0x3477b1(0x83)];_0xa8b989++){const _0x46806a=_0x17fd9e[_0xa8b989];_0x280815[_0x46806a['id']]={'id':_0x46806a['id'],'hex':'#'+_0x46806a[_0x3477b1(0x67)]};}const [_0x15b94a]=conn[_0x3477b1(0x85)]()[_0x3477b1(0x68)](_0x1c9611);for(let _0x564066=0x0;_0x564066<_0x15b94a[_0x3477b1(0x83)];_0x564066++){const _0x19aed4=_0x15b94a[_0x564066];_0x2b1932[_0x19aed4['id']]={'id':_0x19aed4['id'],'name':_0x19aed4['name'],'color_id':_0x19aed4[_0x3477b1(0x8b)],'color':_0x280815[_0x19aed4['color_id']]['hex']};}return _0x3062dd[_0x3477b1(0x78)](_0x2b1932);}catch(_0xb4d948){console[_0x3477b1(0x6f)](_0x3477b1(0x72)+_0xb4d948),_0x3062dd[_0x3477b1(0x78)]('[]');}}),router[a12_0x37f38f(0x6d)](a12_0x37f38f(0x73),async(_0xf0952a,_0x3fa765)=>{const _0x51ff52=a12_0x37f38f;try{const _0x50f0b5=_0x51ff52(0x8e),_0x20163e=_0x51ff52(0x7d),_0x22e048='SELECT\x20id,\x20hex\x20FROM\x20colors',_0x488ff0=[],_0x2420ce={},_0x37957c={};let [_0x410d4f]=await conn[_0x51ff52(0x85)]()[_0x51ff52(0x68)](_0x22e048);for(let _0x7d19d=0x0;_0x7d19d<_0x410d4f[_0x51ff52(0x83)];_0x7d19d++){const _0x27301b=_0x410d4f[_0x7d19d];_0x37957c[_0x27301b['id']]={'id':_0x27301b['id'],'hex':'#'+_0x27301b[_0x51ff52(0x67)]};}console['log']({'colors':_0x37957c});const [_0x4d6ada]=await conn[_0x51ff52(0x85)]()[_0x51ff52(0x68)](_0x20163e);for(let _0x39ffee=0x0;_0x39ffee<_0x4d6ada[_0x51ff52(0x83)];_0x39ffee++){const _0x4b9323=_0x4d6ada[_0x39ffee];_0x2420ce[_0x4b9323['id']]={'id':_0x4b9323['id'],'name':_0x4b9323[_0x51ff52(0x7e)],'color_id':_0x4b9323[_0x51ff52(0x8b)],'color':_0x37957c[_0x4b9323[_0x51ff52(0x8b)]]['hex']};}const [_0x2bc7d1]=await conn[_0x51ff52(0x85)]()[_0x51ff52(0x68)](_0x50f0b5);for(let _0x738744=0x0;_0x738744<_0x2bc7d1[_0x51ff52(0x83)];_0x738744++){const _0x357774=_0x2bc7d1[_0x738744];_0x488ff0[_0x51ff52(0x81)]({'id':_0x357774['id'],'room_id':_0x357774[_0x51ff52(0x79)],'employee_number':_0x357774[_0x51ff52(0x66)],'phone':_0x357774[_0x51ff52(0x84)],'floor_id':_0x357774[_0x51ff52(0x89)],'org2_id':_0x357774[_0x51ff52(0x6c)],'firstname':_0x357774['employeeName'][_0x51ff52(0x75)]('\x20')[0x0],'lastname':_0x357774[_0x51ff52(0x87)][_0x51ff52(0x75)]('\x20')[0x1],'employeeName':_0x357774['employeeName'],'department':_0x2420ce[_0x357774['org2_id']]});}_0x3fa765[_0x51ff52(0x78)](_0x488ff0);}catch(_0x648df4){console[_0x51ff52(0x6f)]('DB\x20/employees\x20error'+_0x648df4),_0x3fa765[_0x51ff52(0x78)]('[]');}}),module[a12_0x37f38f(0x80)]=router;
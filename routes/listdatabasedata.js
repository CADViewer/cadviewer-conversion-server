const a12_0x332920=a12_0xc1a9;(function(_0xfaf449,_0xd82773){const _0x2cdf88=a12_0xc1a9,_0x4048c8=_0xfaf449();while(!![]){try{const _0x46c70e=-parseInt(_0x2cdf88(0xe6))/0x1+-parseInt(_0x2cdf88(0xe7))/0x2*(-parseInt(_0x2cdf88(0xfd))/0x3)+-parseInt(_0x2cdf88(0x102))/0x4*(parseInt(_0x2cdf88(0x101))/0x5)+parseInt(_0x2cdf88(0xf1))/0x6*(-parseInt(_0x2cdf88(0xdf))/0x7)+parseInt(_0x2cdf88(0xea))/0x8*(-parseInt(_0x2cdf88(0xf5))/0x9)+-parseInt(_0x2cdf88(0xee))/0xa+parseInt(_0x2cdf88(0xdd))/0xb;if(_0x46c70e===_0xd82773)break;else _0x4048c8['push'](_0x4048c8['shift']());}catch(_0x23a596){_0x4048c8['push'](_0x4048c8['shift']());}}}(a12_0x139c,0x7f3dc));function a12_0xc1a9(_0x332d3a,_0x4b2469){const _0x139cce=a12_0x139c();return a12_0xc1a9=function(_0xc1a985,_0x18af02){_0xc1a985=_0xc1a985-0xd7;let _0x3d3046=_0x139cce[_0xc1a985];return _0x3d3046;},a12_0xc1a9(_0x332d3a,_0x4b2469);}function a12_0x139c(){const _0x177f44=['express','../libs/mysql.js','split','path','516383ThicTd','1732uktcfq','DB\x20/employees\x20error','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','48lutEmW','push','/org2s','SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','1024310sDjtrX','log','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','83886sqfVNM','/employees','promise','room_id','794556UPyMbc','floor_id','DB\x20/org2s\x20error','SELECT\x20id,\x20hex\x20FROM\x20colors','phone','/original/','hex','name','2901EAjuDg','get','send','updated_at','4115LhapwO','1108AFZUCB','image_file_size','length','../CADViewer_config.json','/photos/:room_id','image_updated_at','exports','image_file_name','query','employee_number','org2_id','color_id','12124090mKGVJF','/photos/','21YazQMc','Router','employeeName'];a12_0x139c=function(){return _0x177f44;};return a12_0x139c();}const fs=require('fs'),path=require(a12_0x332920(0xe5)),config=require(a12_0x332920(0x105)),conn=require(a12_0x332920(0xe3)),express=require(a12_0x332920(0xe2)),router=express[a12_0x332920(0xe0)]();router[a12_0x332920(0xfe)](a12_0x332920(0x106),async(_0xb57ef5,_0x233eda)=>{const _0x197f08=a12_0x332920;try{const _0x593faf=_0xb57ef5['params']['room_id'],_0x12e92b=_0x197f08(0xed)+_0x593faf,_0x587691=[],[_0x49f261]=await conn['promise']()[_0x197f08(0xd9)](_0x12e92b);for(let _0x223c4f=0x0;_0x223c4f<_0x49f261[_0x197f08(0x104)];_0x223c4f++){const _0x3f39e9=_0x49f261[_0x223c4f];_0x587691['push']({'id':_0x3f39e9['id'],'image_file_name':_0x197f08(0xde)+_0x3f39e9['id']+_0x197f08(0xfa)+_0x3f39e9[_0x197f08(0xd8)],'image_content_type':_0x3f39e9['image_content_type'],'image_file_size':_0x3f39e9[_0x197f08(0x103)],'image_updated_at':_0x3f39e9[_0x197f08(0x107)],'created_at':_0x3f39e9['created_at'],'updated_at':_0x3f39e9[_0x197f08(0x100)]});}_0x233eda[_0x197f08(0xff)](_0x587691);}catch(_0x37be6b){console[_0x197f08(0xef)](_0x37be6b),_0x233eda['send']([]);}}),router[a12_0x332920(0xfe)](a12_0x332920(0xec),async(_0x5290cd,_0x134955)=>{const _0x1135d2=a12_0x332920;try{const _0x50b56e='SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees',_0x420b8e=_0x1135d2(0xf0),_0x674477=_0x1135d2(0xf8),_0x5f59c8=[],_0x3fe5f3={},_0x51b5bd={},[_0x66be6b]=await conn[_0x1135d2(0xf3)]()['query'](_0x674477);for(let _0x4f65d9=0x0;_0x4f65d9<_0x66be6b[_0x1135d2(0x104)];_0x4f65d9++){const _0x367341=_0x66be6b[_0x4f65d9];_0x51b5bd[_0x367341['id']]={'id':_0x367341['id'],'hex':'#'+_0x367341['hex']};}const [_0x2cf5d2]=conn[_0x1135d2(0xf3)]()[_0x1135d2(0xd9)](_0x420b8e);for(let _0x536ffc=0x0;_0x536ffc<_0x2cf5d2[_0x1135d2(0x104)];_0x536ffc++){const _0x546f08=_0x2cf5d2[_0x536ffc];_0x3fe5f3[_0x546f08['id']]={'id':_0x546f08['id'],'name':_0x546f08[_0x1135d2(0xfc)],'color_id':_0x546f08[_0x1135d2(0xdc)],'color':_0x51b5bd[_0x546f08['color_id']][_0x1135d2(0xfb)]};}return _0x134955[_0x1135d2(0xff)](_0x3fe5f3);}catch(_0x3206ab){console[_0x1135d2(0xef)](_0x1135d2(0xf7)+_0x3206ab),_0x134955[_0x1135d2(0xff)]('[]');}}),router['get'](a12_0x332920(0xf2),async(_0x35600a,_0x24ac11)=>{const _0x402cc2=a12_0x332920;try{const _0x4b93ff=_0x402cc2(0xe9),_0x19f69f=_0x402cc2(0xf0),_0x50cccd=_0x402cc2(0xf8),_0x157b2f=[],_0x18604d={},_0x4796cb={};let [_0x219e88]=await conn['promise']()['query'](_0x50cccd);for(let _0x36a85d=0x0;_0x36a85d<_0x219e88[_0x402cc2(0x104)];_0x36a85d++){const _0x5d5618=_0x219e88[_0x36a85d];_0x4796cb[_0x5d5618['id']]={'id':_0x5d5618['id'],'hex':'#'+_0x5d5618[_0x402cc2(0xfb)]};}console[_0x402cc2(0xef)]({'colors':_0x4796cb});const [_0x10b385]=await conn['promise']()['query'](_0x19f69f);for(let _0x4a07fc=0x0;_0x4a07fc<_0x10b385[_0x402cc2(0x104)];_0x4a07fc++){const _0x37ae44=_0x10b385[_0x4a07fc];_0x18604d[_0x37ae44['id']]={'id':_0x37ae44['id'],'name':_0x37ae44[_0x402cc2(0xfc)],'color_id':_0x37ae44[_0x402cc2(0xdc)],'color':_0x4796cb[_0x37ae44[_0x402cc2(0xdc)]][_0x402cc2(0xfb)]};}const [_0x3571c9]=await conn[_0x402cc2(0xf3)]()[_0x402cc2(0xd9)](_0x4b93ff);for(let _0x5cff60=0x0;_0x5cff60<_0x3571c9[_0x402cc2(0x104)];_0x5cff60++){const _0x284ca8=_0x3571c9[_0x5cff60];_0x157b2f[_0x402cc2(0xeb)]({'id':_0x284ca8['id'],'room_id':_0x284ca8[_0x402cc2(0xf4)],'employee_number':_0x284ca8[_0x402cc2(0xda)],'phone':_0x284ca8[_0x402cc2(0xf9)],'floor_id':_0x284ca8[_0x402cc2(0xf6)],'org2_id':_0x284ca8['org2_id'],'firstname':_0x284ca8[_0x402cc2(0xe1)][_0x402cc2(0xe4)]('\x20')[0x0],'lastname':_0x284ca8['employeeName'][_0x402cc2(0xe4)]('\x20')[0x1],'employeeName':_0x284ca8[_0x402cc2(0xe1)],'department':_0x18604d[_0x284ca8[_0x402cc2(0xdb)]]});}_0x24ac11[_0x402cc2(0xff)](_0x157b2f);}catch(_0x495742){console[_0x402cc2(0xef)](_0x402cc2(0xe8)+_0x495742),_0x24ac11['send']('[]');}}),module[a12_0x332920(0xd7)]=router;
function a12_0x2da0(){const _0xae901=['image_file_size','org2_id','get','../libs/mysql.js','phone','path','params','employeeName','color_id','query','/photos/','floor_id','split','155284Oaedqq','name','updated_at','30ADwfdV','image_content_type','promise','image_updated_at','push','SELECT\x20id,\x20hex\x20FROM\x20colors','image_file_name','created_at','employee_number','log','hex','6hWNytR','/original/','DB\x20/org2s\x20error','/org2s','length','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','2072664TRwysE','5483600tLtZMk','SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','297207lvxVeC','1205319sSepMq','room_id','send','775104DpPdvl','2059694udKGWH'];a12_0x2da0=function(){return _0xae901;};return a12_0x2da0();}const a12_0x976017=a12_0xb0c5;function a12_0xb0c5(_0x3bece4,_0x1741ae){const _0x2da05d=a12_0x2da0();return a12_0xb0c5=function(_0xb0c54b,_0x4a08bc){_0xb0c54b=_0xb0c54b-0x148;let _0xdb40d6=_0x2da05d[_0xb0c54b];return _0xdb40d6;},a12_0xb0c5(_0x3bece4,_0x1741ae);}(function(_0x23dfba,_0x2a4e09){const _0x4fa670=a12_0xb0c5,_0x51c404=_0x23dfba();while(!![]){try{const _0x13ce74=parseInt(_0x4fa670(0x153))/0x1+parseInt(_0x4fa670(0x157))/0x2+parseInt(_0x4fa670(0x154))/0x3+parseInt(_0x4fa670(0x166))/0x4*(parseInt(_0x4fa670(0x169))/0x5)+parseInt(_0x4fa670(0x14a))/0x6*(parseInt(_0x4fa670(0x158))/0x7)+-parseInt(_0x4fa670(0x151))/0x8+-parseInt(_0x4fa670(0x150))/0x9;if(_0x13ce74===_0x2a4e09)break;else _0x51c404['push'](_0x51c404['shift']());}catch(_0x13c322){_0x51c404['push'](_0x51c404['shift']());}}}(a12_0x2da0,0xaa662));const fs=require('fs'),path=require(a12_0x976017(0x15e)),config=require('../CADViewer_config.json'),conn=require(a12_0x976017(0x15c)),express=require('express'),router=express['Router']();router[a12_0x976017(0x15b)]('/photos/:room_id',async(_0xac4bf5,_0x387e85)=>{const _0x3665d2=a12_0x976017;try{const _0x46acc6=_0xac4bf5[_0x3665d2(0x15f)][_0x3665d2(0x155)],_0x584b0b=_0x3665d2(0x152)+_0x46acc6,_0x20b7c6=[],[_0x41bf9c]=await conn[_0x3665d2(0x16b)]()[_0x3665d2(0x162)](_0x584b0b);for(let _0x4b4953=0x0;_0x4b4953<_0x41bf9c[_0x3665d2(0x14e)];_0x4b4953++){const _0x111667=_0x41bf9c[_0x4b4953];_0x20b7c6[_0x3665d2(0x16d)]({'id':_0x111667['id'],'image_file_name':_0x3665d2(0x163)+_0x111667['id']+_0x3665d2(0x14b)+_0x111667[_0x3665d2(0x16f)],'image_content_type':_0x111667[_0x3665d2(0x16a)],'image_file_size':_0x111667[_0x3665d2(0x159)],'image_updated_at':_0x111667[_0x3665d2(0x16c)],'created_at':_0x111667[_0x3665d2(0x170)],'updated_at':_0x111667[_0x3665d2(0x168)]});}_0x387e85['send'](_0x20b7c6);}catch(_0x25fcd1){console[_0x3665d2(0x148)](_0x25fcd1),_0x387e85[_0x3665d2(0x156)]([]);}}),router[a12_0x976017(0x15b)](a12_0x976017(0x14d),async(_0x55141a,_0x5efcce)=>{const _0x40b97d=a12_0x976017;try{const _0xfd2e40='SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees',_0x2dcf36=_0x40b97d(0x14f),_0x14b096=_0x40b97d(0x16e),_0x192ad8=[],_0x4cb759={},_0x54d1a6={},[_0x265043]=await conn[_0x40b97d(0x16b)]()[_0x40b97d(0x162)](_0x14b096);for(let _0x5b6926=0x0;_0x5b6926<_0x265043['length'];_0x5b6926++){const _0x46d489=_0x265043[_0x5b6926];_0x54d1a6[_0x46d489['id']]={'id':_0x46d489['id'],'hex':'#'+_0x46d489[_0x40b97d(0x149)]};}const [_0x1db34f]=conn['promise']()['query'](_0x2dcf36);for(let _0x280819=0x0;_0x280819<_0x1db34f[_0x40b97d(0x14e)];_0x280819++){const _0x1c27c6=_0x1db34f[_0x280819];_0x4cb759[_0x1c27c6['id']]={'id':_0x1c27c6['id'],'name':_0x1c27c6['name'],'color_id':_0x1c27c6[_0x40b97d(0x161)],'color':_0x54d1a6[_0x1c27c6[_0x40b97d(0x161)]][_0x40b97d(0x149)]};}return _0x5efcce['send'](_0x4cb759);}catch(_0x1e25f4){console[_0x40b97d(0x148)](_0x40b97d(0x14c)+_0x1e25f4),_0x5efcce[_0x40b97d(0x156)]('[]');}}),router['get']('/employees',async(_0x167715,_0x283b91)=>{const _0x13ff9f=a12_0x976017;try{const _0x28c381='SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees',_0x1dd50f=_0x13ff9f(0x14f),_0x355051=_0x13ff9f(0x16e),_0x54d45e=[],_0x5c1e4f={},_0x31d77a={};let [_0x5b8e3c]=await conn[_0x13ff9f(0x16b)]()[_0x13ff9f(0x162)](_0x355051);for(let _0x19a1cf=0x0;_0x19a1cf<_0x5b8e3c[_0x13ff9f(0x14e)];_0x19a1cf++){const _0x24e9aa=_0x5b8e3c[_0x19a1cf];_0x31d77a[_0x24e9aa['id']]={'id':_0x24e9aa['id'],'hex':'#'+_0x24e9aa[_0x13ff9f(0x149)]};}console['log']({'colors':_0x31d77a});const [_0x5ec585]=await conn[_0x13ff9f(0x16b)]()[_0x13ff9f(0x162)](_0x1dd50f);for(let _0x165e9f=0x0;_0x165e9f<_0x5ec585[_0x13ff9f(0x14e)];_0x165e9f++){const _0x4cc970=_0x5ec585[_0x165e9f];_0x5c1e4f[_0x4cc970['id']]={'id':_0x4cc970['id'],'name':_0x4cc970[_0x13ff9f(0x167)],'color_id':_0x4cc970[_0x13ff9f(0x161)],'color':_0x31d77a[_0x4cc970[_0x13ff9f(0x161)]][_0x13ff9f(0x149)]};}const [_0x35c8b6]=await conn[_0x13ff9f(0x16b)]()['query'](_0x28c381);for(let _0x4961f4=0x0;_0x4961f4<_0x35c8b6['length'];_0x4961f4++){const _0x32da92=_0x35c8b6[_0x4961f4];_0x54d45e[_0x13ff9f(0x16d)]({'id':_0x32da92['id'],'room_id':_0x32da92[_0x13ff9f(0x155)],'employee_number':_0x32da92[_0x13ff9f(0x171)],'phone':_0x32da92[_0x13ff9f(0x15d)],'floor_id':_0x32da92[_0x13ff9f(0x164)],'org2_id':_0x32da92[_0x13ff9f(0x15a)],'firstname':_0x32da92['employeeName'][_0x13ff9f(0x165)]('\x20')[0x0],'lastname':_0x32da92['employeeName'][_0x13ff9f(0x165)]('\x20')[0x1],'employeeName':_0x32da92[_0x13ff9f(0x160)],'department':_0x5c1e4f[_0x32da92['org2_id']]});}_0x283b91[_0x13ff9f(0x156)](_0x54d45e);}catch(_0x4cbfb9){console[_0x13ff9f(0x148)]('DB\x20/employees\x20error'+_0x4cbfb9),_0x283b91[_0x13ff9f(0x156)]('[]');}}),module['exports']=router;
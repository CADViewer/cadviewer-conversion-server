const a13_0x5c3b74=a13_0x3e50;(function(_0x1643e3,_0x155ab2){const _0x1f1d4d=a13_0x3e50,_0x125bb3=_0x1643e3();while(!![]){try{const _0x34a43c=-parseInt(_0x1f1d4d(0xbf))/0x1*(-parseInt(_0x1f1d4d(0xa9))/0x2)+parseInt(_0x1f1d4d(0xa6))/0x3*(parseInt(_0x1f1d4d(0x98))/0x4)+-parseInt(_0x1f1d4d(0xb7))/0x5+parseInt(_0x1f1d4d(0xb5))/0x6*(-parseInt(_0x1f1d4d(0xbb))/0x7)+parseInt(_0x1f1d4d(0xa2))/0x8*(-parseInt(_0x1f1d4d(0xab))/0x9)+-parseInt(_0x1f1d4d(0x9f))/0xa*(parseInt(_0x1f1d4d(0xad))/0xb)+parseInt(_0x1f1d4d(0xac))/0xc;if(_0x34a43c===_0x155ab2)break;else _0x125bb3['push'](_0x125bb3['shift']());}catch(_0x43c627){_0x125bb3['push'](_0x125bb3['shift']());}}}(a13_0x5837,0x6e803));function a13_0x5837(){const _0x50409c=['exports','100VffFBx','org2_id','/original/','16JQiubg','get','image_updated_at','path','9hoUQIB','params','room_id','1008520knMETZ','hex','1064709rDRdVL','13065504FlYIQa','815617AIPdvn','express','name','employeeName','DB\x20/org2s\x20error','employee_number','promise','send','2676vWhmXR','color_id','2792900yoeMfd','length','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','image_content_type','469qERKOK','updated_at','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','phone','1UzPxyY','split','push','log','568124EJOpcS','SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','../CADViewer_config.json','Router','/photos/:room_id','query'];a13_0x5837=function(){return _0x50409c;};return a13_0x5837();}function a13_0x3e50(_0x523125,_0x3932cc){const _0x5837f8=a13_0x5837();return a13_0x3e50=function(_0x3e50d8,_0x207f22){_0x3e50d8=_0x3e50d8-0x98;let _0x9b85bb=_0x5837f8[_0x3e50d8];return _0x9b85bb;},a13_0x3e50(_0x523125,_0x3932cc);}const fs=require('fs'),path=require(a13_0x5c3b74(0xa5)),config=require(a13_0x5c3b74(0x9a)),conn=require('../libs/mysql.js'),express=require(a13_0x5c3b74(0xae)),router=express[a13_0x5c3b74(0x9b)]();router[a13_0x5c3b74(0xa3)](a13_0x5c3b74(0x9c),async(_0x24e6fc,_0x36371d)=>{const _0x8eeadc=a13_0x5c3b74;try{const _0x328995=_0x24e6fc[_0x8eeadc(0xa7)][_0x8eeadc(0xa8)],_0x475ab5=_0x8eeadc(0x99)+_0x328995,_0x11c81a=[],[_0xb306d8]=await conn[_0x8eeadc(0xb3)]()['query'](_0x475ab5);for(let _0xe7e89a=0x0;_0xe7e89a<_0xb306d8[_0x8eeadc(0xb8)];_0xe7e89a++){const _0x15578a=_0xb306d8[_0xe7e89a];_0x11c81a[_0x8eeadc(0xc1)]({'id':_0x15578a['id'],'image_file_name':'/photos/'+_0x15578a['id']+_0x8eeadc(0xa1)+_0x15578a['image_file_name'],'image_content_type':_0x15578a[_0x8eeadc(0xba)],'image_file_size':_0x15578a['image_file_size'],'image_updated_at':_0x15578a[_0x8eeadc(0xa4)],'created_at':_0x15578a['created_at'],'updated_at':_0x15578a[_0x8eeadc(0xbc)]});}_0x36371d['send'](_0x11c81a);}catch(_0xba68d2){console[_0x8eeadc(0xc2)](_0xba68d2),_0x36371d[_0x8eeadc(0xb4)]([]);}}),router[a13_0x5c3b74(0xa3)]('/org2s',async(_0x3ac961,_0x4e8118)=>{const _0x97688a=a13_0x5c3b74;try{const _0xe65ce1=_0x97688a(0xb9),_0x4df554=_0x97688a(0xbd),_0x390ba1='SELECT\x20id,\x20hex\x20FROM\x20colors',_0x43740a=[],_0x14d018={},_0x1a0017={},[_0x564eae]=await conn[_0x97688a(0xb3)]()[_0x97688a(0x9d)](_0x390ba1);for(let _0x1ba792=0x0;_0x1ba792<_0x564eae[_0x97688a(0xb8)];_0x1ba792++){const _0x10a446=_0x564eae[_0x1ba792];_0x1a0017[_0x10a446['id']]={'id':_0x10a446['id'],'hex':'#'+_0x10a446['hex']};}const [_0x2400e1]=conn[_0x97688a(0xb3)]()[_0x97688a(0x9d)](_0x4df554);for(let _0x434173=0x0;_0x434173<_0x2400e1[_0x97688a(0xb8)];_0x434173++){const _0x5da491=_0x2400e1[_0x434173];_0x14d018[_0x5da491['id']]={'id':_0x5da491['id'],'name':_0x5da491[_0x97688a(0xaf)],'color_id':_0x5da491[_0x97688a(0xb6)],'color':_0x1a0017[_0x5da491['color_id']][_0x97688a(0xaa)]};}return _0x4e8118['send'](_0x14d018);}catch(_0x64b9db){console[_0x97688a(0xc2)](_0x97688a(0xb1)+_0x64b9db),_0x4e8118[_0x97688a(0xb4)]('[]');}}),router[a13_0x5c3b74(0xa3)]('/employees',async(_0x73b820,_0x192526)=>{const _0xc830b7=a13_0x5c3b74;try{const _0x4bfc62=_0xc830b7(0xb9),_0x51235a=_0xc830b7(0xbd),_0x135d8a='SELECT\x20id,\x20hex\x20FROM\x20colors',_0x5204ef=[],_0x267048={},_0x4c07c2={};let [_0x50dcf9]=await conn[_0xc830b7(0xb3)]()[_0xc830b7(0x9d)](_0x135d8a);for(let _0x3a86c7=0x0;_0x3a86c7<_0x50dcf9[_0xc830b7(0xb8)];_0x3a86c7++){const _0x457bb1=_0x50dcf9[_0x3a86c7];_0x4c07c2[_0x457bb1['id']]={'id':_0x457bb1['id'],'hex':'#'+_0x457bb1[_0xc830b7(0xaa)]};}console['log']({'colors':_0x4c07c2});const [_0x25115a]=await conn['promise']()[_0xc830b7(0x9d)](_0x51235a);for(let _0x18a2b2=0x0;_0x18a2b2<_0x25115a['length'];_0x18a2b2++){const _0x145392=_0x25115a[_0x18a2b2];_0x267048[_0x145392['id']]={'id':_0x145392['id'],'name':_0x145392[_0xc830b7(0xaf)],'color_id':_0x145392[_0xc830b7(0xb6)],'color':_0x4c07c2[_0x145392[_0xc830b7(0xb6)]][_0xc830b7(0xaa)]};}const [_0x31c981]=await conn[_0xc830b7(0xb3)]()[_0xc830b7(0x9d)](_0x4bfc62);for(let _0x591a77=0x0;_0x591a77<_0x31c981[_0xc830b7(0xb8)];_0x591a77++){const _0x4a2bd5=_0x31c981[_0x591a77];_0x5204ef['push']({'id':_0x4a2bd5['id'],'room_id':_0x4a2bd5[_0xc830b7(0xa8)],'employee_number':_0x4a2bd5[_0xc830b7(0xb2)],'phone':_0x4a2bd5[_0xc830b7(0xbe)],'floor_id':_0x4a2bd5['floor_id'],'org2_id':_0x4a2bd5[_0xc830b7(0xa0)],'firstname':_0x4a2bd5['employeeName'][_0xc830b7(0xc0)]('\x20')[0x0],'lastname':_0x4a2bd5[_0xc830b7(0xb0)]['split']('\x20')[0x1],'employeeName':_0x4a2bd5[_0xc830b7(0xb0)],'department':_0x267048[_0x4a2bd5[_0xc830b7(0xa0)]]});}_0x192526['send'](_0x5204ef);}catch(_0x143686){console['log']('DB\x20/employees\x20error'+_0x143686),_0x192526[_0xc830b7(0xb4)]('[]');}}),module[a13_0x5c3b74(0x9e)]=router;
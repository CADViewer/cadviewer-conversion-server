function a12_0x4785(_0x279456,_0x2faac3){const _0x276181=a12_0x2761();return a12_0x4785=function(_0x478554,_0x1ddfa5){_0x478554=_0x478554-0x152;let _0x1de1e3=_0x276181[_0x478554];return _0x1de1e3;},a12_0x4785(_0x279456,_0x2faac3);}const a12_0x4d29d1=a12_0x4785;(function(_0x2e4f40,_0x42c3a3){const _0x56c327=a12_0x4785,_0x4966d4=_0x2e4f40();while(!![]){try{const _0x45be4e=parseInt(_0x56c327(0x15d))/0x1*(parseInt(_0x56c327(0x17d))/0x2)+parseInt(_0x56c327(0x176))/0x3*(parseInt(_0x56c327(0x16f))/0x4)+parseInt(_0x56c327(0x152))/0x5*(parseInt(_0x56c327(0x15e))/0x6)+-parseInt(_0x56c327(0x15b))/0x7*(-parseInt(_0x56c327(0x171))/0x8)+-parseInt(_0x56c327(0x157))/0x9*(parseInt(_0x56c327(0x17f))/0xa)+parseInt(_0x56c327(0x179))/0xb*(-parseInt(_0x56c327(0x173))/0xc)+parseInt(_0x56c327(0x155))/0xd*(-parseInt(_0x56c327(0x165))/0xe);if(_0x45be4e===_0x42c3a3)break;else _0x4966d4['push'](_0x4966d4['shift']());}catch(_0x3eddba){_0x4966d4['push'](_0x4966d4['shift']());}}}(a12_0x2761,0x72f6d));function a12_0x2761(){const _0x3cd563=['room_id','12ZCLHeR','split','send','6ohzigb','employee_number','query','4589002EehthX','../CADViewer_config.json','../libs/mysql.js','params','47446OkxFpi','image_content_type','4134490yKUXqy','305gTHwLA','exports','promise','3830294hKoRdg','created_at','9FkBksE','hex','SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20','DB\x20/employees\x20error','327838JosVTS','image_file_name','31lCkDVl','76362RpmxCA','Router','color_id','log','/photos/','phone','length','56tzozUi','floor_id','name','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','/employees','push','updated_at','get','image_updated_at','625280PXSxcg','org2_id','112uMTfrX'];a12_0x2761=function(){return _0x3cd563;};return a12_0x2761();}const fs=require('fs'),path=require('path'),config=require(a12_0x4d29d1(0x17a)),conn=require(a12_0x4d29d1(0x17b)),express=require('express'),router=express[a12_0x4d29d1(0x15f)]();router['get']('/photos/:room_id',async(_0x28076d,_0x3c8058)=>{const _0x2b17d0=a12_0x4d29d1;try{const _0x4d1c47=_0x28076d[_0x2b17d0(0x17c)][_0x2b17d0(0x172)],_0x1bbba8=_0x2b17d0(0x159)+_0x4d1c47,_0x274738=[],[_0x3aa799]=await conn[_0x2b17d0(0x154)]()[_0x2b17d0(0x178)](_0x1bbba8);for(let _0x4be3b0=0x0;_0x4be3b0<_0x3aa799['length'];_0x4be3b0++){const _0x53a457=_0x3aa799[_0x4be3b0];_0x274738[_0x2b17d0(0x16b)]({'id':_0x53a457['id'],'image_file_name':_0x2b17d0(0x162)+_0x53a457['id']+'/original/'+_0x53a457[_0x2b17d0(0x15c)],'image_content_type':_0x53a457[_0x2b17d0(0x17e)],'image_file_size':_0x53a457['image_file_size'],'image_updated_at':_0x53a457[_0x2b17d0(0x16e)],'created_at':_0x53a457[_0x2b17d0(0x156)],'updated_at':_0x53a457[_0x2b17d0(0x16c)]});}_0x3c8058[_0x2b17d0(0x175)](_0x274738);}catch(_0x142dd4){console['log'](_0x142dd4),_0x3c8058[_0x2b17d0(0x175)]([]);}}),router[a12_0x4d29d1(0x16d)]('/org2s',async(_0x568f1a,_0x28e420)=>{const _0xc85449=a12_0x4d29d1;try{const _0x169304=_0xc85449(0x168),_0x2e98fd=_0xc85449(0x169),_0x5d0055='SELECT\x20id,\x20hex\x20FROM\x20colors',_0x45d64d=[],_0x89b1e7={},_0x103988={},[_0x33fc1d]=await conn[_0xc85449(0x154)]()[_0xc85449(0x178)](_0x5d0055);for(let _0x2be1de=0x0;_0x2be1de<_0x33fc1d[_0xc85449(0x164)];_0x2be1de++){const _0x130f84=_0x33fc1d[_0x2be1de];_0x103988[_0x130f84['id']]={'id':_0x130f84['id'],'hex':'#'+_0x130f84['hex']};}const [_0x29b025]=conn[_0xc85449(0x154)]()[_0xc85449(0x178)](_0x2e98fd);for(let _0x2ea020=0x0;_0x2ea020<_0x29b025[_0xc85449(0x164)];_0x2ea020++){const _0x4d549c=_0x29b025[_0x2ea020];_0x89b1e7[_0x4d549c['id']]={'id':_0x4d549c['id'],'name':_0x4d549c[_0xc85449(0x167)],'color_id':_0x4d549c[_0xc85449(0x160)],'color':_0x103988[_0x4d549c[_0xc85449(0x160)]][_0xc85449(0x158)]};}return _0x28e420[_0xc85449(0x175)](_0x89b1e7);}catch(_0x5462fd){console[_0xc85449(0x161)]('DB\x20/org2s\x20error'+_0x5462fd),_0x28e420[_0xc85449(0x175)]('[]');}}),router[a12_0x4d29d1(0x16d)](a12_0x4d29d1(0x16a),async(_0x260f50,_0x4af265)=>{const _0x18aa72=a12_0x4d29d1;try{const _0x58c175='SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees',_0x18e50f=_0x18aa72(0x169),_0x50736f='SELECT\x20id,\x20hex\x20FROM\x20colors',_0x243a64=[],_0x3ea835={},_0x4e7baa={};let [_0x339311]=await conn[_0x18aa72(0x154)]()[_0x18aa72(0x178)](_0x50736f);for(let _0x1dfa41=0x0;_0x1dfa41<_0x339311[_0x18aa72(0x164)];_0x1dfa41++){const _0x572e91=_0x339311[_0x1dfa41];_0x4e7baa[_0x572e91['id']]={'id':_0x572e91['id'],'hex':'#'+_0x572e91['hex']};}console[_0x18aa72(0x161)]({'colors':_0x4e7baa});const [_0x391664]=await conn['promise']()[_0x18aa72(0x178)](_0x18e50f);for(let _0x49a743=0x0;_0x49a743<_0x391664[_0x18aa72(0x164)];_0x49a743++){const _0x575d69=_0x391664[_0x49a743];_0x3ea835[_0x575d69['id']]={'id':_0x575d69['id'],'name':_0x575d69[_0x18aa72(0x167)],'color_id':_0x575d69[_0x18aa72(0x160)],'color':_0x4e7baa[_0x575d69['color_id']][_0x18aa72(0x158)]};}const [_0x278a47]=await conn[_0x18aa72(0x154)]()[_0x18aa72(0x178)](_0x58c175);for(let _0x1c7df4=0x0;_0x1c7df4<_0x278a47['length'];_0x1c7df4++){const _0x5a47b3=_0x278a47[_0x1c7df4];_0x243a64[_0x18aa72(0x16b)]({'id':_0x5a47b3['id'],'room_id':_0x5a47b3[_0x18aa72(0x172)],'employee_number':_0x5a47b3[_0x18aa72(0x177)],'phone':_0x5a47b3[_0x18aa72(0x163)],'floor_id':_0x5a47b3[_0x18aa72(0x166)],'org2_id':_0x5a47b3[_0x18aa72(0x170)],'firstname':_0x5a47b3['employeeName'][_0x18aa72(0x174)]('\x20')[0x0],'lastname':_0x5a47b3['employeeName'][_0x18aa72(0x174)]('\x20')[0x1],'employeeName':_0x5a47b3['employeeName'],'department':_0x3ea835[_0x5a47b3['org2_id']]});}_0x4af265[_0x18aa72(0x175)](_0x243a64);}catch(_0x1bda86){console['log'](_0x18aa72(0x15a)+_0x1bda86),_0x4af265['send']('[]');}}),module[a12_0x4d29d1(0x153)]=router;
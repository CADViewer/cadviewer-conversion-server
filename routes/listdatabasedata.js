const a12_0x9cbc42=a12_0x395b;(function(_0x173c9e,_0x24fcca){const _0x57412b=a12_0x395b,_0x3948d9=_0x173c9e();while(!![]){try{const _0x47ac69=-parseInt(_0x57412b(0x1ae))/0x1+parseInt(_0x57412b(0x1c9))/0x2*(parseInt(_0x57412b(0x1a5))/0x3)+parseInt(_0x57412b(0x1bb))/0x4*(-parseInt(_0x57412b(0x1c0))/0x5)+-parseInt(_0x57412b(0x1ac))/0x6*(-parseInt(_0x57412b(0x1c6))/0x7)+-parseInt(_0x57412b(0x1ab))/0x8*(-parseInt(_0x57412b(0x1b0))/0x9)+parseInt(_0x57412b(0x1b3))/0xa+parseInt(_0x57412b(0x1b5))/0xb*(-parseInt(_0x57412b(0x1b7))/0xc);if(_0x47ac69===_0x24fcca)break;else _0x3948d9['push'](_0x3948d9['shift']());}catch(_0x6dd64e){_0x3948d9['push'](_0x3948d9['shift']());}}}(a12_0x3bf9,0x82012));const fs=require('fs'),path=require(a12_0x9cbc42(0x1b9)),config=require('../CADViewer_config.json'),conn=require(a12_0x9cbc42(0x1a6)),express=require('express'),router=express[a12_0x9cbc42(0x1bd)]();function a12_0x395b(_0x377a71,_0x46675d){const _0x3bf944=a12_0x3bf9();return a12_0x395b=function(_0x395b30,_0xc594e9){_0x395b30=_0x395b30-0x19e;let _0x2a2dfb=_0x3bf944[_0x395b30];return _0x2a2dfb;},a12_0x395b(_0x377a71,_0x46675d);}function a12_0x3bf9(){const _0xdfd761=['36btKKRZ','DB\x20/employees\x20error','path','floor_id','124FKecVZ','send','Router','/original/','name','51005GMmUbS','org2_id','image_file_name','room_id','SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees','/photos/:room_id','6061321fyoKsY','hex','phone','4TRTCBG','promise','SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s','color_id','log','employeeName','image_file_size','image_updated_at','1514865nKvGbg','../libs/mysql.js','get','SELECT\x20id,\x20hex\x20FROM\x20colors','DB\x20/org2s\x20error','params','4601224QYYovi','6IiocVp','length','621793kBhVGQ','query','9pkcOKt','created_at','updated_at','2018170XsapRC','split','4334957mzVsXz','exports'];a12_0x3bf9=function(){return _0xdfd761;};return a12_0x3bf9();}router[a12_0x9cbc42(0x1a7)](a12_0x9cbc42(0x1c5),async(_0x2f9ab4,_0x19c0ee)=>{const _0xb9fe58=a12_0x9cbc42;try{const _0x30ea35=_0x2f9ab4[_0xb9fe58(0x1aa)][_0xb9fe58(0x1c3)],_0x52a727='SELECT\x20id,\x20image_file_name,\x20image_content_type,\x20image_file_size,\x20image_updated_at,\x20created_at,\x20updated_at\x20FROM\x20photos\x20WHERE\x20room_id\x20=\x20'+_0x30ea35,_0x4e7820=[],[_0x2d98a2]=await conn[_0xb9fe58(0x19e)]()[_0xb9fe58(0x1af)](_0x52a727);for(let _0x1572f6=0x0;_0x1572f6<_0x2d98a2[_0xb9fe58(0x1ad)];_0x1572f6++){const _0x46dbdd=_0x2d98a2[_0x1572f6];_0x4e7820['push']({'id':_0x46dbdd['id'],'image_file_name':'/photos/'+_0x46dbdd['id']+_0xb9fe58(0x1be)+_0x46dbdd[_0xb9fe58(0x1c2)],'image_content_type':_0x46dbdd['image_content_type'],'image_file_size':_0x46dbdd[_0xb9fe58(0x1a3)],'image_updated_at':_0x46dbdd[_0xb9fe58(0x1a4)],'created_at':_0x46dbdd[_0xb9fe58(0x1b1)],'updated_at':_0x46dbdd[_0xb9fe58(0x1b2)]});}_0x19c0ee[_0xb9fe58(0x1bc)](_0x4e7820);}catch(_0x46df4a){console['log'](_0x46df4a),_0x19c0ee[_0xb9fe58(0x1bc)]([]);}}),router[a12_0x9cbc42(0x1a7)]('/org2s',async(_0x2b6926,_0x3f7786)=>{const _0x58c778=a12_0x9cbc42;try{const _0x41aed3='SELECT\x20id,\x20room_id,\x20employee_number,\x20phone,\x20floor_id,\x20org2_id,\x20employeeName\x20FROM\x20employees',_0x42d333='SELECT\x20id,\x20name,\x20color_id\x20FROM\x20org2s',_0xf3660f=_0x58c778(0x1a8),_0x2343dd=[],_0xb6f6a3={},_0x5497cc={},[_0x595a88]=await conn[_0x58c778(0x19e)]()[_0x58c778(0x1af)](_0xf3660f);for(let _0x58b2b3=0x0;_0x58b2b3<_0x595a88['length'];_0x58b2b3++){const _0x209c00=_0x595a88[_0x58b2b3];_0x5497cc[_0x209c00['id']]={'id':_0x209c00['id'],'hex':'#'+_0x209c00['hex']};}const [_0x2f8bcf]=conn[_0x58c778(0x19e)]()[_0x58c778(0x1af)](_0x42d333);for(let _0x29d45e=0x0;_0x29d45e<_0x2f8bcf[_0x58c778(0x1ad)];_0x29d45e++){const _0xd51ef=_0x2f8bcf[_0x29d45e];_0xb6f6a3[_0xd51ef['id']]={'id':_0xd51ef['id'],'name':_0xd51ef[_0x58c778(0x1bf)],'color_id':_0xd51ef['color_id'],'color':_0x5497cc[_0xd51ef[_0x58c778(0x1a0)]][_0x58c778(0x1c7)]};}return _0x3f7786['send'](_0xb6f6a3);}catch(_0x5e338e){console[_0x58c778(0x1a1)](_0x58c778(0x1a9)+_0x5e338e),_0x3f7786['send']('[]');}}),router['get']('/employees',async(_0x2f63ca,_0x2c1154)=>{const _0x144f54=a12_0x9cbc42;try{const _0x365394=_0x144f54(0x1c4),_0x3f2ce0=_0x144f54(0x19f),_0x190516=_0x144f54(0x1a8),_0x4ba826=[],_0x2b0b33={},_0xe3420={};let [_0x50abd4]=await conn[_0x144f54(0x19e)]()['query'](_0x190516);for(let _0x5d7010=0x0;_0x5d7010<_0x50abd4[_0x144f54(0x1ad)];_0x5d7010++){const _0x2c9c8e=_0x50abd4[_0x5d7010];_0xe3420[_0x2c9c8e['id']]={'id':_0x2c9c8e['id'],'hex':'#'+_0x2c9c8e[_0x144f54(0x1c7)]};}console[_0x144f54(0x1a1)]({'colors':_0xe3420});const [_0x280a59]=await conn[_0x144f54(0x19e)]()[_0x144f54(0x1af)](_0x3f2ce0);for(let _0x93201b=0x0;_0x93201b<_0x280a59[_0x144f54(0x1ad)];_0x93201b++){const _0x23dd3e=_0x280a59[_0x93201b];_0x2b0b33[_0x23dd3e['id']]={'id':_0x23dd3e['id'],'name':_0x23dd3e[_0x144f54(0x1bf)],'color_id':_0x23dd3e[_0x144f54(0x1a0)],'color':_0xe3420[_0x23dd3e[_0x144f54(0x1a0)]][_0x144f54(0x1c7)]};}const [_0x6a20e7]=await conn[_0x144f54(0x19e)]()[_0x144f54(0x1af)](_0x365394);for(let _0xe4d434=0x0;_0xe4d434<_0x6a20e7['length'];_0xe4d434++){const _0x2406f1=_0x6a20e7[_0xe4d434];_0x4ba826['push']({'id':_0x2406f1['id'],'room_id':_0x2406f1[_0x144f54(0x1c3)],'employee_number':_0x2406f1['employee_number'],'phone':_0x2406f1[_0x144f54(0x1c8)],'floor_id':_0x2406f1[_0x144f54(0x1ba)],'org2_id':_0x2406f1['org2_id'],'firstname':_0x2406f1['employeeName'][_0x144f54(0x1b4)]('\x20')[0x0],'lastname':_0x2406f1['employeeName'][_0x144f54(0x1b4)]('\x20')[0x1],'employeeName':_0x2406f1[_0x144f54(0x1a2)],'department':_0x2b0b33[_0x2406f1[_0x144f54(0x1c1)]]});}_0x2c1154[_0x144f54(0x1bc)](_0x4ba826);}catch(_0x47f2d7){console[_0x144f54(0x1a1)](_0x144f54(0x1b8)+_0x47f2d7),_0x2c1154[_0x144f54(0x1bc)]('[]');}}),module[a12_0x9cbc42(0x1b6)]=router;
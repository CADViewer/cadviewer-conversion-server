const a2_0x247b20=a2_0x174a;function a2_0x174a(_0x2da77d,_0x3ccf4e){const _0x3ab4f7=a2_0x3ab4();return a2_0x174a=function(_0x174a20,_0x2ed4d2){_0x174a20=_0x174a20-0xfc;let _0x33ed99=_0x3ab4f7[_0x174a20];return _0x33ed99;},a2_0x174a(_0x2da77d,_0x3ccf4e);}(function(_0x31350f,_0xe097d8){const _0x1bf539=a2_0x174a,_0x15d446=_0x31350f();while(!![]){try{const _0x3ab911=parseInt(_0x1bf539(0x128))/0x1*(parseInt(_0x1bf539(0x10c))/0x2)+-parseInt(_0x1bf539(0x130))/0x3+parseInt(_0x1bf539(0x135))/0x4+-parseInt(_0x1bf539(0x111))/0x5*(parseInt(_0x1bf539(0x12d))/0x6)+parseInt(_0x1bf539(0x134))/0x7*(-parseInt(_0x1bf539(0x124))/0x8)+parseInt(_0x1bf539(0x119))/0x9*(parseInt(_0x1bf539(0x112))/0xa)+parseInt(_0x1bf539(0x10a))/0xb*(parseInt(_0x1bf539(0x101))/0xc);if(_0x3ab911===_0xe097d8)break;else _0x15d446['push'](_0x15d446['shift']());}catch(_0x1f7f23){_0x15d446['push'](_0x15d446['shift']());}}}(a2_0x3ab4,0xd126e));const config=require(a2_0x247b20(0x11d)),conn=require(a2_0x247b20(0x114)),transporter=require(a2_0x247b20(0xfd))[a2_0x247b20(0xff)],getWelcomeEmailTemplate=(_0x12bf9a,_0x52cfac)=>{const _0x223551=a2_0x247b20;return _0x223551(0x12c)+_0x52cfac+'\x22\x20class=\x22button\x22>Validate\x20my\x20email\x20address</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20the\x20button\x20doesn\x27t\x20work,\x20you\x20can\x20copy\x20and\x20paste\x20this\x20link\x20in\x20your\x20browser:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22word-break:\x20break-all;\x22>'+_0x52cfac+_0x223551(0x127);},sendWelcomeEmail=async(_0x4a9ed9,_0x4aa3f8)=>{const _0x26b272=a2_0x247b20;try{let _0x5f3639=config[_0x26b272(0x118)];_0x5f3639[_0x26b272(0x133)]('/')&&(_0x5f3639=_0x5f3639[_0x26b272(0x11b)](0x0,-0x1));const _0x75df1e=_0x5f3639+_0x26b272(0x131)+_0x4aa3f8,_0x33386e=getWelcomeEmailTemplate(_0x4a9ed9,_0x75df1e),_0xd90e78={'from':config[_0x26b272(0x102)],'to':_0x4a9ed9[_0x26b272(0x108)],'subject':_0x26b272(0x12a),'text':_0x26b272(0x12a),'html':_0x33386e};await transporter[_0x26b272(0x117)](_0xd90e78),console[_0x26b272(0x10d)]('Welcome\x20email\x20sent\x20to\x20'+_0x4a9ed9[_0x26b272(0x108)]);}catch(_0x3361ca){console[_0x26b272(0x10d)](_0x26b272(0x115)),console['log'](_0x26b272(0x129)+_0x4a9ed9[_0x26b272(0x108)]+':',_0x3361ca);throw _0x3361ca;}},getAccountDeletionPreventionTemplate=_0x597083=>{const _0x3988c1=a2_0x247b20;return'\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Important:\x20Your\x20CADViewer\x20Account</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Hello\x20'+(_0x597083[_0x3988c1(0x123)]||_0x597083[_0x3988c1(0x12f)])+',</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20wanted\x20to\x20inform\x20you\x20that\x20your\x20demo\x20account\x20will\x20expire\x20in\x202\x20days\x20and\x20will\x20be\x20automatically\x20deleted.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20you\x20wish\x20to\x20keep\x20your\x20account\x20and\x20all\x20your\x20data,\x20please\x20contact\x20us\x20on\x20<a\x20href=\x22mailto:developer@tailormade.com\x22>developer@tailormade.com</a>\x20or\x20<a\x20href=\x22mailto:internationalsales@tailormade.com\x22>internationalsales@tailormade.com</a>\x20as\x20soon\x20as\x20possible.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Thank\x20you\x20for\x20using\x20CADViewer!</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20';},sendAccountDeletionPreventionEmails=async()=>{const _0x555daf=a2_0x247b20;try{const [_0x5f53b1]=await conn['promise']()[_0x555daf(0x11e)](_0x555daf(0x11c),[config[_0x555daf(0x11f)]-config[_0x555daf(0x12e)]]);if(_0x5f53b1[_0x555daf(0x100)]===0x0){console[_0x555daf(0x10d)](_0x555daf(0xfc));return;}for(const _0x3f4530 of _0x5f53b1){const _0x25f0df=getAccountDeletionPreventionTemplate(_0x3f4530),_0x32f2fa={'from':config[_0x555daf(0x102)],'to':_0x3f4530[_0x555daf(0x108)],'subject':_0x555daf(0x126),'text':_0x555daf(0x105),'html':_0x25f0df};try{await transporter['sendMail'](_0x32f2fa),console[_0x555daf(0x10d)](_0x555daf(0x125)+_0x3f4530['email']);}catch(_0x1b498c){console[_0x555daf(0x10d)](_0x555daf(0x115)),console[_0x555daf(0x10d)](_0x555daf(0xfe)+_0x3f4530[_0x555daf(0x108)]),console[_0x555daf(0x10d)](_0x1b498c);}}}catch(_0x5d3f53){console[_0x555daf(0x10d)](_0x555daf(0x115)),console['log'](_0x555daf(0x109)),console[_0x555daf(0x10d)](_0x5d3f53);}},getFollowUpEmailTemplate=(_0x3659ad,_0x5f0ee3,_0x657ca3)=>{const _0x4010f1=a2_0x247b20,_0x2b5559={0x1:_0x4010f1(0x122),0x2:'6\x20hours',0x3:_0x4010f1(0x104)}[_0x657ca3];return _0x4010f1(0x103)+(_0x3659ad['first_name']||_0x3659ad[_0x4010f1(0x12f)])+_0x4010f1(0x132)+_0x2b5559+_0x4010f1(0x107)+_0x5f0ee3+_0x4010f1(0x11a)+_0x5f0ee3+_0x4010f1(0x127);},sendFollowUpEmails=async()=>{const _0x5d0b23=a2_0x247b20;try{const _0x495cc9='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20*\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x0a\x20\x20\x20\x20\x20\x20WHERE\x20is_enabled\x20=\x200\x0a\x20\x20\x20\x20\x20\x20AND\x20validation_token\x20IS\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20AND\x20follow_up_count\x20<\x203\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20<=\x20DATE_SUB(NOW(),\x20INTERVAL\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20CASE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x200\x20THEN\x203\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x201\x20THEN\x206\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x202\x20THEN\x2012\x0a\x20\x20\x20\x20\x20\x20\x20\x20END\x0a\x20\x20\x20\x20\x20\x20HOUR)\x0a\x20\x20\x20\x20',[_0x4f7bfb]=await conn[_0x5d0b23(0x116)]()['execute'](_0x495cc9);for(const _0x52ff95 of _0x4f7bfb){const _0x4e2b53=config[_0x5d0b23(0x118)]+_0x5d0b23(0x131)+_0x52ff95[_0x5d0b23(0x10b)],_0x162395=getFollowUpEmailTemplate(_0x52ff95,_0x4e2b53,_0x52ff95[_0x5d0b23(0x12b)]+0x1),_0x124d25={'from':config[_0x5d0b23(0x102)],'to':_0x52ff95[_0x5d0b23(0x108)],'subject':_0x5d0b23(0x10e),'text':_0x5d0b23(0x110),'html':_0x162395};try{await transporter[_0x5d0b23(0x117)](_0x124d25),await conn[_0x5d0b23(0x116)]()[_0x5d0b23(0x11e)](_0x5d0b23(0x120),[_0x52ff95['id']]),console[_0x5d0b23(0x10d)](_0x5d0b23(0x121)+_0x52ff95[_0x5d0b23(0x108)]);}catch(_0x2c333c){console[_0x5d0b23(0x10f)](_0x5d0b23(0x136)+_0x52ff95[_0x5d0b23(0x108)]+':',_0x2c333c);}}}catch(_0x5541e8){console[_0x5d0b23(0x10f)](_0x5d0b23(0x113),_0x5541e8);}};function a2_0x3ab4(){const _0x206ed7=[',</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20noticed\x20that\x20you\x20haven\x27t\x20validated\x20your\x20email\x20address\x20yet.\x20It\x27s\x20been\x20','endsWith','62916ECKYCq','262452lIGipi','Failed\x20to\x20send\x20follow-up\x20email\x20to\x20','No\x20users\x20to\x20notify\x20about\x20account\x20deletion','./mail.js','Failed\x20to\x20send\x20email\x20to\x20','transporter','length','3494964JYCbKf','smtpFrom','\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>CADViewer\x20Email\x20Validation\x20Reminder</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Hello\x20','12\x20hours','Your\x20CADViewer\x20demo\x20account\x20will\x20expire\x20in\x202\x20days.\x20Please\x20contact\x20an\x20administrator\x20if\x20you\x20wish\x20to\x20keep\x20your\x20account.','exports','\x20since\x20you\x20registered.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>To\x20start\x20using\x20CADViewer\x20Visual\x20Query,\x20please\x20validate\x20your\x20email\x20address\x20by\x20clicking\x20the\x20button\x20below:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','email','Error\x20while\x20fetching\x20users\x20for\x20account\x20deletion\x20prevention\x20emails','22bnCopC','validation_token','1535476GPCCBd','log','CADViewer\x20Email\x20Validation\x20Reminder','error','Please\x20validate\x20your\x20CADViewer\x20email\x20address','475oPJjxW','1978610UoivTl','Error\x20in\x20sendFollowUpEmails:','./mysql.js','===================error===================','promise','sendMail','frontendUrl','36mocyvt','\x22\x20class=\x22button\x22>Validate\x20my\x20email\x20address</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20the\x20button\x20doesn\x27t\x20work,\x20you\x20can\x20copy\x20and\x20paste\x20this\x20link\x20in\x20your\x20browser:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22word-break:\x20break-all;\x22>','slice','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','../CADViewer_config.json','execute','demoUserRetentionDays','UPDATE\x20users\x20SET\x20follow_up_count\x20=\x20follow_up_count\x20+\x201\x20WHERE\x20id\x20=\x20?','Follow-up\x20email\x20sent\x20to\x20','3\x20hours','first_name','536bLyjPI','Deletion\x20prevention\x20email\x20sent\x20to\x20','Important:\x20Your\x20CADViewer\x20Account\x20Will\x20Expire\x20Soon','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20','1MhkRmD','Failed\x20to\x20send\x20welcome\x20email\x20to\x20','Welcome\x20to\x20CADViewer','follow_up_count','\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Welcome\x20to\x20CADViewer!</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20are\x20delighted\x20to\x20welcome\x20you\x20to\x20our\x20community.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>To\x20start\x20using\x20CADViewer\x20Visual\x20Query,\x20please\x20validate\x20your\x20email\x20address\x20by\x20clicking\x20the\x20button\x20below:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','21306wvPXDa','demoUserRetentionDaysAlertBeforeDeletion','username','1233186AfagGo','/validate-email/'];a2_0x3ab4=function(){return _0x206ed7;};return a2_0x3ab4();}module[a2_0x247b20(0x106)]={'transporter':transporter,'sendFollowUpEmails':sendFollowUpEmails,'sendAccountDeletionPreventionEmails':sendAccountDeletionPreventionEmails,'sendWelcomeEmail':sendWelcomeEmail};
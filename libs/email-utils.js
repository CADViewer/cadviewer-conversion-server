function a3_0x752c(_0x1ac974,_0x47ec9e){const _0x12ae28=a3_0x12ae();return a3_0x752c=function(_0x752c5f,_0x387c9b){_0x752c5f=_0x752c5f-0xf4;let _0x19a617=_0x12ae28[_0x752c5f];return _0x19a617;},a3_0x752c(_0x1ac974,_0x47ec9e);}const a3_0x31c9ab=a3_0x752c;function a3_0x12ae(){const _0x38d0c5=['Failed\x20to\x20send\x20welcome\x20email\x20to\x20','No\x20users\x20to\x20notify\x20about\x20account\x20deletion','sendMail','./mysql.js','smtpFrom','12\x20hours',',</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20wanted\x20to\x20inform\x20you\x20that\x20your\x20demo\x20account\x20will\x20expire\x20in\x202\x20days\x20and\x20will\x20be\x20automatically\x20deleted.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20you\x20wish\x20to\x20keep\x20your\x20account\x20and\x20all\x20your\x20data,\x20please\x20contact\x20us\x20on\x20<a\x20href=\x22mailto:developer@tailormade.com\x22>developer@tailormade.com</a>\x20or\x20<a\x20href=\x22mailto:internationalsales@tailormade.com\x22>internationalsales@tailormade.com</a>\x20as\x20soon\x20as\x20possible.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Thank\x20you\x20for\x20using\x20CADViewer!</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20','UPDATE\x20users\x20SET\x20follow_up_count\x20=\x20follow_up_count\x20+\x201\x20WHERE\x20id\x20=\x20?','first_name','email','Failed\x20to\x20send\x20follow-up\x20email\x20to\x20','Important:\x20Your\x20CADViewer\x20Account\x20Will\x20Expire\x20Soon','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20','length','slice','transporter','114178drCFwB','1019156nZEoId','3581496fqDAjA',',</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20noticed\x20that\x20you\x20haven\x27t\x20validated\x20your\x20email\x20address\x20yet.\x20It\x27s\x20been\x20','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Welcome\x20to\x20CADViewer!</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20are\x20delighted\x20to\x20welcome\x20you\x20to\x20our\x20community.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>To\x20start\x20using\x20CADViewer\x20Visual\x20Query,\x20please\x20validate\x20your\x20email\x20address\x20by\x20clicking\x20the\x20button\x20below:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','promise','2718550cCLFsZ','Failed\x20to\x20send\x20email\x20to\x20','404jjbKaQ','\x22\x20class=\x22button\x22>Validate\x20my\x20email\x20address</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20the\x20button\x20doesn\x27t\x20work,\x20you\x20can\x20copy\x20and\x20paste\x20this\x20link\x20in\x20your\x20browser:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22word-break:\x20break-all;\x22>','8xbXkUe','Error\x20while\x20fetching\x20users\x20for\x20account\x20deletion\x20prevention\x20emails','/validate-email/','===================error===================','error','Your\x20CADViewer\x20demo\x20account\x20will\x20expire\x20in\x202\x20days.\x20Please\x20contact\x20an\x20administrator\x20if\x20you\x20wish\x20to\x20keep\x20your\x20account.','880516fpkdef','Please\x20validate\x20your\x20CADViewer\x20email\x20address','Follow-up\x20email\x20sent\x20to\x20','3\x20hours','Deletion\x20prevention\x20email\x20sent\x20to\x20','7279227cqjAUj','username','demoUserRetentionDays','validation_token','6\x20hours','log','Welcome\x20email\x20sent\x20to\x20','frontendUrl','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20*\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x0a\x20\x20\x20\x20\x20\x20WHERE\x20is_enabled\x20=\x200\x0a\x20\x20\x20\x20\x20\x20AND\x20validation_token\x20IS\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20AND\x20follow_up_count\x20<\x203\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20<=\x20DATE_SUB(NOW(),\x20INTERVAL\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20CASE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x200\x20THEN\x203\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x201\x20THEN\x206\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x202\x20THEN\x2012\x0a\x20\x20\x20\x20\x20\x20\x20\x20END\x0a\x20\x20\x20\x20\x20\x20HOUR)\x0a\x20\x20\x20\x20','demoUserRetentionDaysAlertBeforeDeletion','3273aLtcFz','execute','Error\x20in\x20sendFollowUpEmails:','../CADViewer_config.json','Welcome\x20to\x20CADViewer'];a3_0x12ae=function(){return _0x38d0c5;};return a3_0x12ae();}(function(_0x4de876,_0x3b16f6){const _0x41f1c9=a3_0x752c,_0x2cc694=_0x4de876();while(!![]){try{const _0xbd53cf=-parseInt(_0x41f1c9(0x119))/0x1+parseInt(_0x41f1c9(0x11a))/0x2+-parseInt(_0x41f1c9(0x104))/0x3*(-parseInt(_0x41f1c9(0x122))/0x4)+-parseInt(_0x41f1c9(0x120))/0x5+-parseInt(_0x41f1c9(0x11b))/0x6+parseInt(_0x41f1c9(0xf5))/0x7+-parseInt(_0x41f1c9(0x124))/0x8*(-parseInt(_0x41f1c9(0xfa))/0x9);if(_0xbd53cf===_0x3b16f6)break;else _0x2cc694['push'](_0x2cc694['shift']());}catch(_0x8c7e06){_0x2cc694['push'](_0x2cc694['shift']());}}}(a3_0x12ae,0x49224));const config=require(a3_0x31c9ab(0x107)),conn=require(a3_0x31c9ab(0x10c)),transporter=require('./mail.js')[a3_0x31c9ab(0x118)],getWelcomeEmailTemplate=(_0xbb375b,_0x32258d)=>{const _0x18d175=a3_0x31c9ab;return _0x18d175(0x11e)+_0x32258d+_0x18d175(0x123)+_0x32258d+_0x18d175(0x115);},sendWelcomeEmail=async(_0x785699,_0x30468a)=>{const _0x50a68e=a3_0x31c9ab;try{let _0x1b8559=config['frontendUrl'];_0x1b8559['endsWith']('/')&&(_0x1b8559=_0x1b8559[_0x50a68e(0x117)](0x0,-0x1));const _0x44e1b5=_0x1b8559+_0x50a68e(0x126)+_0x30468a,_0x1392a9=getWelcomeEmailTemplate(_0x785699,_0x44e1b5),_0x505c3f={'from':config[_0x50a68e(0x10d)],'to':_0x785699[_0x50a68e(0x112)],'subject':_0x50a68e(0x108),'text':'Welcome\x20to\x20CADViewer','html':_0x1392a9};await transporter[_0x50a68e(0x10b)](_0x505c3f),console[_0x50a68e(0xff)](_0x50a68e(0x100)+_0x785699[_0x50a68e(0x112)]);}catch(_0x178c74){console['log'](_0x50a68e(0x127)),console[_0x50a68e(0xff)](_0x50a68e(0x109)+_0x785699[_0x50a68e(0x112)]+':',_0x178c74);throw _0x178c74;}},getAccountDeletionPreventionTemplate=_0x7f8bb7=>{const _0x3c528b=a3_0x31c9ab;return'\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Important:\x20Your\x20CADViewer\x20Account</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Hello\x20'+(_0x7f8bb7[_0x3c528b(0x111)]||_0x7f8bb7[_0x3c528b(0xfb)])+_0x3c528b(0x10f);},sendAccountDeletionPreventionEmails=async()=>{const _0x153c46=a3_0x31c9ab;try{const [_0x5d1518]=await conn['promise']()[_0x153c46(0x105)](_0x153c46(0x11d),[config[_0x153c46(0xfc)]-config[_0x153c46(0x103)]]);if(_0x5d1518[_0x153c46(0x116)]===0x0){console['log'](_0x153c46(0x10a));return;}for(const _0x28efe2 of _0x5d1518){const _0x26ce53=getAccountDeletionPreventionTemplate(_0x28efe2),_0x1e207e={'from':config[_0x153c46(0x10d)],'to':_0x28efe2[_0x153c46(0x112)],'subject':_0x153c46(0x114),'text':_0x153c46(0xf4),'html':_0x26ce53};try{await transporter[_0x153c46(0x10b)](_0x1e207e),console['log'](_0x153c46(0xf9)+_0x28efe2['email']);}catch(_0x51322b){console[_0x153c46(0xff)](_0x153c46(0x127)),console[_0x153c46(0xff)](_0x153c46(0x121)+_0x28efe2[_0x153c46(0x112)]),console[_0x153c46(0xff)](_0x51322b);}}}catch(_0x32abf1){console[_0x153c46(0xff)](_0x153c46(0x127)),console[_0x153c46(0xff)](_0x153c46(0x125)),console[_0x153c46(0xff)](_0x32abf1);}},getFollowUpEmailTemplate=(_0x357049,_0x598c5d,_0x4e7724)=>{const _0xe39940=a3_0x31c9ab,_0x454300={0x1:_0xe39940(0xf8),0x2:_0xe39940(0xfe),0x3:_0xe39940(0x10e)}[_0x4e7724];return'\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>CADViewer\x20Email\x20Validation\x20Reminder</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Hello\x20'+(_0x357049[_0xe39940(0x111)]||_0x357049['username'])+_0xe39940(0x11c)+_0x454300+'\x20since\x20you\x20registered.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>To\x20start\x20using\x20CADViewer\x20Visual\x20Query,\x20please\x20validate\x20your\x20email\x20address\x20by\x20clicking\x20the\x20button\x20below:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+_0x598c5d+_0xe39940(0x123)+_0x598c5d+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20';},sendFollowUpEmails=async()=>{const _0x119b35=a3_0x31c9ab;try{const _0x27c632=_0x119b35(0x102),[_0x20997d]=await conn[_0x119b35(0x11f)]()[_0x119b35(0x105)](_0x27c632);for(const _0x47ade6 of _0x20997d){const _0x30f995=config[_0x119b35(0x101)]+_0x119b35(0x126)+_0x47ade6[_0x119b35(0xfd)],_0x2af1cd=getFollowUpEmailTemplate(_0x47ade6,_0x30f995,_0x47ade6['follow_up_count']+0x1),_0x2a1012={'from':config[_0x119b35(0x10d)],'to':_0x47ade6[_0x119b35(0x112)],'subject':'CADViewer\x20Email\x20Validation\x20Reminder','text':_0x119b35(0xf6),'html':_0x2af1cd};try{await transporter['sendMail'](_0x2a1012),await conn[_0x119b35(0x11f)]()[_0x119b35(0x105)](_0x119b35(0x110),[_0x47ade6['id']]),console[_0x119b35(0xff)](_0x119b35(0xf7)+_0x47ade6[_0x119b35(0x112)]);}catch(_0x1d9166){console[_0x119b35(0x128)](_0x119b35(0x113)+_0x47ade6['email']+':',_0x1d9166);}}}catch(_0x4d0863){console[_0x119b35(0x128)](_0x119b35(0x106),_0x4d0863);}};module['exports']={'transporter':transporter,'sendFollowUpEmails':sendFollowUpEmails,'sendAccountDeletionPreventionEmails':sendAccountDeletionPreventionEmails,'sendWelcomeEmail':sendWelcomeEmail};
const a3_0x769e37=a3_0xff73;(function(_0x5995ba,_0x38f85e){const _0x2a9fab=a3_0xff73,_0x2e959e=_0x5995ba();while(!![]){try{const _0x40de5f=parseInt(_0x2a9fab(0x183))/0x1*(parseInt(_0x2a9fab(0x154))/0x2)+-parseInt(_0x2a9fab(0x161))/0x3*(parseInt(_0x2a9fab(0x173))/0x4)+parseInt(_0x2a9fab(0x15c))/0x5*(-parseInt(_0x2a9fab(0x180))/0x6)+parseInt(_0x2a9fab(0x170))/0x7+parseInt(_0x2a9fab(0x179))/0x8*(parseInt(_0x2a9fab(0x151))/0x9)+parseInt(_0x2a9fab(0x16a))/0xa+-parseInt(_0x2a9fab(0x153))/0xb;if(_0x40de5f===_0x38f85e)break;else _0x2e959e['push'](_0x2e959e['shift']());}catch(_0x5197d4){_0x2e959e['push'](_0x2e959e['shift']());}}}(a3_0x4209,0x5577b));const config=require(a3_0x769e37(0x16d)),conn=require(a3_0x769e37(0x17f)),transporter=require(a3_0x769e37(0x16e))['transporter'],getWelcomeEmailTemplate=(_0x1faf06,_0xcca297)=>{const _0x53e9dd=a3_0x769e37;return _0x53e9dd(0x162)+_0xcca297+_0x53e9dd(0x158)+_0xcca297+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20';},sendWelcomeEmail=async(_0x15fad5,_0x178898)=>{const _0x13510d=a3_0x769e37;try{let _0x494f4a=config[_0x13510d(0x17e)];_0x494f4a[_0x13510d(0x157)]('/')&&(_0x494f4a=_0x494f4a[_0x13510d(0x15f)](0x0,-0x1));const _0x2f3955=_0x494f4a+'/validate-email/'+_0x178898,_0x4331da=getWelcomeEmailTemplate(_0x15fad5,_0x2f3955),_0x1623ac={'from':config[_0x13510d(0x166)],'to':_0x15fad5[_0x13510d(0x16c)],'subject':_0x13510d(0x17b),'text':_0x13510d(0x17b),'html':_0x4331da};await transporter['sendMail'](_0x1623ac),console[_0x13510d(0x15d)](_0x13510d(0x152)+_0x15fad5[_0x13510d(0x16c)]);}catch(_0x22032e){console[_0x13510d(0x15d)](_0x13510d(0x184)),console['log']('Failed\x20to\x20send\x20welcome\x20email\x20to\x20'+_0x15fad5[_0x13510d(0x16c)]+':',_0x22032e);throw _0x22032e;}},getAccountDeletionPreventionTemplate=_0x4961eb=>{const _0x49dd3e=a3_0x769e37;return _0x49dd3e(0x174)+(_0x4961eb[_0x49dd3e(0x181)]||_0x4961eb['username'])+_0x49dd3e(0x163);},sendAccountDeletionPreventionEmails=async()=>{const _0x360ffb=a3_0x769e37;try{const [_0x13eb82]=await conn['promise']()[_0x360ffb(0x164)](_0x360ffb(0x176),[config['demoUserRetentionDays']-config[_0x360ffb(0x177)]]);if(_0x13eb82[_0x360ffb(0x16b)]===0x0){console['log'](_0x360ffb(0x17c));return;}for(const _0x585eb9 of _0x13eb82){const _0x37237b=getAccountDeletionPreventionTemplate(_0x585eb9),_0x3d04ad={'from':config['smtpFrom'],'to':_0x585eb9['email'],'subject':_0x360ffb(0x17a),'text':_0x360ffb(0x15a),'html':_0x37237b};try{await transporter[_0x360ffb(0x178)](_0x3d04ad),console[_0x360ffb(0x15d)]('Deletion\x20prevention\x20email\x20sent\x20to\x20'+_0x585eb9[_0x360ffb(0x16c)]);}catch(_0x15a830){console[_0x360ffb(0x15d)]('===================error==================='),console[_0x360ffb(0x15d)](_0x360ffb(0x15e)+_0x585eb9[_0x360ffb(0x16c)]),console[_0x360ffb(0x15d)](_0x15a830);}}}catch(_0x517aa6){console[_0x360ffb(0x15d)](_0x360ffb(0x184)),console[_0x360ffb(0x15d)]('Error\x20while\x20fetching\x20users\x20for\x20account\x20deletion\x20prevention\x20emails'),console[_0x360ffb(0x15d)](_0x517aa6);}},getFollowUpEmailTemplate=(_0x540f74,_0x3cfd77,_0xded74c)=>{const _0x4834e3=a3_0x769e37,_0x13b4a7={0x1:_0x4834e3(0x168),0x2:_0x4834e3(0x167),0x3:_0x4834e3(0x169)}[_0xded74c];return'\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>CADViewer\x20Email\x20Validation\x20Reminder</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Hello\x20'+(_0x540f74[_0x4834e3(0x181)]||_0x540f74['username'])+_0x4834e3(0x155)+_0x13b4a7+_0x4834e3(0x175)+_0x3cfd77+_0x4834e3(0x158)+_0x3cfd77+_0x4834e3(0x17d);},sendFollowUpEmails=async()=>{const _0x370a54=a3_0x769e37;try{const _0x50f13b='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20*\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x0a\x20\x20\x20\x20\x20\x20WHERE\x20is_enabled\x20=\x200\x0a\x20\x20\x20\x20\x20\x20AND\x20validation_token\x20IS\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20AND\x20follow_up_count\x20<\x203\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20<=\x20DATE_SUB(NOW(),\x20INTERVAL\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20CASE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x200\x20THEN\x203\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x201\x20THEN\x206\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x202\x20THEN\x2012\x0a\x20\x20\x20\x20\x20\x20\x20\x20END\x0a\x20\x20\x20\x20\x20\x20HOUR)\x0a\x20\x20\x20\x20',[_0x16f21a]=await conn[_0x370a54(0x185)]()[_0x370a54(0x164)](_0x50f13b);for(const _0xf47329 of _0x16f21a){const _0x57ec48=config[_0x370a54(0x17e)]+_0x370a54(0x165)+_0xf47329['validation_token'],_0x2e5838=getFollowUpEmailTemplate(_0xf47329,_0x57ec48,_0xf47329[_0x370a54(0x15b)]+0x1),_0x4a0969={'from':config[_0x370a54(0x166)],'to':_0xf47329[_0x370a54(0x16c)],'subject':_0x370a54(0x172),'text':'Please\x20validate\x20your\x20CADViewer\x20email\x20address','html':_0x2e5838};try{await transporter[_0x370a54(0x178)](_0x4a0969),await conn['promise']()[_0x370a54(0x164)](_0x370a54(0x159),[_0xf47329['id']]),console[_0x370a54(0x15d)](_0x370a54(0x156)+_0xf47329['email']);}catch(_0x2b004e){console[_0x370a54(0x171)](_0x370a54(0x182)+_0xf47329[_0x370a54(0x16c)]+':',_0x2b004e);}}}catch(_0x497ba5){console[_0x370a54(0x171)](_0x370a54(0x160),_0x497ba5);}};function a3_0xff73(_0x43527f,_0x5670d8){const _0x4209d1=a3_0x4209();return a3_0xff73=function(_0xff7302,_0x30492a){_0xff7302=_0xff7302-0x151;let _0x50fbcc=_0x4209d1[_0xff7302];return _0x50fbcc;},a3_0xff73(_0x43527f,_0x5670d8);}module[a3_0x769e37(0x16f)]={'transporter':transporter,'sendFollowUpEmails':sendFollowUpEmails,'sendAccountDeletionPreventionEmails':sendAccountDeletionPreventionEmails,'sendWelcomeEmail':sendWelcomeEmail};function a3_0x4209(){const _0x17a15e=['Welcome\x20to\x20CADViewer','No\x20users\x20to\x20notify\x20about\x20account\x20deletion','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20','frontendUrl','./mysql.js','11778RkRZvy','first_name','Failed\x20to\x20send\x20follow-up\x20email\x20to\x20','12dhcZWD','===================error===================','promise','141237sfKuyb','Welcome\x20email\x20sent\x20to\x20','1731928Dhmtuw','39432qqMWKR',',</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20noticed\x20that\x20you\x20haven\x27t\x20validated\x20your\x20email\x20address\x20yet.\x20It\x27s\x20been\x20','Follow-up\x20email\x20sent\x20to\x20','endsWith','\x22\x20class=\x22button\x22>Validate\x20my\x20email\x20address</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20the\x20button\x20doesn\x27t\x20work,\x20you\x20can\x20copy\x20and\x20paste\x20this\x20link\x20in\x20your\x20browser:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22word-break:\x20break-all;\x22>','UPDATE\x20users\x20SET\x20follow_up_count\x20=\x20follow_up_count\x20+\x201\x20WHERE\x20id\x20=\x20?','Your\x20CADViewer\x20demo\x20account\x20will\x20expire\x20in\x202\x20days.\x20Please\x20contact\x20an\x20administrator\x20if\x20you\x20wish\x20to\x20keep\x20your\x20account.','follow_up_count','845ALLOxN','log','Failed\x20to\x20send\x20email\x20to\x20','slice','Error\x20in\x20sendFollowUpEmails:','3sPtZDH','\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Welcome\x20to\x20CADViewer!</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20are\x20delighted\x20to\x20welcome\x20you\x20to\x20our\x20community.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>To\x20start\x20using\x20CADViewer\x20Visual\x20Query,\x20please\x20validate\x20your\x20email\x20address\x20by\x20clicking\x20the\x20button\x20below:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22',',</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20wanted\x20to\x20inform\x20you\x20that\x20your\x20demo\x20account\x20will\x20expire\x20in\x202\x20days\x20and\x20will\x20be\x20automatically\x20deleted.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20you\x20wish\x20to\x20keep\x20your\x20account\x20and\x20all\x20your\x20data,\x20please\x20contact\x20us\x20on\x20<a\x20href=\x22mailto:developer@tailormade.com\x22>developer@tailormade.com</a>\x20or\x20<a\x20href=\x22mailto:internationalsales@tailormade.com\x22>internationalsales@tailormade.com</a>\x20as\x20soon\x20as\x20possible.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Thank\x20you\x20for\x20using\x20CADViewer!</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20','execute','/validate-email/','smtpFrom','6\x20hours','3\x20hours','12\x20hours','4542520UGeJJl','length','email','../CADViewer_config.json','./mail.js','exports','286097snKBou','error','CADViewer\x20Email\x20Validation\x20Reminder','1704028utCVSL','\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Important:\x20Your\x20CADViewer\x20Account</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Hello\x20','\x20since\x20you\x20registered.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>To\x20start\x20using\x20CADViewer\x20Visual\x20Query,\x20please\x20validate\x20your\x20email\x20address\x20by\x20clicking\x20the\x20button\x20below:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','demoUserRetentionDaysAlertBeforeDeletion','sendMail','272mvUpEI','Important:\x20Your\x20CADViewer\x20Account\x20Will\x20Expire\x20Soon'];a3_0x4209=function(){return _0x17a15e;};return a3_0x4209();}
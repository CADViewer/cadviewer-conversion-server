const a2_0x57f0fc=a2_0xed32;(function(_0x149a43,_0x9fed82){const _0xb95be3=a2_0xed32,_0x167b95=_0x149a43();while(!![]){try{const _0x57930f=-parseInt(_0xb95be3(0x84))/0x1*(parseInt(_0xb95be3(0xa9))/0x2)+parseInt(_0xb95be3(0xb6))/0x3+parseInt(_0xb95be3(0x80))/0x4+parseInt(_0xb95be3(0x83))/0x5*(-parseInt(_0xb95be3(0x9c))/0x6)+-parseInt(_0xb95be3(0xa3))/0x7+parseInt(_0xb95be3(0x92))/0x8*(-parseInt(_0xb95be3(0xb0))/0x9)+parseInt(_0xb95be3(0xb2))/0xa;if(_0x57930f===_0x9fed82)break;else _0x167b95['push'](_0x167b95['shift']());}catch(_0x5908bd){_0x167b95['push'](_0x167b95['shift']());}}}(a2_0x4b92,0x40b92));function a2_0xed32(_0x47f919,_0x107c04){const _0x4b9222=a2_0x4b92();return a2_0xed32=function(_0xed3236,_0x23a591){_0xed3236=_0xed3236-0x7f;let _0x5e2ff2=_0x4b9222[_0xed3236];return _0x5e2ff2;},a2_0xed32(_0x47f919,_0x107c04);}const config=require(a2_0x57f0fc(0xa8)),conn=require(a2_0x57f0fc(0xb5)),transporter=require(a2_0x57f0fc(0x87))[a2_0x57f0fc(0xad)],getWelcomeEmailTemplate=(_0x4e7628,_0x429580)=>{const _0x391ba0=a2_0x57f0fc;return _0x391ba0(0xa1)+_0x429580+_0x391ba0(0xa2)+_0x429580+_0x391ba0(0x8f);},sendWelcomeEmail=async(_0x2bd1fb,_0x2b2c6c)=>{const _0x4e96ab=a2_0x57f0fc;try{let _0x20cca6=config['frontendUrl'];_0x20cca6[_0x4e96ab(0x86)]('/')&&(_0x20cca6=_0x20cca6[_0x4e96ab(0x9d)](0x0,-0x1));const _0x3fea88=_0x20cca6+_0x4e96ab(0xa0)+_0x2b2c6c,_0xc0e0c5=getWelcomeEmailTemplate(_0x2bd1fb,_0x3fea88),_0xe7c3e5={'from':config[_0x4e96ab(0xa7)],'to':_0x2bd1fb[_0x4e96ab(0x82)],'subject':_0x4e96ab(0x94),'text':_0x4e96ab(0x94),'html':_0xc0e0c5};await transporter[_0x4e96ab(0x8a)](_0xe7c3e5),console['log'](_0x4e96ab(0x93)+_0x2bd1fb['email']);}catch(_0x1df5a1){console[_0x4e96ab(0xb3)](_0x4e96ab(0xaa)),console[_0x4e96ab(0xb3)](_0x4e96ab(0xb4)+_0x2bd1fb[_0x4e96ab(0x82)]+':',_0x1df5a1);throw _0x1df5a1;}},getAccountDeletionPreventionTemplate=_0x1393d2=>{const _0xffc516=a2_0x57f0fc;return _0xffc516(0x8c)+(_0x1393d2[_0xffc516(0x8d)]||_0x1393d2[_0xffc516(0x81)])+_0xffc516(0x99);},sendAccountDeletionPreventionEmails=async()=>{const _0xab6302=a2_0x57f0fc;try{const [_0x2d11eb]=await conn[_0xab6302(0xb1)]()['execute'](_0xab6302(0x90),[config['demoUserRetentionDays']-config[_0xab6302(0xaf)]]);if(_0x2d11eb[_0xab6302(0x9e)]===0x0){console['log'](_0xab6302(0xac));return;}for(const _0x1a6f82 of _0x2d11eb){const _0xb39ef1=getAccountDeletionPreventionTemplate(_0x1a6f82),_0x41a584={'from':config['smtpFrom'],'to':_0x1a6f82['email'],'subject':_0xab6302(0x8b),'text':_0xab6302(0x88),'html':_0xb39ef1};try{await transporter[_0xab6302(0x8a)](_0x41a584),console[_0xab6302(0xb3)](_0xab6302(0x96)+_0x1a6f82[_0xab6302(0x82)]);}catch(_0x5091fe){console[_0xab6302(0xb3)](_0xab6302(0xaa)),console['log']('Failed\x20to\x20send\x20email\x20to\x20'+_0x1a6f82[_0xab6302(0x82)]),console[_0xab6302(0xb3)](_0x5091fe);}}}catch(_0x1e98ad){console['log']('===================error==================='),console[_0xab6302(0xb3)](_0xab6302(0xb7)),console[_0xab6302(0xb3)](_0x1e98ad);}},getFollowUpEmailTemplate=(_0x589f1d,_0x25050c,_0x25c572)=>{const _0xa5cbaa=a2_0x57f0fc,_0x1e5bc8={0x1:_0xa5cbaa(0x7f),0x2:_0xa5cbaa(0x97),0x3:'12\x20hours'}[_0x25c572];return _0xa5cbaa(0xab)+(_0x589f1d[_0xa5cbaa(0x8d)]||_0x589f1d[_0xa5cbaa(0x81)])+_0xa5cbaa(0x9b)+_0x1e5bc8+_0xa5cbaa(0xae)+_0x25050c+_0xa5cbaa(0xa2)+_0x25050c+_0xa5cbaa(0x8f);},sendFollowUpEmails=async()=>{const _0x428f74=a2_0x57f0fc;try{const _0x329a83='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20*\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x0a\x20\x20\x20\x20\x20\x20WHERE\x20is_enabled\x20=\x200\x0a\x20\x20\x20\x20\x20\x20AND\x20validation_token\x20IS\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20AND\x20follow_up_count\x20<\x203\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20<=\x20DATE_SUB(NOW(),\x20INTERVAL\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20CASE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x200\x20THEN\x203\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x201\x20THEN\x206\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x202\x20THEN\x2012\x0a\x20\x20\x20\x20\x20\x20\x20\x20END\x0a\x20\x20\x20\x20\x20\x20HOUR)\x0a\x20\x20\x20\x20',[_0x4f8584]=await conn['promise']()['execute'](_0x329a83);for(const _0x1a5558 of _0x4f8584){const _0x5cf93a=config[_0x428f74(0x8e)]+'/validate-email/'+_0x1a5558[_0x428f74(0x95)],_0x3ddcf5=getFollowUpEmailTemplate(_0x1a5558,_0x5cf93a,_0x1a5558[_0x428f74(0x89)]+0x1),_0x43d2b5={'from':config[_0x428f74(0xa7)],'to':_0x1a5558[_0x428f74(0x82)],'subject':_0x428f74(0x91),'text':_0x428f74(0xa4),'html':_0x3ddcf5};try{await transporter[_0x428f74(0x8a)](_0x43d2b5),await conn[_0x428f74(0xb1)]()['execute'](_0x428f74(0xa5),[_0x1a5558['id']]),console[_0x428f74(0xb3)](_0x428f74(0xa6)+_0x1a5558['email']);}catch(_0x1b2138){console[_0x428f74(0x9a)](_0x428f74(0x98)+_0x1a5558[_0x428f74(0x82)]+':',_0x1b2138);}}}catch(_0x1894c2){console['error'](_0x428f74(0x9f),_0x1894c2);}};function a2_0x4b92(){const _0x99cc3d=['\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Welcome\x20to\x20CADViewer!</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20are\x20delighted\x20to\x20welcome\x20you\x20to\x20our\x20community.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>To\x20start\x20using\x20CADViewer\x20Visual\x20Query,\x20please\x20validate\x20your\x20email\x20address\x20by\x20clicking\x20the\x20button\x20below:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','\x22\x20class=\x22button\x22>Validate\x20my\x20email\x20address</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20the\x20button\x20doesn\x27t\x20work,\x20you\x20can\x20copy\x20and\x20paste\x20this\x20link\x20in\x20your\x20browser:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22word-break:\x20break-all;\x22>','562037OXkUBt','Please\x20validate\x20your\x20CADViewer\x20email\x20address','UPDATE\x20users\x20SET\x20follow_up_count\x20=\x20follow_up_count\x20+\x201\x20WHERE\x20id\x20=\x20?','Follow-up\x20email\x20sent\x20to\x20','smtpFrom','../CADViewer_config.json','1088xOnELx','===================error===================','\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>CADViewer\x20Email\x20Validation\x20Reminder</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Hello\x20','No\x20users\x20to\x20notify\x20about\x20account\x20deletion','transporter','\x20since\x20you\x20registered.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>To\x20start\x20using\x20CADViewer\x20Visual\x20Query,\x20please\x20validate\x20your\x20email\x20address\x20by\x20clicking\x20the\x20button\x20below:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','demoUserRetentionDaysAlertBeforeDeletion','99UazAWF','promise','11281980Qoevuc','log','Failed\x20to\x20send\x20welcome\x20email\x20to\x20','./mysql.js','12435crugNV','Error\x20while\x20fetching\x20users\x20for\x20account\x20deletion\x20prevention\x20emails','3\x20hours','80496cOKhWV','username','email','15oFappS','503MtpJec','exports','endsWith','./mail.js','Your\x20CADViewer\x20demo\x20account\x20will\x20expire\x20in\x202\x20days.\x20Please\x20contact\x20an\x20administrator\x20if\x20you\x20wish\x20to\x20keep\x20your\x20account.','follow_up_count','sendMail','Important:\x20Your\x20CADViewer\x20Account\x20Will\x20Expire\x20Soon','\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Important:\x20Your\x20CADViewer\x20Account</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Hello\x20','first_name','frontendUrl','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','CADViewer\x20Email\x20Validation\x20Reminder','226952OPfNFy','Welcome\x20email\x20sent\x20to\x20','Welcome\x20to\x20CADViewer','validation_token','Deletion\x20prevention\x20email\x20sent\x20to\x20','6\x20hours','Failed\x20to\x20send\x20follow-up\x20email\x20to\x20',',</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20wanted\x20to\x20inform\x20you\x20that\x20your\x20demo\x20account\x20will\x20expire\x20in\x202\x20days\x20and\x20will\x20be\x20automatically\x20deleted.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20you\x20wish\x20to\x20keep\x20your\x20account\x20and\x20all\x20your\x20data,\x20please\x20contact\x20us\x20on\x20<a\x20href=\x22mailto:developer@tailormade.com\x22>developer@tailormade.com</a>\x20or\x20<a\x20href=\x22mailto:internationalsales@tailormade.com\x22>internationalsales@tailormade.com</a>\x20as\x20soon\x20as\x20possible.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Thank\x20you\x20for\x20using\x20CADViewer!</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20','error',',</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20noticed\x20that\x20you\x20haven\x27t\x20validated\x20your\x20email\x20address\x20yet.\x20It\x27s\x20been\x20','442758BnRFOo','slice','length','Error\x20in\x20sendFollowUpEmails:','/validate-email/'];a2_0x4b92=function(){return _0x99cc3d;};return a2_0x4b92();}module[a2_0x57f0fc(0x85)]={'transporter':transporter,'sendFollowUpEmails':sendFollowUpEmails,'sendAccountDeletionPreventionEmails':sendAccountDeletionPreventionEmails,'sendWelcomeEmail':sendWelcomeEmail};
function a2_0x21f3(_0x5dae51,_0x535020){const _0x22daaa=a2_0x22da();return a2_0x21f3=function(_0x21f395,_0x524635){_0x21f395=_0x21f395-0xab;let _0x1c56b3=_0x22daaa[_0x21f395];return _0x1c56b3;},a2_0x21f3(_0x5dae51,_0x535020);}function a2_0x22da(){const _0x465724=['\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>CADViewer\x20Email\x20Validation\x20Reminder</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Hello\x20','Failed\x20to\x20send\x20welcome\x20email\x20to\x20','3095932RppFVS','Please\x20validate\x20your\x20CADViewer\x20email\x20address','exports','428140eJmcDu','Follow-up\x20email\x20sent\x20to\x20','Failed\x20to\x20send\x20email\x20to\x20','/validate-email/','demoUserRetentionDays','2009920KOEJsy','9esXPvR','Your\x20CADViewer\x20demo\x20account\x20will\x20expire\x20in\x202\x20days.\x20Please\x20contact\x20an\x20administrator\x20if\x20you\x20wish\x20to\x20keep\x20your\x20account.','1390408wgDNhD','../CADViewer_config.json','\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Important:\x20Your\x20CADViewer\x20Account</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Hello\x20',',</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20wanted\x20to\x20inform\x20you\x20that\x20your\x20demo\x20account\x20will\x20expire\x20in\x202\x20days\x20and\x20will\x20be\x20automatically\x20deleted.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20you\x20wish\x20to\x20keep\x20your\x20account\x20and\x20all\x20your\x20data,\x20please\x20contact\x20us\x20on\x20<a\x20href=\x22mailto:developer@tailormade.com\x22>developer@tailormade.com</a>\x20or\x20<a\x20href=\x22mailto:internationalsales@tailormade.com\x22>internationalsales@tailormade.com</a>\x20as\x20soon\x20as\x20possible.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Thank\x20you\x20for\x20using\x20CADViewer!</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20','sendMail','Failed\x20to\x20send\x20follow-up\x20email\x20to\x20','transporter','length','Deletion\x20prevention\x20email\x20sent\x20to\x20','\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Welcome\x20to\x20CADViewer!</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20are\x20delighted\x20to\x20welcome\x20you\x20to\x20our\x20community.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>To\x20start\x20using\x20CADViewer\x20Visual\x20Query,\x20please\x20validate\x20your\x20email\x20address\x20by\x20clicking\x20the\x20button\x20below:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','Error\x20in\x20sendFollowUpEmails:','username','12\x20hours','validation_token','first_name','419892iNmVBo','smtpFrom','log','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','error','frontendUrl','execute','508618UkttpW','882948mIOvEo','promise','3\x20hours','\x22\x20class=\x22button\x22>Validate\x20my\x20email\x20address</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20the\x20button\x20doesn\x27t\x20work,\x20you\x20can\x20copy\x20and\x20paste\x20this\x20link\x20in\x20your\x20browser:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22word-break:\x20break-all;\x22>','No\x20users\x20to\x20notify\x20about\x20account\x20deletion','demoUserRetentionDaysAlertBeforeDeletion','email','\x20since\x20you\x20registered.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>To\x20start\x20using\x20CADViewer\x20Visual\x20Query,\x20please\x20validate\x20your\x20email\x20address\x20by\x20clicking\x20the\x20button\x20below:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','6\x20hours'];a2_0x22da=function(){return _0x465724;};return a2_0x22da();}const a2_0x2872e3=a2_0x21f3;(function(_0x496837,_0x5a508b){const _0x47e9df=a2_0x21f3,_0x1c2c01=_0x496837();while(!![]){try{const _0x392d03=parseInt(_0x47e9df(0xbc))/0x1+parseInt(_0x47e9df(0xc3))/0x2*(-parseInt(_0x47e9df(0xd8))/0x3)+-parseInt(_0x47e9df(0xd2))/0x4+parseInt(_0x47e9df(0xd7))/0x5+-parseInt(_0x47e9df(0xc4))/0x6+parseInt(_0x47e9df(0xcf))/0x7+parseInt(_0x47e9df(0xac))/0x8;if(_0x392d03===_0x5a508b)break;else _0x1c2c01['push'](_0x1c2c01['shift']());}catch(_0x244f81){_0x1c2c01['push'](_0x1c2c01['shift']());}}}(a2_0x22da,0x66be1));const config=require(a2_0x2872e3(0xad)),conn=require('./mysql.js'),transporter=require('./mail.js')[a2_0x2872e3(0xb3)],getWelcomeEmailTemplate=(_0x5539ee,_0x4f7c01)=>{const _0x2d059d=a2_0x2872e3;return _0x2d059d(0xb6)+_0x4f7c01+_0x2d059d(0xc7)+_0x4f7c01+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20';},sendWelcomeEmail=async(_0x1635aa,_0x4747ae)=>{const _0x5e7b78=a2_0x2872e3;try{let _0x55f2fb=config['frontendUrl'];_0x55f2fb['endsWith']('/')&&(_0x55f2fb=_0x55f2fb['slice'](0x0,-0x1));const _0x575a2d=_0x55f2fb+_0x5e7b78(0xd5)+_0x4747ae,_0x55a842=getWelcomeEmailTemplate(_0x1635aa,_0x575a2d),_0x5e8e71={'from':config[_0x5e7b78(0xbd)],'to':_0x1635aa[_0x5e7b78(0xca)],'subject':'Welcome\x20to\x20CADViewer','text':'Welcome\x20to\x20CADViewer','html':_0x55a842};await transporter[_0x5e7b78(0xb1)](_0x5e8e71),console['log']('Welcome\x20email\x20sent\x20to\x20'+_0x1635aa[_0x5e7b78(0xca)]);}catch(_0x54aa41){console[_0x5e7b78(0xbe)]('===================error==================='),console[_0x5e7b78(0xbe)](_0x5e7b78(0xce)+_0x1635aa[_0x5e7b78(0xca)]+':',_0x54aa41);throw _0x54aa41;}},getAccountDeletionPreventionTemplate=_0x3762e9=>{const _0x5501a5=a2_0x2872e3;return _0x5501a5(0xae)+(_0x3762e9[_0x5501a5(0xbb)]||_0x3762e9[_0x5501a5(0xb8)])+_0x5501a5(0xaf);},sendAccountDeletionPreventionEmails=async()=>{const _0x135346=a2_0x2872e3;try{const [_0x4d3e87]=await conn[_0x135346(0xc5)]()['execute'](_0x135346(0xbf),[config[_0x135346(0xd6)]-config[_0x135346(0xc9)]]);if(_0x4d3e87[_0x135346(0xb4)]===0x0){console['log'](_0x135346(0xc8));return;}for(const _0x22c85f of _0x4d3e87){const _0x28ed38=getAccountDeletionPreventionTemplate(_0x22c85f),_0x398668={'from':config['smtpFrom'],'to':_0x22c85f[_0x135346(0xca)],'subject':'Important:\x20Your\x20CADViewer\x20Account\x20Will\x20Expire\x20Soon','text':_0x135346(0xab),'html':_0x28ed38};try{await transporter[_0x135346(0xb1)](_0x398668),console[_0x135346(0xbe)](_0x135346(0xb5)+_0x22c85f[_0x135346(0xca)]);}catch(_0x5ac80f){console[_0x135346(0xbe)]('===================error==================='),console['log'](_0x135346(0xd4)+_0x22c85f[_0x135346(0xca)]),console['log'](_0x5ac80f);}}}catch(_0x1c7e55){console[_0x135346(0xbe)]('===================error==================='),console['log']('Error\x20while\x20fetching\x20users\x20for\x20account\x20deletion\x20prevention\x20emails'),console['log'](_0x1c7e55);}},getFollowUpEmailTemplate=(_0xab00f2,_0x2f1ec4,_0x62f041)=>{const _0x5edbf5=a2_0x2872e3,_0x5191f4={0x1:_0x5edbf5(0xc6),0x2:_0x5edbf5(0xcc),0x3:_0x5edbf5(0xb9)}[_0x62f041];return _0x5edbf5(0xcd)+(_0xab00f2[_0x5edbf5(0xbb)]||_0xab00f2['username'])+',</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20noticed\x20that\x20you\x20haven\x27t\x20validated\x20your\x20email\x20address\x20yet.\x20It\x27s\x20been\x20'+_0x5191f4+_0x5edbf5(0xcb)+_0x2f1ec4+_0x5edbf5(0xc7)+_0x2f1ec4+_0x5edbf5(0xb0);},sendFollowUpEmails=async()=>{const _0x1da86b=a2_0x2872e3;try{const _0x303063='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20*\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x0a\x20\x20\x20\x20\x20\x20WHERE\x20is_enabled\x20=\x200\x0a\x20\x20\x20\x20\x20\x20AND\x20validation_token\x20IS\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20AND\x20follow_up_count\x20<\x203\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20<=\x20DATE_SUB(NOW(),\x20INTERVAL\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20CASE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x200\x20THEN\x203\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x201\x20THEN\x206\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x202\x20THEN\x2012\x0a\x20\x20\x20\x20\x20\x20\x20\x20END\x0a\x20\x20\x20\x20\x20\x20HOUR)\x0a\x20\x20\x20\x20',[_0x4836ae]=await conn[_0x1da86b(0xc5)]()[_0x1da86b(0xc2)](_0x303063);for(const _0x40d914 of _0x4836ae){const _0x3fd794=config[_0x1da86b(0xc1)]+_0x1da86b(0xd5)+_0x40d914[_0x1da86b(0xba)],_0x7737af=getFollowUpEmailTemplate(_0x40d914,_0x3fd794,_0x40d914['follow_up_count']+0x1),_0x266269={'from':config[_0x1da86b(0xbd)],'to':_0x40d914[_0x1da86b(0xca)],'subject':'CADViewer\x20Email\x20Validation\x20Reminder','text':_0x1da86b(0xd0),'html':_0x7737af};try{await transporter['sendMail'](_0x266269),await conn['promise']()['execute']('UPDATE\x20users\x20SET\x20follow_up_count\x20=\x20follow_up_count\x20+\x201\x20WHERE\x20id\x20=\x20?',[_0x40d914['id']]),console['log'](_0x1da86b(0xd3)+_0x40d914[_0x1da86b(0xca)]);}catch(_0x55b741){console[_0x1da86b(0xc0)](_0x1da86b(0xb2)+_0x40d914[_0x1da86b(0xca)]+':',_0x55b741);}}}catch(_0x580a6b){console[_0x1da86b(0xc0)](_0x1da86b(0xb7),_0x580a6b);}};module[a2_0x2872e3(0xd1)]={'transporter':transporter,'sendFollowUpEmails':sendFollowUpEmails,'sendAccountDeletionPreventionEmails':sendAccountDeletionPreventionEmails,'sendWelcomeEmail':sendWelcomeEmail};
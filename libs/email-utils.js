const a2_0x1e5aef=a2_0x3ad7;function a2_0x3ad7(_0x5c39d2,_0x5f2d88){const _0x3fef15=a2_0x3fef();return a2_0x3ad7=function(_0x3ad738,_0x7fbbdf){_0x3ad738=_0x3ad738-0x71;let _0x21fb94=_0x3fef15[_0x3ad738];return _0x21fb94;},a2_0x3ad7(_0x5c39d2,_0x5f2d88);}(function(_0x3208ef,_0x2cd2b7){const _0x24cd13=a2_0x3ad7,_0x13821b=_0x3208ef();while(!![]){try{const _0xa926f9=parseInt(_0x24cd13(0x7c))/0x1*(parseInt(_0x24cd13(0x77))/0x2)+-parseInt(_0x24cd13(0x7d))/0x3*(parseInt(_0x24cd13(0x78))/0x4)+parseInt(_0x24cd13(0x93))/0x5*(-parseInt(_0x24cd13(0x8a))/0x6)+parseInt(_0x24cd13(0xa4))/0x7+parseInt(_0x24cd13(0x7a))/0x8+-parseInt(_0x24cd13(0xa2))/0x9+-parseInt(_0x24cd13(0xaa))/0xa;if(_0xa926f9===_0x2cd2b7)break;else _0x13821b['push'](_0x13821b['shift']());}catch(_0x1b384a){_0x13821b['push'](_0x13821b['shift']());}}}(a2_0x3fef,0xd7a46));const nodemailer=require(a2_0x1e5aef(0x7e)),config=require(a2_0x1e5aef(0x73)),conn=require(a2_0x1e5aef(0x95)),transporter=nodemailer['createTransport']({'host':config[a2_0x1e5aef(0x97)],'port':config['smtpPort'],'secure':config[a2_0x1e5aef(0xa1)],'auth':{'user':config[a2_0x1e5aef(0x75)],'pass':config[a2_0x1e5aef(0xa8)]}}),getWelcomeEmailTemplate=(_0x2ce4eb,_0x42cd28)=>{const _0x299801=a2_0x1e5aef;return _0x299801(0x94)+_0x42cd28+_0x299801(0x71)+_0x42cd28+_0x299801(0xa3);},sendWelcomeEmail=async(_0x5acf08,_0x3b324a)=>{const _0x34dd67=a2_0x1e5aef;try{let _0xb70016=config[_0x34dd67(0x83)];_0xb70016[_0x34dd67(0x9a)]('/')&&(_0xb70016=_0xb70016[_0x34dd67(0x74)](0x0,-0x1));const _0x5c065e=_0xb70016+_0x34dd67(0x90)+_0x3b324a,_0x2e4df4=getWelcomeEmailTemplate(_0x5acf08,_0x5c065e),_0x4c4e98={'from':config['smtpFrom'],'to':_0x5acf08['email'],'subject':_0x34dd67(0x87),'text':_0x34dd67(0x87),'html':_0x2e4df4};await transporter[_0x34dd67(0x9b)](_0x4c4e98),console[_0x34dd67(0x91)](_0x34dd67(0x8d)+_0x5acf08[_0x34dd67(0xa9)]);}catch(_0x5b1a34){console['log'](_0x34dd67(0x96)),console['log'](_0x34dd67(0x8c)+_0x5acf08[_0x34dd67(0xa9)]+':',_0x5b1a34);throw _0x5b1a34;}},getAccountDeletionPreventionTemplate=_0x5c830a=>{const _0x913044=a2_0x1e5aef;return _0x913044(0xa6)+(_0x5c830a[_0x913044(0x7f)]||_0x5c830a[_0x913044(0xa5)])+_0x913044(0x92);},sendAccountDeletionPreventionEmails=async()=>{const _0x48268d=a2_0x1e5aef;try{const [_0x3f277e]=await conn[_0x48268d(0x98)]()['execute'](_0x48268d(0x76),[config[_0x48268d(0x9f)]-config[_0x48268d(0x85)]]);if(_0x3f277e[_0x48268d(0x89)]===0x0){console[_0x48268d(0x91)](_0x48268d(0x81));return;}for(const _0x2199f7 of _0x3f277e){const _0x86101d=getAccountDeletionPreventionTemplate(_0x2199f7),_0x111b43={'from':config[_0x48268d(0x99)],'to':_0x2199f7[_0x48268d(0xa9)],'subject':'Important:\x20Your\x20CADViewer\x20Account\x20Will\x20Expire\x20Soon','text':_0x48268d(0xa0),'html':_0x86101d};try{await transporter[_0x48268d(0x9b)](_0x111b43),console[_0x48268d(0x91)](_0x48268d(0x82)+_0x2199f7[_0x48268d(0xa9)]);}catch(_0x145c99){console[_0x48268d(0x91)](_0x48268d(0x96)),console[_0x48268d(0x91)](_0x48268d(0x88)+_0x2199f7[_0x48268d(0xa9)]),console[_0x48268d(0x91)](_0x145c99);}}}catch(_0x230e55){console[_0x48268d(0x91)](_0x48268d(0x96)),console['log'](_0x48268d(0x72)),console['log'](_0x230e55);}},getFollowUpEmailTemplate=(_0x227f9a,_0x161abc,_0x179006)=>{const _0x171edd=a2_0x1e5aef,_0x180df6={0x1:_0x171edd(0x9d),0x2:_0x171edd(0x79),0x3:_0x171edd(0x8b)}[_0x179006];return _0x171edd(0x9c)+(_0x227f9a[_0x171edd(0x7f)]||_0x227f9a[_0x171edd(0xa5)])+_0x171edd(0x9e)+_0x180df6+_0x171edd(0x84)+_0x161abc+_0x171edd(0x71)+_0x161abc+_0x171edd(0xa3);},sendFollowUpEmails=async()=>{const _0x4dc83=a2_0x1e5aef;try{const _0xf24045=_0x4dc83(0x7b),[_0x53941e]=await conn['promise']()[_0x4dc83(0xa7)](_0xf24045);for(const _0x2c20ee of _0x53941e){const _0x4eccc2=config[_0x4dc83(0x83)]+_0x4dc83(0x90)+_0x2c20ee[_0x4dc83(0x86)],_0x11d532=getFollowUpEmailTemplate(_0x2c20ee,_0x4eccc2,_0x2c20ee['follow_up_count']+0x1),_0x51f6d2={'from':config[_0x4dc83(0x99)],'to':_0x2c20ee['email'],'subject':'CADViewer\x20Email\x20Validation\x20Reminder','text':_0x4dc83(0x8e),'html':_0x11d532};try{await transporter['sendMail'](_0x51f6d2),await conn['promise']()[_0x4dc83(0xa7)](_0x4dc83(0x80),[_0x2c20ee['id']]),console['log'](_0x4dc83(0xab)+_0x2c20ee[_0x4dc83(0xa9)]);}catch(_0x1e96c1){console[_0x4dc83(0x8f)]('Failed\x20to\x20send\x20follow-up\x20email\x20to\x20'+_0x2c20ee['email']+':',_0x1e96c1);}}}catch(_0x551148){console[_0x4dc83(0x8f)]('Error\x20in\x20sendFollowUpEmails:',_0x551148);}};module['exports']={'transporter':transporter,'sendFollowUpEmails':sendFollowUpEmails,'sendAccountDeletionPreventionEmails':sendAccountDeletionPreventionEmails,'sendWelcomeEmail':sendWelcomeEmail};function a2_0x3fef(){const _0xa8e3bd=['3\x20hours',',</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20noticed\x20that\x20you\x20haven\x27t\x20validated\x20your\x20email\x20address\x20yet.\x20It\x27s\x20been\x20','demoUserRetentionDays','Your\x20CADViewer\x20demo\x20account\x20will\x20expire\x20in\x202\x20days.\x20Please\x20contact\x20an\x20administrator\x20if\x20you\x20wish\x20to\x20keep\x20your\x20account.','smtpSecure','9707715AFZDos','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20','9755767DtHbcI','username','\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Important:\x20Your\x20CADViewer\x20Account</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Hello\x20','execute','smtpPass','email','11109910DXCqTh','Follow-up\x20email\x20sent\x20to\x20','\x22\x20class=\x22button\x22>Validate\x20my\x20email\x20address</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20the\x20button\x20doesn\x27t\x20work,\x20you\x20can\x20copy\x20and\x20paste\x20this\x20link\x20in\x20your\x20browser:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22word-break:\x20break-all;\x22>','Error\x20while\x20fetching\x20users\x20for\x20account\x20deletion\x20prevention\x20emails','../CADViewer_config.json','slice','smtpUser','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','23666IgUUFj','862716RIjpRO','6\x20hours','10967856BnDLdF','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20*\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x0a\x20\x20\x20\x20\x20\x20WHERE\x20is_enabled\x20=\x200\x0a\x20\x20\x20\x20\x20\x20AND\x20validation_token\x20IS\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20AND\x20follow_up_count\x20<\x203\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20<=\x20DATE_SUB(NOW(),\x20INTERVAL\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20CASE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x200\x20THEN\x203\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x201\x20THEN\x206\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x202\x20THEN\x2012\x0a\x20\x20\x20\x20\x20\x20\x20\x20END\x0a\x20\x20\x20\x20\x20\x20HOUR)\x0a\x20\x20\x20\x20','119lwGArB','3AAKpgn','nodemailer','first_name','UPDATE\x20users\x20SET\x20follow_up_count\x20=\x20follow_up_count\x20+\x201\x20WHERE\x20id\x20=\x20?','No\x20users\x20to\x20notify\x20about\x20account\x20deletion','Deletion\x20prevention\x20email\x20sent\x20to\x20','frontendUrl','\x20since\x20you\x20registered.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>To\x20start\x20using\x20CADViewer\x20Visual\x20Query,\x20please\x20validate\x20your\x20email\x20address\x20by\x20clicking\x20the\x20button\x20below:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','demoUserRetentionDaysAlertBeforeDeletion','validation_token','Welcome\x20to\x20CADViewer','Failed\x20to\x20send\x20email\x20to\x20','length','534FYyXPL','12\x20hours','Failed\x20to\x20send\x20welcome\x20email\x20to\x20','Welcome\x20email\x20sent\x20to\x20','Please\x20validate\x20your\x20CADViewer\x20email\x20address','error','/validate-email/','log',',</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20wanted\x20to\x20inform\x20you\x20that\x20your\x20demo\x20account\x20will\x20expire\x20in\x202\x20days\x20and\x20will\x20be\x20automatically\x20deleted.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20you\x20wish\x20to\x20keep\x20your\x20account\x20and\x20all\x20your\x20data,\x20please\x20contact\x20us\x20on\x20<a\x20href=\x22mailto:developer@tailormade.com\x22>developer@tailormade.com</a>\x20or\x20<a\x20href=\x22mailto:internationalsales@tailormade.com\x22>internationalsales@tailormade.com</a>\x20as\x20soon\x20as\x20possible.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Thank\x20you\x20for\x20using\x20CADViewer!</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20','49675UVuYPd','\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Welcome\x20to\x20CADViewer!</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20are\x20delighted\x20to\x20welcome\x20you\x20to\x20our\x20community.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>To\x20start\x20using\x20CADViewer\x20Visual\x20Query,\x20please\x20validate\x20your\x20email\x20address\x20by\x20clicking\x20the\x20button\x20below:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','./mysql.js','===================error===================','smtpHost','promise','smtpFrom','endsWith','sendMail','\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>CADViewer\x20Email\x20Validation\x20Reminder</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Hello\x20'];a2_0x3fef=function(){return _0xa8e3bd;};return a2_0x3fef();}
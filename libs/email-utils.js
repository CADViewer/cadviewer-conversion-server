const a2_0x1c6381=a2_0x4fa9;function a2_0x52dc(){const _0x4b65fe=['3QSmkjW','3\x20hours','Welcome\x20email\x20sent\x20to\x20','Please\x20validate\x20your\x20CADViewer\x20email\x20address','4085468QQLFFO','/validate-email/','No\x20users\x20to\x20notify\x20about\x20account\x20deletion','12\x20hours','smtpUser',',</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20wanted\x20to\x20inform\x20you\x20that\x20your\x20demo\x20account\x20will\x20expire\x20in\x202\x20days\x20and\x20will\x20be\x20automatically\x20deleted.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20you\x20wish\x20to\x20keep\x20your\x20account\x20and\x20all\x20your\x20data,\x20please\x20contact\x20us\x20on\x20<a\x20href=\x22mailto:developer@tailormade.com\x22>developer@tailormade.com</a>\x20or\x20<a\x20href=\x22mailto:internationalsales@tailormade.com\x22>internationalsales@tailormade.com</a>\x20as\x20soon\x20as\x20possible.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Thank\x20you\x20for\x20using\x20CADViewer!</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20*\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x0a\x20\x20\x20\x20\x20\x20WHERE\x20is_enabled\x20=\x200\x0a\x20\x20\x20\x20\x20\x20AND\x20validation_token\x20IS\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20AND\x20follow_up_count\x20<\x203\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20<=\x20DATE_SUB(NOW(),\x20INTERVAL\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20CASE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x200\x20THEN\x203\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x201\x20THEN\x206\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x202\x20THEN\x2012\x0a\x20\x20\x20\x20\x20\x20\x20\x20END\x0a\x20\x20\x20\x20\x20\x20HOUR)\x0a\x20\x20\x20\x20','follow_up_count','1110882nTvlbv','endsWith','promise','first_name','email','Error\x20in\x20sendFollowUpEmails:','nodemailer','sendMail','slice','Your\x20CADViewer\x20demo\x20account\x20will\x20expire\x20in\x202\x20days.\x20Please\x20contact\x20an\x20administrator\x20if\x20you\x20wish\x20to\x20keep\x20your\x20account.','length','validation_token','12475503AYVDjH','demoUserRetentionDays','\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Welcome\x20to\x20CADViewer!</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20are\x20delighted\x20to\x20welcome\x20you\x20to\x20our\x20community.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>To\x20start\x20using\x20CADViewer\x20Visual\x20Query,\x20please\x20validate\x20your\x20email\x20address\x20by\x20clicking\x20the\x20button\x20below:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','smtpPort','execute','Follow-up\x20email\x20sent\x20to\x20','smtpHost','Welcome\x20to\x20CADViewer','21ICPwYv','../CADViewer_config.json','exports','Important:\x20Your\x20CADViewer\x20Account\x20Will\x20Expire\x20Soon','error','\x22\x20class=\x22button\x22>Validate\x20my\x20email\x20address</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20the\x20button\x20doesn\x27t\x20work,\x20you\x20can\x20copy\x20and\x20paste\x20this\x20link\x20in\x20your\x20browser:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22word-break:\x20break-all;\x22>','6\x20hours','8107105AxAylZ','14890880sLynNo','smtpSecure','Failed\x20to\x20send\x20email\x20to\x20',',</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20noticed\x20that\x20you\x20haven\x27t\x20validated\x20your\x20email\x20address\x20yet.\x20It\x27s\x20been\x20','CADViewer\x20Email\x20Validation\x20Reminder','46762hQSAHy','demoUserRetentionDaysAlertBeforeDeletion','\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Important:\x20Your\x20CADViewer\x20Account</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Hello\x20','log','smtpFrom','username','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','createTransport','frontendUrl','===================error===================','10158785ixTJtG','smtpPass'];a2_0x52dc=function(){return _0x4b65fe;};return a2_0x52dc();}(function(_0x14d542,_0x265614){const _0x16ba15=a2_0x4fa9,_0x2a0d9b=_0x14d542();while(!![]){try{const _0x604707=-parseInt(_0x16ba15(0x10f))/0x1*(parseInt(_0x16ba15(0x11c))/0x2)+parseInt(_0x16ba15(0x128))/0x3*(parseInt(_0x16ba15(0x12c))/0x4)+parseInt(_0x16ba15(0x116))/0x5+-parseInt(_0x16ba15(0xfb))/0x6+-parseInt(_0x16ba15(0x126))/0x7+parseInt(_0x16ba15(0x117))/0x8+-parseInt(_0x16ba15(0x107))/0x9;if(_0x604707===_0x265614)break;else _0x2a0d9b['push'](_0x2a0d9b['shift']());}catch(_0x48cd27){_0x2a0d9b['push'](_0x2a0d9b['shift']());}}}(a2_0x52dc,0xf1d72));const nodemailer=require(a2_0x1c6381(0x101)),config=require(a2_0x1c6381(0x110)),conn=require('./mysql.js'),transporter=nodemailer[a2_0x1c6381(0x123)]({'host':config[a2_0x1c6381(0x10d)],'port':config[a2_0x1c6381(0x10a)],'secure':config[a2_0x1c6381(0x118)],'auth':{'user':config[a2_0x1c6381(0x130)],'pass':config[a2_0x1c6381(0x127)]}}),getWelcomeEmailTemplate=(_0x37e246,_0x2643e4)=>{const _0x751437=a2_0x1c6381;return _0x751437(0x109)+_0x2643e4+_0x751437(0x114)+_0x2643e4+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20';},sendWelcomeEmail=async(_0x2abbe1,_0x16504a)=>{const _0x267fdc=a2_0x1c6381;try{let _0x3acde=config[_0x267fdc(0x124)];_0x3acde[_0x267fdc(0xfc)]('/')&&(_0x3acde=_0x3acde[_0x267fdc(0x103)](0x0,-0x1));const _0x5ba679=_0x3acde+'/validate-email/'+_0x16504a,_0x17f875=getWelcomeEmailTemplate(_0x2abbe1,_0x5ba679),_0x62a5a9={'from':config[_0x267fdc(0x120)],'to':_0x2abbe1[_0x267fdc(0xff)],'subject':_0x267fdc(0x10e),'text':_0x267fdc(0x10e),'html':_0x17f875};await transporter['sendMail'](_0x62a5a9),console[_0x267fdc(0x11f)](_0x267fdc(0x12a)+_0x2abbe1[_0x267fdc(0xff)]);}catch(_0x4a5d22){console[_0x267fdc(0x11f)]('===================error==================='),console[_0x267fdc(0x11f)]('Failed\x20to\x20send\x20welcome\x20email\x20to\x20'+_0x2abbe1[_0x267fdc(0xff)]+':',_0x4a5d22);throw _0x4a5d22;}},getAccountDeletionPreventionTemplate=_0x42eb5d=>{const _0xa8c0f5=a2_0x1c6381;return _0xa8c0f5(0x11e)+(_0x42eb5d[_0xa8c0f5(0xfe)]||_0x42eb5d[_0xa8c0f5(0x121)])+_0xa8c0f5(0x131);},sendAccountDeletionPreventionEmails=async()=>{const _0x34fe3d=a2_0x1c6381;try{const [_0xde85da]=await conn[_0x34fe3d(0xfd)]()[_0x34fe3d(0x10b)](_0x34fe3d(0x122),[config[_0x34fe3d(0x108)]-config[_0x34fe3d(0x11d)]]);if(_0xde85da[_0x34fe3d(0x105)]===0x0){console[_0x34fe3d(0x11f)](_0x34fe3d(0x12e));return;}for(const _0x1eaacd of _0xde85da){const _0x36ee12=getAccountDeletionPreventionTemplate(_0x1eaacd),_0x3eb25b={'from':config[_0x34fe3d(0x120)],'to':_0x1eaacd['email'],'subject':_0x34fe3d(0x112),'text':_0x34fe3d(0x104),'html':_0x36ee12};try{await transporter[_0x34fe3d(0x102)](_0x3eb25b),console[_0x34fe3d(0x11f)]('Deletion\x20prevention\x20email\x20sent\x20to\x20'+_0x1eaacd[_0x34fe3d(0xff)]);}catch(_0x3802ec){console[_0x34fe3d(0x11f)](_0x34fe3d(0x125)),console[_0x34fe3d(0x11f)](_0x34fe3d(0x119)+_0x1eaacd[_0x34fe3d(0xff)]),console['log'](_0x3802ec);}}}catch(_0x3756dd){console['log'](_0x34fe3d(0x125)),console['log']('Error\x20while\x20fetching\x20users\x20for\x20account\x20deletion\x20prevention\x20emails'),console[_0x34fe3d(0x11f)](_0x3756dd);}},getFollowUpEmailTemplate=(_0x5eff97,_0x4db57a,_0x2c4ed5)=>{const _0x5e129b=a2_0x1c6381,_0x144c7={0x1:_0x5e129b(0x129),0x2:_0x5e129b(0x115),0x3:_0x5e129b(0x12f)}[_0x2c4ed5];return'\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>CADViewer\x20Email\x20Validation\x20Reminder</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Hello\x20'+(_0x5eff97[_0x5e129b(0xfe)]||_0x5eff97[_0x5e129b(0x121)])+_0x5e129b(0x11a)+_0x144c7+'\x20since\x20you\x20registered.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>To\x20start\x20using\x20CADViewer\x20Visual\x20Query,\x20please\x20validate\x20your\x20email\x20address\x20by\x20clicking\x20the\x20button\x20below:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+_0x4db57a+_0x5e129b(0x114)+_0x4db57a+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20';},sendFollowUpEmails=async()=>{const _0xc579e8=a2_0x1c6381;try{const _0x480c9b=_0xc579e8(0x132),[_0x135ede]=await conn[_0xc579e8(0xfd)]()[_0xc579e8(0x10b)](_0x480c9b);for(const _0x25cdcd of _0x135ede){const _0x182373=config[_0xc579e8(0x124)]+_0xc579e8(0x12d)+_0x25cdcd[_0xc579e8(0x106)],_0x29bb9a=getFollowUpEmailTemplate(_0x25cdcd,_0x182373,_0x25cdcd[_0xc579e8(0xfa)]+0x1),_0x362dec={'from':config[_0xc579e8(0x120)],'to':_0x25cdcd[_0xc579e8(0xff)],'subject':_0xc579e8(0x11b),'text':_0xc579e8(0x12b),'html':_0x29bb9a};try{await transporter['sendMail'](_0x362dec),await conn['promise']()[_0xc579e8(0x10b)]('UPDATE\x20users\x20SET\x20follow_up_count\x20=\x20follow_up_count\x20+\x201\x20WHERE\x20id\x20=\x20?',[_0x25cdcd['id']]),console['log'](_0xc579e8(0x10c)+_0x25cdcd[_0xc579e8(0xff)]);}catch(_0x582474){console[_0xc579e8(0x113)]('Failed\x20to\x20send\x20follow-up\x20email\x20to\x20'+_0x25cdcd[_0xc579e8(0xff)]+':',_0x582474);}}}catch(_0x1397a1){console[_0xc579e8(0x113)](_0xc579e8(0x100),_0x1397a1);}};function a2_0x4fa9(_0x220edd,_0x3f137a){const _0x52dc29=a2_0x52dc();return a2_0x4fa9=function(_0x4fa900,_0x2c5409){_0x4fa900=_0x4fa900-0xfa;let _0x1cf59a=_0x52dc29[_0x4fa900];return _0x1cf59a;},a2_0x4fa9(_0x220edd,_0x3f137a);}module[a2_0x1c6381(0x111)]={'transporter':transporter,'sendFollowUpEmails':sendFollowUpEmails,'sendAccountDeletionPreventionEmails':sendAccountDeletionPreventionEmails,'sendWelcomeEmail':sendWelcomeEmail};
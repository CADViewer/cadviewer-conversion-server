const a3_0x390bf7=a3_0x1d04;function a3_0x5380(){const _0x4eef16=['\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>CADViewer\x20Email\x20Validation\x20Reminder</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Hello\x20','username','30EFELXx','5868fIvkXm','execute','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20*\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x0a\x20\x20\x20\x20\x20\x20WHERE\x20is_enabled\x20=\x200\x0a\x20\x20\x20\x20\x20\x20AND\x20validation_token\x20IS\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20AND\x20follow_up_count\x20<\x203\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20<=\x20DATE_SUB(NOW(),\x20INTERVAL\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20CASE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x200\x20THEN\x203\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x201\x20THEN\x206\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x202\x20THEN\x2012\x0a\x20\x20\x20\x20\x20\x20\x20\x20END\x0a\x20\x20\x20\x20\x20\x20HOUR)\x0a\x20\x20\x20\x20','5435QvySEl','Your\x20CADViewer\x20demo\x20account\x20will\x20expire\x20in\x202\x20days.\x20Please\x20contact\x20an\x20administrator\x20if\x20you\x20wish\x20to\x20keep\x20your\x20account.','error','Welcome\x20email\x20sent\x20to\x20','/validate-email/',',</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20wanted\x20to\x20inform\x20you\x20that\x20your\x20demo\x20account\x20will\x20expire\x20in\x202\x20days\x20and\x20will\x20be\x20automatically\x20deleted.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20you\x20wish\x20to\x20keep\x20your\x20account\x20and\x20all\x20your\x20data,\x20please\x20contact\x20us\x20on\x20<a\x20href=\x22mailto:developer@tailormade.com\x22>developer@tailormade.com</a>\x20or\x20<a\x20href=\x22mailto:internationalsales@tailormade.com\x22>internationalsales@tailormade.com</a>\x20as\x20soon\x20as\x20possible.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Thank\x20you\x20for\x20using\x20CADViewer!</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20','No\x20users\x20to\x20notify\x20about\x20account\x20deletion','3\x20hours','1423434RUqXPG','\x22\x20class=\x22button\x22>Validate\x20my\x20email\x20address</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20the\x20button\x20doesn\x27t\x20work,\x20you\x20can\x20copy\x20and\x20paste\x20this\x20link\x20in\x20your\x20browser:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22word-break:\x20break-all;\x22>','Deletion\x20prevention\x20email\x20sent\x20to\x20','Welcome\x20to\x20CADViewer','===================error===================','frontendUrl','smtpFrom','validation_token','length','sendMail','7518kJlJhj','promise','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20','endsWith','565020lEbHMw','44396FrqfHM','2fbGuiu','follow_up_count','email','8yiCFMa','demoUserRetentionDaysAlertBeforeDeletion','Error\x20while\x20fetching\x20users\x20for\x20account\x20deletion\x20prevention\x20emails','../CADViewer_config.json','log','\x20since\x20you\x20registered.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>To\x20start\x20using\x20CADViewer\x20Visual\x20Query,\x20please\x20validate\x20your\x20email\x20address\x20by\x20clicking\x20the\x20button\x20below:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','12\x20hours','6\x20hours','Failed\x20to\x20send\x20follow-up\x20email\x20to\x20','slice','./mysql.js','transporter','11044901CkZqFt','3679356XIjBVe','1560096basMBx','\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Welcome\x20to\x20CADViewer!</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20are\x20delighted\x20to\x20welcome\x20you\x20to\x20our\x20community.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>To\x20start\x20using\x20CADViewer\x20Visual\x20Query,\x20please\x20validate\x20your\x20email\x20address\x20by\x20clicking\x20the\x20button\x20below:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','./mail.js'];a3_0x5380=function(){return _0x4eef16;};return a3_0x5380();}(function(_0x140688,_0x1d75ef){const _0x21fd91=a3_0x1d04,_0x581c3e=_0x140688();while(!![]){try{const _0xd0c4bd=-parseInt(_0x21fd91(0x1ee))/0x1+-parseInt(_0x21fd91(0x1cc))/0x2*(-parseInt(_0x21fd91(0x1dc))/0x3)+-parseInt(_0x21fd91(0x1ca))/0x4+parseInt(_0x21fd91(0x1e6))/0x5*(parseInt(_0x21fd91(0x1f8))/0x6)+parseInt(_0x21fd91(0x1db))/0x7*(-parseInt(_0x21fd91(0x1cf))/0x8)+-parseInt(_0x21fd91(0x1dd))/0x9*(parseInt(_0x21fd91(0x1e2))/0xa)+-parseInt(_0x21fd91(0x1cb))/0xb*(-parseInt(_0x21fd91(0x1e3))/0xc);if(_0xd0c4bd===_0x1d75ef)break;else _0x581c3e['push'](_0x581c3e['shift']());}catch(_0x1e75b7){_0x581c3e['push'](_0x581c3e['shift']());}}}(a3_0x5380,0xdb9af));const config=require(a3_0x390bf7(0x1d2)),conn=require(a3_0x390bf7(0x1d9)),transporter=require(a3_0x390bf7(0x1df))[a3_0x390bf7(0x1da)],getWelcomeEmailTemplate=(_0x625229,_0x2726fa)=>{const _0xef90de=a3_0x390bf7;return _0xef90de(0x1de)+_0x2726fa+_0xef90de(0x1ef)+_0x2726fa+_0xef90de(0x1c8);},sendWelcomeEmail=async(_0x273acb,_0x49d364)=>{const _0x5bf72c=a3_0x390bf7;try{let _0x141b27=config[_0x5bf72c(0x1f3)];_0x141b27[_0x5bf72c(0x1c9)]('/')&&(_0x141b27=_0x141b27[_0x5bf72c(0x1d8)](0x0,-0x1));const _0x18822b=_0x141b27+'/validate-email/'+_0x49d364,_0x5d8c60=getWelcomeEmailTemplate(_0x273acb,_0x18822b),_0x1b8fb5={'from':config['smtpFrom'],'to':_0x273acb[_0x5bf72c(0x1ce)],'subject':_0x5bf72c(0x1f1),'text':_0x5bf72c(0x1f1),'html':_0x5d8c60};await transporter[_0x5bf72c(0x1f7)](_0x1b8fb5),console[_0x5bf72c(0x1d3)](_0x5bf72c(0x1e9)+_0x273acb[_0x5bf72c(0x1ce)]);}catch(_0x102bc8){console['log']('===================error==================='),console[_0x5bf72c(0x1d3)]('Failed\x20to\x20send\x20welcome\x20email\x20to\x20'+_0x273acb['email']+':',_0x102bc8);throw _0x102bc8;}},getAccountDeletionPreventionTemplate=_0x1f9428=>{const _0x487b5e=a3_0x390bf7;return'\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Important:\x20Your\x20CADViewer\x20Account</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Hello\x20'+(_0x1f9428['first_name']||_0x1f9428['username'])+_0x487b5e(0x1eb);},sendAccountDeletionPreventionEmails=async()=>{const _0x4848f3=a3_0x390bf7;try{const [_0x55e24f]=await conn[_0x4848f3(0x1f9)]()[_0x4848f3(0x1e4)]('SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)',[config['demoUserRetentionDays']-config[_0x4848f3(0x1d0)]]);if(_0x55e24f[_0x4848f3(0x1f6)]===0x0){console[_0x4848f3(0x1d3)](_0x4848f3(0x1ec));return;}for(const _0x13dce1 of _0x55e24f){const _0x1fcfd7=getAccountDeletionPreventionTemplate(_0x13dce1),_0x4e3ada={'from':config['smtpFrom'],'to':_0x13dce1['email'],'subject':'Important:\x20Your\x20CADViewer\x20Account\x20Will\x20Expire\x20Soon','text':_0x4848f3(0x1e7),'html':_0x1fcfd7};try{await transporter[_0x4848f3(0x1f7)](_0x4e3ada),console[_0x4848f3(0x1d3)](_0x4848f3(0x1f0)+_0x13dce1[_0x4848f3(0x1ce)]);}catch(_0x163e59){console[_0x4848f3(0x1d3)](_0x4848f3(0x1f2)),console[_0x4848f3(0x1d3)]('Failed\x20to\x20send\x20email\x20to\x20'+_0x13dce1[_0x4848f3(0x1ce)]),console['log'](_0x163e59);}}}catch(_0x265b1d){console[_0x4848f3(0x1d3)]('===================error==================='),console[_0x4848f3(0x1d3)](_0x4848f3(0x1d1)),console[_0x4848f3(0x1d3)](_0x265b1d);}},getFollowUpEmailTemplate=(_0x261e81,_0x309c03,_0x51e3a5)=>{const _0x3fd6a4=a3_0x390bf7,_0x36f0e2={0x1:_0x3fd6a4(0x1ed),0x2:_0x3fd6a4(0x1d6),0x3:_0x3fd6a4(0x1d5)}[_0x51e3a5];return _0x3fd6a4(0x1e0)+(_0x261e81['first_name']||_0x261e81[_0x3fd6a4(0x1e1)])+',</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20noticed\x20that\x20you\x20haven\x27t\x20validated\x20your\x20email\x20address\x20yet.\x20It\x27s\x20been\x20'+_0x36f0e2+_0x3fd6a4(0x1d4)+_0x309c03+_0x3fd6a4(0x1ef)+_0x309c03+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20';},sendFollowUpEmails=async()=>{const _0x325c16=a3_0x390bf7;try{const _0x350e5e=_0x325c16(0x1e5),[_0x5e9cbf]=await conn[_0x325c16(0x1f9)]()[_0x325c16(0x1e4)](_0x350e5e);for(const _0x1a963e of _0x5e9cbf){const _0x3e2fe5=config[_0x325c16(0x1f3)]+_0x325c16(0x1ea)+_0x1a963e[_0x325c16(0x1f5)],_0x568ed3=getFollowUpEmailTemplate(_0x1a963e,_0x3e2fe5,_0x1a963e[_0x325c16(0x1cd)]+0x1),_0x23015d={'from':config[_0x325c16(0x1f4)],'to':_0x1a963e[_0x325c16(0x1ce)],'subject':'CADViewer\x20Email\x20Validation\x20Reminder','text':'Please\x20validate\x20your\x20CADViewer\x20email\x20address','html':_0x568ed3};try{await transporter[_0x325c16(0x1f7)](_0x23015d),await conn['promise']()[_0x325c16(0x1e4)]('UPDATE\x20users\x20SET\x20follow_up_count\x20=\x20follow_up_count\x20+\x201\x20WHERE\x20id\x20=\x20?',[_0x1a963e['id']]),console[_0x325c16(0x1d3)]('Follow-up\x20email\x20sent\x20to\x20'+_0x1a963e[_0x325c16(0x1ce)]);}catch(_0x310ffb){console[_0x325c16(0x1e8)](_0x325c16(0x1d7)+_0x1a963e['email']+':',_0x310ffb);}}}catch(_0x1430cb){console[_0x325c16(0x1e8)]('Error\x20in\x20sendFollowUpEmails:',_0x1430cb);}};function a3_0x1d04(_0x5ba9a4,_0x58a0af){const _0x538089=a3_0x5380();return a3_0x1d04=function(_0x1d04c4,_0x1cd802){_0x1d04c4=_0x1d04c4-0x1c8;let _0x4c6678=_0x538089[_0x1d04c4];return _0x4c6678;},a3_0x1d04(_0x5ba9a4,_0x58a0af);}module['exports']={'transporter':transporter,'sendFollowUpEmails':sendFollowUpEmails,'sendAccountDeletionPreventionEmails':sendAccountDeletionPreventionEmails,'sendWelcomeEmail':sendWelcomeEmail};
function a2_0x555b(_0x2a4866,_0x4aa27f){const _0x4c5a59=a2_0x4c5a();return a2_0x555b=function(_0x555bcd,_0x3cdc32){_0x555bcd=_0x555bcd-0x73;let _0x48f7db=_0x4c5a59[_0x555bcd];return _0x48f7db;},a2_0x555b(_0x2a4866,_0x4aa27f);}const a2_0x59fb5f=a2_0x555b;(function(_0x28484b,_0x4af173){const _0x3c8d7e=a2_0x555b,_0x3e963c=_0x28484b();while(!![]){try{const _0x3cd9f7=parseInt(_0x3c8d7e(0x81))/0x1+-parseInt(_0x3c8d7e(0x94))/0x2+parseInt(_0x3c8d7e(0x9a))/0x3*(parseInt(_0x3c8d7e(0x7b))/0x4)+-parseInt(_0x3c8d7e(0x7f))/0x5*(-parseInt(_0x3c8d7e(0x84))/0x6)+-parseInt(_0x3c8d7e(0xa3))/0x7*(parseInt(_0x3c8d7e(0x74))/0x8)+-parseInt(_0x3c8d7e(0xa4))/0x9+-parseInt(_0x3c8d7e(0x9d))/0xa*(-parseInt(_0x3c8d7e(0x7c))/0xb);if(_0x3cd9f7===_0x4af173)break;else _0x3e963c['push'](_0x3e963c['shift']());}catch(_0x58bf8e){_0x3e963c['push'](_0x3e963c['shift']());}}}(a2_0x4c5a,0x43a95));const config=require(a2_0x59fb5f(0x89)),conn=require(a2_0x59fb5f(0xa8)),transporter=require('./mail.js')[a2_0x59fb5f(0xa5)],getWelcomeEmailTemplate=(_0x1b17e8,_0x323103)=>{const _0x50b397=a2_0x59fb5f;return _0x50b397(0x7a)+_0x323103+_0x50b397(0x97)+_0x323103+_0x50b397(0x96);},sendWelcomeEmail=async(_0x2e9a83,_0x15cbb3)=>{const _0x5d8629=a2_0x59fb5f;try{let _0x4b0cb6=config[_0x5d8629(0xa7)];_0x4b0cb6[_0x5d8629(0x91)]('/')&&(_0x4b0cb6=_0x4b0cb6[_0x5d8629(0x86)](0x0,-0x1));const _0xf11231=_0x4b0cb6+_0x5d8629(0x80)+_0x15cbb3,_0x1b446a=getWelcomeEmailTemplate(_0x2e9a83,_0xf11231),_0x544500={'from':config['smtpFrom'],'to':_0x2e9a83[_0x5d8629(0x85)],'subject':_0x5d8629(0x7d),'text':_0x5d8629(0x7d),'html':_0x1b446a};await transporter[_0x5d8629(0x87)](_0x544500),console[_0x5d8629(0x82)](_0x5d8629(0x8e)+_0x2e9a83[_0x5d8629(0x85)]);}catch(_0x333645){console[_0x5d8629(0x82)](_0x5d8629(0xa2)),console[_0x5d8629(0x82)](_0x5d8629(0x8b)+_0x2e9a83['email']+':',_0x333645);throw _0x333645;}},getAccountDeletionPreventionTemplate=_0x4da56e=>{const _0x2df5ef=a2_0x59fb5f;return _0x2df5ef(0x9f)+(_0x4da56e['first_name']||_0x4da56e['username'])+_0x2df5ef(0x8f);},sendAccountDeletionPreventionEmails=async()=>{const _0x50453b=a2_0x59fb5f;try{const [_0xdaf316]=await conn['promise']()['execute'](_0x50453b(0x99),[config['demoUserRetentionDays']-config[_0x50453b(0x90)]]);if(_0xdaf316[_0x50453b(0x88)]===0x0){console['log'](_0x50453b(0x79));return;}for(const _0x293259 of _0xdaf316){const _0x548726=getAccountDeletionPreventionTemplate(_0x293259),_0x2f73f1={'from':config[_0x50453b(0xa1)],'to':_0x293259[_0x50453b(0x85)],'subject':_0x50453b(0xaa),'text':'Your\x20CADViewer\x20demo\x20account\x20will\x20expire\x20in\x202\x20days.\x20Please\x20contact\x20an\x20administrator\x20if\x20you\x20wish\x20to\x20keep\x20your\x20account.','html':_0x548726};try{await transporter[_0x50453b(0x87)](_0x2f73f1),console[_0x50453b(0x82)](_0x50453b(0xa0)+_0x293259['email']);}catch(_0x36bfaa){console['log'](_0x50453b(0xa2)),console[_0x50453b(0x82)](_0x50453b(0x78)+_0x293259['email']),console['log'](_0x36bfaa);}}}catch(_0x2aba7){console['log'](_0x50453b(0xa2)),console[_0x50453b(0x82)](_0x50453b(0x9b)),console[_0x50453b(0x82)](_0x2aba7);}},getFollowUpEmailTemplate=(_0x3106fc,_0x3a6df2,_0x562c5c)=>{const _0x5a810f=a2_0x59fb5f,_0x358d2f={0x1:_0x5a810f(0x9c),0x2:_0x5a810f(0x73),0x3:_0x5a810f(0x9e)}[_0x562c5c];return _0x5a810f(0xab)+(_0x3106fc[_0x5a810f(0x92)]||_0x3106fc[_0x5a810f(0x83)])+_0x5a810f(0xa6)+_0x358d2f+_0x5a810f(0xac)+_0x3a6df2+_0x5a810f(0x97)+_0x3a6df2+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20';},sendFollowUpEmails=async()=>{const _0x2013d3=a2_0x59fb5f;try{const _0x4be52c='\x0a\x20\x20\x20\x20\x20\x20SELECT\x20*\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x0a\x20\x20\x20\x20\x20\x20WHERE\x20is_enabled\x20=\x200\x0a\x20\x20\x20\x20\x20\x20AND\x20validation_token\x20IS\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20AND\x20follow_up_count\x20<\x203\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20<=\x20DATE_SUB(NOW(),\x20INTERVAL\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20CASE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x200\x20THEN\x203\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x201\x20THEN\x206\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x202\x20THEN\x2012\x0a\x20\x20\x20\x20\x20\x20\x20\x20END\x0a\x20\x20\x20\x20\x20\x20HOUR)\x0a\x20\x20\x20\x20',[_0x4af7de]=await conn[_0x2013d3(0x8d)]()[_0x2013d3(0x7e)](_0x4be52c);for(const _0x4011ed of _0x4af7de){const _0x66a251=config[_0x2013d3(0xa7)]+'/validate-email/'+_0x4011ed[_0x2013d3(0xa9)],_0x134ddb=getFollowUpEmailTemplate(_0x4011ed,_0x66a251,_0x4011ed[_0x2013d3(0x76)]+0x1),_0x4c0b59={'from':config[_0x2013d3(0xa1)],'to':_0x4011ed[_0x2013d3(0x85)],'subject':_0x2013d3(0x95),'text':'Please\x20validate\x20your\x20CADViewer\x20email\x20address','html':_0x134ddb};try{await transporter[_0x2013d3(0x87)](_0x4c0b59),await conn[_0x2013d3(0x8d)]()['execute'](_0x2013d3(0x98),[_0x4011ed['id']]),console[_0x2013d3(0x82)](_0x2013d3(0x77)+_0x4011ed[_0x2013d3(0x85)]);}catch(_0x3fffe3){console[_0x2013d3(0x8c)](_0x2013d3(0x75)+_0x4011ed[_0x2013d3(0x85)]+':',_0x3fffe3);}}}catch(_0x11b1e3){console['error'](_0x2013d3(0x93),_0x11b1e3);}};function a2_0x4c5a(){const _0x4fd174=['follow_up_count','Follow-up\x20email\x20sent\x20to\x20','Failed\x20to\x20send\x20email\x20to\x20','No\x20users\x20to\x20notify\x20about\x20account\x20deletion','\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Welcome\x20to\x20CADViewer!</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20are\x20delighted\x20to\x20welcome\x20you\x20to\x20our\x20community.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>To\x20start\x20using\x20CADViewer\x20Visual\x20Query,\x20please\x20validate\x20your\x20email\x20address\x20by\x20clicking\x20the\x20button\x20below:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','12EoKzvT','4809849kNnVtB','Welcome\x20to\x20CADViewer','execute','231535dYeuIp','/validate-email/','207076UQNupi','log','username','66nzAqTQ','email','slice','sendMail','length','../CADViewer_config.json','exports','Failed\x20to\x20send\x20welcome\x20email\x20to\x20','error','promise','Welcome\x20email\x20sent\x20to\x20',',</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20wanted\x20to\x20inform\x20you\x20that\x20your\x20demo\x20account\x20will\x20expire\x20in\x202\x20days\x20and\x20will\x20be\x20automatically\x20deleted.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20you\x20wish\x20to\x20keep\x20your\x20account\x20and\x20all\x20your\x20data,\x20please\x20contact\x20us\x20on\x20<a\x20href=\x22mailto:developer@tailormade.com\x22>developer@tailormade.com</a>\x20or\x20<a\x20href=\x22mailto:internationalsales@tailormade.com\x22>internationalsales@tailormade.com</a>\x20as\x20soon\x20as\x20possible.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Thank\x20you\x20for\x20using\x20CADViewer!</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20','demoUserRetentionDaysAlertBeforeDeletion','endsWith','first_name','Error\x20in\x20sendFollowUpEmails:','685014tuIKIz','CADViewer\x20Email\x20Validation\x20Reminder','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20','\x22\x20class=\x22button\x22>Validate\x20my\x20email\x20address</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20the\x20button\x20doesn\x27t\x20work,\x20you\x20can\x20copy\x20and\x20paste\x20this\x20link\x20in\x20your\x20browser:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22word-break:\x20break-all;\x22>','UPDATE\x20users\x20SET\x20follow_up_count\x20=\x20follow_up_count\x20+\x201\x20WHERE\x20id\x20=\x20?','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','19713JcVhKb','Error\x20while\x20fetching\x20users\x20for\x20account\x20deletion\x20prevention\x20emails','3\x20hours','20PIQnAL','12\x20hours','\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Important:\x20Your\x20CADViewer\x20Account</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Hello\x20','Deletion\x20prevention\x20email\x20sent\x20to\x20','smtpFrom','===================error===================','4781KvgMeA','4554954yPfoCX','transporter',',</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20noticed\x20that\x20you\x20haven\x27t\x20validated\x20your\x20email\x20address\x20yet.\x20It\x27s\x20been\x20','frontendUrl','./mysql.js','validation_token','Important:\x20Your\x20CADViewer\x20Account\x20Will\x20Expire\x20Soon','\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>CADViewer\x20Email\x20Validation\x20Reminder</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Hello\x20','\x20since\x20you\x20registered.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>To\x20start\x20using\x20CADViewer\x20Visual\x20Query,\x20please\x20validate\x20your\x20email\x20address\x20by\x20clicking\x20the\x20button\x20below:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','6\x20hours','5680DXibMp','Failed\x20to\x20send\x20follow-up\x20email\x20to\x20'];a2_0x4c5a=function(){return _0x4fd174;};return a2_0x4c5a();}module[a2_0x59fb5f(0x8a)]={'transporter':transporter,'sendFollowUpEmails':sendFollowUpEmails,'sendAccountDeletionPreventionEmails':sendAccountDeletionPreventionEmails,'sendWelcomeEmail':sendWelcomeEmail};
const a3_0x20c4b7=a3_0x3499;function a3_0x3499(_0x1c7ed0,_0x2f0414){const _0x32f1ff=a3_0x32f1();return a3_0x3499=function(_0x3499f2,_0x3c8535){_0x3499f2=_0x3499f2-0x6a;let _0x15a8b7=_0x32f1ff[_0x3499f2];return _0x15a8b7;},a3_0x3499(_0x1c7ed0,_0x2f0414);}function a3_0x32f1(){const _0x12194e=['first_name','Failed\x20to\x20send\x20email\x20to\x20','===================error===================','7029875KahpkN','UPDATE\x20users\x20SET\x20follow_up_count\x20=\x20follow_up_count\x20+\x201\x20WHERE\x20id\x20=\x20?','follow_up_count','error',',</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20noticed\x20that\x20you\x20haven\x27t\x20validated\x20your\x20email\x20address\x20yet.\x20It\x27s\x20been\x20','email','execute','15NdEsoE','\x20since\x20you\x20registered.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>To\x20start\x20using\x20CADViewer\x20Visual\x20Query,\x20please\x20validate\x20your\x20email\x20address\x20by\x20clicking\x20the\x20button\x20below:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','12\x20hours','/validate-email/','12864910VFYrik','./mail.js','validation_token','username','sendMail','frontendUrl','promise','Welcome\x20email\x20sent\x20to\x20','CADViewer\x20Email\x20Validation\x20Reminder','Error\x20in\x20sendFollowUpEmails:','\x22\x20class=\x22button\x22>Validate\x20my\x20email\x20address</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20the\x20button\x20doesn\x27t\x20work,\x20you\x20can\x20copy\x20and\x20paste\x20this\x20link\x20in\x20your\x20browser:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22word-break:\x20break-all;\x22>','4236864eDdRpv','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20*\x0a\x20\x20\x20\x20\x20\x20FROM\x20users\x0a\x20\x20\x20\x20\x20\x20WHERE\x20is_enabled\x20=\x200\x0a\x20\x20\x20\x20\x20\x20AND\x20validation_token\x20IS\x20NOT\x20NULL\x0a\x20\x20\x20\x20\x20\x20AND\x20follow_up_count\x20<\x203\x0a\x20\x20\x20\x20\x20\x20AND\x20created_at\x20<=\x20DATE_SUB(NOW(),\x20INTERVAL\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20CASE\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x200\x20THEN\x203\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x201\x20THEN\x206\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHEN\x20follow_up_count\x20=\x202\x20THEN\x2012\x0a\x20\x20\x20\x20\x20\x20\x20\x20END\x0a\x20\x20\x20\x20\x20\x20HOUR)\x0a\x20\x20\x20\x20','18DUikAK',',</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20wanted\x20to\x20inform\x20you\x20that\x20your\x20demo\x20account\x20will\x20expire\x20in\x202\x20days\x20and\x20will\x20be\x20automatically\x20deleted.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>If\x20you\x20wish\x20to\x20keep\x20your\x20account\x20and\x20all\x20your\x20data,\x20please\x20contact\x20us\x20on\x20<a\x20href=\x22mailto:developer@tailormade.com\x22>developer@tailormade.com</a>\x20or\x20<a\x20href=\x22mailto:internationalsales@tailormade.com\x22>internationalsales@tailormade.com</a>\x20as\x20soon\x20as\x20possible.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Thank\x20you\x20for\x20using\x20CADViewer!</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22footer\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>This\x20email\x20was\x20sent\x20automatically,\x20please\x20do\x20not\x20reply.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</body>\x0a\x20\x20\x20\x20</html>\x0a\x20\x20','demoUserRetentionDaysAlertBeforeDeletion','length','Welcome\x20to\x20CADViewer','Important:\x20Your\x20CADViewer\x20Account\x20Will\x20Expire\x20Soon','350084oRpGqN','log','demoUserRetentionDays','SELECT\x20*\x20FROM\x20users\x20WHERE\x20role\x20=\x20\x27demo_user\x27\x20AND\x20created_at\x20<\x20DATE_SUB(NOW(),\x20INTERVAL\x20?\x20DAY)','120BxLMrT','./mysql.js','\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Important:\x20Your\x20CADViewer\x20Account</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Hello\x20','6\x20hours','Deletion\x20prevention\x20email\x20sent\x20to\x20','1120833gNyiNj','exports','slice','smtpFrom','../CADViewer_config.json','534786kvoQYj','Error\x20while\x20fetching\x20users\x20for\x20account\x20deletion\x20prevention\x20emails','175098EfDrvU','\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>CADViewer\x20Email\x20Validation\x20Reminder</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Hello\x20','Please\x20validate\x20your\x20CADViewer\x20email\x20address'];a3_0x32f1=function(){return _0x12194e;};return a3_0x32f1();}(function(_0x2f29d5,_0x273142){const _0x4f2334=a3_0x3499,_0x1535ab=_0x2f29d5();while(!![]){try{const _0x52a2db=parseInt(_0x4f2334(0x71))/0x1*(parseInt(_0x4f2334(0x99))/0x2)+parseInt(_0x4f2334(0x92))/0x3+parseInt(_0x4f2334(0x80))/0x4+parseInt(_0x4f2334(0x6a))/0x5+parseInt(_0x4f2334(0x97))/0x6+-parseInt(_0x4f2334(0x89))/0x7*(parseInt(_0x4f2334(0x8d))/0x8)+parseInt(_0x4f2334(0x83))/0x9*(-parseInt(_0x4f2334(0x75))/0xa);if(_0x52a2db===_0x273142)break;else _0x1535ab['push'](_0x1535ab['shift']());}catch(_0x306169){_0x1535ab['push'](_0x1535ab['shift']());}}}(a3_0x32f1,0xe01f6));const config=require(a3_0x20c4b7(0x96)),conn=require(a3_0x20c4b7(0x8e)),transporter=require(a3_0x20c4b7(0x76))['transporter'],getWelcomeEmailTemplate=(_0x26bdd8,_0x3be555)=>{const _0x2ae6dd=a3_0x20c4b7;return'\x0a\x20\x20\x20\x20<!DOCTYPE\x20html>\x0a\x20\x20\x20\x20<html>\x0a\x20\x20\x20\x20\x20\x20<head>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<style>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20body\x20{\x20font-family:\x20Arial,\x20sans-serif;\x20line-height:\x201.6;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.container\x20{\x20max-width:\x20600px;\x20margin:\x200\x20auto;\x20padding:\x2020px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.header\x20{\x20text-align:\x20center;\x20padding:\x2020px;\x20background:\x20#ea580c;\x20color:\x20white;\x20border-radius:\x205px\x205px\x200\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.content\x20{\x20padding:\x2020px;\x20background:\x20#f9f9f9;\x20border:\x201px\x20solid\x20#ddd;\x20border-radius:\x200\x200\x205px\x205px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button\x20{\x20display:\x20inline-block;\x20padding:\x2012px\x2024px;\x20background:\x20#ea580c;\x20color:\x20white\x20!important;\x20text-decoration:\x20none;\x20border-radius:\x205px;\x20margin:\x2020px\x200;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.button:hover\x20{\x20background:\x20#f97316;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.footer\x20{\x20text-align:\x20center;\x20margin-top:\x2020px;\x20color:\x20#666;\x20font-size:\x2012px;\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</style>\x0a\x20\x20\x20\x20\x20\x20</head>\x0a\x20\x20\x20\x20\x20\x20<body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h1>Welcome\x20to\x20CADViewer!</h1>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>We\x20are\x20delighted\x20to\x20welcome\x20you\x20to\x20our\x20community.</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>To\x20start\x20using\x20CADViewer\x20Visual\x20Query,\x20please\x20validate\x20your\x20email\x20address\x20by\x20clicking\x20the\x20button\x20below:</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22'+_0x3be555+_0x2ae6dd(0x7f)+_0x3be555+_0x2ae6dd(0x81);},sendWelcomeEmail=async(_0x42b923,_0x5a1c50)=>{const _0x3555ee=a3_0x20c4b7;try{let _0x240ea2=config['frontendUrl'];_0x240ea2['endsWith']('/')&&(_0x240ea2=_0x240ea2[_0x3555ee(0x94)](0x0,-0x1));const _0x440132=_0x240ea2+'/validate-email/'+_0x5a1c50,_0x5d6d2f=getWelcomeEmailTemplate(_0x42b923,_0x440132),_0x5a63fb={'from':config[_0x3555ee(0x95)],'to':_0x42b923['email'],'subject':'Welcome\x20to\x20CADViewer','text':_0x3555ee(0x87),'html':_0x5d6d2f};await transporter['sendMail'](_0x5a63fb),console[_0x3555ee(0x8a)](_0x3555ee(0x7c)+_0x42b923['email']);}catch(_0x52a65a){console[_0x3555ee(0x8a)](_0x3555ee(0x9e)),console['log']('Failed\x20to\x20send\x20welcome\x20email\x20to\x20'+_0x42b923[_0x3555ee(0x6f)]+':',_0x52a65a);throw _0x52a65a;}},getAccountDeletionPreventionTemplate=_0x59b0d7=>{const _0x478a24=a3_0x20c4b7;return _0x478a24(0x8f)+(_0x59b0d7['first_name']||_0x59b0d7[_0x478a24(0x78)])+_0x478a24(0x84);},sendAccountDeletionPreventionEmails=async()=>{const _0x11bb42=a3_0x20c4b7;try{const [_0x14943c]=await conn[_0x11bb42(0x7b)]()[_0x11bb42(0x70)](_0x11bb42(0x8c),[config[_0x11bb42(0x8b)]-config[_0x11bb42(0x85)]]);if(_0x14943c[_0x11bb42(0x86)]===0x0){console[_0x11bb42(0x8a)]('No\x20users\x20to\x20notify\x20about\x20account\x20deletion');return;}for(const _0x3452f2 of _0x14943c){const _0x414d4b=getAccountDeletionPreventionTemplate(_0x3452f2),_0xd2be13={'from':config[_0x11bb42(0x95)],'to':_0x3452f2[_0x11bb42(0x6f)],'subject':_0x11bb42(0x88),'text':'Your\x20CADViewer\x20demo\x20account\x20will\x20expire\x20in\x202\x20days.\x20Please\x20contact\x20an\x20administrator\x20if\x20you\x20wish\x20to\x20keep\x20your\x20account.','html':_0x414d4b};try{await transporter[_0x11bb42(0x79)](_0xd2be13),console[_0x11bb42(0x8a)](_0x11bb42(0x91)+_0x3452f2[_0x11bb42(0x6f)]);}catch(_0x2d33a0){console[_0x11bb42(0x8a)](_0x11bb42(0x9e)),console[_0x11bb42(0x8a)](_0x11bb42(0x9d)+_0x3452f2[_0x11bb42(0x6f)]),console['log'](_0x2d33a0);}}}catch(_0x33e3bf){console['log'](_0x11bb42(0x9e)),console[_0x11bb42(0x8a)](_0x11bb42(0x98)),console[_0x11bb42(0x8a)](_0x33e3bf);}},getFollowUpEmailTemplate=(_0x1c16bd,_0x12e959,_0xc0b139)=>{const _0x4d2d01=a3_0x20c4b7,_0x4f80e8={0x1:'3\x20hours',0x2:_0x4d2d01(0x90),0x3:_0x4d2d01(0x73)}[_0xc0b139];return _0x4d2d01(0x9a)+(_0x1c16bd[_0x4d2d01(0x9c)]||_0x1c16bd['username'])+_0x4d2d01(0x6e)+_0x4f80e8+_0x4d2d01(0x72)+_0x12e959+_0x4d2d01(0x7f)+_0x12e959+_0x4d2d01(0x81);},sendFollowUpEmails=async()=>{const _0x4be5e7=a3_0x20c4b7;try{const _0x53c621=_0x4be5e7(0x82),[_0x186ca6]=await conn[_0x4be5e7(0x7b)]()['execute'](_0x53c621);for(const _0x478a23 of _0x186ca6){const _0x2566b3=config[_0x4be5e7(0x7a)]+_0x4be5e7(0x74)+_0x478a23[_0x4be5e7(0x77)],_0xfa6f5=getFollowUpEmailTemplate(_0x478a23,_0x2566b3,_0x478a23[_0x4be5e7(0x6c)]+0x1),_0x573a47={'from':config['smtpFrom'],'to':_0x478a23[_0x4be5e7(0x6f)],'subject':_0x4be5e7(0x7d),'text':_0x4be5e7(0x9b),'html':_0xfa6f5};try{await transporter[_0x4be5e7(0x79)](_0x573a47),await conn[_0x4be5e7(0x7b)]()[_0x4be5e7(0x70)](_0x4be5e7(0x6b),[_0x478a23['id']]),console['log']('Follow-up\x20email\x20sent\x20to\x20'+_0x478a23[_0x4be5e7(0x6f)]);}catch(_0x32c3b7){console['error']('Failed\x20to\x20send\x20follow-up\x20email\x20to\x20'+_0x478a23['email']+':',_0x32c3b7);}}}catch(_0x4e184a){console[_0x4be5e7(0x6d)](_0x4be5e7(0x7e),_0x4e184a);}};module[a3_0x20c4b7(0x93)]={'transporter':transporter,'sendFollowUpEmails':sendFollowUpEmails,'sendAccountDeletionPreventionEmails':sendAccountDeletionPreventionEmails,'sendWelcomeEmail':sendWelcomeEmail};
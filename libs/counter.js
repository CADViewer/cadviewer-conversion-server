function a1_0x3b7f(){const _0x5b2c02=['1155650HLFPbi','httpCodesStoragePath','mem','readFile','588ZHGszF','startPeriodicSave','timestamp','network','statusCode','Request\x20monitor\x20initialized.','lastMinute','parse','=======>','cadviewer/settings/ressources-usage-stats.json','Error\x20saving\x20monitoring\x20data:','133329CIjqIH','error','Initializing\x20request\x20monitor...','getMinutes','byPath','codes','inputMb','675795WxfWNZ','push','rpsStoragePath','middleware','end','slice','usedMemMb','includes','then','cadviewer/settings/requests-per-minute.json','path','toString','time','Request\x20monitor\x20middleware','getHours','memory','info','filter','method','670784ArOEII','396012MzfaCR','ressourcesUsageStatsPath','/metrics','exports','currentRequests','getStats','inOut','node-os-utils','writeFile','netstat','stringify','httpCodesData','log','init','save','593TFrGWu','outputMb','forEach','utf8','getUsageRessourcesStatsAndSave','ressourcesUsageStats','80rPlrht','promises','now','cpu','total','floor','5451102qUEzoJ','rpsData','byCodes','toFixed'];a1_0x3b7f=function(){return _0x5b2c02;};return a1_0x3b7f();}const a1_0x10fad5=a1_0x19fa;(function(_0x592c5a,_0x5cf02a){const _0x347f46=a1_0x19fa,_0x129254=_0x592c5a();while(!![]){try{const _0x10e8c7=-parseInt(_0x347f46(0xe5))/0x1*(parseInt(_0x347f46(0xf9))/0x2)+parseInt(_0x347f46(0x10b))/0x3+-parseInt(_0x347f46(0x11e))/0x4+-parseInt(_0x347f46(0xf5))/0x5+parseInt(_0x347f46(0x11f))/0x6+parseInt(_0x347f46(0x104))/0x7*(-parseInt(_0x347f46(0xeb))/0x8)+parseInt(_0x347f46(0xf1))/0x9;if(_0x10e8c7===_0x5cf02a)break;else _0x129254['push'](_0x129254['shift']());}catch(_0x1015aa){_0x129254['push'](_0x129254['shift']());}}}(a1_0x3b7f,0x208bb));const fs=require('fs')[a1_0x10fad5(0xec)],osu=require(a1_0x10fad5(0xdd));class RequestMonitor{static [a1_0x10fad5(0x10d)]=a1_0x10fad5(0x114);static [a1_0x10fad5(0xf6)]='cadviewer/settings/http-codes-24h.json';static [a1_0x10fad5(0x120)]=a1_0x10fad5(0x102);static ['rpsData']=[];static [a1_0x10fad5(0xe1)]=[];static ['ressourcesUsageStats']={};static [a1_0x10fad5(0xff)]=Math[a1_0x10fad5(0xf0)](Date['now']()/0x3e8/0x3c);static [a1_0x10fad5(0x123)]=0x0;static async[a1_0x10fad5(0xe3)](){const _0x42b588=a1_0x10fad5;console['log'](_0x42b588(0x106));try{const _0x6c3273=await fs[_0x42b588(0xf8)](RequestMonitor['rpsStoragePath'],_0x42b588(0xe8));RequestMonitor['rpsData']=JSON['parse'](_0x6c3273);}catch(_0x17f196){RequestMonitor[_0x42b588(0xf2)]=[];}try{const _0x12b1fb=await fs[_0x42b588(0xf8)](RequestMonitor['httpCodesStoragePath'],_0x42b588(0xe8));RequestMonitor[_0x42b588(0xe1)]=JSON[_0x42b588(0x100)](_0x12b1fb);}catch(_0x5af65f){RequestMonitor[_0x42b588(0xe1)]=[];}try{const _0xd2c191=await fs[_0x42b588(0xf8)](RequestMonitor[_0x42b588(0x120)],_0x42b588(0xe8));RequestMonitor[_0x42b588(0xea)]=JSON['parse'](_0xd2c191),!RequestMonitor['ressourcesUsageStats'][_0x42b588(0xee)]&&(RequestMonitor['ressourcesUsageStats'][_0x42b588(0xee)]=[]),!RequestMonitor[_0x42b588(0xea)][_0x42b588(0x11a)]&&(RequestMonitor[_0x42b588(0xea)]['memory']=[]),!RequestMonitor[_0x42b588(0xea)]['network']&&(RequestMonitor[_0x42b588(0xea)][_0x42b588(0xfc)]=[]);}catch(_0x2815c2){RequestMonitor['ressourcesUsageStats']={'cpu':[],'memory':[],'network':[]};}console['log'](_0x42b588(0xfe));}static[a1_0x10fad5(0x10e)](_0x4ad15e,_0x2fdf42,_0x4c884c){const _0x3e0f38=a1_0x10fad5;if(_0x4ad15e['path'][_0x3e0f38(0x112)](_0x3e0f38(0x121)))return _0x4c884c();console[_0x3e0f38(0xe2)](_0x3e0f38(0x118));let _0x302b09=Date[_0x3e0f38(0xed)](),_0x478fbb=Math[_0x3e0f38(0xf0)](_0x302b09/0x3e8/0x3c);console[_0x3e0f38(0xe2)](_0x3e0f38(0x101));const _0x18c80d=_0x2fdf42[_0x3e0f38(0x10f)];_0x2fdf42[_0x3e0f38(0x10f)]=(..._0x317de6)=>{const _0x4dadcb=_0x3e0f38;console[_0x4dadcb(0xe2)](_0x478fbb,{'currentMinute':_0x478fbb});_0x478fbb>RequestMonitor[_0x4dadcb(0xff)]&&(RequestMonitor['rpsData'][_0x4dadcb(0x10c)]({'timestamp':RequestMonitor[_0x4dadcb(0xff)]*0x3e8*0x3c,'requests':RequestMonitor[_0x4dadcb(0x123)]}),RequestMonitor['currentRequests']=0x0,RequestMonitor[_0x4dadcb(0xff)]=_0x478fbb);RequestMonitor[_0x4dadcb(0x123)]++,RequestMonitor[_0x4dadcb(0xe1)][_0x4dadcb(0x10c)]({'timestamp':Date['now'](),'statusCode':_0x2fdf42[_0x4dadcb(0xfd)],'path':_0x4ad15e[_0x4dadcb(0x115)],'method':_0x4ad15e[_0x4dadcb(0x11d)]});const _0x1f7c64=Date[_0x4dadcb(0xed)]()-0x18*0x3c*0x3c*0x3e8;return RequestMonitor['httpCodesData']=RequestMonitor[_0x4dadcb(0xe1)][_0x4dadcb(0x11c)](_0x74a3da=>_0x74a3da['timestamp']>_0x1f7c64),_0x18c80d['apply'](_0x2fdf42,_0x317de6);},_0x4c884c();}static async[a1_0x10fad5(0xe4)](){const _0x21b70c=a1_0x10fad5;try{RequestMonitor['lastMinute']!==Math['floor'](Date[_0x21b70c(0xed)]()/0x3e8/0x3c)&&(RequestMonitor['rpsData'][_0x21b70c(0x10c)]({'timestamp':RequestMonitor[_0x21b70c(0xff)]*0x3e8*0x3c,'requests':RequestMonitor[_0x21b70c(0x123)]}),RequestMonitor[_0x21b70c(0x123)]=0x0,RequestMonitor[_0x21b70c(0xff)]=Math['floor'](Date[_0x21b70c(0xed)]()/0x3e8/0x3c)),await fs[_0x21b70c(0xde)](RequestMonitor['rpsStoragePath'],JSON[_0x21b70c(0xe0)](RequestMonitor[_0x21b70c(0xf2)],null,0x2)),await fs[_0x21b70c(0xde)](RequestMonitor[_0x21b70c(0xf6)],JSON[_0x21b70c(0xe0)](RequestMonitor[_0x21b70c(0xe1)],null,0x2));}catch(_0x42425d){console[_0x21b70c(0x105)](_0x21b70c(0x103),_0x42425d);}}static async[a1_0x10fad5(0xfa)](){const _0xab6c8a=a1_0x10fad5;setInterval(()=>RequestMonitor[_0xab6c8a(0xe4)](),0x3c*0x3e8),setInterval(()=>{const _0x4774ac=_0xab6c8a;RequestMonitor[_0x4774ac(0xe9)]()['then'](()=>{});},0x3c*0x3e8),RequestMonitor[_0xab6c8a(0xe9)]()[_0xab6c8a(0x113)](()=>{});}static async[a1_0x10fad5(0xe9)](){const _0x3568f0=a1_0x10fad5,_0x237b08=osu[_0x3568f0(0xee)],_0x3449c6=osu[_0x3568f0(0xf7)],_0x172986=osu[_0x3568f0(0xdf)],_0x29a1d3={'total':{'inputMb':0x0,'outputMb':0x0}};try{const _0x938781=await _0x172986[_0x3568f0(0x125)]();_0x29a1d3['total'][_0x3568f0(0x10a)]=_0x938781[_0x3568f0(0xef)][_0x3568f0(0x10a)],_0x29a1d3[_0x3568f0(0xef)][_0x3568f0(0xe6)]=_0x938781['total'][_0x3568f0(0xe6)];}catch(_0x3243bf){}let _0x2ede68=0x0;try{_0x2ede68=await _0x237b08['usage']();}catch(_0x44b065){console[_0x3568f0(0xe2)]('Error\x20getting\x20CPU\x20usage:',_0x44b065);}const _0x45abb3={'usedMemMb':0x0};try{const _0x1420aa=await _0x3449c6[_0x3568f0(0x11b)]();_0x45abb3[_0x3568f0(0x111)]=_0x1420aa[_0x3568f0(0x111)];}catch(_0x35f054){console['log']('Error\x20getting\x20memory\x20usage:',_0x35f054);}const _0x16bc05=new Date()[_0x3568f0(0x119)]()[_0x3568f0(0x116)]()['padStart'](0x2,'0')+':'+new Date()[_0x3568f0(0x107)]()[_0x3568f0(0x116)]()['padStart'](0x2,'0');RequestMonitor[_0x3568f0(0xea)][_0x3568f0(0xee)]=RequestMonitor[_0x3568f0(0xea)][_0x3568f0(0xee)][_0x3568f0(0x110)](-0x3c)[_0x3568f0(0x11c)](_0x17f19d=>_0x17f19d[_0x3568f0(0x117)]!==_0x16bc05),RequestMonitor[_0x3568f0(0xea)][_0x3568f0(0x11a)]=RequestMonitor['ressourcesUsageStats'][_0x3568f0(0x11a)][_0x3568f0(0x110)](-0x3c)['filter'](_0x16d2a6=>_0x16d2a6[_0x3568f0(0x117)]!==_0x16bc05),RequestMonitor[_0x3568f0(0xea)][_0x3568f0(0xfc)]=RequestMonitor[_0x3568f0(0xea)][_0x3568f0(0xfc)]['slice'](-0x3c)[_0x3568f0(0x11c)](_0x372990=>_0x372990[_0x3568f0(0x117)]!==_0x16bc05),RequestMonitor[_0x3568f0(0xea)]['cpu'][_0x3568f0(0x10c)]({'time':_0x16bc05,'usage':_0x2ede68}),RequestMonitor['ressourcesUsageStats'][_0x3568f0(0x11a)][_0x3568f0(0x10c)]({'time':_0x16bc05,'usage':(_0x45abb3[_0x3568f0(0x111)]/0x3e8)[_0x3568f0(0xf4)](0x2)}),RequestMonitor[_0x3568f0(0xea)][_0x3568f0(0xfc)]['push']({'time':_0x16bc05,'usage':{'in':_0x29a1d3[_0x3568f0(0xef)]?.['inputMb']??0x0,'out':_0x29a1d3[_0x3568f0(0xef)]?.['outputMb']??0x0}});try{await fs[_0x3568f0(0xde)](RequestMonitor[_0x3568f0(0x120)],JSON['stringify'](RequestMonitor[_0x3568f0(0xea)],null,0x2));}catch(_0x3ccf10){console['error'](_0x3568f0(0x103),_0x3ccf10);}}static[a1_0x10fad5(0x124)](){const _0x596e15=a1_0x10fad5,_0x4ef67b=Date['now'](),_0x3979a1=_0x4ef67b-0x3c*0x3c*0x3e8,_0x2bec7d=_0x4ef67b-0x18*0x3c*0x3c*0x3e8,_0x499636=RequestMonitor['rpsData']['filter'](_0x3f4b17=>_0x3f4b17[_0x596e15(0xfb)]>_0x3979a1),_0x3d27d7={'total':RequestMonitor[_0x596e15(0xe1)]['length'],'byCodes':{},'byPath':{}};return RequestMonitor[_0x596e15(0xe1)][_0x596e15(0xe7)](_0xb9a4e4=>{const _0x58a11a=_0x596e15;_0x3d27d7[_0x58a11a(0xf3)][_0xb9a4e4[_0x58a11a(0xfd)]]=(_0x3d27d7[_0x58a11a(0xf3)][_0xb9a4e4['statusCode']]||0x0)+0x1;const _0xae8a45=_0xb9a4e4[_0x58a11a(0x11d)]+'\x20'+_0xb9a4e4[_0x58a11a(0x115)];!_0x3d27d7[_0x58a11a(0x108)][_0xae8a45]&&(_0x3d27d7[_0x58a11a(0x108)][_0xae8a45]={'total':0x0,'codes':{}}),_0x3d27d7['byPath'][_0xae8a45][_0x58a11a(0xef)]++,_0x3d27d7[_0x58a11a(0x108)][_0xae8a45][_0x58a11a(0x109)][_0xb9a4e4[_0x58a11a(0xfd)]]=(_0x3d27d7[_0x58a11a(0x108)][_0xae8a45][_0x58a11a(0x109)][_0xb9a4e4['statusCode']]||0x0)+0x1;}),{'rps':_0x499636,'httpCodes':_0x3d27d7,'ressourcesUsageStats':RequestMonitor['ressourcesUsageStats']};}}function a1_0x19fa(_0x3bc060,_0xda89a9){const _0x3b7fa4=a1_0x3b7f();return a1_0x19fa=function(_0x19fa52,_0x240983){_0x19fa52=_0x19fa52-0xdd;let _0x26db35=_0x3b7fa4[_0x19fa52];return _0x26db35;},a1_0x19fa(_0x3bc060,_0xda89a9);}RequestMonitor[a1_0x10fad5(0xe3)]()[a1_0x10fad5(0x113)](()=>{}),RequestMonitor[a1_0x10fad5(0xfa)]();const counter=RequestMonitor;module[a1_0x10fad5(0x122)]=counter;
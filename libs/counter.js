function a1_0x2ad6(_0x3784c0,_0x2e1cba){const _0x59afe8=a1_0x59af();return a1_0x2ad6=function(_0x2ad670,_0x265042){_0x2ad670=_0x2ad670-0xde;let _0x6971bf=_0x59afe8[_0x2ad670];return _0x6971bf;},a1_0x2ad6(_0x3784c0,_0x2e1cba);}const a1_0x164a67=a1_0x2ad6;(function(_0x247708,_0x33bce4){const _0x37a78d=a1_0x2ad6,_0x1a82ad=_0x247708();while(!![]){try{const _0x4ea4d1=parseInt(_0x37a78d(0x108))/0x1*(parseInt(_0x37a78d(0xf9))/0x2)+parseInt(_0x37a78d(0x119))/0x3*(parseInt(_0x37a78d(0xee))/0x4)+parseInt(_0x37a78d(0x126))/0x5+-parseInt(_0x37a78d(0xfc))/0x6*(-parseInt(_0x37a78d(0xf8))/0x7)+parseInt(_0x37a78d(0xfa))/0x8*(parseInt(_0x37a78d(0x10b))/0x9)+parseInt(_0x37a78d(0x129))/0xa+parseInt(_0x37a78d(0x118))/0xb*(-parseInt(_0x37a78d(0x124))/0xc);if(_0x4ea4d1===_0x33bce4)break;else _0x1a82ad['push'](_0x1a82ad['shift']());}catch(_0x19690e){_0x1a82ad['push'](_0x1a82ad['shift']());}}}(a1_0x59af,0x97b60));const fs=require('fs')[a1_0x164a67(0x122)],osu=require(a1_0x164a67(0xde));class RequestMonitor{static ['rpsStoragePath']='cadviewer/settings/requests-per-minute.json';static [a1_0x164a67(0x11a)]='cadviewer/settings/http-codes-24h.json';static ['ressourcesUsageStatsPath']=a1_0x164a67(0x11f);static ['rpsData']=[];static [a1_0x164a67(0xea)]=[];static [a1_0x164a67(0xff)]={};static [a1_0x164a67(0x125)]=Math[a1_0x164a67(0x112)](Date[a1_0x164a67(0x120)]()/0x3e8/0x3c);static [a1_0x164a67(0x105)]=0x0;static async[a1_0x164a67(0xdf)](){const _0x2c7fb4=a1_0x164a67;console['log']('Initializing\x20request\x20monitor...');try{const _0x16b5bf=await fs[_0x2c7fb4(0x107)](RequestMonitor[_0x2c7fb4(0x11c)],_0x2c7fb4(0xf7));RequestMonitor[_0x2c7fb4(0xfe)]=JSON['parse'](_0x16b5bf);}catch(_0x3b5f8b){RequestMonitor[_0x2c7fb4(0xfe)]=[];}try{const _0x253805=await fs['readFile'](RequestMonitor[_0x2c7fb4(0x11a)],_0x2c7fb4(0xf7));RequestMonitor[_0x2c7fb4(0xea)]=JSON[_0x2c7fb4(0x101)](_0x253805);}catch(_0xfe92ec){RequestMonitor[_0x2c7fb4(0xea)]=[];}try{const _0x2195b4=await fs[_0x2c7fb4(0x107)](RequestMonitor[_0x2c7fb4(0xf0)],'utf8');RequestMonitor[_0x2c7fb4(0xff)]=JSON[_0x2c7fb4(0x101)](_0x2195b4),!RequestMonitor['ressourcesUsageStats'][_0x2c7fb4(0x121)]&&(RequestMonitor[_0x2c7fb4(0xff)]['cpu']=[]),!RequestMonitor[_0x2c7fb4(0xff)][_0x2c7fb4(0xfb)]&&(RequestMonitor['ressourcesUsageStats'][_0x2c7fb4(0xfb)]=[]),!RequestMonitor['ressourcesUsageStats'][_0x2c7fb4(0x115)]&&(RequestMonitor['ressourcesUsageStats']['network']=[]);}catch(_0x1ee96e){RequestMonitor['ressourcesUsageStats']={'cpu':[],'memory':[],'network':[]};}console[_0x2c7fb4(0x11e)](_0x2c7fb4(0x100));}static[a1_0x164a67(0xf1)](_0x22f766,_0x11da66,_0x56da51){const _0x7eb707=a1_0x164a67;if(_0x22f766[_0x7eb707(0x11d)]['includes'](_0x7eb707(0x10c)))return _0x56da51();console[_0x7eb707(0x11e)]('Request\x20monitor\x20middleware');let _0x1672f1=Date[_0x7eb707(0x120)](),_0x300b3f=Math['floor'](_0x1672f1/0x3e8/0x3c);console[_0x7eb707(0x11e)](_0x7eb707(0x10e));const _0x279f80=_0x11da66[_0x7eb707(0xf6)];_0x11da66[_0x7eb707(0xf6)]=(..._0x29dd68)=>{const _0x990082=_0x7eb707;console['log'](_0x300b3f,{'currentMinute':_0x300b3f});_0x300b3f>RequestMonitor[_0x990082(0x125)]&&(RequestMonitor[_0x990082(0xfe)][_0x990082(0x102)]({'timestamp':RequestMonitor[_0x990082(0x125)]*0x3e8*0x3c,'requests':RequestMonitor[_0x990082(0x105)]}),RequestMonitor[_0x990082(0x105)]=0x0,RequestMonitor[_0x990082(0x125)]=_0x300b3f);RequestMonitor[_0x990082(0x105)]++,RequestMonitor['httpCodesData'][_0x990082(0x102)]({'timestamp':Date[_0x990082(0x120)](),'statusCode':_0x11da66[_0x990082(0xf4)],'path':_0x22f766[_0x990082(0x11d)],'method':_0x22f766['method']});const _0x1e03a8=Date[_0x990082(0x120)]()-0x18*0x3c*0x3c*0x3e8;return RequestMonitor[_0x990082(0xea)]=RequestMonitor['httpCodesData'][_0x990082(0xe9)](_0x11e883=>_0x11e883['timestamp']>_0x1e03a8),_0x279f80['apply'](_0x11da66,_0x29dd68);},_0x56da51();}static async[a1_0x164a67(0xef)](){const _0x1372d5=a1_0x164a67;try{RequestMonitor[_0x1372d5(0x125)]!==Math[_0x1372d5(0x112)](Date['now']()/0x3e8/0x3c)&&(RequestMonitor[_0x1372d5(0xfe)][_0x1372d5(0x102)]({'timestamp':RequestMonitor[_0x1372d5(0x125)]*0x3e8*0x3c,'requests':RequestMonitor[_0x1372d5(0x105)]}),RequestMonitor[_0x1372d5(0x105)]=0x0,RequestMonitor[_0x1372d5(0x125)]=Math[_0x1372d5(0x112)](Date[_0x1372d5(0x120)]()/0x3e8/0x3c)),await fs[_0x1372d5(0xf5)](RequestMonitor['rpsStoragePath'],JSON[_0x1372d5(0x117)](RequestMonitor[_0x1372d5(0xfe)],null,0x2)),await fs[_0x1372d5(0xf5)](RequestMonitor[_0x1372d5(0x11a)],JSON[_0x1372d5(0x117)](RequestMonitor['httpCodesData'],null,0x2));}catch(_0x84e368){console[_0x1372d5(0xe3)](_0x1372d5(0x116),_0x84e368);}}static async[a1_0x164a67(0xed)](){const _0x1385a5=a1_0x164a67;setInterval(()=>RequestMonitor[_0x1385a5(0xef)](),0x3c*0x3e8),setInterval(()=>{const _0x52b754=_0x1385a5;RequestMonitor[_0x52b754(0x114)]()[_0x52b754(0xe5)](()=>{});},0x3c*0x3e8),RequestMonitor['getUsageRessourcesStatsAndSave']()['then'](()=>{});}static async[a1_0x164a67(0x114)](){const _0x1ce8cc=a1_0x164a67,_0x174673=osu[_0x1ce8cc(0x121)],_0x5624a5=osu[_0x1ce8cc(0x103)],_0xcdbea2=osu[_0x1ce8cc(0x128)],_0x29fecf={'total':{'inputMb':0x0,'outputMb':0x0}};try{const _0x52165b=await _0xcdbea2[_0x1ce8cc(0x113)]();_0x29fecf[_0x1ce8cc(0xf2)][_0x1ce8cc(0xe6)]=_0x52165b['total'][_0x1ce8cc(0xe6)],_0x29fecf[_0x1ce8cc(0xf2)][_0x1ce8cc(0x110)]=_0x52165b[_0x1ce8cc(0xf2)][_0x1ce8cc(0x110)];}catch(_0x7ac755){}let _0xedea57=0x0;try{_0xedea57=await _0x174673[_0x1ce8cc(0xe1)]();}catch(_0x376f20){console['log'](_0x1ce8cc(0xe0),_0x376f20);}const _0x32ff65={'usedMemMb':0x0};try{const _0x7622f3=await _0x5624a5[_0x1ce8cc(0x10d)]();_0x32ff65[_0x1ce8cc(0xec)]=_0x7622f3[_0x1ce8cc(0xec)];}catch(_0x4d5ad3){console[_0x1ce8cc(0x11e)](_0x1ce8cc(0x10a),_0x4d5ad3);}const _0x3d5f65=new Date()[_0x1ce8cc(0xe7)]()['toString']()[_0x1ce8cc(0xeb)](0x2,'0')+':'+new Date()[_0x1ce8cc(0x104)]()[_0x1ce8cc(0x10f)]()[_0x1ce8cc(0xeb)](0x2,'0');RequestMonitor['ressourcesUsageStats']['cpu']=RequestMonitor[_0x1ce8cc(0xff)][_0x1ce8cc(0x121)][_0x1ce8cc(0xe4)](-0x3c)[_0x1ce8cc(0xe9)](_0x41d369=>_0x41d369[_0x1ce8cc(0x127)]!==_0x3d5f65),RequestMonitor['ressourcesUsageStats'][_0x1ce8cc(0xfb)]=RequestMonitor['ressourcesUsageStats'][_0x1ce8cc(0xfb)][_0x1ce8cc(0xe4)](-0x3c)['filter'](_0x13691d=>_0x13691d[_0x1ce8cc(0x127)]!==_0x3d5f65),RequestMonitor[_0x1ce8cc(0xff)][_0x1ce8cc(0x115)]=RequestMonitor[_0x1ce8cc(0xff)][_0x1ce8cc(0x115)][_0x1ce8cc(0xe4)](-0x3c)[_0x1ce8cc(0xe9)](_0x41e0d3=>_0x41e0d3[_0x1ce8cc(0x127)]!==_0x3d5f65),RequestMonitor[_0x1ce8cc(0xff)]['cpu']['push']({'time':_0x3d5f65,'usage':_0xedea57}),RequestMonitor[_0x1ce8cc(0xff)][_0x1ce8cc(0xfb)]['push']({'time':_0x3d5f65,'usage':(_0x32ff65[_0x1ce8cc(0xec)]/0x3e8)['toFixed'](0x2)}),RequestMonitor[_0x1ce8cc(0xff)]['network'][_0x1ce8cc(0x102)]({'time':_0x3d5f65,'usage':{'in':_0x29fecf[_0x1ce8cc(0xf2)]?.[_0x1ce8cc(0xe6)]??0x0,'out':_0x29fecf[_0x1ce8cc(0xf2)]?.['outputMb']??0x0}});try{await fs[_0x1ce8cc(0xf5)](RequestMonitor[_0x1ce8cc(0xf0)],JSON[_0x1ce8cc(0x117)](RequestMonitor[_0x1ce8cc(0xff)],null,0x2));}catch(_0x3c6de5){console[_0x1ce8cc(0xe3)](_0x1ce8cc(0x116),_0x3c6de5);}}static[a1_0x164a67(0xe2)](){const _0x2b9076=a1_0x164a67,_0x48bb31=Date[_0x2b9076(0x120)](),_0x111176=_0x48bb31-0x3c*0x3c*0x3e8,_0x3f67f7=_0x48bb31-0x18*0x3c*0x3c*0x3e8,_0x379660=RequestMonitor[_0x2b9076(0xfe)][_0x2b9076(0xe9)](_0x5274ac=>_0x5274ac[_0x2b9076(0x123)]>_0x111176),_0x245c95={'total':RequestMonitor[_0x2b9076(0xea)][_0x2b9076(0xf3)],'byCodes':{},'byPath':{}};return RequestMonitor[_0x2b9076(0xea)][_0x2b9076(0x11b)](_0x2d6014=>{const _0x38c1a0=_0x2b9076;_0x245c95[_0x38c1a0(0x111)][_0x2d6014[_0x38c1a0(0xf4)]]=(_0x245c95[_0x38c1a0(0x111)][_0x2d6014['statusCode']]||0x0)+0x1;const _0x44076e=_0x2d6014[_0x38c1a0(0x106)]+'\x20'+_0x2d6014['path'];!_0x245c95[_0x38c1a0(0xe8)][_0x44076e]&&(_0x245c95[_0x38c1a0(0xe8)][_0x44076e]={'total':0x0,'codes':{}}),_0x245c95[_0x38c1a0(0xe8)][_0x44076e][_0x38c1a0(0xf2)]++,_0x245c95[_0x38c1a0(0xe8)][_0x44076e][_0x38c1a0(0x109)][_0x2d6014[_0x38c1a0(0xf4)]]=(_0x245c95[_0x38c1a0(0xe8)][_0x44076e][_0x38c1a0(0x109)][_0x2d6014[_0x38c1a0(0xf4)]]||0x0)+0x1;}),{'rps':_0x379660,'httpCodes':_0x245c95,'ressourcesUsageStats':RequestMonitor['ressourcesUsageStats']};}}function a1_0x59af(){const _0x16a7dc=['12naggXu','lastMinute','99335ZrUteB','time','netstat','6339680IjWYzY','node-os-utils','init','Error\x20getting\x20CPU\x20usage:','usage','getStats','error','slice','then','inputMb','getHours','byPath','filter','httpCodesData','padStart','usedMemMb','startPeriodicSave','58448ihIuUs','save','ressourcesUsageStatsPath','middleware','total','length','statusCode','writeFile','end','utf8','2093ehVcmc','394ZONGJp','561144quaDXR','memory','7386ieIpND','exports','rpsData','ressourcesUsageStats','Request\x20monitor\x20initialized.','parse','push','mem','getMinutes','currentRequests','method','readFile','2852tPtRaZ','codes','Error\x20getting\x20memory\x20usage:','63WgBzVz','/metrics','info','=======>','toString','outputMb','byCodes','floor','inOut','getUsageRessourcesStatsAndSave','network','Error\x20saving\x20monitoring\x20data:','stringify','24344815JhWxQz','156VrEQGG','httpCodesStoragePath','forEach','rpsStoragePath','path','log','cadviewer/settings/ressources-usage-stats.json','now','cpu','promises','timestamp'];a1_0x59af=function(){return _0x16a7dc;};return a1_0x59af();}RequestMonitor['init']()[a1_0x164a67(0xe5)](()=>{}),RequestMonitor['startPeriodicSave']();const counter=RequestMonitor;module[a1_0x164a67(0xfd)]=counter;
function a1_0x6772(_0x3e1f17,_0x189084){const _0x1be3af=a1_0x1be3();return a1_0x6772=function(_0x67723,_0x4844a6){_0x67723=_0x67723-0x1f2;let _0x42b723=_0x1be3af[_0x67723];return _0x42b723;},a1_0x6772(_0x3e1f17,_0x189084);}const a1_0x541818=a1_0x6772;(function(_0x1abd88,_0x724490){const _0x4cb026=a1_0x6772,_0x646827=_0x1abd88();while(!![]){try{const _0x5600f9=-parseInt(_0x4cb026(0x20c))/0x1*(-parseInt(_0x4cb026(0x218))/0x2)+parseInt(_0x4cb026(0x23c))/0x3*(-parseInt(_0x4cb026(0x212))/0x4)+parseInt(_0x4cb026(0x236))/0x5+-parseInt(_0x4cb026(0x1fc))/0x6*(parseInt(_0x4cb026(0x226))/0x7)+parseInt(_0x4cb026(0x22a))/0x8+-parseInt(_0x4cb026(0x205))/0x9*(parseInt(_0x4cb026(0x1fe))/0xa)+parseInt(_0x4cb026(0x201))/0xb;if(_0x5600f9===_0x724490)break;else _0x646827['push'](_0x646827['shift']());}catch(_0x2670ca){_0x646827['push'](_0x646827['shift']());}}}(a1_0x1be3,0x8d5d8));const fs=require('fs')['promises'],osu=require(a1_0x541818(0x23a));class RequestMonitor{static [a1_0x541818(0x1f2)]=a1_0x541818(0x1f8);static [a1_0x541818(0x210)]=a1_0x541818(0x208);static [a1_0x541818(0x21f)]=a1_0x541818(0x22c);static ['rpsData']=[];static [a1_0x541818(0x20a)]=[];static ['ressourcesUsageStats']={};static [a1_0x541818(0x1f7)]=Math[a1_0x541818(0x21b)](Date[a1_0x541818(0x1fb)]()/0x3e8/0x3c);static [a1_0x541818(0x1f9)]=0x0;static async['init'](){const _0x372b3a=a1_0x541818;console[_0x372b3a(0x1f6)](_0x372b3a(0x225));try{const _0x350baf=await fs[_0x372b3a(0x23d)](RequestMonitor[_0x372b3a(0x1f2)],_0x372b3a(0x1fa));RequestMonitor['rpsData']=JSON[_0x372b3a(0x223)](_0x350baf);}catch(_0x122bd9){RequestMonitor[_0x372b3a(0x1fd)]=[];}try{const _0x4d9564=await fs['readFile'](RequestMonitor[_0x372b3a(0x210)],_0x372b3a(0x1fa));RequestMonitor[_0x372b3a(0x20a)]=JSON[_0x372b3a(0x223)](_0x4d9564);}catch(_0x573042){RequestMonitor['httpCodesData']=[];}try{const _0xc7db61=await fs[_0x372b3a(0x23d)](RequestMonitor[_0x372b3a(0x21f)],_0x372b3a(0x1fa));RequestMonitor[_0x372b3a(0x220)]=JSON[_0x372b3a(0x223)](_0xc7db61),!RequestMonitor[_0x372b3a(0x220)][_0x372b3a(0x224)]&&(RequestMonitor['ressourcesUsageStats']['cpu']=[]),!RequestMonitor[_0x372b3a(0x220)]['memory']&&(RequestMonitor[_0x372b3a(0x220)][_0x372b3a(0x231)]=[]),!RequestMonitor[_0x372b3a(0x220)]['network']&&(RequestMonitor[_0x372b3a(0x220)][_0x372b3a(0x203)]=[]);}catch(_0x191809){RequestMonitor[_0x372b3a(0x220)]={'cpu':[],'memory':[],'network':[]};}console[_0x372b3a(0x1f6)](_0x372b3a(0x1f5));}static['middleware'](_0x460c52,_0x5c46b2,_0x10d6b0){const _0xd712e3=a1_0x541818;if(_0x460c52[_0xd712e3(0x211)][_0xd712e3(0x217)](_0xd712e3(0x206)))return _0x10d6b0();console[_0xd712e3(0x1f6)](_0xd712e3(0x234));let _0x50898e=Date[_0xd712e3(0x1fb)](),_0xbfadd8=Math['floor'](_0x50898e/0x3e8/0x3c);console['log']('=======>');const _0xf56ef0=_0x5c46b2[_0xd712e3(0x213)];_0x5c46b2[_0xd712e3(0x213)]=(..._0x12b142)=>{const _0x230aeb=_0xd712e3;console[_0x230aeb(0x1f6)](_0xbfadd8,{'currentMinute':_0xbfadd8});_0xbfadd8>RequestMonitor[_0x230aeb(0x1f7)]&&(RequestMonitor[_0x230aeb(0x1fd)][_0x230aeb(0x202)]({'timestamp':RequestMonitor[_0x230aeb(0x1f7)]*0x3e8*0x3c,'requests':RequestMonitor[_0x230aeb(0x1f9)]}),RequestMonitor['currentRequests']=0x0,RequestMonitor[_0x230aeb(0x1f7)]=_0xbfadd8);RequestMonitor['currentRequests']++,RequestMonitor['httpCodesData'][_0x230aeb(0x202)]({'timestamp':Date[_0x230aeb(0x1fb)](),'statusCode':_0x5c46b2[_0x230aeb(0x204)],'path':_0x460c52[_0x230aeb(0x211)],'method':_0x460c52[_0x230aeb(0x20b)]});const _0x5d3a9c=Date[_0x230aeb(0x1fb)]()-0x18*0x3c*0x3c*0x3e8;return RequestMonitor[_0x230aeb(0x20a)]=RequestMonitor[_0x230aeb(0x20a)]['filter'](_0x8ecec8=>_0x8ecec8['timestamp']>_0x5d3a9c),_0xf56ef0[_0x230aeb(0x238)](_0x5c46b2,_0x12b142);},_0x10d6b0();}static async[a1_0x541818(0x230)](){const _0x4ec863=a1_0x541818;try{RequestMonitor[_0x4ec863(0x1f7)]!==Math['floor'](Date[_0x4ec863(0x1fb)]()/0x3e8/0x3c)&&(RequestMonitor['rpsData']['push']({'timestamp':RequestMonitor[_0x4ec863(0x1f7)]*0x3e8*0x3c,'requests':RequestMonitor[_0x4ec863(0x1f9)]}),RequestMonitor[_0x4ec863(0x1f9)]=0x0,RequestMonitor[_0x4ec863(0x1f7)]=Math[_0x4ec863(0x21b)](Date[_0x4ec863(0x1fb)]()/0x3e8/0x3c)),await fs[_0x4ec863(0x229)](RequestMonitor[_0x4ec863(0x1f2)],JSON[_0x4ec863(0x21d)](RequestMonitor['rpsData'],null,0x2)),await fs['writeFile'](RequestMonitor['httpCodesStoragePath'],JSON['stringify'](RequestMonitor[_0x4ec863(0x20a)],null,0x2));}catch(_0xb94157){console[_0x4ec863(0x222)](_0x4ec863(0x221),_0xb94157);}}static async['startPeriodicSave'](){const _0x805f02=a1_0x541818;setInterval(()=>RequestMonitor[_0x805f02(0x230)](),0x3c*0x3e8),setInterval(()=>{const _0xb85abb=_0x805f02;RequestMonitor[_0xb85abb(0x233)]()['then'](()=>{});},0x3c*0x3e8),RequestMonitor[_0x805f02(0x233)]()[_0x805f02(0x23b)](()=>{});}static async[a1_0x541818(0x233)](){const _0x359fa7=a1_0x541818,_0x129fa6=osu['cpu'],_0x6192ad=osu[_0x359fa7(0x200)],_0x42fd02=osu[_0x359fa7(0x21a)],_0x191581={'total':{'inputMb':0x0,'outputMb':0x0}};try{const _0x4f7ccd=await _0x42fd02[_0x359fa7(0x235)]();_0x191581[_0x359fa7(0x227)][_0x359fa7(0x20d)]=_0x4f7ccd[_0x359fa7(0x227)][_0x359fa7(0x20d)],_0x191581['total']['outputMb']=_0x4f7ccd[_0x359fa7(0x227)][_0x359fa7(0x239)];}catch(_0x1a859b){}let _0x4bd7e0=0x0;try{_0x4bd7e0=await _0x129fa6[_0x359fa7(0x22e)]();}catch(_0x4feac4){console['log'](_0x359fa7(0x207),_0x4feac4);}const _0x239260={'usedMemMb':0x0};try{const _0x912535=await _0x6192ad[_0x359fa7(0x215)]();_0x239260[_0x359fa7(0x1ff)]=_0x912535['usedMemMb'];}catch(_0x34ec84){console[_0x359fa7(0x1f6)]('Error\x20getting\x20memory\x20usage:',_0x34ec84);}const _0x2fa4d1=new Date()[_0x359fa7(0x1f3)]()[_0x359fa7(0x232)]()[_0x359fa7(0x21e)](0x2,'0')+':'+new Date()[_0x359fa7(0x228)]()['toString']()[_0x359fa7(0x21e)](0x2,'0');RequestMonitor[_0x359fa7(0x220)][_0x359fa7(0x224)]=RequestMonitor[_0x359fa7(0x220)][_0x359fa7(0x224)][_0x359fa7(0x216)](-0x3c)[_0x359fa7(0x22b)](_0x176bdd=>_0x176bdd['time']!==_0x2fa4d1),RequestMonitor[_0x359fa7(0x220)][_0x359fa7(0x231)]=RequestMonitor[_0x359fa7(0x220)][_0x359fa7(0x231)]['slice'](-0x3c)[_0x359fa7(0x22b)](_0x3c7ad9=>_0x3c7ad9['time']!==_0x2fa4d1),RequestMonitor['ressourcesUsageStats'][_0x359fa7(0x203)]=RequestMonitor[_0x359fa7(0x220)][_0x359fa7(0x203)][_0x359fa7(0x216)](-0x3c)['filter'](_0x203270=>_0x203270['time']!==_0x2fa4d1),RequestMonitor['ressourcesUsageStats'][_0x359fa7(0x224)][_0x359fa7(0x202)]({'time':_0x2fa4d1,'usage':_0x4bd7e0}),RequestMonitor[_0x359fa7(0x220)][_0x359fa7(0x231)][_0x359fa7(0x202)]({'time':_0x2fa4d1,'usage':(_0x239260[_0x359fa7(0x1ff)]/0x3e8)['toFixed'](0x2)}),RequestMonitor['ressourcesUsageStats']['network']['push']({'time':_0x2fa4d1,'usage':{'in':_0x191581[_0x359fa7(0x227)]?.[_0x359fa7(0x20d)]??0x0,'out':_0x191581[_0x359fa7(0x227)]?.[_0x359fa7(0x239)]??0x0}});try{await fs[_0x359fa7(0x229)](RequestMonitor['ressourcesUsageStatsPath'],JSON[_0x359fa7(0x21d)](RequestMonitor['ressourcesUsageStats'],null,0x2));}catch(_0x335f09){console[_0x359fa7(0x222)]('Error\x20saving\x20monitoring\x20data:',_0x335f09);}}static[a1_0x541818(0x219)](){const _0x49b930=a1_0x541818,_0x8ae345=Date['now'](),_0x271bf5=_0x8ae345-0x3c*0x3c*0x3e8,_0x1657e6=_0x8ae345-0x18*0x3c*0x3c*0x3e8,_0x483c38=RequestMonitor[_0x49b930(0x1fd)][_0x49b930(0x22b)](_0x38bd16=>_0x38bd16[_0x49b930(0x22f)]>_0x271bf5),_0x49e44b={'total':RequestMonitor[_0x49b930(0x20a)][_0x49b930(0x20f)],'byCodes':{},'byPath':{}};return RequestMonitor['httpCodesData'][_0x49b930(0x1f4)](_0x2904b0=>{const _0x3cc518=_0x49b930;_0x49e44b['byCodes'][_0x2904b0[_0x3cc518(0x204)]]=(_0x49e44b[_0x3cc518(0x20e)][_0x2904b0[_0x3cc518(0x204)]]||0x0)+0x1;const _0xf58416=_0x2904b0[_0x3cc518(0x20b)]+'\x20'+_0x2904b0[_0x3cc518(0x211)];!_0x49e44b['byPath'][_0xf58416]&&(_0x49e44b[_0x3cc518(0x214)][_0xf58416]={'total':0x0,'codes':{}}),_0x49e44b[_0x3cc518(0x214)][_0xf58416][_0x3cc518(0x227)]++,_0x49e44b[_0x3cc518(0x214)][_0xf58416][_0x3cc518(0x22d)][_0x2904b0[_0x3cc518(0x204)]]=(_0x49e44b[_0x3cc518(0x214)][_0xf58416][_0x3cc518(0x22d)][_0x2904b0[_0x3cc518(0x204)]]||0x0)+0x1;}),{'rps':_0x483c38,'httpCodes':_0x49e44b,'ressourcesUsageStats':RequestMonitor[_0x49b930(0x220)]};}}RequestMonitor[a1_0x541818(0x209)]()[a1_0x541818(0x23b)](()=>{}),RequestMonitor[a1_0x541818(0x237)]();function a1_0x1be3(){const _0x35144b=['getUsageRessourcesStatsAndSave','Request\x20monitor\x20middleware','inOut','2030755NVRdFI','startPeriodicSave','apply','outputMb','node-os-utils','then','6Begnux','readFile','rpsStoragePath','getHours','forEach','Request\x20monitor\x20initialized.','log','lastMinute','cadviewer/settings/requests-per-minute.json','currentRequests','utf8','now','10728oAnBXf','rpsData','469380ryhJIT','usedMemMb','mem','5509977ycjDzt','push','network','statusCode','63pTBzLf','/metrics','Error\x20getting\x20CPU\x20usage:','cadviewer/settings/http-codes-24h.json','init','httpCodesData','method','2vKcaET','inputMb','byCodes','length','httpCodesStoragePath','path','1874764RJVGos','end','byPath','info','slice','includes','477988KxOkCq','getStats','netstat','floor','exports','stringify','padStart','ressourcesUsageStatsPath','ressourcesUsageStats','Error\x20saving\x20monitoring\x20data:','error','parse','cpu','Initializing\x20request\x20monitor...','2590WnPBRc','total','getMinutes','writeFile','8971952gUcned','filter','cadviewer/settings/ressources-usage-stats.json','codes','usage','timestamp','save','memory','toString'];a1_0x1be3=function(){return _0x35144b;};return a1_0x1be3();}const counter=RequestMonitor;module[a1_0x541818(0x21c)]=counter;
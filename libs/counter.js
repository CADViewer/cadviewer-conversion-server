const a1_0x3e25cb=a1_0x2263;(function(_0x29ba6d,_0x3335ad){const _0xac8af8=a1_0x2263,_0x394d3d=_0x29ba6d();while(!![]){try{const _0x1a220c=-parseInt(_0xac8af8(0x166))/0x1*(-parseInt(_0xac8af8(0x181))/0x2)+-parseInt(_0xac8af8(0x16c))/0x3*(-parseInt(_0xac8af8(0x18b))/0x4)+parseInt(_0xac8af8(0x16b))/0x5*(parseInt(_0xac8af8(0x15b))/0x6)+parseInt(_0xac8af8(0x19b))/0x7+parseInt(_0xac8af8(0x168))/0x8+-parseInt(_0xac8af8(0x170))/0x9*(-parseInt(_0xac8af8(0x1a0))/0xa)+-parseInt(_0xac8af8(0x17e))/0xb;if(_0x1a220c===_0x3335ad)break;else _0x394d3d['push'](_0x394d3d['shift']());}catch(_0x1c3320){_0x394d3d['push'](_0x394d3d['shift']());}}}(a1_0x1314,0x191bf));function a1_0x1314(){const _0x2f128a=['timestamp','error','25018kAjnsg','statusCode','ressourcesUsageStats','stringify','includes','path','utf8','apply','lastMinute','then','16tXbkkj','readFile','rpsStoragePath','push','byCodes','Request\x20monitor\x20middleware','mem','promises','Request\x20monitor\x20initialized.','getStats','forEach','Error\x20getting\x20memory\x20usage:','parse','end','cadviewer/settings/ressources-usage-stats.json','startPeriodicSave','30744QyVarz','toString','ressourcesUsageStatsPath','usage','memory','110AaXQGd','inputMb','=======>','cadviewer/settings/http-codes-24h.json','exports','getUsageRessourcesStatsAndSave','node-os-utils','toFixed','middleware','httpCodesData','/metrics','42EaCRwS','total','cpu','Error\x20saving\x20monitoring\x20data:','time','byPath','cadviewer/settings/requests-per-minute.json','rpsData','Initializing\x20request\x20monitor...','writeFile','save','2nvvtmO','inOut','663696sFlakx','network','slice','77255YkGzsH','37308NFendr','usedMemMb','length','httpCodesStoragePath','14832EePBna','floor','currentRequests','init','filter','getMinutes','codes','outputMb','netstat','log','method','info','padStart','now','2041094DcGjDQ'];a1_0x1314=function(){return _0x2f128a;};return a1_0x1314();}const fs=require('fs')[a1_0x3e25cb(0x192)],osu=require(a1_0x3e25cb(0x156));class RequestMonitor{static [a1_0x3e25cb(0x18d)]=a1_0x3e25cb(0x161);static [a1_0x3e25cb(0x16f)]=a1_0x3e25cb(0x1a3);static [a1_0x3e25cb(0x19d)]=a1_0x3e25cb(0x199);static ['rpsData']=[];static [a1_0x3e25cb(0x159)]=[];static [a1_0x3e25cb(0x183)]={};static [a1_0x3e25cb(0x189)]=Math[a1_0x3e25cb(0x171)](Date[a1_0x3e25cb(0x17d)]()/0x3e8/0x3c);static [a1_0x3e25cb(0x172)]=0x0;static async['init'](){const _0x53b462=a1_0x3e25cb;console[_0x53b462(0x179)](_0x53b462(0x163));try{const _0x2941e6=await fs['readFile'](RequestMonitor[_0x53b462(0x18d)],_0x53b462(0x187));RequestMonitor[_0x53b462(0x162)]=JSON['parse'](_0x2941e6);}catch(_0x2471ae){RequestMonitor[_0x53b462(0x162)]=[];}try{const _0x2158d5=await fs[_0x53b462(0x18c)](RequestMonitor[_0x53b462(0x16f)],_0x53b462(0x187));RequestMonitor[_0x53b462(0x159)]=JSON[_0x53b462(0x197)](_0x2158d5);}catch(_0x5b5fc9){RequestMonitor['httpCodesData']=[];}try{const _0x52b0a2=await fs[_0x53b462(0x18c)](RequestMonitor[_0x53b462(0x19d)],'utf8');RequestMonitor['ressourcesUsageStats']=JSON['parse'](_0x52b0a2),!RequestMonitor[_0x53b462(0x183)]['cpu']&&(RequestMonitor['ressourcesUsageStats'][_0x53b462(0x15d)]=[]),!RequestMonitor[_0x53b462(0x183)][_0x53b462(0x19f)]&&(RequestMonitor['ressourcesUsageStats'][_0x53b462(0x19f)]=[]),!RequestMonitor[_0x53b462(0x183)][_0x53b462(0x169)]&&(RequestMonitor['ressourcesUsageStats'][_0x53b462(0x169)]=[]);}catch(_0x20471d){RequestMonitor[_0x53b462(0x183)]={'cpu':[],'memory':[],'network':[]};}console[_0x53b462(0x179)](_0x53b462(0x193));}static[a1_0x3e25cb(0x158)](_0x445d2a,_0x106a14,_0x5c5e07){const _0x12da57=a1_0x3e25cb;if(_0x445d2a[_0x12da57(0x186)][_0x12da57(0x185)](_0x12da57(0x15a)))return _0x5c5e07();console[_0x12da57(0x179)](_0x12da57(0x190));let _0x5f7d7b=Date['now'](),_0xc95fa1=Math[_0x12da57(0x171)](_0x5f7d7b/0x3e8/0x3c);console[_0x12da57(0x179)](_0x12da57(0x1a2));const _0x34f109=_0x106a14[_0x12da57(0x198)];_0x106a14[_0x12da57(0x198)]=(..._0xb0e78b)=>{const _0x332036=_0x12da57;console[_0x332036(0x179)](_0xc95fa1,{'currentMinute':_0xc95fa1});_0xc95fa1>RequestMonitor[_0x332036(0x189)]&&(RequestMonitor[_0x332036(0x162)][_0x332036(0x18e)]({'timestamp':RequestMonitor[_0x332036(0x189)]*0x3e8*0x3c,'requests':RequestMonitor[_0x332036(0x172)]}),RequestMonitor[_0x332036(0x172)]=0x0,RequestMonitor[_0x332036(0x189)]=_0xc95fa1);RequestMonitor[_0x332036(0x172)]++,RequestMonitor[_0x332036(0x159)]['push']({'timestamp':Date[_0x332036(0x17d)](),'statusCode':_0x106a14[_0x332036(0x182)],'path':_0x445d2a[_0x332036(0x186)],'method':_0x445d2a['method']});const _0x2c5d8a=Date[_0x332036(0x17d)]()-0x18*0x3c*0x3c*0x3e8;return RequestMonitor[_0x332036(0x159)]=RequestMonitor[_0x332036(0x159)][_0x332036(0x174)](_0x294e48=>_0x294e48[_0x332036(0x17f)]>_0x2c5d8a),_0x34f109[_0x332036(0x188)](_0x106a14,_0xb0e78b);},_0x5c5e07();}static async[a1_0x3e25cb(0x165)](){const _0x5029d3=a1_0x3e25cb;try{RequestMonitor[_0x5029d3(0x189)]!==Math[_0x5029d3(0x171)](Date[_0x5029d3(0x17d)]()/0x3e8/0x3c)&&(RequestMonitor[_0x5029d3(0x162)]['push']({'timestamp':RequestMonitor[_0x5029d3(0x189)]*0x3e8*0x3c,'requests':RequestMonitor[_0x5029d3(0x172)]}),RequestMonitor[_0x5029d3(0x172)]=0x0,RequestMonitor['lastMinute']=Math[_0x5029d3(0x171)](Date[_0x5029d3(0x17d)]()/0x3e8/0x3c)),await fs[_0x5029d3(0x164)](RequestMonitor[_0x5029d3(0x18d)],JSON[_0x5029d3(0x184)](RequestMonitor[_0x5029d3(0x162)],null,0x2)),await fs[_0x5029d3(0x164)](RequestMonitor[_0x5029d3(0x16f)],JSON[_0x5029d3(0x184)](RequestMonitor[_0x5029d3(0x159)],null,0x2));}catch(_0x369902){console[_0x5029d3(0x180)](_0x5029d3(0x15e),_0x369902);}}static async[a1_0x3e25cb(0x19a)](){const _0x5cf9b6=a1_0x3e25cb;setInterval(()=>RequestMonitor[_0x5cf9b6(0x165)](),0x3c*0x3e8),setInterval(()=>{const _0x30b6ba=_0x5cf9b6;RequestMonitor[_0x30b6ba(0x155)]()[_0x30b6ba(0x18a)](()=>{});},0x3c*0x3e8),RequestMonitor[_0x5cf9b6(0x155)]()[_0x5cf9b6(0x18a)](()=>{});}static async[a1_0x3e25cb(0x155)](){const _0x51c8d8=a1_0x3e25cb,_0x3944ad=osu['cpu'],_0x383b21=osu[_0x51c8d8(0x191)],_0x3c7042=osu[_0x51c8d8(0x178)],_0x1063a4={'total':{'inputMb':0x0,'outputMb':0x0}};try{const _0x4db58a=await _0x3c7042[_0x51c8d8(0x167)]();_0x1063a4['total'][_0x51c8d8(0x1a1)]=_0x4db58a[_0x51c8d8(0x15c)][_0x51c8d8(0x1a1)],_0x1063a4['total'][_0x51c8d8(0x177)]=_0x4db58a['total'][_0x51c8d8(0x177)];}catch(_0x2b8d72){}let _0x504052=0x0;try{_0x504052=await _0x3944ad[_0x51c8d8(0x19e)]();}catch(_0x3b1d0d){console[_0x51c8d8(0x179)]('Error\x20getting\x20CPU\x20usage:',_0x3b1d0d);}const _0x2f89b6={'usedMemMb':0x0};try{const _0x16bfc1=await _0x383b21[_0x51c8d8(0x17b)]();_0x2f89b6['usedMemMb']=_0x16bfc1[_0x51c8d8(0x16d)];}catch(_0x2d8466){console['log'](_0x51c8d8(0x196),_0x2d8466);}const _0x435e2a=new Date()['getHours']()[_0x51c8d8(0x19c)]()[_0x51c8d8(0x17c)](0x2,'0')+':'+new Date()[_0x51c8d8(0x175)]()[_0x51c8d8(0x19c)]()[_0x51c8d8(0x17c)](0x2,'0');RequestMonitor['ressourcesUsageStats'][_0x51c8d8(0x15d)]=RequestMonitor['ressourcesUsageStats'][_0x51c8d8(0x15d)]['slice'](-0x3c)['filter'](_0x123c03=>_0x123c03['time']!==_0x435e2a),RequestMonitor['ressourcesUsageStats'][_0x51c8d8(0x19f)]=RequestMonitor['ressourcesUsageStats'][_0x51c8d8(0x19f)][_0x51c8d8(0x16a)](-0x3c)['filter'](_0x2c90fb=>_0x2c90fb[_0x51c8d8(0x15f)]!==_0x435e2a),RequestMonitor[_0x51c8d8(0x183)][_0x51c8d8(0x169)]=RequestMonitor[_0x51c8d8(0x183)][_0x51c8d8(0x169)][_0x51c8d8(0x16a)](-0x3c)[_0x51c8d8(0x174)](_0x32c1a6=>_0x32c1a6[_0x51c8d8(0x15f)]!==_0x435e2a),RequestMonitor[_0x51c8d8(0x183)][_0x51c8d8(0x15d)][_0x51c8d8(0x18e)]({'time':_0x435e2a,'usage':_0x504052}),RequestMonitor[_0x51c8d8(0x183)][_0x51c8d8(0x19f)]['push']({'time':_0x435e2a,'usage':(_0x2f89b6[_0x51c8d8(0x16d)]/0x3e8)[_0x51c8d8(0x157)](0x2)}),RequestMonitor[_0x51c8d8(0x183)][_0x51c8d8(0x169)][_0x51c8d8(0x18e)]({'time':_0x435e2a,'usage':{'in':_0x1063a4['total']?.[_0x51c8d8(0x1a1)]??0x0,'out':_0x1063a4[_0x51c8d8(0x15c)]?.[_0x51c8d8(0x177)]??0x0}});try{await fs[_0x51c8d8(0x164)](RequestMonitor['ressourcesUsageStatsPath'],JSON[_0x51c8d8(0x184)](RequestMonitor[_0x51c8d8(0x183)],null,0x2));}catch(_0x42b66a){console[_0x51c8d8(0x180)]('Error\x20saving\x20monitoring\x20data:',_0x42b66a);}}static[a1_0x3e25cb(0x194)](){const _0x32775=a1_0x3e25cb,_0x59488f=Date[_0x32775(0x17d)](),_0x221030=_0x59488f-0x3c*0x3c*0x3e8,_0x1953de=_0x59488f-0x18*0x3c*0x3c*0x3e8,_0x38385a=RequestMonitor[_0x32775(0x162)][_0x32775(0x174)](_0x3aae5a=>_0x3aae5a[_0x32775(0x17f)]>_0x221030),_0x2a0e24={'total':RequestMonitor['httpCodesData'][_0x32775(0x16e)],'byCodes':{},'byPath':{}};return RequestMonitor[_0x32775(0x159)][_0x32775(0x195)](_0x323ee0=>{const _0x15050b=_0x32775;_0x2a0e24['byCodes'][_0x323ee0['statusCode']]=(_0x2a0e24[_0x15050b(0x18f)][_0x323ee0[_0x15050b(0x182)]]||0x0)+0x1;const _0x49eed1=_0x323ee0[_0x15050b(0x17a)]+'\x20'+_0x323ee0[_0x15050b(0x186)];!_0x2a0e24[_0x15050b(0x160)][_0x49eed1]&&(_0x2a0e24['byPath'][_0x49eed1]={'total':0x0,'codes':{}}),_0x2a0e24[_0x15050b(0x160)][_0x49eed1][_0x15050b(0x15c)]++,_0x2a0e24['byPath'][_0x49eed1][_0x15050b(0x176)][_0x323ee0[_0x15050b(0x182)]]=(_0x2a0e24[_0x15050b(0x160)][_0x49eed1][_0x15050b(0x176)][_0x323ee0['statusCode']]||0x0)+0x1;}),{'rps':_0x38385a,'httpCodes':_0x2a0e24,'ressourcesUsageStats':RequestMonitor[_0x32775(0x183)]};}}RequestMonitor[a1_0x3e25cb(0x173)]()[a1_0x3e25cb(0x18a)](()=>{}),RequestMonitor[a1_0x3e25cb(0x19a)]();function a1_0x2263(_0x5bca5e,_0xfeb92d){const _0x13146a=a1_0x1314();return a1_0x2263=function(_0x2263ff,_0x295ae4){_0x2263ff=_0x2263ff-0x154;let _0x4b0d71=_0x13146a[_0x2263ff];return _0x4b0d71;},a1_0x2263(_0x5bca5e,_0xfeb92d);}const counter=RequestMonitor;module[a1_0x3e25cb(0x154)]=counter;
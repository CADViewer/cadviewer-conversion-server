function a2_0x1d75(_0x367139,_0x1d643d){const _0x501407=a2_0x5014();return a2_0x1d75=function(_0x1d7597,_0x5e88d4){_0x1d7597=_0x1d7597-0x153;let _0x37210b=_0x501407[_0x1d7597];return _0x37210b;},a2_0x1d75(_0x367139,_0x1d643d);}const a2_0x174370=a2_0x1d75;(function(_0x5b733e,_0x2da530){const _0x26b259=a2_0x1d75,_0x4b332a=_0x5b733e();while(!![]){try{const _0x287df1=-parseInt(_0x26b259(0x170))/0x1+parseInt(_0x26b259(0x156))/0x2*(-parseInt(_0x26b259(0x172))/0x3)+-parseInt(_0x26b259(0x15d))/0x4*(-parseInt(_0x26b259(0x191))/0x5)+parseInt(_0x26b259(0x182))/0x6+parseInt(_0x26b259(0x166))/0x7+parseInt(_0x26b259(0x160))/0x8*(-parseInt(_0x26b259(0x174))/0x9)+parseInt(_0x26b259(0x197))/0xa;if(_0x287df1===_0x2da530)break;else _0x4b332a['push'](_0x4b332a['shift']());}catch(_0x255ed5){_0x4b332a['push'](_0x4b332a['shift']());}}}(a2_0x5014,0x61c31));const fs=require('fs')[a2_0x174370(0x18e)],osu=require(a2_0x174370(0x16e));class RequestMonitor{static [a2_0x174370(0x165)]=a2_0x174370(0x190);static [a2_0x174370(0x199)]=a2_0x174370(0x19a);static [a2_0x174370(0x16a)]=a2_0x174370(0x163);static [a2_0x174370(0x188)]=[];static [a2_0x174370(0x158)]=[];static [a2_0x174370(0x176)]={};static [a2_0x174370(0x18f)]=Math[a2_0x174370(0x17e)](Date[a2_0x174370(0x161)]()/0x3e8/0x3c);static [a2_0x174370(0x193)]=0x0;static async[a2_0x174370(0x173)](){const _0x29a3f9=a2_0x174370;console[_0x29a3f9(0x15e)](_0x29a3f9(0x19c));try{const _0x16e799=await fs[_0x29a3f9(0x18d)](RequestMonitor[_0x29a3f9(0x165)],'utf8');RequestMonitor[_0x29a3f9(0x188)]=JSON[_0x29a3f9(0x15b)](_0x16e799);}catch(_0x14f0e3){RequestMonitor[_0x29a3f9(0x188)]=[];}try{const _0xa9fd0e=await fs[_0x29a3f9(0x18d)](RequestMonitor[_0x29a3f9(0x199)],_0x29a3f9(0x164));RequestMonitor[_0x29a3f9(0x158)]=JSON[_0x29a3f9(0x15b)](_0xa9fd0e);}catch(_0x1c8b76){RequestMonitor[_0x29a3f9(0x158)]=[];}try{const _0x537b45=await fs[_0x29a3f9(0x18d)](RequestMonitor['ressourcesUsageStatsPath'],_0x29a3f9(0x164));RequestMonitor[_0x29a3f9(0x176)]=JSON['parse'](_0x537b45),!RequestMonitor[_0x29a3f9(0x176)][_0x29a3f9(0x192)]&&(RequestMonitor[_0x29a3f9(0x176)]['cpu']=[]),!RequestMonitor[_0x29a3f9(0x176)][_0x29a3f9(0x179)]&&(RequestMonitor[_0x29a3f9(0x176)]['memory']=[]),!RequestMonitor[_0x29a3f9(0x176)][_0x29a3f9(0x178)]&&(RequestMonitor[_0x29a3f9(0x176)][_0x29a3f9(0x178)]=[]);}catch(_0x48538c){RequestMonitor['ressourcesUsageStats']={'cpu':[],'memory':[],'network':[]};}console[_0x29a3f9(0x15e)](_0x29a3f9(0x186));}static[a2_0x174370(0x171)](_0x4f231,_0x577136,_0x334524){const _0x5b7534=a2_0x174370;if(_0x4f231[_0x5b7534(0x187)]['includes'](_0x5b7534(0x184)))return _0x334524();console[_0x5b7534(0x15e)](_0x5b7534(0x175));let _0x4e5dc3=Date[_0x5b7534(0x161)](),_0x555369=Math[_0x5b7534(0x17e)](_0x4e5dc3/0x3e8/0x3c);console[_0x5b7534(0x15e)](_0x5b7534(0x180));const _0x3a8977=_0x577136[_0x5b7534(0x153)];_0x577136['end']=(..._0x2f5948)=>{const _0x4472d7=_0x5b7534;console[_0x4472d7(0x15e)](_0x555369,{'currentMinute':_0x555369});_0x555369>RequestMonitor[_0x4472d7(0x18f)]&&(RequestMonitor[_0x4472d7(0x188)]['push']({'timestamp':RequestMonitor[_0x4472d7(0x18f)]*0x3e8*0x3c,'requests':RequestMonitor['currentRequests']}),RequestMonitor[_0x4472d7(0x193)]=0x0,RequestMonitor[_0x4472d7(0x18f)]=_0x555369);RequestMonitor[_0x4472d7(0x193)]++,RequestMonitor['httpCodesData'][_0x4472d7(0x17a)]({'timestamp':Date[_0x4472d7(0x161)](),'statusCode':_0x577136['statusCode'],'path':_0x4f231['path'],'method':_0x4f231[_0x4472d7(0x16d)]});const _0x29f34=Date[_0x4472d7(0x161)]()-0x18*0x3c*0x3c*0x3e8;return RequestMonitor[_0x4472d7(0x158)]=RequestMonitor[_0x4472d7(0x158)][_0x4472d7(0x157)](_0x6ee30d=>_0x6ee30d[_0x4472d7(0x168)]>_0x29f34),_0x3a8977[_0x4472d7(0x167)](_0x577136,_0x2f5948);},_0x334524();}static async['save'](){const _0x2397ae=a2_0x174370;try{RequestMonitor[_0x2397ae(0x18f)]!==Math[_0x2397ae(0x17e)](Date[_0x2397ae(0x161)]()/0x3e8/0x3c)&&(RequestMonitor[_0x2397ae(0x188)][_0x2397ae(0x17a)]({'timestamp':RequestMonitor['lastMinute']*0x3e8*0x3c,'requests':RequestMonitor[_0x2397ae(0x193)]}),RequestMonitor[_0x2397ae(0x193)]=0x0,RequestMonitor[_0x2397ae(0x18f)]=Math['floor'](Date[_0x2397ae(0x161)]()/0x3e8/0x3c)),await fs['writeFile'](RequestMonitor['rpsStoragePath'],JSON['stringify'](RequestMonitor[_0x2397ae(0x188)],null,0x2)),await fs[_0x2397ae(0x15c)](RequestMonitor['httpCodesStoragePath'],JSON[_0x2397ae(0x17c)](RequestMonitor['httpCodesData'],null,0x2));}catch(_0x13614f){console[_0x2397ae(0x181)](_0x2397ae(0x196),_0x13614f);}}static async[a2_0x174370(0x16f)](){const _0x333176=a2_0x174370;setInterval(()=>RequestMonitor[_0x333176(0x17b)](),0x3c*0x3e8),setInterval(()=>{const _0xf150a9=_0x333176;RequestMonitor[_0xf150a9(0x17f)]()['then'](()=>{});},0x3c*0x3e8),RequestMonitor[_0x333176(0x17f)]()['then'](()=>{});}static async[a2_0x174370(0x17f)](){const _0x70a8aa=a2_0x174370,_0x35ae51=osu[_0x70a8aa(0x192)],_0x6de25f=osu[_0x70a8aa(0x16b)],_0x50ea53=osu[_0x70a8aa(0x159)],_0x5ea0d4={'total':{'inputMb':0x0,'outputMb':0x0}};try{const _0x562f83=await _0x50ea53['inOut']();_0x5ea0d4[_0x70a8aa(0x169)][_0x70a8aa(0x155)]=_0x562f83[_0x70a8aa(0x169)][_0x70a8aa(0x155)],_0x5ea0d4['total'][_0x70a8aa(0x195)]=_0x562f83[_0x70a8aa(0x169)]['outputMb'];}catch(_0xdd3dca){}let _0x45d6f1=0x0;try{_0x45d6f1=await _0x35ae51['usage']();}catch(_0x56d394){console['log']('Error\x20getting\x20CPU\x20usage:',_0x56d394);}const _0xb8494f={'usedMemMb':0x0};try{const _0x5bfc90=await _0x6de25f[_0x70a8aa(0x19d)]();_0xb8494f[_0x70a8aa(0x18a)]=_0x5bfc90[_0x70a8aa(0x18a)];}catch(_0x2f877b){console['log'](_0x70a8aa(0x183),_0x2f877b);}const _0xcaea79=new Date()[_0x70a8aa(0x16c)]()[_0x70a8aa(0x19b)]()[_0x70a8aa(0x18b)](0x2,'0')+':'+new Date()['getMinutes']()[_0x70a8aa(0x19b)]()[_0x70a8aa(0x18b)](0x2,'0');RequestMonitor['ressourcesUsageStats'][_0x70a8aa(0x192)]=RequestMonitor[_0x70a8aa(0x176)]['cpu']['slice'](-0x3c)['filter'](_0x13d6ec=>_0x13d6ec[_0x70a8aa(0x154)]!==_0xcaea79),RequestMonitor['ressourcesUsageStats'][_0x70a8aa(0x179)]=RequestMonitor[_0x70a8aa(0x176)][_0x70a8aa(0x179)][_0x70a8aa(0x15a)](-0x3c)[_0x70a8aa(0x157)](_0x49f6d5=>_0x49f6d5['time']!==_0xcaea79),RequestMonitor[_0x70a8aa(0x176)][_0x70a8aa(0x178)]=RequestMonitor[_0x70a8aa(0x176)][_0x70a8aa(0x178)][_0x70a8aa(0x15a)](-0x3c)['filter'](_0x346084=>_0x346084[_0x70a8aa(0x154)]!==_0xcaea79),RequestMonitor[_0x70a8aa(0x176)][_0x70a8aa(0x192)][_0x70a8aa(0x17a)]({'time':_0xcaea79,'usage':_0x45d6f1}),RequestMonitor[_0x70a8aa(0x176)][_0x70a8aa(0x179)][_0x70a8aa(0x17a)]({'time':_0xcaea79,'usage':(_0xb8494f[_0x70a8aa(0x18a)]/0x3e8)[_0x70a8aa(0x194)](0x2)}),RequestMonitor['ressourcesUsageStats'][_0x70a8aa(0x178)][_0x70a8aa(0x17a)]({'time':_0xcaea79,'usage':{'in':_0x5ea0d4[_0x70a8aa(0x169)]?.[_0x70a8aa(0x155)]??0x0,'out':_0x5ea0d4['total']?.[_0x70a8aa(0x195)]??0x0}});try{await fs[_0x70a8aa(0x15c)](RequestMonitor[_0x70a8aa(0x16a)],JSON[_0x70a8aa(0x17c)](RequestMonitor['ressourcesUsageStats'],null,0x2));}catch(_0x4da5e5){console[_0x70a8aa(0x181)](_0x70a8aa(0x196),_0x4da5e5);}}static[a2_0x174370(0x185)](){const _0x7a762=a2_0x174370,_0x2a49ec=Date[_0x7a762(0x161)](),_0x388ac8=_0x2a49ec-0x3c*0x3c*0x3e8,_0x1eae3c=_0x2a49ec-0x18*0x3c*0x3c*0x3e8,_0x1f7964=RequestMonitor[_0x7a762(0x188)][_0x7a762(0x157)](_0x463373=>_0x463373[_0x7a762(0x168)]>_0x388ac8),_0x41e7ba={'total':RequestMonitor[_0x7a762(0x158)][_0x7a762(0x177)],'byCodes':{},'byPath':{}};return RequestMonitor[_0x7a762(0x158)][_0x7a762(0x198)](_0x50ea78=>{const _0x3c3ddb=_0x7a762;_0x41e7ba[_0x3c3ddb(0x18c)][_0x50ea78['statusCode']]=(_0x41e7ba[_0x3c3ddb(0x18c)][_0x50ea78[_0x3c3ddb(0x162)]]||0x0)+0x1;const _0x136426=_0x50ea78['method']+'\x20'+_0x50ea78[_0x3c3ddb(0x187)];!_0x41e7ba[_0x3c3ddb(0x15f)][_0x136426]&&(_0x41e7ba['byPath'][_0x136426]={'total':0x0,'codes':{}}),_0x41e7ba[_0x3c3ddb(0x15f)][_0x136426]['total']++,_0x41e7ba[_0x3c3ddb(0x15f)][_0x136426][_0x3c3ddb(0x189)][_0x50ea78['statusCode']]=(_0x41e7ba[_0x3c3ddb(0x15f)][_0x136426][_0x3c3ddb(0x189)][_0x50ea78[_0x3c3ddb(0x162)]]||0x0)+0x1;}),{'rps':_0x1f7964,'httpCodes':_0x41e7ba,'ressourcesUsageStats':RequestMonitor[_0x7a762(0x176)]};}}RequestMonitor[a2_0x174370(0x173)]()['then'](()=>{}),RequestMonitor[a2_0x174370(0x16f)]();const counter=RequestMonitor;function a2_0x5014(){const _0x1f062b=['104VslJwJ','now','statusCode','cadviewer/settings/ressources-usage-stats.json','utf8','rpsStoragePath','2966712dwqvqS','apply','timestamp','total','ressourcesUsageStatsPath','mem','getHours','method','node-os-utils','startPeriodicSave','34406NNBuMR','middleware','1175136qVMhwf','init','547632AIPAhW','Request\x20monitor\x20middleware','ressourcesUsageStats','length','network','memory','push','save','stringify','exports','floor','getUsageRessourcesStatsAndSave','=======>','error','2693544lJlRKq','Error\x20getting\x20memory\x20usage:','/metrics','getStats','Request\x20monitor\x20initialized.','path','rpsData','codes','usedMemMb','padStart','byCodes','readFile','promises','lastMinute','cadviewer/settings/requests-per-minute.json','76465LCuLKq','cpu','currentRequests','toFixed','outputMb','Error\x20saving\x20monitoring\x20data:','10906680XthwXy','forEach','httpCodesStoragePath','cadviewer/settings/http-codes-24h.json','toString','Initializing\x20request\x20monitor...','info','end','time','inputMb','4LAwbmu','filter','httpCodesData','netstat','slice','parse','writeFile','12UFaBtm','log','byPath'];a2_0x5014=function(){return _0x1f062b;};return a2_0x5014();}module[a2_0x174370(0x17d)]=counter;
const a1_0xe18225=a1_0x28dc;function a1_0x28dc(_0x4428bf,_0x12961b){const _0x128a05=a1_0x128a();return a1_0x28dc=function(_0x28dcd4,_0xc79389){_0x28dcd4=_0x28dcd4-0x1b6;let _0x261071=_0x128a05[_0x28dcd4];return _0x261071;},a1_0x28dc(_0x4428bf,_0x12961b);}(function(_0x31f393,_0xedc7f3){const _0x4f382a=a1_0x28dc,_0x402148=_0x31f393();while(!![]){try{const _0x2bbb1b=parseInt(_0x4f382a(0x1c2))/0x1+parseInt(_0x4f382a(0x203))/0x2+parseInt(_0x4f382a(0x1e4))/0x3*(parseInt(_0x4f382a(0x1fe))/0x4)+parseInt(_0x4f382a(0x1c7))/0x5*(parseInt(_0x4f382a(0x201))/0x6)+-parseInt(_0x4f382a(0x202))/0x7+parseInt(_0x4f382a(0x1f7))/0x8+-parseInt(_0x4f382a(0x1bb))/0x9;if(_0x2bbb1b===_0xedc7f3)break;else _0x402148['push'](_0x402148['shift']());}catch(_0x4d6fde){_0x402148['push'](_0x402148['shift']());}}}(a1_0x128a,0xb685f));const fs=require('fs')[a1_0xe18225(0x1ee)],osu=require(a1_0xe18225(0x1cd));function a1_0x128a(){const _0x5c96b4=['6250BcjOvA','outputMb','parse','forEach','info','ressourcesUsageStatsPath','node-os-utils','now','statusCode','rpsData','floor','total','usage','currentRequests','padStart','getMinutes','path','save','getUsageRessourcesStatsAndSave','rpsStoragePath','Request\x20monitor\x20middleware','then','writeFile','end','method','middleware','Error\x20getting\x20memory\x20usage:','log','cpu','4405623CEIIBB','codes','httpCodesStoragePath','cadviewer/settings/requests-per-minute.json','cadviewer/settings/ressources-usage-stats.json','network','stringify','timestamp','utf8','cadviewer/settings/http-codes-24h.json','promises','lastMinute','includes','Request\x20monitor\x20initialized.','init','byPath','toString','apply','Error\x20getting\x20CPU\x20usage:','2458416OcojyX','startPeriodicSave','push','inOut','toFixed','Initializing\x20request\x20monitor...','httpCodesData','4sBVSHC','Error\x20saving\x20monitoring\x20data:','slice','1188CcVeHH','1279502ehHfwi','863312IuGOzC','error','getStats','memory','getHours','ressourcesUsageStats','21825963bOpiDJ','exports','readFile','usedMemMb','mem','inputMb','time','900509RlrIYY','byCodes','netstat','/metrics','filter'];a1_0x128a=function(){return _0x5c96b4;};return a1_0x128a();}class RequestMonitor{static [a1_0xe18225(0x1da)]=a1_0xe18225(0x1e7);static [a1_0xe18225(0x1e6)]=a1_0xe18225(0x1ed);static ['ressourcesUsageStatsPath']=a1_0xe18225(0x1e8);static [a1_0xe18225(0x1d0)]=[];static [a1_0xe18225(0x1fd)]=[];static [a1_0xe18225(0x1ba)]={};static [a1_0xe18225(0x1ef)]=Math[a1_0xe18225(0x1d1)](Date['now']()/0x3e8/0x3c);static [a1_0xe18225(0x1d4)]=0x0;static async[a1_0xe18225(0x1f2)](){const _0x1bbaa4=a1_0xe18225;console['log'](_0x1bbaa4(0x1fc));try{const _0xfbb20c=await fs['readFile'](RequestMonitor[_0x1bbaa4(0x1da)],'utf8');RequestMonitor[_0x1bbaa4(0x1d0)]=JSON[_0x1bbaa4(0x1c9)](_0xfbb20c);}catch(_0x5a84a3){RequestMonitor['rpsData']=[];}try{const _0x36dff9=await fs['readFile'](RequestMonitor[_0x1bbaa4(0x1e6)],_0x1bbaa4(0x1ec));RequestMonitor[_0x1bbaa4(0x1fd)]=JSON[_0x1bbaa4(0x1c9)](_0x36dff9);}catch(_0x4a1597){RequestMonitor[_0x1bbaa4(0x1fd)]=[];}try{const _0x2b64b9=await fs[_0x1bbaa4(0x1bd)](RequestMonitor[_0x1bbaa4(0x1cc)],'utf8');RequestMonitor[_0x1bbaa4(0x1ba)]=JSON[_0x1bbaa4(0x1c9)](_0x2b64b9),!RequestMonitor[_0x1bbaa4(0x1ba)][_0x1bbaa4(0x1e3)]&&(RequestMonitor[_0x1bbaa4(0x1ba)]['cpu']=[]),!RequestMonitor[_0x1bbaa4(0x1ba)]['memory']&&(RequestMonitor[_0x1bbaa4(0x1ba)]['memory']=[]),!RequestMonitor[_0x1bbaa4(0x1ba)]['network']&&(RequestMonitor[_0x1bbaa4(0x1ba)][_0x1bbaa4(0x1e9)]=[]);}catch(_0x54e6a3){RequestMonitor['ressourcesUsageStats']={'cpu':[],'memory':[],'network':[]};}console[_0x1bbaa4(0x1e2)](_0x1bbaa4(0x1f1));}static[a1_0xe18225(0x1e0)](_0x558959,_0x19440f,_0x5d4478){const _0x5a5830=a1_0xe18225;if(_0x558959[_0x5a5830(0x1d7)][_0x5a5830(0x1f0)](_0x5a5830(0x1c5)))return _0x5d4478();console['log'](_0x5a5830(0x1db));let _0x4ad2fd=Date[_0x5a5830(0x1ce)](),_0x1f0004=Math[_0x5a5830(0x1d1)](_0x4ad2fd/0x3e8/0x3c);console[_0x5a5830(0x1e2)]('=======>');const _0x1f1e7c=_0x19440f[_0x5a5830(0x1de)];_0x19440f[_0x5a5830(0x1de)]=(..._0x123ab1)=>{const _0x5a58b4=_0x5a5830;console['log'](_0x1f0004,{'currentMinute':_0x1f0004});_0x1f0004>RequestMonitor[_0x5a58b4(0x1ef)]&&(RequestMonitor['rpsData'][_0x5a58b4(0x1f9)]({'timestamp':RequestMonitor[_0x5a58b4(0x1ef)]*0x3e8*0x3c,'requests':RequestMonitor['currentRequests']}),RequestMonitor['currentRequests']=0x0,RequestMonitor[_0x5a58b4(0x1ef)]=_0x1f0004);RequestMonitor[_0x5a58b4(0x1d4)]++,RequestMonitor[_0x5a58b4(0x1fd)]['push']({'timestamp':Date['now'](),'statusCode':_0x19440f['statusCode'],'path':_0x558959[_0x5a58b4(0x1d7)],'method':_0x558959[_0x5a58b4(0x1df)]});const _0x400c59=Date[_0x5a58b4(0x1ce)]()-0x18*0x3c*0x3c*0x3e8;return RequestMonitor[_0x5a58b4(0x1fd)]=RequestMonitor[_0x5a58b4(0x1fd)][_0x5a58b4(0x1c6)](_0x4fc6ba=>_0x4fc6ba[_0x5a58b4(0x1eb)]>_0x400c59),_0x1f1e7c[_0x5a58b4(0x1f5)](_0x19440f,_0x123ab1);},_0x5d4478();}static async[a1_0xe18225(0x1d8)](){const _0x1f6fd7=a1_0xe18225;try{RequestMonitor[_0x1f6fd7(0x1ef)]!==Math[_0x1f6fd7(0x1d1)](Date[_0x1f6fd7(0x1ce)]()/0x3e8/0x3c)&&(RequestMonitor[_0x1f6fd7(0x1d0)][_0x1f6fd7(0x1f9)]({'timestamp':RequestMonitor[_0x1f6fd7(0x1ef)]*0x3e8*0x3c,'requests':RequestMonitor['currentRequests']}),RequestMonitor[_0x1f6fd7(0x1d4)]=0x0,RequestMonitor['lastMinute']=Math[_0x1f6fd7(0x1d1)](Date[_0x1f6fd7(0x1ce)]()/0x3e8/0x3c)),await fs['writeFile'](RequestMonitor[_0x1f6fd7(0x1da)],JSON['stringify'](RequestMonitor[_0x1f6fd7(0x1d0)],null,0x2)),await fs[_0x1f6fd7(0x1dd)](RequestMonitor['httpCodesStoragePath'],JSON[_0x1f6fd7(0x1ea)](RequestMonitor[_0x1f6fd7(0x1fd)],null,0x2));}catch(_0x51e2c7){console[_0x1f6fd7(0x1b6)](_0x1f6fd7(0x1ff),_0x51e2c7);}}static async[a1_0xe18225(0x1f8)](){const _0x3bc3f8=a1_0xe18225;setInterval(()=>RequestMonitor['save'](),0x3c*0x3e8),setInterval(()=>{const _0x32017c=a1_0x28dc;RequestMonitor[_0x32017c(0x1d9)]()[_0x32017c(0x1dc)](()=>{});},0x3c*0x3e8),RequestMonitor[_0x3bc3f8(0x1d9)]()[_0x3bc3f8(0x1dc)](()=>{});}static async['getUsageRessourcesStatsAndSave'](){const _0x379de7=a1_0xe18225,_0x5c7df8=osu[_0x379de7(0x1e3)],_0x5e6c17=osu[_0x379de7(0x1bf)],_0x3af602=osu[_0x379de7(0x1c4)],_0x2dc08f={'total':{'inputMb':0x0,'outputMb':0x0}};try{const _0x14c7b4=await _0x3af602[_0x379de7(0x1fa)]();_0x2dc08f['total'][_0x379de7(0x1c0)]=_0x14c7b4[_0x379de7(0x1d2)]['inputMb'],_0x2dc08f[_0x379de7(0x1d2)][_0x379de7(0x1c8)]=_0x14c7b4[_0x379de7(0x1d2)][_0x379de7(0x1c8)];}catch(_0x39759c){}let _0x56d374=0x0;try{_0x56d374=await _0x5c7df8[_0x379de7(0x1d3)]();}catch(_0x1f975e){console[_0x379de7(0x1e2)](_0x379de7(0x1f6),_0x1f975e);}const _0x407599={'usedMemMb':0x0};try{const _0x330dd7=await _0x5e6c17[_0x379de7(0x1cb)]();_0x407599[_0x379de7(0x1be)]=_0x330dd7['usedMemMb'];}catch(_0x56ee9d){console[_0x379de7(0x1e2)](_0x379de7(0x1e1),_0x56ee9d);}const _0xce1814=new Date()[_0x379de7(0x1b9)]()[_0x379de7(0x1f4)]()[_0x379de7(0x1d5)](0x2,'0')+':'+new Date()[_0x379de7(0x1d6)]()['toString']()[_0x379de7(0x1d5)](0x2,'0');RequestMonitor[_0x379de7(0x1ba)]['cpu']=RequestMonitor[_0x379de7(0x1ba)][_0x379de7(0x1e3)][_0x379de7(0x200)](-0x3c)[_0x379de7(0x1c6)](_0x56c2c1=>_0x56c2c1[_0x379de7(0x1c1)]!==_0xce1814),RequestMonitor[_0x379de7(0x1ba)][_0x379de7(0x1b8)]=RequestMonitor[_0x379de7(0x1ba)][_0x379de7(0x1b8)][_0x379de7(0x200)](-0x3c)[_0x379de7(0x1c6)](_0x120f4b=>_0x120f4b['time']!==_0xce1814),RequestMonitor[_0x379de7(0x1ba)]['network']=RequestMonitor['ressourcesUsageStats'][_0x379de7(0x1e9)][_0x379de7(0x200)](-0x3c)['filter'](_0x1b4c76=>_0x1b4c76[_0x379de7(0x1c1)]!==_0xce1814),RequestMonitor[_0x379de7(0x1ba)][_0x379de7(0x1e3)][_0x379de7(0x1f9)]({'time':_0xce1814,'usage':_0x56d374}),RequestMonitor[_0x379de7(0x1ba)]['memory'][_0x379de7(0x1f9)]({'time':_0xce1814,'usage':(_0x407599[_0x379de7(0x1be)]/0x3e8)[_0x379de7(0x1fb)](0x2)}),RequestMonitor[_0x379de7(0x1ba)][_0x379de7(0x1e9)][_0x379de7(0x1f9)]({'time':_0xce1814,'usage':{'in':_0x2dc08f['total']?.[_0x379de7(0x1c0)]??0x0,'out':_0x2dc08f[_0x379de7(0x1d2)]?.[_0x379de7(0x1c8)]??0x0}});try{await fs[_0x379de7(0x1dd)](RequestMonitor[_0x379de7(0x1cc)],JSON['stringify'](RequestMonitor[_0x379de7(0x1ba)],null,0x2));}catch(_0x4934b8){console['error'](_0x379de7(0x1ff),_0x4934b8);}}static[a1_0xe18225(0x1b7)](){const _0x31d90f=a1_0xe18225,_0x27475b=Date['now'](),_0x58b5d1=_0x27475b-0x3c*0x3c*0x3e8,_0xa23105=_0x27475b-0x18*0x3c*0x3c*0x3e8,_0x4268dd=RequestMonitor[_0x31d90f(0x1d0)][_0x31d90f(0x1c6)](_0x347cf2=>_0x347cf2[_0x31d90f(0x1eb)]>_0x58b5d1),_0x2f2244={'total':RequestMonitor['httpCodesData']['length'],'byCodes':{},'byPath':{}};return RequestMonitor[_0x31d90f(0x1fd)][_0x31d90f(0x1ca)](_0x37f54d=>{const _0x40a4d3=_0x31d90f;_0x2f2244[_0x40a4d3(0x1c3)][_0x37f54d[_0x40a4d3(0x1cf)]]=(_0x2f2244['byCodes'][_0x37f54d[_0x40a4d3(0x1cf)]]||0x0)+0x1;const _0x2acbdd=_0x37f54d[_0x40a4d3(0x1df)]+'\x20'+_0x37f54d[_0x40a4d3(0x1d7)];!_0x2f2244[_0x40a4d3(0x1f3)][_0x2acbdd]&&(_0x2f2244['byPath'][_0x2acbdd]={'total':0x0,'codes':{}}),_0x2f2244[_0x40a4d3(0x1f3)][_0x2acbdd][_0x40a4d3(0x1d2)]++,_0x2f2244['byPath'][_0x2acbdd][_0x40a4d3(0x1e5)][_0x37f54d[_0x40a4d3(0x1cf)]]=(_0x2f2244[_0x40a4d3(0x1f3)][_0x2acbdd][_0x40a4d3(0x1e5)][_0x37f54d[_0x40a4d3(0x1cf)]]||0x0)+0x1;}),{'rps':_0x4268dd,'httpCodes':_0x2f2244,'ressourcesUsageStats':RequestMonitor[_0x31d90f(0x1ba)]};}}RequestMonitor['init']()[a1_0xe18225(0x1dc)](()=>{}),RequestMonitor['startPeriodicSave']();const counter=RequestMonitor;module[a1_0xe18225(0x1bc)]=counter;
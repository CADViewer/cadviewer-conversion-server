function a1_0x111b(_0x25b421,_0x18ca5c){const _0x3b98bb=a1_0x3b98();return a1_0x111b=function(_0x111bd8,_0x2bfff0){_0x111bd8=_0x111bd8-0x144;let _0x36eac4=_0x3b98bb[_0x111bd8];return _0x36eac4;},a1_0x111b(_0x25b421,_0x18ca5c);}function a1_0x3b98(){const _0x5e0291=['427560wIuYXE','forEach','netstat','middleware','getMinutes','promises','utf8','httpCodesData','timestamp','save','statusCode','20370vhaQQW','rpsStoragePath','Error\x20getting\x20CPU\x20usage:','getUsageRessourcesStatsAndSave','startPeriodicSave','padStart','includes','outputMb','toString','codes','byCodes','getHours','inOut','/metrics','length','byPath','memory','toFixed','time','353610hydSME','push','filter','Initializing\x20request\x20monitor...','612776CPxVWN','ressourcesUsageStats','info','floor','network','currentRequests','9208104rKWxaH','18NFEqUS','stringify','apply','11WyVyZh','end','12BeYPur','112806YZpejy','log','total','lastMinute','Error\x20saving\x20monitoring\x20data:','Request\x20monitor\x20initialized.','writeFile','Error\x20getting\x20memory\x20usage:','parse','httpCodesStoragePath','ressourcesUsageStatsPath','usedMemMb','readFile','5NbbzgW','10402AntUUD','cpu','node-os-utils','exports','Request\x20monitor\x20middleware','mem','path','now','method','usage','rpsData','then','inputMb','cadviewer/settings/http-codes-24h.json','error','485lEGxiH'];a1_0x3b98=function(){return _0x5e0291;};return a1_0x3b98();}const a1_0x1652cf=a1_0x111b;(function(_0x33bf3f,_0x3d7a6d){const _0x873c8c=a1_0x111b,_0x418cd8=_0x33bf3f();while(!![]){try{const _0x4b2c25=-parseInt(_0x873c8c(0x189))/0x1*(-parseInt(_0x873c8c(0x18a))/0x2)+parseInt(_0x873c8c(0x17c))/0x3*(-parseInt(_0x873c8c(0x17b))/0x4)+-parseInt(_0x873c8c(0x14c))/0x5*(parseInt(_0x873c8c(0x158))/0x6)+-parseInt(_0x873c8c(0x14d))/0x7+-parseInt(_0x873c8c(0x16f))/0x8*(parseInt(_0x873c8c(0x176))/0x9)+parseInt(_0x873c8c(0x16b))/0xa+parseInt(_0x873c8c(0x179))/0xb*(parseInt(_0x873c8c(0x175))/0xc);if(_0x4b2c25===_0x3d7a6d)break;else _0x418cd8['push'](_0x418cd8['shift']());}catch(_0x21b88c){_0x418cd8['push'](_0x418cd8['shift']());}}}(a1_0x3b98,0x2a119));const fs=require('fs')[a1_0x1652cf(0x152)],osu=require(a1_0x1652cf(0x18c));class RequestMonitor{static ['rpsStoragePath']='cadviewer/settings/requests-per-minute.json';static ['httpCodesStoragePath']=a1_0x1652cf(0x14a);static [a1_0x1652cf(0x186)]='cadviewer/settings/ressources-usage-stats.json';static ['rpsData']=[];static ['httpCodesData']=[];static [a1_0x1652cf(0x170)]={};static [a1_0x1652cf(0x17f)]=Math[a1_0x1652cf(0x172)](Date[a1_0x1652cf(0x144)]()/0x3e8/0x3c);static ['currentRequests']=0x0;static async['init'](){const _0x14e565=a1_0x1652cf;console[_0x14e565(0x17d)](_0x14e565(0x16e));try{const _0x2a6c4e=await fs[_0x14e565(0x188)](RequestMonitor[_0x14e565(0x159)],'utf8');RequestMonitor[_0x14e565(0x147)]=JSON[_0x14e565(0x184)](_0x2a6c4e);}catch(_0x320923){RequestMonitor['rpsData']=[];}try{const _0x5462a1=await fs[_0x14e565(0x188)](RequestMonitor[_0x14e565(0x185)],_0x14e565(0x153));RequestMonitor[_0x14e565(0x154)]=JSON[_0x14e565(0x184)](_0x5462a1);}catch(_0x5a7ec7){RequestMonitor[_0x14e565(0x154)]=[];}try{const _0x56bf2f=await fs['readFile'](RequestMonitor[_0x14e565(0x186)],_0x14e565(0x153));RequestMonitor[_0x14e565(0x170)]=JSON['parse'](_0x56bf2f),!RequestMonitor[_0x14e565(0x170)][_0x14e565(0x18b)]&&(RequestMonitor[_0x14e565(0x170)][_0x14e565(0x18b)]=[]),!RequestMonitor['ressourcesUsageStats'][_0x14e565(0x168)]&&(RequestMonitor['ressourcesUsageStats'][_0x14e565(0x168)]=[]),!RequestMonitor[_0x14e565(0x170)][_0x14e565(0x173)]&&(RequestMonitor[_0x14e565(0x170)][_0x14e565(0x173)]=[]);}catch(_0x5da076){RequestMonitor[_0x14e565(0x170)]={'cpu':[],'memory':[],'network':[]};}console[_0x14e565(0x17d)](_0x14e565(0x181));}static[a1_0x1652cf(0x150)](_0x5ae53b,_0x521525,_0x586fd3){const _0x32b4c9=a1_0x1652cf;if(_0x5ae53b[_0x32b4c9(0x190)][_0x32b4c9(0x15e)](_0x32b4c9(0x165)))return _0x586fd3();console['log'](_0x32b4c9(0x18e));let _0x582975=Date['now'](),_0x48410a=Math[_0x32b4c9(0x172)](_0x582975/0x3e8/0x3c);console[_0x32b4c9(0x17d)]('=======>');const _0x317be0=_0x521525[_0x32b4c9(0x17a)];_0x521525['end']=(..._0x1733f2)=>{const _0x40db04=_0x32b4c9;console[_0x40db04(0x17d)](_0x48410a,{'currentMinute':_0x48410a});_0x48410a>RequestMonitor['lastMinute']&&(RequestMonitor[_0x40db04(0x147)][_0x40db04(0x16c)]({'timestamp':RequestMonitor[_0x40db04(0x17f)]*0x3e8*0x3c,'requests':RequestMonitor[_0x40db04(0x174)]}),RequestMonitor['currentRequests']=0x0,RequestMonitor[_0x40db04(0x17f)]=_0x48410a);RequestMonitor[_0x40db04(0x174)]++,RequestMonitor[_0x40db04(0x154)][_0x40db04(0x16c)]({'timestamp':Date[_0x40db04(0x144)](),'statusCode':_0x521525[_0x40db04(0x157)],'path':_0x5ae53b[_0x40db04(0x190)],'method':_0x5ae53b[_0x40db04(0x145)]});const _0x2a20ee=Date[_0x40db04(0x144)]()-0x18*0x3c*0x3c*0x3e8;return RequestMonitor[_0x40db04(0x154)]=RequestMonitor[_0x40db04(0x154)][_0x40db04(0x16d)](_0x2c0dd7=>_0x2c0dd7[_0x40db04(0x155)]>_0x2a20ee),_0x317be0[_0x40db04(0x178)](_0x521525,_0x1733f2);},_0x586fd3();}static async[a1_0x1652cf(0x156)](){const _0x75e0ba=a1_0x1652cf;try{RequestMonitor[_0x75e0ba(0x17f)]!==Math[_0x75e0ba(0x172)](Date['now']()/0x3e8/0x3c)&&(RequestMonitor[_0x75e0ba(0x147)]['push']({'timestamp':RequestMonitor[_0x75e0ba(0x17f)]*0x3e8*0x3c,'requests':RequestMonitor[_0x75e0ba(0x174)]}),RequestMonitor['currentRequests']=0x0,RequestMonitor[_0x75e0ba(0x17f)]=Math['floor'](Date['now']()/0x3e8/0x3c)),await fs[_0x75e0ba(0x182)](RequestMonitor[_0x75e0ba(0x159)],JSON[_0x75e0ba(0x177)](RequestMonitor[_0x75e0ba(0x147)],null,0x2)),await fs[_0x75e0ba(0x182)](RequestMonitor[_0x75e0ba(0x185)],JSON['stringify'](RequestMonitor['httpCodesData'],null,0x2));}catch(_0x22d3f2){console[_0x75e0ba(0x14b)](_0x75e0ba(0x180),_0x22d3f2);}}static async[a1_0x1652cf(0x15c)](){const _0x44a537=a1_0x1652cf;setInterval(()=>RequestMonitor[_0x44a537(0x156)](),0x3c*0x3e8),setInterval(()=>{const _0x478ec8=_0x44a537;RequestMonitor[_0x478ec8(0x15b)]()[_0x478ec8(0x148)](()=>{});},0x3c*0x3e8),RequestMonitor['getUsageRessourcesStatsAndSave']()[_0x44a537(0x148)](()=>{});}static async[a1_0x1652cf(0x15b)](){const _0x382a9e=a1_0x1652cf,_0x2a2e38=osu[_0x382a9e(0x18b)],_0x473ee6=osu[_0x382a9e(0x18f)],_0x4246ea=osu[_0x382a9e(0x14f)],_0x2636e4={'total':{'inputMb':0x0,'outputMb':0x0}};try{const _0x30a7bf=await _0x4246ea[_0x382a9e(0x164)]();_0x2636e4[_0x382a9e(0x17e)][_0x382a9e(0x149)]=_0x30a7bf[_0x382a9e(0x17e)][_0x382a9e(0x149)],_0x2636e4[_0x382a9e(0x17e)][_0x382a9e(0x15f)]=_0x30a7bf['total']['outputMb'];}catch(_0x4d45f9){}let _0x3b4804=0x0;try{_0x3b4804=await _0x2a2e38[_0x382a9e(0x146)]();}catch(_0x48d92a){console[_0x382a9e(0x17d)](_0x382a9e(0x15a),_0x48d92a);}const _0x5bcbbc={'usedMemMb':0x0};try{const _0x1b2459=await _0x473ee6[_0x382a9e(0x171)]();_0x5bcbbc[_0x382a9e(0x187)]=_0x1b2459['usedMemMb'];}catch(_0x3f1d60){console[_0x382a9e(0x17d)](_0x382a9e(0x183),_0x3f1d60);}const _0x23bd09=new Date()[_0x382a9e(0x163)]()[_0x382a9e(0x160)]()[_0x382a9e(0x15d)](0x2,'0')+':'+new Date()[_0x382a9e(0x151)]()[_0x382a9e(0x160)]()['padStart'](0x2,'0');RequestMonitor[_0x382a9e(0x170)][_0x382a9e(0x18b)]=RequestMonitor['ressourcesUsageStats'][_0x382a9e(0x18b)]['slice'](-0x3c)[_0x382a9e(0x16d)](_0x1a8aac=>_0x1a8aac[_0x382a9e(0x16a)]!==_0x23bd09),RequestMonitor[_0x382a9e(0x170)][_0x382a9e(0x168)]=RequestMonitor[_0x382a9e(0x170)][_0x382a9e(0x168)]['slice'](-0x3c)[_0x382a9e(0x16d)](_0x98e79d=>_0x98e79d[_0x382a9e(0x16a)]!==_0x23bd09),RequestMonitor[_0x382a9e(0x170)]['network']=RequestMonitor['ressourcesUsageStats'][_0x382a9e(0x173)]['slice'](-0x3c)['filter'](_0x5c74f2=>_0x5c74f2[_0x382a9e(0x16a)]!==_0x23bd09),RequestMonitor[_0x382a9e(0x170)]['cpu'][_0x382a9e(0x16c)]({'time':_0x23bd09,'usage':_0x3b4804}),RequestMonitor['ressourcesUsageStats'][_0x382a9e(0x168)][_0x382a9e(0x16c)]({'time':_0x23bd09,'usage':(_0x5bcbbc['usedMemMb']/0x3e8)[_0x382a9e(0x169)](0x2)}),RequestMonitor['ressourcesUsageStats'][_0x382a9e(0x173)][_0x382a9e(0x16c)]({'time':_0x23bd09,'usage':{'in':_0x2636e4[_0x382a9e(0x17e)]?.[_0x382a9e(0x149)]??0x0,'out':_0x2636e4[_0x382a9e(0x17e)]?.[_0x382a9e(0x15f)]??0x0}});try{await fs['writeFile'](RequestMonitor[_0x382a9e(0x186)],JSON['stringify'](RequestMonitor[_0x382a9e(0x170)],null,0x2));}catch(_0x1988bc){console[_0x382a9e(0x14b)](_0x382a9e(0x180),_0x1988bc);}}static['getStats'](){const _0x4da06f=a1_0x1652cf,_0x1b68f3=Date[_0x4da06f(0x144)](),_0x1fe0d5=_0x1b68f3-0x3c*0x3c*0x3e8,_0x346a79=_0x1b68f3-0x18*0x3c*0x3c*0x3e8,_0xa6c174=RequestMonitor[_0x4da06f(0x147)][_0x4da06f(0x16d)](_0x44886c=>_0x44886c[_0x4da06f(0x155)]>_0x1fe0d5),_0x29020f={'total':RequestMonitor[_0x4da06f(0x154)][_0x4da06f(0x166)],'byCodes':{},'byPath':{}};return RequestMonitor[_0x4da06f(0x154)][_0x4da06f(0x14e)](_0x199c42=>{const _0xcd2c22=_0x4da06f;_0x29020f[_0xcd2c22(0x162)][_0x199c42[_0xcd2c22(0x157)]]=(_0x29020f[_0xcd2c22(0x162)][_0x199c42[_0xcd2c22(0x157)]]||0x0)+0x1;const _0x4ba0f4=_0x199c42['method']+'\x20'+_0x199c42[_0xcd2c22(0x190)];!_0x29020f[_0xcd2c22(0x167)][_0x4ba0f4]&&(_0x29020f[_0xcd2c22(0x167)][_0x4ba0f4]={'total':0x0,'codes':{}}),_0x29020f[_0xcd2c22(0x167)][_0x4ba0f4][_0xcd2c22(0x17e)]++,_0x29020f[_0xcd2c22(0x167)][_0x4ba0f4]['codes'][_0x199c42['statusCode']]=(_0x29020f[_0xcd2c22(0x167)][_0x4ba0f4][_0xcd2c22(0x161)][_0x199c42[_0xcd2c22(0x157)]]||0x0)+0x1;}),{'rps':_0xa6c174,'httpCodes':_0x29020f,'ressourcesUsageStats':RequestMonitor['ressourcesUsageStats']};}}RequestMonitor['init']()[a1_0x1652cf(0x148)](()=>{}),RequestMonitor['startPeriodicSave']();const counter=RequestMonitor;module[a1_0x1652cf(0x18d)]=counter;
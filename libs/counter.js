function a1_0x150e(){const _0x3f65d7=['currentRequests','getUsageRessourcesStatsAndSave','length','includes','mem','3ZBJDhQ','exports','then','8111144ZKMhuv','error','writeFile','httpCodesStoragePath','108DmNPFP','rpsData','netstat','334910WnUoun','usedMemMb','2925580DVBxZW','Request\x20monitor\x20initialized.','ressourcesUsageStatsPath','timestamp','10238430iZWXMQ','Error\x20saving\x20monitoring\x20data:','Initializing\x20request\x20monitor...','middleware','toString','stringify','inOut','save','5hdpBLq','inputMb','Request\x20monitor\x20middleware','1755350itLoXu','method','Error\x20getting\x20CPU\x20usage:','log','lastMinute','time','readFile','end','utf8','network','ressourcesUsageStats','parse','httpCodesData','memory','getHours','cpu','node-os-utils','slice','statusCode','byPath','init','cadviewer/settings/http-codes-24h.json','filter','path','padStart','=======>','push','rpsStoragePath','promises','forEach','cadviewer/settings/requests-per-minute.json','byCodes','total','codes','2735212VLsRFF','info','6807969AXbZxa','usage','now','outputMb','/metrics','floor','toFixed'];a1_0x150e=function(){return _0x3f65d7;};return a1_0x150e();}const a1_0x214784=a1_0xa353;(function(_0x4e3a34,_0x2a3704){const _0x3163cd=a1_0xa353,_0x3d4a77=_0x4e3a34();while(!![]){try{const _0x1845f2=-parseInt(_0x3163cd(0x1c8))/0x1+parseInt(_0x3163cd(0x1b7))/0x2+-parseInt(_0x3163cd(0x1f8))/0x3*(-parseInt(_0x3163cd(0x1ea))/0x4)+parseInt(_0x3163cd(0x1c5))/0x5*(-parseInt(_0x3163cd(0x1bd))/0x6)+-parseInt(_0x3163cd(0x1ec))/0x7+parseInt(_0x3163cd(0x1b0))/0x8+parseInt(_0x3163cd(0x1b4))/0x9*(parseInt(_0x3163cd(0x1b9))/0xa);if(_0x1845f2===_0x2a3704)break;else _0x3d4a77['push'](_0x3d4a77['shift']());}catch(_0x29d458){_0x3d4a77['push'](_0x3d4a77['shift']());}}}(a1_0x150e,0xe5dd5));const fs=require('fs')[a1_0x214784(0x1e4)],osu=require(a1_0x214784(0x1d8));function a1_0xa353(_0x25624c,_0x5edf08){const _0x150e6c=a1_0x150e();return a1_0xa353=function(_0xa353be,_0x1df368){_0xa353be=_0xa353be-0x1af;let _0x5bd10f=_0x150e6c[_0xa353be];return _0x5bd10f;},a1_0xa353(_0x25624c,_0x5edf08);}class RequestMonitor{static [a1_0x214784(0x1e3)]=a1_0x214784(0x1e6);static ['httpCodesStoragePath']=a1_0x214784(0x1dd);static ['ressourcesUsageStatsPath']='cadviewer/settings/ressources-usage-stats.json';static [a1_0x214784(0x1b5)]=[];static ['httpCodesData']=[];static [a1_0x214784(0x1d2)]={};static ['lastMinute']=Math[a1_0x214784(0x1f1)](Date[a1_0x214784(0x1ee)]()/0x3e8/0x3c);static ['currentRequests']=0x0;static async[a1_0x214784(0x1dc)](){const _0x34c528=a1_0x214784;console[_0x34c528(0x1cb)](_0x34c528(0x1bf));try{const _0x47814b=await fs[_0x34c528(0x1ce)](RequestMonitor[_0x34c528(0x1e3)],_0x34c528(0x1d0));RequestMonitor[_0x34c528(0x1b5)]=JSON[_0x34c528(0x1d3)](_0x47814b);}catch(_0x43a57c){RequestMonitor[_0x34c528(0x1b5)]=[];}try{const _0x40a347=await fs[_0x34c528(0x1ce)](RequestMonitor[_0x34c528(0x1b3)],'utf8');RequestMonitor[_0x34c528(0x1d4)]=JSON['parse'](_0x40a347);}catch(_0x32a451){RequestMonitor[_0x34c528(0x1d4)]=[];}try{const _0x3665de=await fs['readFile'](RequestMonitor[_0x34c528(0x1bb)],_0x34c528(0x1d0));RequestMonitor[_0x34c528(0x1d2)]=JSON[_0x34c528(0x1d3)](_0x3665de),!RequestMonitor['ressourcesUsageStats'][_0x34c528(0x1d7)]&&(RequestMonitor[_0x34c528(0x1d2)][_0x34c528(0x1d7)]=[]),!RequestMonitor[_0x34c528(0x1d2)][_0x34c528(0x1d5)]&&(RequestMonitor[_0x34c528(0x1d2)][_0x34c528(0x1d5)]=[]),!RequestMonitor[_0x34c528(0x1d2)][_0x34c528(0x1d1)]&&(RequestMonitor['ressourcesUsageStats'][_0x34c528(0x1d1)]=[]);}catch(_0x467aa0){RequestMonitor['ressourcesUsageStats']={'cpu':[],'memory':[],'network':[]};}console[_0x34c528(0x1cb)](_0x34c528(0x1ba));}static[a1_0x214784(0x1c0)](_0x396993,_0x5a005b,_0x41f493){const _0x26e6bf=a1_0x214784;if(_0x396993[_0x26e6bf(0x1df)][_0x26e6bf(0x1f6)](_0x26e6bf(0x1f0)))return _0x41f493();console[_0x26e6bf(0x1cb)](_0x26e6bf(0x1c7));let _0x2be0c1=Date[_0x26e6bf(0x1ee)](),_0x412f81=Math['floor'](_0x2be0c1/0x3e8/0x3c);console[_0x26e6bf(0x1cb)](_0x26e6bf(0x1e1));const _0x442a67=_0x5a005b[_0x26e6bf(0x1cf)];_0x5a005b['end']=(..._0x4bc31a)=>{const _0x4c2b65=_0x26e6bf;console[_0x4c2b65(0x1cb)](_0x412f81,{'currentMinute':_0x412f81});_0x412f81>RequestMonitor[_0x4c2b65(0x1cc)]&&(RequestMonitor['rpsData'][_0x4c2b65(0x1e2)]({'timestamp':RequestMonitor[_0x4c2b65(0x1cc)]*0x3e8*0x3c,'requests':RequestMonitor[_0x4c2b65(0x1f3)]}),RequestMonitor[_0x4c2b65(0x1f3)]=0x0,RequestMonitor[_0x4c2b65(0x1cc)]=_0x412f81);RequestMonitor[_0x4c2b65(0x1f3)]++,RequestMonitor[_0x4c2b65(0x1d4)]['push']({'timestamp':Date['now'](),'statusCode':_0x5a005b[_0x4c2b65(0x1da)],'path':_0x396993[_0x4c2b65(0x1df)],'method':_0x396993[_0x4c2b65(0x1c9)]});const _0x34afb3=Date[_0x4c2b65(0x1ee)]()-0x18*0x3c*0x3c*0x3e8;return RequestMonitor[_0x4c2b65(0x1d4)]=RequestMonitor[_0x4c2b65(0x1d4)][_0x4c2b65(0x1de)](_0x4e83ac=>_0x4e83ac[_0x4c2b65(0x1bc)]>_0x34afb3),_0x442a67['apply'](_0x5a005b,_0x4bc31a);},_0x41f493();}static async[a1_0x214784(0x1c4)](){const _0x181b05=a1_0x214784;try{RequestMonitor[_0x181b05(0x1cc)]!==Math['floor'](Date[_0x181b05(0x1ee)]()/0x3e8/0x3c)&&(RequestMonitor['rpsData'][_0x181b05(0x1e2)]({'timestamp':RequestMonitor[_0x181b05(0x1cc)]*0x3e8*0x3c,'requests':RequestMonitor['currentRequests']}),RequestMonitor[_0x181b05(0x1f3)]=0x0,RequestMonitor[_0x181b05(0x1cc)]=Math[_0x181b05(0x1f1)](Date[_0x181b05(0x1ee)]()/0x3e8/0x3c)),await fs['writeFile'](RequestMonitor[_0x181b05(0x1e3)],JSON[_0x181b05(0x1c2)](RequestMonitor[_0x181b05(0x1b5)],null,0x2)),await fs[_0x181b05(0x1b2)](RequestMonitor[_0x181b05(0x1b3)],JSON[_0x181b05(0x1c2)](RequestMonitor[_0x181b05(0x1d4)],null,0x2));}catch(_0x391fde){console[_0x181b05(0x1b1)](_0x181b05(0x1be),_0x391fde);}}static async['startPeriodicSave'](){const _0x4da0d0=a1_0x214784;setInterval(()=>RequestMonitor[_0x4da0d0(0x1c4)](),0x3c*0x3e8),setInterval(()=>{const _0x2cf6fa=_0x4da0d0;RequestMonitor[_0x2cf6fa(0x1f4)]()['then'](()=>{});},0x3c*0x3e8),RequestMonitor[_0x4da0d0(0x1f4)]()[_0x4da0d0(0x1af)](()=>{});}static async[a1_0x214784(0x1f4)](){const _0x2e34f7=a1_0x214784,_0x4038b0=osu[_0x2e34f7(0x1d7)],_0x435c6d=osu[_0x2e34f7(0x1f7)],_0xe5ab9d=osu[_0x2e34f7(0x1b6)],_0x42c9d1={'total':{'inputMb':0x0,'outputMb':0x0}};try{const _0x3f72fd=await _0xe5ab9d[_0x2e34f7(0x1c3)]();_0x42c9d1['total'][_0x2e34f7(0x1c6)]=_0x3f72fd[_0x2e34f7(0x1e8)][_0x2e34f7(0x1c6)],_0x42c9d1[_0x2e34f7(0x1e8)][_0x2e34f7(0x1ef)]=_0x3f72fd[_0x2e34f7(0x1e8)][_0x2e34f7(0x1ef)];}catch(_0x1aff8f){}let _0x325e8f=0x0;try{_0x325e8f=await _0x4038b0[_0x2e34f7(0x1ed)]();}catch(_0x3888a6){console[_0x2e34f7(0x1cb)](_0x2e34f7(0x1ca),_0x3888a6);}const _0x1c2510={'usedMemMb':0x0};try{const _0x504b31=await _0x435c6d[_0x2e34f7(0x1eb)]();_0x1c2510['usedMemMb']=_0x504b31[_0x2e34f7(0x1b8)];}catch(_0x2832b8){console[_0x2e34f7(0x1cb)]('Error\x20getting\x20memory\x20usage:',_0x2832b8);}const _0x1d566b=new Date()[_0x2e34f7(0x1d6)]()[_0x2e34f7(0x1c1)]()[_0x2e34f7(0x1e0)](0x2,'0')+':'+new Date()['getMinutes']()[_0x2e34f7(0x1c1)]()[_0x2e34f7(0x1e0)](0x2,'0');RequestMonitor['ressourcesUsageStats'][_0x2e34f7(0x1d7)]=RequestMonitor[_0x2e34f7(0x1d2)][_0x2e34f7(0x1d7)][_0x2e34f7(0x1d9)](-0x3c)['filter'](_0x409f04=>_0x409f04[_0x2e34f7(0x1cd)]!==_0x1d566b),RequestMonitor['ressourcesUsageStats'][_0x2e34f7(0x1d5)]=RequestMonitor[_0x2e34f7(0x1d2)][_0x2e34f7(0x1d5)][_0x2e34f7(0x1d9)](-0x3c)['filter'](_0x3f69fd=>_0x3f69fd[_0x2e34f7(0x1cd)]!==_0x1d566b),RequestMonitor[_0x2e34f7(0x1d2)]['network']=RequestMonitor[_0x2e34f7(0x1d2)][_0x2e34f7(0x1d1)][_0x2e34f7(0x1d9)](-0x3c)[_0x2e34f7(0x1de)](_0x5f02a1=>_0x5f02a1[_0x2e34f7(0x1cd)]!==_0x1d566b),RequestMonitor['ressourcesUsageStats'][_0x2e34f7(0x1d7)][_0x2e34f7(0x1e2)]({'time':_0x1d566b,'usage':_0x325e8f}),RequestMonitor[_0x2e34f7(0x1d2)][_0x2e34f7(0x1d5)]['push']({'time':_0x1d566b,'usage':(_0x1c2510['usedMemMb']/0x3e8)[_0x2e34f7(0x1f2)](0x2)}),RequestMonitor[_0x2e34f7(0x1d2)][_0x2e34f7(0x1d1)][_0x2e34f7(0x1e2)]({'time':_0x1d566b,'usage':{'in':_0x42c9d1[_0x2e34f7(0x1e8)]?.[_0x2e34f7(0x1c6)]??0x0,'out':_0x42c9d1[_0x2e34f7(0x1e8)]?.[_0x2e34f7(0x1ef)]??0x0}});try{await fs[_0x2e34f7(0x1b2)](RequestMonitor[_0x2e34f7(0x1bb)],JSON['stringify'](RequestMonitor[_0x2e34f7(0x1d2)],null,0x2));}catch(_0x18b0d2){console[_0x2e34f7(0x1b1)](_0x2e34f7(0x1be),_0x18b0d2);}}static['getStats'](){const _0x51f07b=a1_0x214784,_0xee602c=Date[_0x51f07b(0x1ee)](),_0x47584c=_0xee602c-0x3c*0x3c*0x3e8,_0x4f7e3c=_0xee602c-0x18*0x3c*0x3c*0x3e8,_0x1a8b9e=RequestMonitor[_0x51f07b(0x1b5)][_0x51f07b(0x1de)](_0x5dacbb=>_0x5dacbb[_0x51f07b(0x1bc)]>_0x47584c),_0x1148e4={'total':RequestMonitor['httpCodesData'][_0x51f07b(0x1f5)],'byCodes':{},'byPath':{}};return RequestMonitor[_0x51f07b(0x1d4)][_0x51f07b(0x1e5)](_0x3828db=>{const _0x862461=_0x51f07b;_0x1148e4[_0x862461(0x1e7)][_0x3828db[_0x862461(0x1da)]]=(_0x1148e4[_0x862461(0x1e7)][_0x3828db[_0x862461(0x1da)]]||0x0)+0x1;const _0x322564=_0x3828db['method']+'\x20'+_0x3828db[_0x862461(0x1df)];!_0x1148e4[_0x862461(0x1db)][_0x322564]&&(_0x1148e4['byPath'][_0x322564]={'total':0x0,'codes':{}}),_0x1148e4[_0x862461(0x1db)][_0x322564][_0x862461(0x1e8)]++,_0x1148e4[_0x862461(0x1db)][_0x322564][_0x862461(0x1e9)][_0x3828db[_0x862461(0x1da)]]=(_0x1148e4[_0x862461(0x1db)][_0x322564][_0x862461(0x1e9)][_0x3828db[_0x862461(0x1da)]]||0x0)+0x1;}),{'rps':_0x1a8b9e,'httpCodes':_0x1148e4,'ressourcesUsageStats':RequestMonitor[_0x51f07b(0x1d2)]};}}RequestMonitor['init']()[a1_0x214784(0x1af)](()=>{}),RequestMonitor['startPeriodicSave']();const counter=RequestMonitor;module[a1_0x214784(0x1f9)]=counter;